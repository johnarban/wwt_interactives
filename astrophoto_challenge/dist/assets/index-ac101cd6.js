(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))_(g);new MutationObserver(g=>{for(const w of g)if(w.type==="childList")for(const M of w.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&_(M)}).observe(document,{childList:!0,subtree:!0});function u(g){const w={};return g.integrity&&(w.integrity=g.integrity),g.referrerPolicy&&(w.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?w.credentials="include":g.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function _(g){if(g.ep)return;g.ep=!0;const w=u(g);fetch(g.href,w)}})();function makeMap(i,o){const u=Object.create(null),_=i.split(",");for(let g=0;g<_.length;g++)u[_[g]]=!0;return o?g=>!!u[g.toLowerCase()]:g=>!!u[g]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE$1=/^on[^a-z]/,isOn$1=i=>onRE$1.test(i),isModelListener=i=>i.startsWith("onUpdate:"),extend=Object.assign,remove=(i,o)=>{const u=i.indexOf(o);u>-1&&i.splice(u,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(i,o)=>hasOwnProperty$1.call(i,o),isArray=Array.isArray,isMap=i=>toTypeString(i)==="[object Map]",isSet=i=>toTypeString(i)==="[object Set]",isDate=i=>toTypeString(i)==="[object Date]",isRegExp=i=>toTypeString(i)==="[object RegExp]",isFunction=i=>typeof i=="function",isString=i=>typeof i=="string",isSymbol=i=>typeof i=="symbol",isObject$1=i=>i!==null&&typeof i=="object",isPromise=i=>isObject$1(i)&&isFunction(i.then)&&isFunction(i.catch),objectToString=Object.prototype.toString,toTypeString=i=>objectToString.call(i),toRawType=i=>toTypeString(i).slice(8,-1),isPlainObject=i=>toTypeString(i)==="[object Object]",isIntegerKey=i=>isString(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=i=>{const o=Object.create(null);return u=>o[u]||(o[u]=i(u))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(i=>i.replace(camelizeRE,(o,u)=>u?u.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(i=>i.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(i=>i.charAt(0).toUpperCase()+i.slice(1)),toHandlerKey=cacheStringFunction(i=>i?`on${capitalize(i)}`:""),hasChanged=(i,o)=>!Object.is(i,o),invokeArrayFns=(i,o)=>{for(let u=0;u<i.length;u++)i[u](o)},def=(i,o,u)=>{Object.defineProperty(i,o,{configurable:!0,enumerable:!1,value:u})},looseToNumber=i=>{const o=parseFloat(i);return isNaN(o)?i:o},toNumber=i=>{const o=isString(i)?Number(i):NaN;return isNaN(o)?i:o};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_WHITE_LISTED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",isGloballyWhitelisted=makeMap(GLOBALS_WHITE_LISTED);function normalizeStyle(i){if(isArray(i)){const o={};for(let u=0;u<i.length;u++){const _=i[u],g=isString(_)?parseStringStyle(_):normalizeStyle(_);if(g)for(const w in g)o[w]=g[w]}return o}else{if(isString(i))return i;if(isObject$1(i))return i}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(i){const o={};return i.replace(styleCommentRE,"").split(listDelimiterRE).forEach(u=>{if(u){const _=u.split(propertyDelimiterRE);_.length>1&&(o[_[0].trim()]=_[1].trim())}}),o}function normalizeClass(i){let o="";if(isString(i))o=i;else if(isArray(i))for(let u=0;u<i.length;u++){const _=normalizeClass(i[u]);_&&(o+=_+" ")}else if(isObject$1(i))for(const u in i)i[u]&&(o+=u+" ");return o.trim()}function normalizeProps(i){if(!i)return null;let{class:o,style:u}=i;return o&&!isString(o)&&(i.class=normalizeClass(o)),u&&(i.style=normalizeStyle(u)),i}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(i){return!!i||i===""}function looseCompareArrays(i,o){if(i.length!==o.length)return!1;let u=!0;for(let _=0;u&&_<i.length;_++)u=looseEqual(i[_],o[_]);return u}function looseEqual(i,o){if(i===o)return!0;let u=isDate(i),_=isDate(o);if(u||_)return u&&_?i.getTime()===o.getTime():!1;if(u=isSymbol(i),_=isSymbol(o),u||_)return i===o;if(u=isArray(i),_=isArray(o),u||_)return u&&_?looseCompareArrays(i,o):!1;if(u=isObject$1(i),_=isObject$1(o),u||_){if(!u||!_)return!1;const g=Object.keys(i).length,w=Object.keys(o).length;if(g!==w)return!1;for(const M in i){const R=i.hasOwnProperty(M),E=o.hasOwnProperty(M);if(R&&!E||!R&&E||!looseEqual(i[M],o[M]))return!1}}return String(i)===String(o)}function looseIndexOf(i,o){return i.findIndex(u=>looseEqual(u,o))}const toDisplayString=i=>isString(i)?i:i==null?"":isArray(i)||isObject$1(i)&&(i.toString===objectToString||!isFunction(i.toString))?JSON.stringify(i,replacer,2):String(i),replacer=(i,o)=>o&&o.__v_isRef?replacer(i,o.value):isMap(o)?{[`Map(${o.size})`]:[...o.entries()].reduce((u,[_,g])=>(u[`${_} =>`]=g,u),{})}:isSet(o)?{[`Set(${o.size})`]:[...o.values()]}:isObject$1(o)&&!isArray(o)&&!isPlainObject(o)?String(o):o;let activeEffectScope;class EffectScope{constructor(o=!1){this.detached=o,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!o&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(o){if(this._active){const u=activeEffectScope;try{return activeEffectScope=this,o()}finally{activeEffectScope=u}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(o){if(this._active){let u,_;for(u=0,_=this.effects.length;u<_;u++)this.effects[u].stop();for(u=0,_=this.cleanups.length;u<_;u++)this.cleanups[u]();if(this.scopes)for(u=0,_=this.scopes.length;u<_;u++)this.scopes[u].stop(!0);if(!this.detached&&this.parent&&!o){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(i){return new EffectScope(i)}function recordEffectScope(i,o=activeEffectScope){o&&o.active&&o.effects.push(i)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(i){activeEffectScope&&activeEffectScope.cleanups.push(i)}const createDep=i=>{const o=new Set(i);return o.w=0,o.n=0,o},wasTracked=i=>(i.w&trackOpBit)>0,newTracked=i=>(i.n&trackOpBit)>0,initDepMarkers=({deps:i})=>{if(i.length)for(let o=0;o<i.length;o++)i[o].w|=trackOpBit},finalizeDepMarkers=i=>{const{deps:o}=i;if(o.length){let u=0;for(let _=0;_<o.length;_++){const g=o[_];wasTracked(g)&&!newTracked(g)?g.delete(i):o[u++]=g,g.w&=~trackOpBit,g.n&=~trackOpBit}o.length=u}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(o,u=null,_){this.fn=o,this.scheduler=u,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,_)}run(){if(!this.active)return this.fn();let o=activeEffect,u=shouldTrack;for(;o;){if(o===this)return;o=o.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=u,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(i){const{deps:o}=i;if(o.length){for(let u=0;u<o.length;u++)o[u].delete(i);o.length=0}}function effect(i,o){i.effect&&(i=i.effect.fn);const u=new ReactiveEffect(i);o&&(extend(u,o),o.scope&&recordEffectScope(u,o.scope)),(!o||!o.lazy)&&u.run();const _=u.run.bind(u);return _.effect=u,_}function stop(i){i.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const i=trackStack.pop();shouldTrack=i===void 0?!0:i}function track(i,o,u){if(shouldTrack&&activeEffect){let _=targetMap.get(i);_||targetMap.set(i,_=new Map);let g=_.get(u);g||_.set(u,g=createDep()),trackEffects(g)}}function trackEffects(i,o){let u=!1;effectTrackDepth<=maxMarkerBits?newTracked(i)||(i.n|=trackOpBit,u=!wasTracked(i)):u=!i.has(activeEffect),u&&(i.add(activeEffect),activeEffect.deps.push(i))}function trigger(i,o,u,_,g,w){const M=targetMap.get(i);if(!M)return;let R=[];if(o==="clear")R=[...M.values()];else if(u==="length"&&isArray(i)){const E=Number(_);M.forEach((D,B)=>{(B==="length"||B>=E)&&R.push(D)})}else switch(u!==void 0&&R.push(M.get(u)),o){case"add":isArray(i)?isIntegerKey(u)&&R.push(M.get("length")):(R.push(M.get(ITERATE_KEY)),isMap(i)&&R.push(M.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(i)||(R.push(M.get(ITERATE_KEY)),isMap(i)&&R.push(M.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(i)&&R.push(M.get(ITERATE_KEY));break}if(R.length===1)R[0]&&triggerEffects(R[0]);else{const E=[];for(const D of R)D&&E.push(...D);triggerEffects(createDep(E))}}function triggerEffects(i,o){const u=isArray(i)?i:[...i];for(const _ of u)_.computed&&triggerEffect(_);for(const _ of u)_.computed||triggerEffect(_)}function triggerEffect(i,o){(i!==activeEffect||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}function getDepFromReactive(i,o){var u;return(u=targetMap.get(i))==null?void 0:u.get(o)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),shallowReadonlyGet=createGetter(!0,!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const i={};return["includes","indexOf","lastIndexOf"].forEach(o=>{i[o]=function(...u){const _=toRaw(this);for(let w=0,M=this.length;w<M;w++)track(_,"get",w+"");const g=_[o](...u);return g===-1||g===!1?_[o](...u.map(toRaw)):g}}),["push","pop","shift","unshift","splice"].forEach(o=>{i[o]=function(...u){pauseTracking();const _=toRaw(this)[o].apply(this,u);return resetTracking(),_}}),i}function hasOwnProperty(i){const o=toRaw(this);return track(o,"has",i),o.hasOwnProperty(i)}function createGetter(i=!1,o=!1){return function(_,g,w){if(g==="__v_isReactive")return!i;if(g==="__v_isReadonly")return i;if(g==="__v_isShallow")return o;if(g==="__v_raw"&&w===(i?o?shallowReadonlyMap:readonlyMap:o?shallowReactiveMap:reactiveMap).get(_))return _;const M=isArray(_);if(!i){if(M&&hasOwn(arrayInstrumentations,g))return Reflect.get(arrayInstrumentations,g,w);if(g==="hasOwnProperty")return hasOwnProperty}const R=Reflect.get(_,g,w);return(isSymbol(g)?builtInSymbols.has(g):isNonTrackableKeys(g))||(i||track(_,"get",g),o)?R:isRef(R)?M&&isIntegerKey(g)?R:R.value:isObject$1(R)?i?readonly(R):reactive(R):R}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(i=!1){return function(u,_,g,w){let M=u[_];if(isReadonly(M)&&isRef(M)&&!isRef(g))return!1;if(!i&&(!isShallow(g)&&!isReadonly(g)&&(M=toRaw(M),g=toRaw(g)),!isArray(u)&&isRef(M)&&!isRef(g)))return M.value=g,!0;const R=isArray(u)&&isIntegerKey(_)?Number(_)<u.length:hasOwn(u,_),E=Reflect.set(u,_,g,w);return u===toRaw(w)&&(R?hasChanged(g,M)&&trigger(u,"set",_,g):trigger(u,"add",_,g)),E}}function deleteProperty(i,o){const u=hasOwn(i,o);i[o];const _=Reflect.deleteProperty(i,o);return _&&u&&trigger(i,"delete",o,void 0),_}function has$1(i,o){const u=Reflect.has(i,o);return(!isSymbol(o)||!builtInSymbols.has(o))&&track(i,"has",o),u}function ownKeys(i){return track(i,"iterate",isArray(i)?"length":ITERATE_KEY),Reflect.ownKeys(i)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(i,o){return!0},deleteProperty(i,o){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),shallowReadonlyHandlers=extend({},readonlyHandlers,{get:shallowReadonlyGet}),toShallow=i=>i,getProto=i=>Reflect.getPrototypeOf(i);function get(i,o,u=!1,_=!1){i=i.__v_raw;const g=toRaw(i),w=toRaw(o);u||(o!==w&&track(g,"get",o),track(g,"get",w));const{has:M}=getProto(g),R=_?toShallow:u?toReadonly:toReactive;if(M.call(g,o))return R(i.get(o));if(M.call(g,w))return R(i.get(w));i!==g&&i.get(o)}function has$2(i,o=!1){const u=this.__v_raw,_=toRaw(u),g=toRaw(i);return o||(i!==g&&track(_,"has",i),track(_,"has",g)),i===g?u.has(i):u.has(i)||u.has(g)}function size(i,o=!1){return i=i.__v_raw,!o&&track(toRaw(i),"iterate",ITERATE_KEY),Reflect.get(i,"size",i)}function add(i){i=toRaw(i);const o=toRaw(this);return getProto(o).has.call(o,i)||(o.add(i),trigger(o,"add",i,i)),this}function set(i,o){o=toRaw(o);const u=toRaw(this),{has:_,get:g}=getProto(u);let w=_.call(u,i);w||(i=toRaw(i),w=_.call(u,i));const M=g.call(u,i);return u.set(i,o),w?hasChanged(o,M)&&trigger(u,"set",i,o):trigger(u,"add",i,o),this}function deleteEntry(i){const o=toRaw(this),{has:u,get:_}=getProto(o);let g=u.call(o,i);g||(i=toRaw(i),g=u.call(o,i)),_&&_.call(o,i);const w=o.delete(i);return g&&trigger(o,"delete",i,void 0),w}function clear(){const i=toRaw(this),o=i.size!==0,u=i.clear();return o&&trigger(i,"clear",void 0,void 0),u}function createForEach(i,o){return function(_,g){const w=this,M=w.__v_raw,R=toRaw(M),E=o?toShallow:i?toReadonly:toReactive;return!i&&track(R,"iterate",ITERATE_KEY),M.forEach((D,B)=>_.call(g,E(D),E(B),w))}}function createIterableMethod(i,o,u){return function(..._){const g=this.__v_raw,w=toRaw(g),M=isMap(w),R=i==="entries"||i===Symbol.iterator&&M,E=i==="keys"&&M,D=g[i](..._),B=u?toShallow:o?toReadonly:toReactive;return!o&&track(w,"iterate",E?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:j,done:J}=D.next();return J?{value:j,done:J}:{value:R?[B(j[0]),B(j[1])]:B(j),done:J}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(i){return function(...o){return i==="delete"?!1:this}}function createInstrumentations(){const i={get(w){return get(this,w)},get size(){return size(this)},has:has$2,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},o={get(w){return get(this,w,!1,!0)},get size(){return size(this)},has:has$2,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},u={get(w){return get(this,w,!0)},get size(){return size(this,!0)},has(w){return has$2.call(this,w,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},_={get(w){return get(this,w,!0,!0)},get size(){return size(this,!0)},has(w){return has$2.call(this,w,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(w=>{i[w]=createIterableMethod(w,!1,!1),u[w]=createIterableMethod(w,!0,!1),o[w]=createIterableMethod(w,!1,!0),_[w]=createIterableMethod(w,!0,!0)}),[i,u,o,_]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(i,o){const u=o?i?shallowReadonlyInstrumentations:shallowInstrumentations:i?readonlyInstrumentations:mutableInstrumentations;return(_,g,w)=>g==="__v_isReactive"?!i:g==="__v_isReadonly"?i:g==="__v_raw"?_:Reflect.get(hasOwn(u,g)&&g in _?u:_,g,w)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(i){return i.__v_skip||!Object.isExtensible(i)?0:targetTypeMap(toRawType(i))}function reactive(i){return isReadonly(i)?i:createReactiveObject(i,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(i){return createReactiveObject(i,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(i){return createReactiveObject(i,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(i){return createReactiveObject(i,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(i,o,u,_,g){if(!isObject$1(i)||i.__v_raw&&!(o&&i.__v_isReactive))return i;const w=g.get(i);if(w)return w;const M=getTargetType(i);if(M===0)return i;const R=new Proxy(i,M===2?_:u);return g.set(i,R),R}function isReactive(i){return isReadonly(i)?isReactive(i.__v_raw):!!(i&&i.__v_isReactive)}function isReadonly(i){return!!(i&&i.__v_isReadonly)}function isShallow(i){return!!(i&&i.__v_isShallow)}function isProxy(i){return isReactive(i)||isReadonly(i)}function toRaw(i){const o=i&&i.__v_raw;return o?toRaw(o):i}function markRaw(i){return def(i,"__v_skip",!0),i}const toReactive=i=>isObject$1(i)?reactive(i):i,toReadonly=i=>isObject$1(i)?readonly(i):i;function trackRefValue(i){shouldTrack&&activeEffect&&(i=toRaw(i),trackEffects(i.dep||(i.dep=createDep())))}function triggerRefValue(i,o){i=toRaw(i);const u=i.dep;u&&triggerEffects(u)}function isRef(i){return!!(i&&i.__v_isRef===!0)}function ref(i){return createRef(i,!1)}function shallowRef(i){return createRef(i,!0)}function createRef(i,o){return isRef(i)?i:new RefImpl(i,o)}class RefImpl{constructor(o,u){this.__v_isShallow=u,this.dep=void 0,this.__v_isRef=!0,this._rawValue=u?o:toRaw(o),this._value=u?o:toReactive(o)}get value(){return trackRefValue(this),this._value}set value(o){const u=this.__v_isShallow||isShallow(o)||isReadonly(o);o=u?o:toRaw(o),hasChanged(o,this._rawValue)&&(this._rawValue=o,this._value=u?o:toReactive(o),triggerRefValue(this))}}function triggerRef(i){triggerRefValue(i)}function unref(i){return isRef(i)?i.value:i}function toValue(i){return isFunction(i)?i():unref(i)}const shallowUnwrapHandlers={get:(i,o,u)=>unref(Reflect.get(i,o,u)),set:(i,o,u,_)=>{const g=i[o];return isRef(g)&&!isRef(u)?(g.value=u,!0):Reflect.set(i,o,u,_)}};function proxyRefs(i){return isReactive(i)?i:new Proxy(i,shallowUnwrapHandlers)}class CustomRefImpl{constructor(o){this.dep=void 0,this.__v_isRef=!0;const{get:u,set:_}=o(()=>trackRefValue(this),()=>triggerRefValue(this));this._get=u,this._set=_}get value(){return this._get()}set value(o){this._set(o)}}function customRef(i){return new CustomRefImpl(i)}function toRefs(i){const o=isArray(i)?new Array(i.length):{};for(const u in i)o[u]=propertyToRef(i,u);return o}class ObjectRefImpl{constructor(o,u,_){this._object=o,this._key=u,this._defaultValue=_,this.__v_isRef=!0}get value(){const o=this._object[this._key];return o===void 0?this._defaultValue:o}set value(o){this._object[this._key]=o}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(o){this._getter=o,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(i,o,u){return isRef(i)?i:isFunction(i)?new GetterRefImpl(i):isObject$1(i)&&arguments.length>1?propertyToRef(i,o,u):ref(i)}function propertyToRef(i,o,u){const _=i[o];return isRef(_)?_:new ObjectRefImpl(i,o,u)}class ComputedRefImpl{constructor(o,u,_,g){this._setter=u,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(o,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!g,this.__v_isReadonly=_}get value(){const o=toRaw(this);return trackRefValue(o),(o._dirty||!o._cacheable)&&(o._dirty=!1,o._value=o.effect.run()),o._value}set value(o){this._setter(o)}}function computed$1(i,o,u=!1){let _,g;const w=isFunction(i);return w?(_=i,g=NOOP):(_=i.get,g=i.set),new ComputedRefImpl(_,g,w||!g,u)}function warn(i,...o){}function assertNumber(i,o){}function callWithErrorHandling(i,o,u,_){let g;try{g=_?i(..._):i()}catch(w){handleError(w,o,u)}return g}function callWithAsyncErrorHandling(i,o,u,_){if(isFunction(i)){const w=callWithErrorHandling(i,o,u,_);return w&&isPromise(w)&&w.catch(M=>{handleError(M,o,u)}),w}const g=[];for(let w=0;w<i.length;w++)g.push(callWithAsyncErrorHandling(i[w],o,u,_));return g}function handleError(i,o,u,_=!0){const g=o?o.vnode:null;if(o){let w=o.parent;const M=o.proxy,R=u;for(;w;){const D=w.ec;if(D){for(let B=0;B<D.length;B++)if(D[B](i,M,R)===!1)return}w=w.parent}const E=o.appContext.config.errorHandler;if(E){callWithErrorHandling(E,null,10,[i,M,R]);return}}logError(i,u,g,_)}function logError(i,o,u,_=!0){console.error(i)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(i){const o=currentFlushPromise||resolvedPromise;return i?o.then(this?i.bind(this):i):o}function findInsertionIndex(i){let o=flushIndex+1,u=queue.length;for(;o<u;){const _=o+u>>>1;getId(queue[_])<i?o=_+1:u=_}return o}function queueJob(i){(!queue.length||!queue.includes(i,isFlushing&&i.allowRecurse?flushIndex+1:flushIndex))&&(i.id==null?queue.push(i):queue.splice(findInsertionIndex(i.id),0,i),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(i){const o=queue.indexOf(i);o>flushIndex&&queue.splice(o,1)}function queuePostFlushCb(i){isArray(i)?pendingPostFlushCbs.push(...i):(!activePostFlushCbs||!activePostFlushCbs.includes(i,i.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(i),queueFlush()}function flushPreFlushCbs(i,o=isFlushing?flushIndex+1:0){for(;o<queue.length;o++){const u=queue[o];u&&u.pre&&(queue.splice(o,1),o--,u())}}function flushPostFlushCbs(i){if(pendingPostFlushCbs.length){const o=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...o);return}for(activePostFlushCbs=o,activePostFlushCbs.sort((u,_)=>getId(u)-getId(_)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=i=>i.id==null?1/0:i.id,comparator=(i,o)=>{const u=getId(i)-getId(o);if(u===0){if(i.pre&&!o.pre)return-1;if(o.pre&&!i.pre)return 1}return u};function flushJobs(i){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const o=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const u=queue[flushIndex];u&&u.active!==!1&&callWithErrorHandling(u,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools,buffer=[];function setDevtoolsHook(i,o){var u,_;devtools=i,devtools?(devtools.enabled=!0,buffer.forEach(({event:g,args:w})=>devtools.emit(g,...w)),buffer=[]):typeof window<"u"&&window.HTMLElement&&!((_=(u=window.navigator)==null?void 0:u.userAgent)!=null&&_.includes("jsdom"))?((o.__VUE_DEVTOOLS_HOOK_REPLAY__=o.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(w=>{setDevtoolsHook(w,o)}),setTimeout(()=>{devtools||(o.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer=[])},3e3)):buffer=[]}function emit(i,o,...u){if(i.isUnmounted)return;const _=i.vnode.props||EMPTY_OBJ;let g=u;const w=o.startsWith("update:"),M=w&&o.slice(7);if(M&&M in _){const B=`${M==="modelValue"?"model":M}Modifiers`,{number:j,trim:J}=_[B]||EMPTY_OBJ;J&&(g=u.map(oe=>isString(oe)?oe.trim():oe)),j&&(g=u.map(looseToNumber))}let R,E=_[R=toHandlerKey(o)]||_[R=toHandlerKey(camelize(o))];!E&&w&&(E=_[R=toHandlerKey(hyphenate(o))]),E&&callWithAsyncErrorHandling(E,i,6,g);const D=_[R+"Once"];if(D){if(!i.emitted)i.emitted={};else if(i.emitted[R])return;i.emitted[R]=!0,callWithAsyncErrorHandling(D,i,6,g)}}function normalizeEmitsOptions(i,o,u=!1){const _=o.emitsCache,g=_.get(i);if(g!==void 0)return g;const w=i.emits;let M={},R=!1;if(!isFunction(i)){const E=D=>{const B=normalizeEmitsOptions(D,o,!0);B&&(R=!0,extend(M,B))};!u&&o.mixins.length&&o.mixins.forEach(E),i.extends&&E(i.extends),i.mixins&&i.mixins.forEach(E)}return!w&&!R?(isObject$1(i)&&_.set(i,null),null):(isArray(w)?w.forEach(E=>M[E]=null):extend(M,w),isObject$1(i)&&_.set(i,M),M)}function isEmitListener(i,o){return!i||!isOn$1(o)?!1:(o=o.slice(2).replace(/Once$/,""),hasOwn(i,o[0].toLowerCase()+o.slice(1))||hasOwn(i,hyphenate(o))||hasOwn(i,o))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(i){const o=currentRenderingInstance;return currentRenderingInstance=i,currentScopeId=i&&i.type.__scopeId||null,o}function pushScopeId(i){currentScopeId=i}function popScopeId(){currentScopeId=null}const withScopeId=i=>withCtx;function withCtx(i,o=currentRenderingInstance,u){if(!o||i._n)return i;const _=(...g)=>{_._d&&setBlockTracking(-1);const w=setCurrentRenderingInstance(o);let M;try{M=i(...g)}finally{setCurrentRenderingInstance(w),_._d&&setBlockTracking(1)}return M};return _._n=!0,_._c=!0,_._d=!0,_}function markAttrsAccessed(){}function renderComponentRoot(i){const{type:o,vnode:u,proxy:_,withProxy:g,props:w,propsOptions:[M],slots:R,attrs:E,emit:D,render:B,renderCache:j,data:J,setupState:oe,ctx:le,inheritAttrs:me}=i;let Be,pe;const re=setCurrentRenderingInstance(i);try{if(u.shapeFlag&4){const he=g||_;Be=normalizeVNode(B.call(he,he,j,w,oe,J,le)),pe=E}else{const he=o;Be=normalizeVNode(he.length>1?he(w,{attrs:E,slots:R,emit:D}):he(w,null)),pe=o.props?E:getFunctionalFallthrough(E)}}catch(he){blockStack.length=0,handleError(he,i,1),Be=createVNode(Comment)}let Le=Be;if(pe&&me!==!1){const he=Object.keys(pe),{shapeFlag:ke}=Le;he.length&&ke&7&&(M&&he.some(isModelListener)&&(pe=filterModelListeners(pe,M)),Le=cloneVNode(Le,pe))}return u.dirs&&(Le=cloneVNode(Le),Le.dirs=Le.dirs?Le.dirs.concat(u.dirs):u.dirs),u.transition&&(Le.transition=u.transition),Be=Le,setCurrentRenderingInstance(re),Be}function filterSingleRoot(i){let o;for(let u=0;u<i.length;u++){const _=i[u];if(isVNode(_)){if(_.type!==Comment||_.children==="v-if"){if(o)return;o=_}}else return}return o}const getFunctionalFallthrough=i=>{let o;for(const u in i)(u==="class"||u==="style"||isOn$1(u))&&((o||(o={}))[u]=i[u]);return o},filterModelListeners=(i,o)=>{const u={};for(const _ in i)(!isModelListener(_)||!(_.slice(9)in o))&&(u[_]=i[_]);return u};function shouldUpdateComponent(i,o,u){const{props:_,children:g,component:w}=i,{props:M,children:R,patchFlag:E}=o,D=w.emitsOptions;if(o.dirs||o.transition)return!0;if(u&&E>=0){if(E&1024)return!0;if(E&16)return _?hasPropsChanged(_,M,D):!!M;if(E&8){const B=o.dynamicProps;for(let j=0;j<B.length;j++){const J=B[j];if(M[J]!==_[J]&&!isEmitListener(D,J))return!0}}}else return(g||R)&&(!R||!R.$stable)?!0:_===M?!1:_?M?hasPropsChanged(_,M,D):!0:!!M;return!1}function hasPropsChanged(i,o,u){const _=Object.keys(o);if(_.length!==Object.keys(i).length)return!0;for(let g=0;g<_.length;g++){const w=_[g];if(o[w]!==i[w]&&!isEmitListener(u,w))return!0}return!1}function updateHOCHostEl({vnode:i,parent:o},u){for(;o&&o.subTree===i;)(i=o.vnode).el=u,o=o.parent}const isSuspense=i=>i.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(i,o,u,_,g,w,M,R,E,D){i==null?mountSuspense(o,u,_,g,w,M,R,E,D):patchSuspense(i,o,u,_,g,M,R,E,D)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(i,o){const u=i.props&&i.props[o];isFunction(u)&&u()}function mountSuspense(i,o,u,_,g,w,M,R,E){const{p:D,o:{createElement:B}}=E,j=B("div"),J=i.suspense=createSuspenseBoundary(i,g,_,o,j,u,w,M,R,E);D(null,J.pendingBranch=i.ssContent,j,null,_,J,w,M),J.deps>0?(triggerEvent(i,"onPending"),triggerEvent(i,"onFallback"),D(null,i.ssFallback,o,u,_,null,w,M),setActiveBranch(J,i.ssFallback)):J.resolve(!1,!0)}function patchSuspense(i,o,u,_,g,w,M,R,{p:E,um:D,o:{createElement:B}}){const j=o.suspense=i.suspense;j.vnode=o,o.el=i.el;const J=o.ssContent,oe=o.ssFallback,{activeBranch:le,pendingBranch:me,isInFallback:Be,isHydrating:pe}=j;if(me)j.pendingBranch=J,isSameVNodeType(J,me)?(E(me,J,j.hiddenContainer,null,g,j,w,M,R),j.deps<=0?j.resolve():Be&&(E(le,oe,u,_,g,null,w,M,R),setActiveBranch(j,oe))):(j.pendingId++,pe?(j.isHydrating=!1,j.activeBranch=me):D(me,g,j),j.deps=0,j.effects.length=0,j.hiddenContainer=B("div"),Be?(E(null,J,j.hiddenContainer,null,g,j,w,M,R),j.deps<=0?j.resolve():(E(le,oe,u,_,g,null,w,M,R),setActiveBranch(j,oe))):le&&isSameVNodeType(J,le)?(E(le,J,u,_,g,j,w,M,R),j.resolve(!0)):(E(null,J,j.hiddenContainer,null,g,j,w,M,R),j.deps<=0&&j.resolve()));else if(le&&isSameVNodeType(J,le))E(le,J,u,_,g,j,w,M,R),setActiveBranch(j,J);else if(triggerEvent(o,"onPending"),j.pendingBranch=J,j.pendingId++,E(null,J,j.hiddenContainer,null,g,j,w,M,R),j.deps<=0)j.resolve();else{const{timeout:re,pendingId:Le}=j;re>0?setTimeout(()=>{j.pendingId===Le&&j.fallback(oe)},re):re===0&&j.fallback(oe)}}function createSuspenseBoundary(i,o,u,_,g,w,M,R,E,D,B=!1){const{p:j,m:J,um:oe,n:le,o:{parentNode:me,remove:Be}}=D;let pe;const re=isVNodeSuspensible(i);re&&o!=null&&o.pendingBranch&&(pe=o.pendingId,o.deps++);const Le=i.props?toNumber(i.props.timeout):void 0,he={vnode:i,parent:o,parentComponent:u,isSVG:M,container:_,hiddenContainer:g,anchor:w,deps:0,pendingId:0,timeout:typeof Le=="number"?Le:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:B,isUnmounted:!1,effects:[],resolve(ke=!1,Ae=!1){const{vnode:Ve,activeBranch:ge,pendingBranch:De,pendingId:qe,effects:ot,parentComponent:We,container:ct}=he;if(he.isHydrating)he.isHydrating=!1;else if(!ke){const It=ge&&De.transition&&De.transition.mode==="out-in";It&&(ge.transition.afterLeave=()=>{qe===he.pendingId&&J(De,ct,Rt,0)});let{anchor:Rt}=he;ge&&(Rt=le(ge),oe(ge,We,he,!0)),It||J(De,ct,Rt,0)}setActiveBranch(he,De),he.pendingBranch=null,he.isInFallback=!1;let je=he.parent,ti=!1;for(;je;){if(je.pendingBranch){je.effects.push(...ot),ti=!0;break}je=je.parent}ti||queuePostFlushCb(ot),he.effects=[],re&&o&&o.pendingBranch&&pe===o.pendingId&&(o.deps--,o.deps===0&&!Ae&&o.resolve()),triggerEvent(Ve,"onResolve")},fallback(ke){if(!he.pendingBranch)return;const{vnode:Ae,activeBranch:Ve,parentComponent:ge,container:De,isSVG:qe}=he;triggerEvent(Ae,"onFallback");const ot=le(Ve),We=()=>{he.isInFallback&&(j(null,ke,De,ot,ge,null,qe,R,E),setActiveBranch(he,ke))},ct=ke.transition&&ke.transition.mode==="out-in";ct&&(Ve.transition.afterLeave=We),he.isInFallback=!0,oe(Ve,ge,null,!0),ct||We()},move(ke,Ae,Ve){he.activeBranch&&J(he.activeBranch,ke,Ae,Ve),he.container=ke},next(){return he.activeBranch&&le(he.activeBranch)},registerDep(ke,Ae){const Ve=!!he.pendingBranch;Ve&&he.deps++;const ge=ke.vnode.el;ke.asyncDep.catch(De=>{handleError(De,ke,0)}).then(De=>{if(ke.isUnmounted||he.isUnmounted||he.pendingId!==ke.suspenseId)return;ke.asyncResolved=!0;const{vnode:qe}=ke;handleSetupResult(ke,De,!1),ge&&(qe.el=ge);const ot=!ge&&ke.subTree.el;Ae(ke,qe,me(ge||ke.subTree.el),ge?null:le(ke.subTree),he,M,E),ot&&Be(ot),updateHOCHostEl(ke,qe.el),Ve&&--he.deps===0&&he.resolve()})},unmount(ke,Ae){he.isUnmounted=!0,he.activeBranch&&oe(he.activeBranch,u,ke,Ae),he.pendingBranch&&oe(he.pendingBranch,u,ke,Ae)}};return he}function hydrateSuspense(i,o,u,_,g,w,M,R,E){const D=o.suspense=createSuspenseBoundary(o,_,u,i.parentNode,document.createElement("div"),null,g,w,M,R,!0),B=E(i,D.pendingBranch=o.ssContent,u,D,w,M);return D.deps===0&&D.resolve(!1,!0),B}function normalizeSuspenseChildren(i){const{shapeFlag:o,children:u}=i,_=o&32;i.ssContent=normalizeSuspenseSlot(_?u.default:u),i.ssFallback=_?normalizeSuspenseSlot(u.fallback):createVNode(Comment)}function normalizeSuspenseSlot(i){let o;if(isFunction(i)){const u=isBlockTreeEnabled&&i._c;u&&(i._d=!1,openBlock()),i=i(),u&&(i._d=!0,o=currentBlock,closeBlock())}return isArray(i)&&(i=filterSingleRoot(i)),i=normalizeVNode(i),o&&!i.dynamicChildren&&(i.dynamicChildren=o.filter(u=>u!==i)),i}function queueEffectWithSuspense(i,o){o&&o.pendingBranch?isArray(i)?o.effects.push(...i):o.effects.push(i):queuePostFlushCb(i)}function setActiveBranch(i,o){i.activeBranch=o;const{vnode:u,parentComponent:_}=i,g=u.el=o.el;_&&_.subTree===u&&(_.vnode.el=g,updateHOCHostEl(_,g))}function isVNodeSuspensible(i){var o;return((o=i.props)==null?void 0:o.suspensible)!=null&&i.props.suspensible!==!1}function watchEffect(i,o){return doWatch(i,null,o)}function watchPostEffect(i,o){return doWatch(i,null,{flush:"post"})}function watchSyncEffect(i,o){return doWatch(i,null,{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch(i,o,u){return doWatch(i,o,u)}function doWatch(i,o,{immediate:u,deep:_,flush:g,onTrack:w,onTrigger:M}=EMPTY_OBJ){var R;const E=getCurrentScope()===((R=currentInstance)==null?void 0:R.scope)?currentInstance:null;let D,B=!1,j=!1;if(isRef(i)?(D=()=>i.value,B=isShallow(i)):isReactive(i)?(D=()=>i,_=!0):isArray(i)?(j=!0,B=i.some(he=>isReactive(he)||isShallow(he)),D=()=>i.map(he=>{if(isRef(he))return he.value;if(isReactive(he))return traverse(he);if(isFunction(he))return callWithErrorHandling(he,E,2)})):isFunction(i)?o?D=()=>callWithErrorHandling(i,E,2):D=()=>{if(!(E&&E.isUnmounted))return J&&J(),callWithAsyncErrorHandling(i,E,3,[oe])}:D=NOOP,o&&_){const he=D;D=()=>traverse(he())}let J,oe=he=>{J=re.onStop=()=>{callWithErrorHandling(he,E,4)}},le;if(isInSSRComponentSetup)if(oe=NOOP,o?u&&callWithAsyncErrorHandling(o,E,3,[D(),j?[]:void 0,oe]):D(),g==="sync"){const he=useSSRContext();le=he.__watcherHandles||(he.__watcherHandles=[])}else return NOOP;let me=j?new Array(i.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Be=()=>{if(re.active)if(o){const he=re.run();(_||B||(j?he.some((ke,Ae)=>hasChanged(ke,me[Ae])):hasChanged(he,me)))&&(J&&J(),callWithAsyncErrorHandling(o,E,3,[he,me===INITIAL_WATCHER_VALUE?void 0:j&&me[0]===INITIAL_WATCHER_VALUE?[]:me,oe]),me=he)}else re.run()};Be.allowRecurse=!!o;let pe;g==="sync"?pe=Be:g==="post"?pe=()=>queuePostRenderEffect(Be,E&&E.suspense):(Be.pre=!0,E&&(Be.id=E.uid),pe=()=>queueJob(Be));const re=new ReactiveEffect(D,pe);o?u?Be():me=re.run():g==="post"?queuePostRenderEffect(re.run.bind(re),E&&E.suspense):re.run();const Le=()=>{re.stop(),E&&E.scope&&remove(E.scope.effects,re)};return le&&le.push(Le),Le}function instanceWatch(i,o,u){const _=this.proxy,g=isString(i)?i.includes(".")?createPathGetter(_,i):()=>_[i]:i.bind(_,_);let w;isFunction(o)?w=o:(w=o.handler,u=o);const M=currentInstance;setCurrentInstance(this);const R=doWatch(g,w.bind(_),u);return M?setCurrentInstance(M):unsetCurrentInstance(),R}function createPathGetter(i,o){const u=o.split(".");return()=>{let _=i;for(let g=0;g<u.length&&_;g++)_=_[u[g]];return _}}function traverse(i,o){if(!isObject$1(i)||i.__v_skip||(o=o||new Set,o.has(i)))return i;if(o.add(i),isRef(i))traverse(i.value,o);else if(isArray(i))for(let u=0;u<i.length;u++)traverse(i[u],o);else if(isSet(i)||isMap(i))i.forEach(u=>{traverse(u,o)});else if(isPlainObject(i))for(const u in i)traverse(i[u],o);return i}function withDirectives(i,o){const u=currentRenderingInstance;if(u===null)return i;const _=getExposeProxy(u)||u.proxy,g=i.dirs||(i.dirs=[]);for(let w=0;w<o.length;w++){let[M,R,E,D=EMPTY_OBJ]=o[w];M&&(isFunction(M)&&(M={mounted:M,updated:M}),M.deep&&traverse(R),g.push({dir:M,instance:_,value:R,oldValue:void 0,arg:E,modifiers:D}))}return i}function invokeDirectiveHook(i,o,u,_){const g=i.dirs,w=o&&o.dirs;for(let M=0;M<g.length;M++){const R=g[M];w&&(R.oldValue=w[M].value);let E=R.dir[_];E&&(pauseTracking(),callWithAsyncErrorHandling(E,u,8,[i.el,R,i,o]),resetTracking())}}function useTransitionState(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{i.isMounted=!0}),onBeforeUnmount(()=>{i.isUnmounting=!0}),i}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(i,{slots:o}){const u=getCurrentInstance$1(),_=useTransitionState();let g;return()=>{const w=o.default&&getTransitionRawChildren(o.default(),!0);if(!w||!w.length)return;let M=w[0];if(w.length>1){for(const me of w)if(me.type!==Comment){M=me;break}}const R=toRaw(i),{mode:E}=R;if(_.isLeaving)return emptyPlaceholder(M);const D=getKeepAliveChild(M);if(!D)return emptyPlaceholder(M);const B=resolveTransitionHooks(D,R,_,u);setTransitionHooks(D,B);const j=u.subTree,J=j&&getKeepAliveChild(j);let oe=!1;const{getTransitionKey:le}=D.type;if(le){const me=le();g===void 0?g=me:me!==g&&(g=me,oe=!0)}if(J&&J.type!==Comment&&(!isSameVNodeType(D,J)||oe)){const me=resolveTransitionHooks(J,R,_,u);if(setTransitionHooks(J,me),E==="out-in")return _.isLeaving=!0,me.afterLeave=()=>{_.isLeaving=!1,u.update.active!==!1&&u.update()},emptyPlaceholder(M);E==="in-out"&&D.type!==Comment&&(me.delayLeave=(Be,pe,re)=>{const Le=getLeavingNodesForType(_,J);Le[String(J.key)]=J,Be._leaveCb=()=>{pe(),Be._leaveCb=void 0,delete B.delayedLeave},B.delayedLeave=re})}return M}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(i,o){const{leavingVNodes:u}=i;let _=u.get(o.type);return _||(_=Object.create(null),u.set(o.type,_)),_}function resolveTransitionHooks(i,o,u,_){const{appear:g,mode:w,persisted:M=!1,onBeforeEnter:R,onEnter:E,onAfterEnter:D,onEnterCancelled:B,onBeforeLeave:j,onLeave:J,onAfterLeave:oe,onLeaveCancelled:le,onBeforeAppear:me,onAppear:Be,onAfterAppear:pe,onAppearCancelled:re}=o,Le=String(i.key),he=getLeavingNodesForType(u,i),ke=(ge,De)=>{ge&&callWithAsyncErrorHandling(ge,_,9,De)},Ae=(ge,De)=>{const qe=De[1];ke(ge,De),isArray(ge)?ge.every(ot=>ot.length<=1)&&qe():ge.length<=1&&qe()},Ve={mode:w,persisted:M,beforeEnter(ge){let De=R;if(!u.isMounted)if(g)De=me||R;else return;ge._leaveCb&&ge._leaveCb(!0);const qe=he[Le];qe&&isSameVNodeType(i,qe)&&qe.el._leaveCb&&qe.el._leaveCb(),ke(De,[ge])},enter(ge){let De=E,qe=D,ot=B;if(!u.isMounted)if(g)De=Be||E,qe=pe||D,ot=re||B;else return;let We=!1;const ct=ge._enterCb=je=>{We||(We=!0,je?ke(ot,[ge]):ke(qe,[ge]),Ve.delayedLeave&&Ve.delayedLeave(),ge._enterCb=void 0)};De?Ae(De,[ge,ct]):ct()},leave(ge,De){const qe=String(i.key);if(ge._enterCb&&ge._enterCb(!0),u.isUnmounting)return De();ke(j,[ge]);let ot=!1;const We=ge._leaveCb=ct=>{ot||(ot=!0,De(),ct?ke(le,[ge]):ke(oe,[ge]),ge._leaveCb=void 0,he[qe]===i&&delete he[qe])};he[qe]=i,J?Ae(J,[ge,We]):We()},clone(ge){return resolveTransitionHooks(ge,o,u,_)}};return Ve}function emptyPlaceholder(i){if(isKeepAlive(i))return i=cloneVNode(i),i.children=null,i}function getKeepAliveChild(i){return isKeepAlive(i)?i.children?i.children[0]:void 0:i}function setTransitionHooks(i,o){i.shapeFlag&6&&i.component?setTransitionHooks(i.component.subTree,o):i.shapeFlag&128?(i.ssContent.transition=o.clone(i.ssContent),i.ssFallback.transition=o.clone(i.ssFallback)):i.transition=o}function getTransitionRawChildren(i,o=!1,u){let _=[],g=0;for(let w=0;w<i.length;w++){let M=i[w];const R=u==null?M.key:String(u)+String(M.key!=null?M.key:w);M.type===Fragment?(M.patchFlag&128&&g++,_=_.concat(getTransitionRawChildren(M.children,o,R))):(o||M.type!==Comment)&&_.push(R!=null?cloneVNode(M,{key:R}):M)}if(g>1)for(let w=0;w<_.length;w++)_[w].patchFlag=-2;return _}function defineComponent$1(i,o){return isFunction(i)?(()=>extend({name:i.name},o,{setup:i}))():i}const isAsyncWrapper=i=>!!i.type.__asyncLoader;function defineAsyncComponent(i){isFunction(i)&&(i={loader:i});const{loader:o,loadingComponent:u,errorComponent:_,delay:g=200,timeout:w,suspensible:M=!0,onError:R}=i;let E=null,D,B=0;const j=()=>(B++,E=null,J()),J=()=>{let oe;return E||(oe=E=o().catch(le=>{if(le=le instanceof Error?le:new Error(String(le)),R)return new Promise((me,Be)=>{R(le,()=>me(j()),()=>Be(le),B+1)});throw le}).then(le=>oe!==E&&E?E:(le&&(le.__esModule||le[Symbol.toStringTag]==="Module")&&(le=le.default),D=le,le)))};return defineComponent$1({name:"AsyncComponentWrapper",__asyncLoader:J,get __asyncResolved(){return D},setup(){const oe=currentInstance;if(D)return()=>createInnerComp(D,oe);const le=re=>{E=null,handleError(re,oe,13,!_)};if(M&&oe.suspense||isInSSRComponentSetup)return J().then(re=>()=>createInnerComp(re,oe)).catch(re=>(le(re),()=>_?createVNode(_,{error:re}):null));const me=ref(!1),Be=ref(),pe=ref(!!g);return g&&setTimeout(()=>{pe.value=!1},g),w!=null&&setTimeout(()=>{if(!me.value&&!Be.value){const re=new Error(`Async component timed out after ${w}ms.`);le(re),Be.value=re}},w),J().then(()=>{me.value=!0,oe.parent&&isKeepAlive(oe.parent.vnode)&&queueJob(oe.parent.update)}).catch(re=>{le(re),Be.value=re}),()=>{if(me.value&&D)return createInnerComp(D,oe);if(Be.value&&_)return createVNode(_,{error:Be.value});if(u&&!pe.value)return createVNode(u)}}})}function createInnerComp(i,o){const{ref:u,props:_,children:g,ce:w}=o.vnode,M=createVNode(i,_,g);return M.ref=u,M.ce=w,delete o.vnode.ce,M}const isKeepAlive=i=>i.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(i,{slots:o}){const u=getCurrentInstance$1(),_=u.ctx;if(!_.renderer)return()=>{const re=o.default&&o.default();return re&&re.length===1?re[0]:re};const g=new Map,w=new Set;let M=null;const R=u.suspense,{renderer:{p:E,m:D,um:B,o:{createElement:j}}}=_,J=j("div");_.activate=(re,Le,he,ke,Ae)=>{const Ve=re.component;D(re,Le,he,0,R),E(Ve.vnode,re,Le,he,Ve,R,ke,re.slotScopeIds,Ae),queuePostRenderEffect(()=>{Ve.isDeactivated=!1,Ve.a&&invokeArrayFns(Ve.a);const ge=re.props&&re.props.onVnodeMounted;ge&&invokeVNodeHook(ge,Ve.parent,re)},R)},_.deactivate=re=>{const Le=re.component;D(re,J,null,1,R),queuePostRenderEffect(()=>{Le.da&&invokeArrayFns(Le.da);const he=re.props&&re.props.onVnodeUnmounted;he&&invokeVNodeHook(he,Le.parent,re),Le.isDeactivated=!0},R)};function oe(re){resetShapeFlag(re),B(re,u,R,!0)}function le(re){g.forEach((Le,he)=>{const ke=getComponentName(Le.type);ke&&(!re||!re(ke))&&me(he)})}function me(re){const Le=g.get(re);!M||!isSameVNodeType(Le,M)?oe(Le):M&&resetShapeFlag(M),g.delete(re),w.delete(re)}watch(()=>[i.include,i.exclude],([re,Le])=>{re&&le(he=>matches(re,he)),Le&&le(he=>!matches(Le,he))},{flush:"post",deep:!0});let Be=null;const pe=()=>{Be!=null&&g.set(Be,getInnerChild(u.subTree))};return onMounted(pe),onUpdated(pe),onBeforeUnmount(()=>{g.forEach(re=>{const{subTree:Le,suspense:he}=u,ke=getInnerChild(Le);if(re.type===ke.type&&re.key===ke.key){resetShapeFlag(ke);const Ae=ke.component.da;Ae&&queuePostRenderEffect(Ae,he);return}oe(re)})}),()=>{if(Be=null,!o.default)return null;const re=o.default(),Le=re[0];if(re.length>1)return M=null,re;if(!isVNode(Le)||!(Le.shapeFlag&4)&&!(Le.shapeFlag&128))return M=null,Le;let he=getInnerChild(Le);const ke=he.type,Ae=getComponentName(isAsyncWrapper(he)?he.type.__asyncResolved||{}:ke),{include:Ve,exclude:ge,max:De}=i;if(Ve&&(!Ae||!matches(Ve,Ae))||ge&&Ae&&matches(ge,Ae))return M=he,Le;const qe=he.key==null?ke:he.key,ot=g.get(qe);return he.el&&(he=cloneVNode(he),Le.shapeFlag&128&&(Le.ssContent=he)),Be=qe,ot?(he.el=ot.el,he.component=ot.component,he.transition&&setTransitionHooks(he,he.transition),he.shapeFlag|=512,w.delete(qe),w.add(qe)):(w.add(qe),De&&w.size>parseInt(De,10)&&me(w.values().next().value)),he.shapeFlag|=256,M=he,isSuspense(Le.type)?Le:he}}},KeepAlive=KeepAliveImpl;function matches(i,o){return isArray(i)?i.some(u=>matches(u,o)):isString(i)?i.split(",").includes(o):isRegExp(i)?i.test(o):!1}function onActivated(i,o){registerKeepAliveHook(i,"a",o)}function onDeactivated(i,o){registerKeepAliveHook(i,"da",o)}function registerKeepAliveHook(i,o,u=currentInstance){const _=i.__wdc||(i.__wdc=()=>{let g=u;for(;g;){if(g.isDeactivated)return;g=g.parent}return i()});if(injectHook(o,_,u),u){let g=u.parent;for(;g&&g.parent;)isKeepAlive(g.parent.vnode)&&injectToKeepAliveRoot(_,o,u,g),g=g.parent}}function injectToKeepAliveRoot(i,o,u,_){const g=injectHook(o,i,_,!0);onUnmounted(()=>{remove(_[o],g)},u)}function resetShapeFlag(i){i.shapeFlag&=-257,i.shapeFlag&=-513}function getInnerChild(i){return i.shapeFlag&128?i.ssContent:i}function injectHook(i,o,u=currentInstance,_=!1){if(u){const g=u[i]||(u[i]=[]),w=o.__weh||(o.__weh=(...M)=>{if(u.isUnmounted)return;pauseTracking(),setCurrentInstance(u);const R=callWithAsyncErrorHandling(o,u,i,M);return unsetCurrentInstance(),resetTracking(),R});return _?g.unshift(w):g.push(w),w}}const createHook=i=>(o,u=currentInstance)=>(!isInSSRComponentSetup||i==="sp")&&injectHook(i,(..._)=>o(..._),u),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(i,o=currentInstance){injectHook("ec",i,o)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(i,o){return resolveAsset(COMPONENTS,i,!0,o)||i}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(i){return isString(i)?resolveAsset(COMPONENTS,i,!1)||i:i||NULL_DYNAMIC_COMPONENT}function resolveDirective(i){return resolveAsset(DIRECTIVES,i)}function resolveAsset(i,o,u=!0,_=!1){const g=currentRenderingInstance||currentInstance;if(g){const w=g.type;if(i===COMPONENTS){const R=getComponentName(w,!1);if(R&&(R===o||R===camelize(o)||R===capitalize(camelize(o))))return w}const M=resolve(g[i]||w[i],o)||resolve(g.appContext[i],o);return!M&&_?w:M}}function resolve(i,o){return i&&(i[o]||i[camelize(o)]||i[capitalize(camelize(o))])}function renderList(i,o,u,_){let g;const w=u&&u[_];if(isArray(i)||isString(i)){g=new Array(i.length);for(let M=0,R=i.length;M<R;M++)g[M]=o(i[M],M,void 0,w&&w[M])}else if(typeof i=="number"){g=new Array(i);for(let M=0;M<i;M++)g[M]=o(M+1,M,void 0,w&&w[M])}else if(isObject$1(i))if(i[Symbol.iterator])g=Array.from(i,(M,R)=>o(M,R,void 0,w&&w[R]));else{const M=Object.keys(i);g=new Array(M.length);for(let R=0,E=M.length;R<E;R++){const D=M[R];g[R]=o(i[D],D,R,w&&w[R])}}else g=[];return u&&(u[_]=g),g}function createSlots(i,o){for(let u=0;u<o.length;u++){const _=o[u];if(isArray(_))for(let g=0;g<_.length;g++)i[_[g].name]=_[g].fn;else _&&(i[_.name]=_.key?(...g)=>{const w=_.fn(...g);return w&&(w.key=_.key),w}:_.fn)}return i}function renderSlot(i,o,u={},_,g){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return o!=="default"&&(u.name=o),createVNode("slot",u,_&&_());let w=i[o];w&&w._c&&(w._d=!1),openBlock();const M=w&&ensureValidVNode(w(u)),R=createBlock(Fragment,{key:u.key||M&&M.key||`_${o}`},M||(_?_():[]),M&&i._===1?64:-2);return!g&&R.scopeId&&(R.slotScopeIds=[R.scopeId+"-s"]),w&&w._c&&(w._d=!0),R}function ensureValidVNode(i){return i.some(o=>isVNode(o)?!(o.type===Comment||o.type===Fragment&&!ensureValidVNode(o.children)):!0)?i:null}function toHandlers(i,o){const u={};for(const _ in i)u[o&&/[A-Z]/.test(_)?`on:${_}`:toHandlerKey(_)]=i[_];return u}const getPublicInstance=i=>i?isStatefulComponent(i)?getExposeProxy(i)||i.proxy:getPublicInstance(i.parent):null,publicPropertiesMap=extend(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>getPublicInstance(i.parent),$root:i=>getPublicInstance(i.root),$emit:i=>i.emit,$options:i=>resolveMergedOptions(i),$forceUpdate:i=>i.f||(i.f=()=>queueJob(i.update)),$nextTick:i=>i.n||(i.n=nextTick.bind(i.proxy)),$watch:i=>instanceWatch.bind(i)}),hasSetupBinding=(i,o)=>i!==EMPTY_OBJ&&!i.__isScriptSetup&&hasOwn(i,o),PublicInstanceProxyHandlers={get({_:i},o){const{ctx:u,setupState:_,data:g,props:w,accessCache:M,type:R,appContext:E}=i;let D;if(o[0]!=="$"){const oe=M[o];if(oe!==void 0)switch(oe){case 1:return _[o];case 2:return g[o];case 4:return u[o];case 3:return w[o]}else{if(hasSetupBinding(_,o))return M[o]=1,_[o];if(g!==EMPTY_OBJ&&hasOwn(g,o))return M[o]=2,g[o];if((D=i.propsOptions[0])&&hasOwn(D,o))return M[o]=3,w[o];if(u!==EMPTY_OBJ&&hasOwn(u,o))return M[o]=4,u[o];shouldCacheAccess&&(M[o]=0)}}const B=publicPropertiesMap[o];let j,J;if(B)return o==="$attrs"&&track(i,"get",o),B(i);if((j=R.__cssModules)&&(j=j[o]))return j;if(u!==EMPTY_OBJ&&hasOwn(u,o))return M[o]=4,u[o];if(J=E.config.globalProperties,hasOwn(J,o))return J[o]},set({_:i},o,u){const{data:_,setupState:g,ctx:w}=i;return hasSetupBinding(g,o)?(g[o]=u,!0):_!==EMPTY_OBJ&&hasOwn(_,o)?(_[o]=u,!0):hasOwn(i.props,o)||o[0]==="$"&&o.slice(1)in i?!1:(w[o]=u,!0)},has({_:{data:i,setupState:o,accessCache:u,ctx:_,appContext:g,propsOptions:w}},M){let R;return!!u[M]||i!==EMPTY_OBJ&&hasOwn(i,M)||hasSetupBinding(o,M)||(R=w[0])&&hasOwn(R,M)||hasOwn(_,M)||hasOwn(publicPropertiesMap,M)||hasOwn(g.config.globalProperties,M)},defineProperty(i,o,u){return u.get!=null?i._.accessCache[o]=0:hasOwn(u,"value")&&this.set(i,o,u.value,null),Reflect.defineProperty(i,o,u)}},RuntimeCompiledPublicInstanceProxyHandlers=extend({},PublicInstanceProxyHandlers,{get(i,o){if(o!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(i,o,i)},has(i,o){return o[0]!=="_"&&!isGloballyWhitelisted(o)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(i){}function defineOptions(i){}function defineSlots(){return null}function defineModel(){}function withDefaults(i,o){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function useModel(i,o,u){const _=getCurrentInstance$1();if(u&&u.local){const g=ref(i[o]);return watch(()=>i[o],w=>g.value=w),watch(g,w=>{w!==i[o]&&_.emit(`update:${o}`,w)}),g}else return{__v_isRef:!0,get value(){return i[o]},set value(g){_.emit(`update:${o}`,g)}}}function getContext(){const i=getCurrentInstance$1();return i.setupContext||(i.setupContext=createSetupContext(i))}function normalizePropsOrEmits(i){return isArray(i)?i.reduce((o,u)=>(o[u]=null,o),{}):i}function mergeDefaults(i,o){const u=normalizePropsOrEmits(i);for(const _ in o){if(_.startsWith("__skip"))continue;let g=u[_];g?isArray(g)||isFunction(g)?g=u[_]={type:g,default:o[_]}:g.default=o[_]:g===null&&(g=u[_]={default:o[_]}),g&&o[`__skip_${_}`]&&(g.skipFactory=!0)}return u}function mergeModels(i,o){return!i||!o?i||o:isArray(i)&&isArray(o)?i.concat(o):extend({},normalizePropsOrEmits(i),normalizePropsOrEmits(o))}function createPropsRestProxy(i,o){const u={};for(const _ in i)o.includes(_)||Object.defineProperty(u,_,{enumerable:!0,get:()=>i[_]});return u}function withAsyncContext(i){const o=getCurrentInstance$1();let u=i();return unsetCurrentInstance(),isPromise(u)&&(u=u.catch(_=>{throw setCurrentInstance(o),_})),[u,()=>setCurrentInstance(o)]}let shouldCacheAccess=!0;function applyOptions(i){const o=resolveMergedOptions(i),u=i.proxy,_=i.ctx;shouldCacheAccess=!1,o.beforeCreate&&callHook$1(o.beforeCreate,i,"bc");const{data:g,computed:w,methods:M,watch:R,provide:E,inject:D,created:B,beforeMount:j,mounted:J,beforeUpdate:oe,updated:le,activated:me,deactivated:Be,beforeDestroy:pe,beforeUnmount:re,destroyed:Le,unmounted:he,render:ke,renderTracked:Ae,renderTriggered:Ve,errorCaptured:ge,serverPrefetch:De,expose:qe,inheritAttrs:ot,components:We,directives:ct,filters:je}=o;if(D&&resolveInjections(D,_,null),M)for(const Rt in M){const Tt=M[Rt];isFunction(Tt)&&(_[Rt]=Tt.bind(u))}if(g){const Rt=g.call(u,u);isObject$1(Rt)&&(i.data=reactive(Rt))}if(shouldCacheAccess=!0,w)for(const Rt in w){const Tt=w[Rt],ni=isFunction(Tt)?Tt.bind(u,u):isFunction(Tt.get)?Tt.get.bind(u,u):NOOP,ai=!isFunction(Tt)&&isFunction(Tt.set)?Tt.set.bind(u):NOOP,Zi=computed({get:ni,set:ai});Object.defineProperty(_,Rt,{enumerable:!0,configurable:!0,get:()=>Zi.value,set:Ai=>Zi.value=Ai})}if(R)for(const Rt in R)createWatcher(R[Rt],_,u,Rt);if(E){const Rt=isFunction(E)?E.call(u):E;Reflect.ownKeys(Rt).forEach(Tt=>{provide(Tt,Rt[Tt])})}B&&callHook$1(B,i,"c");function It(Rt,Tt){isArray(Tt)?Tt.forEach(ni=>Rt(ni.bind(u))):Tt&&Rt(Tt.bind(u))}if(It(onBeforeMount,j),It(onMounted,J),It(onBeforeUpdate,oe),It(onUpdated,le),It(onActivated,me),It(onDeactivated,Be),It(onErrorCaptured,ge),It(onRenderTracked,Ae),It(onRenderTriggered,Ve),It(onBeforeUnmount,re),It(onUnmounted,he),It(onServerPrefetch,De),isArray(qe))if(qe.length){const Rt=i.exposed||(i.exposed={});qe.forEach(Tt=>{Object.defineProperty(Rt,Tt,{get:()=>u[Tt],set:ni=>u[Tt]=ni})})}else i.exposed||(i.exposed={});ke&&i.render===NOOP&&(i.render=ke),ot!=null&&(i.inheritAttrs=ot),We&&(i.components=We),ct&&(i.directives=ct)}function resolveInjections(i,o,u=NOOP){isArray(i)&&(i=normalizeInject(i));for(const _ in i){const g=i[_];let w;isObject$1(g)?"default"in g?w=inject$1(g.from||_,g.default,!0):w=inject$1(g.from||_):w=inject$1(g),isRef(w)?Object.defineProperty(o,_,{enumerable:!0,configurable:!0,get:()=>w.value,set:M=>w.value=M}):o[_]=w}}function callHook$1(i,o,u){callWithAsyncErrorHandling(isArray(i)?i.map(_=>_.bind(o.proxy)):i.bind(o.proxy),o,u)}function createWatcher(i,o,u,_){const g=_.includes(".")?createPathGetter(u,_):()=>u[_];if(isString(i)){const w=o[i];isFunction(w)&&watch(g,w)}else if(isFunction(i))watch(g,i.bind(u));else if(isObject$1(i))if(isArray(i))i.forEach(w=>createWatcher(w,o,u,_));else{const w=isFunction(i.handler)?i.handler.bind(u):o[i.handler];isFunction(w)&&watch(g,w,i)}}function resolveMergedOptions(i){const o=i.type,{mixins:u,extends:_}=o,{mixins:g,optionsCache:w,config:{optionMergeStrategies:M}}=i.appContext,R=w.get(o);let E;return R?E=R:!g.length&&!u&&!_?E=o:(E={},g.length&&g.forEach(D=>mergeOptions(E,D,M,!0)),mergeOptions(E,o,M)),isObject$1(o)&&w.set(o,E),E}function mergeOptions(i,o,u,_=!1){const{mixins:g,extends:w}=o;w&&mergeOptions(i,w,u,!0),g&&g.forEach(M=>mergeOptions(i,M,u,!0));for(const M in o)if(!(_&&M==="expose")){const R=internalOptionMergeStrats[M]||u&&u[M];i[M]=R?R(i[M],o[M]):o[M]}return i}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(i,o){return o?i?function(){return extend(isFunction(i)?i.call(this,this):i,isFunction(o)?o.call(this,this):o)}:o:i}function mergeInject(i,o){return mergeObjectOptions(normalizeInject(i),normalizeInject(o))}function normalizeInject(i){if(isArray(i)){const o={};for(let u=0;u<i.length;u++)o[i[u]]=i[u];return o}return i}function mergeAsArray(i,o){return i?[...new Set([].concat(i,o))]:o}function mergeObjectOptions(i,o){return i?extend(Object.create(null),i,o):o}function mergeEmitsOrPropsOptions(i,o){return i?isArray(i)&&isArray(o)?[...new Set([...i,...o])]:extend(Object.create(null),normalizePropsOrEmits(i),normalizePropsOrEmits(o??{})):o}function mergeWatchOptions(i,o){if(!i)return o;if(!o)return i;const u=extend(Object.create(null),i);for(const _ in o)u[_]=mergeAsArray(i[_],o[_]);return u}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(i,o){return function(_,g=null){isFunction(_)||(_=extend({},_)),g!=null&&!isObject$1(g)&&(g=null);const w=createAppContext(),M=new Set;let R=!1;const E=w.app={_uid:uid$1++,_component:_,_props:g,_container:null,_context:w,_instance:null,version:version$1,get config(){return w.config},set config(D){},use(D,...B){return M.has(D)||(D&&isFunction(D.install)?(M.add(D),D.install(E,...B)):isFunction(D)&&(M.add(D),D(E,...B))),E},mixin(D){return w.mixins.includes(D)||w.mixins.push(D),E},component(D,B){return B?(w.components[D]=B,E):w.components[D]},directive(D,B){return B?(w.directives[D]=B,E):w.directives[D]},mount(D,B,j){if(!R){const J=createVNode(_,g);return J.appContext=w,B&&o?o(J,D):i(J,D,j),R=!0,E._container=D,D.__vue_app__=E,getExposeProxy(J.component)||J.component.proxy}},unmount(){R&&(i(null,E._container),delete E._container.__vue_app__)},provide(D,B){return w.provides[D]=B,E},runWithContext(D){currentApp=E;try{return D()}finally{currentApp=null}}};return E}}let currentApp=null;function provide(i,o){if(currentInstance){let u=currentInstance.provides;const _=currentInstance.parent&&currentInstance.parent.provides;_===u&&(u=currentInstance.provides=Object.create(_)),u[i]=o}}function inject$1(i,o,u=!1){const _=currentInstance||currentRenderingInstance;if(_||currentApp){const g=_?_.parent==null?_.vnode.appContext&&_.vnode.appContext.provides:_.parent.provides:currentApp._context.provides;if(g&&i in g)return g[i];if(arguments.length>1)return u&&isFunction(o)?o.call(_&&_.proxy):o}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(i,o,u,_=!1){const g={},w={};def(w,InternalObjectKey,1),i.propsDefaults=Object.create(null),setFullProps(i,o,g,w);for(const M in i.propsOptions[0])M in g||(g[M]=void 0);u?i.props=_?g:shallowReactive(g):i.type.props?i.props=g:i.props=w,i.attrs=w}function updateProps(i,o,u,_){const{props:g,attrs:w,vnode:{patchFlag:M}}=i,R=toRaw(g),[E]=i.propsOptions;let D=!1;if((_||M>0)&&!(M&16)){if(M&8){const B=i.vnode.dynamicProps;for(let j=0;j<B.length;j++){let J=B[j];if(isEmitListener(i.emitsOptions,J))continue;const oe=o[J];if(E)if(hasOwn(w,J))oe!==w[J]&&(w[J]=oe,D=!0);else{const le=camelize(J);g[le]=resolvePropValue(E,R,le,oe,i,!1)}else oe!==w[J]&&(w[J]=oe,D=!0)}}}else{setFullProps(i,o,g,w)&&(D=!0);let B;for(const j in R)(!o||!hasOwn(o,j)&&((B=hyphenate(j))===j||!hasOwn(o,B)))&&(E?u&&(u[j]!==void 0||u[B]!==void 0)&&(g[j]=resolvePropValue(E,R,j,void 0,i,!0)):delete g[j]);if(w!==R)for(const j in w)(!o||!hasOwn(o,j))&&(delete w[j],D=!0)}D&&trigger(i,"set","$attrs")}function setFullProps(i,o,u,_){const[g,w]=i.propsOptions;let M=!1,R;if(o)for(let E in o){if(isReservedProp(E))continue;const D=o[E];let B;g&&hasOwn(g,B=camelize(E))?!w||!w.includes(B)?u[B]=D:(R||(R={}))[B]=D:isEmitListener(i.emitsOptions,E)||(!(E in _)||D!==_[E])&&(_[E]=D,M=!0)}if(w){const E=toRaw(u),D=R||EMPTY_OBJ;for(let B=0;B<w.length;B++){const j=w[B];u[j]=resolvePropValue(g,E,j,D[j],i,!hasOwn(D,j))}}return M}function resolvePropValue(i,o,u,_,g,w){const M=i[u];if(M!=null){const R=hasOwn(M,"default");if(R&&_===void 0){const E=M.default;if(M.type!==Function&&!M.skipFactory&&isFunction(E)){const{propsDefaults:D}=g;u in D?_=D[u]:(setCurrentInstance(g),_=D[u]=E.call(null,o),unsetCurrentInstance())}else _=E}M[0]&&(w&&!R?_=!1:M[1]&&(_===""||_===hyphenate(u))&&(_=!0))}return _}function normalizePropsOptions(i,o,u=!1){const _=o.propsCache,g=_.get(i);if(g)return g;const w=i.props,M={},R=[];let E=!1;if(!isFunction(i)){const B=j=>{E=!0;const[J,oe]=normalizePropsOptions(j,o,!0);extend(M,J),oe&&R.push(...oe)};!u&&o.mixins.length&&o.mixins.forEach(B),i.extends&&B(i.extends),i.mixins&&i.mixins.forEach(B)}if(!w&&!E)return isObject$1(i)&&_.set(i,EMPTY_ARR),EMPTY_ARR;if(isArray(w))for(let B=0;B<w.length;B++){const j=camelize(w[B]);validatePropName(j)&&(M[j]=EMPTY_OBJ)}else if(w)for(const B in w){const j=camelize(B);if(validatePropName(j)){const J=w[B],oe=M[j]=isArray(J)||isFunction(J)?{type:J}:extend({},J);if(oe){const le=getTypeIndex(Boolean,oe.type),me=getTypeIndex(String,oe.type);oe[0]=le>-1,oe[1]=me<0||le<me,(le>-1||hasOwn(oe,"default"))&&R.push(j)}}}const D=[M,R];return isObject$1(i)&&_.set(i,D),D}function validatePropName(i){return i[0]!=="$"}function getType(i){const o=i&&i.toString().match(/^\s*(function|class) (\w+)/);return o?o[2]:i===null?"null":""}function isSameType(i,o){return getType(i)===getType(o)}function getTypeIndex(i,o){return isArray(o)?o.findIndex(u=>isSameType(u,i)):isFunction(o)&&isSameType(o,i)?0:-1}const isInternalKey=i=>i[0]==="_"||i==="$stable",normalizeSlotValue=i=>isArray(i)?i.map(normalizeVNode):[normalizeVNode(i)],normalizeSlot=(i,o,u)=>{if(o._n)return o;const _=withCtx((...g)=>normalizeSlotValue(o(...g)),u);return _._c=!1,_},normalizeObjectSlots=(i,o,u)=>{const _=i._ctx;for(const g in i){if(isInternalKey(g))continue;const w=i[g];if(isFunction(w))o[g]=normalizeSlot(g,w,_);else if(w!=null){const M=normalizeSlotValue(w);o[g]=()=>M}}},normalizeVNodeSlots=(i,o)=>{const u=normalizeSlotValue(o);i.slots.default=()=>u},initSlots=(i,o)=>{if(i.vnode.shapeFlag&32){const u=o._;u?(i.slots=toRaw(o),def(o,"_",u)):normalizeObjectSlots(o,i.slots={})}else i.slots={},o&&normalizeVNodeSlots(i,o);def(i.slots,InternalObjectKey,1)},updateSlots=(i,o,u)=>{const{vnode:_,slots:g}=i;let w=!0,M=EMPTY_OBJ;if(_.shapeFlag&32){const R=o._;R?u&&R===1?w=!1:(extend(g,o),!u&&R===1&&delete g._):(w=!o.$stable,normalizeObjectSlots(o,g)),M=o}else o&&(normalizeVNodeSlots(i,o),M={default:1});if(w)for(const R in g)!isInternalKey(R)&&!(R in M)&&delete g[R]};function setRef(i,o,u,_,g=!1){if(isArray(i)){i.forEach((J,oe)=>setRef(J,o&&(isArray(o)?o[oe]:o),u,_,g));return}if(isAsyncWrapper(_)&&!g)return;const w=_.shapeFlag&4?getExposeProxy(_.component)||_.component.proxy:_.el,M=g?null:w,{i:R,r:E}=i,D=o&&o.r,B=R.refs===EMPTY_OBJ?R.refs={}:R.refs,j=R.setupState;if(D!=null&&D!==E&&(isString(D)?(B[D]=null,hasOwn(j,D)&&(j[D]=null)):isRef(D)&&(D.value=null)),isFunction(E))callWithErrorHandling(E,R,12,[M,B]);else{const J=isString(E),oe=isRef(E);if(J||oe){const le=()=>{if(i.f){const me=J?hasOwn(j,E)?j[E]:B[E]:E.value;g?isArray(me)&&remove(me,w):isArray(me)?me.includes(w)||me.push(w):J?(B[E]=[w],hasOwn(j,E)&&(j[E]=B[E])):(E.value=[w],i.k&&(B[i.k]=E.value))}else J?(B[E]=M,hasOwn(j,E)&&(j[E]=M)):oe&&(E.value=M,i.k&&(B[i.k]=M))};M?(le.id=-1,queuePostRenderEffect(le,u)):le()}}}let hasMismatch=!1;const isSVGContainer=i=>/svg/.test(i.namespaceURI)&&i.tagName!=="foreignObject",isComment=i=>i.nodeType===8;function createHydrationFunctions(i){const{mt:o,p:u,o:{patchProp:_,createText:g,nextSibling:w,parentNode:M,remove:R,insert:E,createComment:D}}=i,B=(pe,re)=>{if(!re.hasChildNodes()){u(null,pe,re),flushPostFlushCbs(),re._vnode=pe;return}hasMismatch=!1,j(re.firstChild,pe,null,null,null),flushPostFlushCbs(),re._vnode=pe,hasMismatch&&console.error("Hydration completed but contains mismatches.")},j=(pe,re,Le,he,ke,Ae=!1)=>{const Ve=isComment(pe)&&pe.data==="[",ge=()=>me(pe,re,Le,he,ke,Ve),{type:De,ref:qe,shapeFlag:ot,patchFlag:We}=re;let ct=pe.nodeType;re.el=pe,We===-2&&(Ae=!1,re.dynamicChildren=null);let je=null;switch(De){case Text:ct!==3?re.children===""?(E(re.el=g(""),M(pe),pe),je=pe):je=ge():(pe.data!==re.children&&(hasMismatch=!0,pe.data=re.children),je=w(pe));break;case Comment:ct!==8||Ve?je=ge():je=w(pe);break;case Static:if(Ve&&(pe=w(pe),ct=pe.nodeType),ct===1||ct===3){je=pe;const ti=!re.children.length;for(let It=0;It<re.staticCount;It++)ti&&(re.children+=je.nodeType===1?je.outerHTML:je.data),It===re.staticCount-1&&(re.anchor=je),je=w(je);return Ve?w(je):je}else ge();break;case Fragment:Ve?je=le(pe,re,Le,he,ke,Ae):je=ge();break;default:if(ot&1)ct!==1||re.type.toLowerCase()!==pe.tagName.toLowerCase()?je=ge():je=J(pe,re,Le,he,ke,Ae);else if(ot&6){re.slotScopeIds=ke;const ti=M(pe);if(o(re,ti,null,Le,he,isSVGContainer(ti),Ae),je=Ve?Be(pe):w(pe),je&&isComment(je)&&je.data==="teleport end"&&(je=w(je)),isAsyncWrapper(re)){let It;Ve?(It=createVNode(Fragment),It.anchor=je?je.previousSibling:ti.lastChild):It=pe.nodeType===3?createTextVNode(""):createVNode("div"),It.el=pe,re.component.subTree=It}}else ot&64?ct!==8?je=ge():je=re.type.hydrate(pe,re,Le,he,ke,Ae,i,oe):ot&128&&(je=re.type.hydrate(pe,re,Le,he,isSVGContainer(M(pe)),ke,Ae,i,j))}return qe!=null&&setRef(qe,null,he,re),je},J=(pe,re,Le,he,ke,Ae)=>{Ae=Ae||!!re.dynamicChildren;const{type:Ve,props:ge,patchFlag:De,shapeFlag:qe,dirs:ot}=re,We=Ve==="input"&&ot||Ve==="option";if(We||De!==-1){if(ot&&invokeDirectiveHook(re,null,Le,"created"),ge)if(We||!Ae||De&48)for(const je in ge)(We&&je.endsWith("value")||isOn$1(je)&&!isReservedProp(je))&&_(pe,je,null,ge[je],!1,void 0,Le);else ge.onClick&&_(pe,"onClick",null,ge.onClick,!1,void 0,Le);let ct;if((ct=ge&&ge.onVnodeBeforeMount)&&invokeVNodeHook(ct,Le,re),ot&&invokeDirectiveHook(re,null,Le,"beforeMount"),((ct=ge&&ge.onVnodeMounted)||ot)&&queueEffectWithSuspense(()=>{ct&&invokeVNodeHook(ct,Le,re),ot&&invokeDirectiveHook(re,null,Le,"mounted")},he),qe&16&&!(ge&&(ge.innerHTML||ge.textContent))){let je=oe(pe.firstChild,re,pe,Le,he,ke,Ae);for(;je;){hasMismatch=!0;const ti=je;je=je.nextSibling,R(ti)}}else qe&8&&pe.textContent!==re.children&&(hasMismatch=!0,pe.textContent=re.children)}return pe.nextSibling},oe=(pe,re,Le,he,ke,Ae,Ve)=>{Ve=Ve||!!re.dynamicChildren;const ge=re.children,De=ge.length;for(let qe=0;qe<De;qe++){const ot=Ve?ge[qe]:ge[qe]=normalizeVNode(ge[qe]);if(pe)pe=j(pe,ot,he,ke,Ae,Ve);else{if(ot.type===Text&&!ot.children)continue;hasMismatch=!0,u(null,ot,Le,null,he,ke,isSVGContainer(Le),Ae)}}return pe},le=(pe,re,Le,he,ke,Ae)=>{const{slotScopeIds:Ve}=re;Ve&&(ke=ke?ke.concat(Ve):Ve);const ge=M(pe),De=oe(w(pe),re,ge,Le,he,ke,Ae);return De&&isComment(De)&&De.data==="]"?w(re.anchor=De):(hasMismatch=!0,E(re.anchor=D("]"),ge,De),De)},me=(pe,re,Le,he,ke,Ae)=>{if(hasMismatch=!0,re.el=null,Ae){const De=Be(pe);for(;;){const qe=w(pe);if(qe&&qe!==De)R(qe);else break}}const Ve=w(pe),ge=M(pe);return R(pe),u(null,re,ge,Ve,Le,he,isSVGContainer(ge),ke),Ve},Be=pe=>{let re=0;for(;pe;)if(pe=w(pe),pe&&isComment(pe)&&(pe.data==="["&&re++,pe.data==="]")){if(re===0)return w(pe);re--}return pe};return[B,j]}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(i){return baseCreateRenderer(i)}function createHydrationRenderer(i){return baseCreateRenderer(i,createHydrationFunctions)}function baseCreateRenderer(i,o){const u=getGlobalThis();u.__VUE__=!0;const{insert:_,remove:g,patchProp:w,createElement:M,createText:R,createComment:E,setText:D,setElementText:B,parentNode:j,nextSibling:J,setScopeId:oe=NOOP,insertStaticContent:le}=i,me=(Q,ue,Me,Fe=null,Re=null,Ke=null,nt=!1,b=null,Ze=!!ue.dynamicChildren)=>{if(Q===ue)return;Q&&!isSameVNodeType(Q,ue)&&(Fe=Vr(Q),Ai(Q,Re,Ke,!0),Q=null),ue.patchFlag===-2&&(Ze=!1,ue.dynamicChildren=null);const{type:ze,ref:Xe,shapeFlag:mt}=ue;switch(ze){case Text:Be(Q,ue,Me,Fe);break;case Comment:pe(Q,ue,Me,Fe);break;case Static:Q==null&&re(ue,Me,Fe,nt);break;case Fragment:We(Q,ue,Me,Fe,Re,Ke,nt,b,Ze);break;default:mt&1?ke(Q,ue,Me,Fe,Re,Ke,nt,b,Ze):mt&6?ct(Q,ue,Me,Fe,Re,Ke,nt,b,Ze):(mt&64||mt&128)&&ze.process(Q,ue,Me,Fe,Re,Ke,nt,b,Ze,Br)}Xe!=null&&Re&&setRef(Xe,Q&&Q.ref,Ke,ue||Q,!ue)},Be=(Q,ue,Me,Fe)=>{if(Q==null)_(ue.el=R(ue.children),Me,Fe);else{const Re=ue.el=Q.el;ue.children!==Q.children&&D(Re,ue.children)}},pe=(Q,ue,Me,Fe)=>{Q==null?_(ue.el=E(ue.children||""),Me,Fe):ue.el=Q.el},re=(Q,ue,Me,Fe)=>{[Q.el,Q.anchor]=le(Q.children,ue,Me,Fe,Q.el,Q.anchor)},Le=({el:Q,anchor:ue},Me,Fe)=>{let Re;for(;Q&&Q!==ue;)Re=J(Q),_(Q,Me,Fe),Q=Re;_(ue,Me,Fe)},he=({el:Q,anchor:ue})=>{let Me;for(;Q&&Q!==ue;)Me=J(Q),g(Q),Q=Me;g(ue)},ke=(Q,ue,Me,Fe,Re,Ke,nt,b,Ze)=>{nt=nt||ue.type==="svg",Q==null?Ae(ue,Me,Fe,Re,Ke,nt,b,Ze):De(Q,ue,Re,Ke,nt,b,Ze)},Ae=(Q,ue,Me,Fe,Re,Ke,nt,b)=>{let Ze,ze;const{type:Xe,props:mt,shapeFlag:yt,transition:zt,dirs:Mt}=Q;if(Ze=Q.el=M(Q.type,Ke,mt&&mt.is,mt),yt&8?B(Ze,Q.children):yt&16&&ge(Q.children,Ze,null,Fe,Re,Ke&&Xe!=="foreignObject",nt,b),Mt&&invokeDirectiveHook(Q,null,Fe,"created"),Ve(Ze,Q,Q.scopeId,nt,Fe),mt){for(const _t in mt)_t!=="value"&&!isReservedProp(_t)&&w(Ze,_t,null,mt[_t],Ke,Q.children,Fe,Re,$i);"value"in mt&&w(Ze,"value",null,mt.value),(ze=mt.onVnodeBeforeMount)&&invokeVNodeHook(ze,Fe,Q)}Mt&&invokeDirectiveHook(Q,null,Fe,"beforeMount");const Ci=(!Re||Re&&!Re.pendingBranch)&&zt&&!zt.persisted;Ci&&zt.beforeEnter(Ze),_(Ze,ue,Me),((ze=mt&&mt.onVnodeMounted)||Ci||Mt)&&queuePostRenderEffect(()=>{ze&&invokeVNodeHook(ze,Fe,Q),Ci&&zt.enter(Ze),Mt&&invokeDirectiveHook(Q,null,Fe,"mounted")},Re)},Ve=(Q,ue,Me,Fe,Re)=>{if(Me&&oe(Q,Me),Fe)for(let Ke=0;Ke<Fe.length;Ke++)oe(Q,Fe[Ke]);if(Re){let Ke=Re.subTree;if(ue===Ke){const nt=Re.vnode;Ve(Q,nt,nt.scopeId,nt.slotScopeIds,Re.parent)}}},ge=(Q,ue,Me,Fe,Re,Ke,nt,b,Ze=0)=>{for(let ze=Ze;ze<Q.length;ze++){const Xe=Q[ze]=b?cloneIfMounted(Q[ze]):normalizeVNode(Q[ze]);me(null,Xe,ue,Me,Fe,Re,Ke,nt,b)}},De=(Q,ue,Me,Fe,Re,Ke,nt)=>{const b=ue.el=Q.el;let{patchFlag:Ze,dynamicChildren:ze,dirs:Xe}=ue;Ze|=Q.patchFlag&16;const mt=Q.props||EMPTY_OBJ,yt=ue.props||EMPTY_OBJ;let zt;Me&&toggleRecurse(Me,!1),(zt=yt.onVnodeBeforeUpdate)&&invokeVNodeHook(zt,Me,ue,Q),Xe&&invokeDirectiveHook(ue,Q,Me,"beforeUpdate"),Me&&toggleRecurse(Me,!0);const Mt=Re&&ue.type!=="foreignObject";if(ze?qe(Q.dynamicChildren,ze,b,Me,Fe,Mt,Ke):nt||Tt(Q,ue,b,null,Me,Fe,Mt,Ke,!1),Ze>0){if(Ze&16)ot(b,ue,mt,yt,Me,Fe,Re);else if(Ze&2&&mt.class!==yt.class&&w(b,"class",null,yt.class,Re),Ze&4&&w(b,"style",mt.style,yt.style,Re),Ze&8){const Ci=ue.dynamicProps;for(let _t=0;_t<Ci.length;_t++){const Pi=Ci[_t],S=mt[Pi],zr=yt[Pi];(zr!==S||Pi==="value")&&w(b,Pi,S,zr,Re,Q.children,Me,Fe,$i)}}Ze&1&&Q.children!==ue.children&&B(b,ue.children)}else!nt&&ze==null&&ot(b,ue,mt,yt,Me,Fe,Re);((zt=yt.onVnodeUpdated)||Xe)&&queuePostRenderEffect(()=>{zt&&invokeVNodeHook(zt,Me,ue,Q),Xe&&invokeDirectiveHook(ue,Q,Me,"updated")},Fe)},qe=(Q,ue,Me,Fe,Re,Ke,nt)=>{for(let b=0;b<ue.length;b++){const Ze=Q[b],ze=ue[b],Xe=Ze.el&&(Ze.type===Fragment||!isSameVNodeType(Ze,ze)||Ze.shapeFlag&70)?j(Ze.el):Me;me(Ze,ze,Xe,null,Fe,Re,Ke,nt,!0)}},ot=(Q,ue,Me,Fe,Re,Ke,nt)=>{if(Me!==Fe){if(Me!==EMPTY_OBJ)for(const b in Me)!isReservedProp(b)&&!(b in Fe)&&w(Q,b,Me[b],null,nt,ue.children,Re,Ke,$i);for(const b in Fe){if(isReservedProp(b))continue;const Ze=Fe[b],ze=Me[b];Ze!==ze&&b!=="value"&&w(Q,b,ze,Ze,nt,ue.children,Re,Ke,$i)}"value"in Fe&&w(Q,"value",Me.value,Fe.value)}},We=(Q,ue,Me,Fe,Re,Ke,nt,b,Ze)=>{const ze=ue.el=Q?Q.el:R(""),Xe=ue.anchor=Q?Q.anchor:R("");let{patchFlag:mt,dynamicChildren:yt,slotScopeIds:zt}=ue;zt&&(b=b?b.concat(zt):zt),Q==null?(_(ze,Me,Fe),_(Xe,Me,Fe),ge(ue.children,Me,Xe,Re,Ke,nt,b,Ze)):mt>0&&mt&64&&yt&&Q.dynamicChildren?(qe(Q.dynamicChildren,yt,Me,Re,Ke,nt,b),(ue.key!=null||Re&&ue===Re.subTree)&&traverseStaticChildren(Q,ue,!0)):Tt(Q,ue,Me,Xe,Re,Ke,nt,b,Ze)},ct=(Q,ue,Me,Fe,Re,Ke,nt,b,Ze)=>{ue.slotScopeIds=b,Q==null?ue.shapeFlag&512?Re.ctx.activate(ue,Me,Fe,nt,Ze):je(ue,Me,Fe,Re,Ke,nt,Ze):ti(Q,ue,Ze)},je=(Q,ue,Me,Fe,Re,Ke,nt)=>{const b=Q.component=createComponentInstance(Q,Fe,Re);if(isKeepAlive(Q)&&(b.ctx.renderer=Br),setupComponent(b),b.asyncDep){if(Re&&Re.registerDep(b,It),!Q.el){const Ze=b.subTree=createVNode(Comment);pe(null,Ze,ue,Me)}return}It(b,Q,ue,Me,Re,Ke,nt)},ti=(Q,ue,Me)=>{const Fe=ue.component=Q.component;if(shouldUpdateComponent(Q,ue,Me))if(Fe.asyncDep&&!Fe.asyncResolved){Rt(Fe,ue,Me);return}else Fe.next=ue,invalidateJob(Fe.update),Fe.update();else ue.el=Q.el,Fe.vnode=ue},It=(Q,ue,Me,Fe,Re,Ke,nt)=>{const b=()=>{if(Q.isMounted){let{next:Xe,bu:mt,u:yt,parent:zt,vnode:Mt}=Q,Ci=Xe,_t;toggleRecurse(Q,!1),Xe?(Xe.el=Mt.el,Rt(Q,Xe,nt)):Xe=Mt,mt&&invokeArrayFns(mt),(_t=Xe.props&&Xe.props.onVnodeBeforeUpdate)&&invokeVNodeHook(_t,zt,Xe,Mt),toggleRecurse(Q,!0);const Pi=renderComponentRoot(Q),S=Q.subTree;Q.subTree=Pi,me(S,Pi,j(S.el),Vr(S),Q,Re,Ke),Xe.el=Pi.el,Ci===null&&updateHOCHostEl(Q,Pi.el),yt&&queuePostRenderEffect(yt,Re),(_t=Xe.props&&Xe.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(_t,zt,Xe,Mt),Re)}else{let Xe;const{el:mt,props:yt}=ue,{bm:zt,m:Mt,parent:Ci}=Q,_t=isAsyncWrapper(ue);if(toggleRecurse(Q,!1),zt&&invokeArrayFns(zt),!_t&&(Xe=yt&&yt.onVnodeBeforeMount)&&invokeVNodeHook(Xe,Ci,ue),toggleRecurse(Q,!0),mt&&Rr){const Pi=()=>{Q.subTree=renderComponentRoot(Q),Rr(mt,Q.subTree,Q,Re,null)};_t?ue.type.__asyncLoader().then(()=>!Q.isUnmounted&&Pi()):Pi()}else{const Pi=Q.subTree=renderComponentRoot(Q);me(null,Pi,Me,Fe,Q,Re,Ke),ue.el=Pi.el}if(Mt&&queuePostRenderEffect(Mt,Re),!_t&&(Xe=yt&&yt.onVnodeMounted)){const Pi=ue;queuePostRenderEffect(()=>invokeVNodeHook(Xe,Ci,Pi),Re)}(ue.shapeFlag&256||Ci&&isAsyncWrapper(Ci.vnode)&&Ci.vnode.shapeFlag&256)&&Q.a&&queuePostRenderEffect(Q.a,Re),Q.isMounted=!0,ue=Me=Fe=null}},Ze=Q.effect=new ReactiveEffect(b,()=>queueJob(ze),Q.scope),ze=Q.update=()=>Ze.run();ze.id=Q.uid,toggleRecurse(Q,!0),ze()},Rt=(Q,ue,Me)=>{ue.component=Q;const Fe=Q.vnode.props;Q.vnode=ue,Q.next=null,updateProps(Q,ue.props,Fe,Me),updateSlots(Q,ue.children,Me),pauseTracking(),flushPreFlushCbs(),resetTracking()},Tt=(Q,ue,Me,Fe,Re,Ke,nt,b,Ze=!1)=>{const ze=Q&&Q.children,Xe=Q?Q.shapeFlag:0,mt=ue.children,{patchFlag:yt,shapeFlag:zt}=ue;if(yt>0){if(yt&128){ai(ze,mt,Me,Fe,Re,Ke,nt,b,Ze);return}else if(yt&256){ni(ze,mt,Me,Fe,Re,Ke,nt,b,Ze);return}}zt&8?(Xe&16&&$i(ze,Re,Ke),mt!==ze&&B(Me,mt)):Xe&16?zt&16?ai(ze,mt,Me,Fe,Re,Ke,nt,b,Ze):$i(ze,Re,Ke,!0):(Xe&8&&B(Me,""),zt&16&&ge(mt,Me,Fe,Re,Ke,nt,b,Ze))},ni=(Q,ue,Me,Fe,Re,Ke,nt,b,Ze)=>{Q=Q||EMPTY_ARR,ue=ue||EMPTY_ARR;const ze=Q.length,Xe=ue.length,mt=Math.min(ze,Xe);let yt;for(yt=0;yt<mt;yt++){const zt=ue[yt]=Ze?cloneIfMounted(ue[yt]):normalizeVNode(ue[yt]);me(Q[yt],zt,Me,null,Re,Ke,nt,b,Ze)}ze>Xe?$i(Q,Re,Ke,!0,!1,mt):ge(ue,Me,Fe,Re,Ke,nt,b,Ze,mt)},ai=(Q,ue,Me,Fe,Re,Ke,nt,b,Ze)=>{let ze=0;const Xe=ue.length;let mt=Q.length-1,yt=Xe-1;for(;ze<=mt&&ze<=yt;){const zt=Q[ze],Mt=ue[ze]=Ze?cloneIfMounted(ue[ze]):normalizeVNode(ue[ze]);if(isSameVNodeType(zt,Mt))me(zt,Mt,Me,null,Re,Ke,nt,b,Ze);else break;ze++}for(;ze<=mt&&ze<=yt;){const zt=Q[mt],Mt=ue[yt]=Ze?cloneIfMounted(ue[yt]):normalizeVNode(ue[yt]);if(isSameVNodeType(zt,Mt))me(zt,Mt,Me,null,Re,Ke,nt,b,Ze);else break;mt--,yt--}if(ze>mt){if(ze<=yt){const zt=yt+1,Mt=zt<Xe?ue[zt].el:Fe;for(;ze<=yt;)me(null,ue[ze]=Ze?cloneIfMounted(ue[ze]):normalizeVNode(ue[ze]),Me,Mt,Re,Ke,nt,b,Ze),ze++}}else if(ze>yt)for(;ze<=mt;)Ai(Q[ze],Re,Ke,!0),ze++;else{const zt=ze,Mt=ze,Ci=new Map;for(ze=Mt;ze<=yt;ze++){const _r=ue[ze]=Ze?cloneIfMounted(ue[ze]):normalizeVNode(ue[ze]);_r.key!=null&&Ci.set(_r.key,ze)}let _t,Pi=0;const S=yt-Mt+1;let zr=!1,gn=0;const Jr=new Array(S);for(ze=0;ze<S;ze++)Jr[ze]=0;for(ze=zt;ze<=mt;ze++){const _r=Q[ze];if(Pi>=S){Ai(_r,Re,Ke,!0);continue}let gr;if(_r.key!=null)gr=Ci.get(_r.key);else for(_t=Mt;_t<=yt;_t++)if(Jr[_t-Mt]===0&&isSameVNodeType(_r,ue[_t])){gr=_t;break}gr===void 0?Ai(_r,Re,Ke,!0):(Jr[gr-Mt]=ze+1,gr>=gn?gn=gr:zr=!0,me(_r,ue[gr],Me,null,Re,Ke,nt,b,Ze),Pi++)}const li=zr?getSequence(Jr):EMPTY_ARR;for(_t=li.length-1,ze=S-1;ze>=0;ze--){const _r=Mt+ze,gr=ue[_r],Vn=_r+1<Xe?ue[_r+1].el:Fe;Jr[ze]===0?me(null,gr,Me,Vn,Re,Ke,nt,b,Ze):zr&&(_t<0||ze!==li[_t]?Zi(gr,Me,Vn,2):_t--)}}},Zi=(Q,ue,Me,Fe,Re=null)=>{const{el:Ke,type:nt,transition:b,children:Ze,shapeFlag:ze}=Q;if(ze&6){Zi(Q.component.subTree,ue,Me,Fe);return}if(ze&128){Q.suspense.move(ue,Me,Fe);return}if(ze&64){nt.move(Q,ue,Me,Br);return}if(nt===Fragment){_(Ke,ue,Me);for(let mt=0;mt<Ze.length;mt++)Zi(Ze[mt],ue,Me,Fe);_(Q.anchor,ue,Me);return}if(nt===Static){Le(Q,ue,Me);return}if(Fe!==2&&ze&1&&b)if(Fe===0)b.beforeEnter(Ke),_(Ke,ue,Me),queuePostRenderEffect(()=>b.enter(Ke),Re);else{const{leave:mt,delayLeave:yt,afterLeave:zt}=b,Mt=()=>_(Ke,ue,Me),Ci=()=>{mt(Ke,()=>{Mt(),zt&&zt()})};yt?yt(Ke,Mt,Ci):Ci()}else _(Ke,ue,Me)},Ai=(Q,ue,Me,Fe=!1,Re=!1)=>{const{type:Ke,props:nt,ref:b,children:Ze,dynamicChildren:ze,shapeFlag:Xe,patchFlag:mt,dirs:yt}=Q;if(b!=null&&setRef(b,null,Me,Q,!0),Xe&256){ue.ctx.deactivate(Q);return}const zt=Xe&1&&yt,Mt=!isAsyncWrapper(Q);let Ci;if(Mt&&(Ci=nt&&nt.onVnodeBeforeUnmount)&&invokeVNodeHook(Ci,ue,Q),Xe&6)Ur(Q.component,Me,Fe);else{if(Xe&128){Q.suspense.unmount(Me,Fe);return}zt&&invokeDirectiveHook(Q,null,ue,"beforeUnmount"),Xe&64?Q.type.remove(Q,ue,Me,Re,Br,Fe):ze&&(Ke!==Fragment||mt>0&&mt&64)?$i(ze,ue,Me,!1,!0):(Ke===Fragment&&mt&384||!Re&&Xe&16)&&$i(Ze,ue,Me),Fe&&xr(Q)}(Mt&&(Ci=nt&&nt.onVnodeUnmounted)||zt)&&queuePostRenderEffect(()=>{Ci&&invokeVNodeHook(Ci,ue,Q),zt&&invokeDirectiveHook(Q,null,ue,"unmounted")},Me)},xr=Q=>{const{type:ue,el:Me,anchor:Fe,transition:Re}=Q;if(ue===Fragment){_n(Me,Fe);return}if(ue===Static){he(Q);return}const Ke=()=>{g(Me),Re&&!Re.persisted&&Re.afterLeave&&Re.afterLeave()};if(Q.shapeFlag&1&&Re&&!Re.persisted){const{leave:nt,delayLeave:b}=Re,Ze=()=>nt(Me,Ke);b?b(Q.el,Ke,Ze):Ze()}else Ke()},_n=(Q,ue)=>{let Me;for(;Q!==ue;)Me=J(Q),g(Q),Q=Me;g(ue)},Ur=(Q,ue,Me)=>{const{bum:Fe,scope:Re,update:Ke,subTree:nt,um:b}=Q;Fe&&invokeArrayFns(Fe),Re.stop(),Ke&&(Ke.active=!1,Ai(nt,Q,ue,Me)),b&&queuePostRenderEffect(b,ue),queuePostRenderEffect(()=>{Q.isUnmounted=!0},ue),ue&&ue.pendingBranch&&!ue.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===ue.pendingId&&(ue.deps--,ue.deps===0&&ue.resolve())},$i=(Q,ue,Me,Fe=!1,Re=!1,Ke=0)=>{for(let nt=Ke;nt<Q.length;nt++)Ai(Q[nt],ue,Me,Fe,Re)},Vr=Q=>Q.shapeFlag&6?Vr(Q.component.subTree):Q.shapeFlag&128?Q.suspense.next():J(Q.anchor||Q.el),Nn=(Q,ue,Me)=>{Q==null?ue._vnode&&Ai(ue._vnode,null,null,!0):me(ue._vnode||null,Q,ue,null,null,null,Me),flushPreFlushCbs(),flushPostFlushCbs(),ue._vnode=Q},Br={p:me,um:Ai,m:Zi,r:xr,mt:je,mc:ge,pc:Tt,pbc:qe,n:Vr,o:i};let xn,Rr;return o&&([xn,Rr]=o(Br)),{render:Nn,hydrate:xn,createApp:createAppAPI(Nn,xn)}}function toggleRecurse({effect:i,update:o},u){i.allowRecurse=o.allowRecurse=u}function traverseStaticChildren(i,o,u=!1){const _=i.children,g=o.children;if(isArray(_)&&isArray(g))for(let w=0;w<_.length;w++){const M=_[w];let R=g[w];R.shapeFlag&1&&!R.dynamicChildren&&((R.patchFlag<=0||R.patchFlag===32)&&(R=g[w]=cloneIfMounted(g[w]),R.el=M.el),u||traverseStaticChildren(M,R)),R.type===Text&&(R.el=M.el)}}function getSequence(i){const o=i.slice(),u=[0];let _,g,w,M,R;const E=i.length;for(_=0;_<E;_++){const D=i[_];if(D!==0){if(g=u[u.length-1],i[g]<D){o[_]=g,u.push(_);continue}for(w=0,M=u.length-1;w<M;)R=w+M>>1,i[u[R]]<D?w=R+1:M=R;D<i[u[w]]&&(w>0&&(o[_]=u[w-1]),u[w]=_)}}for(w=u.length,M=u[w-1];w-- >0;)u[w]=M,M=o[M];return u}const isTeleport=i=>i.__isTeleport,isTeleportDisabled=i=>i&&(i.disabled||i.disabled===""),isTargetSVG=i=>typeof SVGElement<"u"&&i instanceof SVGElement,resolveTarget=(i,o)=>{const u=i&&i.to;return isString(u)?o?o(u):null:u},TeleportImpl={__isTeleport:!0,process(i,o,u,_,g,w,M,R,E,D){const{mc:B,pc:j,pbc:J,o:{insert:oe,querySelector:le,createText:me,createComment:Be}}=D,pe=isTeleportDisabled(o.props);let{shapeFlag:re,children:Le,dynamicChildren:he}=o;if(i==null){const ke=o.el=me(""),Ae=o.anchor=me("");oe(ke,u,_),oe(Ae,u,_);const Ve=o.target=resolveTarget(o.props,le),ge=o.targetAnchor=me("");Ve&&(oe(ge,Ve),M=M||isTargetSVG(Ve));const De=(qe,ot)=>{re&16&&B(Le,qe,ot,g,w,M,R,E)};pe?De(u,Ae):Ve&&De(Ve,ge)}else{o.el=i.el;const ke=o.anchor=i.anchor,Ae=o.target=i.target,Ve=o.targetAnchor=i.targetAnchor,ge=isTeleportDisabled(i.props),De=ge?u:Ae,qe=ge?ke:Ve;if(M=M||isTargetSVG(Ae),he?(J(i.dynamicChildren,he,De,g,w,M,R),traverseStaticChildren(i,o,!0)):E||j(i,o,De,qe,g,w,M,R,!1),pe)ge||moveTeleport(o,u,ke,D,1);else if((o.props&&o.props.to)!==(i.props&&i.props.to)){const ot=o.target=resolveTarget(o.props,le);ot&&moveTeleport(o,ot,null,D,0)}else ge&&moveTeleport(o,Ae,Ve,D,1)}updateCssVars(o)},remove(i,o,u,_,{um:g,o:{remove:w}},M){const{shapeFlag:R,children:E,anchor:D,targetAnchor:B,target:j,props:J}=i;if(j&&w(B),(M||!isTeleportDisabled(J))&&(w(D),R&16))for(let oe=0;oe<E.length;oe++){const le=E[oe];g(le,o,u,!0,!!le.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(i,o,u,{o:{insert:_},m:g},w=2){w===0&&_(i.targetAnchor,o,u);const{el:M,anchor:R,shapeFlag:E,children:D,props:B}=i,j=w===2;if(j&&_(M,o,u),(!j||isTeleportDisabled(B))&&E&16)for(let J=0;J<D.length;J++)g(D[J],o,u,2);j&&_(R,o,u)}function hydrateTeleport(i,o,u,_,g,w,{o:{nextSibling:M,parentNode:R,querySelector:E}},D){const B=o.target=resolveTarget(o.props,E);if(B){const j=B._lpa||B.firstChild;if(o.shapeFlag&16)if(isTeleportDisabled(o.props))o.anchor=D(M(i),o,R(i),u,_,g,w),o.targetAnchor=j;else{o.anchor=M(i);let J=j;for(;J;)if(J=M(J),J&&J.nodeType===8&&J.data==="teleport anchor"){o.targetAnchor=J,B._lpa=o.targetAnchor&&M(o.targetAnchor);break}D(j,o,B,u,_,g,w)}updateCssVars(o)}return o.anchor&&M(o.anchor)}const Teleport=TeleportImpl;function updateCssVars(i){const o=i.ctx;if(o&&o.ut){let u=i.children[0].el;for(;u!==i.targetAnchor;)u.nodeType===1&&u.setAttribute("data-v-owner",o.uid),u=u.nextSibling;o.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(i=!1){blockStack.push(currentBlock=i?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(i){isBlockTreeEnabled+=i}function setupBlock(i){return i.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(i),i}function createElementBlock(i,o,u,_,g,w){return setupBlock(createBaseVNode(i,o,u,_,g,w,!0))}function createBlock(i,o,u,_,g){return setupBlock(createVNode(i,o,u,_,g,!0))}function isVNode(i){return i?i.__v_isVNode===!0:!1}function isSameVNodeType(i,o){return i.type===o.type&&i.key===o.key}function transformVNodeArgs(i){}const InternalObjectKey="__vInternal",normalizeKey=({key:i})=>i??null,normalizeRef=({ref:i,ref_key:o,ref_for:u})=>(typeof i=="number"&&(i=""+i),i!=null?isString(i)||isRef(i)||isFunction(i)?{i:currentRenderingInstance,r:i,k:o,f:!!u}:i:null);function createBaseVNode(i,o=null,u=null,_=0,g=null,w=i===Fragment?0:1,M=!1,R=!1){const E={__v_isVNode:!0,__v_skip:!0,type:i,props:o,key:o&&normalizeKey(o),ref:o&&normalizeRef(o),scopeId:currentScopeId,slotScopeIds:null,children:u,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:w,patchFlag:_,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return R?(normalizeChildren(E,u),w&128&&i.normalize(E)):u&&(E.shapeFlag|=isString(u)?8:16),isBlockTreeEnabled>0&&!M&&currentBlock&&(E.patchFlag>0||w&6)&&E.patchFlag!==32&&currentBlock.push(E),E}const createVNode=_createVNode;function _createVNode(i,o=null,u=null,_=0,g=null,w=!1){if((!i||i===NULL_DYNAMIC_COMPONENT)&&(i=Comment),isVNode(i)){const R=cloneVNode(i,o,!0);return u&&normalizeChildren(R,u),isBlockTreeEnabled>0&&!w&&currentBlock&&(R.shapeFlag&6?currentBlock[currentBlock.indexOf(i)]=R:currentBlock.push(R)),R.patchFlag|=-2,R}if(isClassComponent(i)&&(i=i.__vccOpts),o){o=guardReactiveProps(o);let{class:R,style:E}=o;R&&!isString(R)&&(o.class=normalizeClass(R)),isObject$1(E)&&(isProxy(E)&&!isArray(E)&&(E=extend({},E)),o.style=normalizeStyle(E))}const M=isString(i)?1:isSuspense(i)?128:isTeleport(i)?64:isObject$1(i)?4:isFunction(i)?2:0;return createBaseVNode(i,o,u,_,g,M,w,!0)}function guardReactiveProps(i){return i?isProxy(i)||InternalObjectKey in i?extend({},i):i:null}function cloneVNode(i,o,u=!1){const{props:_,ref:g,patchFlag:w,children:M}=i,R=o?mergeProps(_||{},o):_;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:R,key:R&&normalizeKey(R),ref:o&&o.ref?u&&g?isArray(g)?g.concat(normalizeRef(o)):[g,normalizeRef(o)]:normalizeRef(o):g,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:M,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:o&&i.type!==Fragment?w===-1?16:w|16:w,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&cloneVNode(i.ssContent),ssFallback:i.ssFallback&&cloneVNode(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce}}function createTextVNode(i=" ",o=0){return createVNode(Text,null,i,o)}function createStaticVNode(i,o){const u=createVNode(Static,null,i);return u.staticCount=o,u}function createCommentVNode(i="",o=!1){return o?(openBlock(),createBlock(Comment,null,i)):createVNode(Comment,null,i)}function normalizeVNode(i){return i==null||typeof i=="boolean"?createVNode(Comment):isArray(i)?createVNode(Fragment,null,i.slice()):typeof i=="object"?cloneIfMounted(i):createVNode(Text,null,String(i))}function cloneIfMounted(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:cloneVNode(i)}function normalizeChildren(i,o){let u=0;const{shapeFlag:_}=i;if(o==null)o=null;else if(isArray(o))u=16;else if(typeof o=="object")if(_&65){const g=o.default;g&&(g._c&&(g._d=!1),normalizeChildren(i,g()),g._c&&(g._d=!0));return}else{u=32;const g=o._;!g&&!(InternalObjectKey in o)?o._ctx=currentRenderingInstance:g===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?o._=1:(o._=2,i.patchFlag|=1024))}else isFunction(o)?(o={default:o,_ctx:currentRenderingInstance},u=32):(o=String(o),_&64?(u=16,o=[createTextVNode(o)]):u=8);i.children=o,i.shapeFlag|=u}function mergeProps(...i){const o={};for(let u=0;u<i.length;u++){const _=i[u];for(const g in _)if(g==="class")o.class!==_.class&&(o.class=normalizeClass([o.class,_.class]));else if(g==="style")o.style=normalizeStyle([o.style,_.style]);else if(isOn$1(g)){const w=o[g],M=_[g];M&&w!==M&&!(isArray(w)&&w.includes(M))&&(o[g]=w?[].concat(w,M):M)}else g!==""&&(o[g]=_[g])}return o}function invokeVNodeHook(i,o,u,_=null){callWithAsyncErrorHandling(i,o,7,[u,_])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(i,o,u){const _=i.type,g=(o?o.appContext:i.appContext)||emptyAppContext,w={uid:uid++,vnode:i,type:_,parent:o,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(g.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(_,g),emitsOptions:normalizeEmitsOptions(_,g),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:_.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:u,suspenseId:u?u.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return w.ctx={_:w},w.root=o?o.root:w,w.emit=emit.bind(null,w),i.ce&&i.ce(w),w}let currentInstance=null;const getCurrentInstance$1=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(i=>currentInstance=i),internalSetCurrentInstance=i=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(o=>o(i)):globalCurrentInstanceSetters[0](i)};const setCurrentInstance=i=>{internalSetCurrentInstance(i),i.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(i){return i.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(i,o=!1){isInSSRComponentSetup=o;const{props:u,children:_}=i.vnode,g=isStatefulComponent(i);initProps(i,u,g,o),initSlots(i,_);const w=g?setupStatefulComponent(i,o):void 0;return isInSSRComponentSetup=!1,w}function setupStatefulComponent(i,o){const u=i.type;i.accessCache=Object.create(null),i.proxy=markRaw(new Proxy(i.ctx,PublicInstanceProxyHandlers));const{setup:_}=u;if(_){const g=i.setupContext=_.length>1?createSetupContext(i):null;setCurrentInstance(i),pauseTracking();const w=callWithErrorHandling(_,i,0,[i.props,g]);if(resetTracking(),unsetCurrentInstance(),isPromise(w)){if(w.then(unsetCurrentInstance,unsetCurrentInstance),o)return w.then(M=>{handleSetupResult(i,M,o)}).catch(M=>{handleError(M,i,0)});i.asyncDep=w}else handleSetupResult(i,w,o)}else finishComponentSetup(i,o)}function handleSetupResult(i,o,u){isFunction(o)?i.type.__ssrInlineRender?i.ssrRender=o:i.render=o:isObject$1(o)&&(i.setupState=proxyRefs(o)),finishComponentSetup(i,u)}let compile$1,installWithProxy;function registerRuntimeCompiler(i){compile$1=i,installWithProxy=o=>{o.render._rc&&(o.withProxy=new Proxy(o.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(i,o,u){const _=i.type;if(!i.render){if(!o&&compile$1&&!_.render){const g=_.template||resolveMergedOptions(i).template;if(g){const{isCustomElement:w,compilerOptions:M}=i.appContext.config,{delimiters:R,compilerOptions:E}=_,D=extend(extend({isCustomElement:w,delimiters:R},M),E);_.render=compile$1(g,D)}}i.render=_.render||NOOP,installWithProxy&&installWithProxy(i)}setCurrentInstance(i),pauseTracking(),applyOptions(i),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(i){return i.attrsProxy||(i.attrsProxy=new Proxy(i.attrs,{get(o,u){return track(i,"get","$attrs"),o[u]}}))}function createSetupContext(i){const o=u=>{i.exposed=u||{}};return{get attrs(){return getAttrsProxy(i)},slots:i.slots,emit:i.emit,expose:o}}function getExposeProxy(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(proxyRefs(markRaw(i.exposed)),{get(o,u){if(u in o)return o[u];if(u in publicPropertiesMap)return publicPropertiesMap[u](i)},has(o,u){return u in o||u in publicPropertiesMap}}))}function getComponentName(i,o=!0){return isFunction(i)?i.displayName||i.name:i.name||o&&i.__name}function isClassComponent(i){return isFunction(i)&&"__vccOpts"in i}const computed=(i,o)=>computed$1(i,o,isInSSRComponentSetup);function h(i,o,u){const _=arguments.length;return _===2?isObject$1(o)&&!isArray(o)?isVNode(o)?createVNode(i,null,[o]):createVNode(i,o):createVNode(i,null,o):(_>3?u=Array.prototype.slice.call(arguments,2):_===3&&isVNode(u)&&(u=[u]),createVNode(i,o,u))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject$1(ssrContextKey);function initCustomFormatter(){}function withMemo(i,o,u,_){const g=u[_];if(g&&isMemoSame(g,i))return g;const w=o();return w.memo=i.slice(),u[_]=w}function isMemoSame(i,o){const u=i.memo;if(u.length!=o.length)return!1;for(let _=0;_<u.length;_++)if(hasChanged(u[_],o[_]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(i),!0}const version$1="3.3.4",_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(i,o,u)=>{o.insertBefore(i,u||null)},remove:i=>{const o=i.parentNode;o&&o.removeChild(i)},createElement:(i,o,u,_)=>{const g=o?doc.createElementNS(svgNS,i):doc.createElement(i,u?{is:u}:void 0);return i==="select"&&_&&_.multiple!=null&&g.setAttribute("multiple",_.multiple),g},createText:i=>doc.createTextNode(i),createComment:i=>doc.createComment(i),setText:(i,o)=>{i.nodeValue=o},setElementText:(i,o)=>{i.textContent=o},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>doc.querySelector(i),setScopeId(i,o){i.setAttribute(o,"")},insertStaticContent(i,o,u,_,g,w){const M=u?u.previousSibling:o.lastChild;if(g&&(g===w||g.nextSibling))for(;o.insertBefore(g.cloneNode(!0),u),!(g===w||!(g=g.nextSibling)););else{templateContainer.innerHTML=_?`<svg>${i}</svg>`:i;const R=templateContainer.content;if(_){const E=R.firstChild;for(;E.firstChild;)R.appendChild(E.firstChild);R.removeChild(E)}o.insertBefore(R,u)}return[M?M.nextSibling:o.firstChild,u?u.previousSibling:o.lastChild]}};function patchClass(i,o,u){const _=i._vtc;_&&(o=(o?[o,..._]:[..._]).join(" ")),o==null?i.removeAttribute("class"):u?i.setAttribute("class",o):i.className=o}function patchStyle(i,o,u){const _=i.style,g=isString(u);if(u&&!g){if(o&&!isString(o))for(const w in o)u[w]==null&&setStyle(_,w,"");for(const w in u)setStyle(_,w,u[w])}else{const w=_.display;g?o!==u&&(_.cssText=u):o&&i.removeAttribute("style"),"_vod"in i&&(_.display=w)}}const importantRE=/\s*!important$/;function setStyle(i,o,u){if(isArray(u))u.forEach(_=>setStyle(i,o,_));else if(u==null&&(u=""),o.startsWith("--"))i.setProperty(o,u);else{const _=autoPrefix(i,o);importantRE.test(u)?i.setProperty(hyphenate(_),u.replace(importantRE,""),"important"):i[_]=u}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(i,o){const u=prefixCache[o];if(u)return u;let _=camelize(o);if(_!=="filter"&&_ in i)return prefixCache[o]=_;_=capitalize(_);for(let g=0;g<prefixes.length;g++){const w=prefixes[g]+_;if(w in i)return prefixCache[o]=w}return o}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(i,o,u,_,g){if(_&&o.startsWith("xlink:"))u==null?i.removeAttributeNS(xlinkNS,o.slice(6,o.length)):i.setAttributeNS(xlinkNS,o,u);else{const w=isSpecialBooleanAttr(o);u==null||w&&!includeBooleanAttr(u)?i.removeAttribute(o):i.setAttribute(o,w?"":u)}}function patchDOMProp(i,o,u,_,g,w,M){if(o==="innerHTML"||o==="textContent"){_&&M(_,g,w),i[o]=u??"";return}const R=i.tagName;if(o==="value"&&R!=="PROGRESS"&&!R.includes("-")){i._value=u;const D=R==="OPTION"?i.getAttribute("value"):i.value,B=u??"";D!==B&&(i.value=B),u==null&&i.removeAttribute(o);return}let E=!1;if(u===""||u==null){const D=typeof i[o];D==="boolean"?u=includeBooleanAttr(u):u==null&&D==="string"?(u="",E=!0):D==="number"&&(u=0,E=!0)}try{i[o]=u}catch{}E&&i.removeAttribute(o)}function addEventListener(i,o,u,_){i.addEventListener(o,u,_)}function removeEventListener(i,o,u,_){i.removeEventListener(o,u,_)}function patchEvent(i,o,u,_,g=null){const w=i._vei||(i._vei={}),M=w[o];if(_&&M)M.value=_;else{const[R,E]=parseName(o);if(_){const D=w[o]=createInvoker(_,g);addEventListener(i,R,D,E)}else M&&(removeEventListener(i,R,M,E),w[o]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(i){let o;if(optionsModifierRE.test(i)){o={};let _;for(;_=i.match(optionsModifierRE);)i=i.slice(0,i.length-_[0].length),o[_[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):hyphenate(i.slice(2)),o]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(i,o){const u=_=>{if(!_._vts)_._vts=Date.now();else if(_._vts<=u.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(_,u.value),o,5,[_])};return u.value=i,u.attached=getNow(),u}function patchStopImmediatePropagation(i,o){if(isArray(o)){const u=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{u.call(i),i._stopped=!0},o.map(_=>g=>!g._stopped&&_&&_(g))}else return o}const nativeOnRE=/^on[a-z]/,patchProp=(i,o,u,_,g=!1,w,M,R,E)=>{o==="class"?patchClass(i,_,g):o==="style"?patchStyle(i,u,_):isOn$1(o)?isModelListener(o)||patchEvent(i,o,u,_,M):(o[0]==="."?(o=o.slice(1),!0):o[0]==="^"?(o=o.slice(1),!1):shouldSetAsProp(i,o,_,g))?patchDOMProp(i,o,_,w,M,R,E):(o==="true-value"?i._trueValue=_:o==="false-value"&&(i._falseValue=_),patchAttr(i,o,_,g))};function shouldSetAsProp(i,o,u,_){return _?!!(o==="innerHTML"||o==="textContent"||o in i&&nativeOnRE.test(o)&&isFunction(u)):o==="spellcheck"||o==="draggable"||o==="translate"||o==="form"||o==="list"&&i.tagName==="INPUT"||o==="type"&&i.tagName==="TEXTAREA"||nativeOnRE.test(o)&&isString(u)?!1:o in i}function defineCustomElement(i,o){const u=defineComponent$1(i);class _ extends VueElement{constructor(w){super(u,w,o)}}return _.def=u,_}const defineSSRCustomElement=i=>defineCustomElement(i,hydrate),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(o,u={},_){super(),this._def=o,this._props=u,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&_?_(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(render(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let _=0;_<this.attributes.length;_++)this._setAttr(this.attributes[_].name);new MutationObserver(_=>{for(const g of _)this._setAttr(g.attributeName)}).observe(this,{attributes:!0});const o=(_,g=!1)=>{const{props:w,styles:M}=_;let R;if(w&&!isArray(w))for(const E in w){const D=w[E];(D===Number||D&&D.type===Number)&&(E in this._props&&(this._props[E]=toNumber(this._props[E])),(R||(R=Object.create(null)))[camelize(E)]=!0)}this._numberProps=R,g&&this._resolveProps(_),this._applyStyles(M),this._update()},u=this._def.__asyncLoader;u?u().then(_=>o(_,!0)):o(this._def)}_resolveProps(o){const{props:u}=o,_=isArray(u)?u:Object.keys(u||{});for(const g of Object.keys(this))g[0]!=="_"&&_.includes(g)&&this._setProp(g,this[g],!0,!1);for(const g of _.map(camelize))Object.defineProperty(this,g,{get(){return this._getProp(g)},set(w){this._setProp(g,w)}})}_setAttr(o){let u=this.getAttribute(o);const _=camelize(o);this._numberProps&&this._numberProps[_]&&(u=toNumber(u)),this._setProp(_,u,!1)}_getProp(o){return this._props[o]}_setProp(o,u,_=!0,g=!0){u!==this._props[o]&&(this._props[o]=u,g&&this._instance&&this._update(),_&&(u===!0?this.setAttribute(hyphenate(o),""):typeof u=="string"||typeof u=="number"?this.setAttribute(hyphenate(o),u+""):u||this.removeAttribute(hyphenate(o))))}_update(){render(this._createVNode(),this.shadowRoot)}_createVNode(){const o=createVNode(this._def,extend({},this._props));return this._instance||(o.ce=u=>{this._instance=u,u.isCE=!0;const _=(w,M)=>{this.dispatchEvent(new CustomEvent(w,{detail:M}))};u.emit=(w,...M)=>{_(w,M),hyphenate(w)!==w&&_(hyphenate(w),M)};let g=this;for(;g=g&&(g.parentNode||g.host);)if(g instanceof VueElement){u.parent=g._instance,u.provides=g._instance.provides;break}}),o}_applyStyles(o){o&&o.forEach(u=>{const _=document.createElement("style");_.textContent=u,this.shadowRoot.appendChild(_)})}}function useCssModule(i="$style"){{const o=getCurrentInstance$1();if(!o)return EMPTY_OBJ;const u=o.type.__cssModules;if(!u)return EMPTY_OBJ;const _=u[i];return _||EMPTY_OBJ}}function useCssVars(i){const o=getCurrentInstance$1();if(!o)return;const u=o.ut=(g=i(o.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${o.uid}"]`)).forEach(w=>setVarsOnNode(w,g))},_=()=>{const g=i(o.proxy);setVarsOnVNode(o.subTree,g),u(g)};watchPostEffect(_),onMounted(()=>{const g=new MutationObserver(_);g.observe(o.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>g.disconnect())})}function setVarsOnVNode(i,o){if(i.shapeFlag&128){const u=i.suspense;i=u.activeBranch,u.pendingBranch&&!u.isHydrating&&u.effects.push(()=>{setVarsOnVNode(u.activeBranch,o)})}for(;i.component;)i=i.component.subTree;if(i.shapeFlag&1&&i.el)setVarsOnNode(i.el,o);else if(i.type===Fragment)i.children.forEach(u=>setVarsOnVNode(u,o));else if(i.type===Static){let{el:u,anchor:_}=i;for(;u&&(setVarsOnNode(u,o),u!==_);)u=u.nextSibling}}function setVarsOnNode(i,o){if(i.nodeType===1){const u=i.style;for(const _ in o)u.setProperty(`--${_}`,o[_])}}const TRANSITION="transition",ANIMATION="animation",Transition=(i,{slots:o})=>h(BaseTransition,resolveTransitionProps(i),o);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(i,o=[])=>{isArray(i)?i.forEach(u=>u(...o)):i&&i(...o)},hasExplicitCallback=i=>i?isArray(i)?i.some(o=>o.length>1):i.length>1:!1;function resolveTransitionProps(i){const o={};for(const We in i)We in DOMTransitionPropsValidators||(o[We]=i[We]);if(i.css===!1)return o;const{name:u="v",type:_,duration:g,enterFromClass:w=`${u}-enter-from`,enterActiveClass:M=`${u}-enter-active`,enterToClass:R=`${u}-enter-to`,appearFromClass:E=w,appearActiveClass:D=M,appearToClass:B=R,leaveFromClass:j=`${u}-leave-from`,leaveActiveClass:J=`${u}-leave-active`,leaveToClass:oe=`${u}-leave-to`}=i,le=normalizeDuration(g),me=le&&le[0],Be=le&&le[1],{onBeforeEnter:pe,onEnter:re,onEnterCancelled:Le,onLeave:he,onLeaveCancelled:ke,onBeforeAppear:Ae=pe,onAppear:Ve=re,onAppearCancelled:ge=Le}=o,De=(We,ct,je)=>{removeTransitionClass(We,ct?B:R),removeTransitionClass(We,ct?D:M),je&&je()},qe=(We,ct)=>{We._isLeaving=!1,removeTransitionClass(We,j),removeTransitionClass(We,oe),removeTransitionClass(We,J),ct&&ct()},ot=We=>(ct,je)=>{const ti=We?Ve:re,It=()=>De(ct,We,je);callHook(ti,[ct,It]),nextFrame(()=>{removeTransitionClass(ct,We?E:w),addTransitionClass(ct,We?B:R),hasExplicitCallback(ti)||whenTransitionEnds(ct,_,me,It)})};return extend(o,{onBeforeEnter(We){callHook(pe,[We]),addTransitionClass(We,w),addTransitionClass(We,M)},onBeforeAppear(We){callHook(Ae,[We]),addTransitionClass(We,E),addTransitionClass(We,D)},onEnter:ot(!1),onAppear:ot(!0),onLeave(We,ct){We._isLeaving=!0;const je=()=>qe(We,ct);addTransitionClass(We,j),forceReflow(),addTransitionClass(We,J),nextFrame(()=>{We._isLeaving&&(removeTransitionClass(We,j),addTransitionClass(We,oe),hasExplicitCallback(he)||whenTransitionEnds(We,_,Be,je))}),callHook(he,[We,je])},onEnterCancelled(We){De(We,!1),callHook(Le,[We])},onAppearCancelled(We){De(We,!0),callHook(ge,[We])},onLeaveCancelled(We){qe(We),callHook(ke,[We])}})}function normalizeDuration(i){if(i==null)return null;if(isObject$1(i))return[NumberOf(i.enter),NumberOf(i.leave)];{const o=NumberOf(i);return[o,o]}}function NumberOf(i){return toNumber(i)}function addTransitionClass(i,o){o.split(/\s+/).forEach(u=>u&&i.classList.add(u)),(i._vtc||(i._vtc=new Set)).add(o)}function removeTransitionClass(i,o){o.split(/\s+/).forEach(_=>_&&i.classList.remove(_));const{_vtc:u}=i;u&&(u.delete(o),u.size||(i._vtc=void 0))}function nextFrame(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let endId=0;function whenTransitionEnds(i,o,u,_){const g=i._endId=++endId,w=()=>{g===i._endId&&_()};if(u)return setTimeout(w,u);const{type:M,timeout:R,propCount:E}=getTransitionInfo(i,o);if(!M)return _();const D=M+"end";let B=0;const j=()=>{i.removeEventListener(D,J),w()},J=oe=>{oe.target===i&&++B>=E&&j()};setTimeout(()=>{B<E&&j()},R+1),i.addEventListener(D,J)}function getTransitionInfo(i,o){const u=window.getComputedStyle(i),_=le=>(u[le]||"").split(", "),g=_(`${TRANSITION}Delay`),w=_(`${TRANSITION}Duration`),M=getTimeout(g,w),R=_(`${ANIMATION}Delay`),E=_(`${ANIMATION}Duration`),D=getTimeout(R,E);let B=null,j=0,J=0;o===TRANSITION?M>0&&(B=TRANSITION,j=M,J=w.length):o===ANIMATION?D>0&&(B=ANIMATION,j=D,J=E.length):(j=Math.max(M,D),B=j>0?M>D?TRANSITION:ANIMATION:null,J=B?B===TRANSITION?w.length:E.length:0);const oe=B===TRANSITION&&/\b(transform|all)(,|$)/.test(_(`${TRANSITION}Property`).toString());return{type:B,timeout:j,propCount:J,hasTransform:oe}}function getTimeout(i,o){for(;i.length<o.length;)i=i.concat(i);return Math.max(...o.map((u,_)=>toMs(u)+toMs(i[_])))}function toMs(i){return Number(i.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(i,{slots:o}){const u=getCurrentInstance$1(),_=useTransitionState();let g,w;return onUpdated(()=>{if(!g.length)return;const M=i.moveClass||`${i.name||"v"}-move`;if(!hasCSSTransform(g[0].el,u.vnode.el,M))return;g.forEach(callPendingCbs),g.forEach(recordPosition);const R=g.filter(applyTranslation);forceReflow(),R.forEach(E=>{const D=E.el,B=D.style;addTransitionClass(D,M),B.transform=B.webkitTransform=B.transitionDuration="";const j=D._moveCb=J=>{J&&J.target!==D||(!J||/transform$/.test(J.propertyName))&&(D.removeEventListener("transitionend",j),D._moveCb=null,removeTransitionClass(D,M))};D.addEventListener("transitionend",j)})}),()=>{const M=toRaw(i),R=resolveTransitionProps(M);let E=M.tag||Fragment;g=w,w=o.default?getTransitionRawChildren(o.default()):[];for(let D=0;D<w.length;D++){const B=w[D];B.key!=null&&setTransitionHooks(B,resolveTransitionHooks(B,R,_,u))}if(g)for(let D=0;D<g.length;D++){const B=g[D];setTransitionHooks(B,resolveTransitionHooks(B,R,_,u)),positionMap.set(B,B.el.getBoundingClientRect())}return createVNode(E,null,w)}}},removeMode=i=>delete i.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(i){const o=i.el;o._moveCb&&o._moveCb(),o._enterCb&&o._enterCb()}function recordPosition(i){newPositionMap.set(i,i.el.getBoundingClientRect())}function applyTranslation(i){const o=positionMap.get(i),u=newPositionMap.get(i),_=o.left-u.left,g=o.top-u.top;if(_||g){const w=i.el.style;return w.transform=w.webkitTransform=`translate(${_}px,${g}px)`,w.transitionDuration="0s",i}}function hasCSSTransform(i,o,u){const _=i.cloneNode();i._vtc&&i._vtc.forEach(M=>{M.split(/\s+/).forEach(R=>R&&_.classList.remove(R))}),u.split(/\s+/).forEach(M=>M&&_.classList.add(M)),_.style.display="none";const g=o.nodeType===1?o:o.parentNode;g.appendChild(_);const{hasTransform:w}=getTransitionInfo(_);return g.removeChild(_),w}const getModelAssigner=i=>{const o=i.props["onUpdate:modelValue"]||!1;return isArray(o)?u=>invokeArrayFns(o,u):o};function onCompositionStart(i){i.target.composing=!0}function onCompositionEnd(i){const o=i.target;o.composing&&(o.composing=!1,o.dispatchEvent(new Event("input")))}const vModelText={created(i,{modifiers:{lazy:o,trim:u,number:_}},g){i._assign=getModelAssigner(g);const w=_||g.props&&g.props.type==="number";addEventListener(i,o?"change":"input",M=>{if(M.target.composing)return;let R=i.value;u&&(R=R.trim()),w&&(R=looseToNumber(R)),i._assign(R)}),u&&addEventListener(i,"change",()=>{i.value=i.value.trim()}),o||(addEventListener(i,"compositionstart",onCompositionStart),addEventListener(i,"compositionend",onCompositionEnd),addEventListener(i,"change",onCompositionEnd))},mounted(i,{value:o}){i.value=o??""},beforeUpdate(i,{value:o,modifiers:{lazy:u,trim:_,number:g}},w){if(i._assign=getModelAssigner(w),i.composing||document.activeElement===i&&i.type!=="range"&&(u||_&&i.value.trim()===o||(g||i.type==="number")&&looseToNumber(i.value)===o))return;const M=o??"";i.value!==M&&(i.value=M)}},vModelCheckbox={deep:!0,created(i,o,u){i._assign=getModelAssigner(u),addEventListener(i,"change",()=>{const _=i._modelValue,g=getValue(i),w=i.checked,M=i._assign;if(isArray(_)){const R=looseIndexOf(_,g),E=R!==-1;if(w&&!E)M(_.concat(g));else if(!w&&E){const D=[..._];D.splice(R,1),M(D)}}else if(isSet(_)){const R=new Set(_);w?R.add(g):R.delete(g),M(R)}else M(getCheckboxValue(i,w))})},mounted:setChecked,beforeUpdate(i,o,u){i._assign=getModelAssigner(u),setChecked(i,o,u)}};function setChecked(i,{value:o,oldValue:u},_){i._modelValue=o,isArray(o)?i.checked=looseIndexOf(o,_.props.value)>-1:isSet(o)?i.checked=o.has(_.props.value):o!==u&&(i.checked=looseEqual(o,getCheckboxValue(i,!0)))}const vModelRadio={created(i,{value:o},u){i.checked=looseEqual(o,u.props.value),i._assign=getModelAssigner(u),addEventListener(i,"change",()=>{i._assign(getValue(i))})},beforeUpdate(i,{value:o,oldValue:u},_){i._assign=getModelAssigner(_),o!==u&&(i.checked=looseEqual(o,_.props.value))}},vModelSelect={deep:!0,created(i,{value:o,modifiers:{number:u}},_){const g=isSet(o);addEventListener(i,"change",()=>{const w=Array.prototype.filter.call(i.options,M=>M.selected).map(M=>u?looseToNumber(getValue(M)):getValue(M));i._assign(i.multiple?g?new Set(w):w:w[0])}),i._assign=getModelAssigner(_)},mounted(i,{value:o}){setSelected(i,o)},beforeUpdate(i,o,u){i._assign=getModelAssigner(u)},updated(i,{value:o}){setSelected(i,o)}};function setSelected(i,o){const u=i.multiple;if(!(u&&!isArray(o)&&!isSet(o))){for(let _=0,g=i.options.length;_<g;_++){const w=i.options[_],M=getValue(w);if(u)isArray(o)?w.selected=looseIndexOf(o,M)>-1:w.selected=o.has(M);else if(looseEqual(getValue(w),o)){i.selectedIndex!==_&&(i.selectedIndex=_);return}}!u&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function getValue(i){return"_value"in i?i._value:i.value}function getCheckboxValue(i,o){const u=o?"_trueValue":"_falseValue";return u in i?i[u]:o}const vModelDynamic={created(i,o,u){callModelHook(i,o,u,null,"created")},mounted(i,o,u){callModelHook(i,o,u,null,"mounted")},beforeUpdate(i,o,u,_){callModelHook(i,o,u,_,"beforeUpdate")},updated(i,o,u,_){callModelHook(i,o,u,_,"updated")}};function resolveDynamicModel(i,o){switch(i){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(o){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(i,o,u,_,g){const M=resolveDynamicModel(i.tagName,u.props&&u.props.type)[g];M&&M(i,o,u,_)}function initVModelForSSR(){vModelText.getSSRProps=({value:i})=>({value:i}),vModelRadio.getSSRProps=({value:i},o)=>{if(o.props&&looseEqual(o.props.value,i))return{checked:!0}},vModelCheckbox.getSSRProps=({value:i},o)=>{if(isArray(i)){if(o.props&&looseIndexOf(i,o.props.value)>-1)return{checked:!0}}else if(isSet(i)){if(o.props&&i.has(o.props.value))return{checked:!0}}else if(i)return{checked:!0}},vModelDynamic.getSSRProps=(i,o)=>{if(typeof o.type!="string")return;const u=resolveDynamicModel(o.type.toUpperCase(),o.props&&o.props.type);if(u.getSSRProps)return u.getSSRProps(i,o)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,o)=>systemModifiers.some(u=>i[`${u}Key`]&&!o.includes(u))},withModifiers=(i,o)=>(u,..._)=>{for(let g=0;g<o.length;g++){const w=modifierGuards[o[g]];if(w&&w(u,o))return}return i(u,..._)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(i,o)=>u=>{if(!("key"in u))return;const _=hyphenate(u.key);if(o.some(g=>g===_||keyNames[g]===_))return i(u)},vShow={beforeMount(i,{value:o},{transition:u}){i._vod=i.style.display==="none"?"":i.style.display,u&&o?u.beforeEnter(i):setDisplay(i,o)},mounted(i,{value:o},{transition:u}){u&&o&&u.enter(i)},updated(i,{value:o,oldValue:u},{transition:_}){!o!=!u&&(_?o?(_.beforeEnter(i),setDisplay(i,!0),_.enter(i)):_.leave(i,()=>{setDisplay(i,!1)}):setDisplay(i,o))},beforeUnmount(i,{value:o}){setDisplay(i,o)}};function setDisplay(i,o){i.style.display=o?i._vod:"none"}function initVShowForSSR(){vShow.getSSRProps=({value:i})=>{if(!i)return{style:{display:"none"}}}}const rendererOptions=extend({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render=(...i)=>{ensureRenderer().render(...i)},hydrate=(...i)=>{ensureHydrationRenderer().hydrate(...i)},createApp=(...i)=>{const o=ensureRenderer().createApp(...i),{mount:u}=o;return o.mount=_=>{const g=normalizeContainer(_);if(!g)return;const w=o._component;!isFunction(w)&&!w.render&&!w.template&&(w.template=g.innerHTML),g.innerHTML="";const M=u(g,!1,g instanceof SVGElement);return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),M},o},createSSRApp=(...i)=>{const o=ensureHydrationRenderer().createApp(...i),{mount:u}=o;return o.mount=_=>{const g=normalizeContainer(_);if(g)return u(g,!0,g instanceof SVGElement)},o};function normalizeContainer(i){return isString(i)?document.querySelector(i):i}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())},compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,EffectScope,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text,Transition,TransitionGroup,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent:defineComponent$1,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,get devtools(){return devtools},effect,effectScope,getCurrentInstance:getCurrentInstance$1,getCurrentScope,getTransitionRawChildren,guardReactiveProps,h,handleError,hasInjectionContext,hydrate,initCustomFormatter,initDirectivesForSSR,inject:inject$1,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useModel,useSSRContext,useSlots,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$1,warn,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));async function fetchJSON(i){return fetch(i).then(o=>{if(!o.ok)throw new Error("Network response was not ok");if(o.status!==200)throw new Error("Status: "+o.status+o.statusText);return o.json()}).catch(o=>{console.error(o)})}function loginValidation(i){if(i==null)throw new Error("Session key is null");return i}async function login(i){const o="https://nova.astrometry.net/api/login",_={"request-json":JSON.stringify({apikey:i})},g={method:"POST",headers:{"User-Agent":"nasaastrophotochallengetestbot/0.0 (https://johnarban.gihub.io; test@test.com)"},body:new URLSearchParams(_)},w=new Request(o,g);return await fetchJSON(w).then(M=>{if(M.status!=="success")throw new Error(`JSON Status "${M.status}:  ${M.errormessage}"`);return loginValidation(M.session),M.session})}function uploadValidation(i){if(i.status!="success")throw new Error("Job submission failed with message: "+i.errormessage);const o=Object.keys(i).find(u=>u.includes("error"));if(o!=null)throw new Error("Job submission failed with message: "+i[o])}async function urlUpload(i,o,u){u={...{session:i,url:o,crpix_center:!0,scale_lower:.1,scale_upper:180,scale_units:"degwidth",downsample_factor:2,tweak_order:2,parity:2,allow_commercial_use:"d",allow_modifications:"d",publicly_visible:"n",album:"test"},...u};const g="https://nova.astrometry.net/api/url_upload",w={"request-json":JSON.stringify(u)},M={method:"POST",headers:{"User-Agent":"nasaastrophotochallengetestbot/0.0 (https://johnarban.gihub.io; test@test.com)"},body:new URLSearchParams(w)},R=new Request(g,M);return fetchJSON(R).then(E=>(uploadValidation(E),E))}function submitJob(i,o,u){return urlUpload(i,o,u)}function formatSubmissionURL(i){return`https://nova.astrometry.net/status/${i}/`}function submissionStatusValidation(i){const o=Object.keys(i).find(u=>u.includes("error"));if(o!=null)throw new Error("Job submission failed with message: "+i[o])}async function getSubmissionStatus(i){const o="https://nova.astrometry.net/api/submissions/"+i,u=new Request(o);return fetchJSON(u).then(_=>(submissionStatusValidation(_),_))}async function getJobStatus(i){const o="https://nova.astrometry.net/api/jobs/"+i,u=new Request(o);return fetchJSON(u).then(_=>_)}async function getCalibration(i){const o="https://nova.astrometry.net/api/jobs/"+i+"/calibration",u=new Request(o);return fetchJSON(u).then(_=>_)}function convertCalibrationToWtmlParams(i){const o=i.width_arcsec/i.pixscale,u=i.height_arcsec/i.pixscale,_=(o+1)/2,g=(u+1)/2,w=i.orientation+180;return{name:"astrophoto",imageurl:null,ra:i.ra,dec:i.dec,scale:i.pixscale,rotation:w>360?360-w:w,reverseparity:i.parity<0,x:_,y:g,thumb:null}}function getWwtURL(i,o,u="wwt"){const _={wwt:"http://www.worldwidetelescope.org/wwtweb/ShowImage.aspx?",wtml:"http://wwtcoreapp-data-app.azurewebsites.net:80/wwtweb/ShowImage.aspx?"}[u],g=convertCalibrationToWtmlParams(o);g.imageurl=i,g.thumb=i;const w=new URLSearchParams;for(const[M,R]of Object.entries(g))w.append(M,R);return _+w.toString()+"&wtml=true"}function getWtmlURL(i,o){return getWwtURL(i,o,"wtml")}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var o=i.default;if(typeof o=="function"){var u=function _(){if(this instanceof _){var g=[null];g.push.apply(g,arguments);var w=Function.bind.apply(o,g);return new w}return o.apply(this,arguments)};u.prototype=o.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(i).forEach(function(_){var g=Object.getOwnPropertyDescriptor(i,_);Object.defineProperty(u,_,g.get?g:{enumerable:!0,get:function(){return i[_]}})}),u}var index_umd={exports:{}};const scriptRel="modulepreload",assetsURL=function(i){return"/"+i},seen={},__vitePreload=function(o,u,_){if(!u||u.length===0)return o();const g=document.getElementsByTagName("link");return Promise.all(u.map(w=>{if(w=assetsURL(w),w in seen)return;seen[w]=!0;const M=w.endsWith(".css"),R=M?'[rel="stylesheet"]':"";if(!!_)for(let B=g.length-1;B>=0;B--){const j=g[B];if(j.href===w&&(!M||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${R}`))return;const D=document.createElement("link");if(D.rel=M?"stylesheet":scriptRel,M||(D.as="script",D.crossOrigin=""),D.href=w,document.head.appendChild(D),M)return new Promise((B,j)=>{D.addEventListener("load",B),D.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${w}`)))})})).then(()=>o())};var src={exports:{}},hasRequiredSrc;function requireSrc(){return hasRequiredSrc||(hasRequiredSrc=1,function(module){(function(i,o){module.exports?module.exports=o():i.wwtlib=o()})(typeof self<"u"?self:commonjsGlobal,function(){/*! Script# Runtime
 * Designed and licensed for use and distribution with Script#-generated scripts.
 * Copyright (c) 2012, Nikhil Kothari, and the Script# Project.
 * More information at http://scriptsharp.com
 */function _ss(){function _nop(){}function isValue(i){return i!=null}function _value(i){for(var o=2,u=i.length;o<u;o++)if(isValue(i[o]))return i[o];return null}function value(i,o){return isValue(i)?i:isValue(o)?o:_value(arguments)}function extend(i,o){for(var u in o)i[u]=o[u];return i}function parseBoolean(i){return i.toLowerCase()=="true"}function parseRegExp(i){if(i[0]=="/"){var o=i.lastIndexOf("/");if(o>1){var u=i.substring(1,o),_=i.substr(o+1);return new RegExp(u,_)}}return null}function parseNumber(i){return!i||!i.length?0:i.indexOf(".")>=0||i.indexOf("e")>=0||endsWith(i,"f")||endsWith(i,"F")?parseFloat(i):parseInt(i,10)}function parseDate(i){var o=Date.parse(i);return isNaN(o)?void 0:new Date(o)}function truncate(i){return i>=0?Math.floor(i):Math.ceil(i)}function now(){return new Date}function today(){var i=new Date;return new Date(i.getFullYear(),i.getMonth(),i.getDate())}function compareDates(i,o){return i===o?!0:isValue(i)&&isValue(o)?i.getTime()==o.getTime():!1}function _popStackFrame(i){if(!(!isValue(i.stack)||!isValue(i.fileName)||!isValue(i.lineNumber))){for(var o=i.stack.split(`
`),u=o[0],_=i.fileName+":"+i.lineNumber;isValue(u)&&u.indexOf(_)===-1;)o.shift(),u=o[0];var g=o[1];if(isValue(g)){var w=g.match(/@(.*):(\d+)$/);isValue(w)&&(o.shift(),i.stack=o.join(`
`),i.fileName=w[1],i.lineNumber=parseInt(w[2],10))}}}function error(i,o,u){var _=new Error(i);if(o)for(var g in o)_[g]=o[g];return u&&(_.innerException=u),_popStackFrame(_),_}function fail(message){console.assert(!1,message),commonjsGlobal.navigator&&eval("debugger;")}function toArray(i){return i?typeof i=="string"?JSON.parse("("+i+")"):Array.prototype.slice.call(i):null}function removeItem(i,o){var u=i.indexOf(o);return u>=0?(i.splice(u,1),!0):!1}function clearKeys(i){for(var o in i)delete i[o]}function keyExists(i,o){return i[o]!==void 0}function keys(i){if(Object.keys)return Object.keys(i);var o=[];for(var u in i)o.push(u);return o}function keyCount(i){return keys(i).length}function Enumerator(i,o){var u=-1,_=o?o.length:i.length,g=o?function(){return{key:o[u],value:i[o[u]]}}:function(){return i[u]};this.current=null,this.moveNext=function(){return u++,this.current=g(),u<_},this.reset=function(){u=-1,this.current=null}}var _nopEnumerator={current:null,moveNext:function(){return!1},reset:_nop};function enumerate(i){return isValue(i)?i.getEnumerator?i.getEnumerator():i.length!==void 0?new Enumerator(i):new Enumerator(i,keys(i)):_nopEnumerator}function Stack(){this.count=0,this._items=[]}var Stack$={clear:function(){this._items.length=0,this.count=0},contains:function(i){for(var o=this.count-1;o>=0;o--)if(this._items[o]===i)return!0;return!1},getEnumerator:function(){return new Enumerator(this._items.reverse())},peek:function(){return this._items[this.count-1]},push:function(i){this._items.push(i),this.count++},pop:function(){if(this.count)return this.count--,this._items.pop()}};function Queue(){this.count=0,this._items=[],this._offset=0}function _cleanQueue(i){i._items=i._items.slice(i._offset),i._offset=0}var Queue$={clear:function(){this._items.length=0,this._offset=0,this.count=0},contains:function(i){for(var o=this._offset,u=this._items.length;o<=u;o++)if(this._items[o]===i)return!0;return!1},dequeue:function(){if(this.count){var i=this._items[this._offset];return++this._offset*2>=this._items.length&&_cleanQueue(this),this.count--,i}},enqueue:function(i){this._items.push(i),this.count++},getEnumerator:function(){return this._offset!=0&&_cleanQueue(this),new Enumerator(this._items)},peek:function(){return this._items.length?this._items[this._offset]:void 0}};function string(i,o){return typeof o=="number"?o>1?new Array(o+1).join(i):i:Array.prototype.join.call(arguments,"")}function emptyString(i){return!i||!i.length}function whitespace(i){return emptyString(i)||!i.replace(/^\s*/,"").length}function compareStrings(i,o,u){return i=i||"",o=o||"",u&&(i=i.toUpperCase(),o=o.toUpperCase()),i===o?0:i<o?-1:1}var _formatPlaceHolderRE=/(\{[^\}^\{]+\})/g,_formatters={};function format(i){var o=neutralCulture,u=i,_=Array.prototype.slice.call(arguments,1);return i.constructor!=String&&(o=i,u=_[0],_=_.slice(1)),u.replace(_formatPlaceHolderRE,function(g,w){var M=parseInt(w.substr(1),10),R=_[M];if(!isValue(R))return"";var E=_formatters[typeName(R)];if(E){var D="",B=w.indexOf(":");if(B>0&&(D=w.substring(B+1,w.length-1)),D&&D!="i")return E(R,D,o)}return o==neutralCulture?R.toString():R.toLocaleString()})}function trim(i,o){if(o||!String.prototype.trim){o=o?o.join(""):null;var u=o?new RegExp("^["+o+"]+|["+o+"]+$","g"):/^\s+|\s+$/g;return i.replace(u,"")}return i.trim()}function trimStart(i,o){var u=o?new RegExp("^["+o.join("")+"]+"):/^\s+/;return i.replace(u,"")}function trimEnd(i,o){var u=o?new RegExp("["+o.join("")+"]+$"):/\s+$/;return i.replace(u,"")}function startsWith(i,o){return emptyString(o)?!0:emptyString(i)||o.length>i.length?!1:i.substr(0,o.length)==o}function endsWith(i,o){return emptyString(o)?!0:emptyString(i)||o.length>i.length?!1:i.substr(-o.length)==o}function padLeft(i,o,u){return i.length<o?string(u||" ",o-i.length)+i:i}function padRight(i,o,u){return i.length<o?i+string(u||" ",o-i.length):i}function removeString(i,o,u){return!u||o+u>i.length?i.substr(0,o):i.substr(0,o)+i.substr(o+u)}function insertString(i,o,u){return u?o?i.substr(0,o)+u+i.substr(o):u+i:i}function replaceString(i,o,u){return i.split(o).join(u||"")}function _bindList(i){var o=function(){for(var u=arguments,_=null,g=0,w=i.length;g<w;g++)_=u.length?i[g].apply(null,u):i[g].call(null);return _};return o._fnList=i,o}function bind(i,o){if(!o)return i;var u=null;i=typeof i=="string"?o[u=i]:i;var _=u?o.$$b||(o.$$b={}):null,g=_?_[u]:null;return g||(g=function(){return i.apply(o,arguments)},_&&(_[u]=g)),g}function bindAdd(i,o){if(!i)return o;if(!o)return i;var u=[].concat(i._fnList||i,o);return _bindList(u)}function bindSub(i,o){if(!i)return null;if(!o)return i;var u=i._fnList||[i],_=u.indexOf(o);return _>=0?u.length==1?null:(u=_?u.slice(0,_).concat(u.slice(_+1)):u.slice(1),_bindList(u)):i}function bindExport(i,o,u,_){u=u||"__"+new Date().valueOf(),_=_||commonjsGlobal;var g={name:u,detach:function(){_[u]=_nop},dispose:function(){try{delete _[u]}catch{_[u]=void 0}}};return _[u]=o?i:function(){return g.dispose(),i.apply(null,arguments)},g}function EventArgs(){}EventArgs.Empty=new EventArgs;function CancelEventArgs(){this.cancel=!1}function IDisposable(){}function IEnumerable(){}function IEnumerator(){}function IObserver(){}function IApplication(){}function IContainer(){}function IObjectFactory(){}function IEventManager(){}function IInitializable(){}function StringBuilder(i){this._parts=isValue(i)&&i!==""?[i]:[],this.isEmpty=this._parts.length==0}var StringBuilder$={append:function(i){return isValue(i)&&i!==""&&(this._parts.push(i),this.isEmpty=!1),this},appendLine:function(i){return this.append(i),this.append(`\r
`),this.isEmpty=!1,this},clear:function(){this._parts=[],this.isEmpty=!0},toString:function(i){return this._parts.join(i||"")}},_observerStack=[],_observerRegistration={dispose:function(){_observerStack.pop()}};function _captureObservers(i){var o=_observerStack,u=o.length;if(u){i=i||[];for(var _=0;_<u;_++){var g=o[_];i.indexOf(g)<0&&i.push(g)}return i}return null}function _invalidateObservers(i){for(var o=0,u=i.length;o<u;o++)i[o].invalidateObserver()}function Observable(i){this._v=i,this._observers=null}var Observable$={getValue:function(){return this._observers=_captureObservers(this._observers),this._v},setValue:function(i){if(this._v!==i){this._v=i;var o=this._observers;o&&(this._observers=null,_invalidateObservers(o))}}};Observable.registerObserver=function(i){return _observerStack.push(i),_observerRegistration};function ObservableCollection(i){this._items=i||[],this._observers=null}var ObservableCollection$={get_item:function(i){return this._observers=_captureObservers(this._observers),this._items[i]},set_item:function(i,o){this._items[i]=o,this._updated()},get_length:function(){return this._observers=_captureObservers(this._observers),this._items.length},add:function(i){this._items.push(i),this._updated()},clear:function(){this._items.clear(),this._updated()},contains:function(i){return this._items.indexOf(i)>=0},getEnumerator:function(){return this._observers=_captureObservers(this._observers),this._items.getEnumerator()},indexOf:function(i){return this._items.indexOf(i)},insert:function(i,o){this._items.insert(i,o),this._updated()},remove:function(i){return this._items.remove(i)?(this._updated(),!0):!1},removeAt:function(i){this._items.splice(i,1),this._updated()},toArray:function(){return this._items},_updated:function(){var i=this._observers;i&&(this._observers=null,_invalidateObservers(i))}};function Task(i){this._continuations=i!==void 0?(this.status="done",null):(this.status="pending",[]),this.result=i,this.error=null}var Task$={get_completed:function(){return this.status!="pending"},changeWith:function(i){var o=new Task;return this.continueWith(function(u){var _=u.error,g;if(!_)try{g=i(u)}catch(w){_=w}_updateTask(o,g,_)}),o},continueWith:function(i){if(this._continuations)this._continuations.push(i);else{var o=this;setTimeout(function(){i(o)},0)}return this},done:function(i){return this.continueWith(function(o){o.status=="done"&&i(o.result)})},fail:function(i){return this.continueWith(function(o){o.status=="failed"&&i(o.error)})},then:function(i,o){return this.continueWith(function(u){u.status=="done"?i(u.result):o(u.error)})}};function _updateTask(i,o,u){if(i.status=="pending"){u?(i.error=u,i.status="failed"):(i.result=o,i.status="done");var _=i._continuations;i._continuations=null;for(var g=0,w=_.length;g<w;g++)_[g](i)}}function _joinTasks(i,o){i=toArray(i);var u=i.length,_=0;u>1&&typeof i[0]=="number"&&(_=i[0],i=i.slice(1),u--),Array.isArray(i[0])&&(i=i[0],u=i.length);var g=new Task,w=0;function M(D){g.status=="pending"&&(w++,o?_updateTask(g,D):w==u&&_updateTask(g,!0))}function R(){g.status=="pending"&&(o?_updateTask(g,null):_updateTask(g,!1))}_!=0&&setTimeout(R,_);for(var E=0;E<u;E++)i[E].continueWith(M);return g}Task.all=function(){return _joinTasks(arguments,!1)},Task.any=function(){return _joinTasks(arguments,!0)},Task.delay=function(i){var o=new Task;return setTimeout(function(){_updateTask(o,!0)},i),o};function deferred(i){var o=new Task(i);return{task:o,resolve:function(u){_updateTask(o,u)},reject:function(u){_updateTask(o,null,u||new Error)}}}var neutralCulture={name:"",nf:{nan:"NaN",neg:"-",pos:"+",negInf:"-Infinity",posInf:"Infinity",gw:[3],dd:2,ds:".",gs:",",per:"%",perGW:[3],perDD:2,perDS:".",perGS:",",perPP:"{0} %",perNP:"-{0} %",cur:"$",curGW:[3],curDD:2,curDS:".",curGS:",",curNP:"(${0})",curPP:"${0}"},dtf:{am:"AM",pm:"PM",ds:"/",ts:":",gmt:"ddd, dd MMM yyyy HH:mm:ss 'GMT'",uni:"yyyy-MM-dd HH:mm:ssZ",sort:"yyyy-MM-ddTHH:mm:ss",dt:"dddd, MMMM dd, yyyy h:mm:ss tt",ld:"dddd, MMMM dd, yyyy",sd:"M/d/yyyy",lt:"h:mm:ss tt",st:"h:mm tt",day0:0,day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],sday:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],mday:["Su","Mo","Tu","We","Th","Fr","Sa"],mon:["January","February","March","April","May","June","July","August","September","October","November","December",""],smon:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]}},currentCulture={name:"en-us",dtf:neutralCulture.dtf,nf:neutralCulture.nf};function _commaFormatNumber(i,o,u,_){var g=null,w=i.indexOf(u);w>0&&(g=i.substr(w),i=i.substr(0,w));var M=i.startsWith("-");M&&(i=i.substr(1));var R=0,E=o[R];if(i.length<E)return g?i+g:i;for(var D=i.length,B="",j=!1;!j;){var J=E,oe=D-J;if(oe<0&&(E+=oe,J+=oe,oe=0,j=!0),!J)break;var le=i.substr(oe,J);B.length?B=le+_+B:B=le,D-=J,R<o.length-1&&(R++,E=o[R])}return M&&(B="-"+B),g?B+g:B}_formatters.Number=function(i,o,u){var _=u.nf,g="",w=-1;o.length>1&&(w=parseInt(o.substr(1)));var M=o.charAt(0);switch(M){case"d":case"D":g=parseInt(Math.abs(i)).toString(),w!=-1&&(g=padLeft(g,w,"0")),i<0&&(g="-"+g);break;case"x":case"X":g=parseInt(Math.abs(i)).toString(16),M=="X"&&(g=g.toUpperCase()),w!=-1&&(g=padLeft(g,w,"0"));break;case"e":case"E":w==-1?g=i.toExponential():g=i.toExponential(w),M=="E"&&(g=g.toUpperCase());break;case"f":case"F":case"n":case"N":if(w==-1&&(w=_.dd),g=i.toFixed(w).toString(),w&&_.ds!="."){var R=g.indexOf(".");g=g.substr(0,R)+_.ds+g.substr(R+1)}(M=="n"||M=="N")&&(g=_commaFormatNumber(g,_.gw,_.ds,_.gs));break;case"c":case"C":if(w==-1&&(w=_.curDD),g=Math.abs(i).toFixed(w).toString(),w&&_.curDS!="."){var R=g.indexOf(".");g=g.substr(0,R)+_.curDS+g.substr(R+1)}g=_commaFormatNumber(g,_.curGW,_.curDS,_.curGS),i<0?g=String.format(u,_.curNP,g):g=String.format(u,_.curPP,g);break;case"p":case"P":if(w==-1&&(w=_.perDD),g=(Math.abs(i)*100).toFixed(w).toString(),w&&_.perDS!="."){var R=g.indexOf(".");g=g.substr(0,R)+_.perDS+g.substr(R+1)}g=_commaFormatNumber(g,_.perGW,_.perDS,_.perGS),i<0?g=String.format(u,_.perNP,g):g=String.format(u,_.perPP,g);break}return g};var _dateFormatRE=/'.*?[^\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z/g;_formatters.Date=function(i,o,u){if(o=="iso")return i.toISOString();if(o.charAt(0)=="i"){var _="String";switch(o){case"id":_="DateString";break;case"it":_="TimeString";break}return u==neutralCulture?i["to"+_]():i["toLocale"+_]()}var g=u.dtf;if(o.length==1)switch(o){case"f":o=g.ld+" "+g.st;break;case"F":o=g.dt;break;case"d":o=g.sd;break;case"D":o=g.ld;break;case"t":o=g.st;break;case"T":o=g.lt;break;case"g":o=g.sd+" "+g.st;break;case"G":o=g.sd+" "+g.lt;break;case"R":case"r":g=neutralCulture.dtf,o=g.gmt;break;case"u":o=g.uni;break;case"U":o=g.dt,i=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds());break;case"s":o=g.sort;break}o.charAt(0)=="%"&&(o=o.substr(1));var w=new StringBuilder;for(_dateFormatRE.lastIndex=0;;){var M=_dateFormatRE.lastIndex,R=_dateFormatRE.exec(o);if(w.append(o.slice(M,R?R.index:o.length)),!R)break;var E=R[0],D=E;switch(E){case"dddd":D=g.day[i.getDay()];break;case"ddd":D=g.sday[i.getDay()];break;case"dd":D=padLeft(i.getDate().toString(),2,"0");break;case"d":D=i.getDate();break;case"MMMM":D=g.mon[i.getMonth()];break;case"MMM":D=g.smon[i.getMonth()];break;case"MM":D=padLeft((i.getMonth()+1).toString(),2,"0");break;case"M":D=i.getMonth()+1;break;case"yyyy":D=i.getFullYear();break;case"yy":D=padLeft((i.getFullYear()%100).toString(),2,"0");break;case"y":D=i.getFullYear()%100;break;case"h":case"hh":D=i.getHours()%12,D?E=="hh"&&(D=padLeft(D.toString(),2,"0")):D="12";break;case"HH":D=padLeft(i.getHours().toString(),2,"0");break;case"H":D=i.getHours();break;case"mm":D=padLeft(i.getMinutes().toString(),2,"0");break;case"m":D=i.getMinutes();break;case"ss":D=padLeft(i.getSeconds().toString(),2,"0");break;case"s":D=i.getSeconds();break;case"t":case"tt":D=i.getHours()<12?g.am:g.pm,E=="t"&&(D=D.charAt(0));break;case"fff":D=padLeft(i.getMilliseconds().toString(),3,"0");break;case"ff":D=padLeft(i.getMilliseconds().toString(),3).substr(0,2);break;case"f":D=padLeft(i.getMilliseconds().toString(),3).charAt(0);break;case"z":D=i.getTimezoneOffset()/60,D=(D>=0?"-":"+")+Math.floor(Math.abs(D));break;case"zz":case"zzz":D=i.getTimezoneOffset()/60,D=(D>=0?"-":"+")+padLeft(Math.floor(Math.abs(D)).toString(),2,"0"),E=="zzz"&&(D+=g.ts+padLeft(Math.abs(i.getTimezoneOffset()%60).toString(),2,"0"));break;default:D.charAt(0)=="'"&&(D=D.substr(1,D.length-2).replace(/\\'/g,"'"));break}w.append(D)}return w.toString()};var _modules={},_classMarker="class",_interfaceMarker="interface";function createType(i,o,u){if(Array.isArray(o)){var _=o[0];if(o.length>=2){var g=o[2];if(g){var w=function(){};w.prototype=g.prototype,_.prototype=new w,_.prototype.constructor=_}o[1]&&extend(_.prototype,o[1]),_.$base=g||Object,_.$interfaces=o.slice(3),_.$type=_classMarker}else _.$type=_interfaceMarker;return _.$name=i,u[i]=_}return o}function isClass(i){return i.$type==_classMarker}function isInterface(i){return i.$type==_interfaceMarker}function typeOf(i){var o;try{o=i.constructor}catch{}return o||Object}function type(i){var o=i.indexOf("."),u=o>0?_modules[i.substr(0,o)]:commonjsGlobal,_=o>0?i.substr(o+1):i;return u?u[_]:null}var _typeNames=[Number,"Number",String,"String",Boolean,"Boolean",Array,"Array",Date,"Date",RegExp,"RegExp",Function,"Function"];function typeName(i){if(i instanceof Function||(i=i.constructor),i.$name)return i.$name;if(i.name)return i.name;for(var o=0,u=_typeNames.length;o<u;o+=2)if(i==_typeNames[o])return _typeNames[o+1];return"Object"}function canAssign(i,o){if(i==Object||i==o)return!0;if(i.$type==_classMarker)for(var u=o.$base;u;){if(i==u)return!0;u=u.$base}else if(i.$type==_interfaceMarker)for(var u=o;u;){var _=u.$interfaces;if(_&&_.indexOf(i)>=0)return!0;u=u.$base}return!1}function instanceOf(i,o){if(!isValue(o))return!1;if(i==Object||o instanceof i)return!0;var u=typeOf(o);return canAssign(i,u)}function canCast(i,o){return instanceOf(o,i)}function safeCast(i,o){return instanceOf(o,i)?i:null}function ss_module(i,o,u){var _=_modules[i]={$name:i};if(o)for(var g in o)createType(g,o[g],_);var w={};if(u)for(var g in u)w[g]=createType(g,u[g],_);return w}return extend(ss_module("ss",null,{IDisposable:[IDisposable],IEnumerable:[IEnumerable],IEnumerator:[IEnumerator],IObserver:[IObserver],IApplication:[IApplication],IContainer:[IContainer],IObjectFactory:[IObjectFactory],IEventManager:[IEventManager],IInitializable:[IInitializable],EventArgs:[EventArgs,{}],CancelEventArgs:[CancelEventArgs,{},EventArgs],StringBuilder:[StringBuilder,StringBuilder$],Stack:[Stack,Stack$],Queue:[Queue,Queue$],Observable:[Observable,Observable$],ObservableCollection:[ObservableCollection,ObservableCollection$,null,IEnumerable],Task:[Task,Task$]}),{version:"0.8",isValue,value,extend,keys,keyCount,keyExists,clearKeys,enumerate,array:toArray,remove:removeItem,boolean:parseBoolean,regexp:parseRegExp,number:parseNumber,date:parseDate,truncate,now,today,compareDates,error,string,emptyString,whitespace,format,compareStrings,startsWith,endsWith,padLeft,padRight,trim,trimStart,trimEnd,insertString,removeString,replaceString,bind,bindAdd,bindSub,bindExport,deferred,module:ss_module,modules:_modules,isClass,isInterface,typeOf,type,typeName,canCast,safeCast,canAssign,instanceOf,culture:{neutral:neutralCulture,current:currentCulture},fail})}var ss=_ss(),_exports_object=null;function define(i,o,u){_exports_object=u(ss),_exports_object.ss=ss,_exports_object.Enums._wwtlib=_exports_object}return define("wwtlib",["ss"],function(i){var o={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},u={SUN:0,MERCURY:1,VENUS:2,MARS:3,JUPITER:4,SATURN:5,URANUS:6,NEPTUNE:7,PLUTO:8},_={linear:0,log:1,power:2,squareRoot:3,histogramEqualization:4},g={asIfAbsolute:0,originRelative:1},w={sun:0,mercury:1,venus:2,mars:3,jupiter:4,saturn:5,uranus:6,neptune:7,pluto:8,moon:9,io:10,europa:11,ganymede:12,callisto:13,ioShadow:14,europaShadow:15,ganymedeShadow:16,callistoShadow:17,sunEclipsed:18,earth:19,custom:20,undefined:65536},M={linear:0,easeIn:1,easeOut:2,easeInOut:3,exponential:4,defaultV:5},R={move:0,line:1,dash:2,start:3},E={slash:0,backslash:1,top:2},D={explorer:0,tour:1,search:2,constellation:3,view:4,goTo:5,community:6,context:7,voTable:8,imageStack:9},B={interval:0,conditionalGet:1,viewChange:2},j={earth:0,planet:1,sky:2,panorama:3},J={small:0,big:1},oe={none:0,counterClockwise:2,clockwise:1},le={linear:0,power:1,log:2,constant:3,stellarMagnitude:4},me={mercator:0,equirectangular:1,tangent:2,tan:2,toast:3,spherical:4,skyImage:5,plotted:6,healpix:7},Be={earth:0,planet:1,sky:2,panorama:3,solarSystem:4,sandbox:5},pe={gamma:0,xRay:1,ultraviolet:2,visible:3,hydrogenAlpha:4,IR:4,microwave:5,radio:6,visibleNight:6},re={star:1,supernova:2,blackHole:4,neutronStar:8,doubleStar:16,multipleStars:32,asterism:64,constellation:128,openCluster:256,globularCluster:512,nebulousCluster:1024,nebula:2048,emissionNebula:4096,planetaryNebula:8192,reflectionNebula:16384,darkNebula:32768,giantMolecularCloud:65536,supernovaRemnant:131072,interstellarDust:262144,quasar:524288,galaxy:1048576,spiralGalaxy:2097152,irregularGalaxy:4194304,ellipticalGalaxy:8388608,knot:16777216,plateDefect:33554432,clusterOfGalaxies:67108864,otherNGC:134217728,unidentified:268435456,solarSystem:536870912,unfiltered:1073741823,stellar:63,stellarGroupings:2032,nebulae:523264,galactic:133693440,other:436207616},Le={byteT:0,int16T:1,int32T:2,floatT:3,doubleT:4,none:5},he={meters:1,feet:2,inches:3,miles:4,kilometers:5,astronomicalUnits:6,lightYears:7,parsecs:8,megaParsecs:9,custom:10},ke={fadeIn:1,fadeOut:2,both:3,none:4},Ae={sky:0,ecliptic:1,galactic:2,sun:3,mercury:4,venus:5,earth:6,mars:7,jupiter:8,saturn:9,uranus:10,neptune:11,pluto:12,moon:13,io:14,europa:15,ganymede:16,callisto:17,custom:18,identity:19,sandbox:20},Ve={fixedSherical:0,orbital:1,trajectory:2,synodic:3},ge={spherical:0,rectangular:1,orbital:2},De={depth:0,altitude:1,distance:2,seaLevel:3,terrain:4},qe={same_For_All:0},ot={same_For_All:0,group_by_Values:2,per_Column_Literal:3},We={gaussian:0,point:1,circle:2,square:3,pushPin:4,custom:5},ct={screen:0,world:1},je={hours:0,degrees:1},ti={voBoolean:1,voBit:2,voUnsignedByte:3,voShort:4,voInt:5,voLong:6,voChar:7,voUnicodeChar:8,voFloat:9,voDouble:10,voFloatComplex:11,voDoubleComplex:12,voUndefined:13},It={center:0,left:1},Rt={empty:0,equatorialGrid:1,equatorialGridText:2,galacticGrid:3,galacticGridText:4,eclipticGrid:5,eclipticGridText:6,eclipticOverview:7,eclipticOverviewText:8,precessionChart:9,altAzGrid:10,altAzGridText:11,constellationFigures:12,constellationBoundaries:13,constellationFocusedOnly:14,constellationNames:15,constellationPictures:16,fadeToBlack:17,fadeToLogo:18,fadeToGradient:19,screenBroadcast:20,fadeRemoteOnly:21,skyGrids:22,constellations:23,solarSystemStars:24,solarSystemMilkyWay:25,solarSystemCosmos:26,solarSystemOrbits:27,solarSystemPlanets:28,solarSystemAsteroids:29,solarSystemLighting:30,solarSystemMinorOrbits:31,showEarthCloudLayer:32,showElevationModel:33,showAtmosphere:34,multiResSolarSystemBodies:35,auroraBorialis:36,earthCutAway:37,showSolarSystem:38,clouds8k:39,filedOfView:40,showISSModel:41,solarSystemCMB:42,mpcZone1:43,mpcZone2:44,mpcZone3:45,mpcZone4:46,mpcZone5:47,mpcZone6:48,mpcZone7:49,orbitFilters:50},Tt={sky:0,screen:1},ni={music:0,voice:1},ai={circle:0,rectagle:1,star:2,donut:3,arrow:4,line:5,openRectagle:6},Zi={loop:0,upDown:1,down:2,upDownOnce:3,once:4,begin:5,end:6},Ai={topLeft:0,top:1,topRight:2,right:3,bottomRight:4,bottom:5,bottomLeft:6,left:7,rotate:8,move:9,center:10,none:11},xr={none:0,tight:1,small:2,medium:3,large:4},_n={beginner:0,intermediate:1,advanced:2,educator:3,professional:4},Ur={slew:0,crossFade:1,crossCut:2,fadeOutIn:3,fadeIn:4,fadeOut:5},$i={modifiers:-65536,none:0,lButton:1,rButton:2,cancel:3,mButton:4,xButton1:5,xButton2:6,back:8,tab:9,lineFeed:10,clearKey:12,returnKey:13,enter:13,shiftKey:16,controlKey:17,menu:18,pause:19,capital:20,capsLock:20,kanaMode:21,hanguelMode:21,hangulMode:21,junjaMode:23,finalMode:24,hanjaMode:25,kanjiMode:25,escape:27,imeConvert:28,imeNonconvert:29,imeAccept:30,imeAceept:30,imeModeChange:31,space:32,prior:33,pageUp:33,next:34,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,print:42,execute:43,snapshot:44,printScreen:44,insertKey:45,deleteKey:46,help:47,d0:48,d1:49,d2:50,d3:51,d4:52,d5:53,d6:54,d7:55,d8:56,d9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,lWin:91,rWin:92,apps:93,sleep:95,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105,multiply:106,add:107,separator:108,subtract:109,decimal:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130,f20:131,f21:132,f22:133,f23:134,f24:135,numLock:144,scroll:145,lShiftKey:160,rShiftKey:161,lControlKey:162,rControlKey:163,lMenu:164,rMenu:165,browserBack:166,browserForward:167,browserRefresh:168,browserStop:169,browserSearch:170,browserFavorites:171,browserHome:172,volumeMute:173,volumeDown:174,volumeUp:175,mediaNextTrack:176,mediaPreviousTrack:177,mediaStop:178,mediaPlayPause:179,launchMail:180,selectMedia:181,launchApplication1:182,launchApplication2:183,oemSemicolon:186,oem1:186,oemplus:187,oemcomma:188,oemMinus:189,oemPeriod:190,oemQuestion:191,oem2:191,oemtilde:192,oem3:192,oemOpenBrackets:219,oem4:219,oemPipe:220,oem5:220,oemCloseBrackets:221,oem6:221,oemQuotes:222,oem7:222,oem8:223,oemBackslash:226,oem102:226,processKey:229,packet:231,attn:246,crsel:247,exsel:248,eraseEof:249,play:250,zoom:251,noName:252,pa1:253,oemClear:254,keyCode:65535,shift:65536,control:131072,alt:262144},Vr={OK:1},Nn={indented:1},Br={pending:0,received:1,error:2};function xn(){}function Rr(){}function Q(){}function ue(){}function Me(){}function Fe(){}function Re(){}function Ke(){}function nt(){}function b(){}function Ze(){}Ze.earthVelocity=function(e){for(var t=(e-2451545)/36525,r=3.1761467+1021.3285546*t,n=1.7534703+628.3075849*t,a=6.2034809+334.0612431*t,l=.5995465+52.9690965*t,f=.8740168+21.3299095*t,c=5.4812939+7.4781599*t,d=5.3118863+3.8133036*t,m=3.8103444+8399.6847337*t,v=5.1984667+7771.3771486*t,C=2.3555559+8328.6914289*t,T=1.6279052+8433.4661601*t,A=new _t,$=b.g_ACft.length,N=0;N<$;N++){var F=b.g_ACft[N].l2*r+b.g_ACft[N].l3*n+b.g_ACft[N].l4*a+b.g_ACft[N].l5*l+b.g_ACft[N].l6*f+b.g_ACft[N].l7*c+b.g_ACft[N].l8*d+b.g_ACft[N].ldash*m+b.g_ACft[N].d*v+b.g_ACft[N].mdash*C+b.g_ACft[N].f*T;A.x+=(b.g_ACft[N].xsin+b.g_ACft[N].xsint*t)*Math.sin(F),A.x+=(b.g_ACft[N].xcos+b.g_ACft[N].xcost*t)*Math.cos(F),A.y+=(b.g_ACft[N].ysin+b.g_ACft[N].ysint*t)*Math.sin(F),A.y+=(b.g_ACft[N].ycos+b.g_ACft[N].ycost*t)*Math.cos(F),A.z+=(b.g_ACft[N].zsin+b.g_ACft[N].zsint*t)*Math.sin(F),A.z+=(b.g_ACft[N].zcos+b.g_ACft[N].zcost*t)*Math.cos(F)}return A},Ze.eclipticAberration=function(e,t,r){var n=new Mt,a=(r-2451545)/36525,l=a*a,f=.016708634-42037e-9*a-1267e-10*l,c=102.93735+1.71946*a+46e-5*l,d=20.49552,m=hi.geometricEclipticLongitude(r);return c=S.d2R(c),e=S.d2R(e),t=S.d2R(t),m=S.d2R(m),n.x=(-d*Math.cos(m-e)+f*d*Math.cos(c-e))/Math.cos(t)/3600,n.y=-d*Math.sin(t)*(Math.sin(m-e)-f*Math.sin(c-e))/3600,n},Ze.equatorialAberration=function(e,t,r){e=S.d2R(e*15),t=S.d2R(t);var n=Math.cos(e),a=Math.sin(e),l=Math.cos(t),f=Math.sin(t),c=Ze.earthVelocity(r),d=new Mt;return d.x=S.r2H((c.y*n-c.x*a)/(17314463350*l)),d.y=S.r2D(-(((c.x*n+c.y*a)*f-c.z*l)/17314463350)),d};var ze={};function Xe(e,t,r,n,a,l,f,c,d,m,v,C,T,A,$,N,F,z,Y,W,ee,ne,ae){this.l2=0,this.l3=0,this.l4=0,this.l5=0,this.l6=0,this.l7=0,this.l8=0,this.ldash=0,this.d=0,this.mdash=0,this.f=0,this.xsin=0,this.xsint=0,this.xcos=0,this.xcost=0,this.ysin=0,this.ysint=0,this.ycos=0,this.ycost=0,this.zsin=0,this.zsint=0,this.zcos=0,this.zcost=0,this.l2=e,this.l3=t,this.l4=r,this.l5=n,this.l6=a,this.l7=l,this.l8=f,this.ldash=c,this.d=d,this.mdash=m,this.f=v,this.xsin=C,this.xsint=T,this.xcos=A,this.xcost=$,this.ysin=N,this.ysint=F,this.ycos=z,this.ycost=Y,this.zsin=W,this.zsint=ee,this.zcos=ne,this.zcost=ae}var mt={};function yt(){}yt.separation=function(e,t,r,n){t=S.d2R(t),n=S.d2R(n),e=S.h2R(e),r=S.h2R(r);var a=Math.cos(t)*Math.sin(n)-Math.sin(t)*Math.cos(n)*Math.cos(r-e),l=Math.cos(n)*Math.sin(r-e),f=Math.sin(t)*Math.sin(n)+Math.cos(t)*Math.cos(n)*Math.cos(r-e),c=Math.atan2(Math.sqrt(a*a+l*l),f);return c=S.r2D(c),c<0&&(c+=180),c},yt.positionAngle=function(e,t,r,n){var a,l,f,c;l=S.d2R(t),c=S.d2R(n),a=S.h2R(e),f=S.h2R(r);var d=a-f,m=Math.cos(c)*Math.tan(l)-Math.sin(c)*Math.cos(d),v=Math.sin(d),C=Math.atan2(v,m);return C=S.r2D(C),C},yt.distanceFromGreatArc=function(e,t,r,n,a,l){t=S.d2R(t),n=S.d2R(n),l=S.d2R(l),e=S.h2R(e),r=S.h2R(r),a=S.h2R(a);var f=Math.cos(t)*Math.cos(e),c=Math.cos(n)*Math.cos(r),d=Math.cos(t)*Math.sin(e),m=Math.cos(n)*Math.sin(r),v=Math.sin(t),C=Math.sin(n),T=d*C-v*m,A=v*c-f*C,$=f*m-d*c,N=Math.tan(a),F=Math.tan(l)/Math.cos(a),z=Math.asin((T+A*N+$*F)/(Math.sqrt(T*T+A*A+$*$)*Math.sqrt(1+N*N+F*F)));return z=S.r2D(z),z<0&&(z=Math.abs(z)),z};var zt={};function Mt(){this.x=0,this.y=0,this.x=0,this.y=0}Mt.create=function(e,t){var r=new Mt;return r.x=e,r.y=t,r};var Ci={};function _t(){this.x=0,this.y=0,this.z=0,this.x=0,this.y=0,this.z=0}_t.create=function(e,t,r){var n=new _t;return n.x=e,n.y=t,n.z=r,n};var Pi={};function S(){}S.eq2Ec=function(e,t,r){e=S.h2R(e),t=S.d2R(t),r=S.d2R(r);var n=new Mt;return n.x=S.r2D(Math.atan2(Math.sin(e)*Math.cos(r)+Math.tan(t)*Math.sin(r),Math.cos(e))),n.x<0&&(n.x+=360),n.y=S.r2D(Math.asin(Math.sin(t)*Math.cos(r)-Math.cos(t)*Math.sin(r)*Math.sin(e))),n},S.ec2Eq=function(e,t,r){e=S.d2R(e),t=S.d2R(t),r=S.d2R(r);var n=new Mt;return n.x=S.r2H(Math.atan2(Math.sin(e)*Math.cos(r)-Math.tan(t)*Math.sin(r),Math.cos(e))),n.x<0&&(n.x+=24),n.y=S.r2D(Math.asin(Math.sin(t)*Math.cos(r)+Math.cos(t)*Math.sin(r)*Math.sin(e))),n},S.eq2H=function(e,t,r){e=S.h2R(e),t=S.d2R(t),r=S.d2R(r);var n=new Mt;return n.x=S.r2D(Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(r)-Math.tan(t)*Math.cos(r))),n.x<0&&(n.x+=360),n.y=S.r2D(Math.asin(Math.sin(r)*Math.sin(t)+Math.cos(r)*Math.cos(t)*Math.cos(e))),n},S.h2Eq=function(e,t,r){e=S.d2R(e),t=S.d2R(t),r=S.d2R(r);var n=new Mt;return n.x=S.r2H(Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(r)+Math.tan(t)*Math.cos(r))),n.x<0&&(n.x+=24),n.y=S.r2D(Math.asin(Math.sin(r)*Math.sin(t)-Math.cos(r)*Math.cos(t)*Math.cos(e))),n},S.eq2G=function(e,t){e=192.25-S.h2D(e),e=S.d2R(e),t=S.d2R(t);var r=new Mt;return r.x=S.r2D(Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(S.d2R(27.4))-Math.tan(t)*Math.cos(S.d2R(27.4)))),r.x=303-r.x,r.x>=360&&(r.x-=360),r.y=S.r2D(Math.asin(Math.sin(t)*Math.sin(S.d2R(27.4))+Math.cos(t)*Math.cos(S.d2R(27.4))*Math.cos(e))),r},S.g2Eq=function(e,t){e-=123,e=S.d2R(e),t=S.d2R(t);var r=new Mt;return r.x=S.r2D(Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(S.d2R(27.4))-Math.tan(t)*Math.cos(S.d2R(27.4)))),r.x+=12.25,r.x<0&&(r.x+=360),r.x=S.d2H(r.x),r.y=S.r2D(Math.asin(Math.sin(t)*Math.sin(S.d2R(27.4))+Math.cos(t)*Math.cos(S.d2R(27.4))*Math.cos(e))),r},S.d2R=function(e){return e*.0174532925199433},S.r2D=function(e){return e*57.2957795130823},S.r2H=function(e){return e*3.81971863420549},S.h2R=function(e){return e*.261799387799149},S.h2D=function(e){return e*15},S.d2H=function(e){return e/15},S.PI=function(){return 3.14159265358979},S.m360=function(e){return e-Math.floor(e/360)*360},S.m24=function(e){return e-Math.floor(e/24)*24},S.dmS2D=function(e,t,r){return S.dmS2Dp(e,t,r,!0)},S.dmS2Dp=function(e,t,r,n){return n||(console.assert(e>=0),console.assert(t>=0),console.assert(r>=0)),n?e+t/60+r/3600:-e-t/60-r/3600};var zr={};function gn(){this.year=0,this.month=0,this.day=0,this.year=0,this.month=0,this.day=0}gn.create=function(e,t,r){var n=new gn;return n.year=e,n.month=t,n.day=r,n};var Jr={};function li(){this.m_dblJulian=0,this.m_bGregorianCalendar=!1,this.m_dblJulian=0,this.m_bGregorianCalendar=!1}li.create=function(e,t,r,n){var a=new li;return a.set(e,t,r,0,0,0,n),a},li.createHMS=function(e,t,r,n,a,l,f){var c=new li;return c.set(e,t,r,n,a,l,f),c},li.createJD=function(e,t){var r=new li;return r.setJD(e,t),r},li.dateToJD=function(e,t,r,n){var a=e,l=t;l<3&&(a=a-1,l=l+12);var f=0,c=0;return n&&(f=i.truncate(a/100),c=2-f+i.truncate(f/4)),i.truncate(365.25*(a+4716))+i.truncate(30.6001*(l+1))+r+c-1524.5},li.isLeap=function(e,t){return t?e%100?!(e%4):!(e%400):!(e%4)},li.afterPapalReform=function(e,t,r){return e>1582||e===1582&&t>10||e===1582&&t===10&&r>=15},li.afterPapalReformJD=function(e){return e>=22991605e-1},li.dayOfYearJD=function(e,t,r){return e-li.dateToJD(t,1,1,r)+1},li.daysInMonthForMonth=function(e,t){console.assert(e>=1&&e<=12);var r=[31,28,31,30,31,30,31,31,30,31,30,31,0];return t&&r[1]++,r[e-1]},li.INT=function(e){return e>=0?i.truncate(e):i.truncate(e-1)};var _r={julian:function(){return this.m_dblJulian},day:function(){var e=this.get();return i.truncate(e[2])},month:function(){var e=this.get();return i.truncate(e[1])},year:function(){var e=this.get();return i.truncate(e[0])},hour:function(){var e=this.get();return i.truncate(e[3])},minute:function(){var e=this.get();return i.truncate(e[4])},second:function(){var e=this.get();return i.truncate(e[5])},set:function(e,t,r,n,a,l,f){var c=r+n/24+a/1440+l/86400;this.setJD(li.dateToJD(e,t,c,f),f)},setJD:function(e,t){this.m_dblJulian=e,this.setInGregorianCalendar(t)},setInGregorianCalendar:function(e){var t=this.m_dblJulian>=22991605e-1;this.m_bGregorianCalendar=e&&t},get:function(){var e,t,r,n,a,l,f=this.m_dblJulian+.5,c=Math.floor(f),d=f-c,m=i.truncate(c),v;if(this.m_bGregorianCalendar){var C=i.truncate((m-186721625e-2)/36524.25);v=m+1+C-i.truncate(C/4)}else v=m;var T=v+1524,A=i.truncate((T-122.1)/365.25),$=i.truncate(365.25*A),N=i.truncate((T-$)/30.6001),F=T-$-i.truncate(30.6001*N)+d;return r=i.truncate(F),N<14?t=N-1:t=N-13,t>2?e=A-4716:e=A-4715,c=Math.floor(F),d=F-c,n=i.truncate(d*24),a=i.truncate((d-n/24)*1440),l=(d-n/24-a/1440)*86400,[e,t,r,n,a,l]},dayOfWeek:function(){return i.truncate(this.m_dblJulian+1.5)%7},dayOfYear:function(){var e=i.truncate(this.get()[0]);return li.dayOfYearJD(this.m_dblJulian,e,li.afterPapalReform(e,1,1))},daysInMonth:function(){var e=this.get(),t=i.truncate(e[0]),r=i.truncate(e[1]);return li.daysInMonthForMonth(r,li.isLeap(t,this.m_bGregorianCalendar))},daysInYear:function(){var e=this.get(),t=i.truncate(e[0]);return li.isLeap(t,this.m_bGregorianCalendar)?366:365},leap:function(){return li.isLeap(this.year(),this.m_bGregorianCalendar)},inGregorianCalendar:function(){return this.m_bGregorianCalendar},fractionalYear:function(){var e=this.get(),t=i.truncate(e[0]);i.truncate(e[1]),i.truncate(e[2]),i.truncate(e[3]),i.truncate(e[4]),e[5];var r;return li.isLeap(t,this.m_bGregorianCalendar)?r=366:r=365,t+(this.m_dblJulian-li.dateToJD(t,1,1,li.afterPapalReform(t,1,1)))/r}};function gr(){}gr.deltaT=function(e){var t=li.createJD(e,li.afterPapalReformJD(e)),r=t.fractionalYear(),n=(r-2e3)/100,a;if(r<948)a=2177+497*n+44.1*n*n;else if(r<1620)a=102+102*n+25.3*n*n;else if(r<1998){var l=i.truncate((r-1620)/2);console.assert(l<b.deltaTTable.length),r=r/2-l-810,a=b.deltaTTable[l]+(b.deltaTTable[l+1]-b.deltaTTable[l])*r}else if(r<=2e3){var f=b.deltaTTable.length;a=b.deltaTTable[f-1]}else r<2100?a=102+102*n+25.3*n*n+.37*(r-2100):a=102+102*n+25.3*n*n;return a};var Vn={};function Qt(){}Qt.eclipticLongitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_L0EarthCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_L0EarthCoefficients[d].a*Math.cos(b.g_L0EarthCoefficients[d].b+b.g_L0EarthCoefficients[d].c*t);var m=b.g_L1EarthCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_L1EarthCoefficients[d].a*Math.cos(b.g_L1EarthCoefficients[d].b+b.g_L1EarthCoefficients[d].c*t);var C=b.g_L2EarthCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_L2EarthCoefficients[d].a*Math.cos(b.g_L2EarthCoefficients[d].b+b.g_L2EarthCoefficients[d].c*t);var A=b.g_L3EarthCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_L3EarthCoefficients[d].a*Math.cos(b.g_L3EarthCoefficients[d].b+b.g_L3EarthCoefficients[d].c*t);var N=b.g_L4EarthCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_L4EarthCoefficients[d].a*Math.cos(b.g_L4EarthCoefficients[d].b+b.g_L4EarthCoefficients[d].c*t);var z=b.g_L5EarthCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_L5EarthCoefficients[d].a*Math.cos(b.g_L5EarthCoefficients[d].b+b.g_L5EarthCoefficients[d].c*t);var W=(c+v*t+T*r+$*n+F*a+Y*l)/1e8;return W=S.m360(S.r2D(W)),W},Qt.eclipticLatitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_B0EarthCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_B0EarthCoefficients[c].a*Math.cos(b.g_B0EarthCoefficients[c].b+b.g_B0EarthCoefficients[c].c*t);var d=b.g_B1EarthCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_B1EarthCoefficients[c].a*Math.cos(b.g_B1EarthCoefficients[c].b+b.g_B1EarthCoefficients[c].c*t);var v=b.g_B2EarthCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_B2EarthCoefficients[c].a*Math.cos(b.g_B2EarthCoefficients[c].b+b.g_B2EarthCoefficients[c].c*t);var T=b.g_B3EarthCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_B3EarthCoefficients[c].a*Math.cos(b.g_B3EarthCoefficients[c].b+b.g_B3EarthCoefficients[c].c*t);var $=b.g_B4EarthCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_B4EarthCoefficients[c].a*Math.cos(b.g_B4EarthCoefficients[c].b+b.g_B4EarthCoefficients[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.r2D(F),F},Qt.radiusVector=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_R0EarthCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_R0EarthCoefficients[c].a*Math.cos(b.g_R0EarthCoefficients[c].b+b.g_R0EarthCoefficients[c].c*t);var d=b.g_R1EarthCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_R1EarthCoefficients[c].a*Math.cos(b.g_R1EarthCoefficients[c].b+b.g_R1EarthCoefficients[c].c*t);var v=b.g_R2EarthCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_R2EarthCoefficients[c].a*Math.cos(b.g_R2EarthCoefficients[c].b+b.g_R2EarthCoefficients[c].c*t);var T=b.g_R3EarthCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_R3EarthCoefficients[c].a*Math.cos(b.g_R3EarthCoefficients[c].b+b.g_R3EarthCoefficients[c].c*t);var $=b.g_R4EarthCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_R4EarthCoefficients[c].a*Math.cos(b.g_R4EarthCoefficients[c].b+b.g_R4EarthCoefficients[c].c*t);return(f+m*t+C*r+A*n+N*a)/1e8},Qt.sunMeanAnomaly=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(357.5291092+35999.0502909*t-1536e-7*r+n/2449e4)},Qt.eccentricity=function(e){var t=(e-2451545)/36525,r=t*t;return 1-.002516*t-74e-7*r},Qt.eclipticLongitudeJ2000=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_L0EarthCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_L0EarthCoefficients[c].a*Math.cos(b.g_L0EarthCoefficients[c].b+b.g_L0EarthCoefficients[c].c*t);var d=b.g_L1EarthCoefficientsJ2000.length,m=0;for(c=0;c<d;c++)m+=b.g_L1EarthCoefficientsJ2000[c].a*Math.cos(b.g_L1EarthCoefficientsJ2000[c].b+b.g_L1EarthCoefficientsJ2000[c].c*t);var v=b.g_L2EarthCoefficientsJ2000.length,C=0;for(c=0;c<v;c++)C+=b.g_L2EarthCoefficientsJ2000[c].a*Math.cos(b.g_L2EarthCoefficientsJ2000[c].b+b.g_L2EarthCoefficientsJ2000[c].c*t);var T=b.g_L3EarthCoefficientsJ2000.length,A=0;for(c=0;c<T;c++)A+=b.g_L3EarthCoefficientsJ2000[c].a*Math.cos(b.g_L3EarthCoefficientsJ2000[c].b+b.g_L3EarthCoefficientsJ2000[c].c*t);var $=b.g_L4EarthCoefficientsJ2000.length,N=0;for(c=0;c<$;c++)N+=b.g_L4EarthCoefficientsJ2000[c].a*Math.cos(b.g_L4EarthCoefficientsJ2000[c].b+b.g_L4EarthCoefficientsJ2000[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.m360(S.r2D(F)),F},Qt.eclipticLatitudeJ2000=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_B0EarthCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_B0EarthCoefficients[c].a*Math.cos(b.g_B0EarthCoefficients[c].b+b.g_B0EarthCoefficients[c].c*t);var d=b.g_B1EarthCoefficientsJ2000.length,m=0;for(c=0;c<d;c++)m+=b.g_B1EarthCoefficientsJ2000[c].a*Math.cos(b.g_B1EarthCoefficientsJ2000[c].b+b.g_B1EarthCoefficientsJ2000[c].c*t);var v=b.g_B2EarthCoefficientsJ2000.length,C=0;for(c=0;c<v;c++)C+=b.g_B2EarthCoefficientsJ2000[c].a*Math.cos(b.g_B2EarthCoefficientsJ2000[c].b+b.g_B2EarthCoefficientsJ2000[c].c*t);var T=b.g_B3EarthCoefficientsJ2000.length,A=0;for(c=0;c<T;c++)A+=b.g_B3EarthCoefficientsJ2000[c].a*Math.cos(b.g_B3EarthCoefficientsJ2000[c].b+b.g_B3EarthCoefficientsJ2000[c].c*t);var $=b.g_B4EarthCoefficientsJ2000.length,N=0;for(c=0;c<$;c++)N+=b.g_B4EarthCoefficientsJ2000[c].a*Math.cos(b.g_B4EarthCoefficientsJ2000[c].b+b.g_B4EarthCoefficientsJ2000[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.r2D(F),F};var Oa={};function s(e,t,r){this.a=0,this.b=0,this.c=0,this.a=e,this.b=t,this.c=r}var oa={};function Bn(){this.i=0,this.w=0,this.omega=0,this.i=0,this.w=0,this.omega=0}var Ua={};function ya(){}ya.calculate=function(e,t,r,n,a){var l=(n-2451545)/36525,f=l*l,c=(a-n)/36525,d=c*c,m=d*c,v=S.d2R(e),C=S.d2R(r),T=(47.0029-.06603*l+598e-6*f)*c+(-.03302+598e-6*l)*d+6e-5*m;T=S.d2R(S.dmS2D(0,0,T));var A=174.876384*3600+3289.4789*l+.60622*f-(869.8089+.50491*l)*c+.03536*d;A=S.d2R(S.dmS2D(0,0,A));var $=(5029.0966+2.22226*l-42e-6*f)*c+(1.11113-42e-6*l)*d-6e-6*m;$=S.d2R(S.dmS2D(0,0,$));var N=Math.sin(v),F=Math.cos(v),z=Math.sin(C-A),Y=Math.cos(C-A),W=Math.sin(T),ee=Math.cos(T),ne=N*z,ae=-W*F+ee*N*Y,de=Math.asin(Math.sqrt(ne*ne+ae*ae)),se=new Bn;se.i=S.r2D(de);var we=F*ee+N*W*Y;we<0&&(se.i=180-se.i);var fe=A+$;se.omega=S.m360(S.r2D(Math.atan2(ne,ae)+fe)),ne=-W*z,ae=N*ee-F*W*Y;var $e=S.r2D(Math.atan2(ne,ae));return se.w=S.m360(t+$e),se},ya.fK4B1950ToFK5J2000=function(e,t,r){var n=S.d2R(5.19856209),a=S.d2R(.00651966),l=S.d2R(e),f=S.d2R(r),c=Math.sin(l),d=Math.cos(l),m=Math.cos(a),v=Math.sin(a),C=n+f,T=Math.cos(C),A=Math.sin(C),$=v*A,N=c*m+d*v*T,F=new Bn;F.i=S.r2D(Math.asin(Math.sqrt($*$+N*N)));var z=d*m-c*v*T;return z<0&&(F.i=180-F.i),F.w=S.m360(t+S.r2D(Math.atan2($,N))),F.omega=S.m360(S.r2D(Math.atan2(c*A,d*v+c*m*T))-4.50001688),F};var Ha={};function et(){}et.mercuryMeanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(252.250906+149474.0722491*t+3035e-7*r+18e-9*n)},et.mercurySemimajorAxis=function(e){return .38709831},et.mercuryEccentricity=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return .20563175+20407e-9*t-283e-10*r-18e-11*n},et.mercuryInclination=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(7.004986+.0018215*t-181e-7*r+56e-9*n)},et.mercuryLongitudeAscendingNode=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(48.330893+1.1861883*t+17542e-8*r+215e-9*n)},et.mercuryLongitudePerihelion=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(77.456119+1.5564776*t+29544e-8*r+9e-9*n)},et.venusMeanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(181.979801+58519.2130302*t+31014e-8*r+15e-9*n)},et.venusSemimajorAxis=function(e){return .72332982},et.venusEccentricity=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return .00677192-47765e-9*t+981e-10*r+46e-11*n},et.venusInclination=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(3.394662+.0010037*t-88e-8*r-7e-9*n)},et.venusLongitudeAscendingNode=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(76.67992+.9011206*t+40618e-8*r-93e-9*n)},et.venusLongitudePerihelion=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(131.563703+1.4022288*t-.00107618*r-5678e-9*n)},et.earthMeanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(100.466457+36000.7698278*t+30322e-8*r+2e-8*n)},et.earthSemimajorAxis=function(e){return 1.000001018},et.earthEccentricity=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return .01670863-42037e-9*t-1267e-10*r+14e-11*n},et.earthInclination=function(e){return 0},et.earthLongitudePerihelion=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(102.937348+1.17195366*t+45688e-8*r-18e-9*n)},et.marsMeanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(355.433+19141.6964471*t+31052e-8*r+16e-9*n)},et.marsSemimajorAxis=function(e){return 1.523679342},et.marsEccentricity=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return .09340065+90484e-9*t-806e-10*r-25e-11*n},et.marsInclination=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(1.849726-6011e-7*t+1276e-8*r-7e-9*n)},et.marsLongitudeAscendingNode=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(49.588093+.7720959*t+1557e-8*r+2267e-9*n)},et.marsLongitudePerihelion=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(336.060234+1.8410449*t+13477e-8*r+536e-9*n)},et.jupiterMeanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(34.351519+3036.3027748*t+2233e-7*r+37e-9*n)},et.jupiterSemimajorAxis=function(e){var t=(e-2451545)/36525;return 5.202603209+1913e-10*t},et.jupiterEccentricity=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return .04849793+163225e-9*t-4714e-10*r-201e-11*n},et.jupiterInclination=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(1.303267-.0054965*t+466e-8*r-2e-9*n)},et.jupiterLongitudeAscendingNode=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(100.464407+1.0209774*t+40315e-8*r+404e-9*n)},et.jupiterLongitudePerihelion=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(14.331207+1.6126352*t+.00103042*r-4464e-9*n)},et.saturnMeanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(50.077444+1223.5110686*t+51908e-8*r-3e-8*n)},et.saturnSemimajorAxis=function(e){var t=(e-2451545)/36525,r=t*t;return 9.554909192-2139e-9*t+4e-9*r},et.saturnEccentricity=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return .05554814-.0003446641*t-6436e-10*r+34e-10*n},et.saturnInclination=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(2.488879-.0037362*t-1519e-8*r+87e-9*n)},et.saturnLongitudeAscendingNode=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(113.665503+.877088*t-12176e-8*r-2249e-9*n)},et.saturnLongitudePerihelion=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(93.057237+1.19637613*t+83753e-8*r+4928e-9*n)},et.uranusMeanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(314.055005+429.8640561*t+3039e-7*r+26e-9*n)},et.uranusSemimajorAxis=function(e){var t=(e-2451545)/36525,r=t*t;return 19.218446062-372e-10*t+98e-11*r},et.uranusEccentricity=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return .04638122-27293e-9*t+789e-10*r+24e-11*n},et.uranusInclination=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(.773197+7744e-7*t+3749e-8*r-92e-9*n)},et.uranusLongitudeAscendingNode=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(74.005957+.5211278*t+.00133947*r+18484e-9*n)},et.uranusLongitudePerihelion=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(173.005291+1.486379*t+21406e-8*r+434e-9*n)},et.neptuneMeanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(304.348665+219.8833092*t+30882e-8*r+18e-9*n)},et.neptuneSemimajorAxis=function(e){var t=(e-2451545)/36525,r=t*t;return 30.110386869-1663e-10*t+69e-11*r},et.neptuneEccentricity=function(e){var t=(e-2451545)/36525,r=t*t*t;return .00945575+6033e-9*t-5e-11*r},et.neptuneInclination=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(1.769953-.0093082*t-708e-8*r+27e-9*n)},et.neptuneLongitudeAscendingNode=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(131.784057+1.1022039*t+25952e-8*r-637e-9*n)},et.neptuneLongitudePerihelion=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(48.120276+1.4262957*t+38434e-8*r+2e-8*n)},et.mercuryMeanLongitudeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(252.250906+149472.6746358*t-536e-8*r+2e-9*n)},et.mercuryInclinationJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(7.004986-.0059516*t+8e-7*r+43e-9*n)},et.mercuryLongitudeAscendingNodeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(48.330893-.1254227*t-8833e-8*r-2e-7*n)},et.mercuryLongitudePerihelionJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(77.456119+.1588643*t-1342e-8*r-7e-9*n)},et.venusMeanLongitudeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(181.979801+58517.815676*t+165e-8*r-2e-9*n)},et.venusInclinationJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(3.394662-8568e-7*t-3244e-8*r+9e-9*n)},et.venusLongitudeAscendingNodeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(76.67992-.2780134*t-14257e-8*r-164e-9*n)},et.venusLongitudePerihelionJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(131.563703+.0048746*t-.00138467*r-5695e-9*n)},et.earthMeanLongitudeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(100.466457+35999.3728565*t-568e-8*r-1e-9*n)},et.earthInclinationJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return .0130548*t-931e-8*r-34e-9*n},et.earthLongitudeAscendingNodeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(174.873176-.241098*t+4262e-8*r+1e-9*n)},et.earthLongitudePerihelionJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(102.937348+.3225654*t+14799e-8*r-39e-9*n)},et.marsMeanLongitudeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(355.433+19140.2993039*t+262e-8*r-3e-9*n)},et.marsInclinationJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(1.849726-.0081477*t-2255e-8*r-29e-9*n)},et.marsLongitudeAscendingNodeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(49.588093-.295025*t-64048e-8*r-1964e-9*n)},et.marsLongitudePerihelionJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(336.060234+.4439016*t-17313e-8*r+518e-9*n)},et.jupiterMeanLongitudeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(34.351519+3034.9056606*t-8501e-8*r+16e-9*n)},et.jupiterInclinationJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(1.303267-.0019877*t+332e-7*r+97e-9*n)},et.jupiterLongitudeAscendingNodeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(100.464407+.1767232*t+907e-6*r-7272e-9*n)},et.jupiterLongitudePerihelionJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(14.331207+.2155209*t+72211e-8*r-4485e-9*n)},et.saturnMeanLongitudeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(50.077444+1222.1138488*t+21004e-8*r-46e-9*n)},et.saturnInclinationJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(2.488879+.0025514*t-4906e-8*r+17e-9*n)},et.saturnLongitudeAscendingNodeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(113.665503-.2566722*t-18399e-8*r+48e-8*n)},et.saturnLongitudePerihelionJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(93.057237+.5665415*t+5285e-7*r+4912e-9*n)},et.uranusMeanLongitudeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(314.055005+428.4669983*t-486e-8*r+6e-9*n)},et.uranusInclinationJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(.773197-.0016869*t+349e-8*r+16e-9*n)},et.uranusLongitudeAscendingNodeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(74.005957+.0741431*t+40539e-8*r+119e-9*n)},et.uranusLongitudePerihelionJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(173.005291+.0893212*t-947e-7*r+414e-9*n)},et.neptuneMeanLongitudeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(304.348665+218.4862002*t+59e-8*r-2e-9*n)},et.neptuneInclinationJ2000=function(e){var t=(e-2451545)/36525,r=t*t;return S.m360(1.769953+2256e-7*t+23e-8*r)},et.neptuneLongitudeAscendingNodeJ2000=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t;return S.m360(131.784057-.0061651*t-219e-8*r-78e-9*n)},et.neptuneLongitudePerihelionJ2000=function(e){var t=(e-2451545)/36525,r=t*t;return S.m360(48.120276+.0291866*t+761e-7*r)};var Ga={};function zn(){this.a=0,this.e=0,this.i=0,this.w=0,this.omega=0,this.jdEquinox=0,this.t=0,this.n=0,this.meanAnnomolyOut=0,this.a=0,this.e=0,this.i=0,this.w=0,this.omega=0,this.jdEquinox=0,this.t=0}zn._create=function(e){var t=new zn;return t.a=e.readSingle(),t.e=e.readSingle(),t.i=e.readSingle(),t.w=e.readSingle(),t.omega=e.readSingle(),t.jdEquinox=e.readSingle(),t.t=e.readSingle(),t};var qa={};function Ca(){this.apparentGeocentricLongitude=0,this.apparentGeocentricLatitude=0,this.apparentGeocentricDistance=0,this.apparentLightTime=0,this.apparentGeocentricRA=0,this.apparentGeocentricDeclination=0,this.apparentGeocentricLongitude=0,this.apparentGeocentricLatitude=0,this.apparentGeocentricDistance=0,this.apparentLightTime=0,this.apparentGeocentricRA=0,this.apparentGeocentricDeclination=0}var On={};function Xa(){this.heliocentricRectangularEquatorial=new _t,this.heliocentricRectangularEcliptical=new _t,this.heliocentricEclipticLongitude=0,this.heliocentricEclipticLatitude=0,this.trueGeocentricRA=0,this.trueGeocentricDeclination=0,this.trueGeocentricDistance=0,this.trueGeocentricLightTime=0,this.astrometricGeocenticRA=0,this.astrometricGeocentricDeclination=0,this.astrometricGeocentricDistance=0,this.astrometricGeocentricLightTime=0,this.elongation=0,this.phaseAngle=0,this.heliocentricEclipticLongitude=0,this.heliocentricEclipticLatitude=0,this.trueGeocentricRA=0,this.trueGeocentricDeclination=0,this.trueGeocentricDistance=0,this.trueGeocentricLightTime=0,this.astrometricGeocenticRA=0,this.astrometricGeocentricDeclination=0,this.astrometricGeocentricDistance=0,this.astrometricGeocentricLightTime=0,this.elongation=0,this.phaseAngle=0}var ps={};function ci(){}ci.distanceToLightTime=function(e){return e*.0057755183},ci.calculate=function(e,t){var r=new Ca,n=e,a=0,l=0,f=0,c=0;t&&(a=Qt.eclipticLongitude(n),l=Qt.eclipticLatitude(n),f=Qt.radiusVector(n),a=S.d2R(a),l=S.d2R(l),c=Math.cos(l));for(var d=0,m=0,v=0,C,T,A,$,N,F,z,Y=!0,W=!0,ee=0,ne=0,ae=0;Y;){switch(t){case 0:d=hi.geometricEclipticLongitude(n),m=hi.geometricEclipticLatitude(n),v=Qt.radiusVector(n);break;case 1:d=Ye.eclipticLongitude(n),m=Ye.eclipticLatitude(n),v=Ye.radiusVector(n);break;case 2:d=tn.eclipticLongitude(n),m=tn.eclipticLatitude(n),v=tn.radiusVector(n);break;case 3:d=Ie.eclipticLongitude(n),m=Ie.eclipticLatitude(n),v=Ie.radiusVector(n);break;case 4:d=H.eclipticLongitude(n),m=H.eclipticLatitude(n),v=H.radiusVector(n);break;case 5:d=Er.eclipticLongitude(n),m=Er.eclipticLatitude(n),v=Er.radiusVector(n);break;case 6:d=Qr.eclipticLongitude(n),m=Qr.eclipticLatitude(n),v=Qr.radiusVector(n);break;case 7:d=vr.eclipticLongitude(n),m=vr.eclipticLatitude(n),v=vr.radiusVector(n);break;case 8:d=Zr.eclipticLongitude(n),m=Zr.eclipticLatitude(n),v=Zr.radiusVector(n);break;default:console.assert(!1);break}if(W?W=!1:(Y=Math.abs(d-ee)>1e-5||Math.abs(m-ne)>1e-5||Math.abs(v-ae)>1e-6,ee=d,ne=m,ae=v),Y){var de=0;t?(C=S.d2R(d),T=S.d2R(m),A=Math.cos(T),$=Math.cos(C),N=v*A*$-f*c*Math.cos(a),F=v*A*Math.sin(C)-f*c*Math.sin(a),z=v*Math.sin(T)-f*Math.sin(l),de=Math.sqrt(N*N+F*F+z*z)):de=v,n=e-ci.distanceToLightTime(de)}}C=S.d2R(d),T=S.d2R(m),A=Math.cos(T),$=Math.cos(C),N=v*A*$-f*c*Math.cos(a),F=v*A*Math.sin(C)-f*c*Math.sin(a),z=v*Math.sin(T)-f*Math.sin(l);var se=N*N,we=F*F;r.apparentGeocentricLatitude=S.r2D(Math.atan2(z,Math.sqrt(se+we))),r.apparentGeocentricDistance=Math.sqrt(se+we+z*z),r.apparentGeocentricLongitude=S.m360(S.r2D(Math.atan2(F,N))),r.apparentLightTime=ci.distanceToLightTime(r.apparentGeocentricDistance);var fe=Ze.eclipticAberration(r.apparentGeocentricLongitude,r.apparentGeocentricLatitude,e);r.apparentGeocentricLongitude+=fe.x,r.apparentGeocentricLatitude+=fe.y;var $e=Qi.correctionInLongitude(r.apparentGeocentricLongitude,r.apparentGeocentricLatitude,e);r.apparentGeocentricLatitude+=Qi.correctionInLatitude(r.apparentGeocentricLongitude,e),r.apparentGeocentricLongitude+=$e;var ve=ui.nutationInLongitude(e),ut=ui.trueObliquityOfEcliptic(e);r.apparentGeocentricLongitude+=S.dmS2D(0,0,ve);var ht=S.ec2Eq(r.apparentGeocentricLongitude,r.apparentGeocentricLatitude,ut);return r.apparentGeocentricRA=ht.x,r.apparentGeocentricDeclination=ht.y,r},ci.semiMajorAxisFromPerihelionDistance=function(e,t){return e/(1-t)},ci.meanMotionFromSemiMajorAxis=function(e){return .9856076686/(e*Math.sqrt(e))},ci.calculateRectangularJD=function(e,t){var r=e,n=S.d2R(t.omega),a=S.d2R(t.w),l=S.d2R(t.i),f=0,c=1,d=Math.sin(n),m=Math.cos(n),v=Math.cos(l),C=Math.sin(l),T=m,A=d*c,$=d*f,N=-d*v,F=m*v*c-C*f,z=m*v*f+C*c,Y=Math.sqrt(T*T+N*N),W=Math.sqrt(A*A+F*F),ee=Math.sqrt($*$+z*z),ne=Math.atan2(T,N),ae=Math.atan2(A,F),de=Math.atan2($,z),se=t.n*(r-t.t);t.meanAnnomolyOut=se;var we=te.calculate(se,t.e);we=S.d2R(we);var fe=2*Math.atan(Math.sqrt((1+t.e)/(1-t.e))*Math.tan(we/2)),$e=t.a*(1-t.e*Math.cos(we)),ve=$e*Y*Math.sin(ne+a+fe),ut=$e*W*Math.sin(ae+a+fe),ht=$e*ee*Math.sin(de+a+fe);return I.create(ve,ht,ut)},ci.calculateRectangular=function(e,t){var r=S.d2R(e.omega),n=S.d2R(e.w),a=S.d2R(e.i),l=0,f=1,c=Math.sin(r),d=Math.cos(r),m=Math.cos(a),v=Math.sin(a),C=d,T=c*f,A=c*l,$=-c*m,N=d*m*f-v*l,F=d*m*l+v*f,z=Math.sqrt(C*C+$*$),Y=Math.sqrt(T*T+N*N),W=Math.sqrt(A*A+F*F),ee=Math.atan2(C,$),ne=Math.atan2(T,N),ae=Math.atan2(A,F);e.n;var de=t,se=te.calculate(de,e.e);se=S.d2R(se);var we=2*Math.atan(Math.sqrt((1+e.e)/(1-e.e))*Math.tan(se/2)),fe=e.a*(1-e.e*Math.cos(se)),$e=fe*z*Math.sin(ee+n+we),ve=fe*Y*Math.sin(ne+n+we),ut=fe*W*Math.sin(ae+n+we);return I.create($e,ut,ve)},ci.calculateElements=function(e,t){var r=ui.meanObliquityOfEcliptic(t.jdEquinox),n=e,a=new Xa;r=S.d2R(r);for(var l=S.d2R(t.omega),f=S.d2R(t.w),c=S.d2R(t.i),d=Math.sin(r),m=Math.cos(r),v=Math.sin(l),C=Math.cos(l),T=Math.cos(c),A=Math.sin(c),$=C,N=v*m,F=v*d,z=-v*T,Y=C*T*m-A*d,W=C*T*d+A*m,ee=Math.sqrt($*$+z*z),ne=Math.sqrt(N*N+Y*Y),ae=Math.sqrt(F*F+W*W),de=Math.atan2($,z),se=Math.atan2(N,Y),we=Math.atan2(F,W),fe=ci.meanMotionFromSemiMajorAxis(t.a),$e=hi.equatorialRectangularCoordinatesAnyEquinox(e,t.jdEquinox),ve=0;ve<2;ve++){var ut=fe*(n-t.t),ht=te.calculate(ut,t.e);ht=S.d2R(ht);var Je=2*Math.atan(Math.sqrt((1+t.e)/(1-t.e))*Math.tan(ht/2)),Ee=t.a*(1-t.e*Math.cos(ht)),pi=Ee*ee*Math.sin(de+f+Je),Ii=Ee*ne*Math.sin(se+f+Je),xi=Ee*ae*Math.sin(we+f+Je);if(!ve){a.heliocentricRectangularEquatorial.x=pi,a.heliocentricRectangularEquatorial.y=Ii,a.heliocentricRectangularEquatorial.z=xi;var ei=l+Je,yi=Math.cos(ei),Kt=Math.sin(ei);a.heliocentricRectangularEcliptical.x=Ee*(C*yi-v*Kt*T),a.heliocentricRectangularEcliptical.y=Ee*(v*yi+C*Kt*T),a.heliocentricRectangularEcliptical.z=Ee*A*Kt,a.heliocentricEclipticLongitude=Math.atan2(Ii,pi),a.heliocentricEclipticLongitude=S.m24(S.r2D(a.heliocentricEclipticLongitude)/15),a.heliocentricEclipticLatitude=Math.asin(xi/Ee),a.heliocentricEclipticLatitude=S.r2D(a.heliocentricEclipticLatitude)}var Gi=$e.x+pi,Pt=$e.y+Ii,qi=$e.z+xi,Di=Math.atan2(Pt,Gi);Di=S.r2D(Di);var st=Math.atan2(qi,Math.sqrt(Gi*Gi+Pt*Pt));st=S.r2D(st);var Qe=Math.sqrt(Gi*Gi+Pt*Pt+qi*qi);if(!ve)a.trueGeocentricRA=S.m24(Di/15),a.trueGeocentricDeclination=st,a.trueGeocentricDistance=Qe,a.trueGeocentricLightTime=ci.distanceToLightTime(Qe);else{a.astrometricGeocenticRA=S.m24(Di/15),a.astrometricGeocentricDeclination=st,a.astrometricGeocentricDistance=Qe,a.astrometricGeocentricLightTime=ci.distanceToLightTime(Qe);var Gt=Math.sqrt($e.x*$e.x+$e.y*$e.y+$e.z*$e.z);a.elongation=Math.acos((Gt*Gt+Qe*Qe-Ee*Ee)/(2*Gt*Qe)),a.elongation=S.r2D(a.elongation),a.phaseAngle=Math.acos((Ee*Ee+Qe*Qe-Gt*Gt)/(2*Ee*Qe)),a.phaseAngle=S.r2D(a.phaseAngle)}ve||(n=e-a.trueGeocentricLightTime)}return a},ci.instantaneousVelocity=function(e,t){return 42.1219*Math.sqrt(1/e-1/(2*t))},ci.velocityAtPerihelion=function(e,t){return 29.7847/Math.sqrt(t)*Math.sqrt((1+e)/(1-e))},ci.velocityAtAphelion=function(e,t){return 29.7847/Math.sqrt(t)*Math.sqrt((1-e)/(1+e))},ci.lengthOfEllipse=function(e,t){var r=t*Math.sqrt(1-e*e);return S.PI()*(3*(t+r)-Math.sqrt((t+3*r)*(3*t+r)))},ci.cometMagnitude=function(e,t,r,n){return e+5*ye.log10(t)+r*ye.log10(n)},ci.minorPlanetMagnitude=function(e,t,r,n,a){a=S.d2R(a);var l=Math.exp(-3.33*Math.pow(Math.tan(a/2),.63)),f=Math.exp(-1.87*Math.pow(Math.tan(a/2),1.22));return e+5*ye.log10(n*t)-2.5*ye.log10((1-r)*l+r*f)};var vs={};function Sa(){}Sa.calculate=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=S.m360(280.4664567+360007.6982779*t+.03032028*r+n/49931-a/15300-l/2e6),c=hi.apparentEclipticLongitude(e),d=hi.apparentEclipticLatitude(e),m=ui.trueObliquityOfEcliptic(e),v=S.ec2Eq(c,d,m);m=S.d2R(m);var C=f-.0057183-v.x*15+S.dmS2D(0,0,ui.nutationInLongitude(e))*Math.cos(m);return C>180&&(C=-(360-C)),C*=4,C};var Ln={};function Qi(){}Qi.correctionInLongitude=function(e,t,r){var n=(r-2451545)/36525,a=e-1.397*n-31e-5*n*n;a=S.d2R(a),e=S.d2R(e),t=S.d2R(t);var l=-.09033+.03916*(Math.cos(a)+Math.sin(a))*Math.tan(t);return S.dmS2D(0,0,l)},Qi.correctionInLatitude=function(e,t){var r=(t-2451545)/36525,n=e-1.397*r-31e-5*r*r;n=S.d2R(n),e=S.d2R(e);var a=.03916*(Math.cos(n)-Math.sin(n));return S.dmS2D(0,0,a)},Qi.convertVSOPToFK5J2000=function(e){var t=new _t;return t.x=e.x+44036e-11*e.y-190919e-12*e.z,t.y=-479966e-12*e.x+.917482137087*e.y-.397776982902*e.z,t.z=.397776982902*e.y+.917482137087*e.z,t},Qi.convertVSOPToFK5B1950=function(e){var t=new _t;return t.x=.999925702634*e.x+.012189716217*e.y+11134016e-12*e.z,t.y=-.011179418036*e.x+.917413998946*e.y-.397777041885*e.z,t.z=-.004859003787*e.x+.397747363646*e.y+.917482111428*e.z,t},Qi.convertVSOPToFK5AnyEquinox=function(e,t){var r=(t-2451545)/36525,n=r*r,a=n*r,l=2306.2181*r+.30188*n+.017988*a;l=S.d2R(S.dmS2D(0,0,l));var f=2306.2181*r+1.09468*n+.018203*a;f=S.d2R(S.dmS2D(0,0,f));var c=2004.3109*r-.42665*n-.041833*a;c=S.d2R(S.dmS2D(0,0,c));var d=Math.cos(l),m=Math.cos(f),v=Math.cos(c),C=Math.sin(l),T=Math.sin(f),A=Math.sin(c),$=d*m*v-C*T,N=C*m+d*T*v,F=d*A,z=-d*T-C*m*v,Y=d*m-C*T*v,W=-C*A,ee=-m*A,ne=-T*A,ae=v,de=new _t;return de.x=$*e.x+z*e.y+ee*e.z,de.y=N*e.x+Y*e.y+ne*e.z,de.z=F*e.x+W*e.y+ae*e.z,de};var Un={};function Hn(){this.meanLongitude=0,this.trueLongitude=0,this.tropicalLongitude=0,this.equatorialLatitude=0,this.r=0,this.eclipticRectangularCoordinates=new _t,this.trueRectangularCoordinates=new _t,this.apparentRectangularCoordinates=new _t,this.bInTransit=!1,this.bInOccultation=!1,this.bInEclipse=!1,this.bInShadowTransit=!1,this.apparentShadowRectangularCoordinates=new _t,this.meanLongitude=0,this.trueLongitude=0,this.tropicalLongitude=0,this.equatorialLatitude=0,this.r=0,this.bInTransit=!1,this.bInOccultation=!1,this.bInEclipse=!1,this.bInShadowTransit=!1}var ws={};function Ma(){this.satellite1=new Hn,this.satellite2=new Hn,this.satellite3=new Hn,this.satellite4=new Hn}var Ya={};function Ri(){}Ri.calculate=function(e){for(var t=hi.geometricEclipticLongitude(e),r=S.d2R(t),n=hi.geometricEclipticLatitude(e),a=S.d2R(n),l=Qt.radiusVector(e),f=5,c=0,d=ci.distanceToLightTime(f),m=e-d,v=!0,C=0,T=0,A=0,$=0,N=0,F=0,z=0,Y=0;v;)$=H.eclipticLongitude(m),N=S.d2R($),F=H.eclipticLatitude(m),z=S.d2R(F),Y=H.radiusVector(m),C=Y*Math.cos(z)*Math.cos(N)+l*Math.cos(r),T=Y*Math.cos(z)*Math.sin(N)+l*Math.sin(r),A=Y*Math.sin(z)+l*Math.sin(a),f=Math.sqrt(C*C+T*T+A*A),d=ci.distanceToLightTime(f),v=Math.abs(d-c)>2e-6,v&&(m=e-d,c=d);var W=Ri.calculateHelper(e,r,a,l);Ri.fillInPhenomenaDetails(W.satellite1),Ri.fillInPhenomenaDetails(W.satellite2),Ri.fillInPhenomenaDetails(W.satellite3),Ri.fillInPhenomenaDetails(W.satellite4),m=e-d,$=H.eclipticLongitude(m),N=S.d2R($),F=H.eclipticLatitude(m),z=S.d2R(F),Y=H.radiusVector(m),C=Y*Math.cos(z)*Math.cos(N),T=Y*Math.cos(z)*Math.sin(N),A=Y*Math.sin(z),f=Math.sqrt(C*C+T*T+A*A);var ee=ci.distanceToLightTime(f),ne=Ri.calculateHelper(e+ee-d,r,a,0);return Ri.fillInPhenomenaDetails(ne.satellite1),Ri.fillInPhenomenaDetails(ne.satellite2),Ri.fillInPhenomenaDetails(ne.satellite3),Ri.fillInPhenomenaDetails(ne.satellite4),W.satellite1.bInEclipse=ne.satellite1.bInOccultation,W.satellite2.bInEclipse=ne.satellite2.bInOccultation,W.satellite3.bInEclipse=ne.satellite3.bInOccultation,W.satellite4.bInEclipse=ne.satellite4.bInOccultation,W.satellite1.bInShadowTransit=ne.satellite1.bInTransit,W.satellite2.bInShadowTransit=ne.satellite2.bInTransit,W.satellite3.bInShadowTransit=ne.satellite3.bInTransit,W.satellite4.bInShadowTransit=ne.satellite4.bInTransit,W.satellite1.apparentShadowRectangularCoordinates=ne.satellite1.apparentRectangularCoordinates,W.satellite2.apparentShadowRectangularCoordinates=ne.satellite2.apparentRectangularCoordinates,W.satellite3.apparentShadowRectangularCoordinates=ne.satellite3.apparentRectangularCoordinates,W.satellite4.apparentShadowRectangularCoordinates=ne.satellite4.apparentRectangularCoordinates,W},Ri.calculateHelper=function(e,t,r,n){for(var a=new Ma,l=5,f=0,c=ci.distanceToLightTime(l),d=0,m=0,v=0,C=0,T=0,A=0,$=0,N=0,F=e-c,z=!0;z;)C=H.eclipticLongitude(F),T=S.d2R(C),A=H.eclipticLatitude(F),$=S.d2R(A),N=H.radiusVector(F),d=N*Math.cos($)*Math.cos(T)+n*Math.cos(t),m=N*Math.cos($)*Math.sin(T)+n*Math.sin(t),v=N*Math.sin($)+n*Math.sin(r),l=Math.sqrt(d*d+m*m+v*v),c=ci.distanceToLightTime(l),z=Math.abs(c-f)>2e-6,z&&(F=e-c,f=c);var Y=Math.atan2(m,d),W=Math.atan(v/Math.sqrt(d*d+m*m)),ee=e-24430005e-1-c,ne=106.07719+203.48895579*ee,ae=S.d2R(ne),de=175.73161+101.374724735*ee,se=S.d2R(de),we=120.55883+50.317609207*ee,fe=S.d2R(we),$e=84.44459+21.571071177*ee,ve=S.d2R($e),ut=S.d2R(S.m360(97.0881+.16138586*ee)),ht=S.d2R(S.m360(154.8663+.04726307*ee)),Je=S.d2R(S.m360(188.184+.00712734*ee)),Ee=S.d2R(S.m360(335.2868+.00184*ee)),pi=312.3346-.13279386*ee,Ii=S.d2R(pi),xi=100.4411-.03263064*ee,ei=S.d2R(xi),yi=119.1942-.00717703*ee,Kt=S.d2R(yi),Gi=322.6186-.00175934*ee,Pt=S.d2R(Gi),qi=.33033*Math.sin(S.d2R(163.679+.0010512*ee))+.03439*Math.sin(S.d2R(34.486-.0161731*ee)),Di=S.d2R(199.6766+.1737919*ee),st=S.d2R(316.5182-208e-8*ee),Qe=S.d2R(30.23756+.0830925701*ee+qi),Gt=S.d2R(31.97853+.0334597339*ee),St=S.d2R(13.469942),Ar=.47259*Math.sin(2*(ae-se))+-.03478*Math.sin(Je-Ee)+.01081*Math.sin(se-2*fe+Je)+.00738*Math.sin(Di)+.00713*Math.sin(se-2*fe+ht)+-.00674*Math.sin(ut+Je-2*St-2*Qe)+.00666*Math.sin(se-2*fe+Ee)+.00445*Math.sin(ae-Je)+-.00354*Math.sin(ae-se)+-.00317*Math.sin(2*st-2*St)+.00265*Math.sin(ae-Ee)+-.00186*Math.sin(Qe)+.00162*Math.sin(ht-Je)+.00158*Math.sin(4*(ae-se))+-.00155*Math.sin(ae-fe)+-.00138*Math.sin(st+Kt-2*St-2*Qe)+-.00115*Math.sin(2*(ae-2*se+ei))+89e-5*Math.sin(ht-Ee)+85e-5*Math.sin(ae+Je-2*St-2*Qe)+83e-5*Math.sin(ei-Kt)+53e-5*Math.sin(st-ei),sr=1.06476*Math.sin(2*(se-fe))+.04256*Math.sin(ae-2*se+Je)+.03581*Math.sin(se-Je)+.02395*Math.sin(ae-2*se+Ee)+.01984*Math.sin(se-Ee)+-.01778*Math.sin(Di)+.01654*Math.sin(se-ht)+.01334*Math.sin(se-2*fe+ht)+.01294*Math.sin(Je-Ee)+-.01142*Math.sin(se-fe)+-.01057*Math.sin(Qe)+-.00775*Math.sin(2*(st-St))+.00524*Math.sin(2*(ae-se))+-.0046*Math.sin(ae-fe)+.00316*Math.sin(st-2*Qe+Kt-2*St)+-.00203*Math.sin(ut+Je-2*St-2*Qe)+.00146*Math.sin(st-Kt)+-.00145*Math.sin(2*Qe)+.00125*Math.sin(st-Pt)+-.00115*Math.sin(ae-2*fe+Je)+-94e-5*Math.sin(2*(se-ei))+86e-5*Math.sin(2*(ae-2*se+ei))+-86e-5*Math.sin(5*Gt-2*Qe+S.d2R(52.225))+-78e-5*Math.sin(se-ve)+-64e-5*Math.sin(3*fe-7*ve+4*Ee)+64e-5*Math.sin(ut-Ee)+-63e-5*Math.sin(ae-2*fe+Ee)+58e-5*Math.sin(Kt-Pt)+56e-5*Math.sin(2*(st-St-Qe))+56e-5*Math.sin(2*(se-ve))+55e-5*Math.sin(2*(ae-fe))+52e-5*Math.sin(3*fe-7*ve+Je+3*Ee)+-43e-5*Math.sin(ae-Je)+41e-5*Math.sin(5*(se-fe))+41e-5*Math.sin(Ee-St)+32e-5*Math.sin(ei-Kt)+32e-5*Math.sin(2*(fe-Qe-St)),Oi=.1649*Math.sin(fe-Je)+.09081*Math.sin(fe-Ee)+-.06907*Math.sin(se-fe)+.03784*Math.sin(Je-Ee)+.01846*Math.sin(2*(fe-ve))+-.0134*Math.sin(Qe)+-.01014*Math.sin(2*(st-St))+.00704*Math.sin(se-2*fe+Je)+-.0062*Math.sin(se-2*fe+ht)+-.00541*Math.sin(fe-ve)+.00381*Math.sin(se-2*fe+Ee)+.00235*Math.sin(st-Kt)+.00198*Math.sin(st-Pt)+.00176*Math.sin(Di)+.0013*Math.sin(3*(fe-ve))+.00125*Math.sin(ae-fe)+-.00119*Math.sin(5*Gt-2*Qe+S.d2R(52.225))+.00109*Math.sin(ae-se)+-.001*Math.sin(3*fe-7*ve+4*Ee)+91e-5*Math.sin(Kt-Pt)+8e-4*Math.sin(3*fe-7*ve+Je+3*Ee)+-75e-5*Math.sin(2*se-3*fe+Je)+72e-5*Math.sin(ut+Je-2*St-2*Qe)+69e-5*Math.sin(Ee-St)+-58e-5*Math.sin(2*fe-3*ve+Ee)+-57e-5*Math.sin(fe-2*ve+Ee)+56e-5*Math.sin(fe+Je-2*St-2*Qe)+-52e-5*Math.sin(se-2*fe+ut)+-5e-4*Math.sin(ht-Je)+48e-5*Math.sin(fe-2*ve+Je)+-45e-5*Math.sin(2*se-3*fe+Ee)+-41e-5*Math.sin(ht-Ee)+-38e-5*Math.sin(2*Qe)+-37e-5*Math.sin(Je-Ee+Kt-Pt)+-32e-5*Math.sin(3*fe-7*ve+2*Je+2*Ee)+3e-4*Math.sin(4*(fe-ve))+29e-5*Math.sin(fe+Ee-2*St-2*Qe)+-28e-5*Math.sin(Kt+st-2*St-2*Qe)+26e-5*Math.sin(fe-St-Qe)+24e-5*Math.sin(se-3*fe+2*ve)+21e-5*Math.sin(fe-St-Qe)+-21e-5*Math.sin(fe-ht)+17e-5*Math.sin(2*(fe-Je)),Cn=.84287*Math.sin(ve-Ee)+.03431*Math.sin(Ee-Je)+-.03305*Math.sin(2*(st-St))+-.03211*Math.sin(Qe)+-.01862*Math.sin(ve-Je)+.01186*Math.sin(st-Pt)+.00623*Math.sin(ve+Ee-2*Qe-2*St)+.00387*Math.sin(2*(ve-Ee))+-.00284*Math.sin(5*Gt-2*Qe+S.d2R(52.225))+-.00234*Math.sin(2*(st-Ee))+-.00223*Math.sin(fe-ve)+-.00208*Math.sin(ve-St)+.00178*Math.sin(st+Pt-2*Ee)+.00134*Math.sin(Ee-St)+.00125*Math.sin(2*(ve-Qe-St))+-.00117*Math.sin(2*Qe)+-.00112*Math.sin(2*(fe-ve))+.00107*Math.sin(3*fe-7*ve+4*Ee)+.00102*Math.sin(ve-Qe-St)+96e-5*Math.sin(2*ve-st-Pt)+87e-5*Math.sin(2*(st-Pt))+-85e-5*Math.sin(3*fe-7*ve+Je+3*Ee)+85e-5*Math.sin(fe-2*ve+Ee)+-81e-5*Math.sin(2*(ve-st))+71e-5*Math.sin(ve+Ee-2*St-3*Qe)+61e-5*Math.sin(ae-ve)+-56e-5*Math.sin(st-Kt)+-54e-5*Math.sin(fe-2*ve+Je)+51e-5*Math.sin(se-ve)+42e-5*Math.sin(2*(st-Qe-St))+39e-5*Math.sin(2*(Ee-Pt))+36e-5*Math.sin(st+St-Ee-Pt)+35e-5*Math.sin(2*Gt-Qe+S.d2R(188.37))+-35e-5*Math.sin(ve-Ee+2*St-2*st)+-32e-5*Math.sin(ve+Ee-2*St-Qe)+3e-4*Math.sin(2*Gt-2*Qe+S.d2R(149.15))+29e-5*Math.sin(3*fe-7*ve+2*Je+2*Ee)+28e-5*Math.sin(ve-Ee+2*st-2*St)+-28e-5*Math.sin(2*(ve-Pt))+-27e-5*Math.sin(Je-Ee+Kt-Pt)+-26e-5*Math.sin(5*Gt-3*Qe+S.d2R(188.37))+25e-5*Math.sin(Pt-Kt)+-25e-5*Math.sin(se-3*fe+2*ve)+-23e-5*Math.sin(3*(fe-ve))+21e-5*Math.sin(2*ve-2*St-3*Qe)+-21e-5*Math.sin(2*fe-3*ve+Ee)+19e-5*Math.sin(ve-Ee-Qe)+-19e-5*Math.sin(2*ve-Je-Ee)+-18e-5*Math.sin(ve-Ee+Qe)+-16e-5*Math.sin(ve+Je-2*St-2*Qe);a.satellite1.meanLongitude=S.m360(ne),a.satellite1.trueLongitude=S.m360(ne+Ar);var wr=S.d2R(a.satellite1.trueLongitude);a.satellite2.meanLongitude=S.m360(de),a.satellite2.trueLongitude=S.m360(de+sr);var dr=S.d2R(a.satellite2.trueLongitude);a.satellite3.meanLongitude=S.m360(we),a.satellite3.trueLongitude=S.m360(we+Oi);var Xi=S.d2R(a.satellite3.trueLongitude);a.satellite4.meanLongitude=S.m360($e),a.satellite4.trueLongitude=S.m360($e+Cn);var pr=S.d2R(a.satellite4.trueLongitude),Nr=Math.atan(6393e-7*Math.sin(wr-Ii)+1825e-7*Math.sin(wr-ei)+329e-7*Math.sin(wr-Kt)+-311e-7*Math.sin(wr-st)+93e-7*Math.sin(wr-Pt)+75e-7*Math.sin(3*wr-4*se-1.9927*Ar+ei)+46e-7*Math.sin(wr+st-2*St-2*Qe));a.satellite1.equatorialLatitude=S.r2D(Nr);var Sn=Math.atan(.0081004*Math.sin(dr-ei)+4512e-7*Math.sin(dr-Kt)+-3284e-7*Math.sin(dr-st)+116e-6*Math.sin(dr-Pt)+272e-7*Math.sin(ae-2*fe+1.0146*sr+ei)+-144e-7*Math.sin(dr-Ii)+143e-7*Math.sin(dr+st-2*St-2*Qe)+35e-7*Math.sin(dr-st+Qe)+-28e-7*Math.sin(ae-2*fe+1.0146*sr+Kt));a.satellite2.equatorialLatitude=S.r2D(Sn);var Mr=Math.atan(.0032402*Math.sin(Xi-Kt)+-.0016911*Math.sin(Xi-st)+6847e-7*Math.sin(Xi-Pt)+-2797e-7*Math.sin(Xi-ei)+321e-7*Math.sin(Xi+st-2*St-2*Qe)+51e-7*Math.sin(Xi-st+Qe)+-45e-7*Math.sin(Xi-st-Qe)+-45e-7*Math.sin(Xi+st-2*St)+37e-7*Math.sin(Xi+st-2*St-3*Qe)+3e-6*Math.sin(2*se-3*Xi+4.03*Oi+ei)+-21e-7*Math.sin(2*se-3*Xi+4.03*Oi+Kt));a.satellite3.equatorialLatitude=S.r2D(Mr);var Tr=Math.atan(-.0076579*Math.sin(pr-st)+.0044134*Math.sin(pr-Pt)+-5112e-7*Math.sin(pr-Kt)+773e-7*Math.sin(pr+st-2*St-2*Qe)+104e-7*Math.sin(pr-st+Qe)+-102e-7*Math.sin(pr-st-Qe)+88e-7*Math.sin(pr+st-2*St-3*Qe)+-38e-7*Math.sin(pr+st-2*St-Qe));a.satellite4.equatorialLatitude=S.r2D(Tr),a.satellite1.r=5.90569*(1+(-.0041339*Math.cos(2*(ae-se))+-387e-7*Math.cos(ae-Je)+-214e-7*Math.cos(ae-Ee)+17e-6*Math.cos(ae-se)+-131e-7*Math.cos(4*(ae-se))+106e-7*Math.cos(ae-fe)+-66e-7*Math.cos(ae+Je-2*St-2*Qe))),a.satellite2.r=9.39657*(1+(.0093848*Math.cos(ae-se)+-3116e-7*Math.cos(se-Je)+-1744e-7*Math.cos(se-Ee)+-1442e-7*Math.cos(se-ht)+553e-7*Math.cos(se-fe)+523e-7*Math.cos(ae-fe)+-29e-6*Math.cos(2*(ae-se))+164e-7*Math.cos(2*(se-ei))+107e-7*Math.cos(ae-2*fe+Je)+-102e-7*Math.cos(se-ut)+-91e-7*Math.cos(2*(ae-fe)))),a.satellite3.r=14.98832*(1+(-.0014388*Math.cos(fe-Je)+-7919e-7*Math.cos(fe-Ee)+6342e-7*Math.cos(se-fe)+-1761e-7*Math.cos(2*(fe-ve))+294e-7*Math.cos(fe-ve)+-156e-7*Math.cos(3*(fe-ve))+156e-7*Math.cos(ae-fe)+-153e-7*Math.cos(ae-se)+7e-6*Math.cos(2*se-3*fe+Je)+-51e-7*Math.cos(fe+Je-2*St-2*Qe))),a.satellite4.r=26.36273*(1+(-.0073546*Math.cos(ve-Ee)+1621e-7*Math.cos(ve-Je)+974e-7*Math.cos(fe-ve)+-543e-7*Math.cos(ve+Ee-2*St-2*Qe)+-271e-7*Math.cos(2*(ve-Ee))+182e-7*Math.cos(ve-St)+177e-7*Math.cos(2*(fe-ve))+-167e-7*Math.cos(2*ve-st-Pt)+167e-7*Math.cos(st-Pt)+-155e-7*Math.cos(2*(ve-St-Qe))+142e-7*Math.cos(2*(ve-st))+105e-7*Math.cos(ae-ve)+92e-7*Math.cos(se-ve)+-89e-7*Math.cos(ve-St-Qe)+-62e-7*Math.cos(ve+Ee-2*St-3*Qe)+48e-7*Math.cos(2*(ve-Pt))));var cn=(e-2433282423e-3)/36525,Dn=S.d2R(1.3966626*cn+3088e-7*cn*cn);wr+=Dn,a.satellite1.tropicalLongitude=S.m360(S.r2D(wr)),dr+=Dn,a.satellite2.tropicalLongitude=S.m360(S.r2D(dr)),Xi+=Dn,a.satellite3.tropicalLongitude=S.m360(S.r2D(Xi)),pr+=Dn,a.satellite4.tropicalLongitude=S.m360(S.r2D(pr)),st+=Dn;var hn=(e-24150205e-1)/36525,hs=3.120262+6e-4*hn,aa=S.d2R(hs),Zs=a.satellite1.r*Math.cos(wr-st)*Math.cos(Nr),fs=a.satellite2.r*Math.cos(dr-st)*Math.cos(Sn),Va=a.satellite3.r*Math.cos(Xi-st)*Math.cos(Mr),wa=a.satellite4.r*Math.cos(pr-st)*Math.cos(Tr),fn=0,Ba=a.satellite1.r*Math.sin(wr-st)*Math.cos(Nr),dn=a.satellite2.r*Math.sin(dr-st)*Math.cos(Sn),ba=a.satellite3.r*Math.sin(Xi-st)*Math.cos(Mr),Mn=a.satellite4.r*Math.sin(pr-st)*Math.cos(Tr),ds=0,_s=a.satellite1.r*Math.sin(Nr),za=a.satellite2.r*Math.sin(Sn),Qs=a.satellite3.r*Math.sin(Mr),gs=a.satellite4.r*Math.sin(Tr),ms=1,sa=S.d2R(et.jupiterLongitudeAscendingNode(e)),Fn=S.d2R(et.jupiterInclination(e)),Ir=0,Tn=0,Pr=0,Zf=new _t,or=Ri.rotations(fn,ds,ms,aa,st,Fn,sa,Y,W,Zf);Ir=or[0],Tn=or[1],Pr=or[2];var br=Math.atan2(Ir,Pr);or=Ri.rotations(Zs,Ba,_s,aa,st,Fn,sa,Y,W,a.satellite1.eclipticRectangularCoordinates),Ir=or[0],Tn=or[1],Pr=or[2],a.satellite1.trueRectangularCoordinates.x=Ir*Math.cos(br)-Pr*Math.sin(br),a.satellite1.trueRectangularCoordinates.y=Ir*Math.sin(br)+Pr*Math.cos(br),a.satellite1.trueRectangularCoordinates.z=Tn,or=Ri.rotations(fs,dn,za,aa,st,Fn,sa,Y,W,a.satellite2.eclipticRectangularCoordinates),Ir=or[0],Tn=or[1],Pr=or[2],a.satellite2.trueRectangularCoordinates.x=Ir*Math.cos(br)-Pr*Math.sin(br),a.satellite2.trueRectangularCoordinates.y=Ir*Math.sin(br)+Pr*Math.cos(br),a.satellite2.trueRectangularCoordinates.z=Tn,or=Ri.rotations(Va,ba,Qs,aa,st,Fn,sa,Y,W,a.satellite3.eclipticRectangularCoordinates),Ir=or[0],Tn=or[1],Pr=or[2],a.satellite3.trueRectangularCoordinates.x=Ir*Math.cos(br)-Pr*Math.sin(br),a.satellite3.trueRectangularCoordinates.y=Ir*Math.sin(br)+Pr*Math.cos(br),a.satellite3.trueRectangularCoordinates.z=Tn,or=Ri.rotations(wa,Mn,gs,aa,st,Fn,sa,Y,W,a.satellite4.eclipticRectangularCoordinates),Ir=or[0],Tn=or[1],Pr=or[2],a.satellite4.trueRectangularCoordinates.x=Ir*Math.cos(br)-Pr*Math.sin(br),a.satellite4.trueRectangularCoordinates.y=Ir*Math.sin(br)+Pr*Math.cos(br),a.satellite4.trueRectangularCoordinates.z=Tn,a.satellite1.apparentRectangularCoordinates.x=a.satellite1.trueRectangularCoordinates.x+Math.abs(a.satellite1.trueRectangularCoordinates.z)/17295*Math.sqrt(1-a.satellite1.trueRectangularCoordinates.x/a.satellite1.r*(a.satellite1.trueRectangularCoordinates.x/a.satellite1.r)),a.satellite1.apparentRectangularCoordinates.y=a.satellite1.trueRectangularCoordinates.y,a.satellite1.apparentRectangularCoordinates.z=a.satellite1.trueRectangularCoordinates.z,a.satellite2.apparentRectangularCoordinates.x=a.satellite2.trueRectangularCoordinates.x+Math.abs(a.satellite2.trueRectangularCoordinates.z)/21819*Math.sqrt(1-a.satellite2.trueRectangularCoordinates.x/a.satellite2.r*(a.satellite2.trueRectangularCoordinates.x/a.satellite2.r)),a.satellite2.apparentRectangularCoordinates.y=a.satellite2.trueRectangularCoordinates.y,a.satellite2.apparentRectangularCoordinates.z=a.satellite2.trueRectangularCoordinates.z,a.satellite3.apparentRectangularCoordinates.x=a.satellite3.trueRectangularCoordinates.x+Math.abs(a.satellite3.trueRectangularCoordinates.z)/27558*Math.sqrt(1-a.satellite3.trueRectangularCoordinates.x/a.satellite3.r*(a.satellite3.trueRectangularCoordinates.x/a.satellite3.r)),a.satellite3.apparentRectangularCoordinates.y=a.satellite3.trueRectangularCoordinates.y,a.satellite3.apparentRectangularCoordinates.z=a.satellite3.trueRectangularCoordinates.z,a.satellite4.apparentRectangularCoordinates.x=a.satellite4.trueRectangularCoordinates.x+Math.abs(a.satellite4.trueRectangularCoordinates.z)/36548*Math.sqrt(1-a.satellite4.trueRectangularCoordinates.x/a.satellite4.r*(a.satellite4.trueRectangularCoordinates.x/a.satellite4.r)),a.satellite4.apparentRectangularCoordinates.y=a.satellite4.trueRectangularCoordinates.y,a.satellite4.apparentRectangularCoordinates.z=a.satellite4.trueRectangularCoordinates.z;var Kr=l/(l+a.satellite1.trueRectangularCoordinates.z/2095);return a.satellite1.apparentRectangularCoordinates.x*=Kr,a.satellite1.apparentRectangularCoordinates.y*=Kr,Kr=l/(l+a.satellite2.trueRectangularCoordinates.z/2095),a.satellite2.apparentRectangularCoordinates.x*=Kr,a.satellite2.apparentRectangularCoordinates.y*=Kr,Kr=l/(l+a.satellite3.trueRectangularCoordinates.z/2095),a.satellite3.apparentRectangularCoordinates.x*=Kr,a.satellite3.apparentRectangularCoordinates.y*=Kr,Kr=l/(l+a.satellite4.trueRectangularCoordinates.z/2095),a.satellite4.apparentRectangularCoordinates.x*=Kr,a.satellite4.apparentRectangularCoordinates.y*=Kr,a},Ri.rotations=function(e,t,r,n,a,l,f,c,d,m){var v,C,T,A=a-f,$=e,N=t*Math.cos(n)-r*Math.sin(n),F=t*Math.sin(n)+r*Math.cos(n),z=$*Math.cos(A)-N*Math.sin(A),Y=$*Math.sin(A)+N*Math.cos(A),W=F,ee=z,ne=Y*Math.cos(l)-W*Math.sin(l),ae=Y*Math.sin(l)+W*Math.cos(l),de=ee*Math.cos(f)-ne*Math.sin(f),se=ee*Math.sin(f)+ne*Math.cos(f),we=ae,fe=1/2095;m.x=de*fe,m.y=se*fe,m.z=we*fe;var $e=de*Math.sin(c)-se*Math.cos(c),ve=de*Math.cos(c)+se*Math.sin(c),ut=we;return v=$e,C=ut*Math.sin(d)+ve*Math.cos(d),T=ut*Math.cos(d)-ve*Math.sin(d),[v,C,T]},Ri.fillInPhenomenaDetails=function(e){var t=1.071374*e.apparentRectangularCoordinates.y,r=t*t+e.apparentRectangularCoordinates.x*e.apparentRectangularCoordinates.x;r<1?e.apparentRectangularCoordinates.z<0?(e.bInTransit=!0,e.bInOccultation=!1):(e.bInTransit=!1,e.bInOccultation=!0):(e.bInTransit=!1,e.bInOccultation=!1)};var bs={};function $r(){}$r.rhoSinThetaPrime=function(e,t){e=S.d2R(e);var r=Math.atan(.99664719*Math.tan(e));return .99664719*Math.sin(r)+t/6378149*Math.sin(e)},$r.rhoCosThetaPrime=function(e,t){e=S.d2R(e);var r=Math.atan(.99664719*Math.tan(e));return Math.cos(r)+t/6378149*Math.cos(e)},$r.radiusOfParallelOfLatitude=function(e){e=S.d2R(e);var t=Math.sin(e);return 6378.14*Math.cos(e)/Math.sqrt(1-.0066943847614084*t*t)},$r.radiusOfCurvature=function(e){e=S.d2R(e);var t=Math.sin(e);return 6378.14*(1-.0066943847614084)/Math.pow(1-.0066943847614084*t*t,1.5)},$r.distanceBetweenPoints=function(e,t,r,n){e=S.d2R(e),r=S.d2R(r),t=S.d2R(t),n=S.d2R(n);var a=(e+r)/2,l=(e-r)/2,f=(t-n)/2,c=Math.sin(l),d=Math.cos(l),m=Math.cos(a),v=Math.sin(a),C=Math.sin(f),T=Math.cos(f),A=c*c*T*T+m*m*C*C,$=d*d*T*T+v*v*C*C,N=Math.atan(Math.sqrt(A/$)),F=Math.sqrt(A*$)/N,z=2*N*6378.14,Y=(3*F-1)/(2*$),W=(3*F+1)/(2*A),ee=.00335281317789691;return z*(1+ee*Y*v*v*d*d-ee*W*m*m*c*c)};var ys={};function Fi(){}Fi.phaseAngle=function(e,t,r){return S.m360(S.r2D(Math.acos((e*e+r*r-t*t)/(2*e*r))))},Fi.phaseAngle2=function(e,t,r,n,a,l){return r=S.d2R(r),n=S.d2R(n),a=S.d2R(a),S.m360(S.r2D(Math.acos((e-t*Math.cos(r)*Math.cos(n-a))/l)))},Fi.phaseAngleRectangular=function(e,t,r,n,a,l){n=S.d2R(n),a=S.d2R(a);var f=Math.cos(n);return S.m360(S.r2D(Math.acos((e*f*Math.cos(a)+t*f*Math.sin(a)+r*Math.sin(n))/l)))},Fi.illuminatedFraction=function(e){return e=S.d2R(e),(1+Math.cos(e))/2},Fi.illuminatedFraction2=function(e,t,r){return((e+r)*(e+r)-t*t)/(4*e*r)},Fi.mercuryMagnitudeMuller=function(e,t,r){var n=r-50;return 1.16+5*ye.log10(e*t)+.02838*n+1023e-7*n*n},Fi.venusMagnitudeMuller=function(e,t,r){return-4+5*ye.log10(e*t)+.01322*r+4247e-10*r*r*r},Fi.marsMagnitudeMuller=function(e,t,r){return-1.3+5*ye.log10(e*t)+.01486*r},Fi.jupiterMagnitudeMuller=function(e,t){return-8.93+5*ye.log10(e*t)},Fi.saturnMagnitudeMuller=function(e,t,r,n){n=S.d2R(n);var a=Math.sin(n);return-8.68+5*ye.log10(e*t)+.044*Math.abs(r)-2.6*Math.sin(Math.abs(n))+1.25*a*a},Fi.uranusMagnitudeMuller=function(e,t){return-6.85+5*ye.log10(e*t)},Fi.neptuneMagnitudeMuller=function(e,t){return-7.05+5*ye.log10(e*t)},Fi.mercuryMagnitudeAA=function(e,t,r){var n=r*r,a=n*r;return-.42+5*ye.log10(e*t)+.038*r-273e-6*n+2e-6*a},Fi.venusMagnitudeAA=function(e,t,r){var n=r*r,a=n*r;return-4.4+5*ye.log10(e*t)+9e-4*r+239e-6*n-65e-8*a},Fi.marsMagnitudeAA=function(e,t,r){return-1.52+5*ye.log10(e*t)+.016*r},Fi.jupiterMagnitudeAA=function(e,t,r){return-9.4+5*ye.log10(e*t)+.005*r},Fi.saturnMagnitudeAA=function(e,t,r,n){n=S.d2R(n);var a=Math.sin(n);return-8.88+5*ye.log10(e*t)+.044*Math.abs(r)-2.6*Math.sin(Math.abs(n))+1.25*a*a},Fi.uranusMagnitudeAA=function(e,t){return-7.19+5*ye.log10(e*t)},Fi.neptuneMagnitudeAA=function(e,t){return-6.87+5*ye.log10(e*t)},Fi.plutoMagnitudeAA=function(e,t){return-1+5*ye.log10(e*t)};var y={};function x(){}x.interpolate=function(e,t,r,n){var a=r-t,l=n-r,f=t+n-2*r;return r+e/2*(a+l+e*f)},x.interpolate2=function(e,t,r,n,a,l){var f=r-t,c=n-r,d=a-n,m=l-a,v=c-f,C=d-c,T=m-d,A=C-v,$=T-C,N=$-A,F=e*e,z=F*e,Y=z*e;return n+e*((c+d)/2-(A+$)/12)+F*(C/2-N/24)+z*((A+$)/12)+Y*(N/24)},x.interpolateToHalves=function(e,t,r,n){return(9*(t+r)-e-n)/16},x.lagrangeInterpolate=function(e,t,r,n){for(var a=0,l=1;l<=t;l++){for(var f=1,c=1;c<=t;c++)c!==l&&(f=f*(e-r[c-1])/(r[l-1]-r[c-1]));a+=f*n[l-1]}return a},x.zero=function(e,t,r){for(var n=t-e,a=r-t,l=e+r-2*t,f=!0,c=0,d=c;f;)d=-2*t/(n+a+l*c),f=Math.abs(d-c)>1e-12,f&&(c=d);return d},x.zeroB=function(e,t,r,n,a){for(var l=t-e,f=r-t,c=n-r,d=a-n,m=f-l,v=c-f,C=d-c,T=v-m,A=C-v,$=A-T,N=!0,F=0,z=F;N;){var Y=F*F,W=Y*F,ee=W*F;z=(-24*r+Y*($-12*v)-2*W*(T+A)-ee*$)/(2*(6*f+6*c-T-A)),N=Math.abs(z-F)>1e-12,N&&(F=z)}return z},x.zero2=function(e,t,r){for(var n=t-e,a=r-t,l=e+r-2*t,f=!0,c=0,d=c;f;){var m=-(2*t+c*(n+a+l*c))/(n+a+2*l*c);d=c+m,f=Math.abs(m)>1e-12,f&&(c=d)}return d},x.zero2B=function(e,t,r,n,a){for(var l=t-e,f=r-t,c=n-r,d=a-n,m=f-l,v=c-f,C=d-c,T=v-m,A=C-v,$=A-T,N=$/24,F=(T+A)/12,z=v/2-N,Y=(f+c)/2-F,W=!0,ee=0,ne=ee;W;){var ae=ee*ee,de=ae*ee,se=de*ee,we=-(N*se+F*de+z*ae+Y*ee+r)/(4*N*de+3*F*ae+2*z*ee+Y);ne=ee+we,W=Math.abs(we)>1e-12,W&&(ee=ne)}return ne};var L={};function H(){}H.eclipticLongitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_L0JupiterCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_L0JupiterCoefficients[d].a*Math.cos(b.g_L0JupiterCoefficients[d].b+b.g_L0JupiterCoefficients[d].c*t);var m=b.g_L1JupiterCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_L1JupiterCoefficients[d].a*Math.cos(b.g_L1JupiterCoefficients[d].b+b.g_L1JupiterCoefficients[d].c*t);var C=b.g_L2JupiterCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_L2JupiterCoefficients[d].a*Math.cos(b.g_L2JupiterCoefficients[d].b+b.g_L2JupiterCoefficients[d].c*t);var A=b.g_L3JupiterCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_L3JupiterCoefficients[d].a*Math.cos(b.g_L3JupiterCoefficients[d].b+b.g_L3JupiterCoefficients[d].c*t);var N=b.g_L4JupiterCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_L4JupiterCoefficients[d].a*Math.cos(b.g_L4JupiterCoefficients[d].b+b.g_L4JupiterCoefficients[d].c*t);var z=b.g_L5JupiterCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_L5JupiterCoefficients[d].a*Math.cos(b.g_L5JupiterCoefficients[d].b+b.g_L5JupiterCoefficients[d].c*t);var W=(c+v*t+T*r+$*n+F*a+Y*l)/1e8;return W=S.m360(S.r2D(W)),W},H.eclipticLatitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_B0JupiterCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_B0JupiterCoefficients[d].a*Math.cos(b.g_B0JupiterCoefficients[d].b+b.g_B0JupiterCoefficients[d].c*t);var m=b.g_B1JupiterCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_B1JupiterCoefficients[d].a*Math.cos(b.g_B1JupiterCoefficients[d].b+b.g_B1JupiterCoefficients[d].c*t);var C=b.g_B2JupiterCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_B2JupiterCoefficients[d].a*Math.cos(b.g_B2JupiterCoefficients[d].b+b.g_B2JupiterCoefficients[d].c*t);var A=b.g_B3JupiterCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_B3JupiterCoefficients[d].a*Math.cos(b.g_B3JupiterCoefficients[d].b+b.g_B3JupiterCoefficients[d].c*t);var N=b.g_B4JupiterCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_B4JupiterCoefficients[d].a*Math.cos(b.g_B4JupiterCoefficients[d].b+b.g_B4JupiterCoefficients[d].c*t);var z=b.g_B5JupiterCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_B5JupiterCoefficients[d].a*Math.cos(b.g_B5JupiterCoefficients[d].b+b.g_B5JupiterCoefficients[d].c*t);var W=(c+v*t+T*r+$*n+F*a+Y*l)/1e8;return W=S.r2D(W),W},H.radiusVector=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_R0JupiterCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_R0JupiterCoefficients[d].a*Math.cos(b.g_R0JupiterCoefficients[d].b+b.g_R0JupiterCoefficients[d].c*t);var m=b.g_R1JupiterCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_R1JupiterCoefficients[d].a*Math.cos(b.g_R1JupiterCoefficients[d].b+b.g_R1JupiterCoefficients[d].c*t);var C=b.g_R2JupiterCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_R2JupiterCoefficients[d].a*Math.cos(b.g_R2JupiterCoefficients[d].b+b.g_R2JupiterCoefficients[d].c*t);var A=b.g_R3JupiterCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_R3JupiterCoefficients[d].a*Math.cos(b.g_R3JupiterCoefficients[d].b+b.g_R3JupiterCoefficients[d].c*t);var N=b.g_R4JupiterCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_R4JupiterCoefficients[d].a*Math.cos(b.g_R4JupiterCoefficients[d].b+b.g_R4JupiterCoefficients[d].c*t);var z=b.g_R5JupiterCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_R5JupiterCoefficients[d].a*Math.cos(b.g_R5JupiterCoefficients[d].b+b.g_R5JupiterCoefficients[d].c*t);return(c+v*t+T*r+$*n+F*a+Y*l)/1e8};var ie={};function te(){}te.calculate=function(e,t){return te.calculateIter(e,t,53)},te.calculateIter=function(e,t,r){e=S.d2R(e);var n=S.PI(),a=1;e<0&&(a=-1),e=Math.abs(e)/(2*n),e=(e-i.truncate(e))*2*n*a,e<0&&(e+=2*n),a=1,e>n&&(a=-1),e>n&&(e=2*n-e);for(var l=n/2,f=n/4,c=0;c<r;c++){var d=l-t*Math.sin(l);e>d?l+=f:l-=f,f/=2}return S.r2D(l)*a};var be={};function Ie(){}Ie.eclipticLongitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_L0MarsCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_L0MarsCoefficients[d].a*Math.cos(b.g_L0MarsCoefficients[d].b+b.g_L0MarsCoefficients[d].c*t);var m=b.g_L1MarsCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_L1MarsCoefficients[d].a*Math.cos(b.g_L1MarsCoefficients[d].b+b.g_L1MarsCoefficients[d].c*t);var C=b.g_L2MarsCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_L2MarsCoefficients[d].a*Math.cos(b.g_L2MarsCoefficients[d].b+b.g_L2MarsCoefficients[d].c*t);var A=b.g_L3MarsCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_L3MarsCoefficients[d].a*Math.cos(b.g_L3MarsCoefficients[d].b+b.g_L3MarsCoefficients[d].c*t);var N=b.g_L4MarsCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_L4MarsCoefficients[d].a*Math.cos(b.g_L4MarsCoefficients[d].b+b.g_L4MarsCoefficients[d].c*t);var z=b.g_L5MarsCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_L5MarsCoefficients[d].a*Math.cos(b.g_L5MarsCoefficients[d].b+b.g_L5MarsCoefficients[d].c*t);var W=(c+v*t+T*r+$*n+F*a+Y*l)/1e8;return W=S.m360(S.r2D(W)),W},Ie.eclipticLatitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_B0MarsCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_B0MarsCoefficients[c].a*Math.cos(b.g_B0MarsCoefficients[c].b+b.g_B0MarsCoefficients[c].c*t);var d=b.g_B1MarsCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_B1MarsCoefficients[c].a*Math.cos(b.g_B1MarsCoefficients[c].b+b.g_B1MarsCoefficients[c].c*t);var v=b.g_B2MarsCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_B2MarsCoefficients[c].a*Math.cos(b.g_B2MarsCoefficients[c].b+b.g_B2MarsCoefficients[c].c*t);var T=b.g_B3MarsCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_B3MarsCoefficients[c].a*Math.cos(b.g_B3MarsCoefficients[c].b+b.g_B3MarsCoefficients[c].c*t);var $=b.g_B4MarsCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_B4MarsCoefficients[c].a*Math.cos(b.g_B4MarsCoefficients[c].b+b.g_B4MarsCoefficients[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.r2D(F),F},Ie.radiusVector=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_R0MarsCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_R0MarsCoefficients[c].a*Math.cos(b.g_R0MarsCoefficients[c].b+b.g_R0MarsCoefficients[c].c*t);var d=b.g_R1MarsCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_R1MarsCoefficients[c].a*Math.cos(b.g_R1MarsCoefficients[c].b+b.g_R1MarsCoefficients[c].c*t);var v=b.g_R2MarsCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_R2MarsCoefficients[c].a*Math.cos(b.g_R2MarsCoefficients[c].b+b.g_R2MarsCoefficients[c].c*t);var T=b.g_R3MarsCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_R3MarsCoefficients[c].a*Math.cos(b.g_R3MarsCoefficients[c].b+b.g_R3MarsCoefficients[c].c*t);var $=b.g_R4MarsCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_R4MarsCoefficients[c].a*Math.cos(b.g_R4MarsCoefficients[c].b+b.g_R4MarsCoefficients[c].c*t);return(f+m*t+C*r+A*n+N*a)/1e8};var xt={};function Ye(){}Ye.eclipticLongitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_L0MercuryCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_L0MercuryCoefficients[d].a*Math.cos(b.g_L0MercuryCoefficients[d].b+b.g_L0MercuryCoefficients[d].c*t);var m=b.g_L1MercuryCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_L1MercuryCoefficients[d].a*Math.cos(b.g_L1MercuryCoefficients[d].b+b.g_L1MercuryCoefficients[d].c*t);var C=b.g_L2MercuryCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_L2MercuryCoefficients[d].a*Math.cos(b.g_L2MercuryCoefficients[d].b+b.g_L2MercuryCoefficients[d].c*t);var A=b.g_L3MercuryCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_L3MercuryCoefficients[d].a*Math.cos(b.g_L3MercuryCoefficients[d].b+b.g_L3MercuryCoefficients[d].c*t);var N=b.g_L4MercuryCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_L4MercuryCoefficients[d].a*Math.cos(b.g_L4MercuryCoefficients[d].b+b.g_L4MercuryCoefficients[d].c*t);var z=b.g_L5MercuryCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_L5MercuryCoefficients[d].a*Math.cos(b.g_L5MercuryCoefficients[d].b+b.g_L5MercuryCoefficients[d].c*t);var W=(c+v*t+T*r+$*n+F*a+Y*l)/1e8;return W=S.m360(S.r2D(W)),W},Ye.eclipticLatitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_B0MercuryCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_B0MercuryCoefficients[c].a*Math.cos(b.g_B0MercuryCoefficients[c].b+b.g_B0MercuryCoefficients[c].c*t);var d=b.g_B1MercuryCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_B1MercuryCoefficients[c].a*Math.cos(b.g_B1MercuryCoefficients[c].b+b.g_B1MercuryCoefficients[c].c*t);var v=b.g_B2MercuryCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_B2MercuryCoefficients[c].a*Math.cos(b.g_B2MercuryCoefficients[c].b+b.g_B2MercuryCoefficients[c].c*t);var T=b.g_B3MercuryCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_B3MercuryCoefficients[c].a*Math.cos(b.g_B3MercuryCoefficients[c].b+b.g_B3MercuryCoefficients[c].c*t);var $=b.g_B4MercuryCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_B4MercuryCoefficients[c].a*Math.cos(b.g_B4MercuryCoefficients[c].b+b.g_B4MercuryCoefficients[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.r2D(F),F},Ye.radiusVector=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=b.g_R0MercuryCoefficients.length,l=0,f;for(f=0;f<a;f++)l+=b.g_R0MercuryCoefficients[f].a*Math.cos(b.g_R0MercuryCoefficients[f].b+b.g_R0MercuryCoefficients[f].c*t);var c=b.g_R1MercuryCoefficients.length,d=0;for(f=0;f<c;f++)d+=b.g_R1MercuryCoefficients[f].a*Math.cos(b.g_R1MercuryCoefficients[f].b+b.g_R1MercuryCoefficients[f].c*t);var m=b.g_R2MercuryCoefficients.length,v=0;for(f=0;f<m;f++)v+=b.g_R2MercuryCoefficients[f].a*Math.cos(b.g_R2MercuryCoefficients[f].b+b.g_R2MercuryCoefficients[f].c*t);var C=b.g_R3MercuryCoefficients.length,T=0;for(f=0;f<C;f++)T+=b.g_R3MercuryCoefficients[f].a*Math.cos(b.g_R3MercuryCoefficients[f].b+b.g_R3MercuryCoefficients[f].c*t);return(l+d*t+v*r+T*n)/1e8};var Dt={};function wt(){}wt.meanLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t,a=n*t;return S.m360(218.3164477+481267.88123421*t-.0015786*r+n/538841-a/65194e3)},wt.meanElongation=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t,a=n*t;return S.m360(297.8501921+445267.1114034*t-.0018819*r+n/545868-a/113065e3)},wt.meanAnomaly=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t,a=n*t;return S.m360(134.9633964+477198.8675055*t+.0087414*r+n/69699-a/14712e3)},wt.argumentOfLatitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t,a=n*t;return S.m360(93.272095+483202.0175233*t-.0036539*r-n/3526e3+a/86331e4)},wt.meanLongitudeAscendingNode=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t,a=n*t;return S.m360(125.0445479-1934.1362891*t+.0020754*r+n/467441-a/60616e3)},wt.meanLongitudePerigee=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t,a=n*t;return S.m360(83.3532465+4069.0137287*t-.01032*r-n/80053+a/18999e3)},wt.trueLongitudeAscendingNode=function(e){var t=wt.meanLongitudeAscendingNode(e),r=wt.meanElongation(e);r=S.d2R(r);var n=Qt.sunMeanAnomaly(e);n=S.d2R(n);var a=wt.meanAnomaly(e);a=S.d2R(a);var l=wt.argumentOfLatitude(e);return l=S.d2R(l),t-=1.4979*Math.sin(2*(r-l)),t-=.15*Math.sin(n),t-=.1226*Math.sin(2*r),t+=.1176*Math.sin(2*l),t-=.0801*Math.sin(2*(a-l)),S.m360(t)},wt.eclipticLongitude=function(e){var t=wt.meanLongitude(e),r=t;t=S.d2R(t);var n=wt.meanElongation(e);n=S.d2R(n);var a=Qt.sunMeanAnomaly(e);a=S.d2R(a);var l=wt.meanAnomaly(e);l=S.d2R(l);var f=wt.argumentOfLatitude(e);f=S.d2R(f);var c=Qt.eccentricity(e),d=(e-2451545)/36525,m=S.m360(119.75+131.849*d);m=S.d2R(m);var v=S.m360(53.09+479264.29*d);v=S.d2R(v);var C=S.m360(313.45+481266.484*d);C=S.d2R(C);var T=b.g_MoonCoefficients1.length;console.assert(b.g_MoonCoefficients2.length===T);for(var A=0,$=0;$<T;$++){var N=b.g_MoonCoefficients2[$].a*Math.sin(b.g_MoonCoefficients1[$].d*n+b.g_MoonCoefficients1[$].m*a+b.g_MoonCoefficients1[$].mdash*l+b.g_MoonCoefficients1[$].f*f);b.g_MoonCoefficients1[$].m&&(N*=c),A+=N}A+=3958*Math.sin(m),A+=1962*Math.sin(t-f),A+=318*Math.sin(v);var F=ui.nutationInLongitude(e);return S.m360(r+A/1e6+F/3600)},wt.eclipticLatitude=function(e){var t=wt.meanLongitude(e);t=S.d2R(t);var r=wt.meanElongation(e);r=S.d2R(r);var n=Qt.sunMeanAnomaly(e);n=S.d2R(n);var a=wt.meanAnomaly(e);a=S.d2R(a);var l=wt.argumentOfLatitude(e);l=S.d2R(l);var f=Qt.eccentricity(e),c=(e-2451545)/36525,d=S.m360(119.75+131.849*c);d=S.d2R(d);var m=S.m360(53.09+479264.29*c);m=S.d2R(m);var v=S.m360(313.45+481266.484*c);v=S.d2R(v);var C=b.g_MoonCoefficients3.length;console.assert(b.g_MoonCoefficients4.length===C);for(var T=0,A=0;A<C;A++){var $=b.g_MoonCoefficients4[A]*Math.sin(b.g_MoonCoefficients3[A].d*r+b.g_MoonCoefficients3[A].m*n+b.g_MoonCoefficients3[A].mdash*a+b.g_MoonCoefficients3[A].f*l);b.g_MoonCoefficients3[A].m&&($*=f),T+=$}return T-=2235*Math.sin(t),T+=382*Math.sin(v),T+=175*Math.sin(d-l),T+=175*Math.sin(d+l),T+=127*Math.sin(t-a),T-=115*Math.sin(t+a),T/1e6},wt.radiusVector=function(e){var t=wt.meanLongitude(e);t=S.d2R(t);var r=wt.meanElongation(e);r=S.d2R(r);var n=Qt.sunMeanAnomaly(e);n=S.d2R(n);var a=wt.meanAnomaly(e);a=S.d2R(a);var l=wt.argumentOfLatitude(e);l=S.d2R(l);var f=Qt.eccentricity(e),c=(e-2451545)/36525,d=S.m360(119.75+131.849*c);d=S.d2R(d);var m=S.m360(53.09+479264.29*c);m=S.d2R(m);var v=S.m360(313.45+481266.484*c);v=S.d2R(v);var C=b.g_MoonCoefficients1.length;console.assert(b.g_MoonCoefficients2.length===C);for(var T=0,A=0;A<C;A++){var $=b.g_MoonCoefficients2[A].b*Math.cos(b.g_MoonCoefficients1[A].d*r+b.g_MoonCoefficients1[A].m*n+b.g_MoonCoefficients1[A].mdash*a+b.g_MoonCoefficients1[A].f*l);b.g_MoonCoefficients1[A].m&&($*=f),T+=$}return 385000.56+T/1e3},wt.radiusVectorToHorizontalParallax=function(e){return S.r2D(Math.asin(6378.14/e))},wt.horizontalParallaxToRadiusVector=function(e){return 6378.14/Math.sin(S.d2R(e))};var mr={};function Ce(e,t,r,n){this.d=0,this.m=0,this.mdash=0,this.f=0,this.d=e,this.m=t,this.mdash=r,this.f=n}var Hr={};function pt(e,t){this.a=0,this.b=0,this.a=e,this.b=t}var la={};function Or(){}Or.geocentricElongation=function(e,t,r,n){return e=S.d2R(e*15),r=S.d2R(r*15),t=S.d2R(t),n=S.d2R(n),S.r2D(Math.acos(Math.sin(n)*Math.sin(t)+Math.cos(n)*Math.cos(t)*Math.cos(r-e)))},Or.phaseAngle=function(e,t,r){return e=S.d2R(e),S.m360(S.r2D(Math.atan2(r*Math.sin(e),t-r*Math.cos(e))))},Or.illuminatedFraction=function(e){return e=S.d2R(e),(1+Math.cos(e))/2},Or.positionAngle=function(e,t,r,n){return e=S.h2R(e),r=S.h2R(r),t=S.d2R(t),n=S.d2R(n),S.m360(S.r2D(Math.atan2(Math.cos(t)*Math.sin(e-r),Math.sin(t)*Math.cos(n)-Math.cos(t)*Math.sin(n)*Math.cos(e-r))))};var Cs={};function Ta(){}Ta.k=function(e){return 13.4223*(e-2000.05)},Ta.passageThroNode=function(e){var t=e/1342.23,r=t*t,n=r*t,a=n*t,l=S.m360(183.638+331.73735682*e+.0014852*r+209e-8*n-1e-8*a),f=S.m360(17.4006+26.8203725*e+1186e-7*r+6e-8*n),c=S.m360(38.3776+355.52747313*e+.0123499*r+14627e-9*n-69e-9*a),d=S.m360(123.9767-1.44098956*e+.0020608*r+214e-8*n-16e-9*a),m=S.m360(299.75+132.85*t-.009173*r),v=S.m360(d+272.75-2.3*t),C=1-.002516*t-74e-7*r;l=S.d2R(l);var T=2*l,A=T*T;f=S.d2R(f),c=S.d2R(c);var $=2*c;d=S.d2R(d),m=S.d2R(m),v=S.d2R(v);var N=24515651619e-4+27.212220817*e+2762e-7*r+21e-9*n-88e-12*a-.4721*Math.sin(c)-.1649*Math.sin(T)-.0868*Math.sin(T-c)+.0084*Math.sin(T+c)-C*.0083*Math.sin(T-f)-C*.0039*Math.sin(T-f-c)+.0034*Math.sin($)-.0031*Math.sin(T-$)+C*.003*Math.sin(T+f)+C*.0028*Math.sin(f-c)+C*.0026*Math.sin(f)+.0025*Math.sin(A)+.0024*Math.sin(l)+C*.0022*Math.sin(f+c)+.0017*Math.sin(d)+.0014*Math.sin(A-c)+C*5e-4*Math.sin(T+f-c)+C*4e-4*Math.sin(T-f+c)-C*3e-4*Math.sin(T-f*f)+C*3e-4*Math.sin(A-f)+3e-4*Math.sin(m)+3e-4*Math.sin(v);return N};var Ss={};function Ui(){}Ui.k=function(e){return 13.2555*(e-1999.97)},Ui.meanPerigee=function(e){var t=e/1325.55,r=t*t,n=r*t,a=n*t;return 24515346698e-4+27.55454989*e-6691e-7*r-1098e-9*n+52e-10*a},Ui.meanApogee=function(e){return Ui.meanPerigee(e)},Ui.truePerigee=function(e){var t=Ui.meanPerigee(e),r=e/1325.55,n=r*r,a=n*r,l=a*r,f=S.m360(171.9179+335.9106046*e-.0100383*n-1156e-8*a+55e-9*l);f=S.d2R(f);var c=S.m360(347.3477+27.1577721*e-813e-6*n-1e-6*a);c=S.d2R(c);var d=S.m360(316.6109+364.5287911*e-.0125053*n-148e-7*a);d=S.d2R(d);for(var m=b.g_MoonPerigeeApogeeCoefficients1.length,v=0,C=0;C<m;C++)v+=b.g_MoonPerigeeApogeeCoefficients1[C].c*Math.sin(f*b.g_MoonPerigeeApogeeCoefficients1[C].d+c*b.g_MoonPerigeeApogeeCoefficients1[C].m+d*b.g_MoonPerigeeApogeeCoefficients1[C].f+r*b.g_MoonPerigeeApogeeCoefficients1[C].t);return t+v},Ui.trueApogee=function(e){var t=Ui.meanApogee(e),r=e/1325.55,n=r*r,a=n*r,l=a*r,f=S.m360(171.9179+335.9106046*e-.0100383*n-1156e-8*a+55e-9*l);f=S.d2R(f);var c=S.m360(347.3477+27.1577721*e-813e-6*n-1e-6*a);c=S.d2R(c);var d=S.m360(316.6109+364.5287911*e-.0125053*n-148e-7*a);d=S.d2R(d);for(var m=b.g_MoonPerigeeApogeeCoefficients2.length,v=0,C=0;C<m;C++)v+=(b.g_MoonPerigeeApogeeCoefficients2[C].c+r*b.g_MoonPerigeeApogeeCoefficients2[C].t)*Math.sin(f*b.g_MoonPerigeeApogeeCoefficients2[C].d+c*b.g_MoonPerigeeApogeeCoefficients2[C].m+d*b.g_MoonPerigeeApogeeCoefficients2[C].f);return t+v},Ui.perigeeParallax=function(e){var t=e/1325.55,r=t*t,n=r*t,a=n*t,l=S.m360(171.9179+335.9106046*e-.0100383*r-1156e-8*n+55e-9*a);l=S.d2R(l);var f=S.m360(347.3477+27.1577721*e-813e-6*r-1e-6*n);f=S.d2R(f);var c=S.m360(316.6109+364.5287911*e-.0125053*r-148e-7*n);c=S.d2R(c);for(var d=b.g_MoonPerigeeApogeeCoefficients3.length,m=3629.215,v=0;v<d;v++)m+=(b.g_MoonPerigeeApogeeCoefficients3[v].c+t*b.g_MoonPerigeeApogeeCoefficients3[v].t)*Math.cos(l*b.g_MoonPerigeeApogeeCoefficients3[v].d+f*b.g_MoonPerigeeApogeeCoefficients3[v].m+c*b.g_MoonPerigeeApogeeCoefficients3[v].f);return m/3600},Ui.apogeeParallax=function(e){var t=e/1325.55,r=t*t,n=r*t,a=n*t,l=S.m360(171.9179+335.9106046*e-.0100383*r-1156e-8*n+55e-9*a);l=S.d2R(l);var f=S.m360(347.3477+27.1577721*e-813e-6*r-1e-6*n);f=S.d2R(f);var c=S.m360(316.6109+364.5287911*e-.0125053*r-148e-7*n);c=S.d2R(c);for(var d=b.g_MoonPerigeeApogeeCoefficients4.length,m=3245.251,v=0;v<d;v++)m+=(b.g_MoonPerigeeApogeeCoefficients4[v].c+t*b.g_MoonPerigeeApogeeCoefficients4[v].t)*Math.cos(l*b.g_MoonPerigeeApogeeCoefficients4[v].d+f*b.g_MoonPerigeeApogeeCoefficients4[v].m+c*b.g_MoonPerigeeApogeeCoefficients4[v].f);return m/3600};var Gn={};function ce(e,t,r,n,a){this.d=0,this.m=0,this.f=0,this.c=0,this.t=0,this.d=e,this.m=t,this.f=r,this.c=n,this.t=a}var Ni={};function Lr(){}Lr.k=function(e){return 12.3685*(e-2e3)},Lr.meanPhase=function(e){var t=e/1236.85,r=t*t,n=r*t,a=n*t;return 245155009766e-5+29.530588861*e+15437e-8*r-15e-8*n+73e-11*a},Lr.truePhase=function(e){var t=Lr.meanPhase(e),r=e/1236.85,n=r*r,a=n*r,l=a*r,f=1-.002516*r-74e-7*n,c=f*f,d=S.m360(2.5534+29.1053567*e-14e-7*n-11e-8*a);d=S.d2R(d);var m=S.m360(201.5643+385.81693528*e+.0107582*n+1238e-8*a-58e-9*l);m=S.d2R(m);var v=S.m360(160.7108+390.67050284*e-.0016118*n-227e-8*a+1e-8*l);v=S.d2R(v);var C=S.m360(124.7746-1.56375588*e+.0020672*n+215e-8*a);C=S.d2R(C);var T=S.m360(299.77+.107408*e-.009173*n);T=S.d2R(T);var A=S.m360(251.88+.016321*e);A=S.d2R(A);var $=S.m360(251.83+26.651886*e);$=S.d2R($);var N=S.m360(349.42+36.412478*e);N=S.d2R(N);var F=S.m360(84.66+18.206239*e);F=S.d2R(F);var z=S.m360(141.74+53.303771*e);z=S.d2R(z);var Y=S.m360(207.14+2.453732*e);Y=S.d2R(Y);var W=S.m360(154.84+7.30686*e);W=S.d2R(W);var ee=S.m360(34.52+27.261239*e);ee=S.d2R(ee);var ne=S.m360(207.19+.121824*e);ne=S.d2R(ne);var ae=S.m360(291.34+1.844379*e);ae=S.d2R(ae);var de=S.m360(161.72+24.198154*e);de=S.d2R(de);var se=S.m360(239.56+25.513099*e);se=S.d2R(se);var we=S.m360(331.55+3.592518*e);we=S.d2R(we);var fe=Math.floor(e),$e=e-fe;if($e<0&&($e=1+$e),$e)if($e===.25||$e===.75){var ve=-.62801*Math.sin(m)+.17172*f*Math.sin(d)+-.01183*f*Math.sin(m+d)+.00862*Math.sin(2*m)+.00804*Math.sin(2*v)+.00454*f*Math.sin(m-d)+.00204*c*Math.sin(2*d)+-.0018*Math.sin(m-2*v)+-7e-4*Math.sin(m+2*v)+-4e-4*Math.sin(3*m)+-34e-5*f*Math.sin(2*m-d)+32e-5*f*Math.sin(d+2*v)+32e-5*f*Math.sin(d-2*v)+-28e-5*c*Math.sin(m+2*d)+27e-5*f*Math.sin(2*m+d)+-17e-5*Math.sin(C)+-5e-5*Math.sin(m-d-2*v)+4e-5*Math.sin(2*m+2*v)+-4e-5*Math.sin(m+d+2*v)+4e-5*Math.sin(m-2*d)+3e-5*Math.sin(m+d-2*v)+3e-5*Math.sin(3*d)+2e-5*Math.sin(2*m-2*v)+2e-5*Math.sin(m-d+2*v)+-2e-5*Math.sin(3*m+d);t+=ve;var ut=.00306-38e-5*f*Math.cos(d)+26e-5*Math.cos(m)-2e-5*Math.cos(m-d)+2e-5*Math.cos(m+d)+2e-5*Math.cos(2*v);$e===.25?t+=ut:t-=ut}else if($e===.5){var ve=-.40614*Math.sin(m)+.17302*f*Math.sin(d)+.01614*Math.sin(2*m)+.01043*Math.sin(2*v)+.00734*f*Math.sin(m-d)+-.00514*f*Math.sin(m+d)+.00209*c*Math.sin(2*d)+-.00111*Math.sin(m-2*v)+-57e-5*Math.sin(m+2*v)+56e-5*f*Math.sin(2*m+d)+-42e-5*Math.sin(3*m)+42e-5*f*Math.sin(d+2*v)+38e-5*f*Math.sin(d-2*v)+-24e-5*f*Math.sin(2*m-d)+-17e-5*Math.sin(C)+-7e-5*Math.sin(m+2*d)+4e-5*Math.sin(2*m-2*v)+4e-5*Math.sin(3*d)+3e-5*Math.sin(m+d-2*v)+3e-5*Math.sin(2*m+2*v)+-3e-5*Math.sin(m+d+2*v)+3e-5*Math.sin(m-d+2*v)+-2e-5*Math.sin(m-d-2*v)+-2e-5*Math.sin(3*m+d)+2e-5*Math.sin(4*m);t+=ve}else console.assert(!1);else{var ve=-.4072*Math.sin(m)+.17241*f*Math.sin(d)+.01608*Math.sin(2*m)+.01039*Math.sin(2*v)+.00739*f*Math.sin(m-d)+-.00514*f*Math.sin(m+d)+.00208*c*Math.sin(2*d)+-.00111*Math.sin(m-2*v)+-57e-5*Math.sin(m+2*v)+56e-5*f*Math.sin(2*m+d)+-42e-5*Math.sin(3*m)+42e-5*f*Math.sin(d+2*v)+38e-5*f*Math.sin(d-2*v)+-24e-5*f*Math.sin(2*m-d)+-17e-5*Math.sin(C)+-7e-5*Math.sin(m+2*d)+4e-5*Math.sin(2*m-2*v)+4e-5*Math.sin(3*d)+3e-5*Math.sin(m+d-2*v)+3e-5*Math.sin(2*m+2*v)+-3e-5*Math.sin(m+d+2*v)+3e-5*Math.sin(m-d+2*v)+-2e-5*Math.sin(m-d-2*v)+-2e-5*Math.sin(3*m+d)+2e-5*Math.sin(4*m);t+=ve}var ht=325e-6*Math.sin(T)+165e-6*Math.sin(A)+164e-6*Math.sin($)+126e-6*Math.sin(N)+11e-5*Math.sin(F)+62e-6*Math.sin(z)+6e-5*Math.sin(Y)+56e-6*Math.sin(W)+47e-6*Math.sin(ee)+42e-6*Math.sin(ne)+4e-5*Math.sin(ae)+37e-6*Math.sin(de)+35e-6*Math.sin(se)+23e-6*Math.sin(we);return t+=ht,t};var qn={};function vr(){}vr.eclipticLongitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_L0NC.length,f=0,c;for(c=0;c<l;c++)f+=b.g_L0NC[c].a*Math.cos(b.g_L0NC[c].b+b.g_L0NC[c].c*t);var d=b.g_L1NC.length,m=0;for(c=0;c<d;c++)m+=b.g_L1NC[c].a*Math.cos(b.g_L1NC[c].b+b.g_L1NC[c].c*t);var v=b.g_L2NC.length,C=0;for(c=0;c<v;c++)C+=b.g_L2NC[c].a*Math.cos(b.g_L2NC[c].b+b.g_L2NC[c].c*t);var T=b.g_L3NC.length,A=0;for(c=0;c<T;c++)A+=b.g_L3NC[c].a*Math.cos(b.g_L3NC[c].b+b.g_L3NC[c].c*t);var $=b.g_L4NC.length,N=0;for(c=0;c<$;c++)N+=b.g_L4NC[c].a*Math.cos(b.g_L4NC[c].b+b.g_L4NC[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.m360(S.r2D(F)),F},vr.eclipticLatitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_B0NC.length,f=0,c;for(c=0;c<l;c++)f+=b.g_B0NC[c].a*Math.cos(b.g_B0NC[c].b+b.g_B0NC[c].c*t);var d=b.g_B1NC.length,m=0;for(c=0;c<d;c++)m+=b.g_B1NC[c].a*Math.cos(b.g_B1NC[c].b+b.g_B1NC[c].c*t);var v=b.g_B2NC.length,C=0;for(c=0;c<v;c++)C+=b.g_B2NC[c].a*Math.cos(b.g_B2NC[c].b+b.g_B2NC[c].c*t);var T=b.g_B3NC.length,A=0;for(c=0;c<T;c++)A+=b.g_B3NC[c].a*Math.cos(b.g_B3NC[c].b+b.g_B3NC[c].c*t);var $=b.g_B4NC.length,N=0;for(c=0;c<$;c++)N+=b.g_B4NC[c].a*Math.cos(b.g_B4NC[c].b+b.g_B4NC[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.r2D(F),F},vr.radiusVector=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=b.g_R0NC.length,l=0,f;for(f=0;f<a;f++)l+=b.g_R0NC[f].a*Math.cos(b.g_R0NC[f].b+b.g_R0NC[f].c*t);var c=b.g_R1NC.length,d=0;for(f=0;f<c;f++)d+=b.g_R1NC[f].a*Math.cos(b.g_R1NC[f].b+b.g_R1NC[f].c*t);var m=b.g_R2NC.length,v=0;for(f=0;f<m;f++)v+=b.g_R2NC[f].a*Math.cos(b.g_R2NC[f].b+b.g_R2NC[f].c*t);var C=b.g_R3NC.length,T=0;for(f=0;f<C;f++)T+=b.g_R3NC[f].a*Math.cos(b.g_R3NC[f].b+b.g_R3NC[f].c*t);return(l+d*t+v*r+T*n)/1e8};var Ms={};function ui(){}ui.nutationInLongitude=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t,a=297.85036+445267.11148*t-.0019142*r+n/189474;a=S.m360(a);var l=357.52772+35999.05034*t-1603e-7*r-n/3e5;l=S.m360(l);var f=134.96298+477198.867398*t+.0086972*r+n/56250;f=S.m360(f);var c=93.27191+483202.017538*t-.0036825*r+n/327270;c=S.m360(c);var d=125.04452-1934.136261*t+.0020708*r+n/45e4;d=S.m360(d);for(var m=b.g_NuC.length,v=0,C=0;C<m;C++){var T=b.g_NuC[C].d*a+b.g_NuC[C].m*l+b.g_NuC[C].mprime*f+b.g_NuC[C].f*c+b.g_NuC[C].omega*d,A=S.d2R(T);v+=(b.g_NuC[C].sincoeff1+b.g_NuC[C].sincoeff2*t)*Math.sin(A)*1e-4}return v},ui.nutationInObliquity=function(e){var t=(e-2451545)/36525,r=t*t,n=r*t,a=297.85036+445267.11148*t-.0019142*r+n/189474;a=S.m360(a);var l=357.52772+35999.05034*t-1603e-7*r-n/3e5;l=S.m360(l);var f=134.96298+477198.867398*t+.0086972*r+n/56250;f=S.m360(f);var c=93.27191+483202.017538*t-.0036825*r+n/327270;c=S.m360(c);var d=125.04452-1934.136261*t+.0020708*r+n/45e4;d=S.m360(d);for(var m=b.g_NuC.length,v=0,C=0;C<m;C++){var T=b.g_NuC[C].d*a+b.g_NuC[C].m*l+b.g_NuC[C].mprime*f+b.g_NuC[C].f*c+b.g_NuC[C].omega*d,A=S.d2R(T);v+=(b.g_NuC[C].coscoeff1+b.g_NuC[C].coscoeff2*t)*Math.cos(A)*1e-4}return v},ui.nutationInRightAscension=function(e,t,r,n,a){return e=S.h2R(e),t=S.d2R(t),r=S.d2R(r),(Math.cos(r)+Math.sin(r)*Math.sin(e)*Math.tan(t))*n-Math.cos(e)*Math.tan(t)*a},ui.nutationInDeclination=function(e,t,r,n,a){return e=S.h2R(e),t=S.d2R(t),r=S.d2R(r),Math.sin(r)*Math.cos(e)*n+Math.sin(e)*a},ui.meanObliquityOfEcliptic=function(e){var t=(e-2451545)/3652500,r=t*t,n=r*t,a=n*t,l=a*t,f=l*t,c=f*t,d=c*t,m=d*t,v=m*t;return S.dmS2D(23,26,21.448)-S.dmS2D(0,0,4680.93)*t-S.dmS2D(0,0,1.55)*r+S.dmS2D(0,0,1999.25)*n-S.dmS2D(0,0,51.38)*a-S.dmS2D(0,0,249.67)*l-S.dmS2D(0,0,39.05)*f+S.dmS2D(0,0,7.12)*c+S.dmS2D(0,0,27.87)*d+S.dmS2D(0,0,5.79)*m+S.dmS2D(0,0,2.45)*v},ui.trueObliquityOfEcliptic=function(e){return ui.meanObliquityOfEcliptic(e)+S.dmS2D(0,0,ui.nutationInObliquity(e))};var Xn={};function lt(e,t,r,n,a,l,f,c,d){this.d=0,this.m=0,this.mprime=0,this.f=0,this.omega=0,this.sincoeff1=0,this.sincoeff2=0,this.coscoeff1=0,this.coscoeff2=0,this.d=e,this.m=t,this.mprime=r,this.f=n,this.omega=a,this.sincoeff1=l,this.sincoeff2=f,this.coscoeff1=c,this.coscoeff2=d}var Ko={};function eo(){this.lambda=0,this.beta=0,this.semidiameter=0,this.lambda=0,this.beta=0,this.semidiameter=0}var Jo={};function mn(){}mn.equatorial2TopocentricDelta=function(e,t,r,n,a,l,f){var c=$r.rhoSinThetaPrime(a,l),d=$r.rhoCosThetaPrime(a,l),m=kn.apparentGreenwichSiderealTime(f);t=S.d2R(t);var v=Math.cos(t),C=Math.asin(b.g_AAParallax_C1/r),T=S.h2R(m-n/15-e),A=Math.cos(T),$=Math.sin(T),N=new Mt;return N.x=S.r2H(-C*d*$/v),N.y=S.r2D(-C*(c*v-d*A*Math.sin(t))),N},mn.equatorial2Topocentric=function(e,t,r,n,a,l,f){var c=$r.rhoSinThetaPrime(a,l),d=$r.rhoCosThetaPrime(a,l),m=kn.apparentGreenwichSiderealTime(f);t=S.d2R(t);var v=Math.cos(t),C=Math.asin(b.g_AAParallax_C1/r),T=Math.sin(C),A=S.h2R(m-n/15-e),$=Math.cos(A),N=Math.sin(A),F=Math.atan2(-d*T*N,v-d*T*$),z=new Mt;return z.x=S.m24(e+S.r2H(F)),z.y=S.r2D(Math.atan2((Math.sin(t)-c*T)*Math.cos(F),v-d*T*$)),z},mn.ecliptic2Topocentric=function(e,t,r,n,a,l,f,c,d){var m=$r.rhoSinThetaPrime(f,c),v=$r.rhoCosThetaPrime(f,c);e=S.d2R(e),t=S.d2R(t),a=S.d2R(a),l=S.d2R(l),f=S.d2R(f),r=S.d2R(r);var C=Math.sin(a),T=Math.cos(a),A=Math.cos(t),$=Math.sin(t),N=kn.apparentGreenwichSiderealTime(d);N=S.h2R(N);var F=Math.sin(N),z=Math.asin(b.g_AAParallax_C1/n),Y=Math.sin(z),W=Math.cos(e)*A-v*Y*Math.cos(N),ee=new eo;ee.lambda=Math.atan2(Math.sin(e)*A-Y*(m*C+v*T*F),W);var ne=Math.cos(ee.lambda);return ee.beta=Math.atan(ne*($-Y*(m*T-v*C*F))/W),ee.semidiameter=Math.asin(ne*Math.cos(ee.beta)*Math.sin(r)/W),ee.semidiameter=S.r2D(ee.semidiameter),ee.lambda=S.m360(S.r2D(ee.lambda)),ee.beta=S.r2D(ee.beta),ee},mn.parallaxToDistance=function(e){return b.g_AAParallax_C1/Math.sin(S.d2R(e))},mn.distanceToParallax=function(e){var t=Math.asin(b.g_AAParallax_C1/e);return S.r2D(t)};var Zo={};function Ts(){this.DE=0,this.DS=0,this.geometricw1=0,this.geometricw2=0,this.apparentw1=0,this.apparentw2=0,this.p=0,this.DE=0,this.DS=0,this.geometricw1=0,this.geometricw2=0,this.apparentw1=0,this.apparentw2=0,this.p=0}var Qo={};function xs(){}xs.calculate=function(e){var t=new Ts,r=e-24332825e-1,n=r/36525,a=268+.1061*n,l=S.d2R(a),f=64.5-.0164*n,c=S.d2R(f),d=S.m360(17.71+877.90003539*r),m=S.m360(16.838+870.27003539*r),v=Qt.eclipticLongitude(e),C=S.d2R(v),T=Qt.eclipticLatitude(e),A=S.d2R(T),$=Qt.radiusVector(e),N=H.eclipticLongitude(e),F=S.d2R(N),z=H.eclipticLatitude(e),Y=S.d2R(z),W=H.radiusVector(e),ee=W*Math.cos(Y)*Math.cos(F)-$*Math.cos(C),ne=W*Math.cos(Y)*Math.sin(F)-$*Math.sin(C),ae=W*Math.sin(Y)-$*Math.sin(A),de=Math.sqrt(ee*ee+ne*ne+ae*ae);N-=.01299*de/(W*W),F=S.d2R(N),ee=W*Math.cos(Y)*Math.cos(F)-$*Math.cos(C),ne=W*Math.cos(Y)*Math.sin(F)-$*Math.sin(C),ae=W*Math.sin(Y)-$*Math.sin(A),de=Math.sqrt(ee*ee+ne*ne+ae*ae);var se=ui.meanObliquityOfEcliptic(e),we=S.d2R(se),fe=Math.atan2(Math.cos(we)*Math.sin(F)-Math.sin(we)*Math.tan(Y),Math.cos(F)),$e=Math.asin(Math.cos(we)*Math.sin(Y)+Math.sin(we)*Math.cos(Y)*Math.sin(F));t.DS=S.r2D(Math.asin(-Math.sin(c)*Math.sin($e)-Math.cos(c)*Math.cos($e)*Math.cos(l-fe)));var ve=ne*Math.cos(we)-ae*Math.sin(we),ut=ne*Math.sin(we)+ae*Math.cos(we),ht=Math.atan2(ve,ee),Je=S.r2D(ht),Ee=Math.atan2(ut,Math.sqrt(ee*ee+ve*ve)),pi=S.r2D(Ee),Ii=Math.atan2(Math.sin(c)*Math.cos(Ee)*Math.cos(l-ht)-Math.sin(Ee)*Math.cos(c),Math.cos(Ee)*Math.sin(l-ht));t.DE=S.r2D(Math.asin(-Math.sin(c)*Math.sin(Ee)-Math.cos(c)*Math.cos(Ee)*Math.cos(l-ht))),t.geometricw1=S.m360(d-S.r2D(Ii)-5.07033*de),t.geometricw2=S.m360(m-S.r2D(Ii)-5.02626*de);var xi=57.2958*(2*W*de+$*$-W*W-de*de)/(4*W*de);Math.sin(F-C)>0?(t.apparentw1=S.m360(t.geometricw1+xi),t.apparentw2=S.m360(t.geometricw2+xi)):(t.apparentw1=S.m360(t.geometricw1-xi),t.apparentw2=S.m360(t.geometricw2-xi));var ei=ui.nutationInLongitude(e),yi=ui.nutationInObliquity(e);se+=yi/3600,we=S.d2R(se),Je+=.005693*(Math.cos(ht)*Math.cos(C)*Math.cos(we)+Math.sin(ht)*Math.sin(C))/Math.cos(Ee),Je=S.m360(Je),ht=S.d2R(Je),pi+=.005693*(Math.cos(C)*Math.cos(we)*(Math.tan(we)*Math.cos(Ee)-Math.sin(ht)*Math.sin(Ee))+Math.cos(ht)*Math.sin(Ee)*Math.sin(C)),Ee=S.d2R(pi);var Kt=ui.nutationInRightAscension(Je/15,pi,se,ei,yi),Gi=Je+Kt/3600,Pt=S.d2R(Gi),qi=ui.nutationInDeclination(Je/15,pi,se,ei,yi),Di=pi+qi/3600,st=S.d2R(Di);Kt=ui.nutationInRightAscension(a/15,f,se,ei,yi);var Qe=a+Kt/3600,Gt=S.d2R(Qe);qi=ui.nutationInDeclination(a/15,f,se,ei,yi);var St=f+qi/3600,Ar=S.d2R(St);return t.p=S.m360(S.r2D(Math.atan2(Math.cos(Ar)*Math.sin(Gt-Pt),Math.sin(Ar)*Math.cos(st)-Math.cos(Ar)*Math.sin(st)*Math.cos(Gt-Pt)))),t};var el={};function to(){this.DE=0,this.DS=0,this.w=0,this.p=0,this.x=0,this.k=0,this.q=0,this.d=0,this.DE=0,this.DS=0,this.w=0,this.p=0,this.x=0,this.k=0,this.q=0,this.d=0}var tl={};function io(){}io.calculate=function(e){for(var t=new to,r=(e-2451545)/36525,n=352.9065+1.1733*r,a=S.d2R(n),l=63.2818-.00394*r,f=S.d2R(l),c=Qt.eclipticLongitude(e),d=S.d2R(c),m=Qt.eclipticLatitude(e),v=S.d2R(m),C=Qt.radiusVector(e),T=0,A=0,$=0,N=0,F=0,z=!0,Y=0,W=0,ee=0,ne=0,ae=0,de=0;z;){var se=e-A;W=Ie.eclipticLongitude(se),ee=S.d2R(W),ne=Ie.eclipticLatitude(se),ae=S.d2R(ne),de=Ie.radiusVector(se),$=de*Math.cos(ae)*Math.cos(ee)-C*Math.cos(d),N=de*Math.cos(ae)*Math.sin(ee)-C*Math.sin(d),F=de*Math.sin(ae)-C*Math.sin(v),Y=Math.sqrt($*$+N*N+F*F),A=ci.distanceToLightTime(Y),z=Math.abs(A-T)>2e-6,z&&(T=A)}var we=Math.atan2(N,$),fe=S.r2D(we),$e=Math.atan2(F,Math.sqrt($*$+N*N)),ve=S.r2D($e);t.DE=S.r2D(Math.asin(-Math.sin(f)*Math.sin($e)-Math.cos(f)*Math.cos($e)*Math.cos(a-we)));var ut=49.5581+.7721*r,ht=S.d2R(ut),Je=W-.00697/de,Ee=S.d2R(Je),pi=ne-225e-6*(Math.cos(ee-ht)/de),Ii=S.d2R(pi);t.DS=S.r2D(Math.asin(-Math.sin(f)*Math.sin(Ii)-Math.cos(f)*Math.cos(Ii)*Math.cos(a-Ee)));var xi=S.m360(11.504+350.89200025*(e-A-24332825e-1)),ei=ui.meanObliquityOfEcliptic(e),yi=S.d2R(ei),Kt=S.ec2Eq(n,l,ei),Gi=S.h2R(Kt.x),Pt=S.d2R(Kt.y),qi=N*Math.cos(yi)-F*Math.sin(yi),Di=N*Math.sin(yi)+F*Math.cos(yi),st=Math.atan2(qi,$),Qe=S.r2H(st),Gt=Math.atan2(Di,Math.sqrt($*$+qi*qi)),St=S.r2D(Gt),Ar=Math.atan2(Math.sin(Pt)*Math.cos(Gt)*Math.cos(Gi-st)-Math.sin(Gt)*Math.cos(Pt),Math.cos(Gt)*Math.sin(Gi-st));t.w=S.m360(xi-S.r2D(Ar));var sr=ui.nutationInLongitude(e),Oi=ui.nutationInObliquity(e);fe+=.005693*Math.cos(d-we)/Math.cos($e),ve+=.005693*Math.sin(d-we)*Math.sin($e),n+=sr/3600,a=S.d2R(n),fe+=sr/3600,we=S.d2R(fe),ei+=Oi/3600,yi=S.d2R(yi);var Cn=S.ec2Eq(n,l,ei),wr=S.h2R(Cn.x),dr=S.d2R(Cn.y),Xi=S.ec2Eq(fe,ve,ei),pr=S.h2R(Xi.x),Nr=S.d2R(Xi.y);t.p=S.m360(S.r2D(Math.atan2(Math.cos(dr)*Math.sin(wr-pr),Math.sin(dr)*Math.cos(Nr)-Math.cos(dr)*Math.sin(Nr)*Math.cos(wr-pr))));var Sn=hi.geometricEclipticLongitude(e),Mr=hi.geometricEclipticLatitude(e),Tr=S.ec2Eq(Sn,Mr,ei);return t.x=Or.positionAngle(Tr.x,Tr.y,Qe,St),t.d=9.36/Y,t.k=Fi.illuminatedFraction2(de,C,Y),t.q=(1-t.k)*t.d,t};var il={};function ro(){this.p=0,this.b0=0,this.l0=0,this.p=0,this.b0=0,this.l0=0}var rl={};function Ls(){}Ls.calculate=function(e){var t=S.m360((e-2398220)*360/25.38),r=7.25,n=73.6667+1.3958333*(e-2396758)/36525,a=Qt.eclipticLongitude(e),l=Qt.radiusVector(e),f=a+180-S.dmS2D(0,0,20.4898/l),c=f+S.dmS2D(0,0,ui.nutationInLongitude(e)),d=ui.trueObliquityOfEcliptic(e);d=S.d2R(d),f=S.d2R(f),c=S.d2R(c),n=S.d2R(n),r=S.d2R(r),t=S.d2R(t);var m=Math.atan(-Math.cos(f)*Math.tan(d)),v=Math.atan(-Math.cos(f-n)*Math.tan(r)),C=new ro;C.p=S.r2D(m+v),C.b0=S.r2D(Math.asin(Math.sin(f-n)*Math.sin(r)));var T=Math.atan(Math.tan(f-n)*Math.cos(r));return C.l0=S.m360(S.r2D(T-t)),C},Ls.timeOfStartOfRotation=function(e){var t=2398140227e-3+27.2752316*e,r=S.m360(281.96+26.882476*e);return r=S.d2R(r),t+=.1454*Math.sin(r)-.0085*Math.sin(2*r)-.0141*Math.cos(2*r),t};var nl={};function Zr(){}Zr.eclipticLongitude=function(e){for(var t=(e-2451545)/36525,r=34.35+3034.9057*t,n=50.08+1222.1138*t,a=238.96+144.96*t,l=0,f=b.g_PlutoArgumentCoefficients.length,c=0;c<f;c++){var d=b.g_PlutoArgumentCoefficients[c].j*r+b.g_PlutoArgumentCoefficients[c].s*n+b.g_PlutoArgumentCoefficients[c].p*a;d=S.d2R(d),l+=b.g_PlutoLongitudeCoefficients[c].a*Math.sin(d)+b.g_PlutoLongitudeCoefficients[c].b*Math.cos(d)}return l=l/1e6,l+=238.958116+144.96*t,l=S.m360(l),l},Zr.eclipticLatitude=function(e){for(var t=(e-2451545)/36525,r=34.35+3034.9057*t,n=50.08+1222.1138*t,a=238.96+144.96*t,l=0,f=b.g_PlutoArgumentCoefficients.length,c=0;c<f;c++){var d=b.g_PlutoArgumentCoefficients[c].j*r+b.g_PlutoArgumentCoefficients[c].s*n+b.g_PlutoArgumentCoefficients[c].p*a;d=S.d2R(d),l+=b.g_PlutoLatitudeCoefficients[c].a*Math.sin(d)+b.g_PlutoLatitudeCoefficients[c].b*Math.cos(d)}return l=l/1e6,l+=-3.908239,l},Zr.radiusVector=function(e){for(var t=(e-2451545)/36525,r=34.35+3034.9057*t,n=50.08+1222.1138*t,a=238.96+144.96*t,l=0,f=b.g_PlutoArgumentCoefficients.length,c=0;c<f;c++){var d=b.g_PlutoArgumentCoefficients[c].j*r+b.g_PlutoArgumentCoefficients[c].s*n+b.g_PlutoArgumentCoefficients[c].p*a;d=S.d2R(d),l+=b.g_PlutoRadiusCoefficients[c].a*Math.sin(d)+b.g_PlutoRadiusCoefficients[c].b*Math.cos(d)}return l=l/1e7,l+=40.7241346,l};var al={};function Jt(e,t,r){this.j=0,this.s=0,this.p=0,this.j=e,this.s=t,this.p=r}var sl={};function Se(e,t){this.a=0,this.b=0,this.a=e,this.b=t}var ol={};function Yn(){}Yn.precessEquatorial=function(e,t,r,n){var a=(r-2451545)/36525,l=a*a,f=(n-r)/36525,c=f*f,d=c*f;e=S.h2R(e),t=S.d2R(t);var m=(2306.2181+1.39656*a-139e-6*l)*f+(.30188-344e-7*a)*c+.017988*d;m=S.d2R(S.dmS2D(0,0,m));var v=(2306.2181+1.39656*a-138e-6*l)*f+(1.09468+66e-6*a)*c+.018203*d;v=S.d2R(S.dmS2D(0,0,v));var C=(2004.3109-.8533*a-217e-6*l)*f-(.42665+217e-6*a)*c-.041833*d;C=S.d2R(S.dmS2D(0,0,C));var T=Math.cos(t)*Math.sin(e+m),A=Math.cos(C)*Math.cos(t)*Math.cos(e+m)-Math.sin(C)*Math.sin(t),$=Math.sin(C)*Math.cos(t)*Math.cos(e+m)+Math.cos(C)*Math.sin(t),N=new Mt;return N.x=S.r2H(Math.atan2(T,A)+v),N.x<0&&(N.x+=24),N.y=S.r2D(Math.asin($)),N},Yn.precessEquatorialFK4=function(e,t,r,n){var a=(r-24150203135e-4)/36524.2199,l=(n-r)/36524.2199,f=l*l,c=f*l;e=S.h2R(e),t=S.d2R(t);var d=(2304.25+1.396*a)*l+.302*f+.018*c;d=S.d2R(S.dmS2D(0,0,d));var m=.791*f+.001*c;m=S.d2R(S.dmS2D(0,0,m)),m+=d;var v=(2004.682-.853*a)*l-.426*f-.042*c;v=S.d2R(S.dmS2D(0,0,v));var C=Math.cos(t)*Math.sin(e+d),T=Math.cos(v)*Math.cos(t)*Math.cos(e+d)-Math.sin(v)*Math.sin(t),A=Math.sin(v)*Math.cos(t)*Math.cos(e+d)+Math.cos(v)*Math.sin(t),$=new Mt;return $.x=S.r2H(Math.atan2(C,T)+m),$.x<0&&($.x+=24),$.y=S.r2D(Math.asin(A)),$},Yn.precessEcliptic=function(e,t,r,n){var a=(r-2451545)/36525,l=a*a,f=(n-r)/36525,c=f*f,d=c*f;e=S.d2R(e),t=S.d2R(t);var m=(47.0029-.06603*a+598e-6*l)*f+(-.03302+598e-6*a)*c+6e-5*d;m=S.d2R(S.dmS2D(0,0,m));var v=174.876384*3600+3289.4789*a+.60622*l-(869.8089+.50491*a)*f+.03536*c;v=S.d2R(S.dmS2D(0,0,v));var C=(5029.0966+2.22226*a-42e-6*l)*f+(1.11113-42e-6*a)*c-6e-6*d;C=S.d2R(S.dmS2D(0,0,C));var T=Math.cos(m)*Math.cos(t)*Math.sin(v-e)-Math.sin(m)*Math.sin(t),A=Math.cos(t)*Math.cos(v-e),$=Math.cos(m)*Math.sin(t)+Math.sin(m)*Math.cos(t)*Math.sin(v-e),N=new Mt;return N.x=S.r2D(C+v-Math.atan2(T,A)),N.x<0&&(N.x+=360),N.y=S.r2D(Math.asin($)),N},Yn.equatorialPMToEcliptic=function(e,t,r,n,a,l){l=S.d2R(l),e=S.h2R(e),t=S.d2R(t),r=S.d2R(r);var f=Math.cos(r),c=Math.sin(l),d=new Mt;return d.x=(a*c*Math.cos(e)+n*Math.cos(t)*(Math.cos(l)*Math.cos(t)+c*Math.sin(t)*Math.sin(e)))/(f*f),d.y=(a*(Math.cos(l)*Math.cos(t)+c*Math.sin(t)*Math.sin(e))-n*c*Math.cos(e)*Math.cos(t))/f,d},Yn.adjustPositionUsingUniformProperMotion=function(e,t,r,n,a){var l=new Mt;return l.x=t+n*e/3600,l.y=r+a*e/3600,l},Yn.adjustPositionUsingMotionInSpace=function(e,t,r,n,a,l,f){t/=977792,l/=13751,f/=206265,n=S.h2R(n),a=S.d2R(a);var c=e*Math.cos(a)*Math.cos(n),d=e*Math.cos(a)*Math.sin(n),m=e*Math.sin(a),v=c/e*t-m*f*Math.cos(n)-d*l,C=d/e*t-m*f*Math.sin(n)+c*l,T=m/e*t+e*f*Math.cos(a);c+=r*v,d+=r*C,m+=r*T;var A=new Mt;return A.x=S.r2H(Math.atan2(d,c)),A.x<0&&(A.x+=24),A.y=S.r2D(Math.atan2(m,Math.sqrt(c*c+d*d))),A};var ll={};function no(){this.bValid=!1,this.rise=0,this.transit=0,this.set=0,this.bValid=!1,this.rise=0,this.transit=0,this.set=0}var ul={};function ks(){}ks.rise=function(e,t,r,n,a,l,f,c,d,m){var v=new no;v.bValid=!1;var C=kn.apparentGreenwichSiderealTime(e);C*=15;var T=gr.deltaT(e),A=S.d2R(a),$=S.d2R(d),N=S.d2R(m),F=(Math.sin(N)-Math.sin($)*Math.sin(A))/(Math.cos($)*Math.cos(A));if(F>1||F<-1)return v;var z=Math.acos(F);z=S.r2D(z);var Y=(n*15+c-C)/360,W=Y-z/360,ee=Y+z/360;Y>1?Y-=1:Y<0&&(Y+=1),W>1?W-=1:W<0&&(W+=1),ee>1?ee-=1:ee<0&&(ee+=1);for(var ne=0;ne<2;ne++){var ae=C+360.985647*W;ae=S.m360(ae);var de=W+T/86400,se=x.interpolate(de,t,n,l),we=x.interpolate(de,r,a,f),fe=ae-c-se*15,$e=S.eq2H(fe/15,we,d),ve=($e.y-m)/(360*Math.cos(S.d2R(we))*Math.cos($)*Math.sin(S.d2R(fe)));W+=ve,ae=C+360.985647*Y,ae=S.m360(ae),de=Y+T/86400,se=x.interpolate(de,t,n,l),fe=ae-c-se*15,fe<-180&&(fe+=360),ve=-fe/360,Y+=ve,ae=C+360.985647*ee,ae=S.m360(ae),de=ee+T/86400,se=x.interpolate(de,t,n,l),we=x.interpolate(de,r,a,f),fe=ae-c-se*15,$e=S.eq2H(fe/15,we,d),ve=($e.y-m)/(360*Math.cos(S.d2R(we))*Math.cos($)*Math.sin(S.d2R(fe))),ee+=ve}return v.bValid=!0,v.rise=W*24,v.set=ee*24,v.transit=Y*24,v};var cl={};function Er(){}Er.eclipticLongitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_L0SaturnCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_L0SaturnCoefficients[d].a*Math.cos(b.g_L0SaturnCoefficients[d].b+b.g_L0SaturnCoefficients[d].c*t);var m=b.g_L1SaturnCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_L1SaturnCoefficients[d].a*Math.cos(b.g_L1SaturnCoefficients[d].b+b.g_L1SaturnCoefficients[d].c*t);var C=b.g_L2SaturnCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_L2SaturnCoefficients[d].a*Math.cos(b.g_L2SaturnCoefficients[d].b+b.g_L2SaturnCoefficients[d].c*t);var A=b.g_L3SaturnCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_L3SaturnCoefficients[d].a*Math.cos(b.g_L3SaturnCoefficients[d].b+b.g_L3SaturnCoefficients[d].c*t);var N=b.g_L4SaturnCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_L4SaturnCoefficients[d].a*Math.cos(b.g_L4SaturnCoefficients[d].b+b.g_L4SaturnCoefficients[d].c*t);var z=b.g_L5SaturnCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_L5SaturnCoefficients[d].a*Math.cos(b.g_L5SaturnCoefficients[d].b+b.g_L5SaturnCoefficients[d].c*t);var W=(c+v*t+T*r+$*n+F*a+Y*l)/1e8;return W=S.m360(S.r2D(W)),W},Er.eclipticLatitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_B0SaturnCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_B0SaturnCoefficients[d].a*Math.cos(b.g_B0SaturnCoefficients[d].b+b.g_B0SaturnCoefficients[d].c*t);var m=b.g_B1SaturnCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_B1SaturnCoefficients[d].a*Math.cos(b.g_B1SaturnCoefficients[d].b+b.g_B1SaturnCoefficients[d].c*t);var C=b.g_B2SaturnCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_B2SaturnCoefficients[d].a*Math.cos(b.g_B2SaturnCoefficients[d].b+b.g_B2SaturnCoefficients[d].c*t);var A=b.g_B3SaturnCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_B3SaturnCoefficients[d].a*Math.cos(b.g_B3SaturnCoefficients[d].b+b.g_B3SaturnCoefficients[d].c*t);var N=b.g_B4SaturnCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_B4SaturnCoefficients[d].a*Math.cos(b.g_B4SaturnCoefficients[d].b+b.g_B4SaturnCoefficients[d].c*t);var z=b.g_B5SaturnCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_B5SaturnCoefficients[d].a*Math.cos(b.g_B5SaturnCoefficients[d].b+b.g_B5SaturnCoefficients[d].c*t);var W=(c+v*t+T*r+$*n+F*a+Y*l)/1e8;return W=S.r2D(W),W},Er.radiusVector=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_R0SaturnCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_R0SaturnCoefficients[d].a*Math.cos(b.g_R0SaturnCoefficients[d].b+b.g_R0SaturnCoefficients[d].c*t);var m=b.g_R1SaturnCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_R1SaturnCoefficients[d].a*Math.cos(b.g_R1SaturnCoefficients[d].b+b.g_R1SaturnCoefficients[d].c*t);var C=b.g_R2SaturnCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_R2SaturnCoefficients[d].a*Math.cos(b.g_R2SaturnCoefficients[d].b+b.g_R2SaturnCoefficients[d].c*t);var A=b.g_R3SaturnCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_R3SaturnCoefficients[d].a*Math.cos(b.g_R3SaturnCoefficients[d].b+b.g_R3SaturnCoefficients[d].c*t);var N=b.g_R4SaturnCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_R4SaturnCoefficients[d].a*Math.cos(b.g_R4SaturnCoefficients[d].b+b.g_R4SaturnCoefficients[d].c*t);var z=b.g_R5SaturnCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_R5SaturnCoefficients[d].a*Math.cos(b.g_R5SaturnCoefficients[d].b+b.g_R5SaturnCoefficients[d].c*t);return(c+v*t+T*r+$*n+F*a+Y*l)/1e8};var hl={};function ao(){this.b=0,this.bdash=0,this.p=0,this.a=0,this.b=0,this.deltaU=0,this.b=0,this.bdash=0,this.p=0,this.a=0,this.b=0,this.deltaU=0}var fl={};function so(){}so.calculate=function(e){var t=new ao,r=(e-2451545)/36525,n=r*r,a=28.075216-.012998*r+4e-6*n,l=S.d2R(a),f=169.50847+1.394681*r+412e-6*n,c=S.d2R(f),d=Qt.eclipticLongitude(e),m=Qt.eclipticLatitude(e);d+=Qi.correctionInLongitude(d,m,e);var v=S.d2R(d);m+=Qi.correctionInLatitude(d,e);for(var C=S.d2R(m),T=Qt.radiusVector(e),A=9,$=0,N=ci.distanceToLightTime(A),F=e-N,z=!0,Y=0,W=0,ee=0,ne=0,ae=0,de=0;z;){ne=Er.eclipticLongitude(F),ae=Er.eclipticLatitude(F),ne+=Qi.correctionInLongitude(ne,ae,F),ae+=Qi.correctionInLatitude(ne,F);var se=S.d2R(ne),we=S.d2R(ae);de=Er.radiusVector(F),Y=de*Math.cos(we)*Math.cos(se)-T*Math.cos(v),W=de*Math.cos(we)*Math.sin(se)-T*Math.sin(v),ee=de*Math.sin(we)-T*Math.sin(C),A=Math.sqrt(Y*Y+W*W+ee*ee),N=ci.distanceToLightTime(A),z=Math.abs(N-$)>2e-6,z&&(F=e-N,$=N)}var fe=Math.atan2(W,Y),$e=Math.atan2(ee,Math.sqrt(Y*Y+W*W));t.b=Math.asin(Math.sin(l)*Math.cos($e)*Math.sin(fe-c)-Math.cos(l)*Math.sin($e)),t.a=375.35/A,t.b=t.a*Math.sin(Math.abs(t.b)),t.b=S.r2D(t.b);var ve=113.6655+.8771*r,ut=S.d2R(ve),ht=ne-.01759/de,Je=S.d2R(ht),Ee=ae-764e-6*Math.cos(Je-ut)/de,pi=S.d2R(Ee);t.bdash=S.r2D(Math.asin(Math.sin(l)*Math.cos(pi)*Math.sin(Je-c)-Math.cos(l)*Math.sin(pi)));var Ii=Math.atan2(Math.sin(l)*Math.sin(pi)+Math.cos(l)*Math.cos(pi)*Math.sin(Je-c),Math.cos(pi)*Math.cos(Je-c)),xi=Math.atan2(Math.sin(l)*Math.sin($e)+Math.cos(l)*Math.cos($e)*Math.sin(fe-c),Math.cos($e)*Math.cos(fe-c));t.deltaU=S.r2D(Math.abs(Ii-xi));var ei=ui.trueObliquityOfEcliptic(e),yi=ui.nutationInLongitude(e),Kt=f-90,Gi=90-a;fe+=S.d2R(.005693*Math.cos(v-fe)/Math.cos($e)),$e+=S.d2R(.005693*Math.sin(v-fe)*Math.sin($e)),fe=S.r2D(fe),fe+=yi/3600,fe=S.m360(fe),Kt+=yi/3600,Kt=S.m360(Kt),$e=S.r2D($e);var Pt=S.ec2Eq(fe,$e,ei),qi=S.h2R(Pt.x),Di=S.d2R(Pt.y),st=S.ec2Eq(Kt,Gi,ei),Qe=S.h2R(st.x),Gt=S.d2R(st.y);return t.p=S.r2D(Math.atan2(Math.cos(Gt)*Math.sin(Qe-qi),Math.sin(Gt)*Math.cos(Di)-Math.cos(Gt)*Math.sin(Di)*Math.cos(Qe-qi))),t};var dl={};function kn(){}kn.meanGreenwichSiderealTime=function(e){var t=new li;t.setJD(e,li.afterPapalReformJD(e));var r=t.get(),n=i.truncate(r[0]),a=i.truncate(r[1]),l=i.truncate(r[2]),f=i.truncate(r[3]),c=i.truncate(r[4]),d=r[5];t.set(n,a,l,0,0,0,t.inGregorianCalendar());var m=t.julian(),v=(m-2451545)/36525,C=v*v,T=C*v,A=100.46061837+36000.770053608*v+387933e-9*C-T/3871e4;return A+=(f*15+c*.25+d*.00416666666666667)*1.00273790935,A=S.d2H(A),S.m24(A)},kn.apparentGreenwichSiderealTime=function(e){var t=ui.meanObliquityOfEcliptic(e),r=t+ui.nutationInObliquity(e)/3600,n=ui.nutationInLongitude(e),a=kn.meanGreenwichSiderealTime(e)+n*Math.cos(S.d2R(r))/54e3;return S.m24(a)};var _l={};function xa(){}xa.combinedMagnitude=function(e,t){var r=.4*(t-e);return t-2.5*ye.log10(Math.pow(10,r)+1)},xa.combinedMagnitude2=function(e,t){for(var r=0,n=0;n<e;n++)r+=Math.pow(10,-.4*t[n]);return-2.5*ye.log10(r)},xa.brightnessRatio=function(e,t){var r=.4*(t-e);return Math.pow(10,r)},xa.magnitudeDifference=function(e){return 2.5*ye.log10(e)};var gl={};function hi(){}hi.geometricEclipticLongitude=function(e){return S.m360(Qt.eclipticLongitude(e)+180)},hi.geometricEclipticLatitude=function(e){return-Qt.eclipticLatitude(e)},hi.geometricEclipticLongitudeJ2000=function(e){return S.m360(Qt.eclipticLongitudeJ2000(e)+180)},hi.geometricEclipticLatitudeJ2000=function(e){return-Qt.eclipticLatitudeJ2000(e)},hi.geometricFK5EclipticLongitude=function(e){var t=hi.geometricEclipticLongitude(e),r=hi.geometricEclipticLatitude(e);return t+=Qi.correctionInLongitude(t,r,e),t},hi.geometricFK5EclipticLatitude=function(e){var t=hi.geometricEclipticLongitude(e),r=hi.geometricEclipticLatitude(e),n=Qi.correctionInLatitude(t,e);return r+=n,r},hi.apparentEclipticLongitude=function(e){var t=hi.geometricFK5EclipticLongitude(e);t+=S.dmS2D(0,0,ui.nutationInLongitude(e));var r=Qt.radiusVector(e);return t-=S.dmS2D(0,0,20.4898/r),t},hi.apparentEclipticLatitude=function(e){return hi.geometricFK5EclipticLatitude(e)},hi.eclipticRectangularCoordinatesMeanEquinox=function(e){var t=S.d2R(hi.geometricFK5EclipticLongitude(e)),r=S.d2R(hi.geometricFK5EclipticLatitude(e)),n=Qt.radiusVector(e),a=S.d2R(ui.meanObliquityOfEcliptic(e)),l=new _t;return l.x=n*Math.cos(r)*Math.cos(t),l.y=n*(Math.cos(r)*Math.sin(t)*Math.cos(a)-Math.sin(r)*Math.sin(a)),l.z=n*(Math.cos(r)*Math.sin(t)*Math.sin(a)+Math.sin(r)*Math.cos(a)),l},hi.eclipticRectangularCoordinatesJ2000=function(e){var t=hi.geometricEclipticLongitudeJ2000(e);t=S.d2R(t);var r=hi.geometricEclipticLatitudeJ2000(e);r=S.d2R(r);var n=Qt.radiusVector(e),a=new _t,l=Math.cos(r);return a.x=n*l*Math.cos(t),a.y=n*l*Math.sin(t),a.z=n*Math.sin(r),a},hi.equatorialRectangularCoordinatesJ2000=function(e){var t=hi.eclipticRectangularCoordinatesJ2000(e);return t=Qi.convertVSOPToFK5J2000(t),t},hi.equatorialRectangularCoordinatesB1950=function(e){var t=hi.eclipticRectangularCoordinatesJ2000(e);return t=Qi.convertVSOPToFK5B1950(t),t},hi.equatorialRectangularCoordinatesAnyEquinox=function(e,t){var r=hi.equatorialRectangularCoordinatesJ2000(e);return r=Qi.convertVSOPToFK5AnyEquinox(r,t),r};var ml={};function Qr(){}Qr.eclipticLongitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_L0UranusCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_L0UranusCoefficients[c].a*Math.cos(b.g_L0UranusCoefficients[c].b+b.g_L0UranusCoefficients[c].c*t);var d=b.g_L1UranusCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_L1UranusCoefficients[c].a*Math.cos(b.g_L1UranusCoefficients[c].b+b.g_L1UranusCoefficients[c].c*t);var v=b.g_L2UranusCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_L2UranusCoefficients[c].a*Math.cos(b.g_L2UranusCoefficients[c].b+b.g_L2UranusCoefficients[c].c*t);var T=b.g_L3UranusCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_L3UranusCoefficients[c].a*Math.cos(b.g_L3UranusCoefficients[c].b+b.g_L3UranusCoefficients[c].c*t);var $=b.g_L4UranusCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_L4UranusCoefficients[c].a*Math.cos(b.g_L4UranusCoefficients[c].b+b.g_L4UranusCoefficients[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.m360(S.r2D(F)),F},Qr.eclipticLatitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_B0UranusCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_B0UranusCoefficients[c].a*Math.cos(b.g_B0UranusCoefficients[c].b+b.g_B0UranusCoefficients[c].c*t);var d=b.g_B1UranusCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_B1UranusCoefficients[c].a*Math.cos(b.g_B1UranusCoefficients[c].b+b.g_B1UranusCoefficients[c].c*t);var v=b.g_B2UranusCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_B2UranusCoefficients[c].a*Math.cos(b.g_B2UranusCoefficients[c].b+b.g_B2UranusCoefficients[c].c*t);var T=b.g_B3UranusCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_B3UranusCoefficients[c].a*Math.cos(b.g_B3UranusCoefficients[c].b+b.g_B3UranusCoefficients[c].c*t);var $=b.g_B4UranusCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_B4UranusCoefficients[c].a*Math.cos(b.g_B4UranusCoefficients[c].b+b.g_B4UranusCoefficients[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.r2D(F),F},Qr.radiusVector=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_R0UranusCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_R0UranusCoefficients[c].a*Math.cos(b.g_R0UranusCoefficients[c].b+b.g_R0UranusCoefficients[c].c*t);var d=b.g_R1UranusCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_R1UranusCoefficients[c].a*Math.cos(b.g_R1UranusCoefficients[c].b+b.g_R1UranusCoefficients[c].c*t);var v=b.g_R2UranusCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_R2UranusCoefficients[c].a*Math.cos(b.g_R2UranusCoefficients[c].b+b.g_R2UranusCoefficients[c].c*t);var T=b.g_R3UranusCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_R3UranusCoefficients[c].a*Math.cos(b.g_R3UranusCoefficients[c].b+b.g_R3UranusCoefficients[c].c*t);var $=b.g_R4UranusCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_R4UranusCoefficients[c].a*Math.cos(b.g_R4UranusCoefficients[c].b+b.g_R4UranusCoefficients[c].c*t);return(f+m*t+C*r+A*n+N*a)/1e8};var pl={};function tn(){}tn.eclipticLongitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=a*t,f=b.g_L0VenusCoefficients.length,c=0,d;for(d=0;d<f;d++)c+=b.g_L0VenusCoefficients[d].a*Math.cos(b.g_L0VenusCoefficients[d].b+b.g_L0VenusCoefficients[d].c*t);var m=b.g_L1VenusCoefficients.length,v=0;for(d=0;d<m;d++)v+=b.g_L1VenusCoefficients[d].a*Math.cos(b.g_L1VenusCoefficients[d].b+b.g_L1VenusCoefficients[d].c*t);var C=b.g_L2VenusCoefficients.length,T=0;for(d=0;d<C;d++)T+=b.g_L2VenusCoefficients[d].a*Math.cos(b.g_L2VenusCoefficients[d].b+b.g_L2VenusCoefficients[d].c*t);var A=b.g_L3VenusCoefficients.length,$=0;for(d=0;d<A;d++)$+=b.g_L3VenusCoefficients[d].a*Math.cos(b.g_L3VenusCoefficients[d].b+b.g_L3VenusCoefficients[d].c*t);var N=b.g_L4VenusCoefficients.length,F=0;for(d=0;d<N;d++)F+=b.g_L4VenusCoefficients[d].a*Math.cos(b.g_L4VenusCoefficients[d].b+b.g_L4VenusCoefficients[d].c*t);var z=b.g_L5VenusCoefficients.length,Y=0;for(d=0;d<z;d++)Y+=b.g_L5VenusCoefficients[d].a*Math.cos(b.g_L5VenusCoefficients[d].b+b.g_L5VenusCoefficients[d].c*t);var W=(c+v*t+T*r+$*n+F*a+Y*l)/1e8;return W=S.m360(S.r2D(W)),W},tn.eclipticLatitude=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_B0VenusCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_B0VenusCoefficients[c].a*Math.cos(b.g_B0VenusCoefficients[c].b+b.g_B0VenusCoefficients[c].c*t);var d=b.g_B1VenusCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_B1VenusCoefficients[c].a*Math.cos(b.g_B1VenusCoefficients[c].b+b.g_B1VenusCoefficients[c].c*t);var v=b.g_B2VenusCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_B2VenusCoefficients[c].a*Math.cos(b.g_B2VenusCoefficients[c].b+b.g_B2VenusCoefficients[c].c*t);var T=b.g_B3VenusCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_B3VenusCoefficients[c].a*Math.cos(b.g_B3VenusCoefficients[c].b+b.g_B3VenusCoefficients[c].c*t);var $=b.g_B4VenusCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_B4VenusCoefficients[c].a*Math.cos(b.g_B4VenusCoefficients[c].b+b.g_B4VenusCoefficients[c].c*t);var F=(f+m*t+C*r+A*n+N*a)/1e8;return F=S.r2D(F),F},tn.radiusVector=function(e){var t=(e-2451545)/365250,r=t*t,n=r*t,a=n*t,l=b.g_R0VenusCoefficients.length,f=0,c;for(c=0;c<l;c++)f+=b.g_R0VenusCoefficients[c].a*Math.cos(b.g_R0VenusCoefficients[c].b+b.g_R0VenusCoefficients[c].c*t);var d=b.g_R1VenusCoefficients.length,m=0;for(c=0;c<d;c++)m+=b.g_R1VenusCoefficients[c].a*Math.cos(b.g_R1VenusCoefficients[c].b+b.g_R1VenusCoefficients[c].c*t);var v=b.g_R2VenusCoefficients.length,C=0;for(c=0;c<v;c++)C+=b.g_R2VenusCoefficients[c].a*Math.cos(b.g_R2VenusCoefficients[c].b+b.g_R2VenusCoefficients[c].c*t);var T=b.g_R3VenusCoefficients.length,A=0;for(c=0;c<T;c++)A+=b.g_R3VenusCoefficients[c].a*Math.cos(b.g_R3VenusCoefficients[c].b+b.g_R3VenusCoefficients[c].c*t);var $=b.g_R4VenusCoefficients.length,N=0;for(c=0;c<$;c++)N+=b.g_R4VenusCoefficients[c].a*Math.cos(b.g_R4VenusCoefficients[c].b+b.g_R4VenusCoefficients[c].c*t);return(f+m*t+C*r+A*n+N*a)/1e8};var vl={};function oo(e,t,r,n,a){this.fps=0,this.width=0,this.height=0,this.totalFrames=0,this.waitDownload=!1,this.format="image/jpeg",this.width=e,this.height=t,this.fps=r,this.format=n,this.waitDownload=a}var wl={};function lo(){this.bZero=0,this.bScale=1,this.containsBlanks=!1,this.blankValue=Number.MIN_VALUE,this.maxVal=Number.MIN_VALUE,this.minVal=Number.MAX_VALUE,this.upperCut=Number.MIN_VALUE,this.lowerCut=Number.MAX_VALUE,this.transparentBlack=!1,this.colorMapName="viridis",this.scaleType=0,this.onMainImageLoaded=null,this.mainImageLoadedEventHasFired=!1}var bl={_fireMainImageLoaded:function(e){this.onMainImageLoaded!=null&&!this.mainImageLoadedEventHasFired&&(this.mainImageLoadedEventHasFired=!0,this.onMainImageLoaded(e))}};function ja(e){this._properties={},this._catalogColumnInfo=null,this._catalogSpreadSheetLayer=new js,this._downloadComplete=!1,this.dataset=e,this._datasetName=e.get_name(),this._url=e.get_url(),this._url.toLowerCase().indexOf("norder")>-1&&(this._url=this._url.substring(0,this._url.toLowerCase().indexOf("norder"))),this._url+="properties",this._download()}var yl={get_properties:function(){return this._properties},get_catalogSpreadSheetLayer:function(){return this._catalogSpreadSheetLayer},set_catalogSpreadSheetLayer:function(e){return this._catalogSpreadSheetLayer=e,e},get_catalogColumnInfo:function(){return this._catalogColumnInfo},set_catalogColumnInfo:function(e){return this._catalogColumnInfo=e,e},get_downloadComplete:function(){return this._downloadComplete},_download:function(){this._webFile=new fr(this._url),this._webFile.onStateChange=i.bind("_onPropertiesDownloadComplete",this),this._webFile.send()},_onPropertiesDownloadComplete:function(){if(this._webFile.get_state()===1)if(this._parseProperties(this._webFile.getText()),i.keyExists(this.get_properties(),"dataproduct_type")&&this.get_properties().dataproduct_type.toLowerCase()==="catalog")this._catalogColumnInfo=Jn.loadFromUrl(i.replaceString(this._url,"/properties","/metadata.xml"),i.bind("_onCatalogMetadataDownloadComplete",this));else{if(i.keyExists(this.get_properties(),"hips_data_range")){var e=this.get_properties().hips_data_range;this.dataset.get_fitsProperties().minVal=parseFloat(e.split(" ")[0]),this.dataset.get_fitsProperties().maxVal=parseFloat(e.split(" ")[1]),this.dataset.get_fitsProperties().lowerCut=this.dataset.get_fitsProperties().minVal,this.dataset.get_fitsProperties().upperCut=this.dataset.get_fitsProperties().maxVal}if(i.keyExists(this.get_properties(),"hips_pixel_cut")){var t=this.get_properties().hips_pixel_cut;this.dataset.get_fitsProperties().lowerCut=parseFloat(t.split(" ")[0]),this.dataset.get_fitsProperties().upperCut=parseFloat(t.split(" ")[1]),i.keyExists(this.get_properties(),"hips_data_range")||(this.dataset.get_fitsProperties().minVal=this.dataset.get_fitsProperties().lowerCut,this.dataset.get_fitsProperties().maxVal=this.dataset.get_fitsProperties().upperCut)}this._downloadComplete=!0,this._onDownloadComplete!=null&&this._onDownloadComplete()}},_onCatalogMetadataDownloadComplete:function(){this._catalogSpreadSheetLayer.useHeadersFromVoTable(this._catalogColumnInfo),this._catalogSpreadSheetLayer.set_name(this._datasetName),this._catalogSpreadSheetLayer.id=er.createFrom(this._datasetName),k.addSpreadsheetLayer(this.get_catalogSpreadSheetLayer(),"Sky"),this._downloadComplete=!0,this._onDownloadComplete!=null&&this._onDownloadComplete()},setDownloadCompleteListener:function(e){this._onDownloadComplete=e},_parseProperties:function(e){for(var t=e.split(`
`),r=i.enumerate(t);r.moveNext();){var n=r.current;if(!i.whitespace(n)&&!i.startsWith(n,"#")){var a=n.split("=");if(a.length===2){var l=i.trim(a[0]),f=i.trim(a[1]);!i.whitespace(l)&&!i.whitespace(f)&&(this.get_properties()[l]=f)}}}}};function Ft(){}Ft._mulsign=function(e,t){return Ft._sign(t)*e},Ft._isnan=function(e){return e!==e},Ft._isinf=function(e){return Math.abs(e)===Number.POSITIVE_INFINITY},Ft._sign=function(e){return e?e>0?1:-1:0},Ft._atanhelper=function(e){var t=e*e,r=-188796008463073e-19;return r=r*t+.000209850076645817,r=r*t+-.00110611831486672,r=r*t+.00370026744188713,r=r*t+-.00889896195887655,r=r*t+.0165993297735292,r=r*t+-.0254517624932313,r=r*t+.0337852580001353,r=r*t+-.0407629191276837,r=r*t+.0466667150077841,r=r*t+-.0523674852303482,r=r*t+.0587666392926674,r=r*t+-.0666573579361081,r=r*t+.076921953831177,r=r*t+-.090908995008245,r=r*t+.111111105648261,r=r*t+-.142857142667713,r=r*t+.199999999996591,r=r*t+-.333333333333311,r*t*e+e},Ft._atan2k=function(e,t){var r=0;if(t<0&&(t=-t,r=-2),e>t){var n=t;t=e,e=-n,r+=1}return Ft._atanhelper(e/t)+r*(Math.PI/2)},Ft.atan2=function(e,t){var r=Ft._atan2k(Math.abs(e),t);return r=Ft._mulsign(r,t),(Ft._isinf(t)||!t)&&(r=Math.PI/2-(Ft._isinf(t)?Ft._sign(t)*(Math.PI/2):0)),Ft._isinf(e)&&(r=Math.PI/2-(Ft._isinf(t)?Ft._sign(t)*(Math.PI*1/4):0)),e||(r=Ft._sign(t)===-1?Math.PI:0),Ft._isnan(t)||Ft._isnan(e)?Number.NaN:Ft._mulsign(r,e)},Ft.asin=function(e){return Ft._mulsign(Ft._atan2k(Math.abs(e),Math.sqrt((1+e)*(1-e))),e)},Ft.acos=function(e){return Ft._mulsign(Ft._atan2k(Math.sqrt((1+e)*(1-e)),Math.abs(e)),e)+(e<0?Math.PI:0)},Ft.atan=function(e){var t=0;e<0&&(e=-e,t=2),e>1&&(e=1/e,t|=1);var r=Ft._atanhelper(e);return t&1&&(r=1.5707963267949-r),t&2&&(r=-r),r},Ft._sincoshelper=function(e){var t=e*e,r=-797255955009038e-32;return r=r*t+281009972710863e-29,r=r*t-764712219118159e-27,r=r*t+160590430605665e-24,r=r*t-250521083763502e-22,r=r*t+275573192239199e-20,r=r*t-.000198412698412696,r=r*t+.00833333333333333,r=r*t-.166666666666667,t*r*e+e},Ft.sin=function(e){var t=e*Ft._m_1_PI,r=Math.floor(t<0?t-.5:t+.5),n=4*r;return e-=n*Ft._pI4_A,e-=n*Ft._pI4_B,e-=n*Ft._pI4_C,r&1&&(e=-e),Ft._sincoshelper(e)},Ft.cos=function(e){var t=e*Ft._m_1_PI-.5,r=1+2*Math.floor(t<0?t-.5:t+.5),n=2*r;return e-=n*Ft._pI4_A,e-=n*Ft._pI4_B,e-=n*Ft._pI4_C,r&2||(e=-e),Ft._sincoshelper(e)};var Cl={};function Gr(){}var Sl={};function La(){this.ix=0,this.iy=0,this.face=0}La.create=function(e,t,r){var n=new La;return n.ix=e,n.iy=t,n.face=r,n};var Ml={};function rn(){}rn.check=function(e,t){if(!e)throw new Error(t)},rn.isqrt=function(e){var t=Math.sqrt(e+.5);return e<1<<50||(t*t>e?--t:(t+1)*(t+1)<=e&&++t),t},rn.cosdist_zphi=function(e,t,r,n){return e*r+Ft.cos(t-n)*Math.sqrt((1-e*e)*(1-r*r))},rn.fmodulo=function(e,t){if(e>=0)return e<t?e:e%t;var r=e%t+t;return r===t?0:r};var Tl={};function ka(){this.z=0,this.phi=0,this.sth=0,this.have_sth=!1}ka.create=function(e){var t=new ka,r=1/e.length();return t.z=e.z*r,t.phi=Ft.atan2(e.y,e.x),Math.abs(t.z)>.99&&(t.sth=Math.sqrt(e.x*e.x+e.y*e.y)*r,t.have_sth=!0),t};var xl={toVec3:function(){var e;this.have_sth?e=this.sth:e=Math.sqrt((1-this.z)*(1+this.z));var t=e*Ft.cos(this.phi),r=e*Ft.sin(this.phi);return I.create(t,this.z,r)}};function As(){this.theta=0,this.phi=0}As.create=function(e,t){var r=new As;return r.theta=e,r.phi=t,r};var Ll={normalizeTheta:function(){this.theta=rn.fmodulo(this.theta,2*Math.PI),this.theta>Math.PI&&(this.phi+=Math.PI,this.theta=2*Math.PI-this.theta)},normalize:function(){this.normalizeTheta(),this.phi=rn.fmodulo(this.phi,2*Math.PI)},toString:function(){var e=new i.StringBuilder;return e.append("ptg("),e.append(this.theta),e.append(","),e.append(this.phi),e.append(")"),e.toString()}};function Nt(){switch(this._force_https=!1,this._origin_protocol=typeof window>"u"?"https:":window.location.protocol,this._origin_domain=typeof window>"u"?"":window.location.hostname,this._force_https=this._origin_protocol==="https:",this._domain_handling={},this._domain_handling["worldwidetelescope.org"]=0,this._domain_handling["www.worldwidetelescope.org"]=0,this._domain_handling["cdn.worldwidetelescope.org"]=0,this._domain_handling["content.worldwidetelescope.org"]=0,this._domain_handling["beta.worldwidetelescope.org"]=0,this._domain_handling["beta-cdn.worldwidetelescope.org"]=0,this._domain_handling["wwtstaging.azurewebsites.net"]=0,this._domain_handling["wwtfiles.blob.core.windows.net"]=2,this._domain_handling["wwttiles.blob.core.windows.net"]=2,this._domain_handling["web.wwtassets.org"]=2,this._domain_handling["data1.wwtassets.org"]=2,this._domain_handling.localhost=1,this._domain_handling["127.0.0.1"]=1,this._origin_domain){case"worldwidetelescope.org":case"www.worldwidetelescope.org":case"cdn.worldwidetelescope.org":this._core_static_baseurl=this._origin_protocol+"//cdn.worldwidetelescope.org",this._core_dynamic_baseurl=this._origin_protocol+"//worldwidetelescope.org";break;case"beta.worldwidetelescope.org":case"beta-cdn.worldwidetelescope.org":this._core_static_baseurl=this._origin_protocol+"//beta-cdn.worldwidetelescope.org",this._core_dynamic_baseurl=this._origin_protocol+"//beta.worldwidetelescope.org";break;default:this._core_static_baseurl=this._origin_protocol+"//cdn.worldwidetelescope.org",this._core_dynamic_baseurl=this._origin_protocol+"//worldwidetelescope.org";break}this._engine_asset_baseurl=this._origin_protocol+"//web.wwtassets.org/engine/assets",this._flagship_static_lcpaths={},this._flagship_static_lcpaths["/wwtweb/2massoct.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/bingdemtile.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/bingdemtile2.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/catalog.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/catalog2.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/dem.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/dembath.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/demmars.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/demtile.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/dss.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/dsstoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/dusttoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/earthblend.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/earthmerbath.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/fixedaltitudedemtile.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/g360.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/galex4far.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/galex4near.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/galextoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/gettile.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/gettour.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/gettourfile.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/gettours.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/glimpse.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/halphatoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/hirise.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/hirisedem2.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/hirisedem3.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/jupiter.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/mandel.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/mandel1.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/mars.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/marsdem.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/marshirise.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/marsmoc.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/martiantile.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/martiantile2.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/mipsgal.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/moondem.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/moonoct.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/moontoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/moontoastdem.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/postmars.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/postmarsdem.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/postmarsdem2.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/rasstoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/sdsstoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/sdsstoast2.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/sdsstoast2.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/thumbnail.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/tiles.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/tiles2.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/tilesthumb.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/twomasstoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/tychooct.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/veblend.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/vlsstoast.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/wmap.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/wmsmoon.aspx"]=!0,this._flagship_static_lcpaths["/wwtweb/wmstoast.aspx"]=!0}var kl={overrideAssetBaseurl:function(e){this._engine_asset_baseurl=e},rewrite:function(e,t){var r=e.toLowerCase(),n,a;if(i.startsWith(r,"http://"))n="http:",a=e.substring(7);else if(i.startsWith(r,"https://"))n="https:",a=e.substring(8);else if(i.startsWith(r,"//"))n="",a=e.substring(2);else{if(i.startsWith(r,"blob:"))return e;switch(t){case 0:default:n="",a=e;break;case 1:return e=new URL(e,window.location.href).toString(),this.rewrite(e,0)}}if(q.singleton.freestandingMode)return e;var l,f,c=a.indexOf("/");c<0?(l=a,f="/"):(l=a.substring(0,c),f=a.substring(c));var d=l.toLowerCase(),m=f.toLowerCase().split("?")[0];i.keyExists(this._domain_handling,d)||(i.startsWith(d,"localhost:")||i.startsWith(d,"127.0.0.1:")?this._domain_handling[d]=1:this._domain_handling[d]=3);var v=this._domain_handling[d];switch(v){case 1:return e;case 2:case 3:default:return this._force_https&&n!=="https:"?"https://"+l+f:e;case 4:return n||(e="http://"+e),e=i.replaceString(i.replaceString(encodeURIComponent(e),"%7B","{"),"%7D","}"),this._core_dynamic_baseurl+"/webserviceproxy.aspx?targeturl="+e;case 0:var C=!1;return(i.startsWith(m,"/data/")||i.keyExists(this._flagship_static_lcpaths,m)||i.startsWith(m,"/content/")||i.startsWith(m,"/engine/assets/"))&&(C=!0),C?this._core_static_baseurl+f:this._core_dynamic_baseurl+f}},activateProxy:function(e){if(q.singleton.freestandingMode)return null;var t=e.toLowerCase(),r;i.startsWith(t,"http://")?r=e.substring(7):i.startsWith(t,"https://")?r=e.substring(8):i.startsWith(t,"//")?r=e.substring(2):r=e;var n,a=r.indexOf("/");a<0?n=r:n=r.substring(0,a).toLowerCase(),i.keyExists(this._domain_handling,n)||(i.startsWith(n,"localhost:")||i.startsWith(n,"127.0.0.1:")?this._domain_handling[n]=1:this._domain_handling[n]=3);var l=this._domain_handling[n];return!l||l===2||l===1?null:(this._domain_handling[n]=4,this.rewrite(e,0))},engineAssetUrl:function(e){return i.format("{0}/{1}",this._engine_asset_baseurl,e)},coreDynamicUrl:function(e){return i.format("{0}/{1}",this._core_dynamic_baseurl,e)},coreStaticUrl:function(e){return i.format("{0}/{1}",this._core_static_baseurl,e)}};function vt(){this.addedToPrimitives=!1,this.annotationDirty=!0,this._opacity=1,this._showHoverLabel=!1}vt.prepBatch=function(e){(vt.pointList==null||vt.batchDirty)&&(vt.pointList=new qr(e),vt.lineList=new ca,vt.triangleFanPointList=new mo,vt.triangleList=new In,vt.lineList.set_depthBuffered(!1),vt.triangleList.depthBuffered=!1)},vt.drawBatch=function(e){vt.batchDirty=!1,e.gl!=null&&(vt.pointList!=null&&vt.pointList.draw(e,1,!1),vt.lineList!=null&&vt.lineList.drawLines(e,1),vt.triangleFanPointList!=null&&vt.triangleFanPointList.draw(e,1),vt.triangleList!=null&&vt.triangleList.draw(e,1,0))},vt.separation=function(e,t,r,n){t=t/180*Math.PI,n=n/180*Math.PI,e=e/12*Math.PI,r=r/12*Math.PI;var a=Math.cos(t)*Math.sin(n)-Math.sin(t)*Math.cos(n)*Math.cos(r-e),l=Math.cos(n)*Math.sin(r-e),f=Math.sin(t)*Math.sin(n)+Math.cos(t)*Math.cos(n)*Math.cos(r-e),c=Math.atan2(Math.sqrt(a*a+l*l),f);return c=c/Math.PI*180,c<0&&(c+=180),c},vt.colorToUint=function(e){return e.a<<24|e.r<<16|e.g<<8|e.b},vt.colorToUintAlpha=function(e,t){return t<<24|e.r<<16|e.g<<8|e.b};var Al={draw:function(e){},get_opacity:function(){return this._opacity},set_opacity:function(e){return this._opacity=e,e},get_id:function(){return this._id},set_id:function(e){return this._id=e,e},get_tag:function(){return this._tag},set_tag:function(e){return this._tag=e,e},get_label:function(){return this._label},set_label:function(e){return this._label=e,e},get_showHoverLabel:function(){return this._showHoverLabel},set_showHoverLabel:function(e){return this._showHoverLabel=e,e},hitTest:function(e,t,r,n,a){return!1},get_center:function(){return this.center},set_center:function(e){return this.center=e,e}};function jn(e,t,r,n,a){this.RA=0,this.dec=0,this.distance=0,this.shadow=!1,this.eclipsed=!1,this.RA=e,this.dec=t,this.distance=r,this.shadow=n,this.eclipsed=a}var Il={};function uo(e,t,r,n,a){this.bValid=!1,this.rise=0,this.transit=0,this.set=0,this.bNeverRises=!1,this.bValid=e,this.rise=t,this.transit=r,this.set=n,this.bNeverRises=a}var Pl={};function dt(){}dt.getPlanet=function(e,t,r,n,a){var l=t;if(n=-n,l<9){var f=ci.calculate(e,t),c=mn.equatorial2Topocentric(f.apparentGeocentricRA,f.apparentGeocentricDeclination,f.apparentGeocentricDistance,n,r,a,e);return new jn(c.x,c.y,f.apparentGeocentricDistance,!1,!1)}else if(l===9){var d=wt.eclipticLatitude(e),m=wt.eclipticLongitude(e),v=wt.radiusVector(e)/149598e3,C=ui.trueObliquityOfEcliptic(e),T=S.ec2Eq(m,d,C),c=mn.equatorial2Topocentric(T.x,T.y,v,n,r,a,e);return new jn(c.x,c.y,v,!1,!1)}else{if(e!==dt._jDateLast){dt._jupDetails=ci.calculate(e,4),dt._jupPhisical=xs.calculate(e);var c=mn.equatorial2Topocentric(dt._jupDetails.apparentGeocentricRA,dt._jupDetails.apparentGeocentricDeclination,dt._jupDetails.apparentGeocentricDistance,n,r,a,e);dt._jupDetails.apparentGeocentricRA=c.x,dt._jupDetails.apparentGeocentricDeclination=c.y,dt._galDetails=Ri.calculate(e),dt._jDateLast=e}var A=954501e-9,$=Math.atan(.5*(A/dt._jupDetails.apparentGeocentricDistance))/3.1415927*180,N=$/Math.cos(dt._jupDetails.apparentGeocentricDeclination/180*3.1415927)/15,F=0,z=0,Y=0,W=!1,ee=!1;switch(l){case 10:F=dt._galDetails.satellite1.apparentRectangularCoordinates.x,z=dt._galDetails.satellite1.apparentRectangularCoordinates.y,Y=dt._galDetails.satellite1.apparentRectangularCoordinates.z,ee=dt._galDetails.satellite1.bInEclipse,W=dt._galDetails.satellite1.bInShadowTransit;break;case 11:F=dt._galDetails.satellite2.apparentRectangularCoordinates.x,z=dt._galDetails.satellite2.apparentRectangularCoordinates.y,Y=dt._galDetails.satellite2.apparentRectangularCoordinates.z,ee=dt._galDetails.satellite2.bInEclipse,W=dt._galDetails.satellite2.bInShadowTransit;break;case 12:F=dt._galDetails.satellite3.apparentRectangularCoordinates.x,z=dt._galDetails.satellite3.apparentRectangularCoordinates.y,Y=dt._galDetails.satellite3.apparentRectangularCoordinates.z,ee=dt._galDetails.satellite3.bInEclipse,W=dt._galDetails.satellite3.bInShadowTransit;break;case 13:F=dt._galDetails.satellite4.apparentRectangularCoordinates.x,z=dt._galDetails.satellite4.apparentRectangularCoordinates.y,Y=dt._galDetails.satellite4.apparentRectangularCoordinates.z,ee=dt._galDetails.satellite4.bInEclipse,W=dt._galDetails.satellite4.bInShadowTransit;break;case 14:F=dt._galDetails.satellite1.apparentShadowRectangularCoordinates.x,z=dt._galDetails.satellite1.apparentShadowRectangularCoordinates.y,Y=dt._galDetails.satellite1.apparentShadowRectangularCoordinates.z*.9,W=dt._galDetails.satellite1.bInShadowTransit;break;case 15:F=dt._galDetails.satellite2.apparentShadowRectangularCoordinates.x,z=dt._galDetails.satellite2.apparentShadowRectangularCoordinates.y,Y=dt._galDetails.satellite2.apparentShadowRectangularCoordinates.z*.9,W=dt._galDetails.satellite2.bInShadowTransit;break;case 16:F=dt._galDetails.satellite3.apparentShadowRectangularCoordinates.x,z=dt._galDetails.satellite3.apparentShadowRectangularCoordinates.y,Y=dt._galDetails.satellite3.apparentShadowRectangularCoordinates.z*.9,W=dt._galDetails.satellite3.bInShadowTransit;break;case 17:F=dt._galDetails.satellite4.apparentShadowRectangularCoordinates.x,z=dt._galDetails.satellite4.apparentShadowRectangularCoordinates.y,Y=dt._galDetails.satellite4.apparentShadowRectangularCoordinates.z*.9,W=dt._galDetails.satellite4.bInShadowTransit;break}var ne,ae,de=dt._jupPhisical.p/180*3.1415927;return ne=F*Math.cos(de)-z*Math.sin(de),ae=F*Math.sin(de)+z*Math.cos(de),F=ne,z=ae,new jn(dt._jupDetails.apparentGeocentricRA-F*N,dt._jupDetails.apparentGeocentricDeclination+z*$,dt._jupDetails.apparentGeocentricDistance+Y*A/2,W,ee)}},dt.getJulianDay=function(e,t,r){return li.dateToJD(i.truncate(e),i.truncate(t),r,!0)},dt.eclipticToJ2000=function(e,t,r){var n=S.ec2Eq(e,t,ui.trueObliquityOfEcliptic(r));return new jn(n.x,n.y,0,!1,!1)},dt.galacticToJ2000=function(e,t){var r=S.g2Eq(e,t);return new jn(r.x,r.y,0,!1,!1)},dt.j2000ToGalactic=function(e,t){var r=S.eq2G(e,t);return new jn(r.x,r.y,0,!1,!1)},dt.getRiseTrinsitSet=function(e,t,r,n,a,l,f,c,d,m){var v=-.5667;switch(m){case 0:v=-.5667;break;case 1:v=-.8333;break;case 2:v=.125;break}var C=ks.rise(e,n,a,l,f,c,d,r,t,v),T=!1;return C.bValid||(T=ye.sign(t)!==ye.sign(f)),new uo(C.bValid,C.rise,C.transit,C.set,T)};var Rl={};function pn(){this._state=!1,this._targetState=!1,this._delayTime=0,this._switchedTime=new Date(1990,0,0,0,0,0,0),this._state=!1,this._targetState=this._state,this._delayTime=1e3}pn.create=function(e,t){var r=new pn;return r._state=e,r._targetState=e,r._delayTime=t,r};var $l={get_state:function(){if(this._targetState!==this._state){var e=i.now()-this._switchedTime;return e>this._delayTime&&(this._state=this._targetState),!0}return this._state},set_state:function(e){return this._switchedTime=new Date(1990,0,0,0,0,0,0),this._state=e,this._targetState=this._state,e},get_targetState:function(){return this._targetState},set_targetState:function(e){return this._targetState!==e&&(this._switchedTime=i.now(),this._targetState=e),e},get_opacity:function(){if(this._targetState!==this._state){var e=i.now()-this._switchedTime;if(e>this._delayTime)this._state=this._targetState;else{var t=e/this._delayTime;return this._targetState?t:1-t}}return this._state?1:0},get_delayTime:function(){return this._delayTime},set_delayTime:function(e){return this._delayTime=e,e}};function fi(){this.lat=0,this.lng=0,this.zoom=0,this.rotation=0,this.angle=0,this.raDec=!1,this.opacity=0,this.target=0,this.zoom=360,this.viewTarget=new I}fi.create=function(e,t,r,n,a,l){var f=new fi;return f.lat=e,f.lng=t,f.zoom=r,f.rotation=n,f.angle=a,f.raDec=!1,f.opacity=l,f.viewTarget=I.create(0,0,0),f.target=20,f.targetReferenceFrame="",f},fi.logN=function(e,t){return Math.log(e)/Math.log(t)},fi.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2},fi.interpolate=function(e,t,r,n,a){var l=new fi,f=fi.easeCurve(r,n),c=Math.min(1,r*2),d=fi.easeCurve(c,n);return l.angle=t.angle*f+e.angle*(1-f),l.rotation=t.rotation*f+e.rotation*(1-f),a?(l.lat=t.lat*d+e.lat*(1-d),l.lng=t.lng*d+e.lng*(1-d)):(l.lat=t.lat*f+e.lat*(1-f),l.lng=t.lng*f+e.lng*(1-f)),l.zoom=Math.pow(2,fi.logN(t.zoom,2)*f+fi.logN(e.zoom,2)*(1-f)),l.opacity=t.opacity*f+e.opacity*(1-f),l.viewTarget=I.lerp(e.viewTarget,t.viewTarget,f),l.targetReferenceFrame=t.targetReferenceFrame,t.target===e.target?l.target=t.target:l.target=20,l},fi.interpolateGreatCircle=function(e,t,r,n,a){var l=new fi,f=fi.easeCurve(r,n),c=Math.min(1,r*2);fi.easeCurve(c,n),l.angle=t.angle*f+e.angle*(1-f),l.rotation=t.rotation*f+e.rotation*(1-f);var d=V.geoTo3dDouble(e.lat,e.lng),m=V.geoTo3dDouble(t.lat,t.lng),v=I.slerp(d,m,f),C=V.cartesianToLatLng(v);return l.lat=C.y,l.lng=C.x,l.zoom=Math.pow(2,fi.logN(t.zoom,2)*f+fi.logN(e.zoom,2)*(1-f)),l.opacity=t.opacity*f+e.opacity*(1-f),l.viewTarget=I.lerp(e.viewTarget,t.viewTarget,f),l.targetReferenceFrame=t.targetReferenceFrame,t.target===e.target?l.target=t.target:l.target=20,l},fi.easeCurve=function(e,t){switch(t){case 0:return e;case 4:return Math.pow(e,2);case 1:return(1-e)*fi.sinh(e/(.1085712344*2))/100+e*e;case 2:return e*(1-fi.sinh((1-e)/(.1085712344*2))/100)+(1-e)*e;case 3:return e<.5?fi.sinh(e/.1085712344)/100:1-fi.sinh((1-e)/.1085712344)/100;default:return e}};var El={copy:function(){var e=new fi;return e.lat=this.lat,e.lng=this.lng,e.zoom=this.zoom,e.rotation=this.rotation,e.angle=this.angle,e.raDec=this.raDec,e.opacity=this.opacity,e.viewTarget=this.viewTarget.copy(),e.target=this.target,e.targetReferenceFrame=this.targetReferenceFrame,e},get_RA:function(){return(180-(this.lng-180))/360*24%24},set_RA:function(e){return this.lng=180-e/24*360-180,this.raDec=!0,e},get_dec:function(){return this.lat},set_dec:function(e){return this.lat=e,e},equals:function(e){if(i.canCast(e,fi)){var t=e;return!(Math.abs(t.angle-this.angle)>.01||Math.abs(t.lat-this.lat)>t.zoom/1e4||Math.abs(t.get_RA()-this.get_RA())>t.zoom/1e3||Math.abs(t.rotation-this.rotation)>.1||Math.abs(t.zoom-this.zoom)>Math.abs(t.zoom)/1e3)}else return!1}};function G(){this.a=255,this.b=255,this.g=255,this.r=255,this.name=""}G.fromArgb=function(e,t,r,n){var a=new G;return a.a=e,a.r=t,a.g=r,a.b=n,a},G._fromArgbColor=function(e,t){var r=new G;return r.a=e,r.r=t.r,r.g=t.g,r.b=t.b,r},G.fromName=function(e){var t=G.load(e);return t},G.load=function(e){var t=255,r=255,n=255,a=255,l=e.split(":");if(l.length===5)t=parseInt(l[1]),r=parseInt(l[2]),n=parseInt(l[3]),a=parseInt(l[4]);else{if(l.length===2)return G.fromName(l[1].toLowerCase());if(l.length===1&&i.startsWith(l[0],"#"))return G.fromHex(l[0]);if(l.length===1&&l[0].length===8)return G.fromSimpleHex(l[0]);if(l.length===1)return G._fromWindowsNamedColor(l[0])}return G.fromArgb(t,r,n,a)},G._fromWindowsNamedColor=function(e){switch(e.toLowerCase()){case"activeborder":return G.fromArgb(255,180,180,180);case"activecaption":return G.fromArgb(255,153,180,209);case"activecaptiontext":return G.fromArgb(255,0,0,0);case"appworkspace":return G.fromArgb(255,171,171,171);case"control":return G.fromArgb(255,240,240,240);case"controldark":return G.fromArgb(255,160,160,160);case"controldarkdark":return G.fromArgb(255,105,105,105);case"controllight":return G.fromArgb(255,227,227,227);case"controllightlight":return G.fromArgb(255,255,255,255);case"controltext":return G.fromArgb(255,0,0,0);case"desktop":return G.fromArgb(255,255,255,255);case"graytext":return G.fromArgb(255,109,109,109);case"highlight":return G.fromArgb(255,51,153,255);case"highlighttext":return G.fromArgb(255,255,255,255);case"hottrack":return G.fromArgb(255,0,102,204);case"inactiveborder":return G.fromArgb(255,244,247,252);case"inactivecaption":return G.fromArgb(255,191,205,219);case"inactivecaptiontext":return G.fromArgb(255,0,0,0);case"info":return G.fromArgb(255,255,255,225);case"infotext":return G.fromArgb(255,0,0,0);case"menu":return G.fromArgb(255,240,240,240);case"menutext":return G.fromArgb(255,0,0,0);case"scrollbar":return G.fromArgb(255,200,200,200);case"window":return G.fromArgb(255,255,255,255);case"windowframe":return G.fromArgb(255,100,100,100);case"windowtext":return G.fromArgb(255,0,0,0);case"transparent":return G.fromArgb(0,255,255,255);case"aliceblue":return G.fromArgb(255,240,248,255);case"antiquewhite":return G.fromArgb(255,250,235,215);case"aqua":return G.fromArgb(255,0,255,255);case"aquamarine":return G.fromArgb(255,127,255,212);case"azure":return G.fromArgb(255,240,255,255);case"beige":return G.fromArgb(255,245,245,220);case"bisque":return G.fromArgb(255,255,228,196);case"black":return G.fromArgb(255,0,0,0);case"blanchedalmond":return G.fromArgb(255,255,235,205);case"blue":return G.fromArgb(255,0,0,255);case"blueviolet":return G.fromArgb(255,138,43,226);case"brown":return G.fromArgb(255,165,42,42);case"burlywood":return G.fromArgb(255,222,184,135);case"cadetblue":return G.fromArgb(255,95,158,160);case"chartreuse":return G.fromArgb(255,127,255,0);case"chocolate":return G.fromArgb(255,210,105,30);case"coral":return G.fromArgb(255,255,127,80);case"cornflowerblue":return G.fromArgb(255,100,149,237);case"cornsilk":return G.fromArgb(255,255,248,220);case"crimson":return G.fromArgb(255,220,20,60);case"cyan":return G.fromArgb(255,0,255,255);case"darkblue":return G.fromArgb(255,0,0,139);case"darkcyan":return G.fromArgb(255,0,139,139);case"darkgoldenrod":return G.fromArgb(255,184,134,11);case"darkgray":return G.fromArgb(255,169,169,169);case"darkgreen":return G.fromArgb(255,0,100,0);case"darkkhaki":return G.fromArgb(255,189,183,107);case"darkmagenta":return G.fromArgb(255,139,0,139);case"darkolivegreen":return G.fromArgb(255,85,107,47);case"darkorange":return G.fromArgb(255,255,140,0);case"darkorchid":return G.fromArgb(255,153,50,204);case"darkred":return G.fromArgb(255,139,0,0);case"darksalmon":return G.fromArgb(255,233,150,122);case"darkseagreen":return G.fromArgb(255,143,188,139);case"darkslateblue":return G.fromArgb(255,72,61,139);case"darkslategray":return G.fromArgb(255,47,79,79);case"darkturquoise":return G.fromArgb(255,0,206,209);case"darkviolet":return G.fromArgb(255,148,0,211);case"deeppink":return G.fromArgb(255,255,20,147);case"deepskyblue":return G.fromArgb(255,0,191,255);case"dimgray":return G.fromArgb(255,105,105,105);case"dodgerblue":return G.fromArgb(255,30,144,255);case"firebrick":return G.fromArgb(255,178,34,34);case"floralwhite":return G.fromArgb(255,255,250,240);case"forestgreen":return G.fromArgb(255,34,139,34);case"fuchsia":return G.fromArgb(255,255,0,255);case"gainsboro":return G.fromArgb(255,220,220,220);case"ghostwhite":return G.fromArgb(255,248,248,255);case"gold":return G.fromArgb(255,255,215,0);case"goldenrod":return G.fromArgb(255,218,165,32);case"gray":return G.fromArgb(255,128,128,128);case"green":return G.fromArgb(255,0,128,0);case"greenyellow":return G.fromArgb(255,173,255,47);case"honeydew":return G.fromArgb(255,240,255,240);case"hotpink":return G.fromArgb(255,255,105,180);case"indianred":return G.fromArgb(255,205,92,92);case"indigo":return G.fromArgb(255,75,0,130);case"ivory":return G.fromArgb(255,255,255,240);case"khaki":return G.fromArgb(255,240,230,140);case"lavender":return G.fromArgb(255,230,230,250);case"lavenderblush":return G.fromArgb(255,255,240,245);case"lawngreen":return G.fromArgb(255,124,252,0);case"lemonchiffon":return G.fromArgb(255,255,250,205);case"lightblue":return G.fromArgb(255,173,216,230);case"lightcoral":return G.fromArgb(255,240,128,128);case"lightcyan":return G.fromArgb(255,224,255,255);case"lightgoldenrodyellow":return G.fromArgb(255,250,250,210);case"lightgray":return G.fromArgb(255,211,211,211);case"lightgreen":return G.fromArgb(255,144,238,144);case"lightpink":return G.fromArgb(255,255,182,193);case"lightsalmon":return G.fromArgb(255,255,160,122);case"lightseagreen":return G.fromArgb(255,32,178,170);case"lightskyblue":return G.fromArgb(255,135,206,250);case"lightslategray":return G.fromArgb(255,119,136,153);case"lightsteelblue":return G.fromArgb(255,176,196,222);case"lightyellow":return G.fromArgb(255,255,255,224);case"lime":return G.fromArgb(255,0,255,0);case"limegreen":return G.fromArgb(255,50,205,50);case"linen":return G.fromArgb(255,250,240,230);case"magenta":return G.fromArgb(255,255,0,255);case"maroon":return G.fromArgb(255,128,0,0);case"mediumaquamarine":return G.fromArgb(255,102,205,170);case"mediumblue":return G.fromArgb(255,0,0,205);case"mediumorchid":return G.fromArgb(255,186,85,211);case"mediumpurple":return G.fromArgb(255,147,112,219);case"mediumseagreen":return G.fromArgb(255,60,179,113);case"mediumslateblue":return G.fromArgb(255,123,104,238);case"mediumspringgreen":return G.fromArgb(255,0,250,154);case"mediumturquoise":return G.fromArgb(255,72,209,204);case"mediumvioletred":return G.fromArgb(255,199,21,133);case"midnightblue":return G.fromArgb(255,25,25,112);case"mintcream":return G.fromArgb(255,245,255,250);case"mistyrose":return G.fromArgb(255,255,228,225);case"moccasin":return G.fromArgb(255,255,228,181);case"navajowhite":return G.fromArgb(255,255,222,173);case"navy":return G.fromArgb(255,0,0,128);case"oldlace":return G.fromArgb(255,253,245,230);case"olive":return G.fromArgb(255,128,128,0);case"olivedrab":return G.fromArgb(255,107,142,35);case"orange":return G.fromArgb(255,255,165,0);case"orangered":return G.fromArgb(255,255,69,0);case"orchid":return G.fromArgb(255,218,112,214);case"palegoldenrod":return G.fromArgb(255,238,232,170);case"palegreen":return G.fromArgb(255,152,251,152);case"paleturquoise":return G.fromArgb(255,175,238,238);case"palevioletred":return G.fromArgb(255,219,112,147);case"papayawhip":return G.fromArgb(255,255,239,213);case"peachpuff":return G.fromArgb(255,255,218,185);case"peru":return G.fromArgb(255,205,133,63);case"pink":return G.fromArgb(255,255,192,203);case"plum":return G.fromArgb(255,221,160,221);case"powderblue":return G.fromArgb(255,176,224,230);case"purple":return G.fromArgb(255,128,0,128);case"red":return G.fromArgb(255,255,0,0);case"rosybrown":return G.fromArgb(255,188,143,143);case"royalblue":return G.fromArgb(255,65,105,225);case"saddlebrown":return G.fromArgb(255,139,69,19);case"salmon":return G.fromArgb(255,250,128,114);case"sandybrown":return G.fromArgb(255,244,164,96);case"seagreen":return G.fromArgb(255,46,139,87);case"seashell":return G.fromArgb(255,255,245,238);case"sienna":return G.fromArgb(255,160,82,45);case"silver":return G.fromArgb(255,192,192,192);case"skyblue":return G.fromArgb(255,135,206,235);case"slateblue":return G.fromArgb(255,106,90,205);case"slategray":return G.fromArgb(255,112,128,144);case"snow":return G.fromArgb(255,255,250,250);case"springgreen":return G.fromArgb(255,0,255,127);case"steelblue":return G.fromArgb(255,70,130,180);case"tan":return G.fromArgb(255,210,180,140);case"teal":return G.fromArgb(255,0,128,128);case"thistle":return G.fromArgb(255,216,191,216);case"tomato":return G.fromArgb(255,255,99,71);case"turquoise":return G.fromArgb(255,64,224,208);case"violet":return G.fromArgb(255,238,130,238);case"wheat":return G.fromArgb(255,245,222,179);case"white":return G.fromArgb(255,255,255,255);case"whitesmoke":return G.fromArgb(255,245,245,245);case"yellow":return G.fromArgb(255,255,255,0);case"yellowgreen":return G.fromArgb(255,154,205,50);case"buttonface":return G.fromArgb(255,240,240,240);case"buttonhighlight":return G.fromArgb(255,255,255,255);case"buttonshadow":return G.fromArgb(255,160,160,160);case"gradientactivecaption":return G.fromArgb(255,185,209,234);case"gradientinactivecaption":return G.fromArgb(255,215,228,242);case"menubar":return G.fromArgb(255,240,240,240);case"menuhighlight":return G.fromArgb(255,51,153,255)}return G.fromArgb(255,255,255,255)},G.fromHex=function(e){var t=ye.fromHex(e.substr(1,2)),r=ye.fromHex(e.substr(3,2)),n=ye.fromHex(e.substr(5,2)),a=255;return G.fromArgb(a,t,r,n)},G.fromSimpleHex=function(e){var t=ye.fromHex(e.substr(0,2)),r=ye.fromHex(e.substr(2,2)),n=ye.fromHex(e.substr(4,2)),a=ye.fromHex(e.substr(6,2));return G.fromArgb(t,r,n,a)},G.fromInt=function(e){var t=(e&4278190080)>>>24,r=(e&16711680)>>>16,n=(e&65280)>>>8,a=e&255;return G.fromArgb(a,t,r,n)};var Dl={toFormat:function(){return i.emptyString(this.name)?i.format("rgb({0},{1},{2})",this.r.toString(),this.g.toString(),this.b.toString()):this.name},save:function(){return i.emptyString(this.name)?i.format("{0}:{1}:{2}:{3}:{4}",1,this.a,this.r,this.g,this.b):i.format("{0}:{1}",0,this.name)},toString:function(){return i.emptyString(this.name)?i.format("#{0}{1}{2}",ye.toHex(this.r),ye.toHex(this.g),ye.toHex(this.b)):this.name},toSimpleHex:function(){return i.emptyString(this.name)?i.format("{0}{1}{2}{3}",ye.toHex(this.a),ye.toHex(this.r),ye.toHex(this.g),ye.toHex(this.b)):this.name},_clone:function(){return G.fromArgb(this.a,this.r,this.g,this.b)}};function Te(){}Te.get_black=function(){return G.fromArgb(255,0,0,0)},Te.get_blue=function(){return G.fromArgb(255,0,0,255)},Te.get_brown=function(){return G.fromArgb(255,165,42,42)},Te.get_cyan=function(){return G.fromArgb(255,0,255,255)},Te.get_darkGray=function(){return G.fromArgb(255,169,169,169)},Te.get_gray=function(){return G.fromArgb(255,128,128,128)},Te.get_green=function(){return G.fromArgb(255,0,255,0)},Te.get_lightGray=function(){return G.fromArgb(255,211,211,211)},Te.get_magenta=function(){return G.fromArgb(255,255,0,255)},Te.get_orange=function(){return G.fromArgb(255,255,165,0)},Te.get_purple=function(){return G.fromArgb(255,128,0,128)},Te.get_red=function(){return G.fromArgb(255,255,0,0)},Te.get_transparent=function(){return G.fromArgb(0,255,255,255)},Te.get_white=function(){return G.fromArgb(255,255,255,255)},Te.get_yellow=function(){return G.fromArgb(255,255,255,0)};var Fl={};function Ge(){this._pointCount=0,this._boundry=!1,this._noInterpollation=!1,this.readOnly=!1,this.radius=1,this._drawCount=0,this._constellationVertexBuffers={}}Ge.createBasic=function(e){var t=new Ge;t._name=e,t._url=null,t.lines=[];for(var r=i.enumerate(i.keys(Ge.fullNames));r.moveNext();){var n=r.current;t.lines.push(new Is(n))}return t},Ge.create=function(e,t,r,n,a){var l=new Ge;return l._noInterpollation=n,l._boundry=r,l._name=e,l._url=t,l.getFile(),l},Ge.drawConstellationNames=function(e,t,r){Ge._namesBatch==null&&(Ge.initializeConstellationNames(),Ge._namesBatch==null)||Ge._namesBatch.draw(e,t,r)},Ge.initializeConstellationNames=function(){if(Ge.constellationCentroids!=null){Ge._namesBatch=new wn(U.get_active().get_constellationLabelsHeight());for(var e=i.enumerate(i.keys(Ge.constellationCentroids));e.moveNext();){var t=e.current,r=Ge.constellationCentroids[t],n=V.raDecTo3dAu(r.get_RA(),r.get_dec(),1),a=I.create(0,1,0),l=r.get_name();r.get_name()==="Triangulum Australe"&&(l=i.replaceString(l," ",`
   `)),Ge._namesBatch.add(new rr(n,a,l,U.get_active().get_constellationLabelsHeight(),125e-6))}}},Ge.drawArtwork=function(e){if(Ge.artwork==null){Ge._artFile==null&&(Ge._artFile=new vn,Ge._artFile.loadFromUrl(Nt.singleton.coreStaticUrl("wwtweb/catalog.aspx?W=hevelius"),Ge._onArtReady));return}Ge._maxSeperation=Math.max(.5,Math.cos(e.get_fovAngle()*2/180*Math.PI));for(var t=i.enumerate(Ge.artwork);t.moveNext();){var r=t.current,n=Ge.pictureBlendStates[r.get_constellation()];if(n.set_targetState(U.get_active().get_constellationArtFilter().isSet(r.get_constellation())),n.get_state()){var a=!1,l=Ge.constellationCentroids[r.get_constellation()];if(l!=null){var f=V.raDecTo3d(a?-l.get_RA()-6:l.get_RA(),l.get_dec());I.dot(e.get_viewPoint(),f)>Ge._maxSeperation&&e.drawImageSet(r.get_studyImageset(),100)}}}},Ge._onArtReady=function(){Ge._artFile.childLoadCallback(Ge._loadArtList)},Ge._loadArtList=function(){Ge.artwork=Ge._artFile.get_places()},Ge.initializeConstellations=function(){if(Ge.containment==null){var e=Nt.singleton.engineAssetUrl("ConstellationNamePositions_EN.txt");Ge._webFileConstNames=new fr(e),Ge._webFileConstNames.onStateChange=Ge._loadNames,Ge._webFileConstNames.send(),Ge.containment=Ge.create("Constellations",Nt.singleton.engineAssetUrl("constellations.txt"),!0,!0,!0)}},Ge._loadNames=function(){Ge._webFileConstNames.get_state()===2?alert(Ge._webFileConstNames.get_message()):Ge._webFileConstNames.get_state()===1&&Ge._centroidsReady(Ge._webFileConstNames.getText())},Ge._centroidsReady=function(e){Ge.constellationCentroids={},Ge.fullNames={},Ge.abbreviations={},Ge.bitIDs={};for(var t=e.split(`\r
`),r=0,n,a=i.enumerate(t);a.moveNext();){var l=a.current;n=l;var f=n.split(",");Ge.fullNames[f[1]]=f[0],Ge.abbreviations[f[0]]=f[1],Ge.bitIDs[f[1]]=r++,Ge.pictureBlendStates[f[1]]=pn.create(!0,1e3),Ge.constellationCentroids[f[1]]=hr.create(f[0],parseFloat(f[3]),parseFloat(f[2]),128,f[1],2,360)}q.set_renderNeeded(!0),Lt.buildConstellationFilters()},Ge.fullName=function(e){return i.keyExists(Ge.fullNames,e)?Ge.fullNames[e]:e},Ge.abbreviation=function(e){return Ge.abbreviations!=null&&!i.emptyString(e)&&i.keyExists(Ge.abbreviations,e)?Ge.abbreviations[e]:e};var Nl={get_name:function(){return this._name},set_name:function(e){return this._name=e,e},getFile:function(){this._webFile=new fr(this._url),this._webFile.onStateChange=i.bind("fileStateChange",this),this._webFile.send()},fileStateChange:function(){this._webFile.get_state()===2?alert(this._webFile.get_message()):this._webFile.get_state()===1&&this._loadConstellationData(this._webFile.getText())},_loadConstellationData:function(e){this._boundry&&!this._noInterpollation&&(Ge.boundries={}),this.lines=[];var t=null;try{for(var r=e.split(`\r
`),n,a="",l,f,c=0,d=0,m=i.enumerate(r);m.moveNext();){var v=m.current,C=v;if(C.substr(11,2)==="- "&&(C=C.substr(0,11)+" -"+C.substr(13,C.length-13)),C.substr(11,2)==="+ "&&(C=C.substr(0,11)+" +"+C.substr(13,C.length-13)),f=parseFloat(C.substr(11,10)),this._noInterpollation,l=parseFloat(C.substr(0,10)),n=i.trim(C.substr(23,4)),!this._boundry)i.trim(C.substr(28,1))&&(d=parseInt(C.substr(28,1)));else if(this._noInterpollation&&C.substr(28,1)!=="O")continue;n!==a&&(d=3,t=new Is(n),this.lines.push(t),this._boundry&&!this._noInterpollation&&(Ge.boundries[n]=t),a=n,c=0),this._noInterpollation&&(Math.abs(l-c)>12&&(l=l-24*(l-c<0?-1:1)),c=l);var T=null;C.length>30&&(T=i.trim(C.substr(30))),(T==null||T!=="Empty")&&t.add(l,f,d,T),this._pointCount++,d=1}}catch{}q.set_renderNeeded(!0)},draw:function(e,t,r,n){Ge._maxSeperation=Math.max(.6,Math.cos(e.get_fovAngle()*2/180*Math.PI)),this._drawCount=0;var a=null;if(!(this.lines==null||Ge.constellationCentroids==null)){Ge._constToDraw=r;for(var l=i.enumerate(this.lines);l.moveNext();){var f=l.current;Ge._constToDraw===f.get_name()&&this._boundry?a=f:(!t||!this._boundry)&&this._drawSingleConstellation(e,f,1)}a!=null&&this._drawSingleConstellation(e,a,1)}},_drawSingleConstellation:function(e,t,r){var n=Ge.constellationCentroids[t.get_name()];if(n!=null){var a=V.raDecTo3d(n.get_RA(),n.get_dec());if(I.dot(e.get_viewPoint(),a)<Ge._maxSeperation)return}if(!i.keyExists(this._constellationVertexBuffers,t.get_name())){var l=t.points.length,f=new an;f.set_depthBuffered(!1),this._constellationVertexBuffers[t.get_name()]=f;for(var c=new I,d,m=0;m<l;m++)!t.points[m].pointType||!m?c=V.raDecTo3d(t.points[m].RA,t.points[m].dec):(d=V.raDecTo3d(t.points[m].RA,t.points[m].dec),f.addLine(c,d),c=d);this._boundry&&(d=V.raDecTo3d(t.points[0].RA,t.points[0].dec),f.addLine(c,d))}var v="red";this._boundry?Ge._constToDraw!==t.get_name()?v=U.get_globalSettings().get_constellationBoundryColor():v=U.get_globalSettings().get_constellationSelectionColor():v=U.get_globalSettings().get_constellationFigureColor(),this._constellationVertexBuffers[t.get_name()].drawLines(e,r,G.load(v))},_drawSingleConstellationOld:function(e,t){var r=Ge.constellationCentroids[t.get_name()];if(r!=null){var n=V.raDecTo3d(r.get_RA(),r.get_dec());if(I.dot(e.get_viewPoint(),n)<Ge._maxSeperation)return}this._drawCount++;var a;if(this._boundry?Ge._constToDraw!==t.get_name()?a=U.get_globalSettings().get_constellationBoundryColor():a=U.get_globalSettings().get_constellationSelectionColor():a=U.get_globalSettings().get_constellationFigureColor(),e.gl==null){var l=e.device,f=t.points.length,c=new I;l.save();var d=!1;l.beginPath(),l.strokeStyle=a,l.lineWidth=2,l.globalAlpha=.25;for(var m=0;m<f;m++)if(!t.points[m].pointType||!m)d&&l.stroke(),c=e.WVP.transform(V.raDecTo3d(t.points[m].RA,t.points[m].dec)),l.moveTo(c.x,c.y);else{var v=e.WVP.transform(V.raDecTo3d(t.points[m].RA,t.points[m].dec));l.lineTo(v.x,v.y),d=!0}this._boundry&&l.closePath(),l.stroke(),l.restore()}},findConstellationForPoint:function(e,t){if(t>88.402||this.lines==null)return"UMI";for(var r=i.enumerate(this.lines);r.moveNext();){var n=r.current,a=n.points.length,l,f,c=!1;for(l=0,f=a-1;l<a;f=l++)(n.points[l].dec<=t&&t<n.points[f].dec||n.points[f].dec<=t&&t<n.points[l].dec)&&e<(n.points[f].RA-n.points[l].RA)*(t-n.points[l].dec)/(n.points[f].dec-n.points[l].dec)+n.points[l].RA&&(c=!c);if(c)return n.get_name()}return e>0?this.findConstellationForPoint(e-24,t):t>65.5?"UMI":t<-65.5?"OCT":"Error"}};function Is(e){this._name=e,this.points=[]}var Vl={get_name:function(){return this._name},set_name:function(e){return this._name=e,e},add:function(e,t,r,n){this.points.push(new co(e,t,r,n))}};function co(e,t,r,n){this.RA=0,this.dec=0,this.pointType=0,this.name=null,this.RA=e,this.dec=t,this.pointType=r,this.name=n}var Bl={toString:function(){return i.emptyString(this.name)?V.formatDMS((this.RA/360*24+12)%24)+", "+V.formatDMS(this.dec)+", "+this.pointType.toString():this.name+", "+this.pointType.toString()}};function Lt(){this.bits=new Array(3),this.oldBits=new Array(3),this.blendState=pn.create(!1,1e3),this.internal=!1,this.settingsOwned=!1;for(var e=0;e<3;e++)this.bits[e]=~this.bits[e],this.oldBits[e]=this.bits[e]}Lt.buildConstellationFilters=function(){var e=Lt.get_allConstellation();e.internal=!0,Lt.families.AllConstellation=e,Lt.families.Zodiacal=Lt.get_zodiacal(),Lt.families["Ursa Major Family"]=Lt.get_ursaMajorFamily(),Lt.families["Perseus Family"]=Lt.get_perseusFamily(),Lt.families["Hercules Family"]=Lt.get_herculesFamily(),Lt.families["Orion Family"]=Lt.get_orionFamily(),Lt.families["Heavenly Waters"]=Lt.get_heavenlyWaters(),Lt.families["Bayer Family"]=Lt.get_bayerFamily(),Lt.families["La Caille Family"]=Lt.get_laCaileFamily()},Lt.saveCustomFilters=function(){var e=new i.StringBuilder,t=Lt.families;for(var r in t){var n={key:r,value:t[r]};n.value.internal||(e.append(n.key),e.append(";"),e.appendLine(n.value.toString()))}},Lt.get_allConstellation=function(){var e=new Lt;return e.setAll(!0),e},Lt.get_zodiacal=function(){var e=new Lt;return e.set("ARI",!0),e.set("TAU",!0),e.set("GEM",!0),e.set("CNC",!0),e.set("LEO",!0),e.set("VIR",!0),e.set("LIB",!0),e.set("SCO",!0),e.set("SGR",!0),e.set("CAP",!0),e.set("AQR",!0),e.set("PSC",!0),e.internal=!0,e},Lt.get_ursaMajorFamily=function(){var e=new Lt;return e.set("UMA",!0),e.set("UMI",!0),e.set("DRA",!0),e.set("CVN",!0),e.set("BOO",!0),e.set("COM",!0),e.set("CRB",!0),e.set("CAM",!0),e.set("LYN",!0),e.set("LMI",!0),e.internal=!0,e},Lt.get_perseusFamily=function(){var e=new Lt;return e.set("CAS",!0),e.set("CEP",!0),e.set("AND",!0),e.set("PER",!0),e.set("PEG",!0),e.set("CET",!0),e.set("AUR",!0),e.set("LAC",!0),e.set("TRI",!0),e.internal=!0,e},Lt.get_herculesFamily=function(){var e=new Lt;return e.set("HER",!0),e.set("SGE",!0),e.set("AQL",!0),e.set("LYR",!0),e.set("CYG",!0),e.set("VUL",!0),e.set("HYA",!0),e.set("SEX",!0),e.set("CRT",!0),e.set("CRV",!0),e.set("OPH",!0),e.set("SER1",!0),e.set("SER2",!0),e.set("SCT",!0),e.set("CEN",!0),e.set("LUP",!0),e.set("CRA",!0),e.set("ARA",!0),e.set("TRA",!0),e.set("CRU",!0),e.internal=!0,e},Lt.get_orionFamily=function(){var e=new Lt;return e.set("ORI",!0),e.set("CMA",!0),e.set("CMI",!0),e.set("MON",!0),e.set("LEP",!0),e.internal=!0,e},Lt.get_heavenlyWaters=function(){var e=new Lt;return e.set("DEL",!0),e.set("EQU",!0),e.set("ERI",!0),e.set("PSA",!0),e.set("CAR",!0),e.set("PUP",!0),e.set("VEL",!0),e.set("PYX",!0),e.set("COL",!0),e.internal=!0,e},Lt.get_bayerFamily=function(){var e=new Lt;return e.set("HYA",!0),e.set("DOR",!0),e.set("VOL",!0),e.set("APS",!0),e.set("PAV",!0),e.set("GRU",!0),e.set("PHE",!0),e.set("TUC",!0),e.set("IND",!0),e.set("CHA",!0),e.set("MUS",!0),e.internal=!0,e},Lt.get_laCaileFamily=function(){var e=new Lt;return e.set("NOR",!0),e.set("CIR",!0),e.set("TEL",!0),e.set("MIC",!0),e.set("SCL",!0),e.set("FOR",!0),e.set("CAE",!0),e.set("HOR",!0),e.set("OCT",!0),e.set("MEN",!0),e.set("RET",!0),e.set("PIC",!0),e.set("ANT",!0),e.internal=!0,e},Lt.parse=function(e){var t=e.split(","),r=new Lt;try{for(var n=0;n<3;n++)r.bits[n]=parseInt(t[n])}catch{}return r};var zl={_saveBits:function(){for(var e=0;e<3;e++)this.oldBits[e]=this.bits[e]},_isChanged:function(){for(var e=0;e<3;e++)if(this.oldBits[e]!==this.bits[e])return!0;return!1},_checkChanged:function(){this._isChanged()&&this._fireChanged()},isEnabled:function(e){var t=Ge.bitIDs[e],r=t/32;return t=t%32,this.blendState.get_state()&&!!(1<<t&this.bits[r])},isSet:function(e){this._saveBits();var t=Ge.bitIDs[e],r=i.truncate(t/32);return t=t%32,!!(1<<t&this.bits[r])},set:function(e,t){this._saveBits();var r=Ge.bitIDs[e],n=r/32;r=r%32,t?this.bits[n]=this.bits[n]|1<<r:this.bits[n]=this.bits[n]^1<<r,this._checkChanged()},setAll:function(e){this._saveBits();for(var t=0;t<89;t++){var r=t/32,n=t%32;e?this.bits[r]=this.bits[r]|1<<n:this.bits[r]=this.bits[r]^1<<n}this._checkChanged()},setBits:function(e){this._saveBits();for(var t=0;t<3;t++)this.bits[t]=e[t*4]+(e[t*4+1]<<8)+(e[t*4+2]<<16)+(e[t*4+3]<<24);this._checkChanged()},getBits:function(){for(var e=new Array(12),t=0,r=0;r<3;r++)e[t++]=this.bits[r],e[t++]=this.bits[r]>>8,e[t++]=this.bits[r]>>16,e[t++]=this.bits[r]>>24;return e},cloneFilter:function(e){this._saveBits();for(var t=0;t<3;t++)this.bits[t]=e.bits[t];this._checkChanged()},clone:function(){var e=new Lt;return e.cloneFilter(this),e},combine:function(e){this._saveBits();for(var t=0;t<3;t++)this.bits[t]=this.bits[t]|e.bits[t];this._checkChanged()},remove:function(e){this._saveBits();for(var t=0;t<3;t++)this.bits[t]=this.bits[t]&~e.bits[t];this._checkChanged()},_fireChanged:function(){this.settingsOwned},toString:function(){return i.format("{0},{1},{2}",this.bits[0],this.bits[1],this.bits[2])}};function Ue(){this.tu=0,this.tv=0,this.position=new I}Ue.createPos=function(e,t,r){var n=new Ue;return n.tu=t*O.uvMultiple,n.tv=r*O.uvMultiple,n.position=e,n},Ue.createPosRaw=function(e,t,r){var n=new Ue;return n.tu=t,n.tv=r,n.position=e,n},Ue.createPosSize=function(e,t,r,n,a){var l=new Ue;return l.tu=t*n,l.tv=r*a,l.position=e,l},Ue.create=function(e,t,r,n,a){var l=new Ue;return l.position=I.create(e,t,r),l.tu=n*O.uvMultiple,l.tv=a*O.uvMultiple,l};var Ol={copy:function(){var e=new Ue;return e.position=I.makeCopy(this.position),e.tu=this.tu,e.tv=this.tv,e},toString:function(){return i.format("{0}, {1}, {2}, {3}, {4}",this.position.x,this.position.y,this.position.z,this.tu,this.tv)}};function qt(){this.tu=0,this.tv=0,this.color=new G,this.position=new I}qt.createPos=function(e,t,r){var n=new qt;return n.tu=t*O.uvMultiple,n.tv=r*O.uvMultiple,n.position=e,n},qt.createPosRaw=function(e,t,r){var n=new qt;return n.tu=t,n.tv=r,n.position=e,n},qt.createPosSize=function(e,t,r,n,a){var l=new qt;return l.tu=t*n,l.tv=r*a,l.position=e,l},qt.create=function(e,t,r,n,a){var l=new Ue;return l.position=I.create(e,t,r),l.tu=n*O.uvMultiple,l.tv=a*O.uvMultiple,l};var Ul={copy:function(){var e=new Ue;return e.position=I.makeCopy(this.position),e.tu=this.tu,e.tv=this.tv,e},toString:function(){return i.format("{0}, {1}, {2}, {3}, {4}",this.position.x,this.position.y,this.position.z,this.tu,this.tv)}};function Wa(e,t){this.color=new G,this.color=t._clone(),this.position=e.copy()}var Hl={copy:function(){var e=new Wa(this.position,this.color);return e},toString:function(){return i.format("{0}, {1}, {2}, {3}",this.position.x,this.position.y,this.position.z,this.color.toString())}};function ho(e,t,r,n){this.x=0,this.y=0,this.z=0,this.nx=0,this.ny=0,this.nz=0,this.tu=0,this.tv=0,this.tanx=0,this.tany=0,this.tanz=0,this.x=e.x,this.y=e.y,this.z=e.z,this.nx=t.x,this.ny=t.y,this.nz=t.z,this.tu=r.x,this.tv=r.y,this.tanx=n.x,this.tany=n.y,this.tanz=n.z}var Gl={get_normal:function(){return I.create(this.nx,this.ny,this.nz)},set_normal:function(e){return this.nx=e.x,this.ny=e.y,this.nz=e.z,e},get_position:function(){return I.create(this.x,this.y,this.z)},set_position:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,e},get_texCoord:function(){return xe.create(this.tu,this.tv)},set_texCoord:function(e){return this.tu=e.x,this.tv=e.y,e},get_tangent:function(){return I.create(this.tanx,this.tany,this.tanz)},set_tangent:function(e){return this.tanx=e.x,this.tany=e.y,this.tanz=e.z,e},toString:function(){return i.format("X={0}, Y={1}, Z={2}, Nx={3}, Ny={4}, Nz={5}, U={6}, V={7}, TanX={8}, TanY={9}, TanZ={10}",this.x,this.y,this.z,this.nx,this.ny,this.nz,this.tu,this.tv,this.tanx,this.tany,this.tanz)}};function I(){this.x=0,this.y=0,this.z=0}I.create=function(e,t,r){var n=new I;return n.x=e,n.y=t,n.z=r,n},I.makeCopy=function(e){var t=new I;return t.x=e.x,t.y=e.y,t.z=e.z,t},I.negate=function(e){return I.create(-e.x,-e.y,-e.z)},I.midPoint=function(e,t){var r=I.create((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2);return r},I.midPointByLength=function(e,t){var r=I.create((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2);return r.normalize(),r.multiply(e.length()),r},I.get_empty=function(){return I.create(0,0,0)},I.addVectors=function(e,t){return I.create(e.x+t.x,e.y+t.y,e.z+t.z)},I.cross=function(e,t){return I.create(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)},I.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},I.getLength=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)},I.getLengthSq=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},I.lerp=function(e,t,r){return I.create(e.x*(1-r)+t.x*r,e.y*(1-r)+t.y*r,e.z*(1-r)+t.z*r)},I.midpoint=function(e,t){var r=I.create(e.x*.5+t.x*.5,e.y*.5+t.y*.5,e.z*.5+t.z*.5);return r.normalize(),r},I.slerp=function(e,t,r){for(var n=I.dot(e,t);n<.98;){var a=I.midpoint(e,t);r>.5?(e=a,r-=.5,r*=2):(t=a,r*=2),n=I.dot(e,t)}var l=I.lerp(e,t,r);return l.normalize(),l},I.multiplyScalar=function(e,t){var r=e.copy();return r.multiply(t),r},I.scale=function(e,t){var r=e;return r.multiply(t),r},I.subtractVectors=function(e,t){var r=e.copy();return r.subtract(t),r},I.parse=function(e){var t=new I,r=e.split(",");return r.length===3&&(t.x=parseFloat(r[0]),t.y=parseFloat(r[1]),t.z=parseFloat(r[2])),t},I._transformCoordinate=function(e,t){return t.transform(e)};var ql={set:function(e,t,r){this.x=e,this.y=t,this.z=r},copy:function(){var e=new I;return e.x=this.x,e.y=this.y,e.z=this.z,e},round:function(){this.x=i.truncate(this.x*65536)/65536,this.y=i.truncate(this.y*65536)/65536,this.z=i.truncate(this.z*65536)/65536},add:function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},multiply:function(e){this.x*=e,this.y*=e,this.z*=e},normalize:function(){var e=this.length();e&&(this.x/=e,this.y/=e,this.z/=e)},rotateX:function(e){var t,r;r=this.y*Math.cos(e)-this.z*Math.sin(e),t=this.y*Math.sin(e)+this.z*Math.cos(e),this.z=t,this.y=r},rotateZ:function(e){var t,r;t=this.x*Math.cos(e)-this.y*Math.sin(e),r=this.x*Math.sin(e)+this.y*Math.cos(e),this.y=r,this.x=t},rotateY:function(e){var t,r;t=this.z*Math.cos(e)-this.x*Math.sin(e),r=this.z*Math.sin(e)+this.x*Math.cos(e),this.x=r,this.z=t},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},toString:function(){return i.format("{0}, {1}, {2}",this.x,this.y,this.z)},toSpherical:function(){var e,t,r=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z),n=Math.sqrt(this.x*this.x+this.z*this.z);return t=Math.asin(this.y/r),n?0<=this.x?e=Math.asin(this.z/n):e=Math.PI-Math.asin(this.z/n):e=0,xe.create((e+Math.PI)%(2*Math.PI),t+Math.PI/2)},toRaDec:function(){var e=this.toSpherical();return e.x=e.x/Math.PI*12,e.y=e.y/Math.PI*180-90,e},distanceToLine:function(e,t){var r=I.subtractVectors(t,e),n=I.subtractVectors(e,this),a=I.cross(r,n),l=a.length(),f=I.subtractVectors(t,e),c=f.length();return l/c},_transformByMatrics:function(e){var t=e.transform(this);this.x=t.x,this.y=t.y,this.z=t.z}};function xe(){this.x=0,this.y=0}xe.lerp=function(e,t,r){return xe.create(e.x*(1-r)+t.x*r,e.y*(1-r)+t.y*r)},xe.cartesianToSpherical2=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),r=Math.atan2(e.z,e.x),n=Math.asin(e.y/t);return xe.create(r/Math.PI*180,n/Math.PI*180)},xe.average3d=function(e,t){var r=V.geoTo3dDouble(e.y,e.x),n=V.geoTo3dDouble(t.y,t.x),a=I.addVectors(r,n);return a.multiply(.5),a.normalize(),xe.cartesianToSpherical2(a)},xe.create=function(e,t){var r=new xe;return r.x=e,r.y=t,r},xe.subtract=function(e,t){return xe.create(e.x-t.x,e.y-t.y)};var Xl={distance3d:function(e){var t=V.geoTo3dDouble(e.y,e.x),r=V.geoTo3dDouble(this.y,this.x),n=I.subtractVectors(t,r);return n.length()/Math.PI*180},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var e=this.get_length();e&&(this.x/=e,this.y/=e)},extend:function(e){this.x=this.x*e,this.y=this.y*e}};function Z(){this._m11=0,this._m12=0,this._m13=0,this._m14=0,this._m21=0,this._m22=0,this._m23=0,this._m24=0,this._m31=0,this._m32=0,this._m33=0,this._m34=0,this._offsetX=0,this._offsetY=0,this._offsetZ=0,this._m44=0,this._isNotKnownToBeIdentity=!1}Z.create=function(e,t,r,n,a,l,f,c,d,m,v,C,T,A,$,N){var F=new Z;return F._m11=e,F._m12=t,F._m13=r,F._m14=n,F._m21=a,F._m22=l,F._m23=f,F._m24=c,F._m31=d,F._m32=m,F._m33=v,F._m34=C,F._offsetX=T,F._offsetY=A,F._offsetZ=$,F._m44=N,F._isNotKnownToBeIdentity=!0,F},Z.get_identity=function(){var e=new Z;return e.set(Z._s_identity),e},Z.multiplyMatrix=function(e,t){return e.get__isDistinguishedIdentity()?t:t.get__isDistinguishedIdentity()?e:Z.create(e._m11*t._m11+e._m12*t._m21+e._m13*t._m31+e._m14*t._offsetX,e._m11*t._m12+e._m12*t._m22+e._m13*t._m32+e._m14*t._offsetY,e._m11*t._m13+e._m12*t._m23+e._m13*t._m33+e._m14*t._offsetZ,e._m11*t._m14+e._m12*t._m24+e._m13*t._m34+e._m14*t._m44,e._m21*t._m11+e._m22*t._m21+e._m23*t._m31+e._m24*t._offsetX,e._m21*t._m12+e._m22*t._m22+e._m23*t._m32+e._m24*t._offsetY,e._m21*t._m13+e._m22*t._m23+e._m23*t._m33+e._m24*t._offsetZ,e._m21*t._m14+e._m22*t._m24+e._m23*t._m34+e._m24*t._m44,e._m31*t._m11+e._m32*t._m21+e._m33*t._m31+e._m34*t._offsetX,e._m31*t._m12+e._m32*t._m22+e._m33*t._m32+e._m34*t._offsetY,e._m31*t._m13+e._m32*t._m23+e._m33*t._m33+e._m34*t._offsetZ,e._m31*t._m14+e._m32*t._m24+e._m33*t._m34+e._m34*t._m44,e._offsetX*t._m11+e._offsetY*t._m21+e._offsetZ*t._m31+e._m44*t._offsetX,e._offsetX*t._m12+e._offsetY*t._m22+e._offsetZ*t._m32+e._m44*t._offsetY,e._offsetX*t._m13+e._offsetY*t._m23+e._offsetZ*t._m33+e._m44*t._offsetZ,e._offsetX*t._m14+e._offsetY*t._m24+e._offsetZ*t._m34+e._m44*t._m44)},Z.lookAtLH=function(e,t,r){var n=I.subtractVectors(t,e);n.normalize();var a=I.cross(r,n);a.normalize();var l=I.cross(n,a),f=Z.create(a.x,l.x,n.x,0,a.y,l.y,n.y,0,a.z,l.z,n.z,0,-I.dot(a,e),-I.dot(l,e),-I.dot(n,e),1);return f},Z._createIdentity=function(){var e=Z.create(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e.set__isDistinguishedIdentity(!0),e},Z.equals=function(e,t){return e.get__isDistinguishedIdentity()||t.get__isDistinguishedIdentity()?e.get_isIdentity()===t.get_isIdentity():e.get_m11()===t.get_m11()&&e.get_m12()===t.get_m12()&&e.get_m13()===t.get_m13()&&e.get_m14()===t.get_m14()&&e.get_m21()===t.get_m21()&&e.get_m22()===t.get_m22()&&e.get_m23()===t.get_m23()&&e.get_m24()===t.get_m24()&&e.get_m31()===t.get_m31()&&e.get_m32()===t.get_m32()&&e.get_m33()===t.get_m33()&&e.get_m34()===t.get_m34()&&e.get_offsetX()===t.get_offsetX()&&e.get_offsetY()===t.get_offsetY()&&e.get_offsetZ()===t.get_offsetZ()?e.get_m44()===t.get_m44():!1},Z.fromMatrix2d=function(e){var t=Z._createIdentity();return t.set_m11(e.m11),t.set_m12(e.m12),t.set_m13(e.m13),t.set_m21(e.m21),t.set_m22(e.m22),t.set_m23(e.m23),t.set_m31(e.m31),t.set_m32(e.m32),t.set_m33(e.m33),t._isNotKnownToBeIdentity=!0,t},Z.rotationYawPitchRoll=function(e,t,r){var n=Z._rotationX(t),a=Z._rotationY(e),l=Z._rotationZ(r);return Z.multiplyMatrix(Z.multiplyMatrix(a,n),l)},Z._rotationY=function(e){var t=e,r=Z.get_identity();return r._m11=Math.cos(t),r._m22=1,r._m31=Math.sin(t),r._m13=-Math.sin(t),r._m33=Math.cos(t),r._isNotKnownToBeIdentity=!0,r},Z._rotationX=function(e){var t=e,r=Z.get_identity();return r._m11=1,r._m22=Math.cos(t),r._m32=-Math.sin(t),r._m23=Math.sin(t),r._m33=Math.cos(t),r._isNotKnownToBeIdentity=!0,r},Z._rotationZ=function(e){var t=e,r=Z.get_identity();return r._m11=Math.cos(t),r._m21=-Math.sin(t),r._m12=Math.sin(t),r._m22=Math.cos(t),r._m33=1,r._isNotKnownToBeIdentity=!0,r},Z._scaling=function(e,t,r){var n=Z.get_identity();return n._m11=e,n._m22=t,n._m33=r,n._isNotKnownToBeIdentity=!0,n},Z._translationXYZ=function(e,t,r){var n=Z.get_identity();return n.set_offsetX(e),n.set_offsetY(t),n.set_offsetZ(r),n._isNotKnownToBeIdentity=!0,n},Z.perspectiveFovLH=function(e,t,r,n){var a=1/Math.tan(e/2),l=a/t;return Z.create(l,0,0,0,0,a,0,0,0,0,n/(n-r),1,0,0,-r*n/(n-r),0)},Z.perspectiveOffCenterLH=function(e,t,r,n,a,l){return Z.create(2*a/(t-e),0,0,0,0,2*a/(n-r),0,0,(e+t)/(e-t),(n+r)/(r-n),l/(l-a),1,0,0,a*l/(a-l),0)},Z.invertMatrix=function(e){var t=e.clone();return t.invert(),t},Z.translation=function(e){return Z._translationXYZ(e.x,e.y,e.z)},Z.getMapMatrix=function(e,t,r,n){var a=0,l=0;a=-((e.get_lng()+180-t/2)/360),l=-(1-(e.get_lat()+90+r/2)/180);var f=new Si,c=0,d=0;return c=360/t,d=180/r,f=Si.multiply(f,Si.translation(a,l)),f=Si.multiply(f,Si.scaling(c,d)),n&&(f=Si.multiply(f,Si.translation(-.5,-.5)),f=Si.multiply(f,Si.rotation(n)),f=Si.multiply(f,Si.translation(.5,.5))),Z.fromMatrix2d(f)};var Yl={clone:function(){var e=new Z;return e.set(this),e},setIdentity:function(){this.set(Z._s_identity)},set:function(e){this._m11=e._m11,this._m12=e._m12,this._m13=e._m13,this._m14=e._m14,this._m21=e._m21,this._m22=e._m22,this._m23=e._m23,this._m24=e._m24,this._m31=e._m31,this._m32=e._m32,this._m33=e._m33,this._m34=e._m34,this._offsetX=e._offsetX,this._offsetY=e._offsetY,this._offsetZ=e._offsetZ,this._m44=e._m44,this._isNotKnownToBeIdentity=!0},floatArray:function(){var e=new Array(16);return e[0]=this._m11,e[1]=this._m12,e[2]=this._m13,e[3]=this._m14,e[4]=this._m21,e[5]=this._m22,e[6]=this._m23,e[7]=this._m24,e[8]=this._m31,e[9]=this._m32,e[10]=this._m33,e[11]=this._m34,e[12]=this._offsetX,e[13]=this._offsetY,e[14]=this._offsetZ,e[15]=this._m44,e},get_isIdentity:function(){return this.get__isDistinguishedIdentity()?!0:this._m11===1&&!this._m12&&!this._m13&&!this._m14&&!this._m21&&this._m22===1&&!this._m23&&!this._m24&&!this._m31&&!this._m32&&this._m33===1&&!this._m34&&!this._offsetX&&!this._offsetY&&!this._offsetZ&&this._m44===1?(this.set__isDistinguishedIdentity(!0),!0):!1},prepend:function(e){this.set(Z.multiplyMatrix(e,this))},append:function(e){this._multiply(e)},scale:function(e){this.get__isDistinguishedIdentity()?this._setScaleMatrix(e):(this._m11*=e.x,this._m12*=e.y,this._m13*=e.z,this._m21*=e.x,this._m22*=e.y,this._m23*=e.z,this._m31*=e.x,this._m32*=e.y,this._m33*=e.z,this._offsetX*=e.x,this._offsetY*=e.y,this._offsetZ*=e.z)},scalePrepend:function(e){this.get__isDistinguishedIdentity()?this._setScaleMatrix(e):(this._m11*=e.x,this._m12*=e.x,this._m13*=e.x,this._m14*=e.x,this._m21*=e.y,this._m22*=e.y,this._m23*=e.y,this._m24*=e.y,this._m31*=e.z,this._m32*=e.z,this._m33*=e.z,this._m34*=e.z)},scaleAt:function(e,t){if(this.get__isDistinguishedIdentity())this._setScaleMatrixCenter(e,t);else{var r=this._m14*t.x;this._m11=r+e.x*(this._m11-r),r=this._m14*t.y,this._m12=r+e.y*(this._m12-r),r=this._m14*t.z,this._m13=r+e.z*(this._m13-r),r=this._m24*t.x,this._m21=r+e.x*(this._m21-r),r=this._m24*t.y,this._m22=r+e.y*(this._m22-r),r=this._m24*t.z,this._m23=r+e.z*(this._m23-r),r=this._m34*t.x,this._m31=r+e.x*(this._m31-r),r=this._m34*t.y,this._m32=r+e.y*(this._m32-r),r=this._m34*t.z,this._m33=r+e.z*(this._m33-r),r=this._m44*t.x,this._offsetX=r+e.x*(this._offsetX-r),r=this._m44*t.y,this._offsetY=r+e.y*(this._offsetY-r),r=this._m44*t.z,this._offsetZ=r+e.z*(this._offsetZ-r)}},scaleAtPrepend:function(e,t){if(this.get__isDistinguishedIdentity())this._setScaleMatrixCenter(e,t);else{var r=t.x-t.x*e.x,n=t.y-t.y*e.y,a=t.z-t.z*e.z;this._offsetX+=this._m11*r+this._m21*n+this._m31*a,this._offsetY+=this._m12*r+this._m22*n+this._m32*a,this._offsetZ+=this._m13*r+this._m23*n+this._m33*a,this._m44+=this._m14*r+this._m24*n+this._m34*a,this._m11*=e.x,this._m12*=e.x,this._m13*=e.x,this._m14*=e.x,this._m21*=e.y,this._m22*=e.y,this._m23*=e.y,this._m24*=e.y,this._m31*=e.z,this._m32*=e.z,this._m33*=e.z,this._m34*=e.z}},translate:function(e){this.get__isDistinguishedIdentity()?this._setTranslationMatrix(e):(this._m11+=this._m14*e.x,this._m12+=this._m14*e.y,this._m13+=this._m14*e.z,this._m21+=this._m24*e.x,this._m22+=this._m24*e.y,this._m23+=this._m24*e.z,this._m31+=this._m34*e.x,this._m32+=this._m34*e.y,this._m33+=this._m34*e.z,this._offsetX+=this._m44*e.x,this._offsetY+=this._m44*e.y,this._offsetZ+=this._m44*e.z)},translatePrepend:function(e){this.get__isDistinguishedIdentity()?this._setTranslationMatrix(e):(this._offsetX+=this._m11*e.x+this._m21*e.y+this._m31*e.z,this._offsetY+=this._m12*e.x+this._m22*e.y+this._m32*e.z,this._offsetZ+=this._m13*e.x+this._m23*e.y+this._m33*e.z,this._m44+=this._m14*e.x+this._m24*e.y+this._m34*e.z)},transform:function(e){var t=new I;if(!this.get__isDistinguishedIdentity()){var r=e.x,n=e.y,a=e.z;if(t.x=r*this._m11+n*this._m21+a*this._m31+this._offsetX,t.y=r*this._m12+n*this._m22+a*this._m32+this._offsetY,t.z=r*this._m13+n*this._m23+a*this._m33+this._offsetZ,!this.get_isAffine()){var l=r*this._m14+n*this._m24+a*this._m34+this._m44;t.x/=l,t.y/=l,t.z/=l}}return t},_transformTo:function(e,t){t.x=e.x*this._m11+e.y*this._m21+e.z*this._m31+this._offsetX,t.y=e.x*this._m12+e.y*this._m22+e.z*this._m32+this._offsetY,t.z=e.x*this._m13+e.y*this._m23+e.z*this._m33+this._offsetZ;var r=e.x*this._m14+e.y*this._m24+e.z*this._m34+this._m44;t.x/=r,t.y/=r,t.z/=r},transformArray:function(e){if(e!=null)for(var t=0;t<e.length;t++)this._multiplyPoint(e[t])},projectArrayToScreen:function(e,t){if(e!=null&&t!=null)for(var r=this.get_isAffine(),n=0;n<e.length;n++){var a=e[n].x,l=e[n].y,f=e[n].z;if(r)t[n].x=a*this._m11+l*this._m21+f*this._m31+this._offsetX,t[n].y=a*this._m12+l*this._m22+f*this._m32+this._offsetY,t[n].z=a*this._m13+l*this._m23+f*this._m33+this._offsetZ;else{var c=a*this._m14+l*this._m24+f*this._m34+this._m44;t[n].x=(a*this._m11+l*this._m21+f*this._m31+this._offsetX)/c,t[n].y=(a*this._m12+l*this._m22+f*this._m32+this._offsetY)/c,t[n].z=(a*this._m13+l*this._m23+f*this._m33+this._offsetZ)/c}}},projectToScreen:function(e,t,r){var n=new I,a=e.x,l=e.y,f=e.z;if(this.get_isAffine())n.x=(a*this._m11+l*this._m21+f*this._m31+this._offsetX+.5)*t,n.y=(-(a*this._m12+l*this._m22+f*this._m32+this._offsetY)+.5)*r,n.z=a*this._m13+l*this._m23+f*this._m33+this._offsetZ;else{var c=a*this._m14+l*this._m24+f*this._m34+this._m44;n.x=((a*this._m11+l*this._m21+f*this._m31+this._offsetX)/c+.5)*t,n.y=(-((a*this._m12+l*this._m22+f*this._m32+this._offsetY)/c)+.5)*r,n.z=(a*this._m13+l*this._m23+f*this._m33+this._offsetZ)/c}return n},get_isAffine:function(){return this.get__isDistinguishedIdentity()?!0:!this._m14&&!this._m24&&!this._m34?this._m44===1:!1},get_determinant:function(){if(this.get__isDistinguishedIdentity())return 1;if(this.get_isAffine())return this._getNormalizedAffineDeterminant();var e=this._m13*this._m24-this._m23*this._m14,t=this._m13*this._m34-this._m33*this._m14,r=this._m13*this._m44-this._offsetZ*this._m14,n=this._m23*this._m34-this._m33*this._m24,a=this._m23*this._m44-this._offsetZ*this._m24,l=this._m33*this._m44-this._offsetZ*this._m34,f=this._m22*t-this._m32*e-this._m12*n,c=this._m12*a-this._m22*r+this._offsetY*e,d=this._m32*r-this._offsetY*t-this._m12*l,m=this._m22*l-this._m32*a+this._offsetY*n;return this._offsetX*f+this._m31*c+this._m21*d+this._m11*m},get_hasInverse:function(){return!Dr.isZero(this.get_determinant())},invert:function(){this._invertCore()},transpose:function(){var e=new Z;e.set(this),this._m12=e._m21,this._m13=e._m31,this._m14=e._offsetX,this._m23=e._m32,this._m24=e._offsetY,this._m34=e._offsetZ,this._m21=e._m12,this._m31=e._m13,this._offsetX=e._m14,this._m32=e._m23,this._offsetY=e._m24,this._offsetZ=e._m34},get_m11:function(){return this.get__isDistinguishedIdentity()?1:this._m11},set_m11:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m11=e,e},get_m12:function(){return this._m12},set_m12:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m12=e,e},get_m13:function(){return this._m13},set_m13:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m13=e,e},get_m14:function(){return this._m14},set_m14:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m14=e,e},get_m21:function(){return this._m21},set_m21:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m21=e,e},get_m22:function(){return this.get__isDistinguishedIdentity()?1:this._m22},set_m22:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m22=e,e},get_m23:function(){return this._m23},set_m23:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m23=e,e},get_m24:function(){return this._m24},set_m24:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m24=e,e},get_m31:function(){return this._m31},set_m31:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m31=e,e},get_m32:function(){return this._m32},set_m32:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m32=e,e},get_m33:function(){return this.get__isDistinguishedIdentity()?1:this._m33},set_m33:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m33=e,e},get_m34:function(){return this._m34},set_m34:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m34=e,e},get_m41:function(){return this.get_offsetX()},set_m41:function(e){return this.set_offsetX(e),e},get_m42:function(){return this.get_offsetY()},set_m42:function(e){return this.set_offsetY(e),e},get_m43:function(){return this.get_offsetZ()},set_m43:function(e){return this.set_offsetZ(e),e},get_offsetX:function(){return this._offsetX},set_offsetX:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._offsetX=e,e},get_offsetY:function(){return this._offsetY},set_offsetY:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._offsetY=e,e},get_offsetZ:function(){return this._offsetZ},set_offsetZ:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._offsetZ=e,e},get_m44:function(){return this.get__isDistinguishedIdentity()?1:this._m44},set_m44:function(e){return this.get__isDistinguishedIdentity()&&(this.set(Z._s_identity),this.set__isDistinguishedIdentity(!1)),this._m44=e,e},_setScaleMatrix:function(e){this._m11=e.x,this._m22=e.y,this._m33=e.z,this._m44=1,this.set__isDistinguishedIdentity(!1)},_setScaleMatrixCenter:function(e,t){this._m11=e.x,this._m22=e.y,this._m33=e.z,this._m44=1,this._offsetX=t.x-t.x*e.x,this._offsetY=t.y-t.y*e.y,this._offsetZ=t.z-t.z*e.z,this.set__isDistinguishedIdentity(!1)},_setTranslationMatrix:function(e){this._m11=this._m22=this._m33=this._m44=1,this._offsetX=e.x,this._offsetY=e.y,this._offsetZ=e.z,this.set__isDistinguishedIdentity(!1)},_multiplyPoint:function(e){if(!this.get__isDistinguishedIdentity()){var t=e.x,r=e.y,n=e.z;if(e.x=t*this._m11+r*this._m21+n*this._m31+this._offsetX,e.y=t*this._m12+r*this._m22+n*this._m32+this._offsetY,e.z=t*this._m13+r*this._m23+n*this._m33+this._offsetZ,!this.get_isAffine()){var a=t*this._m14+r*this._m24+n*this._m34+this._m44;e.x/=a,e.y/=a,e.z/=a}}},multiplyVector:function(e){if(!this.get__isDistinguishedIdentity()){var t=e.x,r=e.y,n=e.z;e.x=t*this._m11+r*this._m21+n*this._m31,e.y=t*this._m12+r*this._m22+n*this._m32,e.z=t*this._m13+r*this._m23+n*this._m33}},_getNormalizedAffineDeterminant:function(){var e=this._m12*this._m23-this._m22*this._m13,t=this._m32*this._m13-this._m12*this._m33,r=this._m22*this._m33-this._m32*this._m23;return this._m31*e+this._m21*t+this._m11*r},_normalizedAffineInvert:function(){var e=this._m12*this._m23-this._m22*this._m13,t=this._m32*this._m13-this._m12*this._m33,r=this._m22*this._m33-this._m32*this._m23,n=this._m31*e+this._m21*t+this._m11*r;if(Dr.isZero(n))return!1;var a=this._m21*this._m13-this._m11*this._m23,l=this._m11*this._m33-this._m31*this._m13,f=this._m31*this._m23-this._m21*this._m33,c=this._m11*this._m22-this._m21*this._m12,d=this._m11*this._m32-this._m31*this._m12,m=this._m11*this._offsetY-this._offsetX*this._m12,v=this._m21*this._m32-this._m31*this._m22,C=this._m21*this._offsetY-this._offsetX*this._m22,T=this._m31*this._offsetY-this._offsetX*this._m32,A=this._m23*m-this._offsetZ*c-this._m13*C,$=this._m13*T-this._m33*m+this._offsetZ*d,N=this._m33*C-this._offsetZ*v-this._m23*T,F=c,z=-d,Y=v,W=1/n;return this._m11=r*W,this._m12=t*W,this._m13=e*W,this._m21=f*W,this._m22=l*W,this._m23=a*W,this._m31=Y*W,this._m32=z*W,this._m33=F*W,this._offsetX=N*W,this._offsetY=$*W,this._offsetZ=A*W,!0},_invertCore:function(){if(!this.get__isDistinguishedIdentity()){if(this.get_isAffine())return this._normalizedAffineInvert();var e=this._m13*this._m24-this._m23*this._m14,t=this._m13*this._m34-this._m33*this._m14,r=this._m13*this._m44-this._offsetZ*this._m14,n=this._m23*this._m34-this._m33*this._m24,a=this._m23*this._m44-this._offsetZ*this._m24,l=this._m33*this._m44-this._offsetZ*this._m34,f=this._m22*t-this._m32*e-this._m12*n,c=this._m12*a-this._m22*r+this._offsetY*e,d=this._m32*r-this._offsetY*t-this._m12*l,m=this._m22*l-this._m32*a+this._offsetY*n,v=this._offsetX*f+this._m31*c+this._m21*d+this._m11*m;if(Dr.isZero(v))return!1;var C=this._m11*n-this._m21*t+this._m31*e,T=this._m21*r-this._offsetX*e-this._m11*a,A=this._m11*l-this._m31*r+this._offsetX*t,$=this._m31*a-this._offsetX*n-this._m21*l;e=this._m11*this._m22-this._m21*this._m12,t=this._m11*this._m32-this._m31*this._m12,r=this._m11*this._offsetY-this._offsetX*this._m12,n=this._m21*this._m32-this._m31*this._m22,a=this._m21*this._offsetY-this._offsetX*this._m22,l=this._m31*this._offsetY-this._offsetX*this._m32;var N=this._m13*n-this._m23*t+this._m33*e,F=this._m23*r-this._offsetZ*e-this._m13*a,z=this._m13*l-this._m33*r+this._offsetZ*t,Y=this._m33*a-this._offsetZ*n-this._m23*l,W=this._m24*t-this._m34*e-this._m14*n,ee=this._m14*a-this._m24*r+this._m44*e,ne=this._m34*r-this._m44*t-this._m14*l,ae=this._m24*l-this._m34*a+this._m44*n,de=1/v;this._m11=m*de,this._m12=d*de,this._m13=c*de,this._m14=f*de,this._m21=$*de,this._m22=A*de,this._m23=T*de,this._m24=C*de,this._m31=ae*de,this._m32=ne*de,this._m33=ee*de,this._m34=W*de,this._offsetX=Y*de,this._offsetY=z*de,this._offsetZ=F*de,this._m44=N*de}return!0},get__isDistinguishedIdentity:function(){return!this._isNotKnownToBeIdentity},set__isDistinguishedIdentity:function(e){return this._isNotKnownToBeIdentity=!e,e},_multiply:function(e){this.set(Z.multiplyMatrix(this,e))}};function Si(){this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=1,this.m23=0,this.m31=0,this.m32=0,this.m33=1}Si.create=function(e,t,r,n,a,l,f,c,d){var m=new Si;return m.m11=e,m.m12=t,m.m13=r,m.m21=n,m.m22=a,m.m23=l,m.m31=f,m.m32=c,m.m33=d,m},Si.rotation=function(e){var t=new Si;return t.m11=Math.cos(e),t.m21=-Math.sin(e),t.m12=Math.sin(e),t.m22=Math.cos(e),t},Si.translation=function(e,t){var r=new Si;return r.m31=e,r.m32=t,r},Si.scaling=function(e,t){var r=new Si;return r.m11=e,r.m22=t,r},Si.multiply=function(e,t){return Si.create(e.m11*t.m11+e.m12*t.m21+e.m13*t.m31,e.m11*t.m12+e.m12*t.m22+e.m13*t.m32,e.m11*t.m13+e.m12*t.m23+e.m13*t.m33,e.m21*t.m11+e.m22*t.m21+e.m23*t.m31,e.m21*t.m12+e.m22*t.m22+e.m23*t.m32,e.m21*t.m13+e.m22*t.m23+e.m23*t.m33,e.m31*t.m11+e.m32*t.m21+e.m33*t.m31,e.m31*t.m12+e.m32*t.m22+e.m33*t.m32,e.m31*t.m13+e.m32*t.m23+e.m33*t.m33)},Si.rotateAt=function(e,t){var r=Si.translation(-t.x,-t.y),n=Si.rotation(e),a=Si.translation(t.x,t.y);return Si.multiply(Si.multiply(r,n),a)};var jl={_transformPoints:function(e){for(var t=i.enumerate(e);t.moveNext();){var r=t.current;this.multiplyPoint(r)}},multiplyPoint:function(e){var t=e.x,r=e.y;e.x=t*this.m11+r*this.m21+this.m31,e.y=t*this.m12+r*this.m22+this.m32}};function Dr(){}Dr.isZero=function(e){return Math.abs(e)<222044604925031e-64},Dr.isOne=function(e){return Math.abs(e-1)<222044604925031e-64},Dr.radiansToDegrees=function(e){return e*180/Math.PI},Dr.degreesToRadians=function(e){return e*Math.PI/180},Dr.clamp=function(e,t,r){return Math.max(t,Math.min(e,r))};function fo(e,t,r,n){this.a=0,this.b=0,this.c=0,this.d=0,this.a=e,this.b=t,this.c=r,this.d=n}var Wl={normalize:function(){var e=Math.sqrt(this.a*this.a+this.b*this.b+this.c*this.c);this.a/=e,this.b/=e,this.c/=e,this.d/=e},dot:function(e){return this.b*e.y+this.c*e.z+this.d*e.w+this.a*e.x}};function Ka(e,t,r,n){this.x=0,this.y=0,this.z=0,this.w=0,this.x=e,this.y=t,this.z=r,this.w=n}var Kl={};function nn(){this.x=0,this.y=0,this.z=0,this.nx=0,this.ny=0,this.nz=0,this.tu=0,this.tv=0,this.tu1=0,this.tv1=0}nn.create2UV=function(e,t,r,n,a,l){var f=new nn;return f.x=e.x,f.y=e.y,f.z=e.z,f.nx=t.x,f.ny=t.y,f.nz=t.z,f.tu=r,f.tv=n,f.tu1=a,f.tv1=l,f},nn.create=function(e,t,r,n){var a=new nn;a.x=e.x,a.y=e.y,a.z=e.z,a.nx=t.x,a.ny=t.y,a.nz=t.z,a.tu=r,a.tv=n;var l=V.cartesianToSpherical2(t);return a.tu1=(l.get_lng()+180)/360,a.tv1=1-(l.get_lat()+90)/180,a},nn.createLong2UV=function(e,t,r,n,a,l,f,c,d,m){var v=new nn;return v.x=e,v.y=t,v.z=r,v.nx=n,v.ny=a,v.nz=l,v.tu=f,v.tv=c,v.tu1=d,v.tv1=m,v},nn.get_strideSize=function(){return 40};var Jl={get_lat:function(){return(1-this.tv1)*180-90},set_lat:function(e){return this.tv1=1-(e+90)/180,e},get_lng:function(){return this.tu1*360-180},set_lng:function(e){return this.tu1=(e+180)/360,e},createLong:function(e,t,r,n,a,l,f,c){var d=new nn;d.x=e,d.y=t,d.z=r,d.nx=n,d.ny=a,d.nz=l,d.tu=f,d.tv=c;var m=V.cartesianToSpherical2(I.create(this.nx,this.ny,this.nz));return d.tu1=(m.get_lng()+180)/360,d.tv1=1-(m.get_lat()+90)/180,d},get_normal:function(){return I.create(this.nx,this.ny,this.nz)},set_normal:function(e){return this.nx=e.x,this.ny=e.y,this.nz=e.z,e},get_position:function(){return I.create(this.x,this.y,this.y)},set_position:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,e},toString:function(){return i.format("X={0}, Y={1}, Z={2}, Nx={3}, Ny={4}, Nz={5}, U={6}, V={7}, U1={8}, U2={9}",this.x,this.y,this.z,this.nx,this.ny,this.nz,this.tu,this.tv,this.tu1,this.tv1)}};function yr(){this.x=0,this.y=0,this.z=0,this.nx=0,this.ny=0,this.nz=0,this.tu=0,this.tv=0}yr.createShort=function(e,t,r,n){var a=new yr;return a.x=e.x,a.y=e.y,a.z=e.z,a.nx=t.x,a.ny=t.y,a.nz=t.z,a.tu=r,a.tv=n,a},yr._create=function(e,t,r,n,a,l,f,c){var d=new yr;return d.x=e,d.y=t,d.z=r,d.nx=n,d.ny=a,d.nz=l,d.tu=f,d.tv=c,d},yr.createUV=function(e,t,r){var n=new yr;return n.x=e.x,n.y=e.y,n.z=e.z,n.nx=t.x,n.ny=t.y,n.nz=t.z,n.tu=r.x,n.tv=r.y,n};var Zl={createLong:function(e,t,r,n,a,l,f,c){var d=new nn;return d.x=e,d.y=t,d.z=r,d.nx=n,d.ny=a,d.nz=l,d.tu=f,d.tv=c,d},get_normal:function(){return I.create(this.nx,this.ny,this.nz)},set_normal:function(e){return this.nx=e.x,this.ny=e.y,this.nz=e.z,e},get_position:function(){return I.create(this.x,this.y,this.z)},set_position:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,e},toString:function(){return i.format("X={0}, Y={1}, Z={2}, Nx={3}, Ny={4}, Nz={5}, U={6}, V={7}, U1={8}, U2={9}",this.x,this.y,this.z,this.nx,this.ny,this.nz,this.tu,this.tv)}};function ua(){this.radius=0}ua._create=function(e,t){var r=new ua;return r.center=e,r.radius=t,r};var Ql={};function An(){}An.findEnclosingSphereFast=function(e){for(var t=new ua,r=e.length,n=I.zero,a=0;a<r;++a)n.add(e[a]);n.multiply(1/r);for(var l=0,a=0;a<r;++a){var f=I.getLengthSq(I.subtractVectors(e[a],n));f>l&&(l=f)}return l=Math.sqrt(l),t.center=n,t.radius=l,t},An.findEnclosingSphere=function(e){var t=new I,r=0,n=e.length,a,l,f,c,d,m,v,C,T,A,$,N,F=new I,z=new I,Y=new I,W=new I,ee=new I,ne=new I,ae=new I,de=new I;for(F.x=Y.y=ee.z=1e8,z.x=W.y=ne.z=-1e9,a=0;a<n;a++){var se=e[a];se.x<F.x&&(F=se),se.x>z.x&&(z=se),se.y<Y.y&&(Y=se),se.y>W.y&&(W=se),se.z<ee.z&&(ee=se),se.z>ne.z&&(ne=se)}for(l=z.x-F.x,f=z.y-F.y,c=z.z-F.z,m=l*l+f*f+c*c,l=W.x-Y.x,f=W.y-Y.y,c=W.z-Y.z,v=l*l+f*f+c*c,l=ne.x-ee.x,f=ne.y-ee.y,c=ne.z-ee.z,C=l*l+f*f+c*c,ae=F,de=z,T=m,v>T&&(T=v,ae=Y,de=W),C>T&&(ae=ee,de=ne),t.x=(ae.x+de.x)/2,t.y=(ae.y+de.y)/2,t.z=(ae.z+de.z)/2,l=de.x-t.x,f=de.y-t.y,c=de.z-t.z,d=l*l+f*f+c*c,r=Math.sqrt(d),a=0;a<n;a++){var se=e[a];l=se.x-t.x,f=se.y-t.y,c=se.z-t.z,$=l*l+f*f+c*c,$>d&&(A=Math.sqrt($),r=(r+A)/2,d=r*r,N=A-r,t.x=(r*t.x+N*se.x)/A,t.y=(r*t.y+N*se.y)/A,t.z=(r*t.z+N*se.z)/A)}return ua._create(t,r)};var eu={};function vn(){this.parent=null,this.isProxy=!1,this._versionDependent=!1,this._readOnly=!0,this._dirty=!1,this._thumbnail=null,this._proxyFolder=null,this._lastUpdate=new Date,this._childList=[],this._itemsField=[],this._imagesets=[],this._tours=[],this._folders=[],this._places=[],this._groupField=0,this._refreshTypeField=0,this._refreshTypeFieldSpecified=!1,this._browseableField=!0,this._browseableFieldSpecified=!1,this._searchableField=!1,this._typeField=0,this._communityIdField=0,this._componentIdField=0,this._permissionField=0}var tu={toString:function(){return this._nameField},get_versionDependent:function(){return this._versionDependent},set_versionDependent:function(e){this._versionDependent=e;for(var t=i.enumerate(this._folders);t.moveNext();){var r=t.current;r.set_versionDependent(this._versionDependent)}return e},get_readOnly:function(){return this._readOnly},set_readOnly:function(e){return this._readOnly=e,e},get_dirty:function(){return this._dirty},set_dirty:function(e){return this._dirty=e,e},loadFromUrlWithErrorCallback:function(e,t,r){this._onError=r,this.loadFromUrl(e,t)},loadFromUrl:function(e,t){this._onComplete=t,this._webFile=new fr(Nt.singleton.rewrite(e,1)),this._webFile.onStateChange=i.bind("_loadData",this),this._webFile.send()},_loadData:function(){if(this._webFile.get_state()===2)console.error(this._webFile.get_message()),this._onError!=null&&this._onError();else if(this._webFile.get_state()===1){var e=ye.selectSingleNode(this._webFile.getXml(),"Folder");if(e==null){var t=this._webFile.getXml();t!=null&&(e=ye.selectSingleNode(t,"Folder"))}e!=null&&(this._clearChildren(),this._parseXML(e)),this._onComplete!=null&&this._onComplete()}},_clearChildren:function(){this._folders.length=0,this._tours.length=0,this._places.length=0,this.get_imagesets().length=0},_parseXML:function(e){e.attributes.getNamedItem("Name")!=null?this._nameField=e.attributes.getNamedItem("Name").nodeValue:this._nameField="",e.attributes.getNamedItem("Url")!=null&&(this._urlField=e.attributes.getNamedItem("Url").nodeValue),e.attributes.getNamedItem("Thumbnail")!=null&&(this._thumbnailUrlField=e.attributes.getNamedItem("Thumbnail").nodeValue);for(var t=i.enumerate(e.childNodes);t.moveNext();){var r=t.current;switch(r.nodeName){case"Folder":var n=new vn;n.parent=this,n._parseXML(r),this._folders.push(n);break;case"Place":this._places.push(hr._fromXml(r));break;case"ImageSet":this.get_imagesets().push(Mi.fromXMLNode(r));break;case"Tour":this.get_tours().push(Ra._fromXml(r));break}}},addChildFolder:function(e){this._folders.push(e),this._dirty=!0},removeChildFolder:function(e){i.remove(this._folders,e),this._dirty=!0},addChildPlace:function(e){this._places.push(e),this._dirty=!0},removeChildPlace:function(e){i.remove(this._places,e),this._dirty=!0},get_thumbnail:function(){return this._thumbnail},set_thumbnail:function(e){return this._thumbnail=e,e},get_bounds:function(){return this._bounds},set_bounds:function(e){return this._bounds=e,e},get_isImage:function(){return!1},get_isTour:function(){return!1},get_isFolder:function(){return!0},get_isCloudCommunityItem:function(){return!!this._communityIdField||this._permissionField>0},refresh:function(){this._proxyFolder==null&&(this._proxyFolder=new vn,this._proxyFolder.isProxy=!0,this._proxyFolder.parent=this.parent),this._proxyFolder.loadFromUrlWithErrorCallback(this._urlField,this._childReadyCallback,this._childReadyCallback),this._childReadyCallback=null},childLoadCallback:function(e){this._childReadyCallback=e,this.get_children(),this._proxyFolder==null&&e()},get_children:function(){if(i.emptyString(this._urlField)){if(this._childList.length=0,this.parent!=null){var e=new Ps;e.parent=this.parent,this._childList.push(e)}if(this.get_folders()!=null)for(var t=i.enumerate(this.get_folders());t.moveNext();){var r=t.current;this._childList.push(r)}if(this.get_imagesets()!=null)for(var n=i.enumerate(this.get_imagesets());n.moveNext();){var a=n.current;this._childList.push(a)}if(this.get_places()!=null)for(var l=i.enumerate(this.get_places());l.moveNext();){var f=l.current;this._childList.push(f)}if(this.get_tours()!=null)for(var c=i.enumerate(this.get_tours());c.moveNext();){var d=c.current;this._childList.push(d)}return this._childList}else{var m=(this._lastUpdate-i.now())/1e3;return(this.get_refreshType()===1||this._proxyFolder==null||!this.get_refreshType()&&parseInt(this._refreshIntervalField)<m)&&this.refresh(),this._proxyFolder!=null?this._proxyFolder.get_children():null}},get_msrCommunityId:function(){return this._communityIdField},set_msrCommunityId:function(e){return this._communityIdField=e,e},get_msrComponentId:function(){return this._componentIdField},set_msrComponentId:function(e){return this._componentIdField=e,e},get_permission:function(){return this._permissionField},set_permission:function(e){return this._permissionField=e,e},get_folders:function(){return this._folders},set_folders:function(e){return this._folders=e,e},get_places:function(){return this._places},set_places:function(e){return this._places=e,e},get_imagesets:function(){return this._imagesets},set_imagesets:function(e){return this._imagesets=e,e},get_tours:function(){return this._tours},set_tours:function(e){return this._tours=e,e},get_name:function(){return this._nameField==null?"":this._nameField},set_name:function(e){return this._nameField=e,e},get_group:function(){return this._groupField},set_group:function(e){return this._groupField=e,e},get_url:function(){return this._urlField},set_url:function(e){return this._urlField=e,e},get_thumbnailUrl:function(){return i.emptyString(this._thumbnailUrlField)?Nt.singleton.engineAssetUrl("thumb_folder.jpg"):this._thumbnailUrlField},set_thumbnailUrl:function(e){return this._thumbnailUrlField=e,e},get_refreshType:function(){return this._refreshTypeField},set_refreshType:function(e){return this._refreshTypeField=e,this.set_refreshTypeSpecified(!0),e},get_refreshTypeSpecified:function(){return this._refreshTypeFieldSpecified},set_refreshTypeSpecified:function(e){return this._refreshTypeFieldSpecified=e,e},get_refreshInterval:function(){return this._refreshIntervalField},set_refreshInterval:function(e){return this._refreshIntervalField=e,e},get_browseable:function(){return this._browseableField},set_browseable:function(e){return this._browseableField=e,this._browseableFieldSpecified=!0,e},get_browseableSpecified:function(){return this._browseableFieldSpecified},set_browseableSpecified:function(e){return this._browseableFieldSpecified=e,e},get_searchable:function(){return this._searchableField},set_searchable:function(e){return this._searchableField=e,e},get_type:function(){return this._typeField},set_type:function(e){return this._typeField=e,e},get_subType:function(){return this._subTypeField},set_subType:function(e){return this._subTypeField=e,e}};function $t(){this._items=[],this.top=10,this.left=10,this._indexTouchDown=-1,this._mouseDown=!1,this._lastX=0,this._lastY=0,this._ignoreClick=!1,this._thumbnailSize=0,this._horzSpacing=110,this._vertSpacing=75,this._thumbHeight=65,this._thumbWidth=110,this._horzMultiple=110,this._rowCount=1,this._colCount=6,this._dragging=!1,this._startIndex=0,this._startOffset=0,this._selectedItem=-1,this._hoverItem=-1,this.showAddButton=!1,this.width=0,this.height=0,this._addButtonHover=!1,this.imageClicked=!1}$t.create=function(){var e=new $t;return e.height=85,e.width=1920,e.canvas=document.createElement("canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.setup(),e.loadImages(),e};var iu={setup:function(){this.canvas.addEventListener("click",i.bind("onClick",this),!1),this.canvas.addEventListener("dblclick",i.bind("onDoubleClick",this),!1),this.canvas.addEventListener("mousemove",i.bind("onMouseMove",this),!1),this.canvas.addEventListener("mouseup",i.bind("onMouseUp",this),!1),this.canvas.addEventListener("mousedown",i.bind("onMouseDown",this),!1),this.canvas.addEventListener("touchstart",i.bind("onTouchStart",this),!1),this.canvas.addEventListener("touchmove",i.bind("onTouchMove",this),!1),this.canvas.addEventListener("touchend",i.bind("onTouchEnd",this),!1),this.canvas.addEventListener("mouseout",i.bind("onMouseUp",this),!1)},onTouchStart:function(e){var t=e;t.preventDefault(),this._mouseDown=!0,this._lastX=t.targetTouches[0].pageX,this._lastY=t.targetTouches[0].pageY,this._indexTouchDown=this._getItemIndexFromCursor(xe.create(t.targetTouches[0].pageX,t.targetTouches[0].pageY))},onTouchMove:function(e){var t=e;if(t.preventDefault(),this._mouseDown){if(t.targetTouches[0].pageX-this._lastX,t.targetTouches[0].pageY-this._lastY,this._mouseDown&&(this._dragging=!0),this._dragging){var n=Math.round((t.targetTouches[0].pageX-this._lastX+this._startOffset)/this._horzSpacing),a=Math.round(t.targetTouches[0].pageX-this._lastX+this._startOffset-n*this._horzSpacing);this._startOffset=a,this._startIndex-=n,this._startIndex<0&&(this._startOffset-=this._horzSpacing*this._startIndex,this._startIndex=0),this._lastX=t.targetTouches[0].pageX,this._lastY=t.targetTouches[0].pageY}else{var r=this._getItemIndexFromCursor(xe.create(t.targetTouches[0].pageX,t.targetTouches[0].pageY));this._hoverItem!==r&&(this._hoverItem=r)}this.refresh()}},onTouchEnd:function(e){var t=e;t.preventDefault(),this._dragging?(this._dragging=!1,this._ignoreClick=!0):this._indexTouchDown>-1&&this._mouseDown&&this._handleClick(this._indexTouchDown),this._startOffset=0,this._mouseDown=!1,this.refresh()},onClick:function(e){if(this._ignoreClick)this._ignoreClick=!1;else{var t=this._getItemIndexFromCursor(xe.create(e.offsetX,e.offsetY));this._handleClick(t)}},_handleClick:function(e){var t=this;if(e>-1){if(i.canCast(this._items[e],hr)){var r=this._items[e];q.singleton.gotoTarget(r,!1,!1,!0);return}if(i.canCast(this._items[e],Mi)){var n=this._items[e];q.singleton.renderContext.set_backgroundImageset(n);return}if(i.canCast(this._items[e],Ra)){var a=this._items[e];q.singleton.playTour(a.get_tourUrl());return}if(i.canCast(this._items[e],vn)){var l=this._items[e];this._startIndex=0,l.childLoadCallback(function(){t._items=l.get_children(),t.refresh()});return}if(i.canCast(this._items[e],Ps)){var f=this._items[e];f.parent!=null&&(this._startIndex=0,f.parent.childLoadCallback(function(){t._items=f.parent.get_children(),t.refresh()}));return}}},onDoubleClick:function(e){Ct.renderingOn=!Ct.renderingOn},onGestureChange:function(e){var t=e;this._mouseDown=!1,t.scale},onMouseDown:function(e){this._mouseDown=!0,this._lastX=Li.offsetX(this.canvas,e),this._lastY=Li.offsetY(this.canvas,e)},onMouseMove:function(e){if(this._mouseDown&&(this._dragging=!0),this._dragging){var r=Math.round((Li.offsetX(this.canvas,e)-this._lastX+this._startOffset)/this._horzSpacing),n=Math.round(Li.offsetX(this.canvas,e)-this._lastX+this._startOffset-r*this._horzSpacing);this._startOffset=n,this._startIndex-=r,this._startIndex<0&&(this._startOffset-=this._horzSpacing*this._startIndex,this._startIndex=0),this._lastX=Li.offsetX(this.canvas,e),this._lastY=Li.offsetY(this.canvas,e)}else{var t=this._getItemIndexFromCursor(xe.create(Li.offsetX(this.canvas,e),Li.offsetY(this.canvas,e)));this._hoverItem!==t&&(this._hoverItem=t)}this.refresh()},onMouseUp:function(e){this._dragging&&(this._startOffset=0,this._dragging=!1,this._ignoreClick=!0),this._mouseDown=!1,this.refresh()},loadImages:function(){var e=this;!$t._imagesLoaded&&!$t._downloading&&($t._imageLoadCount=0,$t._imagesLoaded=!1,$t._downloading=!0,$t._bmpBackground=document.createElement("img"),$t._bmpBackground.src="images/thumbBackground.png",$t._bmpBackground.addEventListener("load",function(t){$t._imageLoadCount++,$t._imageLoadCount===5&&($t._downloading=!1,$t._imagesLoaded=!0,e.refresh())},!1),$t._bmpBackgroundHover=document.createElement("img"),$t._bmpBackgroundHover.src="images/thumbBackgroundHover.png",$t._bmpBackgroundHover.addEventListener("load",function(t){$t._imageLoadCount++,$t._imageLoadCount===5&&($t._downloading=!1,$t._imagesLoaded=!0,e.refresh())},!1),$t._bmpBackgroundWide=document.createElement("img"),$t._bmpBackgroundWide.src="images/thumbBackgroundWide.png",$t._bmpBackgroundWide.addEventListener("load",function(t){$t._imageLoadCount++,$t._imageLoadCount===5&&($t._downloading=!1,$t._imagesLoaded=!0,e.refresh())},!1),$t._bmpBackgroundWideHover=document.createElement("img"),$t._bmpBackgroundWideHover.src="images/thumbBackgroundWideHover.png",$t._bmpBackgroundWideHover.addEventListener("load",function(t){$t._imageLoadCount++,$t._imageLoadCount===5&&($t._downloading=!1,$t._imagesLoaded=!0,e.refresh())},!1),$t._bmpDropInsertMarker=document.createElement("img"),$t._bmpDropInsertMarker.src="images/dragInsertMarker.png",$t._bmpDropInsertMarker.addEventListener("load",function(t){$t._imageLoadCount++,$t._imageLoadCount===5&&($t._downloading=!1,$t._imagesLoaded=!0,e.refresh())},!1))},get_thumbnailSize:function(){return this._thumbnailSize},set_thumbnailSize:function(e){switch(this._thumbnailSize=e,e){case 1:this._horzSpacing=180,this._vertSpacing=75,this._thumbHeight=65,this._thumbWidth=180;break;case 0:this._horzSpacing=110,this._vertSpacing=75,this._thumbHeight=65,this._thumbWidth=110;break}return this._updatePaginator(),this.refresh(),e},refresh:function(){this.width!==window.innerWidth&&(this.width=window.innerWidth,this.canvas.width=this.canvas.width),this.paint()},get_rowCount:function(){return this._rowCount},set_rowCount:function(e){return this._rowCount!==e&&(this._rowCount=e,this._updatePaginator()),e},_updatePaginator:function(){},get_colCount:function(){return this._colCount},set_colCount:function(e){return this._colCount!==e&&(this._colCount=e,this._updatePaginator()),e},get_itemsPerPage:function(){return this._rowCount*this._colCount},get_currentPage:function(){return this._startIndex/this.get_itemsPerPage()},get_pageCount:function(){return Math.max(1,(this._items.length+this.get_itemsPerPage()-1+(this.showAddButton?1:0))/this.get_itemsPerPage())},paint:function(){var e=this,t=this.canvas.getContext("2d");if(t.fillStyle="rgb(20, 22, 31)",t.fillRect(0,0,this.width,this.height),!!$t._imagesLoaded){var r=this.height-10*2,n=this.width-10*2;this.set_rowCount(Math.round(Math.max(r/this._thumbHeight,1))),this.set_colCount(Math.round(Math.max(n/this._horzSpacing,1))),this._horzMultiple=(n+13)/this.get_colCount(),this._startIndex=Math.round(this._startIndex/this.get_itemsPerPage()*this.get_itemsPerPage());for(var a,l=this._startIndex,f=0;f<this._rowCount;f++){for(var c=0;c<this._colCount;c++){if(l>=this._items.length){(!this._items.length||this.showAddButton)&&(a=Ki.create(this.left+c*this._horzMultiple+3+this._startOffset,this.top+f*this._vertSpacing,this._thumbWidth-10,60),t.drawImage(this._thumbnailSize===1?$t._bmpBackgroundWide:$t._bmpBackground,i.truncate(c*this._horzMultiple)+this._startOffset,f*this._vertSpacing));break}a=Ki.create(this.left+c*this._horzMultiple+3+this._startOffset,this.top+f*this._vertSpacing,this._thumbWidth-14,60);var d="white";l===this._hoverItem||l===this._selectedItem&&this._hoverItem===-1?(t.drawImage(this._thumbnailSize===1?$t._bmpBackgroundWideHover:$t._bmpBackgroundHover,this.left+i.truncate(c*this._horzMultiple)+this._startOffset,this.top+f*this._vertSpacing),d="yellow"):t.drawImage(this._thumbnailSize===1?$t._bmpBackgroundWide:$t._bmpBackground,this.left+i.truncate(c*this._horzMultiple)+this._startOffset,this.top+f*this._vertSpacing),this._items[l].set_bounds(Ki.create(this.left+c*this._horzMultiple+this._startOffset,this.top+f*this._vertSpacing,i.truncate(this._horzMultiple),this._vertSpacing));try{var m=this._items[l].get_thumbnail();m!=null?(t.drawImage(m,this.left+c*this._horzMultiple+2+this._startOffset,this.top+f*this._vertSpacing+3),t.strokeStyle="rgb(0,0,0)",t.rect(this.left+i.truncate(c*this._horzMultiple)+2+this._startOffset,this.top+f*this._vertSpacing+3,this._items[l].get_thumbnail().width,this._items[l].get_thumbnail().height)):(this._items[l].set_thumbnail(document.createElement("img")),this._items[l].get_thumbnail().src=this._items[l].get_thumbnailUrl(),this._items[l].get_thumbnail().addEventListener("load",function(v){e.refresh()},!1))}catch{}t.fillStyle=d,t.strokeStyle=d,t.lineWidth=1,t.font="normal 8pt Arial",t.fillText(this._items[l].get_name(),a.x,a.y+a.height,a.width),l++}if(l>=this._items.length)break}}},_getItemIndexFromCursor:function(e){var t=xe.create(e.x+this.left,e.y+this.top);this.imageClicked=!1;var r=-1,n=i.truncate(t.x/this._horzMultiple),a=i.truncate(t.x%this._horzMultiple);if(n>=this._colCount||n<0)return-1;var l=i.truncate(t.y/this._vertSpacing),f=i.truncate(t.y%this._vertSpacing);return l>=this._rowCount||l<0||(r=this._startIndex+l*this._colCount+n,r===this._items.length?this._addButtonHover=!0:this._addButtonHover=!1,r>this._items.length-1)?-1:(this._items[r].get_isImage()&&f<16&&a>78&&(this.imageClicked=!0),r)},_addItems:function(e){this._items=e}};function Ps(){this.parent=null,this._bounds=new Ki}var ru={get_name:function(){return"Up Level"},get_thumbnail:function(){return this._thumbnail},set_thumbnail:function(e){return this._thumbnail=e,e},get_thumbnailUrl:function(){return Nt.singleton.engineAssetUrl("thumb_folderup.jpg")},set_thumbnailUrl:function(e){return e},get_bounds:function(){return this._bounds},set_bounds:function(e){return this._bounds=e,e},get_isImage:function(){return!1},get_isTour:function(){return!1},get_isFolder:function(){return!1},get_isCloudCommunityItem:function(){return!1},get_readOnly:function(){return!1},get_children:function(){return this.parent==null?[]:this.parent.get_children()}};function nu(e){this.buffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,this.buffer),O.prepDevice.bufferData(34963,e,35044)}var au={};function _o(e){this.buffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,this.buffer),O.prepDevice.bufferData(34963,e,35044)}var su={dispose:function(){O.prepDevice.bindBuffer(34963,null),O.prepDevice.deleteBuffer(this.buffer),this.buffer=null}};function ir(){}var ou={dispose:function(){O.prepDevice.bindBuffer(34962,null),O.prepDevice.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null}};function ii(e,t){this.startDate=0,this.endDate=0,this.startDate=e,this.endDate=t}ii.empty=function(){return new ii(0,0)};var lu={copy:function(){return new ii(this.startDate,this.endDate)}};function an(){this._zBuffer=!0,this._linePoints=[],this._usingLocalCenter=!1,this.sky=!0,this.aaFix=!0,this.pure2D=!1,this.viewTransform=Z.get_identity(),this._lineBuffers=[],this._lineBufferCounts=[],this.useLocalCenters=!1}var uu={get_depthBuffered:function(){return this._zBuffer},set_depthBuffered:function(e){return this._zBuffer=e,e},addLine:function(e,t){this._linePoints.push(e),this._linePoints.push(t),this._emptyLineBuffer()},clear:function(){this._linePoints.length=0,this._emptyLineBuffer()},drawLines:function(e,t,r){if(!(this._linePoints.length<2)){this._initLineBuffer(e);var n=this._linePoints.length;if(e.gl==null){var a=I._transformCoordinate(e.get_viewPoint(),this.viewTransform),l=e.device;l.save(),l.strokeStyle=r.toString(),l.lineWidth=2,l.globalAlpha=.25;for(var f=new I,c=new I,d=0;d<n;d+=2)f=e.WVP.transform(this._linePoints[d]),c=e.WVP.transform(this._linePoints[d+1]),I.dot(this._linePoints[d],a)>.6&&(l.beginPath(),l.moveTo(f.x,f.y),l.lineTo(c.x,c.y),l.stroke());l.restore()}else for(var m=i.enumerate(this._lineBuffers);m.moveNext();){var v=m.current;this.pure2D?wi.use(e,v.vertexBuffer,r,this._zBuffer):si.use(e,v.vertexBuffer,r,this._zBuffer),e.gl.drawArrays(1,0,v.count)}}},_initLineBuffer:function(e){if(e.gl!=null&&!this._lineBuffers.length){var t=this._linePoints.length,r=null,n=null;if(this._localCenter=new I,this.get_depthBuffered()){for(var a=i.enumerate(this._linePoints);a.moveNext();){var l=a.current;this._localCenter.add(l)}this._localCenter.x/=t,this._localCenter.y/=t,this._localCenter.z/=t}for(var f=t,c=0,d,m=i.enumerate(this._linePoints);m.moveNext();){var l=m.current;if(c>=1e5||n==null){r!=null&&r.unlock();var v=Math.min(1e5,f);f-=v,r=new is(v),n=r.lock(),this._lineBuffers.push(r),this._lineBufferCounts.push(v),c=0}this.useLocalCenters?(d=I.subtractVectors(l,this._localCenter),n[c]=d):n[c]=l,c++}r!=null&&r.unlock()}},_emptyLineBuffer:function(){}};function go(){this._zBuffer=!0,this._linePoints=[],this._lineColors=[],this.sky=!0,this.aaFix=!0,this.viewTransform=Z.get_identity(),this._lineBuffers=[],this._lineBufferCounts=[],this.useLocalCenters=!1}var cu={get_depthBuffered:function(){return this._zBuffer},set_depthBuffered:function(e){return this._zBuffer=e,e},addLine:function(e,t,r,n){this._linePoints.push(e),this._lineColors.push(r),this._linePoints.push(t),this._lineColors.push(n),this._emptyLineBuffer()},clear:function(){this._linePoints.length=0,this._emptyLineBuffer()},drawLines:function(e,t,r){if(!(this._linePoints.length<2)){this._initLineBuffer(e),this._linePoints.length;for(var n=i.enumerate(this._lineBuffers);n.moveNext();){var a=n.current;Xt.use(e,a.vertexBuffer,r),e.gl.drawArrays(1,0,a.count)}}},_initLineBuffer:function(e){if(e.gl!=null&&!this._lineBuffers.length){var t=this._linePoints.length,r=null,n=null;if(this._localCenter=new I,this.get_depthBuffered()){for(var a=i.enumerate(this._linePoints);a.moveNext();){var l=a.current;this._localCenter.add(l)}this._localCenter.x/=t,this._localCenter.y/=t,this._localCenter.z/=t}for(var f=t,c=0,d=0,m,v=i.enumerate(this._linePoints);v.moveNext();){var l=v.current;if(d>=1e5||n==null){r!=null&&r.unlock();var C=Math.min(1e5,f);f-=C,r=new $o(C),n=r.lock(),this._lineBuffers.push(r),this._lineBufferCounts.push(C),d=0}this.useLocalCenters?(m=I.subtractVectors(l,this._localCenter),n[d]=new Wa(m,this._lineColors[c])):n[d]=new Wa(l,this._lineColors[c]),c++,d++}r!=null&&r.unlock()}},_emptyLineBuffer:function(){for(var e=i.enumerate(this._lineBuffers);e.moveNext();){var t=e.current;t.dispose()}this._lineBuffers.length=0}};function ca(){this._zBuffer=!0,this.timeSeries=!1,this.showFarSide=!0,this.sky=!1,this.decay=0,this.useNonRotatingFrame=!1,this.jNow=0,this._linePoints=[],this._lineColors=[],this._lineDates=[],this._usingLocalCenter=!0,this._lineBuffers=[],this._lineBufferCounts=[]}var hu={get_depthBuffered:function(){return this._zBuffer},set_depthBuffered:function(e){return this._zBuffer=e,e},addLine:function(e,t,r,n){this._linePoints.push(e),this._linePoints.push(t),this._lineColors.push(r),this._lineDates.push(n),this._emptyLineBuffer()},addLineNoDate:function(e,t,r){this._linePoints.push(e),this._linePoints.push(t),this._lineColors.push(r),this._lineDates.push(new ii(0,0)),this._emptyLineBuffer()},clear:function(){this._linePoints.length=0,this._lineColors.length=0,this._lineDates.length=0},drawLines:function(e,t){if(!(this._linePoints.length<2||t<=0)&&e.gl!=null){this._initLineBuffer();for(var r=i.enumerate(this._lineBuffers);r.moveNext();){var n=r.current;kt.use(e,n.vertexBuffer,G.fromArgb(255,255,255,255),this._zBuffer,this.jNow,this.timeSeries?this.decay:0),e.gl.drawArrays(1,0,n.count)}}},_initLineBuffer:function(){if(!this._lineBuffers.length){for(var e=this._linePoints.length,t=null,r=null,n=e,a=0,l=0,f,c=i.enumerate(this._linePoints);c.moveNext();){var d=c.current;if(l>=1e5||r==null){t!=null&&t.unlock();var m=Math.min(1e5,n);n-=m,t=new os(m),r=t.lock(),this._lineBuffers.push(t),this._lineBufferCounts.push(m),l=0}var v=i.truncate(a/2);f=d,r[l]=new ha,r[l].position=f,r[l].normal=d,r[l].tu=this._lineDates[v].startDate,r[l].tv=this._lineDates[v].endDate,r[l].set_color(this._lineColors[v]),a++,l++}t!=null&&t.unlock()}},_emptyLineBuffer:function(){}};function In(){this._trianglePoints=[],this._triangleColors=[],this._triangleDates=[],this.timeSeries=!1,this.showFarSide=!1,this.sky=!1,this.depthBuffered=!0,this.writeZbuffer=!1,this.decay=0,this.autoTime=!0,this.jNow=0,this._dataToDraw=!1,this._triangleBuffers=[],this._triangleBufferCounts=[]}var fu={addTriangle:function(e,t,r,n,a){this._trianglePoints.push(e),this._trianglePoints.push(t),this._trianglePoints.push(r),this._triangleColors.push(n),this._triangleDates.push(a),this._emptyTriangleBuffer()},addSubdividedTriangles:function(e,t,r,n,a,l){if(l--,l<0)this.addTriangle(e,t,r,n,a);else{var f,c,d;f=I.midPointByLength(e,t),c=I.midPointByLength(t,r),d=I.midPointByLength(r,e),this.addSubdividedTriangles(e,f,d,n,a,l),this.addSubdividedTriangles(f,c,d,n,a,l),this.addSubdividedTriangles(f,t,c,n,a,l),this.addSubdividedTriangles(c,r,d,n,a,l)}},addQuad:function(e,t,r,n,a,l){this._trianglePoints.push(e),this._trianglePoints.push(r),this._trianglePoints.push(t),this._trianglePoints.push(t),this._trianglePoints.push(r),this._trianglePoints.push(n),this._triangleColors.push(a),this._triangleDates.push(l),this._triangleColors.push(a),this._triangleDates.push(l),this._emptyTriangleBuffer()},clear:function(){this._triangleColors.length=0,this._trianglePoints.length=0,this._triangleDates.length=0,this._emptyTriangleBuffer()},_emptyTriangleBuffer:function(){},_initTriangleBuffer:function(){if(!this._triangleBuffers.length){for(var e=this._trianglePoints.length,t=null,r=null,n=e,a=0,l=0,f=i.enumerate(this._trianglePoints);f.moveNext();){var c=f.current;if(l>=9e4||t==null){t!=null&&t.unlock();var d=Math.min(9e4,n);n-=d,t=new os(d),this._triangleBuffers.push(t),this._triangleBufferCounts.push(d),r=t.lock(),l=0}r[l]=new ha,r[l].position=c,r[l].normal=c;var m=i.truncate(a/3);r[l].set_color(this._triangleColors[m]),r[l].tu=this._triangleDates[m].startDate,r[l].tv=this._triangleDates[m].endDate,a++,l++}t!=null&&t.unlock(),this._triangleColors.length=0,this._triangleDates.length=0,this._trianglePoints.length=0,this._dataToDraw=!0}},draw:function(e,t,r){if(!(this._trianglePoints.length<1&&!this._dataToDraw)&&e.gl!=null){this._initTriangleBuffer();for(var n=i.enumerate(this._triangleBuffers);n.moveNext();){var a=n.current;kt.use(e,a.vertexBuffer,G.fromArgb(255,255,255,255),this.depthBuffered,this.jNow,this.timeSeries?this.decay:0),e.gl.drawArrays(4,0,a.count)}}}};function mo(){this._zBuffer=!0,this.timeSeries=!1,this.decay=0,this.jNow=0,this._shapes=[],this._colors=[],this._dates=[],this._buffers=[],this._bufferCounts=[]}var du={get_depthBuffered:function(){return this._zBuffer},set_depthBuffered:function(e){return this._zBuffer=e,e},addShape:function(e,t,r){this._shapes.push(e),this._colors.push(t),this._dates.push(r)},draw:function(e,t){if(!(t<=0)&&e.gl!=null){this._initBuffer();for(var r=i.enumerate(this._buffers);r.moveNext();){var n=r.current;kt.use(e,n.vertexBuffer,G.fromArgb(255,255,255,255),this._zBuffer,this.jNow,this.timeSeries?this.decay:0),e.gl.drawArrays(6,0,n.count)}}},_initBuffer:function(){if(this._buffers.length!==this._shapes.length){this._buffers.length=0;for(var e=0,t=i.enumerate(this._shapes);t.moveNext();){var r=t.current,n=new os(r.length),a=n.lock();this._buffers.push(n),this._bufferCounts.push(r.length);for(var l=0,f=i.enumerate(r);f.moveNext();){var c=f.current;a[l]=new ha,a[l].position=c,a[l].tu=this._dates[e].startDate,a[l].tv=this._dates[e].endDate,a[l].set_color(this._colors[e]),l++}e++,n!=null&&n.unlock()}}}};function qr(e){this._points=[],this._colors=[],this._dates=[],this._sizes=[],this.timeSeries=!1,this.showFarSide=!1,this.sky=!1,this.depthBuffered=!0,this.decay=0,this.scale=1,this.autoTime=!0,this.jNow=0,this._dataToDraw=!1,this.items=[],this._imageReady=!1,this._init=!1,this.minSize=2,this._pointBuffers=[],this._pointBufferCounts=[],this._device=e}var _u={addPoint:function(e,t,r,n){this._points.push(e),this._colors.push(t._clone()),this._dates.push(r),this._sizes.push(n),this._emptyPointBuffer()},clear:function(){this._colors.length=0,this._points.length=0,this._dates.length=0,this._sizes.length=0,this._emptyPointBuffer()},_emptyPointBuffer:function(){for(var e=i.enumerate(this._pointBuffers);e.moveNext();){var t=e.current;t.dispose()}this._pointBuffers.length=0,this._init=!1},_initBuffer:function(e){var t=this;if(!this._init){if(e.gl==null){this._starProfile=document.createElement("img"),this._starProfile.addEventListener("load",function($){t._imageReady=!0},!1),this._starProfile.src=Nt.singleton.engineAssetUrl("StarProfileAlpha.png"),this._worldList=new Array(this._points.length),this._transformedList=new Array(this._points.length);for(var r=0,n=i.enumerate(this._points);n.moveNext();){var a=n.current,l=new Gs;l.location=a,l.tranformed=new I,l.size=this._sizes[r],l.color=this._colors[r],this._worldList[r]=l.location,this._transformedList[r]=l.tranformed,this.items.push(l),r++}}else if(!this._pointBuffers.length){qr.starTexture==null&&(qr.starTexture=P.loadPlanetTexture(Nt.singleton.engineAssetUrl("StarProfileAlpha.png")));for(var f=this._points.length,c=null,d=null,m=f,r=0,v=0,C=i.enumerate(this._points);C.moveNext();){var T=C.current;if(v>=1e5||d==null){c!=null&&c.unlock();var A=Math.min(1e5,m);m-=A,c=new Ro(A),d=c.lock(),this._pointBuffers.push(c),this._pointBufferCounts.push(A),v=0}d[v]=new Aa,d[v].position=T,d[v].pointSize=this._sizes[r],d[v].tu=this._dates[r].startDate,d[v].tv=this._dates[r].endDate,d[v].set_color(this._colors[r]),r++,v++}c!=null&&c.unlock()}this._init=!0}},draw:function(e,t,r){if(this._initBuffer(e),e.gl==null){if(!this._imageReady)return;e.device.save(),e.WVP.projectArrayToScreen(this._worldList,this._transformedList);var n=e.device;n.globalAlpha=.4;var a=e.width,l=e.height;I.makeCopy(e.get_viewPoint());for(var f=e.get_fovScale()/100,c=i.enumerate(this.items);c.moveNext();){var d=c.current;if(d.tranformed.z<1){var m=d.tranformed.x,v=d.tranformed.y,C=.1*d.size/f,T=C/2;m>-T&&m<a+T&&v>-T&&v<l+T&&(n.beginPath(),n.fillStyle=d.color.toFormat(),n.arc(m,v,C,0,Math.PI*2,!0),n.fill())}}e.device.restore()}else{var A=new I,$=Z.multiplyMatrix(e.get_world(),e.get_view());$.invert();for(var N=I._transformCoordinate(A,$),F=i.enumerate(this._pointBuffers);F.moveNext();){var z=F.current;it.use(e,z.vertexBuffer,qr.starTexture.texture2d,G.fromArgb(255*t,255,255,255),this.depthBuffered,this.jNow,this.timeSeries?this.decay:0,N,this.scale*(e.height/960),this.minSize,this.showFarSide,this.sky),e.gl.drawArrays(0,0,z.count)}}},drawTextured:function(e,t,r){this._initBuffer(e);var n=new I,a=Z.multiplyMatrix(e.get_world(),e.get_view());a.invert();for(var l=I._transformCoordinate(n,a),f=i.enumerate(this._pointBuffers);f.moveNext();){var c=f.current;it.use(e,c.vertexBuffer,t,G.fromArgb(255*r,255,255,255),this.depthBuffered,this.jNow,this.decay,l,this.scale*(e.height/960),this.minSize,this.showFarSide,this.sky),e.gl.drawArrays(0,0,c.count)}}};function ha(){this.position=new I,this.normal=new I,this.tu=0,this.tv=0}ha.create=function(e,t,r,n){var a=new ha;return a.position=e,a.normal=t,a.tu=r,a.tv=0,a.color=n,a};var gu={get_color:function(){return this.color},set_color:function(e){return this.color=e,e}};function Aa(){this.pointSize=0,this.tu=0,this.tv=0}Aa.create=function(e,t,r,n){var a=new Aa;return a.position=e,a.pointSize=t,a.tu=r,a.tv=0,a.color=n,a};var mu={get_color:function(){return this.color},set_color:function(e){return this.color=e,e}};function si(){}si.init=function(e){var t=e.gl,r=`   precision highp float;                                                          
   uniform vec4 lineColor;                                                         
                                                                                   
   void main(void) {                                                               
       gl_FragColor = lineColor;                                                   
   }                                                                               
`,n=`     attribute vec3 aVertexPosition;                                              
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
                                                                                  
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
     }                                                                            
                                                                                  
`;si._frag=t.createShader(35632),t.shaderSource(si._frag,r),t.compileShader(si._frag),t.getShaderParameter(si._frag,35713),si._vert=t.createShader(35633),t.shaderSource(si._vert,n),t.compileShader(si._vert),t.getShaderParameter(si._vert,35713),si._prog=t.createProgram(),t.attachShader(si._prog,si._vert),t.attachShader(si._prog,si._frag),t.linkProgram(si._prog),t.getProgramParameter(si._prog,35714),t.useProgram(si._prog),si.vertLoc=t.getAttribLocation(si._prog,"aVertexPosition"),si.lineColorLoc=t.getUniformLocation(si._prog,"lineColor"),si.projMatLoc=t.getUniformLocation(si._prog,"uPMatrix"),si.mvMatLoc=t.getUniformLocation(si._prog,"uMVMatrix"),t.enable(3042),t.blendFunc(770,771),si.initialized=!0},si.use=function(e,t,r,n){var a=e.gl;if(a!=null){si.initialized||si.init(e),a.useProgram(si._prog);var l=Z.multiplyMatrix(e.get_world(),e.get_view());a.uniformMatrix4fv(si.mvMatLoc,!1,l.floatArray()),a.uniformMatrix4fv(si.projMatLoc,!1,e.get_projection().floatArray()),a.uniform4f(si.lineColorLoc,r.r/255,r.g/255,r.b/255,1),e.space||!n?a.disable(2929):a.enable(2929),a.disableVertexAttribArray(0),a.disableVertexAttribArray(1),a.disableVertexAttribArray(2),a.disableVertexAttribArray(3),a.enableVertexAttribArray(si.vertLoc),a.bindBuffer(34962,t),a.bindBuffer(34963,null),a.vertexAttribPointer(si.vertLoc,3,5126,!1,0,0),a.lineWidth(1),a.enable(3042),a.blendFunc(770,771)}};var pu={};function wi(){}wi.init=function(e){var t=e.gl,r=`   precision highp float;                                                          
   uniform vec4 lineColor;                                                         
                                                                                   
   void main(void) {                                                               
       gl_FragColor = lineColor;                                                   
   }                                                                               
`,n=`     attribute vec3 aVertexPosition;                                              
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = vec4(aVertexPosition, 1.0);                                
     }                                                                            
                                                                                  
`;wi._frag=t.createShader(35632),t.shaderSource(wi._frag,r),t.compileShader(wi._frag),t.getShaderParameter(wi._frag,35713),wi._vert=t.createShader(35633),t.shaderSource(wi._vert,n),t.compileShader(wi._vert),t.getShaderParameter(wi._vert,35713),wi._prog=t.createProgram(),t.attachShader(wi._prog,wi._vert),t.attachShader(wi._prog,wi._frag),t.linkProgram(wi._prog),t.getProgramParameter(wi._prog,35714),t.useProgram(wi._prog),wi.vertLoc=t.getAttribLocation(wi._prog,"aVertexPosition"),wi.lineColorLoc=t.getUniformLocation(wi._prog,"lineColor"),t.enable(3042),t.blendFunc(770,771),wi.initialized=!0},wi.use=function(e,t,r,n){var a=e.gl;a!=null&&(wi.initialized||wi.init(e),a.useProgram(wi._prog),Z.multiplyMatrix(e.get_world(),e.get_view()),a.uniform4f(wi.lineColorLoc,r.r/255,r.g/255,r.b/255,1),e.space||!n?a.disable(2929):a.enable(2929),a.disableVertexAttribArray(0),a.disableVertexAttribArray(1),a.disableVertexAttribArray(2),a.disableVertexAttribArray(3),a.enableVertexAttribArray(wi.vertLoc),a.bindBuffer(34962,t),a.bindBuffer(34963,null),a.vertexAttribPointer(wi.vertLoc,3,5126,!1,0,0),a.lineWidth(1),a.enable(3042),a.blendFunc(770,771))};var vu={};function Xt(){}Xt.init=function(e){var t=e.gl,r=`    precision highp float;                                                        
    uniform vec4 lineColor;                                                       
    varying lowp vec4 vColor;                                                     
                                                                                  
    void main(void) {                                                             
        gl_FragColor = lineColor * vColor;                                        
    }                                                                             
`,n=`     attribute vec3 aVertexPosition;                                              
     attribute vec4 aVertexColor;                                                 
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
     varying lowp vec4 vColor;                                                    
                                                                                  
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
         vColor = aVertexColor;                                                   
     }                                                                            
                                                                                  
`;Xt._frag=t.createShader(35632),t.shaderSource(Xt._frag,r),t.compileShader(Xt._frag),t.getShaderParameter(Xt._frag,35713),Xt._vert=t.createShader(35633),t.shaderSource(Xt._vert,n),t.compileShader(Xt._vert),t.getShaderParameter(Xt._vert,35713),Xt._prog=t.createProgram(),t.attachShader(Xt._prog,Xt._vert),t.attachShader(Xt._prog,Xt._frag),t.linkProgram(Xt._prog),t.getProgramParameter(Xt._prog,35714),t.useProgram(Xt._prog),Xt.vertLoc=t.getAttribLocation(Xt._prog,"aVertexPosition"),Xt.colorLoc=t.getAttribLocation(Xt._prog,"aVertexColor"),Xt.lineColorLoc=t.getUniformLocation(Xt._prog,"lineColor"),Xt.projMatLoc=t.getUniformLocation(Xt._prog,"uPMatrix"),Xt.mvMatLoc=t.getUniformLocation(Xt._prog,"uMVMatrix"),t.enable(3042),t.blendFunc(770,771),Xt.initialized=!0},Xt.use=function(e,t,r){var n=e.gl;if(n!=null){Xt.initialized||Xt.init(e),n.useProgram(Xt._prog);var a=Z.multiplyMatrix(e.get_world(),e.get_view());n.uniformMatrix4fv(Xt.mvMatLoc,!1,a.floatArray()),n.uniformMatrix4fv(Xt.projMatLoc,!1,e.get_projection().floatArray()),n.uniform4f(Xt.lineColorLoc,r.r/255,r.g/255,r.b/255,1),e.space?n.disable(2929):n.enable(2929),n.disableVertexAttribArray(0),n.disableVertexAttribArray(1),n.disableVertexAttribArray(2),n.disableVertexAttribArray(3),n.bindBuffer(34962,t),n.bindBuffer(34963,null),n.enableVertexAttribArray(Xt.vertLoc),n.enableVertexAttribArray(Xt.colorLoc),n.vertexAttribPointer(Xt.vertLoc,3,5126,!1,28,0),n.vertexAttribPointer(Xt.colorLoc,4,5126,!1,28,12),n.lineWidth(1),n.enable(3042),n.blendFunc(770,771)}};var wu={};function kt(){}kt.init=function(e){var t=e.gl,r=`    precision highp float;                                                              
    uniform vec4 lineColor;                                                             
    varying lowp vec4 vColor;                                                           
    void main(void)                                                                     
    {                                                                                   
        gl_FragColor = lineColor * vColor;                                              
    }                                                                                   
`,n=`    attribute vec3 aVertexPosition;                                                     
    attribute vec4 aVertexColor;                                                        
    attribute vec2 aTime;                                                               
    uniform mat4 uMVMatrix;                                                             
    uniform mat4 uPMatrix;                                                              
    uniform float jNow;                                                                 
    uniform float decay;                                                                
                                                                                        
    varying lowp vec4 vColor;                                                           
                                                                                        
    void main(void)                                                                     
    {                                                                                   
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);                
        float dAlpha = 1.0;                                                             
        if ( decay > 0.0)                                                               
        {                                                                               
             dAlpha = 1.0 - ((jNow - aTime.y) / decay);                                 
              if (dAlpha > 1.0 )                                                         
             {                                                                          
                  dAlpha = 1.0;                                                         
             }                                                                          
        }                                                                               
        if (jNow < aTime.x && decay > 0.0)                                              
        {                                                                               
            vColor = vec4(1, 1, 1, 1);                                                  
        }                                                                               
        else                                                                            
        {                                                                               
           vColor = vec4(aVertexColor.r, aVertexColor.g, aVertexColor.b, dAlpha * aVertexColor.a);          
        }                                                                                
    }                                                                                    
                                                                                         
`;kt._frag=t.createShader(35632),t.shaderSource(kt._frag,r),t.compileShader(kt._frag),t.getShaderParameter(kt._frag,35713),kt._vert=t.createShader(35633),t.shaderSource(kt._vert,n),t.compileShader(kt._vert),t.getShaderParameter(kt._vert,35713),kt._prog=t.createProgram(),t.attachShader(kt._prog,kt._vert),t.attachShader(kt._prog,kt._frag),t.linkProgram(kt._prog),t.getProgramParameter(kt._prog,35714),t.useProgram(kt._prog),kt.vertLoc=t.getAttribLocation(kt._prog,"aVertexPosition"),kt.colorLoc=t.getAttribLocation(kt._prog,"aVertexColor"),kt.timeLoc=t.getAttribLocation(kt._prog,"aTime"),kt.lineColorLoc=t.getUniformLocation(kt._prog,"lineColor"),kt.projMatLoc=t.getUniformLocation(kt._prog,"uPMatrix"),kt.mvMatLoc=t.getUniformLocation(kt._prog,"uMVMatrix"),kt.jNowLoc=t.getUniformLocation(kt._prog,"jNow"),kt.decayLoc=t.getUniformLocation(kt._prog,"decay"),t.enable(3042),t.blendFunc(770,771),kt.initialized=!0},kt.use=function(e,t,r,n,a,l){var f=e.gl;if(f!=null){kt.initialized||kt.init(e),f.useProgram(kt._prog);var c=Z.multiplyMatrix(e.get_world(),e.get_view());f.uniformMatrix4fv(kt.mvMatLoc,!1,c.floatArray()),f.uniformMatrix4fv(kt.projMatLoc,!1,e.get_projection().floatArray()),f.uniform4f(kt.lineColorLoc,r.r/255,r.g/255,r.b/255,1),f.uniform1f(kt.jNowLoc,a),f.uniform1f(kt.decayLoc,l),n?f.enable(2929):f.disable(2929),f.disableVertexAttribArray(0),f.disableVertexAttribArray(1),f.disableVertexAttribArray(2),f.disableVertexAttribArray(3),f.bindBuffer(34962,t),f.bindBuffer(34963,null),f.enableVertexAttribArray(kt.vertLoc),f.enableVertexAttribArray(kt.colorLoc),f.vertexAttribPointer(kt.vertLoc,3,5126,!1,36,0),f.vertexAttribPointer(kt.colorLoc,4,5126,!1,36,12),f.vertexAttribPointer(kt.timeLoc,2,5126,!1,36,28),f.lineWidth(1),f.enable(3042),f.blendFunc(770,771)}};var bu={};function it(){}it.init=function(e){var t=e.gl,r=`    precision mediump float;                                                            
    uniform vec4 lineColor;                                                             
    varying lowp vec4 vColor;                                                           
    uniform sampler2D uSampler;                                                         
    void main(void)                                                                     
    {                                                                                   
        vec4 texColor;                                                                  
        texColor = texture2D(uSampler, gl_PointCoord);                                  
                                                                                        
                                                                                        
        gl_FragColor = lineColor * vColor * texColor;                                   
    }                                                                                   
`,n=`    attribute vec3 aVertexPosition;                                                     
    attribute vec4 aVertexColor;                                                        
    attribute vec2 aTime;                                                               
    attribute float aPointSize;                                                         
    uniform mat4 uMVMatrix;                                                             
    uniform mat4 uPMatrix;                                                              
    uniform float jNow;                                                                 
    uniform vec3 cameraPosition;                                                        
    uniform float decay;                                                                
    uniform float scale;                                                                
    uniform float minSize;                                                              
    uniform float sky;                                                                  
    uniform float showFarSide;                                                          
                                                                                        
    varying lowp vec4 vColor;                                                           
                                                                                        
    void main(void)                                                                     
    {                                                                                   
        float dotCam = dot( normalize(cameraPosition-aVertexPosition), normalize(aVertexPosition));                                  
        float dist = distance(aVertexPosition, cameraPosition);                         
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);                
        float dAlpha = 1.0;                                                             
        if ( decay > 0.0)                                                               
        {                                                                               
             dAlpha = 1.0 - ((jNow - aTime.y) / decay);                                 
              if (dAlpha > 1.0 )                                                         
             {                                                                          
                  dAlpha = 1.0;                                                         
             }                                                                          
        }                                                                               
        if ( showFarSide == 0.0 && (dotCam * sky) < 0.0 || (jNow < aTime.x && decay > 0.0))                                              
        {                                                                               
            vColor = vec4(0.0, 0.0, 0.0, 0.0);                                          
        }                                                                               
        else                                                                            
        {                                                                               
           vColor = vec4(aVertexColor.r, aVertexColor.g, aVertexColor.b, dAlpha);       
        }                                                                               
        float lSize = scale;                                                            
        if (scale < 0.0)                                                                
        {                                                                               
           lSize = -scale;                                                              
           dist = 1.0;                                                                  
        }                                                                               
        gl_PointSize = max(minSize, (lSize * ( aPointSize ) / dist));                   
    }                                                                                   
                                                                                        
`;it._frag=t.createShader(35632),t.shaderSource(it._frag,r),t.compileShader(it._frag),t.getShaderParameter(it._frag,35713),it._vert=t.createShader(35633),t.shaderSource(it._vert,n),t.compileShader(it._vert),t.getShaderParameter(it._vert,35713),t.getShaderInfoLog(it._vert),it._prog=t.createProgram(),t.attachShader(it._prog,it._vert),t.attachShader(it._prog,it._frag),t.linkProgram(it._prog),t.getProgramParameter(it._prog,35714),t.useProgram(it._prog),it.vertLoc=t.getAttribLocation(it._prog,"aVertexPosition"),it.colorLoc=t.getAttribLocation(it._prog,"aVertexColor"),it.pointSizeLoc=t.getAttribLocation(it._prog,"aPointSize"),it.timeLoc=t.getAttribLocation(it._prog,"aTime"),it.projMatLoc=t.getUniformLocation(it._prog,"uPMatrix"),it.mvMatLoc=t.getUniformLocation(it._prog,"uMVMatrix"),it.sampLoc=t.getUniformLocation(it._prog,"uSampler"),it.jNowLoc=t.getUniformLocation(it._prog,"jNow"),it.decayLoc=t.getUniformLocation(it._prog,"decay"),it.lineColorLoc=t.getUniformLocation(it._prog,"lineColor"),it.cameraPosLoc=t.getUniformLocation(it._prog,"cameraPosition"),it.scaleLoc=t.getUniformLocation(it._prog,"scale"),it.skyLoc=t.getUniformLocation(it._prog,"sky"),it.showFarSideLoc=t.getUniformLocation(it._prog,"showFarSide"),it.minSizeLoc=t.getUniformLocation(it._prog,"minSize"),t.enable(3042),it.initialized=!0},it.use=function(e,t,r,n,a,l,f,c,d,m,v,C){r==null&&(r=di.getEmpty());var T=e.gl;if(T!=null){it.initialized||it.init(e),T.useProgram(it._prog);var A=Z.multiplyMatrix(e.get_world(),e.get_view());T.uniformMatrix4fv(it.mvMatLoc,!1,A.floatArray()),T.uniformMatrix4fv(it.projMatLoc,!1,e.get_projection().floatArray()),T.uniform1i(it.sampLoc,0),T.uniform1f(it.jNowLoc,l),T.uniform1f(it.decayLoc,f),T.uniform4f(it.lineColorLoc,n.r/255,n.g/255,n.b/255,n.a/255),T.uniform3f(it.cameraPosLoc,c.x,c.y,c.z),T.uniform1f(it.scaleLoc,d),T.uniform1f(it.minSizeLoc,m),T.uniform1f(it.showFarSideLoc,v?1:0),T.uniform1f(it.skyLoc,C?-1:1),a?T.enable(2929):T.disable(2929),T.disableVertexAttribArray(0),T.disableVertexAttribArray(1),T.disableVertexAttribArray(2),T.disableVertexAttribArray(3),T.bindBuffer(34962,t),T.bindBuffer(34963,null),T.enableVertexAttribArray(it.vertLoc),T.enableVertexAttribArray(it.colorLoc),T.enableVertexAttribArray(it.pointSizeLoc),T.enableVertexAttribArray(it.timeLoc),T.vertexAttribPointer(it.vertLoc,3,5126,!1,40,0),T.vertexAttribPointer(it.colorLoc,4,5126,!1,40,12),T.vertexAttribPointer(it.pointSizeLoc,1,5126,!1,40,36),T.vertexAttribPointer(it.timeLoc,2,5126,!1,40,28),T.activeTexture(33984),T.bindTexture(3553,r),T.lineWidth(1),T.enable(3042),T.blendFunc(770,1)}};var yu={};function He(){}He.init=function(e){var t=e.gl,r=`    precision mediump float;                                                            
    uniform vec4 lineColor;                                                             
    varying lowp vec4 vColor;                                                           
    uniform sampler2D uSampler;                                                         
    void main(void)                                                                     
    {                                                                                   
        vec4 texColor;                                                                  
        texColor = texture2D(uSampler, gl_PointCoord);                                  
                                                                                        
                                                                                        
        gl_FragColor = lineColor * vColor * texColor;                                   
    }                                                                                   
`,n=`    attribute vec3 ABC;                                                                 
    attribute vec3 abc;                                                                 
    attribute float PointSize;                                                          
    attribute vec4 Color;                                                               
    attribute vec2 we;                                                                  
    attribute vec2 nT;                                                                  
    attribute vec2 az;                                                                  
    attribute vec2 orbit;                                                               
    uniform mat4 uMVMatrix;                                                             
    uniform mat4 uPMatrix;                                                              
    uniform float jNow;                                                                 
    uniform vec3 cameraPosition;                                                        
    uniform float MM;                                                                   
    uniform float scaling;                                                              
    uniform float minSize;                                                              
    uniform float opacity;                                                              
    varying lowp vec4 vColor;                                                           
                                                                                        
    void main(void)                                                                     
    {                                                                                   
     float M = nT.x * (jNow - nT.y) * 0.01745329251994;                                 
     float e = we.y;                                                                    
     float a = az.x;                                                                    
     float PI = 3.1415926535897932384;                                                  
     float w = we.x* 0.01745329251994;                                                  
     float F = 1.0;                                                                     
     if (M < 0.0)                                                                       
       F = -1.0;                                                                        
     M = abs(M) / (2.0 * PI);                                                           
     M = (M - float(int(M)))*2.0 *PI *F;                                                
     if (MM != 0.0)                                                                     
     {                                                                                  
       M = MM + (1.0- orbit.x) *2.0 *PI;                                                
       if (M > (2.0*PI))                                                                
           M = M - (2.0*PI);                                                            
     }                                                                                  
                                                                                        
     if (M < 0.0)                                                                       
       M += 2.0 *PI;                                                                    
     F = 1.0;                                                                           
     if (M > PI)                                                                        
        F = -1.0;                                                                       
     if (M > PI)                                                                        
       M = 2.0 *PI - M;                                                                 
                                                                                        
     float E = PI / 2.0;                                                                
     float scale = PI / 4.0;                                                            
     for (int i =0; i<23; i++)                                                          
     {                                                                                  
       float R = E - e *sin(E);                                                         
       if (M > R)                                                                       
      	E += scale;                                                                      
       else                                                                             
     	E -= scale;                                                                      
       scale /= 2.0;                                                                    
     }                                                                                  
      E = E * F;                                                                        
                                                                                        
     float v = 2.0 * atan(sqrt((1.0 + e) / (1.0 -e )) * tan(E/2.0));                    
     float r = a * (1.0-e * cos(E));                                                    
                                                                                        
     vec4 pnt;                                                                          
     pnt.x = r * abc.x * sin(ABC.x + w + v);                                            
     pnt.z = r * abc.y * sin(ABC.y + w + v);                                            
     pnt.y = r * abc.z * sin(ABC.z + w + v);                                            
     pnt.w = 1.0;                                                                       
                                                                                        
     float dist = distance(pnt.xyz, cameraPosition.xyz);                                
     gl_Position = uPMatrix * uMVMatrix * pnt;                                          
     vColor.a = opacity * (1.0-(orbit.x));                                              
     vColor.r = Color.r;                                                                
     vColor.g = Color.g;                                                                
     vColor.b = Color.b;                                                                
     gl_PointSize = max(minSize, scaling * (PointSize / dist));                         
 }                                                                                      
`;He._frag=t.createShader(35632),t.shaderSource(He._frag,r),t.compileShader(He._frag),t.getShaderParameter(He._frag,35713),He._vert=t.createShader(35633),t.shaderSource(He._vert,n),t.compileShader(He._vert),t.getShaderParameter(He._vert,35713),t.getShaderInfoLog(He._vert),He._prog=t.createProgram(),t.attachShader(He._prog,He._vert),t.attachShader(He._prog,He._frag),t.linkProgram(He._prog),t.getProgramParameter(He._prog,35714),t.useProgram(He._prog),He.abcLoc1=t.getAttribLocation(He._prog,"abc"),He.abcLoc=t.getAttribLocation(He._prog,"ABC"),He.pointSizeLoc=t.getAttribLocation(He._prog,"PointSize"),He.colorLoc=t.getAttribLocation(He._prog,"Color"),He.weLoc=t.getAttribLocation(He._prog,"we"),He.nTLoc=t.getAttribLocation(He._prog,"nT"),He.azLoc=t.getAttribLocation(He._prog,"az"),He.orbitLoc=t.getAttribLocation(He._prog,"orbit"),He.projMatLoc=t.getUniformLocation(He._prog,"uPMatrix"),He.mvMatLoc=t.getUniformLocation(He._prog,"uMVMatrix"),He.jNowLoc=t.getUniformLocation(He._prog,"jNow"),He.cameraPosLoc=t.getUniformLocation(He._prog,"cameraPosition"),He.mmLoc=t.getUniformLocation(He._prog,"MM"),He.scaleLoc=t.getUniformLocation(He._prog,"scaling"),He.minSizeLoc=t.getUniformLocation(He._prog,"minSize"),He.lineColorLoc=t.getUniformLocation(He._prog,"lineColor"),He.opacityLoc=t.getUniformLocation(He._prog,"opacity"),He.sampLoc=t.getUniformLocation(He._prog,"uSampler"),t.enable(3042),He.initialized=!0},He.use=function(e,t,r,n,a,l,f,c,d,m,v,C){n==null&&(n=di.getEmpty());var T=e.gl;T!=null&&(He.initialized||He.init(e),T.useProgram(He._prog),T.uniformMatrix4fv(He.mvMatLoc,!1,t.floatArray()),T.uniformMatrix4fv(He.projMatLoc,!1,e.get_projection().floatArray()),T.uniform1i(He.sampLoc,0),T.uniform1f(He.jNowLoc,c),T.uniform1f(He.mmLoc,d),T.uniform4f(He.lineColorLoc,a.r/255,a.g/255,a.b/255,a.a/255),T.uniform1f(He.opacityLoc,l),T.uniform3f(He.cameraPosLoc,m.x,m.y,m.z),T.uniform1f(He.scaleLoc,v),T.uniform1f(He.minSizeLoc,C),f?T.enable(2929):T.disable(2929),T.disableVertexAttribArray(0),T.disableVertexAttribArray(1),T.disableVertexAttribArray(2),T.disableVertexAttribArray(3),T.bindBuffer(34962,r),T.bindBuffer(34963,null),T.enableVertexAttribArray(He.abcLoc),T.enableVertexAttribArray(He.abcLoc1),T.enableVertexAttribArray(He.colorLoc),T.enableVertexAttribArray(He.pointSizeLoc),T.enableVertexAttribArray(He.weLoc),T.enableVertexAttribArray(He.nTLoc),T.enableVertexAttribArray(He.azLoc),T.enableVertexAttribArray(He.orbitLoc),T.enableVertexAttribArray(He.weLoc),T.vertexAttribPointer(He.abcLoc,3,5126,!1,76,0),T.vertexAttribPointer(He.abcLoc1,3,5126,!1,76,12),T.vertexAttribPointer(He.pointSizeLoc,1,5126,!1,76,24),T.vertexAttribPointer(He.colorLoc,4,5126,!1,76,28),T.vertexAttribPointer(He.weLoc,2,5126,!1,76,44),T.vertexAttribPointer(He.nTLoc,2,5126,!1,76,52),T.vertexAttribPointer(He.azLoc,2,5126,!1,76,60),T.vertexAttribPointer(He.orbitLoc,2,5126,!1,76,68),T.activeTexture(33984),T.bindTexture(3553,n),T.lineWidth(1),T.enable(3042),T.blendFunc(770,1))};var Cu={};function At(){}At.init=function(e){var t=e.gl,r=`    precision mediump float;                                                            
    varying lowp vec4 vColor;                                                           
    void main(void)                                                                     
    {                                                                                   
        gl_FragColor = vColor;                                          
    }                                                                                   
`,n=`    attribute vec3 Angle;                                                               
    uniform mat4 matWVP;                                                             
    uniform mat4 matPosition;                                                              
    uniform vec3 positionNow;                                                        
    uniform float semiMajorAxis;                                                                   
    uniform float eccentricity;                                                              
    uniform vec4 color;                                                             
    uniform float eccentricAnomaly;                                                              
    varying lowp vec4 vColor;                                                           
                                                                                        
    void main(void)                                                                     
    {                                                                                   
        float fade = (1.0 - Angle.x);                                                    
        float PI = 3.1415927;                                                          
        float E = eccentricAnomaly - Angle.x * 2.0 * PI;                                   
        vec2 semiAxes = vec2(1.0, sqrt(1.0 - eccentricity * eccentricity)) * semiMajorAxis;   
        vec2 planePos = semiAxes * vec2(cos(E) - eccentricity, sin(E));              
        if (Angle.x == 0.0)                                                         
           gl_Position =  matPosition * vec4(positionNow, 1.0);                                
        else                                                                           
           gl_Position = matWVP * vec4(planePos.x, planePos.y, 0.0, 1.0);              
        vColor = vec4(color.rgb, fade * color.a);                                      
    }                                                                                  
`;At._frag=t.createShader(35632),t.shaderSource(At._frag,r),t.compileShader(At._frag),t.getShaderParameter(At._frag,35713),At._vert=t.createShader(35633),t.shaderSource(At._vert,n),t.compileShader(At._vert),t.getShaderParameter(At._vert,35713),t.getShaderInfoLog(At._vert),At._prog=t.createProgram(),t.attachShader(At._prog,At._vert),t.attachShader(At._prog,At._frag),t.linkProgram(At._prog),t.getProgramParameter(At._prog,35714),t.useProgram(At._prog),At.angleLoc=t.getAttribLocation(At._prog,"Angle"),At.matWVPLoc=t.getUniformLocation(At._prog,"matWVP"),At.matPositionLoc=t.getUniformLocation(At._prog,"matPosition"),At.positionNowLoc=t.getUniformLocation(At._prog,"positionNow"),At.colorLoc=t.getUniformLocation(At._prog,"color"),At.semiMajorAxisLoc=t.getUniformLocation(At._prog,"semiMajorAxis"),At.eccentricityLoc=t.getUniformLocation(At._prog,"eccentricity"),At.eccentricAnomalyLoc=t.getUniformLocation(At._prog,"eccentricAnomaly"),t.enable(3042),At.initialized=!0},At.use=function(e,t,r,n,a,l,f,c){var d=e.gl;if(d!=null){At.initialized||At.init(e),d.useProgram(At._prog);var m=Z.multiplyMatrix(Z.multiplyMatrix(f,e.get_view()),e.get_projection()),v=Z.multiplyMatrix(Z.multiplyMatrix(e.get_world(),e.get_view()),e.get_projection());d.uniformMatrix4fv(At.matWVPLoc,!1,v.floatArray()),d.uniformMatrix4fv(At.matPositionLoc,!1,m.floatArray()),d.uniform3f(At.positionNowLoc,c.x,c.y,c.z),d.uniform4f(At.colorLoc,a.r/255,a.g/255,a.b/255,a.a/255),d.uniform1f(At.semiMajorAxisLoc,t),d.uniform1f(At.eccentricityLoc,r),d.uniform1f(At.eccentricAnomalyLoc,n),d.disable(2929),d.disableVertexAttribArray(0),d.disableVertexAttribArray(1),d.disableVertexAttribArray(2),d.disableVertexAttribArray(3),d.enableVertexAttribArray(At.angleLoc),d.vertexAttribPointer(At.angleLoc,3,5126,!1,0,0),d.lineWidth(1),d.enable(3042),d.blendFunc(770,1)}};var Su={};function at(){}at.init=function(e){var t=e.gl,r=` precision mediump float;                                                              
                                                                                       
   varying vec2 vTextureCoord;                                                         
   varying vec3 vNormal;                                                               
   varying vec3 vCamVector;                                                               
                                                                                       
   uniform sampler2D uSampler;                                                         
   uniform float opacity;                                                              
   uniform vec3 uSunPosition;                                                          
   uniform float uMinBrightness;                                                       
   uniform vec3 uAtmosphereColor;                                                       
                                                                                       
   void main(void) {                                                                   
     vec3 normal = normalize(vNormal);                                                 
     vec3 camVN = normalize(vCamVector);                                               
     vec3 cam = normalize(vec3(0.0,0.0,-1.0));                                                    
     float dt = uMinBrightness + pow(max(0.0,- dot(normal,uSunPosition)),0.5);                  
     float atm = max(0.0, 1.0 - 2.5 * dot(cam,camVN)) + 0.3 * dt;                             
     atm = (dt > uMinBrightness) ? atm : 0.0;                                          
     if ( uMinBrightness == 1.0 ) { dt = 1.0; atm= 0.0; }                                        
     vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));           
     gl_FragColor = col * opacity;                                                     
     gl_FragColor.rgb *= dt;                                                           
     gl_FragColor.rgb += atm * uAtmosphereColor;                                  
   }                                                                                   
`,n=`     attribute vec3 aVertexPosition;                                              
     attribute vec3 aNormal;                                                     
     attribute vec2 aTextureCoord;                                                
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
                                                                                  
     varying vec2 vTextureCoord;                                                  
     varying vec3 vNormal;                                                        
     varying vec3 vCamVector;                                                     
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
         vCamVector = normalize((mat3(uMVMatrix) * aVertexPosition).xyz);              
         vec3 normalT = normalize(mat3(uMVMatrix) * aNormal);                      
         vTextureCoord = aTextureCoord;                                           
         vNormal = normalT;                                                       
     }                                                                            
                                                                                  
`;at._frag=t.createShader(35632),t.shaderSource(at._frag,r),t.compileShader(at._frag);var a=t.getShaderParameter(at._frag,35713);a||t.getShaderInfoLog(at._frag),at._vert=t.createShader(35633),t.shaderSource(at._vert,n),t.compileShader(at._vert);var l=t.getShaderParameter(at._vert,35713);l||t.getShaderInfoLog(at._vert),at._prog=t.createProgram(),t.attachShader(at._prog,at._vert),t.attachShader(at._prog,at._frag),t.linkProgram(at._prog),t.getProgramParameter(at._prog,35714),t.useProgram(at._prog),at.vertLoc=t.getAttribLocation(at._prog,"aVertexPosition"),at.normalLoc=t.getAttribLocation(at._prog,"aNormal"),at.textureLoc=t.getAttribLocation(at._prog,"aTextureCoord"),at.projMatLoc=t.getUniformLocation(at._prog,"uPMatrix"),at.mvMatLoc=t.getUniformLocation(at._prog,"uMVMatrix"),at.sampLoc=t.getUniformLocation(at._prog,"uSampler"),at.sunLoc=t.getUniformLocation(at._prog,"uSunPosition"),at.minBrightnessLoc=t.getUniformLocation(at._prog,"uMinBrightness"),at.opacityLoc=t.getUniformLocation(at._prog,"opacity"),at.atmosphereColorLoc=t.getUniformLocation(at._prog,"uAtmosphereColor"),O.uvMultiple=1,O.demEnabled=!0,t.enable(3042),t.blendFunc(770,771),at.initialized=!0},at.use=function(e,t,r,n,a,l,f){n==null&&(n=di.getEmpty());var c=e.gl;if(c!=null){at.initialized||at.init(e),c.useProgram(at._prog);var d=Z.multiplyMatrix(e.get_world(),e.get_view());c.uniform1f(at.opacityLoc,a),c.uniform1f(at.minBrightnessLoc,e.lighting?at.minLightingBrightness:1),e.lighting?c.uniform3f(at.atmosphereColorLoc,at.atmosphereColor.r/255,at.atmosphereColor.g/255,at.atmosphereColor.b/255):c.uniform3f(at.atmosphereColorLoc,0,0,0),c.uniformMatrix4fv(at.mvMatLoc,!1,d.floatArray()),c.uniformMatrix4fv(at.projMatLoc,!1,e.get_projection().floatArray()),at.sunPosition.normalize();var m=e.get_view().clone();m.set_m41(0),m.set_m42(0),m.set_m43(0),m.set_m44(1);var v=I._transformCoordinate(at.sunPosition,m);v.normalize(),c.uniform3f(at.sunLoc,v.x,v.y,v.z),c.uniform1i(at.sampLoc,0),e.space||l?c.disable(2929):c.enable(2929),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.disableVertexAttribArray(3),c.bindBuffer(34962,t),c.enableVertexAttribArray(at.vertLoc),c.enableVertexAttribArray(at.normalLoc),c.enableVertexAttribArray(at.textureLoc),c.vertexAttribPointer(at.vertLoc,3,5126,!1,f,0),c.vertexAttribPointer(at.normalLoc,3,5126,!1,f,12),c.vertexAttribPointer(at.textureLoc,2,5126,!1,f,f-8),c.activeTexture(33984),c.bindTexture(3553,n),c.bindBuffer(34963,r),c.enable(3042),l?c.blendFunc(770,1):c.blendFunc(770,771)}};var Mu={};function ft(){}ft.init=function(e){var t=e.gl,r=` precision mediump float;                                                              
                                                                                       
   varying vec2 vTextureCoord;                                                         
   varying vec3 vNormal;                                                               
   varying vec3 vCamVector;                                                               
                                                                                       
   uniform sampler2D uSampler;                                                         
   uniform float opacity;                                                              
   uniform vec3 uSunPosition;                                                          
   uniform float uMinBrightness;                                                       
   uniform vec3 uAtmosphereColor;                                                       
                                                                                       
   void main(void) {                                                                   
     vec3 normal = normalize(vNormal);                                                 
     vec3 camVN = normalize(vCamVector);                                               
     vec3 cam = normalize(vec3(0.0,0.0,-1.0));                                                    
     float dt = uMinBrightness + pow(max(0.0,- dot(normal,uSunPosition)),0.5);                  
     float atm = max(0.0, 1.0 - 2.5 * dot(cam,camVN)) + 0.3 * dt;                             
     atm = (dt > uMinBrightness) ? atm : 0.0;                                          
     if ( uMinBrightness == 1.0 ) { dt = 1.0; atm= 0.0; }                                        
     vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));           
     gl_FragColor = col * opacity;                                                     
     gl_FragColor.rgb *= dt;                                                           
     gl_FragColor.rgb += atm * uAtmosphereColor;                                  
   }                                                                                   
`,n=`     attribute vec3 aVertexPosition;                                              
     attribute vec3 aNormal;                                                     
     attribute vec2 aTextureCoord;                                                
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
                                                                                  
     varying vec2 vTextureCoord;                                                  
     varying vec3 vNormal;                                                        
     varying vec3 vCamVector;                                                     
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
         vCamVector = normalize((mat3(uMVMatrix) * aVertexPosition).xyz);              
         vec3 normalT = normalize(mat3(uMVMatrix) * aNormal);                      
         vTextureCoord = aTextureCoord;                                           
         vNormal = normalT;                                                       
     }                                                                            
                                                                                  
`;ft._frag=t.createShader(35632),t.shaderSource(ft._frag,r),t.compileShader(ft._frag);var a=t.getShaderParameter(ft._frag,35713);a||t.getShaderInfoLog(ft._frag),ft._vert=t.createShader(35633),t.shaderSource(ft._vert,n),t.compileShader(ft._vert);var l=t.getShaderParameter(ft._vert,35713);l||t.getShaderInfoLog(ft._vert),ft._prog=t.createProgram(),t.attachShader(ft._prog,ft._vert),t.attachShader(ft._prog,ft._frag),t.linkProgram(ft._prog),t.getProgramParameter(ft._prog,35714),t.useProgram(ft._prog),ft.vertLoc=t.getAttribLocation(ft._prog,"aVertexPosition"),ft.normalLoc=t.getAttribLocation(ft._prog,"aNormal"),ft.textureLoc=t.getAttribLocation(ft._prog,"aTextureCoord"),ft.projMatLoc=t.getUniformLocation(ft._prog,"uPMatrix"),ft.mvMatLoc=t.getUniformLocation(ft._prog,"uMVMatrix"),ft.sampLoc=t.getUniformLocation(ft._prog,"uSampler"),ft.sunLoc=t.getUniformLocation(ft._prog,"uSunPosition"),ft.minBrightnessLoc=t.getUniformLocation(ft._prog,"uMinBrightness"),ft.opacityLoc=t.getUniformLocation(ft._prog,"opacity"),ft.atmosphereColorLoc=t.getUniformLocation(ft._prog,"uAtmosphereColor"),O.uvMultiple=1,O.demEnabled=!0,t.enable(3042),t.blendFunc(770,771),ft.initialized=!0},ft.use=function(e,t,r,n,a,l,f){n==null&&(n=di.getEmpty());var c=e.gl;if(c!=null){ft.initialized||ft.init(e),c.useProgram(ft._prog);var d=Z.multiplyMatrix(e.get_world(),e.get_view());c.uniform1f(ft.opacityLoc,a),c.uniform1f(ft.minBrightnessLoc,e.lighting?ft.minLightingBrightness:1),e.lighting?c.uniform3f(ft.atmosphereColorLoc,ft.atmosphereColor.r/255,ft.atmosphereColor.g/255,ft.atmosphereColor.b/255):c.uniform3f(ft.atmosphereColorLoc,0,0,0),c.uniformMatrix4fv(ft.mvMatLoc,!1,d.floatArray()),c.uniformMatrix4fv(ft.projMatLoc,!1,e.get_projection().floatArray()),ft.sunPosition.normalize();var m=e.get_view().clone();m.set_m41(0),m.set_m42(0),m.set_m43(0),m.set_m44(1);var v=I._transformCoordinate(ft.sunPosition,m);v.normalize(),c.uniform3f(ft.sunLoc,-v.x,-v.y,-v.z),c.uniform1i(ft.sampLoc,0),e.space||l?c.disable(2929):c.enable(2929),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.disableVertexAttribArray(3),c.bindBuffer(34962,t),c.enableVertexAttribArray(ft.vertLoc),c.enableVertexAttribArray(ft.normalLoc),c.enableVertexAttribArray(ft.textureLoc),c.vertexAttribPointer(ft.vertLoc,3,5126,!1,f,0),c.vertexAttribPointer(ft.normalLoc,3,5126,!1,f,12),c.vertexAttribPointer(ft.textureLoc,2,5126,!1,f,f-8),c.activeTexture(33984),c.bindTexture(3553,n),c.bindBuffer(34963,r),c.enable(3042),l?c.blendFunc(770,1):c.blendFunc(770,771)}};var Tu={};function tt(){}tt.init=function(e){var t=e.gl,r=` precision mediump float;                                                              
                                                                                       
   varying vec2 vTextureCoord;                                                         
   varying vec3 vNormal;                                                               
   varying vec3 vCamVector;                                                               
                                                                                       
   uniform sampler2D uSampler;                                                         
   uniform float opacity;                                                              
   uniform vec3 uSunPosition;                                                          
   uniform float uMinBrightness;                                                       
   uniform vec3 uAtmosphereColor;                                                       
                                                                                       
   void main(void) {                                                                   
     vec3 normal = normalize(vNormal);                                                 
     vec3 camVN = normalize(vCamVector);                                               
     vec3 cam = normalize(vec3(0.0,0.0,-1.0));                                                    
     float dt = uMinBrightness + pow(max(0.0,- dot(normal,uSunPosition)),0.5);                  
     float atm = max(0.0, 1.0 - 2.5 * dot(cam,camVN)) + 0.3 * dt;                             
     atm = (dt > uMinBrightness) ? atm : 0.0;                                          
     if ( uMinBrightness == 1.0 ) { dt = 1.0; atm= 0.0; }                                        
     vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));           
     gl_FragColor = col * opacity;                                                     
     gl_FragColor.rgb *= dt;                                                           
     gl_FragColor.rgb += atm * uAtmosphereColor;                                  
   }                                                                                   
`,n=`\r
                    attribute vec3 aVertexPosition;\r
                    attribute vec2 aTextureCoord;\r
                    \r
                    uniform mat4 uMVMatrix;\r
                    uniform mat4 uPMatrix;\r
                    uniform vec3 uCenterScreen;\r
                    uniform vec3 uCenterWorld;\r
\r
                    varying vec2 vTextureCoord;\r
                    varying vec3 vNormal;\r
                    varying vec3 vCamVector;\r
                    \r
                    void main(void) {\r
                        vec3 normal;\r
                        if(length(uCenterWorld) > 0.00001){\r
                            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 0.0) + vec4(uCenterScreen, 1.0);\r
                            vCamVector = normalize((mat3(uMVMatrix) * (aVertexPosition + uCenterWorld)).xyz);\r
                            normal = normalize(aVertexPosition + uCenterWorld);\r
                        } else {\r
                            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\r
                            vCamVector = normalize((mat3(uMVMatrix) * aVertexPosition).xyz);\r
                            normal = normalize(aVertexPosition);\r
                        }\r
                        vec3 normalT = normalize(mat3(uMVMatrix) * normal);\r
                        vTextureCoord = aTextureCoord;\r
                        vNormal = normalT;\r
                    }`;tt._frag=t.createShader(35632),t.shaderSource(tt._frag,r),t.compileShader(tt._frag);var a=t.getShaderParameter(tt._frag,35713);a||t.getShaderInfoLog(tt._frag),tt._vert=t.createShader(35633),t.shaderSource(tt._vert,n),t.compileShader(tt._vert);var l=t.getShaderParameter(tt._vert,35713);l||t.getShaderInfoLog(tt._vert),tt._prog=t.createProgram(),t.attachShader(tt._prog,tt._vert),t.attachShader(tt._prog,tt._frag),t.linkProgram(tt._prog),t.getProgramParameter(tt._prog,35714),t.useProgram(tt._prog),tt.vertLoc=t.getAttribLocation(tt._prog,"aVertexPosition"),tt.textureLoc=t.getAttribLocation(tt._prog,"aTextureCoord"),tt.projMatLoc=t.getUniformLocation(tt._prog,"uPMatrix"),tt.mvMatLoc=t.getUniformLocation(tt._prog,"uMVMatrix"),tt.sampLoc=t.getUniformLocation(tt._prog,"uSampler"),tt.centerScreenLoc=t.getUniformLocation(tt._prog,"uCenterScreen"),tt.centerWorldLoc=t.getUniformLocation(tt._prog,"uCenterWorld"),tt.sunLoc=t.getUniformLocation(tt._prog,"uSunPosition"),tt.minBrightnessLoc=t.getUniformLocation(tt._prog,"uMinBrightness"),tt.opacityLoc=t.getUniformLocation(tt._prog,"opacity"),tt.atmosphereColorLoc=t.getUniformLocation(tt._prog,"uAtmosphereColor"),O.uvMultiple=1,O.demEnabled=!0,t.enable(3042),t.blendFunc(770,771),tt.initialized=!0},tt.use=function(e,t,r,n,a,l,f){n==null&&(n=di.getEmpty());var c=e.gl;if(c!=null){tt.initialized||tt.init(e),c.useProgram(tt._prog);var d=Z.multiplyMatrix(e.get_world(),e.get_view());if(c.uniform1f(tt.opacityLoc,a),c.uniform1f(tt.minBrightnessLoc,e.lighting?tt.minLightingBrightness:1),e.lighting?c.uniform3f(tt.atmosphereColorLoc,tt.atmosphereColor.r/255,tt.atmosphereColor.g/255,tt.atmosphereColor.b/255):c.uniform3f(tt.atmosphereColorLoc,0,0,0),c.uniform3f(tt.centerWorldLoc,f.x,f.y,f.z),f.lengthSq()>.001){var m=Z.multiplyMatrix(d,e.get_projection()),v=m.transform(f);c.uniform3f(tt.centerScreenLoc,v.x,v.y,v.z)}else c.uniform3f(tt.centerScreenLoc,0,0,0);c.uniformMatrix4fv(tt.mvMatLoc,!1,d.floatArray()),c.uniformMatrix4fv(tt.projMatLoc,!1,e.get_projection().floatArray()),tt.sunPosition.normalize();var C=e.get_view().clone();C.set_m41(0),C.set_m42(0),C.set_m43(0),C.set_m44(1);var T=I._transformCoordinate(tt.sunPosition,C);T.normalize(),c.uniform3f(tt.sunLoc,-T.x,-T.y,-T.z),c.uniform1i(tt.sampLoc,0),e.space||l?c.disable(2929):c.enable(2929),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.disableVertexAttribArray(3),c.bindBuffer(34962,t),c.enableVertexAttribArray(tt.vertLoc),c.enableVertexAttribArray(tt.textureLoc),c.vertexAttribPointer(tt.vertLoc,3,5126,!1,20,0),c.vertexAttribPointer(tt.textureLoc,2,5126,!1,20,12),c.activeTexture(33984),c.bindTexture(3553,n),c.bindBuffer(34963,r),c.enable(3042),l?c.blendFunc(770,1):c.blendFunc(770,771)}};var xu={};function Ne(){}Ne.init=function(e){var t=e.gl,r=`#version 300 es\r
                precision mediump float;\r
                in vec2 vTextureCoord;\r
                in vec3 vNormal;\r
                in vec3 vCamVector;\r
                out vec4 fragmentColor;\r
\r
                uniform sampler2D uSampler;\r
                uniform sampler2D colorSampler;\r
                uniform float blank;\r
                uniform float bzero;\r
                uniform float bscale;\r
                uniform float min;\r
                uniform float max;\r
                uniform bool containsBlanks;\r
                uniform bool transparentBlack;\r
                uniform int scaleType;\r
                uniform float opacity;\r
                \r
                bool isNaN(float value) {\r
                    // See https://stackoverflow.com/questions/9446888/best-way-to-detect-nans-in-opengl-shaders\r
                    // PKGW also finds that we need \`value != value\` on his Dell laptop running\r
                    // Chrome on Linux.\r
                    return (value != value) || !(value < 0.0 || 0.0 < value || value == 0.0);\r
                }\r
\r
                void main(void) {\r
                    //FITS images are flipped on the y axis\r
                    vec4 color = texture(uSampler, vec2(vTextureCoord.x, 1.0 - vTextureCoord.y));\r
                    if(isNaN(color.r) || (containsBlanks && abs(blank - color.r) < 0.00000001)){\r
                        fragmentColor = vec4(0.0, 0.0, 0.0, 0.0);\r
                    } else {\r
                        float physicalValue = (bzero + bscale * color.r - min) / (max - min);\r
                        if(transparentBlack && physicalValue <= 0.0){\r
                            fragmentColor = vec4(0.0, 0.0, 0.0, 0.0);\r
                            return;\r
                        }\r
                            \r
                        physicalValue = clamp(physicalValue, 0.0, 1.0);\r
\r
                        switch(scaleType){\r
                            case 1:\r
                                physicalValue = log(physicalValue * 255.0 + 1.0 ) / log(256.0);\r
                                break;\r
                            case 2:\r
                                physicalValue = physicalValue * physicalValue;\r
                                break;\r
                            case 3:\r
                                physicalValue = sqrt(physicalValue);\r
                                break;\r
                        }\r
                        vec4 colorFromColorMapper = texture(colorSampler, vec2(physicalValue, 0.5));\r
                        fragmentColor = vec4(colorFromColorMapper.rgb, opacity);\r
                    }\r
                }\r
                `,n=`#version 300 es\r
                in vec3 aVertexPosition;\r
                in vec2 aTextureCoord;\r
                \r
                uniform mat4 uMVMatrix;\r
                uniform mat4 uPMatrix;\r
                uniform vec3 uCenterScreen;\r
                \r
                out vec2 vTextureCoord;\r
                \r
                void main(void) {\r
                    if(length(uCenterScreen) > 0.0000001) {\r
                        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 0.0) + vec4(uCenterScreen, 1.0);\r
                    } else {\r
                        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\r
                    }\r
                    vTextureCoord = aTextureCoord;\r
                }\r
                `;Ne._frag=t.createShader(35632),t.shaderSource(Ne._frag,r),t.compileShader(Ne._frag);var a=t.getShaderParameter(Ne._frag,35713);if(!a){var l=t.getShaderInfoLog(Ne._frag);console.log(l)}Ne._vert=t.createShader(35633),t.shaderSource(Ne._vert,n),t.compileShader(Ne._vert);var f=t.getShaderParameter(Ne._vert,35713);if(!f){var c=t.getShaderInfoLog(Ne._vert);console.log(c)}Ne._prog=t.createProgram(),t.attachShader(Ne._prog,Ne._vert),t.attachShader(Ne._prog,Ne._frag),t.linkProgram(Ne._prog),t.getProgramParameter(Ne._prog,35714),t.useProgram(Ne._prog),Ne.vertLoc=t.getAttribLocation(Ne._prog,"aVertexPosition"),Ne.textureLoc=t.getAttribLocation(Ne._prog,"aTextureCoord"),Ne.projMatLoc=t.getUniformLocation(Ne._prog,"uPMatrix"),Ne.mvMatLoc=t.getUniformLocation(Ne._prog,"uMVMatrix"),Ne.sampLoc=t.getUniformLocation(Ne._prog,"uSampler"),Ne.colorLoc=t.getUniformLocation(Ne._prog,"colorSampler"),Ne.centerScreenLoc=t.getUniformLocation(Ne._prog,"uCenterScreen"),Ne.blank=t.getUniformLocation(Ne._prog,"blank"),Ne.bzero=t.getUniformLocation(Ne._prog,"bzero"),Ne.bscale=t.getUniformLocation(Ne._prog,"bscale"),Ne.minLoc=t.getUniformLocation(Ne._prog,"min"),Ne.maxLoc=t.getUniformLocation(Ne._prog,"max"),Ne.transparentBlackLoc=t.getUniformLocation(Ne._prog,"transparentBlack"),Ne.containsBlanksLoc=t.getUniformLocation(Ne._prog,"containsBlanks"),Ne.scalingLocation=t.getUniformLocation(Ne._prog,"scaleType"),Ne.opacityLoc=t.getUniformLocation(Ne._prog,"opacity"),O.uvMultiple=1,O.demEnabled=!0,t.enable(3042),t.blendFunc(770,771),Ne.initialized=!0},Ne.use=function(e,t,r,n,a,l,f){n==null&&(n=di.getEmpty());var c=e.gl;if(c!=null){Ne.initialized||Ne.init(e),c.useProgram(Ne._prog);var d=Z.multiplyMatrix(e.get_world(),e.get_view());if(c.uniform1f(Ne.opacityLoc,a),c.uniformMatrix4fv(Ne.mvMatLoc,!1,d.floatArray()),c.uniformMatrix4fv(Ne.projMatLoc,!1,e.get_projection().floatArray()),f.lengthSq()>.001){var m=Z.multiplyMatrix(d,e.get_projection()),v=m.transform(f);c.uniform3f(Ne.centerScreenLoc,v.x,v.y,v.z)}else c.uniform3f(Ne.centerScreenLoc,0,0,0);c.uniform1i(Ne.sampLoc,0),c.uniform1i(Ne.colorLoc,1),c.uniform1f(Ne.blank,Ne.blankValue),c.uniform1f(Ne.bzero,Ne.bZero),c.uniform1f(Ne.bscale,Ne.bScale),c.uniform1f(Ne.minLoc,Ne.min),c.uniform1f(Ne.maxLoc,Ne.max),c.uniform1i(Ne.transparentBlackLoc,Ne.transparentBlack),c.uniform1i(Ne.containsBlanksLoc,Ne.containsBlanks),c.uniform1i(Ne.scalingLocation,Ne.scaleType),e.space||l?c.disable(2929):c.enable(2929),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.disableVertexAttribArray(3),c.bindBuffer(34962,t),c.enableVertexAttribArray(Ne.vertLoc),c.enableVertexAttribArray(Ne.textureLoc),c.vertexAttribPointer(Ne.vertLoc,3,5126,!1,20,0),c.vertexAttribPointer(Ne.textureLoc,2,5126,!1,20,12),c.activeTexture(33984),c.bindTexture(3553,n),c.bindBuffer(34963,r),c.enable(3042),l?c.blendFunc(770,1):c.blendFunc(770,771)}};var Lu={};function Vt(){}Vt.init=function(e){var t=e.gl,r=` precision mediump float;                                                              
                                                                                       
   varying vec2 vTextureCoord;                                                         
                                                                                       
   uniform sampler2D uSampler;                                                         
   uniform float opacity;                                                              
                                                                                       
   void main(void) {                                                                   
     vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));           
     gl_FragColor = col * opacity;                                                     
   }                                                                                   
`,n=`     attribute vec3 aVertexPosition;                                              
     attribute vec2 aTextureCoord;                                                
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
                                                                                  
     varying vec2 vTextureCoord;                                                  
     varying vec3 vNormal;                                                        
     varying vec3 vCamVector;                                                     
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
         vTextureCoord = aTextureCoord;                                           
     }                                                                            
                                                                                  
`;Vt._frag=t.createShader(35632),t.shaderSource(Vt._frag,r),t.compileShader(Vt._frag);var a=t.getShaderParameter(Vt._frag,35713);a||t.getShaderInfoLog(Vt._frag),Vt._vert=t.createShader(35633),t.shaderSource(Vt._vert,n),t.compileShader(Vt._vert);var l=t.getShaderParameter(Vt._vert,35713);l||t.getShaderInfoLog(Vt._vert),Vt._prog=t.createProgram(),t.attachShader(Vt._prog,Vt._vert),t.attachShader(Vt._prog,Vt._frag),t.linkProgram(Vt._prog),t.getProgramParameter(Vt._prog,35714),t.useProgram(Vt._prog),Vt.vertLoc=t.getAttribLocation(Vt._prog,"aVertexPosition"),Vt.textureLoc=t.getAttribLocation(Vt._prog,"aTextureCoord"),Vt.projMatLoc=t.getUniformLocation(Vt._prog,"uPMatrix"),Vt.mvMatLoc=t.getUniformLocation(Vt._prog,"uMVMatrix"),Vt.sampLoc=t.getUniformLocation(Vt._prog,"uSampler"),Vt.opacityLoc=t.getUniformLocation(Vt._prog,"opacity"),O.uvMultiple=1,O.demEnabled=!0,t.enable(3042),t.blendFunc(770,771),Vt.initialized=!0},Vt.use=function(e,t,r,n,a,l){n==null&&(n=di.getEmpty());var f=e.gl;if(f!=null){Vt.initialized||Vt.init(e),f.useProgram(Vt._prog);var c=Z.multiplyMatrix(e.get_world(),e.get_view());f.uniform1f(Vt.opacityLoc,a),f.uniformMatrix4fv(Vt.mvMatLoc,!1,c.floatArray()),f.uniformMatrix4fv(Vt.projMatLoc,!1,e.get_projection().floatArray()),f.uniform1i(Vt.sampLoc,0),e.space||l?f.disable(2929):f.enable(2929),f.disableVertexAttribArray(0),f.disableVertexAttribArray(1),f.disableVertexAttribArray(2),f.disableVertexAttribArray(3),f.bindBuffer(34962,t),f.enableVertexAttribArray(Vt.vertLoc),f.enableVertexAttribArray(Vt.textureLoc),f.vertexAttribPointer(Vt.vertLoc,3,5126,!1,20,0),f.vertexAttribPointer(Vt.textureLoc,2,5126,!1,20,12),f.activeTexture(33984),f.bindTexture(3553,n),f.bindBuffer(34963,r),f.enable(3042),l?f.blendFunc(770,1):f.blendFunc(770,771)}};var ku={};function Ot(){}Ot.init=function(e){var t=e.gl,r=` precision mediump float;                                                              
                                                                                       
   varying vec2 vTextureCoord;                                                         
                                                                                       
   uniform sampler2D uSampler;                                                         
   uniform float opacity;                                                              
                                                                                       
   void main(void) {                                                                   
     vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));           
     gl_FragColor = col * opacity;                                                     
   }                                                                                   
`,n=`     attribute vec3 aVertexPosition;                                              
     attribute vec2 aTextureCoord;                                                
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
                                                                                  
     varying vec2 vTextureCoord;                                                  
     varying vec3 vNormal;                                                        
     varying vec3 vCamVector;                                                     
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
         vTextureCoord = aTextureCoord;                                           
     }                                                                            
                                                                                  
`;Ot._frag=t.createShader(35632),t.shaderSource(Ot._frag,r),t.compileShader(Ot._frag);var a=t.getShaderParameter(Ot._frag,35713);a||t.getShaderInfoLog(Ot._frag),Ot._vert=t.createShader(35633),t.shaderSource(Ot._vert,n),t.compileShader(Ot._vert);var l=t.getShaderParameter(Ot._vert,35713);l||t.getShaderInfoLog(Ot._vert),Ot._prog=t.createProgram(),t.attachShader(Ot._prog,Ot._vert),t.attachShader(Ot._prog,Ot._frag),t.linkProgram(Ot._prog),t.getProgramParameter(Ot._prog,35714),t.useProgram(Ot._prog),Ot.vertLoc=t.getAttribLocation(Ot._prog,"aVertexPosition"),Ot.textureLoc=t.getAttribLocation(Ot._prog,"aTextureCoord"),Ot.projMatLoc=t.getUniformLocation(Ot._prog,"uPMatrix"),Ot.mvMatLoc=t.getUniformLocation(Ot._prog,"uMVMatrix"),Ot.sampLoc=t.getUniformLocation(Ot._prog,"uSampler"),Ot.opacityLoc=t.getUniformLocation(Ot._prog,"opacity"),O.uvMultiple=1,O.demEnabled=!0,t.enable(3042),t.blendFunc(770,771),Ot.initialized=!0},Ot.use=function(e,t,r,n,a,l){n==null&&(n=di.getEmpty());var f=e.gl;if(f!=null){Ot.initialized||Ot.init(e),f.useProgram(Ot._prog);var c=Z.multiplyMatrix(e.get_world(),e.get_view());f.uniform1f(Ot.opacityLoc,a),f.uniformMatrix4fv(Ot.mvMatLoc,!1,c.floatArray()),f.uniformMatrix4fv(Ot.projMatLoc,!1,e.get_projection().floatArray()),f.uniform1i(Ot.sampLoc,0),e.space||l?f.disable(2929):f.enable(2929),f.disableVertexAttribArray(0),f.disableVertexAttribArray(1),f.disableVertexAttribArray(2),f.disableVertexAttribArray(3),f.bindBuffer(34962,t),f.enableVertexAttribArray(Ot.vertLoc),f.enableVertexAttribArray(Ot.textureLoc),f.vertexAttribPointer(Ot.vertLoc,3,5126,!1,32,0),f.vertexAttribPointer(Ot.textureLoc,2,5126,!1,32,24),f.activeTexture(33984),f.bindTexture(3553,n),f.bindBuffer(34963,r),f.enable(3042),l?f.blendFunc(770,1):f.blendFunc(770,771)}};var Au={};function Bt(){}Bt.init=function(e){var t=e.gl,r=` precision mediump float;                                                                
                                                                                         
   varying vec2 vTextureCoord;                                                           
   varying lowp vec4 vColor;                                                             
   uniform sampler2D uSampler;                                                           
                                                                                         
   void main(void) {                                                                     
   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t)) * vColor;  
   }                                                                                     
`,n=`     attribute vec3 aVertexPosition;                                              
     attribute vec2 aTextureCoord;                                                
     attribute lowp vec4 aColor;                                                  
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
                                                                                  
     varying vec2 vTextureCoord;                                                  
     varying vec4 vColor;                                                         
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
         vTextureCoord = aTextureCoord;                                           
         vColor = aColor;                                                         
     }                                                                            
                                                                                  
`;Bt._frag=t.createShader(35632),t.shaderSource(Bt._frag,r),t.compileShader(Bt._frag),t.getShaderParameter(Bt._frag,35713),Bt._vert=t.createShader(35633),t.shaderSource(Bt._vert,n),t.compileShader(Bt._vert),t.getShaderParameter(Bt._vert,35713),Bt._prog=t.createProgram(),t.attachShader(Bt._prog,Bt._vert),t.attachShader(Bt._prog,Bt._frag),t.linkProgram(Bt._prog),t.getProgramParameter(Bt._prog,35714),t.useProgram(Bt._prog),Bt.vertLoc=t.getAttribLocation(Bt._prog,"aVertexPosition"),Bt.textureLoc=t.getAttribLocation(Bt._prog,"aTextureCoord"),Bt.colorLoc=t.getAttribLocation(Bt._prog,"aColor"),Bt.projMatLoc=t.getUniformLocation(Bt._prog,"uPMatrix"),Bt.mvMatLoc=t.getUniformLocation(Bt._prog,"uMVMatrix"),Bt.sampLoc=t.getUniformLocation(Bt._prog,"uSampler"),O.uvMultiple=1,O.demEnabled=!0,t.enable(3042),t.blendFunc(770,771),Bt.initialized=!0},Bt.use=function(e,t,r){r==null&&(r=di.getEmpty());var n=e.gl;if(n!=null){Bt.initialized||Bt.init(e),n.useProgram(Bt._prog);var a=Z.multiplyMatrix(e.get_world(),e.get_view());n.uniformMatrix4fv(Bt.mvMatLoc,!1,a.floatArray()),n.uniformMatrix4fv(Bt.projMatLoc,!1,e.get_projection().floatArray()),n.uniform1i(Bt.sampLoc,0),n.disable(2929),n.disableVertexAttribArray(0),n.disableVertexAttribArray(1),n.disableVertexAttribArray(2),n.disableVertexAttribArray(3),n.bindBuffer(34962,t),n.enableVertexAttribArray(Bt.vertLoc),n.enableVertexAttribArray(Bt.textureLoc),n.enableVertexAttribArray(Bt.colorLoc),n.vertexAttribPointer(Bt.vertLoc,3,5126,!1,36,0),n.vertexAttribPointer(Bt.colorLoc,4,5126,!1,36,12),n.vertexAttribPointer(Bt.textureLoc,2,5126,!1,36,28),n.activeTexture(33984),n.bindTexture(3553,r),n.bindBuffer(34963,null),n.enable(3042),n.blendFunc(770,771)}};var Iu={};function Yt(){}Yt.init=function(e){var t=e.gl,r=` precision mediump float;                                                                
                                                                                         
   varying lowp vec4 vColor;                                                             
                                                                                         
   void main(void) {                                                                     
   gl_FragColor =  vColor;                                                               
   }                                                                                     
`,n=`     attribute vec3 aVertexPosition;                                              
     attribute lowp vec4 aColor;                                                  
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
                                                                                  
     varying vec2 vTextureCoord;                                                  
     varying vec4 vColor;                                                         
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
         vColor = aColor;                                                         
     }                                                                            
                                                                                  
`;Yt._frag=t.createShader(35632),t.shaderSource(Yt._frag,r),t.compileShader(Yt._frag),t.getShaderParameter(Yt._frag,35713),Yt._vert=t.createShader(35633),t.shaderSource(Yt._vert,n),t.compileShader(Yt._vert),t.getShaderParameter(Yt._vert,35713),Yt._prog=t.createProgram(),t.attachShader(Yt._prog,Yt._vert),t.attachShader(Yt._prog,Yt._frag),t.linkProgram(Yt._prog),t.getProgramParameter(Yt._prog,35714),t.useProgram(Yt._prog),Yt.vertLoc=t.getAttribLocation(Yt._prog,"aVertexPosition"),Yt.colorLoc=t.getAttribLocation(Yt._prog,"aColor"),Yt.projMatLoc=t.getUniformLocation(Yt._prog,"uPMatrix"),Yt.mvMatLoc=t.getUniformLocation(Yt._prog,"uMVMatrix"),t.disable(2929),t.enable(3042),t.blendFunc(770,771),Yt.initialized=!0},Yt.use=function(e,t){var r=e.gl;if(r!=null){Yt.initialized||Yt.init(e),r.useProgram(Yt._prog);var n=Z.multiplyMatrix(e.get_world(),e.get_view());r.uniformMatrix4fv(Yt.mvMatLoc,!1,n.floatArray()),r.uniformMatrix4fv(Yt.projMatLoc,!1,e.get_projection().floatArray()),r.uniform1i(Yt.sampLoc,0),r.disable(2929),r.disableVertexAttribArray(0),r.disableVertexAttribArray(1),r.disableVertexAttribArray(2),r.disableVertexAttribArray(3),r.bindBuffer(34962,t),r.enableVertexAttribArray(Yt.vertLoc),r.enableVertexAttribArray(Yt.textureLoc),r.enableVertexAttribArray(Yt.colorLoc),r.vertexAttribPointer(Yt.vertLoc,3,5126,!1,36,0),r.vertexAttribPointer(Yt.colorLoc,4,5126,!1,36,12),r.bindBuffer(34963,null),r.enable(3042),r.blendFunc(770,771)}};var Pu={};function jt(){}jt.init=function(e){var t=e.gl,r=` precision mediump float;                                                              
                                                                                       
   varying vec2 vTextureCoord;                                                         
                                                                                       
   uniform sampler2D uSampler;                                                         
                                                                                       
   void main(void) {                                                                   
   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));         
   }                                                                                   
`,n=`     attribute vec3 aVertexPosition;                                              
     attribute vec2 aTextureCoord;                                                
                                                                                  
     uniform mat4 uMVMatrix;                                                      
     uniform mat4 uPMatrix;                                                       
                                                                                  
     varying vec2 vTextureCoord;                                                  
                                                                                  
                                                                                  
     void main(void) {                                                            
         gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);         
         vTextureCoord = aTextureCoord;                                           
     }                                                                            
                                                                                  
`;jt._frag=t.createShader(35632),t.shaderSource(jt._frag,r),t.compileShader(jt._frag),t.getShaderParameter(jt._frag,35713),jt._vert=t.createShader(35633),t.shaderSource(jt._vert,n),t.compileShader(jt._vert),t.getShaderParameter(jt._vert,35713),jt._prog=t.createProgram(),t.attachShader(jt._prog,jt._vert),t.attachShader(jt._prog,jt._frag),t.linkProgram(jt._prog),t.getProgramParameter(jt._prog,35714),t.useProgram(jt._prog),jt.vertLoc=t.getAttribLocation(jt._prog,"aVertexPosition"),jt.textureLoc=t.getAttribLocation(jt._prog,"aTextureCoord"),jt.projMatLoc=t.getUniformLocation(jt._prog,"uPMatrix"),jt.mvMatLoc=t.getUniformLocation(jt._prog,"uMVMatrix"),jt.sampLoc=t.getUniformLocation(jt._prog,"uSampler"),O.uvMultiple=1,O.demEnabled=!0,t.enable(3042),t.blendFunc(770,771),jt.initialized=!0},jt.use=function(e,t,r){r==null&&(r=di.getEmpty());var n=e.gl;if(n!=null){jt.initialized||jt.init(e),n.useProgram(jt._prog);var a=Z.multiplyMatrix(e.get_world(),e.get_view());n.uniformMatrix4fv(jt.mvMatLoc,!1,a.floatArray()),n.uniformMatrix4fv(jt.projMatLoc,!1,e.get_projection().floatArray()),n.uniform1i(jt.sampLoc,0),e.space?n.disable(2929):n.enable(2929),n.disableVertexAttribArray(0),n.disableVertexAttribArray(1),n.disableVertexAttribArray(2),n.disableVertexAttribArray(3),n.bindBuffer(34962,t),n.enableVertexAttribArray(jt.vertLoc),n.enableVertexAttribArray(jt.textureLoc),n.vertexAttribPointer(jt.vertLoc,3,5126,!1,20,0),n.vertexAttribPointer(jt.textureLoc,2,5126,!1,20,12),n.activeTexture(33984),n.bindTexture(3553,r),n.enable(3042),n.blendFunc(770,771)}};var Ru={};function Wn(){this.vertCount=0}var $u={draw:function(e,t,r,n,a,l){this.vertexBuffer==null?this.create(t):this.update(t),n==null?(Yt.use(e,this.vertexBuffer),e.gl.drawArrays(a?5:4,0,t.length)):(Bt.use(e,this.vertexBuffer,n!=null?n.texture2d:null),e.gl.drawArrays(a?5:4,0,t.length))},create:function(e){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var t=new Float32Array(e.length*9),r=t,n=0,a=i.enumerate(e);a.moveNext();){var l=a.current;r[n++]=l.position.x,r[n++]=l.position.y,r[n++]=l.position.z,r[n++]=l.color.r/255,r[n++]=l.color.g/255,r[n++]=l.color.b/255,r[n++]=l.color.a/255,r[n++]=l.tu,r[n++]=l.tv}O.prepDevice.bufferData(34962,t,35048)},update:function(e){if(this.vertCount<e.length){O.prepDevice.deleteBuffer(this.vertexBuffer),this.create(e);return}O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var t=new Float32Array(e.length*9),r=t,n=0,a=i.enumerate(e);a.moveNext();){var l=a.current;r[n++]=l.position.x,r[n++]=l.position.y,r[n++]=l.position.z,r[n++]=l.color.r/255,r[n++]=l.color.g/255,r[n++]=l.color.b/255,r[n++]=l.color.a/255,r[n++]=l.tu,r[n++]=l.tv}O.prepDevice.bufferSubData(34962,0,t)}};function fa(){}fa.tesselateSimplePoly=function(e){var t=[],r=new fa;return r.process(e,t),t};var Eu={_isLeftOfHalfSpace:function(e,t,r){e.normalize(),t.normalize();var n=I.cross(e,t),a=I.dot(n,r);return a>0},_insideTriangle:function(e,t,r,n){return!(!this._isLeftOfHalfSpace(e,t,n)||!this._isLeftOfHalfSpace(t,r,n)||!this._isLeftOfHalfSpace(r,e,n))},_canClipEar:function(e,t,r,n,a,l){var f,c=e[l[t]].copy(),d=e[l[r]].copy(),m=e[l[n]].copy(),v,C=I.subtractVectors(d,c);C.normalize();var T=I.subtractVectors(d,m);T.normalize();var A=I.cross(C,T),$=d.copy();if($.normalize(),I.dot(A,$)>0)return!1;for(f=0;f<a;f++)if(!(f===t||f===r||f===n)&&(v=e[l[f]].copy(),this._insideTriangle(c,d,m,v)))return!1;return!0},process:function(e,t){var r=e.length;if(e.length<3)return!1;for(var n=new Array(e.length),a=0;a<r;a++)n[a]=a;for(var l=r,f=2*l,c=0,d=l-1;l>2;){if(0>=f--)return!1;var m=d;l<=m&&(m=0),d=m+1,l<=d&&(d=0);var v=d+1;if(l<=v&&(v=0),this._canClipEar(e,m,d,v,l,n)){var C,T;for(t.push(n[m]),t.push(n[d]),t.push(n[v]),c++,C=d,T=d+1;T<l;C++,T++)n[C]=n[T];l--,f=2*l}}return!0}};function di(){this.imageElement=null,this.texture2d=null,this._downloading=!1,this._ready=!1,this._errored=!1,this.URL=""}di.getEmpty=function(){return di.empty==null&&(di.empty=O.prepDevice.createTexture(),O.prepDevice.bindTexture(3553,di.empty),O.prepDevice.texImage2D(3553,0,6408,1,1,0,6408,5121,new Uint8Array([0,0,0,0])),O.prepDevice.bindTexture(3553,null)),di.empty},di.fromUrl=function(e){var t=new di;return t.load(e),t},di.isPowerOfTwo=function(e){return!(e&e-1)},di.fitPowerOfTwo=function(e){e--;for(var t=1;t<32;t<<=1)e=e|e>>t;return e+1};var Du={cleanUp:function(){this.imageElement=null,O.prepDevice.deleteTexture(this.texture2d)},dispose:function(){this.cleanUp()},load:function(e){var t=this;if(this.URL=e,!(typeof document>"u")&&!this._downloading){this._downloading=!0,this.imageElement=document.createElement("img");var r=this.imageElement;this.imageElement.addEventListener("load",function(n){t._ready=!0,t._downloading=!1,t._errored=!1,t.makeTexture()},!1),this.imageElement.addEventListener("error",function(n){if(!t.imageElement.hasAttribute("proxyattempt")){t.imageElement.setAttribute("proxyattempt",!0);var a=Nt.singleton.activateProxy(t.URL);if(a!=null){t.imageElement.src=a;return}}t._downloading=!1,t._ready=!1,t._errored=!0},!1),r.crossOrigin="anonymous",this.imageElement.src=this.URL}},makeTexture:function(){if(O.prepDevice!=null)try{this.texture2d=O.prepDevice.createTexture(),O.prepDevice.bindTexture(3553,this.texture2d);var e=this.imageElement;if((!di.isPowerOfTwo(this.imageElement.height)|!di.isPowerOfTwo(this.imageElement.width))===1){var t=document.createElement("canvas");t.height=di.fitPowerOfTwo(e.height),t.width=di.fitPowerOfTwo(e.width);var r=t.getContext("2d");r.drawImage(e,0,0,t.width,t.height),e=t}O.prepDevice.texParameteri(3553,10242,33071),O.prepDevice.texParameteri(3553,10243,33071),O.prepDevice.texImage2D(3553,0,6408,6408,5121,e),O.prepDevice.texParameteri(3553,10241,9985),O.prepDevice.generateMipmap(3553),O.prepDevice.bindTexture(3553,null)}catch{this._errored=!0}}};function X(){}X._createGalaxyImage=function(e){X._milkyWayImage==null&&(X._milkyWayImage=P.loadPlanetTexture(Nt.singleton.engineAssetUrl("milkywaybar.jpg")));var t=50,r,n,a=0,l=64,f=-64,c=-64,d=64;X._galaxyImageVertexBuffer=new pa((t+1)*(t+1));var m=X._galaxyImageVertexBuffer.lock(),v,C,T=f-l,A=d-c,$=608e5,N=V.meanObliquityOfEcliptic(K.get_jNow())/180*Math.PI,F,z=1/t,Y=1/t;for(C=0;C<=t;C++)for(C!==t?r=f-Y*T*C:r=l,v=0;v<=t;v++)v!==t?n=c+z*A*v:n=d,a=C*(t+1)+v,F=I.create(n*$,0,(r-28)*$),F.rotateY(213/180*Math.PI),F.rotateZ(-62.87175/180*Math.PI),F.rotateY(-192.8595083/180*Math.PI),F.rotateX(N),m[a]=Ue.createPosRaw(F,1-v*z,C*Y);X._galaxyImageVertexBuffer.unlock(),X._galaxyImageTriangleCount=t*t*2;var W=new Uint16Array(t*t*6),ee=W;for(C=0;C<t;C++)for(v=0;v<t;v++)a=C*t*6+6*v,ee[a]=C*(t+1)+v,ee[a+2]=(C+1)*(t+1)+v,ee[a+1]=C*(t+1)+(v+1),ee[a+3]=C*(t+1)+(v+1),ee[a+5]=(C+1)*(t+1)+v,ee[a+4]=(C+1)*(t+1)+(v+1);X._galaxyImageIndexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,X._galaxyImageIndexBuffer),O.prepDevice.bufferData(34963,W,35044)},X.drawGalaxyImage=function(e,t){X._galaxyImageIndexBuffer==null&&X._createGalaxyImage(e),e.viewCamera.zoom,Vt.use(e,X._galaxyImageVertexBuffer.vertexBuffer,X._galaxyImageIndexBuffer,X._milkyWayImage.texture2d,t,!0),e.gl.drawElements(4,X._galaxyImageTriangleCount*3,5123,0)},X.drawStars3D=function(e,t){var r=e.viewCamera.zoom,n=Math.max(Math.min(255,(Math.log(r)-15.5)*40.8),0),a=Math.min(255,Math.max(0,i.truncate(n)));a>254||(a=(255-a)*t,X._starSprites==null&&X.initStarVertexBuffer(e),X._starSprites!=null&&X._starSprites.draw(e,a/255,!1))},X.initStarVertexBuffer=function(e){if(!X._starsDownloading&&!q.singleton.freestandingMode&&(X.getStarFile(Nt.singleton.coreStaticUrl("wwtweb/catalog.aspx?Q=hipparcos")),X._starsDownloading=!0),X._starSprites==null&&X._starCount>0){var t=V.meanObliquityOfEcliptic(K.get_jNow())/180*Math.PI,r=X._stars.length;X._starCount=r,X._starSprites=new qr(e),X._starSprites.depthBuffered=!1,X._starSprites.showFarSide=!0;for(var n=i.enumerate(X._stars);n.moveNext();){var a=n.current,l=V.raDecTo3dAu(a.RA,a.dec,a.distance);l.rotateX(t),a.position=l;var f=12e5/Math.pow(1.6,a.absoluteMagnitude);X._starSprites.addPoint(l,a.col,new ii(0,1),f*100)}}},X.initializeStarDB=function(e){if(X._stars==null&&X._stars==null){X._stars=[];for(var t=e.split(`\r
`),r,n=i.enumerate(t);n.moveNext();){var a=n.current,l=a;r=new Ns(l),r.magnitude<X._limitingMagnitude&&r.par>.001&&(X._stars.push(r),X._hipparcosIndex[r.id]=r)}X._starCount=X._stars.length}},X.getStarFile=function(e){X._webFileStar=new fr(e),X._webFileStar.onStateChange=X.starFileStateChange,X._webFileStar.send()},X.starFileStateChange=function(){X._webFileStar.get_state()===2?alert(X._webFileStar.get_message()):X._webFileStar.get_state()===1&&X.initializeStarDB(X._webFileStar.getText())},X.getGalaxyFile=function(e){X._webFileGalaxy=new fr(e),X._webFileGalaxy.responseType="blob",X._webFileGalaxy.onStateChange=X.galaxyFileStateChange,X._webFileGalaxy.send()},X.galaxyFileStateChange=function(){if(X._webFileGalaxy.get_state()===2)alert(X._webFileGalaxy.get_message());else if(X._webFileGalaxy.get_state()===1){var e=X._webFileGalaxy.getBlob(),t=new FileReader;t.onloadend=function(r){var n=new ta(new Uint8Array(t.result));X.initializeCosmos(n)},t.readAsArrayBuffer(e)}},X.drawCosmos3D=function(e,t){e.gl;var r=e.viewCamera.zoom,n=(Math.log(Math.max(1,r))/Math.log(4)-15.5)*90,a=Math.min(255,Math.max(0,i.truncate(n)));if(!(a<3)){if(X.initCosmosVertexBuffer(),X._galaxyTextures==null&&X._largeSet){X._galaxyTextures=new Array(256);for(var l=0;l<256;l++){for(var f=l.toString();f.length<4;)f="0"+f;var c=i.format(Nt.singleton.engineAssetUrl("galimg/gal_{0}.jpg"),f);X._galaxyTextures[l]=P.loadPlanetTexture(c)}}if(X._cosmosReady)for(var d=256,l=0;l<d;l++)X._cosmosSprites[l].drawTextured(e,X._galaxyTextures[l].texture2d,a*t/255)}},X.initCosmosVertexBuffer=function(){X._cosmosSprites==null&&X._downloadCosmosFile()},X._createCosmosVertexBuffer=function(e){O.prepDevice;var t=256;if(X._cosmosSprites!=null)for(var r=0;r<t;r++)X._cosmosSprites[r]!=null&&(X._cosmosSprites[r]=null);X._cosmosSprites=null;var n=V.meanObliquityOfEcliptic(K.get_jNow())/180*Math.PI;X._cosmosSprites=new Array(t);for(var a=new Array(t),l=0;l<t;l++)X._galaxyVertexCounts[l],X._cosmosSprites[l]=new qr(e),X._cosmosSprites[l].depthBuffered=!1,X._cosmosSprites[l].showFarSide=!0,a[l]=0;for(var f=i.enumerate(X._cosmos);f.moveNext();){var c=f.current,d=c.eTypeBucket;a[d];var m=V.raDecTo3dAu(c.RA,c.dec,c.distance*206264.806*1e6/.73);m.rotateX(n),c.position=m,X._cosmosSprites[d].addPoint(m,Te.get_white(),new ii(0,1),1e9*c.size*100),a[d]++}X._cosmosReady=!0},X.initializeCosmos=function(e){if(X._cosmos==null){if(X._galaxyVertexCounts=new Array(X._largeSet?256:20),X._cosmos==null){X._cosmos=[];var t;try{for(var r=0;e.get_position()<e.get_length();)t=new _a(e),X._cosmos.push(t),X._galaxyVertexCounts[t.eTypeBucket]++,r++}catch{}e.close()}X._createCosmosVertexBuffer(q.singleton.renderContext)}},X._downloadCosmosFile=function(){return!X._downloadingGalaxy&&!q.singleton.freestandingMode&&(X.getGalaxyFile(Nt.singleton.coreStaticUrl("wwtweb/catalog.aspx?Q=cosmosnewbin")),X._downloadingGalaxy=!0),!1},X.drawEquitorialGrid=function(e,t,r){if(X._equLineList==null){X._equLineList=new an,X._equLineList.set_depthBuffered(!1);for(var n=0;n<24;n++)for(var a=-80;a<80;a+=2)X._equLineList.addLine(V.raDecTo3dAu(n,a,1),V.raDecTo3dAu(n,a+2,1));for(var a=-80;a<=80;a+=10)for(var n=0;n<23.8;n+=.2)X._equLineList.addLine(V.raDecTo3dAu(n,a,1),V.raDecTo3dAu(n+.2,a,1));for(var l=0,f=0;f<24;f+=.25){var a=.5;switch(l%4){case 0:l++;continue;case 3:case 1:a=.25;break}l++,X._equLineList.addLine(V.raDecTo3dAu(f,a,1),V.raDecTo3dAu(f,-a,1))}l=0;for(var f=0;f<24;f+=3){l=0;for(var a=-80;a<=80;a+=1){var c=.016666666666666666;switch(l%10){case 0:l++;continue;case 5:c=.5/15;break}l++,X._equLineList.addLine(V.raDecTo3dAu(f+c,a,1),V.raDecTo3dAu(f-c,a,1))}}}return X._equLineList.drawLines(e,t,r),!0},X.drawEquitorialGridText=function(e,t,r){return X._makeEquitorialGridText(),X._equTextBatch.draw(e,t,r),!0},X._makeEquitorialGridText=function(){if(X._equTextBatch==null){X._equTextBatch=new wn(30);for(var e=0;e<24;e++){var t=e.toString()+" hr";e<10&&(t="  "+e.toString()+" hr"),X._equTextBatch.add(new rr(V.raDecTo3dAu(e+.005,.4,1),V.raDecTo3dAu(e+.005,.5,1),t,45,18e-5))}for(var e=0;e<24;e+=3)for(var r=-80;r<=80;r+=10)if(r){var t=r.toString();r>0?(t="  +"+r.toString(),X._equTextBatch.add(new rr(V.raDecTo3dAu(e,r-.4,1),V.raDecTo3dAu(e,r-.3,1),t,45,18e-5))):(t="  - "+t.substr(1),X._equTextBatch.add(new rr(V.raDecTo3dAu(e,r+.4,1),V.raDecTo3dAu(e,r+.5,1),t,45,18e-5)))}}},X.drawEcliptic=function(e,t,r){var n=K.get_now().getUTCFullYear();if(X._eclipticOverviewLineList==null||n!==X._eclipticYear){X._eclipticOverviewLineList!=null&&(X._eclipticOverviewLineList.clear(),X._eclipticOverviewLineList=null),X._eclipticYear=n;var a=V.meanObliquityOfEcliptic(K.get_jNow()),l=Z._rotationX(-a/360*(Math.PI*2)),f=365.25;li.isLeap(n,!0)?(X._monthDays[1]=29,f=366):(X._monthDays[1]=28,f=365),2*i.truncate(f),X._eclipticCount=i.truncate(f);var c=K.utcToJulian(new Date(n,0,1,12,0,0)),d=0;X._eclipticOverviewLineList=new an,X._eclipticOverviewLineList.set_depthBuffered(!1);for(var m=0;m<12;m++){for(var v=i.truncate(X._monthDays[m]),C=0;C<v;C++){var T=P.getPlanetLocationJD("Sun",c),A=S.eq2Ec(T.RA,T.dec,a);d=A.x;var $=.005;C||($=.01);var N=d;X._eclipticOverviewLineList.addLine(I._transformCoordinate(I.create(Math.cos(N*Math.PI*2/360),$,Math.sin(N*Math.PI*2/360)),l),I._transformCoordinate(I.create(Math.cos(N*Math.PI*2/360),-$,Math.sin(N*Math.PI*2/360)),l)),c+=1}d+=X._monthDays[m]}}return X._eclipticOverviewLineList.drawLines(e,t,r),!0},X.drawEclipticText=function(e,t,r){return X._makeEclipticText(),X._eclipOvTextBatch.draw(e,t,r),!0},X._makeEclipticText=function(){var e=K.get_now().getUTCFullYear();if(X._eclipOvTextBatch==null){X._eclipOvTextBatch=new wn(80),X._eclipticTextYear=e;var t=V.meanObliquityOfEcliptic(K.get_jNow()),r=Z._rotationX(-t/360*(Math.PI*2)),n=365.25;li.isLeap(e,!0)?(X._monthDays[1]=29,n=366):(X._monthDays[1]=28,n=365),2*i.truncate(n),X._eclipticCount=i.truncate(n);for(var a=K.utcToJulian(new Date(e,0,1,12,0,0)),l=0,f=0;f<12;f++){for(var c=i.truncate(X._monthDays[f]),d=0;d<c;d++){var m=P.getPlanetLocationJD("Sun",a),v=S.eq2Ec(m.RA,m.dec,t);l=v.x;var C=l;if(d===Math.floor(c/2)){var T=I._transformCoordinate(I.create(Math.cos(C*Math.PI*2/360),.025,Math.sin(C*Math.PI*2/360)),r),A=I._transformCoordinate(I.create(Math.cos(C*Math.PI*2/360),.045,Math.sin(C*Math.PI*2/360)),r);A.subtract(T),A.normalize(),X._eclipOvTextBatch.add(new rr(T,A,X._monthNames[f],80,159375e-9))}a+=1}l+=X._monthDays[f]}}},X.drawPrecessionChart=function(e,t,r){return X._makePrecessionChart(),X._precTextBatch.draw(e,t,r),X._precLineList.drawLines(e,t,r),!0},X._makePrecessionChart=function(){var e=V.meanObliquityOfEcliptic(K.get_jNow()),t=Z._rotationX(e/360*(Math.PI*2));if(Te.get_white(),X._precLineList==null){X._precLineList=new an,X._precLineList.set_depthBuffered(!1);for(var r=0;r<360;r++){var n=90-e;X._precLineList.addLine(I._transformCoordinate(V.raDecTo3dAu(r/15,n,1),t),I._transformCoordinate(V.raDecTo3dAu((r+1)/15,n,1),t))}for(var r=-12e3;r<13e3;r+=2e3){var n=90-e,a=-((r-2e3)/25772*24)-6;X._precLineList.addLine(I._transformCoordinate(V.raDecTo3dAu(a,n-.5,1),t),I._transformCoordinate(V.raDecTo3dAu(a,n+.5,1),t))}}if(X._precTextBatch==null){X._precTextBatch=new wn(50);for(var r=-12e3;r<13e3;r+=2e3){var n=90-e+3,a=-((r-2e3)/25772*24)-6,l=r.toString();r?r<0?l="  "+Math.abs(r).toString()+" BCE":l=Math.abs(r).toString()+" CE":(n=90-e+2,l="1 CE"),l.length===9&&(l="   "+l),X._precTextBatch.add(new rr(I._transformCoordinate(V.raDecTo3dAu(a,n,1),t),I._transformCoordinate(V.raDecTo3dAu(a+.01,n,1),t),l,75,15e-5))}}},X.drawAltAzGrid=function(e,t,r){var n=new V(0,0),a=V.horizonToEquitorial(n,K.get_location(),K.get_now()),l=-((a.get_RA()+6)/24*(Math.PI*2)),f=-(a.get_dec()/360*(Math.PI*2));V.formatDMS(a.get_RA());var c=Z._rotationY(-l);if(c._multiply(Z._rotationX(f)),c.invert(),X._altAzLineList==null){X._altAzLineList=new an,X._altAzLineList.set_depthBuffered(!1);for(var d=0;d<360;d+=10)for(var m=-80;m<80;m+=2)X._altAzLineList.addLine(V.raDecTo3dAu(d/15,m,1),V.raDecTo3dAu(d/15,m+2,1));for(var m=-80;m<=80;m+=10)for(var d=0;d<360;d+=5)X._altAzLineList.addLine(V.raDecTo3dAu(d/15,m,1),V.raDecTo3dAu((d+5)/15,m,1));for(var v=0,d=0;d<360;d+=1){var m=.25;switch(v%10){case 0:v++;continue;case 5:m=.5;break}v++,X._altAzLineList.addLine(V.raDecTo3dAu(d/15,m,1),V.raDecTo3dAu(d/15,-m,1))}v=0;for(var d=0;d<360;d+=90){v=0;for(var m=-80;m<=80;m+=1){var C=.25;switch(v%10){case 0:v++;continue;case 5:C=.5;break}v++,X._altAzLineList.addLine(V.raDecTo3dAu((d+C)/15,m,1),V.raDecTo3dAu((d-C)/15,m,1))}}}var T=e.get_world().clone(),A=e.get_worldBase().clone();return e.set_worldBase(Z.multiplyMatrix(c,e.get_world())),e.set_world(e.get_worldBase().clone()),e.makeFrustum(),X._altAzLineList.viewTransform=Z.invertMatrix(c),X._altAzLineList.drawLines(e,t,r),e.set_worldBase(A),e.set_world(T),e.makeFrustum(),!0},X.drawAltAzGridText=function(e,t,r){var n=new V(0,0),a=V.horizonToEquitorial(n,K.get_location(),K.get_now()),l=-((a.get_RA()-6)/24*(Math.PI*2)),f=-(a.get_dec()/360*(Math.PI*2));V.formatDMS(a.get_RA());var c=Z._rotationY(-l-Math.PI);c._multiply(Z._rotationX(f)),c.invert(),X._makeAltAzGridText();var d=e.get_world().clone(),m=e.get_worldBase().clone();return e.set_worldBase(Z.multiplyMatrix(c,e.get_world())),e.set_world(e.get_worldBase().clone()),e.makeFrustum(),X._altAzTextBatch.viewTransform=Z.invertMatrix(c),X._altAzTextBatch.draw(e,t,r),e.set_worldBase(m),e.set_world(d),e.makeFrustum(),!0},X._makeAltAzGridText=function(){if(Te.get_white(),X._altAzTextBatch==null){X._altAzTextBatch=new wn(30);for(var e=0;e<360;e+=10){var t="       "+e.toString();e<10?t="   "+e.toString():e<100&&(t="     "+e.toString());var r=360-e;X._altAzTextBatch.add(new rr(V.raDecTo3dAu(r/15-6,.4,1),V.raDecTo3dAu(r/15-6,.5,1),t,75,18e-5))}for(var e=0;e<360;e+=90)for(var n=-80;n<=80;n+=10)if(n){var t=n.toString();n>0?(t="  +"+n.toString(),X._altAzTextBatch.add(new rr(V.raDecTo3dAu(e/15,n-.4,1),V.raDecTo3dAu(e/15,n-.3,1),t,75,18e-5))):(t="  - "+t.substr(1),X._altAzTextBatch.add(new rr(V.raDecTo3dAu(e/15,n+.4,1),V.raDecTo3dAu(e/15,n+.5,1),t,75,18e-5)))}}},X.drawEclipticGrid=function(e,t,r){if(X._eclipticLineList==null){X._eclipticLineList=new an,X._eclipticLineList.set_depthBuffered(!1);for(var n=V.meanObliquityOfEcliptic(2451545),a=Z._rotationX(-n/360*(Math.PI*2)),l=0;l<360;l+=10)for(var f=-80;f<80;f+=2)X._eclipticLineList.addLine(I._transformCoordinate(V.raDecTo3dAu(l/15,f,1),a),I._transformCoordinate(V.raDecTo3dAu(l/15,f+2,1),a));for(var f=-80;f<=80;f+=10)for(var l=0;l<360;l+=5)X._eclipticLineList.addLine(I._transformCoordinate(V.raDecTo3dAu(l/15,f,1),a),I._transformCoordinate(V.raDecTo3dAu((l+5)/15,f,1),a));for(var c=0,l=0;l<360;l+=1){var f=.25;switch(c%10){case 0:c++;continue;case 5:f=.5;break}c++,X._eclipticLineList.addLine(I._transformCoordinate(V.raDecTo3dAu(l/15,f,1),a),I._transformCoordinate(V.raDecTo3dAu(l/15,-f,1),a))}c=0;for(var l=0;l<360;l+=90){c=0;for(var f=-80;f<=80;f+=1){var d=.25;switch(c%10){case 0:c++;continue;case 5:d=.5;break}c++,X._eclipticLineList.addLine(I._transformCoordinate(V.raDecTo3dAu((l+d)/15,f,1),a),I._transformCoordinate(V.raDecTo3dAu((l-d)/15,f,1),a))}}}return X._eclipticLineList.drawLines(e,t,r),!0},X.drawEclipticGridText=function(e,t,r){return X._makeEclipticGridText(),X._eclipticTextBatch.draw(e,t,r),!0},X._makeEclipticGridText=function(){Te.get_white();var e=V.meanObliquityOfEcliptic(K.get_jNow()),t=Z._rotationX(-e/360*(Math.PI*2));if(X._eclipticTextBatch==null){X._eclipticTextBatch=new wn(30);for(var r=0;r<360;r+=10){var n="       "+r.toString();r<10?n="   "+r.toString():r<100&&(n="     "+r.toString()),X._eclipticTextBatch.add(new rr(I._transformCoordinate(V.raDecTo3dAu(r/15,.4,1),t),I._transformCoordinate(V.raDecTo3dAu(r/15,.5,1),t),n,75,18e-5))}for(var r=0;r<360;r+=90)for(var a=-80;a<=80;a+=10)if(a){var n=a.toString();a>0?(n="  +"+a.toString(),X._eclipticTextBatch.add(new rr(I._transformCoordinate(V.raDecTo3dAu(r/15,a-.4,1),t),I._transformCoordinate(V.raDecTo3dAu(r/15,a-.3,1),t),n,75,18e-5))):(n="  - "+n.substr(1),X._eclipticTextBatch.add(new rr(I._transformCoordinate(V.raDecTo3dAu(r/15,a+.4,1),t),I._transformCoordinate(V.raDecTo3dAu(r/15,a+.5,1),t),n,75,18e-5)))}}},X.drawGalacticGrid=function(e,t,r){if(X._galLineList==null){X._galLineList=new an,X._galLineList.set_depthBuffered(!1);for(var n=0;n<360;n+=10)for(var a=-80;a<80;a+=2)X._galLineList.addLine(V.galacticTo3dDouble(n,a),V.galacticTo3dDouble(n,a+2));for(var a=-80;a<=80;a+=10)for(var n=0;n<360;n+=5)X._galLineList.addLine(V.galacticTo3dDouble(n,a),V.galacticTo3dDouble(n+5,a));for(var l=0,n=0;n<360;n+=1){var a=.25;switch(l%10){case 0:l++;continue;case 5:a=.5;break}l++,X._galLineList.addLine(V.galacticTo3dDouble(n,a),V.galacticTo3dDouble(n,-a))}l=0;for(var n=0;n<360;n+=90){l=0;for(var a=-80;a<=80;a+=1){var f=.25;switch(l%10){case 0:l++;continue;case 5:f=.5;break}l++,X._galLineList.addLine(V.galacticTo3dDouble(n+f,a),V.galacticTo3dDouble(n-f,a))}}}return X._galLineList.drawLines(e,t,r),!0},X.drawGalacticGridText=function(e,t,r){return X._makeGalacticGridText(),X._galTextBatch.draw(e,t,r),!0},X._makeGalacticGridText=function(){if(X._galTextBatch==null){X._galTextBatch=new wn(30);for(var e=0;e<360;e+=10){var t="       "+e.toString();e<10?t="   "+e.toString():e<100&&(t="     "+e.toString()),X._galTextBatch.add(new rr(V.galacticTo3dDouble(e,.4),V.galacticTo3dDouble(e,.5),t,75,18e-5))}for(var e=0;e<360;e+=90)for(var r=-80;r<=80;r+=10)if(r){var t=r.toString();r>0?(t="  +"+r.toString(),X._galTextBatch.add(new rr(V.galacticTo3dDouble(e,r-.4),V.galacticTo3dDouble(e,r-.3),t,75,18e-5))):(t="  - "+t.substr(1),X._galTextBatch.add(new rr(V.galacticTo3dDouble(e,r+.4),V.galacticTo3dDouble(e,r+.5),t,75,18e-5)))}}},X.drawPlanetGrid=function(e,t,r){if(X._planetLineList==null){X._planetLineList=new an,X._planetLineList.set_depthBuffered(!0);for(var n=0;n<360;n+=10)for(var a=-80;a<80;a+=2)X._planetLineList.addLine(V.geoTo3dDouble(a,n),V.geoTo3dDouble(a+2,n));for(var a=-80;a<=80;a+=10)for(var l=0;l<360;l+=5)X._planetLineList.addLine(V.geoTo3dDouble(a,l),V.geoTo3dDouble(a,l+5));for(var f=0,n=0;n<360;n+=1){var a=.25;switch(f%10){case 0:f++;continue;case 5:a=.5;break}f++,X._planetLineList.addLine(V.geoTo3dDouble(a,n),V.geoTo3dDouble(-a,n))}f=0;for(var n=0;n<360;n+=90){f=0;for(var c=-80;c<=80;c+=1){var d=.25;switch(f%10){case 0:f++;continue;case 5:d=.5;break}f++,X._planetLineList.addLine(V.geoTo3dDouble(c,n+d),V.geoTo3dDouble(c,n-d))}}}return X._planetLineList.aaFix=!1,X._planetLineList.set_depthBuffered(!0),X._planetLineList.sky=!1,X._planetLineList.drawLines(e,t,r),!0},X.drawPlanetGridText=function(e,t,r){return X._makePlanetGridText(),X._planetTextBatch.draw(e,t,r),!0},X._makePlanetGridText=function(){if(X._planetTextBatch==null){X._planetTextBatch=new wn(80);for(var e=-180;e<180;e+=10){var t="       "+e.toString();e<10?t="   "+e.toString():e<100&&(t="     "+e.toString()),X._planetTextBatch.add(new rr(V.geoTo3dDouble(.4,e),V.geoTo3dDouble(.5,e),t,-80,6e-5))}for(var e=0;e<360;e+=90)for(var r=-80;r<=80;r+=10)if(r){var t=r.toString();r>0?(t="  +"+r.toString(),X._planetTextBatch.add(new rr(V.geoTo3dDouble(r-.4,e),V.geoTo3dDouble(r-.3,e),t,-80,6e-5))):(t="  - "+t.substring(1),X._planetTextBatch.add(new rr(V.geoTo3dDouble(r+.4,e),V.geoTo3dDouble(r+.5,e),t,-80,6e-5)))}}};var Fu={};function Mi(){this._projection=0,this._imageSetID=0,this._baseTileDegrees=0,this._widthFactor=1,this.demUrl="",this._levels=0,this._mercator=!1,this._bottomsUp=!1,this._baseLevel=1,this._quadTreeTileMap="0123",this._centerX=0,this._centerY=0,this._rotation=0,this._meanRadius=0,this._dataSetType=0,this._bandPass=3,this._altUrl="",this._singleImage=!1,this._fitsProperties=new lo,this._matrixComputed=!1,this._name="",this._sparse=!1,this._thumbnailUrl="",this._generic=!1,this._defaultSet=!1,this._elevationModel=!1,this._offsetX=0,this._offsetY=0}Mi.getTileKey=function(e,t,r,n,a){if(e.get_projection()===7&&a!=null){var l=a.ipix*4+n*2+r;return e.get_imageSetID().toString()+"\\"+t.toString()+"\\"+l.toString()}return e.get_imageSetID().toString()+"\\"+t.toString()+"\\"+n.toString()+"_"+r.toString()},Mi.getNewTile=function(e,t,r,n,a){switch(e.get_projection()){case 0:var l=Wt.create(t,r,n,e,a);return l;case 1:return ts.create(t,r,n,e,a);case 3:default:return ki.create(t,r,n,e,a);case 5:return new Wo(t,r,n,e,a);case 6:return us.create(t,r,n,e,a);case 7:return e.get_hipsProperties()==null&&e.set_hipsProperties(new ja(e)),e.get_hipsProperties().get_downloadComplete()?new es(t,r,n,e,a):null;case 2:var l=new cs(t,r,n,e,a);return l}},Mi.fromXMLNode=function(e){try{var t=2,r=2;e.attributes.getNamedItem("DataSetType")!=null&&(t=gt.parse("ImageSetType",e.attributes.getNamedItem("DataSetType").nodeValue));var n=3;n=gt.parse("BandPass",e.attributes.getNamedItem("BandPass").nodeValue);var a=1;if(e.attributes.getNamedItem("WidthFactor")!=null&&(a=parseInt(e.attributes.getNamedItem("WidthFactor").nodeValue)),e.attributes.getNamedItem("Generic")==null||!i.boolean(e.attributes.getNamedItem("Generic").nodeValue)){r=gt.parse("ProjectionType",e.attributes.getNamedItem("Projection").nodeValue);var l=e.attributes.getNamedItem("FileType").nodeValue;i.startsWith(l,".")||(l="."+l);var f="",c=ye.selectSingleNode(e,"ThumbnailUrl");if(c!=null)if(i.emptyString(c.text)){var d=c;f=d.textContent}else f=c.text;var m=!1,v=!1;e.attributes.getNamedItem("StockSet")!=null&&(m=i.boolean(e.attributes.getNamedItem("StockSet").nodeValue)),e.attributes.getNamedItem("ElevationModel")!=null&&(v=i.boolean(e.attributes.getNamedItem("ElevationModel").nodeValue));var C="";e.attributes.getNamedItem("DemUrl")!=null&&(C=e.attributes.getNamedItem("DemUrl").nodeValue);var T="";e.attributes.getNamedItem("AltUrl")!=null&&(T=e.attributes.getNamedItem("AltUrl").nodeValue);var A=0;e.attributes.getNamedItem("OffsetX")!=null&&(A=parseFloat(e.attributes.getNamedItem("OffsetX").nodeValue));var $=0;e.attributes.getNamedItem("OffsetY")!=null&&($=parseFloat(e.attributes.getNamedItem("OffsetY").nodeValue));var N="",F=ye.selectSingleNode(e,"Credits");F!=null&&(N=ye.getInnerText(F));var z="";F=ye.selectSingleNode(e,"CreditsUrl"),F!=null&&(z=ye.getInnerText(F));var Y=0;e.attributes.getNamedItem("MeanRadius")!=null&&(Y=parseFloat(e.attributes.getNamedItem("MeanRadius").nodeValue));var W=null;e.attributes.getNamedItem("ReferenceFrame")!=null&&(W=e.attributes.getNamedItem("ReferenceFrame").nodeValue);var ee="";e.attributes.getNamedItem("Name")!=null&&(ee=e.attributes.getNamedItem("Name").nodeValue);var ne="";e.attributes.getNamedItem("Url")!=null&&(ne=e.attributes.getNamedItem("Url").nodeValue);var ae=0;e.attributes.getNamedItem("BaseTileLevel")!=null&&(ae=parseInt(e.attributes.getNamedItem("BaseTileLevel").nodeValue));var de=0;e.attributes.getNamedItem("TileLevels")!=null&&(de=parseInt(e.attributes.getNamedItem("TileLevels").nodeValue));var se=0;e.attributes.getNamedItem("BaseDegreesPerTile")!=null&&(se=parseFloat(e.attributes.getNamedItem("BaseDegreesPerTile").nodeValue));var we=!1;e.attributes.getNamedItem("BottomsUp")!=null&&(we=i.boolean(e.attributes.getNamedItem("BottomsUp").nodeValue));var fe="";e.attributes.getNamedItem("QuadTreeMap")!=null&&(fe=e.attributes.getNamedItem("QuadTreeMap").nodeValue);var $e=0;e.attributes.getNamedItem("CenterX")!=null&&($e=parseFloat(e.attributes.getNamedItem("CenterX").nodeValue));var ve=0;e.attributes.getNamedItem("CenterY")!=null&&(ve=parseFloat(e.attributes.getNamedItem("CenterY").nodeValue));var ut=0;e.attributes.getNamedItem("Rotation")!=null&&(ut=parseFloat(e.attributes.getNamedItem("Rotation").nodeValue));var ht=!1;return e.attributes.getNamedItem("Sparse")!=null&&(ht=i.boolean(e.attributes.getNamedItem("Sparse").nodeValue)),Mi.create(ee,ne,t,n,r,Math.abs(ye.getHashCode(ne)),ae,de,256,se,l,we,fe,$e,ve,ut,ht,f,m,v,a,A,$,N,z,C,T,Y,W)}else return Mi.createGeneric(t,n)}catch{return null}},Mi.saveToXml=function(e,t,r){e._writeStartElement("ImageSet"),e._writeAttributeString("Generic",t.get_generic().toString()),e._writeAttributeString("DataSetType",gt.toXml("ImageSetType",t.get_dataSetType())),e._writeAttributeString("BandPass",gt.toXml("BandPass",t.get_bandPass())),t.get_generic()||(e._writeAttributeString("Name",t.get_name()),i.emptyString(r)?e._writeAttributeString("Url",t.get_url()):e._writeAttributeString("Url",r),e._writeAttributeString("DemUrl",t.get_demUrl()),e._writeAttributeString("BaseTileLevel",t.get_baseLevel().toString()),e._writeAttributeString("TileLevels",t.get_levels().toString()),e._writeAttributeString("BaseDegreesPerTile",t.get_baseTileDegrees().toString()),e._writeAttributeString("FileType",t.get_extension()),e._writeAttributeString("BottomsUp",t.get_bottomsUp().toString()),e._writeAttributeString("Projection",gt.toXml("ProjectionType",t.get_projection())),e._writeAttributeString("QuadTreeMap",t.get_quadTreeTileMap()),e._writeAttributeString("CenterX",t.get_centerX().toString()),e._writeAttributeString("CenterY",t.get_centerY().toString()),e._writeAttributeString("OffsetX",t.get_offsetX().toString()),e._writeAttributeString("OffsetY",t.get_offsetY().toString()),e._writeAttributeString("Rotation",t.get_rotation().toString()),e._writeAttributeString("Sparse",t.get_sparse().toString()),e._writeAttributeString("ElevationModel",t.get_elevationModel().toString()),e._writeAttributeString("StockSet",t.get_defaultSet().toString()),e._writeAttributeString("WidthFactor",t.get_widthFactor().toString()),e._writeAttributeString("MeanRadius",t.get_meanRadius().toString()),e._writeAttributeString("ReferenceFrame",t.get_referenceFrame()),i.emptyString(r)?e._writeElementString("ThumbnailUrl",t.get_thumbnailUrl()):e._writeElementString("ThumbnailUrl",t.get_url())),e._writeEndElement()},Mi.createGeneric=function(e,t){var r=new Mi;return r._generic=!0,r._name="Generic",r._sparse=!1,r._dataSetType=e,r._bandPass=t,r._quadTreeTileMap="",r.url="",r._levels=0,r._baseTileDegrees=0,r._imageSetID=0,r._extension="",r._projection=1,r._bottomsUp=!1,r._baseLevel=0,r._mercator=!r._projection,r._centerX=0,r._centerY=0,r._rotation=0,r._thumbnailUrl="",r._matrix=Z.get_identity(),r._matrix._multiply(Z._rotationX(r.get_rotation()/180*Math.PI)),r._matrix._multiply(Z._rotationZ(r.get_centerY()/180*Math.PI)),r._matrix._multiply(Z._rotationY((360-r.get_centerX()+180)/180*Math.PI)),r},Mi.create=function(e,t,r,n,a,l,f,c,d,m,v,C,T,A,$,N,F,z,Y,W,ee,ne,ae,de,se,we,fe,$e,ve){var ut=new Mi;return ut.setInitialParameters(e,t,r,n,a,l,f,c,m,v,C,T,A,$,N,F,z,Y,W,ee,ne,ae,de,se,we,fe,$e,ve),ut};var Nu={get_wcsImage:function(){return this._wcsImage},set_wcsImage:function(e){return this._wcsImage=e,e},get_projection:function(){return this._projection},set_projection:function(e){return this._projection=e,e},get_referenceFrame:function(){return this._referenceFrame},set_referenceFrame:function(e){return this._referenceFrame=e,e},get_imageSetID:function(){return this._imageSetID},set_imageSetID:function(e){return this._imageSetID=e,e},get_baseTileDegrees:function(){return this._baseTileDegrees},set_baseTileDegrees:function(e){return this._baseTileDegrees=e,e},get_widthFactor:function(){return this._widthFactor},set_widthFactor:function(e){return this._widthFactor=e,e},getHashCode:function(){return ye.getHashCode(this.get_url())},get_url:function(){return this.url},set_url:function(e){return this.url=e,e},get_demUrl:function(){return i.emptyString(this.demUrl)&&!this._projection&&!q.singleton.freestandingMode?Nt.singleton.coreStaticUrl("wwtweb/BingDemTile.aspx?Q={0},{1},{2}"):this.demUrl},set_demUrl:function(e){return this.demUrl=e,e},get_extension:function(){return this._extension},set_extension:function(e){return this._extension=e,e},get_levels:function(){return this._levels},set_levels:function(e){return this._levels=e,e},get_bottomsUp:function(){return this._bottomsUp},set_bottomsUp:function(e){return this._bottomsUp=e,e},get_mercator:function(){return this._mercator},set_mercator:function(e){return this._mercator=e,e},get_baseLevel:function(){return this._baseLevel},set_baseLevel:function(e){return this._baseLevel=e,e},get_quadTreeTileMap:function(){return this._quadTreeTileMap},set_quadTreeTileMap:function(e){return this._quadTreeTileMap=e,e},get_centerX:function(){return this._centerX},set_centerX:function(e){return this._centerX!==e&&(this._centerX=e,this._computeMatrix()),e},get_centerY:function(){return this._centerY},set_centerY:function(e){return this._centerY!==e&&(this._centerY=e,this._computeMatrix()),e},get_rotation:function(){return this._rotation},set_rotation:function(e){return this._rotation!==e&&(this._rotation=e,this._computeMatrix()),e},get_meanRadius:function(){return this._meanRadius},set_meanRadius:function(e){return this._meanRadius=e,e},get_bandPass:function(){return this._bandPass},set_bandPass:function(e){return this._bandPass=e,e},get_dataSetType:function(){return this._dataSetType},set_dataSetType:function(e){return this._dataSetType=e,e},get_altUrl:function(){return this._altUrl},set_altUrl:function(e){return this._altUrl=e,e},get_singleImage:function(){return this._singleImage},set_singleImage:function(e){return this._singleImage=e,e},get_hipsProperties:function(){return this._hipsProperties},set_hipsProperties:function(e){return this._hipsProperties=e,e},get_fitsProperties:function(){return this._fitsProperties},set_fitsProperties:function(e){return this._fitsProperties=e,e},toString:function(){return this.get_defaultSet()?this._name+" *":this._name},get_stockImageSet:function(){return this._generic||!this._defaultSet?this:Mi.createGeneric(this.get_dataSetType(),this.get_bandPass())},equals:function(e){if(e==null||!i.canCast(e,Mi))return!1;var t=e;return ye.getHashCode(t.get_url())===ye.getHashCode(this.get_url())&&t.get_dataSetType()===this.get_dataSetType()&&t.get_bandPass()===this.get_bandPass()&&t.get_generic()===this.get_generic()},get_matrix:function(){return this._matrixComputed||this._computeMatrix(),this._matrix},set_matrix:function(e){return this._matrix=e,e},_computeMatrix:function(){this._matrixComputed=!0,this._matrix=Z.get_identity(),this._matrix._multiply(Z._rotationX(this.get_rotation()/180*Math.PI)),this._matrix._multiply(Z._rotationZ(this.get_centerY()/180*Math.PI)),this._matrix._multiply(Z._rotationY((360-this.get_centerX())/180*Math.PI))},get_name:function(){return this._name},set_name:function(e){return this._name=e,e},get_sparse:function(){return this._sparse},set_sparse:function(e){return this._sparse=e,e},get_thumbnailUrl:function(){return this._thumbnailUrl},set_thumbnailUrl:function(e){return this._thumbnailUrl=e,e},get_generic:function(){return this._generic},set_generic:function(e){return this._generic=e,e},get_elevationModel:function(){return this._elevationModel},set_elevationModel:function(e){return this._elevationModel=e,e},get_defaultSet:function(){return this._defaultSet},set_defaultSet:function(e){return this._defaultSet=e,e},get_offsetX:function(){return this._offsetX},set_offsetX:function(e){return this._offsetX=e,e},get_offsetY:function(){return this._offsetY},set_offsetY:function(e){return this._offsetY=e,e},get_creditsText:function(){return this._creditsText},set_creditsText:function(e){return this._creditsText=e,e},get_creditsUrl:function(){return this._creditsUrl},set_creditsUrl:function(e){return this._creditsUrl=e,e},get_isMandelbrot:function(){return!1},_calcViewCenterCoordinate:function(e){var t=V.degreesToRadians(this._rotation),r=Math.cos(t),n=Math.sin(t),a=0,l=0;if(this.get_levels()>0)a=-this._offsetX,l=this._offsetY;else{var f=800,c=800;a=(this._offsetX-f/2)*this._baseTileDegrees,l=(c/2-this._offsetY)*this._baseTileDegrees}return this._bottomsUp&&(a=-a),e?this._centerX+a*r+l*n:this._centerY-a*n+l*r},get_viewCenterX:function(){return this.get_wcsImage()!=null?this.get_wcsImage().get_viewCenterX():this._calcViewCenterCoordinate(!0)},get_viewCenterY:function(){return this.get_wcsImage()!=null?this.get_wcsImage().get_viewCenterY():this._calcViewCenterCoordinate(!1)},setInitialParameters:function(e,t,r,n,a,l,f,c,d,m,v,C,T,A,$,N,F,z,Y,W,ee,ne,ae,de,se,we,fe,$e){this.set_referenceFrame($e),this.set_meanRadius(fe),this._altUrl=we,this.demUrl=se,this._creditsText=ae,this._creditsUrl=de,this._offsetY=ne,this._offsetX=ee,this._widthFactor=W,this._elevationModel=Y,this._defaultSet=z,this._name=e,this._sparse=N,this._dataSetType=r,this._bandPass=n,this._quadTreeTileMap=C,this.url=t,this._levels=c,this._baseTileDegrees=d,this._imageSetID=l,this._extension=m,this._projection=a,this._bottomsUp=v,this._baseLevel=f,this._mercator=!a,this._centerX=T,this._centerY=A,this._rotation=$,this._thumbnailUrl=F,this._computeMatrix()},_guessZoomSetting:function(e){var t=e,r=i.safeCast(this._wcsImage,nr);return this.get_projection()===5?r!=null&&(t=this.get_baseTileDegrees()*r.get_sizeY()*6*1.7):r!=null?t=r.get_scaleY()*r.get_sizeY()*6*1.7:t=this.get_baseTileDegrees()*6*1.7,t>e&&(t=e),t},get_thumbnail:function(){return this._thumbnail},set_thumbnail:function(e){return this._thumbnail=e,e},get_bounds:function(){return this._bounds},set_bounds:function(e){return this._bounds=e,e},get_isImage:function(){return!0},get_isTour:function(){return!1},get_isFolder:function(){return!1},get_isCloudCommunityItem:function(){return!1},get_readOnly:function(){return!1},get_children:function(){return[]}};function Rs(e,t,r,n,a,l){this.interpolationType=0,this.fastDirectionMove=!1,this._toTargetTime=0,this._dateTimeSpan=0,this._complete=!1,this._midpointFired=!1,this.interpolationType=l,Math.abs(e.lng-t.lng)>180&&(e.lng>t.lng?e.lng-=360:e.lng+=360),this._fromDateTime=n,this._toDateTime=a,this._dateTimeSpan=a-n,this._from=e.copy(),this._to=t.copy(),this._fromTime=K.get_metaNow(),this._toTargetTime=r}var Vu={get_complete:function(){return this._complete},get_currentPosition:function(){var e=K.get_metaNow()-this._fromTime,t=e/1e3,r=t/this._toTargetTime;return!this._midpointFired&&r>=.5&&(this._midpointFired=!0,this._midpoint!=null&&this._midpoint()),r>=1?(r=1,this._complete=!0,this._to.copy()):U.get_active().get_galacticMode()&&q.singleton.renderContext.space?fi.interpolateGreatCircle(this._from,this._to,r,this.interpolationType,this.fastDirectionMove):fi.interpolate(this._from,this._to,r,this.interpolationType,this.fastDirectionMove)},get_currentDateTime:function(){var e=K.get_metaNow()-this._fromTime,t=e/1e3,r=t/this._toTargetTime,n=this._dateTimeSpan*r,a=new Date(this._fromDateTime.getTime()+i.truncate(n));return a},get_midpoint:function(){return this._midpoint},set_midpoint:function(e){return this._midpoint=e,e},get_moveTime:function(){return this._toTargetTime}};function sn(){this._upTargetTime=0,this._downTargetTime=0,this._toTargetTime=0,this._upTimeFactor=.6,this._downTimeFactor=.6,this._travelTimeFactor=7,this._midpointFired=!1,this._complete=!1}sn.create=function(e,t){var r=new sn;return r.init(e,t),r},sn.createUpDown=function(e,t,r){var n=new sn;return n._upTimeFactor=n._downTimeFactor=r,n.init(e.copy(),t.copy()),n};var Bu={init:function(e,t){Math.abs(e.lng-t.lng)>180&&(e.lng>t.lng?e.lng-=360:e.lng+=360),t.zoom<=0&&(t.zoom=360),e.zoom<=0&&(e.zoom=360),this._from=e,this._to=t,this._fromTime=K.get_metaNow();var r=360,n,a=Math.abs(e.lng-t.lng),l=Math.abs(e.lat-t.lat),f=Math.sqrt(l*l+a*a);r=f/3*20,r>360&&(r=360),r<e.zoom&&(r=e.zoom),n=f/180*(360/r)*this._travelTimeFactor;var c=Math.max(Math.abs(e.angle-t.angle),Math.abs(e.rotation-t.rotation)),d=Math.max(Math.abs(ye.logN(r,2)-ye.logN(e.zoom,2)),c);this._upTargetTime=this._upTimeFactor*d,this._downTargetTime=this._upTargetTime+n;var m=Math.abs(ye.logN(r,2)-ye.logN(t.zoom,2));this._toTargetTime=this._downTargetTime+Math.max(this._downTimeFactor*m,c),this._fromTop=e.copy(),this._fromTop.zoom=r,this._fromTop.angle=(e.angle+t.angle)/2,this._fromTop.rotation=(e.rotation+t.rotation)/2,this._toTop=t.copy(),this._toTop.zoom=this._fromTop.zoom,this._toTop.angle=this._fromTop.angle,this._toTop.rotation=this._fromTop.rotation},get_complete:function(){return this._complete},get_currentPosition:function(){var e=K.get_metaNow()-this._fromTime,t=e/1e3;if(t<this._upTargetTime)return fi.interpolate(this._from,this._fromTop,t/this._upTargetTime,3,!1);if(t<this._downTargetTime)return t-=this._upTargetTime,U.get_active().get_galacticMode()&&q.singleton.renderContext.space?fi.interpolateGreatCircle(this._fromTop,this._toTop,t/(this._downTargetTime-this._upTargetTime),3,!1):fi.interpolate(this._fromTop,this._toTop,t/(this._downTargetTime-this._upTargetTime),3,!1);this._midpointFired||(this._midpointFired=!0,this._midpoint!=null&&this._midpoint()),t-=this._downTargetTime;var r=t/(this._toTargetTime-this._downTargetTime);return r>1?(r=1,this._complete=!0,this._to.copy()):fi.interpolate(this._toTop,this._to,r,3,!1)},get_currentDateTime:function(){return K.updateClock(),K.get_now()},get_midpoint:function(){return this._midpoint},set_midpoint:function(e){return this._midpoint=e,e},get_moveTime:function(){return this._toTargetTime}};function lr(){this.ABC=new I,this.abc1=new I,this.pointSize=0,this.w=0,this.e=0,this.n=0,this.t=0,this.a=0,this.z=0,this.orbitPos=0,this.orbits=0}var zu={fill:function(e){var t=Math.cos(e.omega*lr._degrad),r=Math.sin(e.omega*lr._degrad),n=Math.cos(e.i*lr._degrad),a=Math.sin(e.i*lr._degrad),l=r*lr._cose,f=r*lr._sine,c=-r*n,d=t*n*lr._cose-a*lr._sine,m=t*n*lr._sine+a*lr._cose;this.ABC.x=Math.atan2(t,c),this.ABC.y=Math.atan2(l,d),this.ABC.z=Math.atan2(f,m),this.abc1.x=Math.sqrt(t*t+c*c),this.abc1.y=Math.sqrt(l*l+d*d),this.abc1.z=Math.sqrt(f*f+m*m),this.pointSize=.1,e.a<2.5?this.color=Te.get_white():e.a<2.83?this.color=Te.get_red():e.a<2.96?this.color=Te.get_green():e.a<3.3?this.color=Te.get_magenta():e.a<5?this.color=Te.get_cyan():e.a<10?(this.color=Te.get_yellow(),this.pointSize=.9):(this.color=Te.get_white(),this.pointSize=8),this.w=e.w,this.e=e.e,e.n?this.n=e.n:this.n=.9856076686/(e.a*Math.sqrt(e.a)),this.t=e.t-lr.baseDate,this.a=e.a,this.z=0,this.orbitPos=0,this.orbits=0}};function Xr(){}var Ou={};function bt(){this.colors=[]}bt.fromArgbList=function(e){for(var t=new bt,r=i.enumerate(e);r.moveNext();){var n=r.current;t.colors.push(G.fromArgb(n[0],n[1],n[2],n[3]))}return t},bt.fromStringList=function(e){for(var t=new bt,r=i.enumerate(e);r.moveNext();){var n=r.current;t.colors.push(G.load(n))}return t},bt.fromNamedColormap=function(e){if(e==null)return null;switch(e.toLowerCase()){case"viridis":return bt.viridis;case"plasma":return bt.plasma;case"inferno":return bt.inferno;case"magma":return bt.magma;case"cividis":return bt.cividis;case"greys":return bt.greys;case"gray":return bt.gray;case"purples":return bt.purples;case"blues":return bt.blues;case"greens":return bt.greens;case"oranges":return bt.oranges;case"reds":return bt.reds;case"rdylbu":return bt.rdYlBu}return null},bt._getTextureFromName=function(e,t){var r=bt.colorTextures[t];if(r==null){var n=bt.fromNamedColormap(t);n!=null&&(r=bt._initColorTexture(e,n),bt.colorTextures[t.toLowerCase()]=r)}return r},bt.bindColorMapTexture=function(e,t){var r=bt._getTextureFromName(e,t);r==null&&(r=bt._getTextureFromName(e,"gray")),e.activeTexture(33985),e.bindTexture(3553,r)},bt._initColorTexture=function(e,t){var r=e.createTexture();e.activeTexture(33985),e.bindTexture(3553,r),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071);var n=bt._extractColorArray(t.colors);return e.texImage2D(3553,0,32849,n.length/3,1,0,6407,5121,n),e.texParameteri(3553,10241,9728),e.texParameteri(3553,10240,9728),r},bt._extractColorArray=function(e){for(var t=0,r=new Uint8Array(e.length*3),n=i.enumerate(e);n.moveNext();){var a=n.current;r[t++]=a.r,r[t++]=a.g,r[t++]=a.b}return r};var Uu={findClosestColor:function(e){var t;return e<=0?this.colors[0]:e>=1?this.colors[this.colors.length-1]:(t=i.truncate(e*this.colors.length),this.colors[t])}};function ri(){this.id=er.newGuid(),this.loadedFromTour=!1,this.tourDocument=null,this.opacity=1,this.opened=!1,this._startTime=i.date("01/01/1900"),this._endTime=i.date("01/01/2100"),this._fadeSpan=0,this._fadeType=4,this.version=0,this.color=Te.get_white(),this.enabled=!0,this.astronomical=!1}ri.fromXml=function(e,t){var r=e.attributes.getNamedItem("Type").nodeValue,n=i.replaceString(r,"TerraViewer.","");if(n==null)return null;var a=null;switch(n){case"SpreadSheetLayer":a=new zi;break;case"GreatCirlceRouteLayer":a=new Fa;break;case"GridLayer":a=new Xs;break;case"ImageSetLayer":a=new Hi;break;case"Object3dLayer":a=new Et;break;case"OrbitLayer":a=new Ys;break;case"VoTableLayer":a=new kr;break;default:return null}return a.initFromXml(e),a};var Hu={getPrimaryUI:function(){return null},getFileStreamUrl:function(e){return this.tourDocument!=null?this.tourDocument.getFileStream(e):null},get_opacity:function(){return this.opacity},set_opacity:function(e){return this.opacity!==e&&(this.version++,this.opacity=e),e},get_opened:function(){return this.opened},set_opened:function(e){return this.opened!==e&&(this.version++,this.opened=e),e},get_startTime:function(){return this._startTime},set_startTime:function(e){return i.compareDates(this._startTime,e)||(this.version++,this._startTime=e),e},get_endTime:function(){return this._endTime},set_endTime:function(e){return i.compareDates(this._endTime,e)||(this.version++,this._endTime=e),e},get_fadeSpan:function(){return this._fadeSpan},set_fadeSpan:function(e){return this.version++,this._fadeSpan=e,e},get_fadeType:function(){return this._fadeType},set_fadeType:function(e){return this._fadeType!==e&&(this.set_version(this.get_version()+1)-1,this._fadeType=e),e},get_version:function(){return this.version},set_version:function(e){return this.version=e,e},findClosest:function(e,t,r,n){return r},hoverCheckScreenSpace:function(e){return!1},clickCheckScreenSpace:function(e){return!1},draw:function(e,t,r){return!0},preDraw:function(e,t){return!0},updateData:function(e,t,r,n){return!0},upadteData:function(e,t,r,n){return this.updateData(e,t,r,n)},canCopyToClipboard:function(){return!1},copyToClipboard:function(){},getParams:function(){var e=new Array(5);return e[0]=this.color.r/255,e[1]=this.color.g/255,e[2]=this.color.b/255,e[3]=this.color.a/255,e[4]=this.opacity,e},setParams:function(e){e.length===5&&(this.opacity=e[4],this.color=G.fromArgb(e[3]*255,e[0]*255,e[1]*255,e[2]*255))},getParamNames:function(){return["Color.Red","Color.Green","Color.Blue","Color.Alpha","Opacity"]},getEditUI:function(){return i.safeCast(this,ue)},cleanUp:function(){},get_name:function(){return this._name},set_name:function(e){return this._name!==e&&(this.version++,this._name=e),e},toString:function(){return this._name},get_referenceFrame:function(){return this.referenceFrame},set_referenceFrame:function(e){return this.referenceFrame=e,e},getProps:function(){return""},get_color:function(){return this.color},set_color:function(e){return this.color!==e&&(this.color=e,this.version++),e},colorChanged:function(){},get_colorValue:function(){return this.get_color().toString()},set_colorValue:function(e){return this.set_color(G.fromName(e)),e},get_enabled:function(){return this.enabled},set_enabled:function(e){return this.enabled=e,e},get_astronomical:function(){return this.astronomical},set_astronomical:function(e){return this.astronomical!==e&&(this.version++,this.astronomical=e),e},getTypeName:function(){return"TerraViewer.Layer"},saveToXml:function(e){e._writeStartElement("Layer"),e._writeAttributeString("Id",this.id.toString()),e._writeAttributeString("Type",this.getTypeName()),e._writeAttributeString("Name",this.get_name()),e._writeAttributeString("ReferenceFrame",this.referenceFrame),e._writeAttributeString("Color",this.color.save()),e._writeAttributeString("Opacity",this.opacity.toString()),e._writeAttributeString("StartTime",ye.xmlDate(this.get_startTime())),e._writeAttributeString("EndTime",ye.xmlDate(this.get_endTime())),e._writeAttributeString("FadeSpan",this.get_fadeSpan().toString()),e._writeAttributeString("FadeType",this.get_fadeType().toString()),this.writeLayerProperties(e),e._writeEndElement()},writeLayerProperties:function(e){},initializeFromXml:function(e){},initFromXml:function(e){if(this.id=er.fromString(e.attributes.getNamedItem("Id").nodeValue),this.set_name(e.attributes.getNamedItem("Name").nodeValue),this.referenceFrame=e.attributes.getNamedItem("ReferenceFrame").nodeValue,this.color=G.load(e.attributes.getNamedItem("Color").nodeValue),this.opacity=parseFloat(e.attributes.getNamedItem("Opacity").nodeValue),e.attributes.getNamedItem("StartTime")!=null&&this.set_startTime(new Date(e.attributes.getNamedItem("StartTime").nodeValue)),e.attributes.getNamedItem("EndTime")!=null&&this.set_endTime(new Date(e.attributes.getNamedItem("EndTime").nodeValue)),e.attributes.getNamedItem("FadeSpan")!=null&&this.set_fadeSpan(ye.parseTimeSpan(e.attributes.getNamedItem("FadeSpan").nodeValue)),e.attributes.getNamedItem("FadeType")!=null)switch(e.attributes.getNamedItem("FadeType").nodeValue){case"In":this.set_fadeType(1);break;case"Out":this.set_fadeType(2);break;case"Both":this.set_fadeType(3);break;case"None":this.set_fadeType(4);break}this.initializeFromXml(e)},loadData:function(e,t){},addFilesToCabinet:function(e){},getStringFromGzipBlob:function(e,t){var r=new FileReader;r.onloadend=function(n){var a="";try{a=Ks.inflate(n.target.result,{to:"string"})}catch(f){var l=f.toString();if(l==="incorrect header check"||l==="unknown compression method")try{a=String.fromCharCode.apply(null,new Uint8Array(n.target.result))}catch(c){throw c}else throw f}t(a)},r.readAsArrayBuffer(e)}};function Gu(e,t){this.markerIndex=4,this.customMarker=null,this.text=e,this.markerIndex=t}var qu={};function k(){}k.get_version=function(){return k._version},k.set_version=function(e){return k._version=e,e},k.get_frameWizardDialog=function(){return k._frameWizardDialog},k.get_dataVizWizardDialog=function(){return k._dataVizWizardDialog},k.get_referenceFramePropsDialog=function(){return k._referenceFramePropsDialog},k.get_greatCircleDlg=function(){return k._greatCircleDialog},k.get_tourLayers=function(){return k._tourLayers},k.set_tourLayers=function(e){return k._tourLayers!==e&&!e?(k._clearLayers(),k._tourLayers=e,k.loadTree()):k._tourLayers!==e&&e&&(k._tourLayers=e,k.initLayers()),e},k.loadTree=function(){q.scriptInterface!=null&&q.scriptInterface.refreshLayerManagerNow()},k.get_layerMaps=function(){return k.get_tourLayers()?k._layerMapsTours:k._layerMaps},k.set_layerMaps=function(e){return k.get_tourLayers()?k._layerMapsTours=e:k._layerMaps=e,e},k.get_allMaps=function(){return k.get_tourLayers()?k._allMapsTours:k._allMaps},k.set_allMaps=function(e){return k.get_tourLayers()?k._allMapsTours=e:k._allMaps=e,e},k.get_currentMap=function(){return k._currentMap},k.set_currentMap=function(e){return k._currentMap=e,e},k.get_layerList=function(){return k.get_tourLayers()?k._layerListTours:k._layerList},k.set_layerList=function(e){return k.get_tourLayers()?k._layerListTours=e:k._layerList=e,e},k.oneTimeInitialization=function(){k._webFileMoons==null&&k.getMoonFile(Nt.singleton.engineAssetUrl("moons.txt")),cr.triggerLoadSprite()},k.initLayers=function(){k._clearLayers();var e=null,t=!k.get_tourLayers()&&!q.singleton.freestandingMode;if(t){e=new Ti("ISS",18),e.frame.epoch=K._twoLineDateToJulian("10184.51609218"),e.frame.semiMajorAxis=672882941e-2,e.frame.referenceFrameType=1,e.frame.inclination=51.6442,e.frame.longitudeOfAscendingNode=147.0262,e.frame.eccentricity=9909e-7,e.frame.meanAnomolyAtEpoch=325.5563,e.frame.meanDailyMotion=360*15.72172655,e.frame.argumentOfPeriapsis=286.4623,e.frame.scale=1,e.frame.semiMajorAxisUnits=1,e.frame.meanRadius=130,e.frame.oblateness=0,e.frame.showOrbitPath=!0;var r=new Array(0),n=Nt.singleton.coreDynamicUrl("wwtweb/isstle.aspx"),a;a=new fr(n),a.onStateChange=function(){if(a.get_state()===1){var l=a.getText();r=l.split(`
`),r.length>1&&e.frame.fromTLE(r[0],r[1],3986004418e5)}},a.send(),e.enabled=!0}k.get_layerMaps().Sun=new Ti("Sun",3),k.get_layerMaps().Sun.addChild(new Ti("Mercury",4)),k.get_layerMaps().Sun.addChild(new Ti("Venus",5)),k.get_layerMaps().Sun.addChild(new Ti("Earth",6)),k.get_layerMaps().Sun.childMaps.Earth.addChild(new Ti("Moon",13)),t&&k.get_layerMaps().Sun.childMaps.Earth.addChild(e),k.get_layerMaps().Sun.addChild(new Ti("Mars",7)),k.get_layerMaps().Sun.addChild(new Ti("Jupiter",8)),k.get_layerMaps().Sun.childMaps.Jupiter.addChild(new Ti("Io",14)),k.get_layerMaps().Sun.childMaps.Jupiter.addChild(new Ti("Europa",15)),k.get_layerMaps().Sun.childMaps.Jupiter.addChild(new Ti("Ganymede",16)),k.get_layerMaps().Sun.childMaps.Jupiter.addChild(new Ti("Callisto",17)),k.get_layerMaps().Sun.addChild(new Ti("Saturn",9)),k.get_layerMaps().Sun.addChild(new Ti("Uranus",10)),k.get_layerMaps().Sun.addChild(new Ti("Neptune",11)),k.get_layerMaps().Sun.addChild(new Ti("Pluto",12)),k._addMoons(k._moonfile),k.get_layerMaps().Sky=new Ti("Sky",0),k.get_layerMaps().Sun.open=!0,k._allMaps={},k._addAllMaps(k.get_layerMaps(),null),t&&k._addIss(),k._version++,k.loadTree()},k._addIss=function(){var e=new tr;e.set_name(_e.getLocalizedText(1314,"ISS Model  (Toshiyuki Takahei)")),e.enabled=U.get_active().get_showISSModel(),k.get_layerList()[e.id]=e,e.set_referenceFrame("ISS"),k.get_allMaps().ISS.layers.push(e),k.get_allMaps().ISS.open=!0},k._addAllMaps=function(e,t){for(var r=i.enumerate(i.keys(e));r.moveNext();){var n=r.current,a=e[n];a.frame.parent=t,k.get_allMaps()[a.get_name()]=a,k._addAllMaps(a.childMaps,a.get_name())}},k._clearLayers=function(){for(var e=i.enumerate(i.keys(k.get_layerList()));e.moveNext();){var t=e.current,r=k.get_layerList()[t];r.cleanUp()}i.clearKeys(k.get_layerList()),i.clearKeys(k.get_layerMaps())},k.getMoonFile=function(e){k._webFileMoons=new fr(e),k._webFileMoons.onStateChange=k.moonFileStateChange,k._webFileMoons.send()},k.moonFileStateChange=function(){k._webFileMoons.get_state()===2?alert(k._webFileMoons.get_message()):k._webFileMoons.get_state()===1&&(k._moonfile=k._webFileMoons.getText(),k.initLayers())},k._addMoons=function(e){for(var t=e.split(`\r
`),r=!0,n=i.enumerate(t);n.moveNext();){var a=n.current;if(r){r=!1;continue}var l=a.split("	");if(l.length>16){var f=l[0],c=new Ti(l[2],18);c.frame._systemGenerated=!0,c.frame.epoch=parseFloat(l[1]),c.frame.semiMajorAxis=parseFloat(l[3])*1e3,c.frame.referenceFrameType=1,c.frame.inclination=parseFloat(l[7]),c.frame.longitudeOfAscendingNode=parseFloat(l[8]),c.frame.eccentricity=parseFloat(l[4]),c.frame.meanAnomolyAtEpoch=parseFloat(l[6]),c.frame.meanDailyMotion=parseFloat(l[9]),c.frame.argumentOfPeriapsis=parseFloat(l[5]),c.frame.scale=1,c.frame.semiMajorAxisUnits=1,c.frame.meanRadius=parseFloat(l[16])*1e3,c.frame.rotationalPeriod=parseFloat(l[17]),c.frame.showAsPoint=!1,c.frame.showOrbitPath=!0,c.frame.set_representativeColor(G.fromArgb(255,175,216,230)),c.frame.oblateness=0,k.get_layerMaps().Sun.childMaps[f].addChild(c)}}},k.addVoTableLayer=function(e,t){return k.addVoTableLayerWithPlotType(e,t,2)},k.addVoTableLayerWithPlotType=function(e,t,r){var n=kr.create(e,r);return n.set_name(t),n.set_astronomical(!0),n.set_referenceFrame("Sky"),k.get_layerList()[n.id]=n,k.get_allMaps().Sky.layers.push(n),k.get_allMaps().Sky.open=!0,n.enabled=!0,k._version++,k.loadTree(),n},k.addImageSetLayer=function(e,t){var r=Hi.create(e);return k.addFitsImageSetLayer(r,t)},k.addImageSetLayerCallback=function(e,t,r){var n=Hi.create(e),a=e.get_extension()===".fits"&&n.getFitsImage()==null&&e.get_projection()!==7;return a&&(e.get_fitsProperties().onMainImageLoaded=function(l){l.applyDisplaySettings(),r!=null&&r(n)}),k.addFitsImageSetLayer(n,t),r!=null&&(!a||e.get_fitsProperties().mainImageLoadedEventHasFired)&&r(n),n},k.addFitsImageSetLayer=function(e,t){return e.doneLoading(null),e.set_name(t),e.set_astronomical(!0),e.set_referenceFrame("Sky"),k.get_layerList()[e.id]=e,k.get_allMaps().Sky.layers.push(e),k.get_allMaps().Sky.open=!0,e.enabled=!0,k._version++,k.loadTree(),e},k.getNextFitsName=function(){return k._getNextName("Fits Image")},k.getNextImageSetName=function(){return k._getNextName("Image Set")},k._getNextName=function(e){for(var t=0,r=i.enumerate(i.keys(k.get_allMaps()));r.moveNext();)for(var n=r.current,a=i.enumerate(k.get_allMaps()[n].layers);a.moveNext();){var l=a.current;if(i.startsWith(l.get_name(),e+" ")){var f=i.replaceString(l.get_name(),e+" ","");try{var c=parseInt(f);c>t&&(t=c)}catch{}}}return i.format("{0} {1}",e,t+1)},k._closeAllTourLoadedLayers=function(){for(var e=[],t=i.enumerate(i.keys(k.get_layerList()));t.moveNext();){var r=t.current,n=k.get_layerList()[r];n.loadedFromTour&&e.push(n.id)}for(var a=i.enumerate(e);a.moveNext();){var l=a.current;k.deleteLayerByID(l,!0,!1)}for(var f=[],c=i.enumerate(i.keys(k.get_allMaps()));c.moveNext();){var r=c.current,d=k.get_allMaps()[r];d.loadedFromTour&&!d.layers.length&&f.push(d.get_name())}for(var m=i.enumerate(f);m.moveNext();){var v=m.current;k.purgeLayerMapDeep(k.get_allMaps()[v],!0)}k.set_version(k.get_version()+1)-1,k.loadTree()},k.purgeLayerMapDeep=function(e,t){for(var r=i.enumerate(e.layers);r.moveNext();){var n=r.current;k.deleteLayerByID(n.id,!1,!1)}e.layers.length=0;for(var a=i.enumerate(i.keys(e.childMaps));a.moveNext();){var l=a.current,f=e.childMaps[l];k.purgeLayerMapDeep(f,!1)}i.clearKeys(e.childMaps),t&&(i.emptyString(e.frame.parent)?i.keyExists(k.get_layerMaps(),e.get_name())&&delete k.get_layerMaps()[e.get_name()]:i.keyExists(k.get_allMaps(),e.frame.parent)&&delete k.get_allMaps()[e.frame.parent].childMaps[e.get_name()]),delete k.get_allMaps()[e.get_name()],k._version++},k._cleanAllTourLoadedLayers=function(){for(var e=i.enumerate(i.keys(k.get_layerList()));e.moveNext();){var t=e.current,r=k.get_layerList()[t];r.loadedFromTour&&(r.loadedFromTour=!1)}},k.mergeToursLayers=function(){k._tourLayers=!1;for(var e=!1,t=!1,r=i.enumerate(i.keys(k._allMapsTours));r.moveNext();){var n=r.current,a=k._allMapsTours[n];if(!i.keyExists(k._allMaps,a.get_name())){var l=new Ti(a.get_name(),18);l.frame=a.frame,l.loadedFromTour=!0,k.get_allMaps()[l.get_name()]=l}}k.connectAllChildren();for(var f=i.enumerate(i.keys(k._layerListTours));f.moveNext();){var n=f.current,c=k._layerListTours[n];i.keyExists(k.get_layerList(),c.id)&&(t||(e=!0,t=!0),e&&k.deleteLayerByID(c.id,!0,!1)),i.keyExists(k.get_layerList(),c.id)?c.cleanUp():i.keyExists(k.get_allMaps(),c.get_referenceFrame())&&(k.get_layerList()[c.id]=c,k.get_allMaps()[c.get_referenceFrame()].layers.push(c))}i.clearKeys(k._layerListTours),i.clearKeys(k._allMapsTours),i.clearKeys(k._layerMapsTours),k.loadTree()},k.connectAllChildren=function(){for(var e=i.enumerate(i.keys(k.get_allMaps()));e.moveNext();){var t=e.current,r=k.get_allMaps()[t];i.emptyString(r.frame.parent)&&!i.keyExists(k.get_layerMaps(),r.frame.name)?k.get_layerMaps()[r.get_name()]=r:!i.emptyString(r.frame.parent)&&i.keyExists(k.get_allMaps(),r.frame.parent)&&(i.keyExists(k.get_allMaps()[r.frame.parent].childMaps,r.frame.name)||(k.get_allMaps()[r.frame.parent].childMaps[r.frame.name]=r,r.parent=k.get_allMaps()[r.frame.parent]))}},k.deleteLayerByID=function(e,t,r){if(i.keyExists(k.get_layerList(),e)){var n=k.get_layerList()[e];return n.cleanUp(),t&&i.remove(k.get_allMaps()[n.get_referenceFrame()].layers,n),delete k.get_layerList()[e],k._version++,r&&k.loadTree(),!0}else return!1},k._getFrameTarget=function(e,t){var r=new vo,n=I.get_empty();if(r.target=I.get_empty(),r.matrix=Z.get_identity(),!i.keyExists(k.get_allMaps(),t))return r;var a=[],l=k.get_allMaps()[t];for(a.push(l);l.frame.reference===18;)l=l.parent,a.splice(0,0,l);for(var f=e.get_world().clone(),c=e.get_worldBaseNonRotating(),d=e.get_worldBase(),m=e.get_nominalRadius(),v=i.enumerate(a);v.moveNext();){var C=v.current;C.frame.reference!==18&&C.frame.reference!==20?P.setupPlanetMatrix(e,gt.parse("SolarSystemObjects",C.frame.name),I.get_empty(),!1):(C.computeFrame(e),C.frame.useRotatingParentFrame()?e.set_world(Z.multiplyMatrix(C.frame.worldMatrix,e.get_world())):e.set_world(Z.multiplyMatrix(C.frame.worldMatrix,e.get_worldBaseNonRotating())),C.frame.referenceFrameType===3&&e.set_worldBaseNonRotating(e.get_world().clone()),e.set_nominalRadius(C.frame.meanRadius))}n=e.get_world().transform(n);var T=e.get_world().transform(I.create(0,0,1)),A=I.subtractVectors(e.get_world().transform(I.create(0,1,0)),n);return A.normalize(),r.matrix=Z.lookAtLH(new I,I.subtractVectors(T,n),A),e.set_nominalRadius(m),e.set_world(f),e.set_worldBaseNonRotating(c),e.set_worldBase(d),r.target=n,r},k._prepTourLayers=function(){if(Ht.get_playing()){var e=q.singleton.uiController;if(e!=null){var t=e.get_tour();if(t.get_currentTourStop()!=null&&(e.updateTweenPosition(-1),!t.get_currentTourStop().get_keyFramed())){t.get_currentTourStop()._updateLayerOpacity();for(var r=i.enumerate(i.keys(t.get_currentTourStop().layers));r.moveNext();){var n=r.current,a=t.get_currentTourStop().layers[n];i.keyExists(k.get_layerList(),a.id)&&(k.get_layerList()[a.id].set_opacity(a.frameOpacity),k.get_layerList()[a.id].setParams(a.frameParams))}}}}},k._draw=function(e,t,r,n,a,l){if(i.keyExists(k.get_allMaps(),n)){var f=k.get_allMaps()[n];if(!(!f.enabled||!i.keyCount(f.childMaps)&&!f.layers.length&&!(f.frame.showAsPoint||f.frame.showOrbitPath))){if(Ht.get_playing()){var c=q.singleton.uiController;if(c!=null){var d=c.get_tour();if(d.get_currentTourStop()!=null){c.updateTweenPosition(-1),d.get_currentTourStop()._updateLayerOpacity();for(var m=i.enumerate(i.keys(d.get_currentTourStop().layers));m.moveNext();){var v=m.current,C=d.get_currentTourStop().layers[v];i.keyExists(k.get_layerList(),C.id)&&(k.get_layerList()[C.id].set_opacity(C.frameOpacity),k.get_layerList()[C.id].setParams(C.frameParams))}}}}var T=e.get_world(),A=e.get_worldBaseNonRotating(),$=e.get_nominalRadius();(f.frame.reference===18|f.frame.reference===18)===1&&(f.computeFrame(e),f.frame.referenceFrameType!==1&&f.frame.referenceFrameType!==2?e.set_world(Z.multiplyMatrix(f.frame.worldMatrix,e.get_world())):e.set_world(Z.multiplyMatrix(f.frame.worldMatrix,e.get_worldBaseNonRotating())),e.set_nominalRadius(f.frame.meanRadius)),f.frame.showAsPoint;for(var N=0;N<2;N++)for(var F=i.enumerate(k.get_allMaps()[n].layers);F.moveNext();){var z=F.current;if(!N&&i.canCast(z,Hi)||N===1&&!i.canCast(z,Hi)){var Y=!1;if(N||(Y=!r&&z.get_overrideDefaultLayer()),z.enabled&&!Y){var W=K.utcToJulian(z.get_startTime()),ee=K.utcToJulian(z.get_endTime()),ne=K.utcToJulian(z.get_startTime())-(z.get_fadeType()===1||z.get_fadeType()===3?z.get_fadeSpan()/864e6:0),ae=K.utcToJulian(z.get_endTime())+(z.get_fadeType()===2||z.get_fadeType()===3?z.get_fadeSpan()/864e6:0);if(K.get_jNow()>ne&&K.get_jNow()<ae){var de=1;if(K.get_jNow()<W&&(de=(K.get_jNow()-ne)/(z.get_fadeSpan()/864e6)),K.get_jNow()>ee&&(de=(ae-K.get_jNow())/(z.get_fadeSpan()/864e6)),z.set_astronomical(r),i.canCast(z,zi)){var se=i.safeCast(z,zi);se.draw(e,t*de,l)}else z.draw(e,t*de,l)}}}}if(a)for(var we=i.enumerate(i.keys(k.get_allMaps()[n].childMaps));we.moveNext();){var v=we.current,fe=k.get_allMaps()[n].childMaps[v];if(i.canCast(fe,Ti)){if(fe.enabled&&fe.frame.showOrbitPath&&U.get_active().get_solarSystemOrbits()&&U.get_active().get_solarSystemMinorOrbits())if(fe.frame.referenceFrameType===1){fe.frame.get_orbit()==null&&fe.frame.set_orbit(new da(fe.frame.get_elements(),360,fe.frame.get_representativeColor(),1,fe.parent.frame.meanRadius));var $e=e.get_world();e.set_world(Z.multiplyMatrix(f.frame.worldMatrix,e.get_worldBaseNonRotating())),fe.frame.get_orbit().draw3D(e,1*.5,I.create(0,0,0)),e.set_world($e)}else fe.frame.referenceFrameType;(fe.frame.reference===18||fe.frame.reference===19)&&k._draw(e,t,r,fe.get_name(),a,l)}}e.set_nominalRadius($),e.set_world(T),e.set_worldBaseNonRotating(A)}}},k._getVisibleLayerList=function(e){for(var t={},r=i.enumerate(i.keys(k.get_layerList()));r.moveNext();){var n=r.current,a=k.get_layerList()[n];if(a.enabled){var l=new Os;l.startOpacity=l.endOpacity=a.get_opacity(),l.id=a.id,l.startParams=a.getParams(),i.keyExists(e,l.id)?(l.endOpacity=e[l.id].endOpacity,l.endParams=e[l.id].endParams):l.endParams=a.getParams(),t[a.id]=l}}return t},k.setVisibleLayerList=function(e){for(var t=i.enumerate(i.keys(k.get_layerList()));t.moveNext();){var r=t.current,n=k.get_layerList()[r];n.enabled=i.keyExists(e,n.id);try{n.enabled&&(n.set_opacity(e[n.id].frameOpacity),n.setParams(e[n.id].frameParams))}catch{}}},k._preDraw=function(e,t,r,n,a){if(i.keyExists(k.get_allMaps(),n)){var l=k.get_allMaps()[n];if(!(!i.keyCount(l.childMaps)&&!l.layers.length)){if(Ht.get_playing()){var f=i.safeCast(q.singleton.uiController,Ht);if(f!=null){var c=f.get_tour();if(c.get_currentTourStop()!=null){f.updateTweenPosition(-1),c.get_currentTourStop()._updateLayerOpacity();for(var d=i.enumerate(i.keys(c.get_currentTourStop().layers));d.moveNext();){var m=d.current,v=c.get_currentTourStop().layers[m];i.keyExists(k.get_layerList(),v.id)&&(k.get_layerList()[v.id].set_opacity(v.frameOpacity),k.get_layerList()[v.id].setParams(v.frameParams))}}}}var C=e.get_world(),T=e.get_worldBaseNonRotating(),A=e.get_nominalRadius();l.frame.reference===18&&(l.computeFrame(e),l.frame.referenceFrameType!==1?e.set_world(Z.multiplyMatrix(l.frame.worldMatrix,e.get_world())):e.set_world(Z.multiplyMatrix(l.frame.worldMatrix,e.get_worldBaseNonRotating())),e.set_nominalRadius(l.frame.meanRadius));for(var $=0;$<2;$++)for(var N=i.enumerate(k.get_allMaps()[n].layers);N.moveNext();){var F=N.current;if((!$&&i.canCast(F,Hi)||$===1&&!i.canCast(F,Hi))&&F.enabled){var z=K.utcToJulian(F.get_startTime()),Y=K.utcToJulian(F.get_endTime()),W=K.utcToJulian(F.get_startTime())-(F.get_fadeType()===1||F.get_fadeType()===3?F.get_fadeSpan()/864e6:0),ee=K.utcToJulian(F.get_endTime())+(F.get_fadeType()===2||F.get_fadeType()===3?F.get_fadeSpan()/864e6:0);if(K.get_jNow()>W&&K.get_jNow()<ee){var ne=1;K.get_jNow()<z&&(ne=(K.get_jNow()-W)/(F.get_fadeSpan()/864e6)),K.get_jNow()>Y&&(ne=(ee-K.get_jNow())/(F.get_fadeSpan()/864e6)),l.frame.reference||F.set_astronomical(!0),F.preDraw(e,t*ne)}}}if(a)for(var ae=i.enumerate(i.keys(k.get_allMaps()[n].childMaps));ae.moveNext();){var m=ae.current,de=k.get_allMaps()[n].childMaps[m];(de.frame.reference===18||de.frame.reference===19)&&k._preDraw(e,t,r,de.get_name(),a)}e.set_nominalRadius(A),e.set_world(C),e.set_worldBaseNonRotating(T)}}},k.add=function(e,t){i.keyExists(k.get_layerList(),e.id)||i.keyExists(k.get_allMaps(),e.get_referenceFrame())&&(k.get_layerList()[e.id]=e,k.get_allMaps()[e.get_referenceFrame()].layers.push(e),k._version++,t&&k.loadTree())},k.layerSelectionChanged=function(e){if(k._selectedLayer=e,k._selectedLayer!=null)if(i.canCast(k._selectedLayer,Ti)){var t=i.safeCast(k._selectedLayer,Ti);t!=null&&k.set_currentMap(t.get_name())}else{var r=i.safeCast(k._selectedLayer,Hi);if(r!=null&&i.canCast(r.get_imageSet().get_wcsImage(),nr))return}q.scriptInterface.setTimeSlider("left",""),q.scriptInterface.setTimeSlider("right",""),q.scriptInterface.setTimeSlider("title",_e.getLocalizedText(667,"Time Scrubber"))},k.setTimeSliderValue=function(e){var t=i.safeCast(k._selectedLayer,Hi);t!=null&&i.canCast(t.get_imageSet().get_wcsImage(),nr)},k.showLayerMenu=function(e,t,r){if(k._lastMenuClick=xe.create(t,r),k._selectedLayer=e,i.canCast(e,Ti)?k.set_currentMap(e.get_name()):i.canCast(e,ri)&&k.set_currentMap(e.get_referenceFrame()),i.canCast(e,ri)&&!i.canCast(e,po)){var n=e;k._contextMenu=new un;var a=Pe.create(_e.getLocalizedText(225,"Rename")),l=Pe.create(_e.getLocalizedText(981,"Expand")),f=Pe.create(_e.getLocalizedText(982,"Collapse")),c=Pe.create(_e.getLocalizedText(428,"Copy")),d=Pe.create(_e.getLocalizedText(167,"Delete")),m=Pe.create(_e.getLocalizedText(960,"Save...")),v=Pe.create(_e.getLocalizedText(983,"Publish to Community...")),C=Pe.create(_e.getLocalizedText(458,"Color/Opacity")),T=Pe.create(_e.getLocalizedText(305,"Opacity")),A=Pe.create(_e.getLocalizedText(20,"Properties")),$=Pe.create(_e.getLocalizedText(1291,"Scale/Histogram")),N=Pe.create(_e.getLocalizedText(683,"Lifetime")),F=new ar,z=Pe.create(_e.getLocalizedText(684,"Move to Top")),Y=Pe.create(_e.getLocalizedText(685,"Move Up")),W=Pe.create(_e.getLocalizedText(686,"Move Down")),ee=Pe.create(_e.getLocalizedText(687,"Move to Bottom")),ne=Pe.create(_e.getLocalizedText(957,"VO Table Viewer")),ae=new ar,de=Pe.create(_e.getLocalizedText(1294,"Background Image Set"));if(z.click=k._top_Click,Y.click=k._up_Click,W.click=k._down_Click,ee.click=k._bottom_Click,m.click=k._saveMenu_Click,v.click=k._publishMenu_Click,l.click=k._expand_Click,f.click=k._collapse_Click,c.click=k._copyMenu_Click,C.click=k._colorMenu_Click,d.click=k._deleteMenu_Click,a.click=k._renameMenu_Click,A.click=k._propertiesMenu_Click,$.click=k.scaleMenu_click,de.click=k._defaultImageset_Click,T.click=k._opacityMenu_Click,N.click=k._lifeTimeMenu_Click,ne.click=k._showViewer_Click,k._contextMenu.items.push(a),!n.get_opened()&&n.getPrimaryUI()!=null&&n.getPrimaryUI().get_hasTreeViewNodes()&&k._contextMenu.items.push(l),n.get_opened()&&k._contextMenu.items.push(f),n.canCopyToClipboard(),k._contextMenu.items.push(d),k._contextMenu.items.push(ae),k._contextMenu.items.push(C),i.canCast(e,Hi)){k._contextMenu.items.push(de);var se=i.safeCast(e,Hi);de.checked=se.get_overrideDefaultLayer()}if((i.canCast(e,zi)||i.canCast(e,Fa))&&k._contextMenu.items.push(A),i.canCast(e,kr)&&k._contextMenu.items.push(ne),i.canCast(e,Hi)){var se=i.safeCast(e,Hi);k._contextMenu.items.push($)}k.get_allMaps()[n.get_referenceFrame()].layers.length>1&&(k._contextMenu.items.push(F),k._contextMenu.items.push(z),k._contextMenu.items.push(Y),k._contextMenu.items.push(W),k._contextMenu.items.push(ee)),k._contextMenu._show(xe.create(t,r))}else if(i.canCast(e,Ti)){var we=i.safeCast(e,Ti),fe=we.frame.reference.toString()==="Sandbox",$e=we.frame.name==="Dome",ve=we.frame.name==="Sky";if($e)return;k._contextMenu=new un;var ut=Pe.create(_e.getLocalizedText(1298,"Track this frame")),ht=Pe.create(_e.getLocalizedText(1299,"Fly Here")),Je=Pe.create("Show Orbit"),Ee=Pe.create(_e.getLocalizedText(674,"New Reference Frame")),pi=Pe.create(_e.getLocalizedText(675,"New Layer Group")),Ii=Pe.create(_e.getLocalizedText(166,"Add")),xi=Pe.create("Add Light");Pe.create(_e.getLocalizedText(956,"Add OData/table feed as Layer")),Pe.create(_e.getLocalizedText(987,"New WMS Layer"));var ei=Pe.create(_e.getLocalizedText(1300,"New Lat/Lng Grid")),yi=Pe.create(_e.getLocalizedText(988,"New Great Circle"));Pe.create(_e.getLocalizedText(989,"Import Orbital Elements"));var Kt=Pe.create(_e.getLocalizedText(1301,"Add Minor Planet")),Gi=Pe.create(_e.getLocalizedText(167,"Delete")),Pt=Pe.create(_e.getLocalizedText(425,"Paste"));Pe.create(_e.getLocalizedText(1290,"Add to Timeline")),Pe.create(_e.getLocalizedText(1280,"Add Keyframe"));var qi=Pe.create(_e.getLocalizedText(20,"Properties")),m=Pe.create(_e.getLocalizedText(990,"Save Layers"));Pe.create(_e.getLocalizedText(991,"Publish Layers to Community"));var F=new ar,Di=new ar,ae=new ar,st=Pe.create("As Reference Frame"),Qe=Pe.create("As Orbital Line");if(ut.click=k._trackFrame_Click,ht.click=k._goTo_Click,st.click=k._addMpc_Click,Qe.click=k._asOrbitalLines_Click,Kt.dropDownItems.push(st),Kt.dropDownItems.push(Qe),Ii.click=k._addMenu_Click,pi.click=k._newLayerGroupMenu_Click,Pt.click=k._pasteLayer_Click,Ee.click=k._newMenu_Click,Gi.click=k._deleteFrameMenu_Click,qi.click=k._framePropertiesMenu_Click,yi.click=k._addGreatCircle_Click,ei.click=k._addGirdLayer_Click,Pe.create("Extract Orbit Layer"),we.frame.reference!==19){if((q.singleton.get_solarSystemMode()|q.singleton.sandboxMode)===1){var Gt=!1;if(we.frame.reference!==18&&!q.singleton.sandboxMode)try{var St=we.frame.reference.toString();if(St!=="Sandbox"){var Ar=gt.parse("SolarSystemObjects",St),sr=Ar,Oi=Math.pow(2,sr);Je.checked=!!(U.get_active().get_planetOrbitsFilter()&Oi),Je.click=k._showOrbitPlanet_Click,Je.tag=Oi.toString()}}catch{}else!fe&&!ve&&(k._contextMenu.items.push(ut),Gt=!0),Je.checked=we.frame.showOrbitPath,Je.click=k._showOrbit_Click;Gt&&k._contextMenu.items.push(ae),!ve&&!fe&&(k._contextMenu.items.push(Je),k._contextMenu.items.push(Di)),we.frame.reference.toString()==="Sandbox"&&k._contextMenu.items.push(xi)}ve||k._contextMenu.items.push(Ee)}ve||(k._contextMenu.items.push(yi),k._contextMenu.items.push(ei)),(we.frame.reference!==19&&we.frame.name==="Sun"||we.frame.reference===19&&we.parent!=null&&we.parent.frame.name==="Sun")&&k._contextMenu.items.push(Kt),we.frame.reference===18&&we.frame.referenceFrameType===1&&we.parent!=null&&we.parent.frame.name,k._contextMenu.items.push(Pt),we.frame.reference===19&&k._contextMenu.items.push(Gi),we.frame.reference===18&&(k._contextMenu.items.push(Gi),k._contextMenu.items.push(qi)),k._contextMenu.items.push(F),k._contextMenu._show(xe.create(t,r))}},k._publishMenu_Click=function(e,t){},k._addGirdLayer_Click=function(e,t){var r=new Xs;r.enabled=!0,r.set_name("Lat-Lng Grid"),k.get_layerList()[r.id]=r,r.set_referenceFrame(k._currentMap),k.get_allMaps()[k._currentMap].layers.push(r),k.get_allMaps()[k._currentMap].open=!0,k._version++,k.loadTree()},k._trackFrame_Click=function(e,t){var r=k._selectedLayer;q.singleton.renderContext.set_solarSystemTrack(20),q.singleton.renderContext.set_trackingFrame(r.get_name()),q.singleton.renderContext.viewCamera.zoom=q.singleton.renderContext.targetCamera.zoom=1e-9},k._goTo_Click=function(e,t){},k._saveMenu_Click=function(e,t){},k._expand_Click=function(e,t){},k._collapse_Click=function(e,t){},k._copyMenu_Click=function(e,t){if(k._selectedLayer!=null&&i.canCast(k._selectedLayer,ri)){var r=k._selectedLayer;r.copyToClipboard()}},k._newLayerGroupMenu_Click=function(e,t){},k._importTLEFile=function(e){},k._makeLayerGroupNow=function(e){var t=k._selectedLayer;k._makeLayerGroup(e,t)},k._makeLayerGroup=function(e,t){var r=new ji;r.name=e,r.reference=19;var n=new Ti(r.name,19);n.frame=r,n.frame._systemGenerated=!1,t.addChild(n),n.frame.parent=t.get_name(),k.get_allMaps()[r.name]=n,k._version++},k._lifeTimeMenu_Click=function(e,t){},k._deleteFrameMenu_Click=function(e,t){},k._framePropertiesMenu_Click=function(e,t){var r=k._selectedLayer;k.get_referenceFramePropsDialog().show(r.frame,t)},k._newMenu_Click=function(e,t){var r=new ji;k.get_frameWizardDialog().show(r,t)},k.referenceFrameWizardFinished=function(e){var t=k._selectedLayer,r=new Ti(e.name,18);i.keyExists(k.get_allMaps(),e.name)||(r.frame=e,t.addChild(r),r.frame.parent=t.get_name(),k.get_allMaps()[e.name]=r,k._version++,k.loadTree())},k.pasteFromTle=function(e,t){for(var r="",n="",a=0;a<e.length;a++)e[a]=i.trim(e[a]),e[a].length===69&&ji.isTLECheckSumGood(e[a])&&(!r.length&&e[a].substring(0,1)==="1"&&(r=e[a]),!n.length&&e[a].substring(0,1)==="2"&&(n=e[a]));return r.length===69&&n.length===69?(t.fromTLE(r,n,3986004418e5),!0):!1},k._opacityMenu_Click=function(e,t){},k._defaultImageset_Click=function(e,t){var r=i.safeCast(k._selectedLayer,Hi);r.set_overrideDefaultLayer(!r.get_overrideDefaultLayer())},k._propertiesMenu_Click=function(e,t){if(i.canCast(k._selectedLayer,zi)){var r=k._selectedLayer;k.get_dataVizWizardDialog().show(r,t)}i.canCast(k._selectedLayer,Fa)&&k.get_greatCircleDlg().show(k._selectedLayer,new i.EventArgs)},k._renameMenu_Click=function(e,t){var r=k._selectedLayer,n=new Da(_e.getLocalizedText(225,"Rename"),_e.getLocalizedText(228,"New Name"),r.get_name());n.show(k._lastMenuClick,function(){i.emptyString(n.text)||(r.set_name(n.text),k._version++,k.loadTree())})},k._colorMenu_Click=function(e,t){var r=k._selectedLayer,n=new Hs;r.get_color()!=null&&(n.color=r.get_color()),n.callBack=function(){r.set_color(n.color)},n.show(t)},k._addMenu_Click=function(e,t){},k._deleteMenu_Click=function(e,t){k._deleteSelectedLayer()},k._deleteSelectedLayer=function(){if(k._selectedLayer!=null&&i.canCast(k._selectedLayer,ri)){var e=k._selectedLayer;delete k.get_layerList()[e.id],i.remove(k.get_allMaps()[k.get_currentMap()].layers,e),e.cleanUp(),e.set_version(e.get_version()+1)-1,k.loadTree(),k._version++}},k.scaleMenu_click=function(e,t){var r=i.safeCast(k._selectedLayer,Hi);if(r!=null){var n=new En;n.image=r.getFitsImage(),n.layer=r,n.show(xe.create(200,200))}},k._showViewer_Click=function(e,t){if(i.canCast(k._selectedLayer,kr)){var r=i.safeCast(k._selectedLayer,kr);q.scriptInterface.displayVoTableLayer(r)}},k._bottom_Click=function(e,t){var r=i.safeCast(k._selectedLayer,ri);r!=null&&(i.remove(k.get_allMaps()[r.get_referenceFrame()].layers,r),k.get_allMaps()[r.get_referenceFrame()].layers.push(r)),k._version++,k.loadTree()},k._down_Click=function(e,t){var r=i.safeCast(k._selectedLayer,ri);if(r!=null){var n=k.get_allMaps()[r.get_referenceFrame()].layers.lastIndexOf(r);n<k.get_allMaps()[r.get_referenceFrame()].layers.length-1&&(i.remove(k.get_allMaps()[r.get_referenceFrame()].layers,r),k.get_allMaps()[r.get_referenceFrame()].layers.splice(n+1,0,r))}k._version++,k.loadTree()},k._up_Click=function(e,t){var r=i.safeCast(k._selectedLayer,ri);if(r!=null){var n=k.get_allMaps()[r.get_referenceFrame()].layers.lastIndexOf(r);n>0&&(i.remove(k.get_allMaps()[r.get_referenceFrame()].layers,r),k.get_allMaps()[r.get_referenceFrame()].layers.splice(n-1,0,r))}k._version++,k.loadTree()},k._top_Click=function(e,t){var r=i.safeCast(k._selectedLayer,ri);r!=null&&(i.remove(k.get_allMaps()[r.get_referenceFrame()].layers,r),k.get_allMaps()[r.get_referenceFrame()].layers.splice(0,0,r)),k._version++,k.loadTree()},k._pasteLayer_Click=function(e,t){k.get_dataVizWizardDialog().show(k.get_currentMap(),t)},k.createSpreadsheetLayer=function(e,t,r){var n=new zi;return n.loadFromString(r,!1,!1,!1,!0),n.set_name(t),k.addSpreadsheetLayer(n,e),n},k.addSpreadsheetLayer=function(e,t){e.enabled=!0,e.set_referenceFrame(t),k.add(e,!0)},k._showOrbitPlanet_Click=function(e,t){try{var r=parseInt(e.tag.toString());U.get_globalSettings().get_planetOrbitsFilter()&r?U.get_globalSettings().set_planetOrbitsFilter(U.get_globalSettings().get_planetOrbitsFilter()&~r):U.get_globalSettings().set_planetOrbitsFilter(U.get_globalSettings().get_planetOrbitsFilter()|r)}catch{}},k._showOrbit_Click=function(e,t){var r=i.safeCast(k._selectedLayer,Ti);r.frame.showOrbitPath=!r.frame.showOrbitPath},k._addGreatCircle_Click=function(e,t){k._addGreatCircleLayer()},k._addMpc_Click=function(e,t){var r=k._selectedLayer,n=new Da(_e.getLocalizedText(1302,"Minor planet name or designation"),_e.getLocalizedText(238,"Name"),""),a=!1;do if(n.showDialog()===1)if(i.keyExists(r.childMaps,n.text))a=!0;else try{k._getMpc(n.text,r),a=!1}catch{a=!0}else a=!1;while(a)},k._asOrbitalLines_Click=function(e,t){var r=k._selectedLayer,n=new Da(_e.getLocalizedText(1302,"Minor planet name or designation"),_e.getLocalizedText(238,"Name"),"");n.show(Ei.get_position(),function(){i.keyExists(r.childMaps,n.text)||k._getMpcAsTLE(n.text,r)})},k._getMpcAsTLE=function(e,t){var r=new fr("https://www.minorplanetcenter.net/db_search/show_object?object_id="+e);r.onStateChange=function(){if(r.get_state()===1){var n=r.getText(),a=n.indexOf("show-orbit-button"),l=n.indexOf("/form",a),f=n.substring(a,l),c=e,d=new ji;d.oblateness=0,d.showOrbitPath=!0,d.showAsPoint=!0,d.epoch=K.utcToJulian(i.date(k._getValueByID(f,"epoch").substring(0,10))),d.semiMajorAxis=parseFloat(k._getValueByID(f,"a"))*149598e3*1e3,d.referenceFrameType=1,d.inclination=parseFloat(k._getValueByID(f,"incl")),d.longitudeOfAscendingNode=parseFloat(k._getValueByID(f,"node")),d.eccentricity=parseFloat(k._getValueByID(f,"e")),d.meanAnomolyAtEpoch=parseFloat(k._getValueByID(f,"m")),d.meanDailyMotion=ci.meanMotionFromSemiMajorAxis(parseFloat(k._getValueByID(f,"a"))),d.argumentOfPeriapsis=parseFloat(k._getValueByID(f,"peri")),d.scale=1,d.semiMajorAxisUnits=1,d.meanRadius=10,d.oblateness=0;var m=c+`
`+d.toTLE();k._loadOrbitsFile(e,m,t.get_name()),k.loadTree()}},r.send()},k._getMpc=function(e,t){var r=new fr("https://www.minorplanetcenter.net/db_search/show_object?object_id="+e);r.onStateChange=function(){var n=r.getText(),a=n.indexOf("show-orbit-button"),l=n.indexOf("/form",a),f=n.substring(a,l),c=e,d=new Ti(i.trim(c),18);d.frame.oblateness=0,d.frame.showOrbitPath=!0,d.frame.showAsPoint=!0,d.frame.epoch=K.utcToJulian(i.date(k._getValueByID(f,"epoch").substring(0,10))),d.frame.semiMajorAxis=parseFloat(k._getValueByID(f,"a"))*149598e3*1e3,d.frame.referenceFrameType=1,d.frame.inclination=parseFloat(k._getValueByID(f,"incl")),d.frame.longitudeOfAscendingNode=parseFloat(k._getValueByID(f,"node")),d.frame.eccentricity=parseFloat(k._getValueByID(f,"e")),d.frame.meanAnomolyAtEpoch=parseFloat(k._getValueByID(f,"m")),d.frame.meanDailyMotion=ci.meanMotionFromSemiMajorAxis(parseFloat(k._getValueByID(f,"a"))),d.frame.argumentOfPeriapsis=parseFloat(k._getValueByID(f,"peri")),d.frame.scale=1,d.frame.semiMajorAxisUnits=1,d.frame.meanRadius=10,d.frame.oblateness=0,i.keyExists(k.get_allMaps()[t.get_name()].childMaps,i.trim(c))||k.get_allMaps()[t.get_name()].addChild(d),k.get_allMaps()[d.get_name()]=d,d.frame.parent=t.get_name(),k._makeLayerGroup("Minor Planet",d),k.loadTree()}},k._getValueByID=function(e,t){var r=e.indexOf('id="'+t+'"');r=e.indexOf("value=",r)+7;var n=e.indexOf('"',r);return e.substr(r,n-r)},k._addGreatCircleLayer=function(){var e=new Fa,t=q.singleton.renderContext.viewCamera;e.set_latStart(t.lat),e.set_latEnd(t.lat-5),e.set_lngStart(t.lng),e.set_lngEnd(t.lng+5),e.set_width(4),e.enabled=!0,e.set_name(_e.getLocalizedText(1144,"Great Circle Route")),k.get_layerList()[e.id]=e,e.set_referenceFrame(k._currentMap),k.get_allMaps()[k._currentMap].layers.push(e),k.get_allMaps()[k._currentMap].open=!0,k._version++,k.loadTree(),k.get_greatCircleDlg().show(e,new i.EventArgs)},k._loadOrbitsFile=function(e,t,r){var n=new Ys;return n.loadString(t),n.enabled=!0,n.set_name(e),k.get_layerList()[n.id]=n,n.set_referenceFrame(r),k.get_allMaps()[r].layers.push(n),k.get_allMaps()[r].open=!0,k._version++,k.loadTree(),n};var Xu={};function Ti(e,t){this.childMaps={},this.parent=null,this.layers=[],this.open=!1,this.enabled=!0,this.loadedFromTour=!1,this.frame=new ji,this.set_name(e),this.frame.reference=t;var r=6371e3;switch(t){case 0:break;case 1:break;case 2:break;case 3:r=696e6;break;case 4:r=2439700;break;case 5:r=6051800;break;case 6:r=6371e3;break;case 7:r=339e4;break;case 8:r=69911e3;break;case 9:r=58232e3;break;case 10:r=25362e3;break;case 11:r=24622e3;break;case 12:r=1161e3;break;case 13:r=1737100;break;case 14:r=1821500;break;case 15:r=1561e3;break;case 16:r=2631200;break;case 17:r=2410300;break}this.frame.meanRadius=r}var Yu={addChild:function(e){e.parent=this,this.childMaps[e.get_name()]=e},get_name:function(){return this.frame.name},set_name:function(e){return this.frame.name=e,e},computeFrame:function(e){this.frame.reference===18&&this.frame.computeFrame(e)},toString:function(){return this.get_name()}};function po(){}var ju={};function Wu(){}var Ku={};function vo(){}var Ju={};function Pn(){}var Zu={get_hasTreeViewNodes:function(){return!1},getTreeNodes:function(){return null},getNodeContextMenu:function(e){return null},setUICallbacks:function(e){}};function Qu(){this._tag=null,this._isChecked=!1,this._isEnabled=!0,this._subMenus=null}var ec={get_name:function(){return this._name},set_name:function(e){return this._name=e,e},get_tag:function(){return this._tag},set_tag:function(e){return this._tag=e,e},get_checked:function(){return this._isChecked},set_checked:function(e){return this._isChecked=e,e},get_enabled:function(){return this._isEnabled},set_enabled:function(e){return this._isEnabled=e,e},add_menuItemSelected:function(e){this.__menuItemSelected=i.bindAdd(this.__menuItemSelected,e)},remove_menuItemSelected:function(e){this.__menuItemSelected=i.bindSub(this.__menuItemSelected,e)},fireMenuItemSelected:function(){this.__menuItemSelected!=null&&this.__menuItemSelected(this)},get_subMenus:function(){return this._subMenus==null&&(this._subMenus=[]),this._subMenus}};function Ja(){this._parent=null,this._level=0,this._open=!1,this._isChecked=!1,this._bold=!1,this._color=Te.get_white(),this._nodes=null}var tc={add_nodeChecked:function(e){this.__nodeChecked=i.bindAdd(this.__nodeChecked,e)},remove_nodeChecked:function(e){this.__nodeChecked=i.bindSub(this.__nodeChecked,e)},fireNodeChecked:function(e){this.__nodeChecked!=null&&this.__nodeChecked(this,e)},add_nodeUpdated:function(e){this.__nodeUpdated=i.bindAdd(this.__nodeUpdated,e)},remove_nodeUpdated:function(e){this.__nodeUpdated=i.bindSub(this.__nodeUpdated,e)},fireNodeUpdated:function(){this.__nodeUpdated!=null&&this.__nodeUpdated(this)},add_nodeSelected:function(e){this.__nodeSelected=i.bindAdd(this.__nodeSelected,e)},remove_nodeSelected:function(e){this.__nodeSelected=i.bindSub(this.__nodeSelected,e)},fireNodeSelected:function(){this.__nodeSelected!=null&&this.__nodeSelected(this)},add_nodeActivated:function(e){this.__nodeActivated=i.bindAdd(this.__nodeActivated,e)},remove_nodeActivated:function(e){this.__nodeActivated=i.bindSub(this.__nodeActivated,e)},fireNodeActivated:function(){this.__nodeActivated!=null&&this.__nodeActivated(this)},get_name:function(){return this._name},set_name:function(e){return this._name!==e&&(this._name=e,this.fireNodeUpdated()),e},get_parent:function(){return this._parent},set_parent:function(e){return this._parent=e,e},get_level:function(){return this._level},set_level:function(e){return this._level=e,e},get_tag:function(){return this._tag},set_tag:function(e){return this._tag=e,e},get_referenceTag:function(){return this._referenceTag},set_referenceTag:function(e){return this._referenceTag=e,e},get_opened:function(){return this._open},set_opened:function(e){return this._open!==e&&(this._open=e,this.fireNodeUpdated()),e},get_checked:function(){return this._isChecked},set_checked:function(e){return this._isChecked!==e&&(this._isChecked=e,this.fireNodeUpdated()),e},get_bold:function(){return this._bold},set_bold:function(e){return this._bold!==e&&(this._bold=e,this.fireNodeUpdated()),e},get_color:function(){return this._color},set_color:function(e){return this._color!==e&&(this._color=e,this.fireNodeUpdated()),e},add:function(e){var t=new Ja;return t.set_name(e),t.set_parent(this),t.set_level(this.get_level()+1),this.get_nodes().push(t),t},get_nodes:function(){return this._nodes==null&&(this._nodes=[]),this._nodes}};function Ia(){this.startIndex=0,this.indexCount=0,this.materialIndex=0}var ic={};function Rn(){this.boundingSphere=new ua}Rn.create=function(e,t){var r=new Rn;r.vertices=e,r.indices=t;for(var n=new Array(e.length),a=0;a<e.length;++a)n[a]=e[a].get_position();return r.boundingSphere=An.findEnclosingSphereFast(n),r},Rn.createTangent=function(e,t){var r=new Rn;r.tangentVertices=e,r.indices=t;for(var n=new Array(r.tangentVertices.length),a=0;a<r.tangentVertices.length;++a)n[a]=r.tangentVertices[a].get_position();return r.boundingSphere=An.findEnclosingSphereFast(n),r};var rc={dispose:function(){this.vertexBuffer!=null&&(this.vertexBuffer.dispose(),this.vertexBuffer=null),this.tangentVertexBuffer!=null&&(this.tangentVertexBuffer.dispose(),this.tangentVertexBuffer=null),this.indexBuffer!=null&&(this.indexBuffer.dispose(),this.indexBuffer=null)},setObjects:function(e){this._objects=e},commitToDevice:function(){this.vertices!=null?this.vertexBuffer=rs.create(this.vertices):this.tangentVertices!=null&&(this.tangentVertexBuffer=ns.create(this.tangentVertices)),this.indexBuffer=new _o(new Uint32Array(this.indices))},beginDrawing:function(e){this.vertexBuffer!=null?e._setVertexBuffer(this.vertexBuffer):this.tangentVertexBuffer!=null&&e._setVertexBuffer(this.tangentVertexBuffer),this.indexBuffer!=null&&e._setIndexBuffer(this.indexBuffer)},drawSubset:function(e,t){this.indexBuffer==null||this._objects==null||this.drawHierarchy(this._objects,t,e,0)},drawHierarchy:function(e,t,r,n){if(!(n>1212))for(var a=i.enumerate(e);a.moveNext();){var l=a.current;if(l.drawGroup!=null&&l.enabled)for(var f=i.enumerate(l.drawGroup);f.moveNext();){var c=f.current;c.materialIndex===t&&r.gl.drawElements(4,c.indexCount,5125,c.startIndex*4)}this.drawHierarchy(l.children,t,r,n+1)}},get_objects:function(){return this._objects},set_objects:function(e){return this._objects=e,e}};function $s(){this.index=0}var nc={};function ur(e,t,r,n,a,l){this.flipHandedness=!1,this.flipV=!0,this.smooth=!0,this._mesh=null,this._meshMaterials=[],this._meshTextures=[],this._meshSpecularTextures=[],this._meshNormalMaps=[],this.meshFilenames=[],this.color=Te.get_white(),this._textureCache={},this._matFiles=new Array(0),this._matFileIndex=0,this.objects=[],this._matLib={},this._textureLib={},this._tourDocument=null,this.issLayer=!1,this._readyToRender=!1,this.useCurrentAmbient=!1,this._dirty=!0,this.color=l,this.smooth=a,this.flipV=r,this.flipHandedness=n,this.filename=t,i.endsWith(this.filename.toLowerCase(),".obj")?this._loadMeshFromObj(e,this.filename):this._loadMeshFrom3ds(e,this.filename,1)}ur._compareVector3=function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:e.z<t.z?-1:e.z>t.z?1:0},ur._compareVector=function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0},ur._getMaterialID=function(e,t){for(var r=0,n=i.enumerate(t);n.moveNext();){var a=n.current;if(a===e)return r;r++}return-1},ur._disposeTextureList=function(e){if(e!=null){for(var t=0;t<e.length;++t)e[t]!=null&&(e[t].dispose(),e[t]=null);e.length=0}};var ac={_reload:function(){this.issLayer||(this.dispose(),i.endsWith(this.filename.toLowerCase(),".obj")?this._loadMeshFromObj(this._tourDocument,this.filename):this._loadMeshFrom3ds(this._tourDocument,this.filename,1))},_calculateVertexNormalsMerged:function(e,t,r){if(!e.length)return null;e.length;for(var n=Math.floor(t.length/3),a=[],l=0;l<e.length;++l){var f=new $s;f.position=e[l].get_position(),f.index=l,a.push(f)}a.sort(function(ht,Je){return ur._compareVector3(ht.position,Je.position)});for(var c=new Array(a.length),d=0,l=0;l<a.length;l++)(!l||ur._compareVector3(a[l].position,a[l-1].position))&&++d,c[a[l].index]=d-1;for(var m=new Array(d),v=0;v<d;v++)m[v]=0;for(var C=i.enumerate(t);C.moveNext();){var l=C.current,T=c[l];m[T]++}for(var A=new Array(d),v=0;v<d;++v){var $=m[v];if($>0){A[v]=new Array($);for(var N=0;N<$;N++)A[v][N]=0}}for(var v=0;v<t.length;++v){var F=Math.floor(v/3),T=c[t[v]];A[T][--m[T]]=F}for(var z=new Array(n),v=0;v<n;++v){var Y=t[v*3+0],W=t[v*3+1],ee=t[v*3+2],ne=I.subtractVectors(e[W].get_position(),e[Y].get_position()),ae=I.subtractVectors(e[ee].get_position(),e[W].get_position());z[v]=I.cross(ne,ae),z[v].normalize()}for(var de=n*3,se=new Array(de),we=Math.min(.9999,Math.cos(r)),v=0;v<de;++v){for(var l=t[v],T=c[l],fe=z[Math.floor(v/3)],$e=new I,ve=i.enumerate(A[T]);ve.moveNext();){var F=ve.current,ut=z[F];I.dot(fe,ut)>we&&$e.add(ut)}se[v]=$e,se[v].normalize()}return se},_calculateVertexTangents:function(e,t,r){if(!e.length)return null;e.length;for(var n=Math.floor(t.length/3),a=[],l=0;l<e.length;++l){var f=new $s;f.position=e[l].get_position(),f.index=l,a.push(f)}a.sort(function(Gi,Pt){return ur._compareVector3(Gi.position,Pt.position)});for(var c=new Array(a.length),d=0,l=0;l<a.length;l++)(!l||ur._compareVector3(a[l].position,a[l-1].position))&&++d,c[a[l].index]=d-1;for(var m=new Array(d),v=0;v<d;v++)m[v]=0;for(var C=i.enumerate(t);C.moveNext();){var l=C.current,T=c[l];m[T]++}for(var A=new Array(d),v=0;v<d;++v){var $=m[v];if($>0){A[v]=new Array($);for(var N=0;N<$;N++)A[v][N]=0}}for(var v=0;v<t.length;++v){var F=Math.floor(v/3),T=c[t[v]];A[T][--m[T]]=F}for(var z=new Array(n),v=0;v<n;++v){var Y=e[t[v*3+0]],W=e[t[v*3+1]],ee=e[t[v*3+2]],ne=I.subtractVectors(W.get_position(),Y.get_position()),ae=I.subtractVectors(ee.get_position(),Y.get_position()),de=W.tu-Y.tu,se=W.tv-Y.tv,we=ee.tu-Y.tu,fe=ee.tv-Y.tv,$e=de*fe-se*we;if(Math.abs($e)<1e-6)ne.lengthSq()>0?(z[v]=ne,z[v].normalize()):z[v]=I.create(1,0,0);else{var ve=1/$e,ut=fe*ve,ht=-se*ve;z[v]=I.addVectors(I.multiplyScalar(ne,ut),I.multiplyScalar(ae,ht)),z[v].normalize()}}for(var Je=n*3,Ee=new Array(Je),pi=Math.min(.9999,Math.cos(r)),v=0;v<Je;++v){for(var l=t[v],T=c[l],Ii=z[Math.floor(v/3)],xi=new I,ei=i.enumerate(A[T]);ei.moveNext();){var F=ei.current,yi=z[F];I.dot(Ii,yi)>pi&&xi.add(yi)}var Kt=e[l].get_normal();Ee[v]=I.subtractVectors(xi,I.multiplyScalar(Kt,I.dot(Kt,xi))),Ee[v].normalize()}return Ee},_calculateVertexNormals:function(e,t,r){for(var n=e.length,a=Math.floor(t.length/3),l=new Array(n),f=i.enumerate(t);f.moveNext();){var c=f.current;l[c]++}for(var d=new Array(n),m=0;m<n;++m){var v=l[m];v>0&&(d[m]=new Array(v))}for(var m=0;m<t.length;++m){var C=Math.floor(m/3),c=t[m];d[c][--l[c]]=C}for(var T=new Array(a),m=0;m<a;++m){var A=t[m*3+0],$=t[m*3+1],N=t[m*3+2],F=I.subtractVectors(e[$].get_position(),e[A].get_position()),z=I.subtractVectors(e[N].get_position(),e[$].get_position());T[m]=I.cross(F,z),T[m].normalize()}for(var Y=a*3,W=new Array(Y),ee=Math.min(.9999,Math.cos(r)),m=0;m<Y;++m){for(var c=t[m],ne=T[Math.floor(m/3)],ae=new I,de=i.enumerate(d[c]);de.moveNext();){var C=de.current,se=T[C];I.dot(ne,se)>ee&&ae.add(se)}W[m]=ae,W[m].normalize()}return W},_addMaterial:function(e){for(this._meshMaterials.push(e);this._meshTextures.length<this._meshMaterials.length;)this._meshTextures.push(null);for(;this._meshSpecularTextures.length<this._meshMaterials.length;)this._meshSpecularTextures.push(null);for(;this._meshNormalMaps.length<this._meshMaterials.length;)this._meshNormalMaps.push(null)},_loadColorChunk:function(e){var t=e.readUInt16(),r=e.readUInt32(),n=Te.get_black();if((t===16||t===19)&&r===18){var a=Math.max(0,Math.min(1,e.readSingle())),l=Math.max(0,Math.min(1,e.readSingle())),f=Math.max(0,Math.min(1,e.readSingle()));n=G.fromArgb(255,i.truncate(255*a),i.truncate(255*l),i.truncate(255*f))}else(t===17||t===18)&&r===9?n=G.fromArgb(255,e.readByte(),e.readByte(),e.readByte()):e.readBytes(r-6);return n},_loadPercentageChunk:function(e){var t=e.readUInt16(),r=e.readUInt32(),n=0;return t===48&&r===8?n=e.readUInt16():t===49&&r===10?n=e.readSingle():e.readBytes(r-6),n},_loadMeshFromObj:function(e,t){var r=this;this.filename=t,this._tourDocument=e;var n=e.getFileBlob(t),a=new FileReader;a.onloadend=function(l){r._matFiles=r._readObjMaterialsFromBin(i.safeCast(a.result,String)),r._matFileIndex=0,r._loadMatLib(i.safeCast(a.result,String))},a.readAsText(n)},_readObjMaterialsFromBin:function(e){for(var t=[],r=e.split(`
`),n=i.enumerate(r);n.moveNext();){var a=n.current,l=i.replaceString(a,"  "," "),f=i.trim(l).split(" ");if(f.length>0)switch(f[0]){case"mtllib":var c=this.filename.substring(0,this.filename.lastIndexOf("\\")+1),d=c+f[1];t.push(d);break}}return t},_readObjFromBin:function(e){var t=!1,r=[],n=new Kn;n.name="Default";var a=[],l=[],f=[],c=[];l.push(new I),f.push(new I),c.push(new xe);var d=[],m=-1,v=new Zn,C=new Ia,T=0;v=new Zn,v.diffuse=this.color,v.ambient=this.color,v.specular=Te.get_white(),v.specularSharpness=30,v.opacity=1,v.isDefault=!0,C.startIndex=0,C.indexCount=0,C.materialIndex=0;for(var A=e.split(`
`),$=i.enumerate(A);$.moveNext();){var N=$.current,F=i.replaceString(N,"  "," "),z=i.trim(F).split(" ");if(z.length>0)switch(z[0]){case"mtllib":break;case"usemtl":var Y=z[1];if(i.keyExists(this._matLib,Y)&&(m===-1&&T>0&&(this._addMaterial(v),m++),m>-1&&(C.indexCount=T-C.startIndex,n.drawGroup.push(C)),m++,i.keyExists(this._matLib,Y))){if(v=this._matLib[Y],i.keyExists(this._textureLib,Y))try{if(!i.keyExists(this._textureCache,this._textureLib[Y])){var W=this.filename.substring(0,this.filename.lastIndexOf("\\")+1),ee=this._tourDocument.getCachedTexture2d(W+this._textureLib[Y]);ee!=null&&(this.meshFilenames.push(this._textureLib[Y]),this._textureCache[this._textureLib[Y]]=ee)}this._meshTextures.push(this._textureCache[this._textureLib[Y]])}catch{}this._addMaterial(v),C=new Ia,C.startIndex=T,C.indexCount=0,C.materialIndex=m}break;case"v":this.flipHandedness?l.push(I.create(-parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3]))):l.push(I.create(parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3])));break;case"vn":this.flipHandedness?f.push(I.create(-parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3]))):f.push(I.create(parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3])));break;case"vt":c.push(xe.create(parseFloat(z[1]),this.flipV?1-parseFloat(z[2]):parseFloat(z[2])));break;case"g":case"o":t&&(m>-1&&(C.indexCount=T-C.startIndex,n.drawGroup.push(C),C=new Ia,C.startIndex=T,C.indexCount=0,C.materialIndex=m),n=new Kn),t=!0,z.length>1?n.name=z[1]:n.name="Unnamed",r.push(n);break;case"f":var ne=this._getIndexies(z[1]),ae=this._getIndexies(z[2]),de=this._getIndexies(z[3]);if(a.push(yr.createUV(l[ne[0]],f[ne[2]],c[ne[1]])),a.push(yr.createUV(l[ae[0]],f[ae[2]],c[ae[1]])),a.push(yr.createUV(l[de[0]],f[de[2]],c[de[1]])),this.flipHandedness?(d.push(T),d.push(T+2),d.push(T+1)):(d.push(T),d.push(T+1),d.push(T+2)),T+=3,z.length>4)for(var se=4;se<z.length;)this.flipHandedness?(ne=this._getIndexies(z[1]),de=this._getIndexies(z[se]),ae=this._getIndexies(z[se-1])):(ne=this._getIndexies(z[1]),ae=this._getIndexies(z[se-1]),de=this._getIndexies(z[se])),a.push(yr.createUV(l[ne[0]],f[ne[2]],c[ne[1]])),a.push(yr.createUV(l[ae[0]],f[ae[2]],c[ae[1]])),a.push(yr.createUV(l[de[0]],f[de[2]],c[de[1]])),d.push(T),d.push(T+1),d.push(T+2),T+=3,se++;break}}if(t||r.push(n),m===-1&&T>0&&(this._addMaterial(v),m++),m>-1&&(C.indexCount=T-C.startIndex,n.drawGroup.push(C)),f.length<2){for(var we=Math.PI/180,fe=this.smooth?170*we:45*we,$e=this._calculateVertexNormalsMerged(a,d,fe),ve=[],ut=d.length,ht=0;ht<ut;++ht){var Je=a[d[ht]];Je.set_normal($e[ht]),ve.push(Je)}a=ve}this._mesh=Rn.create(a,d);var Ee=new Kn;Ee.name="Root",Ee.parent=null,Ee.level=-1,Ee.drawGroup=null,Ee.children=r,this.objects=[],this.objects.push(Ee),this._mesh.setObjects(this.objects),this._mesh.commitToDevice(),this._dirty=!1,this._readyToRender=!0},_loadMatLib:function(e){var t=this;if(this._matFileIndex<this._matFiles.length){var r=this._matFiles[this._matFileIndex++],n=this._tourDocument.getFileBlob(r),a=new FileReader;a.onloadend=function(l){t._readMatLibFromBin(i.safeCast(a.result,String)),t._loadMatLib(e)},a.readAsText(n)}else this._readObjFromBin(e)},_readMatLibFromBin:function(e){try{var t=new Zn,r="";this._matLib={},this._textureLib={};for(var n=e.split(`
`),a=i.enumerate(n);a.moveNext();){var l=a.current,f=l,c=i.trim(f).split(" ");if(c.length>0)switch(c[0]){case"newmtl":i.emptyString(r)||(this._matLib[r]=t),t=new Zn,t.diffuse=Te.get_white(),t.ambient=Te.get_white(),t.specular=Te.get_black(),t.specularSharpness=30,t.opacity=1,r=c[1];break;case"Ka":t.ambient=G.fromArgb(255,Math.min(parseFloat(c[1])*255,255),Math.min(parseFloat(c[2])*255,255),Math.min(parseFloat(c[3])*255,255));break;case"map_Kd":t.diffuse=Te.get_white();for(var d=c[1],m=2;m<c.length;m++)d+=" "+c[m];var v=this.filename.substring(0,this.filename.lastIndexOf("\\")+1);d=i.replaceString(d,"/","\\"),d.indexOf("\\")!==-1&&(d=d.substring(d.lastIndexOf("\\")+1)),this._textureLib[r]=d;break;case"Kd":t.diffuse=G.fromArgb(255,Math.min(parseFloat(c[1])*255,255),Math.min(parseFloat(c[2])*255,255),Math.min(parseFloat(c[3])*255,255));break;case"Ks":t.specular=G.fromArgb(255,Math.min(parseFloat(c[1])*255,255),Math.min(parseFloat(c[2])*255,255),Math.min(parseFloat(c[3])*255,255));break;case"d":t.opacity=parseFloat(c[1]);break;case"Tr":t.opacity=1-parseFloat(c[1]);break;case"illum":var C=parseInt(c[1]);break;case"sharpness":t.specularSharpness=parseFloat(c[1]);break;case"Ns":t.specularSharpness=1+2*parseFloat(c[1]),t.specularSharpness=Math.max(10,t.specularSharpness);break}}i.emptyString(r)||(this._matLib[r]=t)}catch{}},_getIndexies:function(e){var t=i.trim(e).split("/"),r=new Array(3);return i.emptyString(e)||(t.length>0&&(r[0]=parseInt(t[0])),t.length>1&&(i.emptyString(t[1])?r[1]=0:r[1]=parseInt(t[1])),t.length>2&&(r[2]=parseInt(t[2]))),r},_loadMeshFrom3ds:function(e,t,r){var n=this;this._tourDocument=e;var a=e.getFileBlob(t),l=new FileReader;l.onloadend=function(f){n._read3dsFromBin(new ta(new Uint8Array(l.result)),r)},l.readAsArrayBuffer(a)},_read3dsFromBin:function(e,t){for(var r,n,a,l="",f="",c=0,d=0,m=[],v=[],C=[],T=-1,A=new Zn,$=0,N=0,F=!1,z=!1,Y=0,W=0,ee=0,ne=[],ae=null,de=[],se=[],we={},fe=e.get_length()-1,$e=0,ve=0;e.get_position()<fe&&!F;)switch(n=e.readUInt16(),a=e.readUInt32(),n){case 19789:break;case 15677:break;case 16384:l="";var ut;do ut=e.readByte(),ut>0&&(l+=String.fromCharCode(ut));while(ut);ae=new Kn,ae.name=l,ne.push(ae),i.keyExists(we,ae.name)||(we[ae.name]=ae);break;case 16640:$e=m.length,ve=Math.floor(v.length/3);break;case 16656:for(d=e.readUInt16(),r=0;r<d;r++){var ht=e.readSingle()-Y,Je=e.readSingle()-W,Ee=e.readSingle()-ee,pi=yr._create(ht*t,Ee*t,Je*t,0,0,0,0,0);m.push(pi)}break;case 16672:var yi=e.readUInt16();for(c+=yi,r=0;r<yi;r++){var Ii=e.readUInt16()+$e,xi=e.readUInt16()+$e,ei=e.readUInt16()+$e;v.push(ei),v.push(xi),v.push(Ii),e.readUInt16()}break;case 16688:f="",r=0;var Oi;do Oi=e.readByte(),Oi>0&&(f+=String.fromCharCode(Oi)),r++;while(Oi);var yi=e.readUInt16(),Kt=new Array(yi);for($=ur._getMaterialID(f,C),r=0;r<yi;r++)Kt[r]=e.readUInt16()+ve;ae.applyLists.push(Kt),ae.applyListsIndex.push($);break;case 16704:for(N=e.readUInt16(),r=0;r<N;r++){var pi=m[$e+r],Gi=xe.create(e.readSingle(),this.flipV?1-e.readSingle():e.readSingle());m[$e+r]=yr.createUV(pi.get_position(),new I,Gi)}break;case 16736:var Pt=new Array(12);for(r=0;r<12;r++)Pt[r]=e.readSingle();i.keyExists(we,l)&&(we[l].localMat=Z.create(Pt[0],Pt[1],Pt[2],0,Pt[3],Pt[4],Pt[5],0,Pt[6],Pt[7],Pt[8],0,Pt[9],Pt[10],Pt[11],1),we[l].localMat.invert());break;case 45055:break;case 40960:var qi="";r=0;var Gt;do Gt=e.readByte(),Gt>0&&(qi+=String.fromCharCode(Gt)),r++;while(Gt);C.push(qi),T>-1&&this._addMaterial(A),T++,A=new Zn,A.diffuse=Te.get_white(),A.ambient=Te.get_white(),A.specular=Te.get_black(),A.specularSharpness=30,A.opacity=1;break;case 40976:A.ambient=this._loadColorChunk(e);break;case 40992:A.diffuse=this._loadColorChunk(e);break;case 41008:A.specular=this._loadColorChunk(e);break;case 41024:A.specularSharpness=1+2*this._loadPercentageChunk(e),A.specularSharpness=Math.max(10,A.specularSharpness);break;case 41472:break;case 41728:var Qe="";r=0;var Gt;do Gt=e.readByte(),Gt>0&&(Qe+=String.fromCharCode(Gt)),r++;while(Gt);var St=this.filename.substring(0,this.filename.lastIndexOf("\\")+1);try{var Di=this._tourDocument.getCachedTexture2d(St+Qe);Di!=null?(this._meshTextures.push(Di),this.meshFilenames.push(Qe),A.diffuse=Te.get_white()):this._meshTextures.push(null)}catch{this._meshTextures.push(null)}break;case 41520:this._loadPercentageChunk(e),e.readUInt16(),e.readUInt32();var Qe="";r=0;var Gt;do Gt=e.readByte(),Gt>0&&(Qe+=String.fromCharCode(Gt)),r++;while(Gt);var St=this.filename.substring(0,this.filename.lastIndexOf("\\")+1);try{var Di=this._tourDocument.getCachedTexture2d(St+Qe);Di!=null?(this._meshNormalMaps.push(Di),this.meshFilenames.push(Qe),z=!0):this._meshNormalMaps.push(null)}catch{this._meshNormalMaps.push(null)}break;case 41476:var st=this._loadPercentageChunk(e);e.readUInt16(),e.readUInt32();var Qe="";r=0;var Gt;do Gt=e.readByte(),Gt>0&&(Qe+=String.fromCharCode(Gt)),r++;while(Gt);var St=this.filename.substring(0,this.filename.lastIndexOf("\\")+1);try{var Di=this._tourDocument.getCachedTexture2d(St+Qe);if(Di!=null){this._meshSpecularTextures.push(Di),this.meshFilenames.push(Qe);var Ar=i.truncate(255.99*st/100);A.specular=G.fromArgb(255,Ar,Ar,Ar)}else this._meshSpecularTextures.push(null)}catch{this._meshSpecularTextures.push(null)}break;case 45056:break;case 45058:break;case 45072:l="",r=0;var Oi;do Oi=e.readByte(),Oi>0&&(l+=String.fromCharCode(Oi)),r++;while(Oi);e.readUInt16(),e.readUInt16();var sr=e.readUInt16();sr===65535&&(sr=-1),i.startsWith(l,"$")||se.push(l),de.push(sr),i.keyExists(we,l)&&(we[l].level=sr);break;case 45073:l="",r=0;var Oi;do Oi=e.readByte(),Oi>0&&(l+=String.fromCharCode(Oi)),r++;while(Oi);se.push("$$$"+l);break;case 45075:var Cn=new Array(3);for(r=0;r<3;r++)Cn[r]=e.readSingle();i.keyExists(we,l)&&(we[l].pivotPoint=I.create(-Cn[0],-Cn[1],-Cn[2]));break;case 45088:var wr=new Array(8);for(r=0;r<8;r++)wr[r]=e.readSingle();break;default:e.seekRelative(a-6);break}e.close(),T>-1&&this._addMaterial(A);for(var dr=Math.PI/180,Xi=this.smooth?70*dr:45*dr,pr=this._calculateVertexNormalsMerged(m,v,Xi),Nr=[],Sn=c*3,Mr=0;Mr<Sn;++Mr){var Tr=m[v[Mr]];Tr.set_normal(pr[Mr]),Nr.push(Tr)}for(var cn=[],Dn=i.enumerate(ne);Dn.moveNext();){var hn=Dn.current,hs=[];for(r=0;r<hn.applyLists.length;r++){for(var aa=hn.applyListsIndex[r],Zs=cn.length,fs=i.enumerate(hn.applyLists[r]);fs.moveNext();){var Va=fs.current;cn.push(Va*3),cn.push(Va*3+1),cn.push(Va*3+2)}var wa=new Ia;wa.startIndex=Zs,wa.indexCount=hn.applyLists[r].length*3,wa.materialIndex=aa,hs.push(wa)}hn.drawGroup=hs}var fn=new i.Stack,Ba=[],dn=new Kn;dn.name="Root",dn.parent=null,dn.level=-1,dn.drawGroup=null;var ba=-1;for(fn.push(dn),Ba.push(dn),r=0;r<de.length;r++){var sr=de[r];if(sr<=ba){for(;sr<=fn.peek().level&&fn.count>1;)fn.pop();ba=sr}if(i.startsWith(se[r],"$$$")){var Mn=new Kn;Mn.name=i.replaceString(se[r],"$$$",""),Mn.parent=fn.peek(),Mn.parent.children.push(Mn),Mn.level=ba=sr,Mn.drawGroup=null,fn.push(Mn)}else we[se[r]].level=ba=sr,we[se[r]].parent=fn.peek(),we[se[r]].parent.children.push(we[se[r]]),fn.push(we[se[r]])}if(!de.length)for(var ds=i.enumerate(ne);ds.moveNext();){var hn=ds.current;dn.children.push(hn),hn.parent=dn}if(z){for(var _s=[],za=0;za<Sn;++za)_s.push(za);for(var Qs=this._calculateVertexTangents(Nr,_s,Xi),gs=new Array(Nr.length),Mr=0,ms=i.enumerate(Nr);ms.moveNext();){var Tr=ms.current,sa=new ho(Tr.get_position(),Tr.get_normal(),xe.create(Tr.tu,Tr.tv),Qs[Mr]);gs[Mr]=sa,++Mr}this._mesh=Rn.createTangent(gs,cn)}else this._mesh=Rn.create(Nr,cn);this.objects=Ba,this._mesh.setObjects(Ba),this._mesh.commitToDevice(),this._dirty=!1,this._readyToRender=!0},_offsetObjects:function(e,t,r,n){for(var a=i.enumerate(t);a.moveNext();){var l=a.current,f=l.localMat;this._offsetObjects(e,l.children,f,I.addVectors(l.pivotPoint,n));for(var c=i.enumerate(l.drawGroup);c.moveNext();)for(var d=c.current,m=d.startIndex+d.indexCount,v=d.startIndex;v<m;v++){var C=e[v];C.set_position(I.addVectors(C.get_position(),I.addVectors(l.pivotPoint,n))),e[v]=C}}},setupLighting:function(e){var t=I.create(e.get_world().get_offsetX(),e.get_world().get_offsetY(),e.get_world().get_offsetZ()),r=I.subtractVectors(t,e.get_reflectedLightPosition()),n=I.subtractVectors(e.get_sunPosition(),e.get_reflectedLightPosition()),a=n.length()<=0?1:I.dot(r,n)/(r.length()*n.length()),l=Math.max(0,a);l=Math.sqrt(l);var f=0,c=1;if(e.get_occludingPlanetRadius()>0){var d=I.subtractVectors(t,e.get_occludingPlanetPosition()).length()-e.get_occludingPlanetRadius();f=Math.max(0,Math.min(1,1-d/e.get_occludingPlanetRadius()*300)),l*=1-f;var m=I.subtractVectors(e.get_occludingPlanetPosition(),e.get_sunPosition()),v=I.subtractVectors(e.get_occludingPlanetPosition(),t),C=I.create(-v.x,-v.y,-v.z);C.normalize(),e.set_hemisphereLightUp(C);var T=I.subtractVectors(e.get_sunPosition(),t),A=m.length(),$=-I.dot(T,m)/(A*A);if($>1){var N=I.addVectors(e.get_sunPosition(),I.multiplyScalar(m,$)),F=I.subtractVectors(N,t).length();I.subtractVectors(N,e.get_sunPosition()).length();var z=.004645784,Y=e.get_occludingPlanetRadius()+($-1)*(e.get_occludingPlanetRadius()+z),W=e.get_occludingPlanetRadius()+($-1)*(e.get_occludingPlanetRadius()-z);if(F<Y){var ee=0;if(W<0){var ne=Math.pow(1/(1-W),2);W=0,ee=1-ne}var ae=Math.max(0,W);c=Math.max(ee,(F-ae)/(Y-ae));var de=i.truncate(255.99*c);e.set_sunlightColor(G.fromArgb(255,de,de,de)),f*=c}}}e.set_reflectedLightColor(G.fromArgb(255,i.truncate(e.get_reflectedLightColor().r*l),i.truncate(e.get_reflectedLightColor().g*l),i.truncate(e.get_reflectedLightColor().b*l))),e.set_hemisphereLightColor(G.fromArgb(255,i.truncate(e.get_hemisphereLightColor().r*f),i.truncate(e.get_hemisphereLightColor().g*f),i.truncate(e.get_hemisphereLightColor().b*f)))},render:function(e,t){if(this._readyToRender){this._dirty&&!this.issLayer&&this._reload();var r=e.get_world(),n=this._mesh.boundingSphere.center,a=1;this._mesh.boundingSphere.radius>0&&(a=1/this._mesh.boundingSphere.radius),e.set_world(Z.multiplyMatrix(Z.multiplyMatrix(Z.translation(I.create(-n.x,-n.y,-n.z)),Z._scaling(a,a,a)),r));var l=Z.multiplyMatrix(e.get_world(),e.get_view()),f=l.transform(I.get_empty()),c=Math.sqrt(l.get_m11()*l.get_m11()+l.get_m22()*l.get_m22()+l.get_m33()*l.get_m33())/a,d=f.length(),m=c,v=i.truncate(e.height),C=e.get_projection().get_m11(),T=e.get_projection().get_m34(),A=e.get_projection().get_m44(),$=Math.abs(T)*d+A,N=C/$*v,F=m*N;if(!(F<.5)){var z=e.get_sunlightColor(),Y=e.get_reflectedLightColor(),W=e.get_hemisphereLightColor();if(U.get_current().get_solarSystemLighting()?(this.setupLighting(e),this.useCurrentAmbient||e.set_ambientLightColor(G.fromArgb(255,11,11,11))):(e.set_sunlightColor(Te.get_black()),e.set_reflectedLightColor(Te.get_black()),e.set_hemisphereLightColor(Te.get_black()),e.set_ambientLightColor(Te.get_white())),this._mesh!=null){at.minLightingBrightness=.1;var ee=this._meshMaterials.length;if(this._mesh.beginDrawing(e),ee>0)for(var ne=0;ne<this._meshMaterials.length;ne++){if(this._meshMaterials[ne].isDefault){var ae=this._meshMaterials[ne];ae.diffuse=this.color,ae.ambient=this.color,this._meshMaterials[ne]=ae}e.setMaterial(this._meshMaterials[ne],this._meshTextures[ne],this._meshSpecularTextures[ne],this._meshNormalMaps[ne],t),this._mesh.vertexBuffer!=null?at.use(e,this._mesh.vertexBuffer.vertexBuffer,this._mesh.indexBuffer.buffer,this._meshTextures[ne]!=null?this._meshTextures[ne].texture2d:null,t,!1,32):at.use(e,this._mesh.tangentVertexBuffer.vertexBuffer,this._mesh.indexBuffer.buffer,this._meshTextures[ne]!=null?this._meshTextures[ne].texture2d:null,t,!1,44),e.preDraw(),this._mesh.drawSubset(e,ne)}else{e.preDraw();for(var ne=0;ne<this._meshTextures.length;ne++)this._meshTextures[ne]!=null&&(e.set_mainTexture(this._meshTextures[ne]),this._mesh.vertexBuffer!=null?at.use(e,this._mesh.vertexBuffer.vertexBuffer,this._mesh.indexBuffer.buffer,this._meshTextures[ne]!=null?this._meshTextures[ne].texture2d:null,t,!1,32):at.use(e,this._mesh.tangentVertexBuffer.vertexBuffer,this._mesh.indexBuffer.buffer,this._meshTextures[ne]!=null?this._meshTextures[ne].texture2d:null,t,!1,44)),e.preDraw(),this._mesh.drawSubset(e,ne)}e.set_world(r),e.set_sunlightColor(z),e.set_reflectedLightColor(Y),e.set_hemisphereLightColor(W),e.set_ambientLightColor(Te.get_black())}}}},dispose:function(){this._mesh!=null&&(this._mesh.dispose(),this._mesh=null);for(var e=i.enumerate(i.keys(this._textureCache));e.moveNext();){var t=e.current,r=this._textureCache[t];r!=null&&r.dispose()}i.clearKeys(this._textureCache),ur._disposeTextureList(this._meshTextures),ur._disposeTextureList(this._meshSpecularTextures),ur._disposeTextureList(this._meshNormalMaps),this._meshMaterials.length=0,this._dirty=!0}};function Kn(){this.level=-1,this.children=[],this.enabled=!0,this.drawGroup=[],this.applyLists=[],this.applyListsIndex=[]}var sc={};function da(e,t,r,n,a){this._elements=null,this._orbitColor=Te.get_white(),this._scale=0,this._segmentCount=0,this._elements=e,this._segmentCount=t,this._orbitColor=r,this._scale=a}var oc={cleanUp:function(){},get_boundingRadius:function(){return this._elements!=null?this._elements.a*(1+this._elements.e)/this._scale:0},draw3D:function(e,t,r){var n=Z.multiplyMatrix(Z._rotationZ(V.degreesToRadians(this._elements.w)),Z.multiplyMatrix(Z._rotationX(V.degreesToRadians(this._elements.i)),Z._rotationZ(V.degreesToRadians(this._elements.omega))));n=Z.multiplyMatrix(n,da._orbitalToWwt);var a=Z.multiplyMatrix(Z.multiplyMatrix(n,Z.translation(r)),e.get_world()),l=this._elements.n*(K.get_jNow()-this._elements.t),f=1;l<0&&(f=-1),l=Math.abs(l)/360,l=(l-i.truncate(l))*360*f;var c=G._fromArgbColor(i.truncate(t*255),this._orbitColor);l=V.degreesToRadians(l);for(var d=l,m=0;m<5;m++)d+=(l-d+this._elements.e*Math.sin(d))/(1-this._elements.e*Math.cos(d));Yi.drawEllipse(e,this._elements.a/this._scale,this._elements.e,d,c,a)}};function Yi(){}Yi.drawEllipseWithPosition=function(e,t,r,n,a,l,f){Yi._ellipseShader==null&&(Yi._ellipseShader=new At),Yi._ellipseVertexBuffer==null&&(Yi._ellipseVertexBuffer=Yi.createEllipseVertexBuffer(500));var c=e.get_world();e.set_world(l),e.gl.bindBuffer(34962,Yi._ellipseVertexBuffer.vertexBuffer),e.gl.bindBuffer(34963,null),At.use(e,t,r,n,a,1,c,f),e.gl.drawArrays(3,0,Yi._ellipseVertexBuffer.count),e.set_world(c)},Yi.drawEllipse=function(e,t,r,n,a,l){Yi._ellipseShader==null&&(Yi._ellipseShader=new At),Yi._ellipseWithoutStartPointVertexBuffer==null&&(Yi._ellipseWithoutStartPointVertexBuffer=Yi.createEllipseVertexBufferWithoutStartPoint(360));var f=e.get_world();e.set_world(l),e.gl.bindBuffer(34962,Yi._ellipseWithoutStartPointVertexBuffer.vertexBuffer),e.gl.bindBuffer(34963,null),At.use(e,t,r,n,a,1,f,I.create(0,0,0)),e.gl.drawArrays(3,0,Yi._ellipseWithoutStartPointVertexBuffer.count-1),e.set_world(f)},Yi.createEllipseVertexBuffer=function(e){for(var t=new is(e),r=t.lock(),n=0,a=0;a<e/2;++a)r[n++]=I.create(2*a/e*.05,0,0);for(var a=0;a<e/2;++a)r[n++]=I.create(2*a/e*.95+.05,0,0);return t.unlock(),t},Yi.createEllipseVertexBufferWithoutStartPoint=function(e){var t=new is(e),r=t.lock();r[0]=I.create(1e-6,0,0);for(var n=1;n<e;++n)r[n]=I.create(2*n/e,0,0);return t.unlock(),t};var lc={};function ji(){this._systemGenerated=!1,this.meanAnomoly=0,this.orbitalYears=0,this.observingLocation=!1,this.reference=18,this.parentsRoationalBase=!1,this.referenceFrameType=0,this.meanRadius=6371e3,this.oblateness=.0033528,this.heading=0,this.pitch=0,this.roll=0,this.scale=1,this.tilt=0,this.translation=new I,this.lat=0,this.lng=0,this.altitude=0,this.rotationalPeriod=0,this.zeroRotationDate=0,this.representativeColor=Te.get_white(),this.showAsPoint=!1,this.showOrbitPath=!1,this.stationKeeping=!0,this.semiMajorAxis=0,this.semiMajorAxisUnits=1,this.eccentricity=0,this.inclination=0,this.argumentOfPeriapsis=0,this.longitudeOfAscendingNode=0,this.meanAnomolyAtEpoch=0,this.meanDailyMotion=0,this.epoch=0,this._orbit=null,this._elements=new zn,this.worldMatrix=new Z,this.worldMatrix=Z.get_identity()}ji.isTLECheckSumGood=function(e){if(e.length!==69)return!1;for(var t=0,r=0;r<68;r++)switch(e.substr(r,1)){case"1":t+=1;break;case"2":t+=2;break;case"3":t+=3;break;case"4":t+=4;break;case"5":t+=5;break;case"6":t+=6;break;case"7":t+=7;break;case"8":t+=8;break;case"9":t+=9;break;case"-":t+=1;break}return(t%10).toString()===e.charAt(68).toString()},ji.toTLEExponential=function(e,t){var r=e.toExponential(t);return r.length<t+6&&(r=r.substring(0,t+4)+"0"+r.substr(t+4,1)),r},ji.tleNumberString=function(e,t,r){var n=e.toFixed(r),a=n.indexOf(".");a===-1&&(a=n.length,n+=".0");var l=n.length-a-1,f="00000000";return n=f.substr(0,t-a)+n+f.substr(0,r-l),n},ji.computeTLECheckSum=function(e){if(e.length!==68)return"0";for(var t=0,r=0;r<68;r++)switch(e[r]){case"1":t+=1;break;case"2":t+=2;break;case"3":t+=3;break;case"4":t+=4;break;case"5":t+=5;break;case"6":t+=6;break;case"7":t+=7;break;case"8":t+=8;break;case"9":t+=9;break;case"-":t+=1;break}return t%10};var uc={get_representativeColor:function(){return this.representativeColor},set_representativeColor:function(e){return e!==this.representativeColor&&(this.representativeColor=e,this._orbit=null),e},get_orbit:function(){return this._orbit},set_orbit:function(e){return this._orbit=e,e},getIndentifier:function(){return this.name},importTrajectory:function(e){},saveToXml:function(e){e._writeStartElement("ReferenceFrame"),e._writeAttributeString("Name",this.name),e._writeAttributeString("Parent",this.parent),e._writeAttributeString("ReferenceFrameType",gt.toXml("ReferenceFrameTypes",this.referenceFrameType)),e._writeAttributeString("Reference",gt.toXml("ReferenceFrames",this.reference)),e._writeAttributeString("ParentsRoationalBase",this.parentsRoationalBase.toString()),e._writeAttributeString("MeanRadius",this.meanRadius.toString()),e._writeAttributeString("Oblateness",this.oblateness.toString()),e._writeAttributeString("Heading",this.heading.toString()),e._writeAttributeString("Pitch",this.pitch.toString()),e._writeAttributeString("Roll",this.roll.toString()),e._writeAttributeString("Scale",this.scale.toString()),e._writeAttributeString("Tilt",this.tilt.toString()),e._writeAttributeString("Translation",this.translation.toString()),this.referenceFrameType||(e._writeAttributeString("Lat",this.lat.toString()),e._writeAttributeString("Lng",this.lng.toString()),e._writeAttributeString("Altitude",this.altitude.toString())),e._writeAttributeString("RotationalPeriod",this.rotationalPeriod.toString()),e._writeAttributeString("ZeroRotationDate",this.zeroRotationDate.toString()),e._writeAttributeString("RepresentativeColor",this.get_representativeColor().save()),e._writeAttributeString("ShowAsPoint",this.showAsPoint.toString()),e._writeAttributeString("ShowOrbitPath",this.showOrbitPath.toString()),e._writeAttributeString("StationKeeping",this.stationKeeping.toString()),this.referenceFrameType===1&&(e._writeAttributeString("SemiMajorAxis",this.semiMajorAxis.toString()),e._writeAttributeString("SemiMajorAxisScale",gt.toXml("AltUnits",this.semiMajorAxisUnits)),e._writeAttributeString("Eccentricity",this.eccentricity.toString()),e._writeAttributeString("Inclination",this.inclination.toString()),e._writeAttributeString("ArgumentOfPeriapsis",this.argumentOfPeriapsis.toString()),e._writeAttributeString("LongitudeOfAscendingNode",this.longitudeOfAscendingNode.toString()),e._writeAttributeString("MeanAnomolyAtEpoch",this.meanAnomolyAtEpoch.toString()),e._writeAttributeString("MeanDailyMotion",this.meanDailyMotion.toString()),e._writeAttributeString("Epoch",this.epoch.toString())),e._writeEndElement()},initializeFromXml:function(e){this.name=e.attributes.getNamedItem("Name").nodeValue,this.parent=e.attributes.getNamedItem("Parent").nodeValue,this.referenceFrameType=gt.parse("ReferenceFrameTypes",e.attributes.getNamedItem("ReferenceFrameType").nodeValue),this.reference=gt.parse("ReferenceFrames",e.attributes.getNamedItem("Reference").nodeValue),this.parentsRoationalBase=i.boolean(e.attributes.getNamedItem("ParentsRoationalBase").nodeValue),this.meanRadius=parseFloat(e.attributes.getNamedItem("MeanRadius").nodeValue),this.oblateness=parseFloat(e.attributes.getNamedItem("Oblateness").nodeValue),this.heading=parseFloat(e.attributes.getNamedItem("Heading").nodeValue),this.pitch=parseFloat(e.attributes.getNamedItem("Pitch").nodeValue),this.roll=parseFloat(e.attributes.getNamedItem("Roll").nodeValue),this.scale=parseFloat(e.attributes.getNamedItem("Scale").nodeValue),this.tilt=parseFloat(e.attributes.getNamedItem("Tilt").nodeValue),this.translation=I.parse(e.attributes.getNamedItem("Translation").nodeValue),this.referenceFrameType||(this.lat=parseFloat(e.attributes.getNamedItem("Lat").nodeValue),this.lng=parseFloat(e.attributes.getNamedItem("Lng").nodeValue),this.altitude=parseFloat(e.attributes.getNamedItem("Altitude").nodeValue)),this.rotationalPeriod=parseFloat(e.attributes.getNamedItem("RotationalPeriod").nodeValue),this.zeroRotationDate=parseFloat(e.attributes.getNamedItem("ZeroRotationDate").nodeValue),this.set_representativeColor(G.load(e.attributes.getNamedItem("RepresentativeColor").nodeValue)),this.showAsPoint=i.boolean(e.attributes.getNamedItem("ShowAsPoint").nodeValue),e.attributes.getNamedItem("StationKeeping")!=null&&(this.stationKeeping=i.boolean(e.attributes.getNamedItem("StationKeeping").nodeValue)),this.referenceFrameType===1&&(this.showOrbitPath=i.boolean(e.attributes.getNamedItem("ShowOrbitPath").nodeValue),this.semiMajorAxis=parseFloat(e.attributes.getNamedItem("SemiMajorAxis").nodeValue),this.semiMajorAxisUnits=gt.parse("AltUnits",e.attributes.getNamedItem("SemiMajorAxisScale").nodeValue),this.eccentricity=parseFloat(e.attributes.getNamedItem("Eccentricity").nodeValue),this.inclination=parseFloat(e.attributes.getNamedItem("Inclination").nodeValue),this.argumentOfPeriapsis=parseFloat(e.attributes.getNamedItem("ArgumentOfPeriapsis").nodeValue),this.longitudeOfAscendingNode=parseFloat(e.attributes.getNamedItem("LongitudeOfAscendingNode").nodeValue),this.meanAnomolyAtEpoch=parseFloat(e.attributes.getNamedItem("MeanAnomolyAtEpoch").nodeValue),this.meanDailyMotion=parseFloat(e.attributes.getNamedItem("MeanDailyMotion").nodeValue),this.epoch=parseFloat(e.attributes.getNamedItem("Epoch").nodeValue))},fromTLE:function(e,t,r){this.epoch=K._twoLineDateToJulian(e.substr(18,14)),this.eccentricity=parseFloat("0."+t.substr(26,7)),this.inclination=parseFloat(t.substr(8,8)),this.longitudeOfAscendingNode=parseFloat(t.substr(17,8)),this.argumentOfPeriapsis=parseFloat(t.substr(34,8));var n=parseFloat(t.substr(52,11));this.meanAnomolyAtEpoch=parseFloat(t.substr(43,8)),this.meanDailyMotion=n*360;var a=86400/n/(Math.PI*2);this.semiMajorAxis=Math.pow(a*a*r,1/3),this.semiMajorAxisUnits=1},toTLE:function(){var e=new i.StringBuilder;e.append("1 99999U 00111AAA "),e.append(K.julianToTwoLineDate(this.epoch)),e.append(" "),e.append(this.semiMajorAxis.toExponential(4)),e.append(" 00000-0 "),e.append(ji.toTLEExponential(this.meanDailyMotion,5)),e.append("  001"),e.append(ji.computeTLECheckSum(e.toString())),e.appendLine("");var t=new i.StringBuilder;return t.append("2 99999 "),t.append(ji.tleNumberString(this.inclination,3,4)+" "),t.append(ji.tleNumberString(this.longitudeOfAscendingNode,3,4)+" "),t.append((ji.tleNumberString(this.eccentricity,1,7)+" ").substring(2)),t.append(ji.tleNumberString(this.argumentOfPeriapsis,3,4)+" "),t.append(ji.tleNumberString(this.meanAnomolyAtEpoch,3,4)+" "),t.append(ji.toTLEExponential(this.meanDailyMotion/207732,5)),t.append("00001"),t.append(ji.computeTLECheckSum(t.toString())),t.appendLine(""),e.toString()+t.toString()},get_elements:function(){return this._elements.a=this.semiMajorAxis,this._elements.e=this.eccentricity,this._elements.i=this.inclination,this._elements.w=this.argumentOfPeriapsis,this._elements.omega=this.longitudeOfAscendingNode,this._elements.jdEquinox=this.epoch,this.meanDailyMotion?this._elements.n=this.meanDailyMotion:this._elements.n=ci.meanMotionFromSemiMajorAxis(this._elements.a),this._elements.t=this.epoch-this.meanAnomolyAtEpoch/this._elements.n,this._elements},set_elements:function(e){return this._elements=e,e},computeFrame:function(e){switch(this.referenceFrameType){case 1:this._computeOrbital(e);break;case 0:this._computeFixedSherical(e);break;case 2:this._computeFrameTrajectory(e);break}},useRotatingParentFrame:function(){switch(this.referenceFrameType){case 1:case 2:case 3:return!1;default:return!0}},_computeFixedRectangular:function(e){},_computeFixedSherical:function(e){this.observingLocation&&(this.lat=K.get_location().get_lat(),this.lng=K.get_location().get_lng(),this.altitude=K.get_altitude()),this.worldMatrix=Z.get_identity(),this.worldMatrix.translate(this.translation);var t=1/e.get_nominalRadius()*this.scale*this.meanRadius;if(this.worldMatrix.scale(I.create(t,t,t)),this.worldMatrix._multiply(Z.rotationYawPitchRoll(this.heading/180*Math.PI,this.pitch/180*Math.PI,this.roll/180*Math.PI)),this.worldMatrix._multiply(Z._rotationZ(-90/180*Math.PI)),this.rotationalPeriod){var r=(K.get_jNow()-this.zeroRotationDate)/this.rotationalPeriod*Math.PI*2%(Math.PI*2);this.worldMatrix._multiply(Z._rotationX(-r))}this.worldMatrix.translate(I.create(1+this.altitude/e.get_nominalRadius(),0,0)),this.worldMatrix._multiply(Z._rotationZ(this.lat/180*Math.PI)),this.worldMatrix._multiply(Z._rotationY(-(this.lng+180)/180*Math.PI))},_computeFrameTrajectory:function(e){},_computeOrbital:function(e){var t=this.get_elements(),r=ci.calculateRectangularJD(K.get_jNow(),t);this.meanAnomoly=t.meanAnnomolyOut;var n=ci.calculateRectangular(t,this.meanAnomoly+.001),a=I.subtractVectors(r,n),l=r.copy();l.normalize(),a.normalize(),r.length();var f=1;switch(this.semiMajorAxisUnits){case 1:f=1;break;case 2:f=1/3.2808399;break;case 3:f=1/3.2808399/12;break;case 4:f=1609.344;break;case 5:f=1e3;break;case 6:f=149598e3*1e3;break;case 7:f=63239.6717*149598e3*1e3;break;case 8:f=206264.806*149598e3*1e3;break;case 9:f=206264.806*149598e3*1e3*1e6;break;case 10:f=1;break}f*=1/e.get_nominalRadius();var c=Z.lookAtLH(I.create(0,0,0),a,l);c.invert(),this.worldMatrix=Z.get_identity(),this.worldMatrix.translate(this.translation);var d=1/e.get_nominalRadius()*this.scale*this.meanRadius;if(this.worldMatrix.scale(I.create(d,d,d)),this.worldMatrix._multiply(Z.rotationYawPitchRoll(this.heading/180*Math.PI,this.pitch/180*Math.PI,this.roll/180*Math.PI)),this.rotationalPeriod){var m=(K.get_jNow()-this.zeroRotationDate)/this.rotationalPeriod*Math.PI*2%(Math.PI*2);this.worldMatrix._multiply(Z._rotationX(-m))}r=I.scale(r,f),this.worldMatrix.translate(r),this.stationKeeping&&(this.worldMatrix=Z.multiplyMatrix(c,this.worldMatrix))}};function Es(){this.lat=0,this.lng=0,this.alt=0}var cc={};function Ds(){this.extrude=!1,this.astronomical=!1,this.meanRadius=6371e3,this.pointList=[]}var hc={parseWkt:function(e,t,r,n){for(var a=bi.split(e,"(,)"),l=i.enumerate(a);l.moveNext();){var f=l.current,c=i.trim(f).split(" ");if(c.length>1){var d=new Es;d.lng=parseFloat(c[0]),this.astronomical&&(d.lng-=180),d.lat=parseFloat(c[1]),c.length>2&&!r?d.alt=parseFloat(c[2]):d.alt=r,d.date=n,this.pointList.push(d)}}},getCenterPoint:function(){var e=new Es;e.lat=0,e.lng=0,e.alt=0;for(var t=i.enumerate(this.pointList);t.moveNext();){var r=t.current;e.lat+=r.lat,e.lng+=r.lng,e.alt+=r.alt}return e.lat/=this.pointList.length,e.lng/=this.pointList.length,e.alt/=this.pointList.length,e}};function cr(){}cr.triggerLoadSprite=function(){cr._pins==null&&(cr._pins=P.loadPlanetTexture(Nt.singleton.engineAssetUrl("pins.png")))},cr.getPushPinTexture=function(e){var t=null;if(i.keyExists(cr._pinTextureCache,e))return cr._pinTextureCache[e];try{t=O.prepDevice.createTexture(),O.prepDevice.bindTexture(3553,t);var r=Math.floor(e/16),n=e%16,a=document.createElement("canvas");a.height=32,a.width=32;var l=a.getContext("2d");l.drawImage(cr._pins.imageElement,n*32,r*32,32,32,0,0,32,32);var f=a;O.prepDevice.texParameteri(3553,10242,33071),O.prepDevice.texParameteri(3553,10243,33071),O.prepDevice.texImage2D(3553,0,6408,6408,5121,f),O.prepDevice.texParameteri(3553,10241,9985),O.prepDevice.generateMipmap(3553),O.prepDevice.bindTexture(3553,null),cr._pinTextureCache[e]=t}catch{}return t};var fc={};function Pa(){this.guid=new er,this.header=[],this.rows=[],this.delimiter="	",this.locked=!1}var dc={lock:function(){this.locked=!0},unlock:function(){this.locked=!1},save:function(){for(var e="",t=!0,r=i.enumerate(this.header);r.moveNext();){var n=r.current;t?t=!1:e+="	",e+=n}e+=`\r
`;for(var a=i.enumerate(this.rows);a.moveNext();){var l=a.current;t=!0;for(var f=i.enumerate(l);f.moveNext();){var n=f.current;t?t=!1:e+="	",e+=n}e+=`\r
`}return e},loadFromString:function(e,t,r,n){var a=0,l=e.split(`\r
`);if(!t||n)if(l.length>0){var f=l[0];a++,f.indexOf("	")===-1&&f.indexOf(",")>-1&&(this.delimiter=","),t||(this.rows.length=0),this.header=bi.splitString(f,this.delimiter)}else this.header=[];var c=[];for(r||(c=this.rows);a<l.length;){var d=l[a],m=bi.splitString(d,this.delimiter);if(m.length<1)break;c.push(m),a++}r&&(this.rows=c)},clone:function(){for(var e=new Pa,t=0;t<this.header.length;t++)e.header.push(this.header[t]);for(var r=0;r<this.rows.length;r++){e.rows.push([]);for(var t=0;t<this.rows[r].length;t++)e.rows[r].push(this.rows[r][t])}return e},addColumn:function(e,t){this.header.push(e);for(var r=0;r<t.length;r++)this.rows[r].push(t[r])},removeColumn:function(e){var t=this.header.indexOf(e);if(t>-1){this.header.splice(t,1);for(var r=0;r<this.rows.length;r++)this.rows[r].splice(t,1)}}};function Jn(){this.columns={},this.column=[],this.rows=[],this.loadFilename="",this.sampId="",this.selectedRow=null,this.error=!1,this.errorText=""}Jn.loadFromUrl=function(e,t){var r=new Jn;return r._onComplete=t,r._webFile=new fr(Nt.singleton.rewrite(e,1)),r._webFile.onStateChange=i.bind("_loadData",r),r._webFile.send(),r},Jn.loadFromString=function(e){var t=new DOMParser,r=t.parseFromString(e,"text/xml"),n=new Jn;return n.loadFromXML(r),n};var _c={_loadData:function(){this._webFile.get_state()===2?alert(this._webFile.get_message()):this._webFile.get_state()===1&&(this.loadFromXML(this._webFile.getXml()),this._onComplete!=null&&this._onComplete())},loadFromXML:function(e){var t=ye.selectSingleNode(e,"VOTABLE");if(t!=null){var r=0;try{var n=ye.selectSingleNode(ye.selectSingleNode(t,"RESOURCE"),"TABLE");if(n!=null)for(var a=i.enumerate(n.childNodes);a.moveNext();){var l=a.current;if(l.nodeName==="FIELD"){var f=new Za(l,r++);this.columns[f.name]=f,this.column.push(f)}}}catch{this.error=!0,this.errorText=ye.selectSingleNode(t,"DESCRIPTION").text}try{var c=ye.selectSingleNode(ye.selectSingleNode(ye.selectSingleNode(ye.selectSingleNode(t,"RESOURCE"),"TABLE"),"DATA"),"TABLEDATA");if(c!=null)for(var d=i.enumerate(c.childNodes);d.moveNext();){var l=d.current;if(l.nodeName==="TR"){var m=new wo(this);m.columnData=new Array(i.keyCount(this.columns)),r=0;for(var v=i.enumerate(l.childNodes);v.moveNext();){var C=v.current;C.nodeName==="TD"&&(m.columnData[r++]=i.trim(ye.getInnerText(C)))}this.rows.push(m)}}}catch{}}},save:function(e){return!0},getColumnByUcd:function(e){for(var t=i.enumerate(i.keys(this.columns));t.moveNext();){var r=t.current,n=this.columns[r];if(i.replaceString(n.ucd,"_",".").toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1)return n}return null},getRAColumn:function(){for(var e=i.enumerate(i.keys(this.columns));e.moveNext();){var t=e.current,r=this.columns[t];if(r.ucd.toLocaleLowerCase().indexOf("pos.eq.ra")>-1||r.ucd.toLocaleLowerCase().indexOf("pos_eq_ra")>-1)return r}for(var n=i.enumerate(i.keys(this.columns));n.moveNext();){var t=n.current,r=this.columns[t];if(r.name.toLocaleLowerCase().indexOf("ra")>-1)return r}return null},getDecColumn:function(){for(var e=i.enumerate(i.keys(this.columns));e.moveNext();){var t=e.current,r=this.columns[t];if(r.ucd.toLowerCase().indexOf("pos.eq.dec")>-1||r.ucd.toLowerCase().indexOf("pos_eq_dec")>-1)return r}for(var n=i.enumerate(i.keys(this.columns));n.moveNext();){var t=n.current,r=this.columns[t];if(r.name.toLowerCase().indexOf("dec")>-1)return r}return null},getMagColumn:function(){for(var e=i.enumerate(i.keys(this.columns));e.moveNext();){var t=e.current,r=this.columns[t];if(r.ucd.toLowerCase().indexOf("phot.mag")>-1||r.ucd.toLowerCase().indexOf("phot_mag")>-1)return r}return null},getDistanceColumn:function(){for(var e=i.enumerate(i.keys(this.columns));e.moveNext();){var t=e.current,r=this.columns[t];if(r.ucd.toLowerCase().indexOf("pos.distance")>-1||r.ucd.toLowerCase().indexOf("pos_distance")>-1)return r}return null},toString:function(){for(var e=new i.StringBuilder,t=!0,r=i.enumerate(i.keys(this.columns));r.moveNext();){var n=r.current,a=this.columns[n];t?t=!1:e.append("	"),e.append(a.name)}e.appendLine("");for(var l=i.enumerate(this.rows);l.moveNext();){var f=l.current;t=!0;for(var c=i.enumerate(f.columnData);c.moveNext();){var a=c.current;t?t=!1:e.append("	"),e.append(a.toString())}e.appendLine("")}return e.toString()}};function wo(e){this.selected=!1,this.owner=e}var gc={getColumnData:function(e){return this.owner.columns[e]!=null?this.columnData[this.owner.columns[e].index]:null},get_item:function(e){return e<0||e>=this.columnData.length?null:this.columnData[e]}};function Za(e,t){if(this.id="",this.type=0,this.precision=0,this.dimentions=0,this.sizes=null,this.ucd="",this.unit="",this.name="",this.index=0,this.index=t,e.attributes.getNamedItem("datatype")!=null&&(this.type=Za.getType(e.attributes.getNamedItem("datatype").nodeValue)),e.attributes.getNamedItem("ucd")!=null&&(this.ucd=e.attributes.getNamedItem("ucd").nodeValue),e.attributes.getNamedItem("precision")!=null)try{this.precision=parseInt(e.attributes.getNamedItem("precision").nodeValue)}catch{}if(e.attributes.getNamedItem("ID")!=null&&(this.id=e.attributes.getNamedItem("ID").nodeValue),e.attributes.getNamedItem("name")!=null?this.name=e.attributes.getNamedItem("name").nodeValue:this.name=this.id,e.attributes.getNamedItem("unit")!=null&&(this.unit=e.attributes.getNamedItem("unit").nodeValue),e.attributes.getNamedItem("arraysize")!=null){var r=e.attributes.getNamedItem("arraysize").nodeValue.split("x");this.dimentions=r.length,this.sizes=new Array(r.length);for(var n=0,a=i.enumerate(r);a.moveNext();){var l=a.current;if(!(l.indexOf("*")>-1))this.sizes[n++]=parseInt(l);else{var f=9999,c=i.replaceString(l,"*","");c.length>0&&(f=parseInt(c)),this.sizes[n++]=f}}}}Za.getType=function(e){var t=13;switch(e){case"boolean":t=1;break;case"bit":t=2;break;case"unsignedByte":t=3;break;case"short":t=4;break;case"int":t=5;break;case"long":t=6;break;case"char":t=7;break;case"unicodeChar":t=8;break;case"float":t=9;break;case"double":t=10;break;case"floatComplex":t=11;break;case"doubleComplex":t=12;break;default:t=13;break}return t};var mc={toString:function(){return this.name}};function Qa(){this.copyright="",this.creditsUrl="",this._validWcs=!1,this.keywords=[],this.description="",this.scaleX=0,this.scaleY=0,this.centerX=0,this.centerY=0,this.rotation=0,this.referenceX=0,this.referenceY=0,this.sizeX=0,this.sizeY=0,this.cd1_1=0,this.cd1_2=0,this.cd2_1=0,this.cd2_2=0,this.hasRotation=!1,this.hasSize=!1,this.hasScale=!1,this.hasLocation=!1,this.hasPixel=!1,this.filename="",this._colorCombine=!1}var pc={get_copyright:function(){return this.copyright},set_copyright:function(e){return this.copyright=e,e},get_creditsUrl:function(){return this.creditsUrl},set_creditsUrl:function(e){return this.creditsUrl=e,e},get_validWcs:function(){return this._validWcs},set_validWcs:function(e){return this._validWcs=e,e},get_keywords:function(){return this.keywords.length||this.keywords.push("Image File"),this.keywords},set_keywords:function(e){return this.keywords=e,e},get_description:function(){return this.description},set_description:function(e){return this.description=e,e},get_scaleX:function(){return this.scaleX},set_scaleX:function(e){return this.scaleX=e,e},get_scaleY:function(){return this.scaleY},set_scaleY:function(e){return this.scaleY=e,e},get_centerX:function(){return this.centerX},set_centerX:function(e){return this.centerX=e,e},get_viewCenterX:function(){return this.centerX+(this.get_sizeX()/2-this.get_referenceX())*this.get_scaleX()},get_centerY:function(){return this.centerY},set_centerY:function(e){return this.centerY=e,e},get_viewCenterY:function(){return this.centerY+(this.get_sizeY()/2-this.get_referenceY())*this.get_scaleY()},get_rotation:function(){return this.rotation},set_rotation:function(e){return this.rotation=e,e},get_referenceX:function(){return this.referenceX},set_referenceX:function(e){return this.referenceX=e,e},get_referenceY:function(){return this.referenceY},set_referenceY:function(e){return this.referenceY=e,e},get_sizeX:function(){return this.sizeX},set_sizeX:function(e){return this.sizeX=e,e},get_sizeY:function(){return this.sizeY},set_sizeY:function(e){return this.sizeY=e,e},get_cd1_1:function(){return this.cd1_1},set_cd1_1:function(e){return this.cd1_1=e,e},get_cd1_2:function(){return this.cd1_2},set_cd1_2:function(e){return this.cd1_2=e,e},get_cd2_1:function(){return this.cd2_1},set_cd2_1:function(e){return this.cd2_1=e,e},get_cd2_2:function(){return this.cd2_2},set_cd2_2:function(e){return this.cd2_2=e,e},adjustScale:function(e,t){e!==this.sizeX&&(this.scaleX*=this.sizeX/e,this.referenceX/=this.sizeX/e,this.sizeX=e),t!==this.sizeY&&(this.scaleY*=this.sizeY/t,this.referenceY/=this.sizeY/t,this.sizeY=t)},calculateScaleFromCD:function(){this.scaleX=Math.sqrt(this.cd1_1*this.cd1_1+this.cd2_1*this.cd2_1)*(this.cd1_1*this.cd2_2-this.cd1_2*this.cd2_1)<0?-1:1,this.scaleY=Math.sqrt(this.cd1_2*this.cd1_2+this.cd2_2*this.cd2_2)},calculateRotationFromCD:function(){var e=this.cd1_1*this.cd2_2-this.cd1_2*this.cd2_1<0?-1:1,t=Math.atan2(-e*this.cd1_2,this.cd2_2);this.rotation=t/Math.PI*180},get_filename:function(){return this.filename},set_filename:function(e){return this.filename=e,e},get_colorCombine:function(){return this._colorCombine},set_colorCombine:function(e){return this._colorCombine=e,e},getBitmap:function(){return null}};function bo(){}bo._drawTest=function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.fillStyle="rgb(80,0,0)",t.fillRect(120,120,165,160),t.fillStyle="rgba(0, 0, 160, 0.5)",t.fillRect(140,140,165,160)};function Ut(){}Ut.getMpcFile=function(e){Ut._webMpcFile=new fr(e),Ut._webMpcFile.responseType="blob",Ut._webMpcFile.onStateChange=Ut.starFileStateChange,Ut._webMpcFile.send()},Ut.starFileStateChange=function(){if(Ut._webMpcFile.get_state()===2)alert(Ut._webMpcFile.get_message());else if(Ut._webMpcFile.get_state()===1){var e=Ut._webMpcFile.getBlob(),t=new FileReader;t.onloadend=function(r){Ut._readFromBin(new ta(new Uint8Array(t.result))),Ut.initMPCVertexBuffer()},t.readAsArrayBuffer(e)}},Ut._readFromBin=function(e){Ut.mpcList=[];var t=e.get_length(),r;try{for(;e.get_position()<t;)r=zn._create(e),Ut.mpcList.push(r)}catch{}e.close()},Ut.drawMPC3D=function(e,t,r){var n=e.viewCamera.zoom,a=(Math.log(Math.max(1,n))/Math.log(4)-15.5)*90,l=Math.min(255,Math.max(0,i.truncate(a)));if(!(l>254)){if(Ut._mpcVertexBuffer==null){Ut.starTexture==null&&(Ut.starTexture=P.loadPlanetTexture(Nt.singleton.engineAssetUrl("StarProfileAlpha.png")));for(var f=0;f<7;f++)Ut._mpcBlendStates[f]=pn.create(!1,1e3);Ut._initBegun||(Ut._startInit(),Ut._initBegun=!0);return}var c=Z.translation(I.negate(r)),d=Z.multiplyMatrix(e.get_world(),c),m=Z.multiplyMatrix(d,e.get_view());if(I._transformCoordinate(e.cameraPosition,Z.invertMatrix(e.get_world())),Ut._mpcVertexBuffer!=null)for(var f=0;f<7;f++)Ut._mpcBlendStates[f].set_targetState(!0),Ut._mpcBlendStates[f].get_state()&&(He.use(e,m,Ut._mpcVertexBuffer[f].vertexBuffer,Ut.starTexture.texture2d,Te.get_white(),t*Ut._mpcBlendStates[f].get_opacity(),!1,K.get_jNow()-lr.baseDate,0,e.cameraPosition,200,.1),e.gl.drawArrays(0,0,Ut._mpcVertexBuffer[f].count))}},Ut._startInit=function(){q.singleton.freestandingMode||Ut.getMpcFile(Nt.singleton.coreStaticUrl("wwtweb/catalog.aspx?Q=mpcbin"))},Ut.initMPCVertexBuffer=function(){try{if(Ut._mpcVertexBuffer==null){var e=new Array(7);Ut._mpcCount=Ut.mpcList.length;for(var t=new Array(7),r=0;r<7;r++)t[r]=[];for(var n=i.enumerate(Ut.mpcList);n.moveNext();){var a=n.current,l=0;a.a<2.5?l=0:a.a<2.83?l=1:a.a<2.96?l=2:a.a<3.3?l=3:a.a<5?l=4:a.a<10?l=5:l=6;var f=new lr;f.fill(a),t[l].push(f)}for(var r=0;r<7;r++)e[r]=as.create(t[r]),e[r].unlock();Ut._mpcVertexBuffer=e}}finally{}};var vc={};function hr(){this._camParams=fi.create(0,0,-1,0,0,100),this._location3d=I.create(0,0,0),this.htmlDescription="",this._constellation="",this._classification=1048576,this._type=2,this._magnitude=0,this._distnace=0,this.angularSize=60,this.annotation="",this._thumbNail=null,this._studyImageset=null,this._backgroundImageSet=null,this._searchDistance=0,this._elevation=50}hr.create=function(e,t,r,n,a,l,f){var c=new hr;return c.set_zoomLevel(f),c._constellation=a,c._name=e,l===2||l===4?c._camParams.set_RA(r):c.set_lng(r),c.set_lat(t),c.set_classification(n),c.set_type(l),c},hr.createCameraParams=function(e,t,r,n,a,l){var f=new hr;return f._constellation=n,f._name=e,f.set_classification(r),f._camParams=t,f.set_type(a),f.set_target(l),f},hr._fromXml=function(e){var t=new hr;if(t._name=e.attributes.getNamedItem("Name").nodeValue,e.attributes.getNamedItem("MSRComponentId")!=null&&e.attributes.getNamedItem("Permission")!=null&&e.attributes.getNamedItem("Url")!=null)return t.set_url(e.attributes.getNamedItem("Url").nodeValue),t.set_thumbnailUrl(e.attributes.getNamedItem("Thumbnail").nodeValue),t;e.attributes.getNamedItem("DataSetType")!=null&&(t._type=gt.parse("ImageSetType",e.attributes.getNamedItem("DataSetType").nodeValue)),t.get_type()===2?(t._camParams.set_RA(parseFloat(e.attributes.getNamedItem("RA").nodeValue)),t._camParams.set_dec(parseFloat(e.attributes.getNamedItem("Dec").nodeValue))):(t.set_lat(parseFloat(e.attributes.getNamedItem("Lat").nodeValue)),t.set_lng(parseFloat(e.attributes.getNamedItem("Lng").nodeValue))),e.attributes.getNamedItem("Constellation")!=null&&(t._constellation=e.attributes.getNamedItem("Constellation").nodeValue),e.attributes.getNamedItem("Classification")!=null&&(t._classification=gt.parse("Classification",e.attributes.getNamedItem("Classification").nodeValue)),e.attributes.getNamedItem("Magnitude")!=null&&(t._magnitude=parseFloat(e.attributes.getNamedItem("Magnitude").nodeValue)),e.attributes.getNamedItem("AngularSize")!=null&&(t.angularSize=parseFloat(e.attributes.getNamedItem("AngularSize").nodeValue)),e.attributes.getNamedItem("ZoomLevel")!=null&&t.set_zoomLevel(parseFloat(e.attributes.getNamedItem("ZoomLevel").nodeValue)),e.attributes.getNamedItem("Rotation")!=null&&(t._camParams.rotation=parseFloat(e.attributes.getNamedItem("Rotation").nodeValue)),e.attributes.getNamedItem("Annotation")!=null&&(t.annotation=e.attributes.getNamedItem("Annotation").nodeValue),e.attributes.getNamedItem("Angle")!=null&&(t._camParams.angle=parseFloat(e.attributes.getNamedItem("Angle").nodeValue)),e.attributes.getNamedItem("Opacity")!=null?t._camParams.opacity=parseFloat(e.attributes.getNamedItem("Opacity").nodeValue):t._camParams.opacity=100,t.set_target(65536),e.attributes.getNamedItem("Target")!=null&&t.set_target(gt.parse("SolarSystemObjects",e.attributes.getNamedItem("Target").nodeValue)),e.attributes.getNamedItem("ViewTarget")!=null&&(t._camParams.viewTarget=I.parse(e.attributes.getNamedItem("ViewTarget").nodeValue)),e.attributes.getNamedItem("TargetReferenceFrame")!=null&&(t._camParams.targetReferenceFrame=e.attributes.getNamedItem("TargetReferenceFrame").nodeValue);var r=ye.selectSingleNode(e,"Description");r!=null&&(t.htmlDescription=ye.getInnerText(r));var n=ye.selectSingleNode(e,"BackgroundImageSet");if(n!=null){var a=ye.selectSingleNode(n,"ImageSet");t._backgroundImageSet=Mi.fromXMLNode(a)}var l=ye.selectSingleNode(e,"ForegroundImageSet");if(l!=null){var a=ye.selectSingleNode(l,"ImageSet");t._studyImageset=Mi.fromXMLNode(a)}return l=ye.selectSingleNode(e,"ImageSet"),l!=null&&(t._studyImageset=Mi.fromXMLNode(l)),t},hr._properCaps=function(e){for(var t=e.split(" "),r="",n=i.enumerate(t);n.moveNext();){var a=n.current;r=r+a.substr(0,1).toUpperCase()+(a.length>1?a.substr(1).toLowerCase():"")+" "}return i.trim(r)};var wc={get_tag:function(){return this._tag},set_tag:function(e){return this._tag=e,e},get_url:function(){return this._url},set_url:function(e){return this._url=e,e},get_thumbnail:function(){return this._thumbnail},set_thumbnail:function(e){return this._thumbnail=e,e},get_name:function(){return this.get_names()[0]},get_names:function(){return i.emptyString(this._name)?"".split(";"):this._name.split(";")},set_names:function(e){return this._name=bi.getNamesStringFromArray(e),e},get_camParams:function(){if(this.get_classification()===536870912&&this._camParams.target!==20){var e=P.getPlanetLocation(this.get_name());this._camParams.set_RA(e.RA),this._camParams.set_dec(e.dec),this._distnace=e.distance}return this._camParams},set_camParams:function(e){return this._camParams=e,e},updatePlanetLocation:function(e){this._camParams.viewTarget=P.getPlanet3dLocationJD(this.get_target(),e),this.get_target()!==65536&&this.get_target()!==20&&(this._camParams.viewTarget=P.getPlanetTargetPoint(this.get_target(),this.get_lat(),this.get_lng(),e))},get_location3d:function(){return(this.get_classification()===536870912||!this._location3d.x&&!this._location3d.y&&!this._location3d.z)&&(this._location3d=V.raDecTo3d(this.get_RA(),this.get_dec())),this._location3d},get_lat:function(){return this.get_camParams().lat},set_lat:function(e){return this._camParams.lat=e,e},get_lng:function(){return this.get_camParams().lng},set_lng:function(e){return this._camParams.lng=e,e},get_opacity:function(){return this.get_camParams().opacity},set_opacity:function(e){return this._camParams.opacity=e,e},get_constellation:function(){return this._constellation},set_constellation:function(e){return this._constellation=e,e},get_classification:function(){return this._classification},set_classification:function(e){return this._classification=e,e},get_type:function(){return this._type},set_type:function(e){return this._type=e,e},get_magnitude:function(){return this._magnitude},set_magnitude:function(e){return this._magnitude=e,e},get_distance:function(){return this._distnace},set_distance:function(e){return this._distnace=e,e},get_zoomLevel:function(){return this.get_camParams().zoom},set_zoomLevel:function(e){return this._camParams.zoom=e,e},get_annotation:function(){return this.annotation},set_annotation:function(e){return this.annotation=e,e},get_studyImageset:function(){return this._studyImageset},set_studyImageset:function(e){return this._studyImageset=e,e},get_backgroundImageset:function(){return this._backgroundImageSet},set_backgroundImageset:function(e){return e!=null&&this.set_type(e.get_dataSetType()),this._backgroundImageSet=e,e},get_searchDistance:function(){return this._searchDistance},set_searchDistance:function(e){return this._searchDistance=e,e},get_elevation:function(){return this._elevation},set_elevation:function(e){return this._elevation=e,e},get_thumbnailUrl:function(){if(i.emptyString(this._thumbnailField)){if(this._studyImageset!=null&&!i.emptyString(this._studyImageset.get_thumbnailUrl()))return this._studyImageset.get_thumbnailUrl();if(this._backgroundImageSet!=null&&!i.emptyString(this._backgroundImageSet.get_thumbnailUrl()))return this._backgroundImageSet.get_thumbnailUrl();var e=this.get_name();return e.indexOf(";")>-1&&(e=e.substr(0,e.indexOf(";"))),this.get_classification()===1||q.singleton.freestandingMode?Nt.singleton.engineAssetUrl("thumb_star.jpg"):Nt.singleton.coreStaticUrl("wwtweb/thumbnail.aspx?name="+e.toLowerCase())}return this._thumbnailField},set_thumbnailUrl:function(e){return this._thumbnailField=e,e},get_RA:function(){return this.get_camParams().get_RA()},set_RA:function(e){return this._camParams.set_RA(e),e},get_dec:function(){return this.get_camParams().get_dec()},set_dec:function(e){return this._camParams.set_dec(e),e},toString:function(){return this._name},_saveToXml:function(e,t){e._writeStartElement(t),e._writeAttributeString("Name",this._name),e._writeAttributeString("DataSetType",gt.toXml("ImageSetType",this._type)),this.get_type()===2?(e._writeAttributeString("RA",this._camParams.get_RA().toString()),e._writeAttributeString("Dec",this._camParams.get_dec().toString())):(e._writeAttributeString("Lat",this.get_lat().toString()),e._writeAttributeString("Lng",this.get_lng().toString())),e._writeAttributeString("Constellation",this._constellation),e._writeAttributeString("Classification",gt.toXml("Classification",this._classification)),e._writeAttributeString("Magnitude",this._magnitude.toString()),e._writeAttributeString("Distance",this._distnace.toString()),e._writeAttributeString("AngularSize",this.angularSize.toString()),e._writeAttributeString("ZoomLevel",this.get_zoomLevel().toString()),e._writeAttributeString("Rotation",this._camParams.rotation.toString()),e._writeAttributeString("Angle",this._camParams.angle.toString()),e._writeAttributeString("Opacity",this._camParams.opacity.toString()),e._writeAttributeString("Target",gt.toXml("SolarSystemObjects",this.get_target())),e._writeAttributeString("ViewTarget",this._camParams.viewTarget.toString()),e._writeAttributeString("TargetReferenceFrame",this._camParams.targetReferenceFrame),e._writeStartElement("Description"),e._writeCData(this.htmlDescription),e._writeEndElement(),this._backgroundImageSet!=null&&(e._writeStartElement("BackgroundImageSet"),Mi.saveToXml(e,this._backgroundImageSet,""),e._writeEndElement()),this._studyImageset!=null&&Mi.saveToXml(e,this._studyImageset,""),e._writeEndElement()},get_bounds:function(){return this._bounds},set_bounds:function(e){return this._bounds=e,e},get_isImage:function(){return this._studyImageset!=null||this._backgroundImageSet!=null},get_isTour:function(){return!1},get_isFolder:function(){return!1},get_children:function(){return[]},get_readOnly:function(){return!0},get_target:function(){return this._camParams.target},set_target:function(e){return this._camParams.target=e,e},get_isCloudCommunityItem:function(){return!1}};function yo(){this.a=0,this.e=0,this.ea=0}var bc={};function Wi(e,t,r,n){this.poleDec=0,this.poleRa=0,this.primeMeridian=0,this.rotationRate=0,this.poleDec=t,this.poleRa=e,this.primeMeridian=r,this.rotationRate=n}var yc={};function P(){}P.loadPlanetTexture=function(e){var t=new di;return t.load(e),t},P.getPlanet3dLocation=function(e){try{if(e<21)return P._planet3dLocations[e].copy()}catch{}return I.create(0,0,0)},P.getPlanet3dSufaceAltitude=function(e){try{if(e<21)return P.getAdjustedPlanetRadius(e)}catch{}return 0},P.getPlanetTargetPoint=function(e,t,r,n){var a;return n?a=P.getPlanet3dLocationJD(e,n):a=P.getPlanet3dLocation(e),a.add(V.raDecTo3dAu(r/15+6,t,P.getPlanet3dSufaceAltitude(e))),a},P.getPlanet3dLocationJD=function(e,t){try{var r=new I,n=dt.getPlanet(t,0,0,0,-6378149),a=V.raDecTo3dAu(n.RA,n.dec,n.distance);if(e===19)r=I.create(-a.x,-a.y,-a.z);else{var l=dt.getPlanet(t,e,0,0,-6378149);r=V.raDecTo3dAu(l.RA,l.dec,l.distance),r.subtract(a)}if(r.rotateX(V.meanObliquityOfEcliptic(t)*P.RC),U.get_active().get_solarSystemScale()!==1)switch(e){case 9:var f=P.getPlanet3dLocationJD(19,t);r.subtract(f),r.multiply(U.get_active().get_solarSystemScale()/2),r.add(f);break;case 10:case 11:case 12:case 13:var f=P.getPlanet3dLocationJD(4,t);r.subtract(f),r.multiply(U.get_active().get_solarSystemScale()),r.add(f);break;default:break}return r}catch{return I.create(0,0,0)}},P.getPlanetLocation=function(e){var t=P.getPlanetIDFromName(e);return P._planetLocations!=null?P._planetLocations[t]:dt.getPlanet(K.get_jNow(),t,K.get_location().get_lat(),K.get_location().get_lng(),K.get_altitude())},P.getPlanetLocationJD=function(e,t){var r=P.getPlanetIDFromName(e);return dt.getPlanet(t,r,K.get_location().get_lat(),K.get_location().get_lng(),K.get_altitude())},P.getPlanetIDFromName=function(e){switch(e){case"Sun":return 0;case"Mercury":return 1;case"Venus":return 2;case"Mars":return 3;case"Jupiter":return 4;case"Saturn":return 5;case"Uranus":return 6;case"Neptune":return 7;case"Pluto":return 8;case"Moon":return 9;case"Io":return 10;case"Europa":return 11;case"Ganymede":return 12;case"Callisto":return 13;case"Earth":return 19;case"IoShadow":return 14;case"EuropaShadow":return 15;case"GanymedeShadow":return 16;case"CallistoShadow":return 17;case"SunEclipsed":return 18;case"Custom":return 20;case"Undefined":return 65536;default:return-1}},P.getImageSetNameNameFrom3dId=function(e){switch(e){case 0:return"Sun";case 1:return"Mercury";case 2:return"Venus";case 3:return"Visible Imagery";case 4:return"Jupiter";case 5:return"Saturn";case 6:return"Uranus";case 7:return"Neptune";case 8:return"Pluto";case 9:return"Moon";case 10:return"Io (Jupiter)";case 11:return"Europa (Jupiter)";case 12:return"Ganymede (Jupiter)";case 13:return"Callisto (Jupiter)";case 19:return"Bing Maps Aerial";default:return""}},P.getNameFrom3dId=function(e){switch(e){case 0:return"Sun";case 1:return"Mercury";case 2:return"Venus";case 3:return"Mars";case 4:return"Jupiter";case 5:return"Saturn";case 6:return"Uranus";case 7:return"Neptune";case 8:return"Pluto";case 9:return"Moon";case 10:return"Io";case 11:return"Europa";case 12:return"Ganymede";case 13:return"Callisto";case 19:return"Earth";default:return""}},P.updatePlanetLocations=function(e){if(P._jNow=K.get_jNow(),e&&P.updateOrbits(0),P._planetDiameters==null&&(P._planetDiameters=new Array(20),P._planetDiameters[0]=.009291568,P._planetDiameters[1]=325794793734425e-19,P._planetDiameters[2]=808669220531394e-19,P._planetDiameters[3]=453785605596396e-19,P._planetDiameters[4]=954501e-9,P._planetDiameters[5]=802173e-9,P._planetDiameters[6]=339564e-9,P._planetDiameters[7]=324825e-9,P._planetDiameters[8]=152007379777805e-19,P._planetDiameters[9]=232084653538149e-19,P._planetDiameters[10]=243519298386342e-19,P._planetDiameters[11]=208692629580609e-19,P._planetDiameters[12]=351742670356556e-19,P._planetDiameters[13]=322263666626559e-19,P._planetDiameters[14]=243519298386342e-19,P._planetDiameters[15]=208692629580609e-19,P._planetDiameters[16]=351742670356556e-19,P._planetDiameters[17]=322263666626559e-19,P._planetDiameters[18]=.009291568*2,P._planetDiameters[19]=855626412117809e-19),P.planetColors==null){var t=G.fromArgb(255,255,255,221),r=G.fromArgb(255,255,68,0);P.planetColors=new Array(20),P.planetColors[0]=Te.get_yellow(),P.planetColors[1]=Te.get_white(),P.planetColors[2]=t,P.planetColors[3]=r,P.planetColors[4]=G.fromArgb(255,255,165,0),P.planetColors[5]=G.fromArgb(255,184,134,11),P.planetColors[6]=G.fromArgb(255,173,216,230),P.planetColors[7]=Te.get_blue(),P.planetColors[8]=Te.get_white(),P.planetColors[9]=Te.get_white(),P.planetColors[10]=Te.get_white(),P.planetColors[11]=Te.get_white(),P.planetColors[12]=Te.get_white(),P.planetColors[13]=Te.get_white(),P.planetColors[14]=Te.get_black(),P.planetColors[15]=Te.get_black(),P.planetColors[16]=Te.get_black(),P.planetColors[17]=Te.get_black(),P.planetColors[18]=Te.get_white(),P.planetColors[19]=G.fromArgb(255,173,216,230)}if(P._planetTilts==null&&(P._planetTilts=new Array(20),P._planetTilts[0]=0,P._planetTilts[1]=.01,P._planetTilts[2]=177.4,P._planetTilts[3]=25.19,P._planetTilts[4]=3.13,P._planetTilts[5]=26.73,P._planetTilts[6]=97.77,P._planetTilts[7]=28.32,P._planetTilts[8]=119.61,P._planetTilts[9]=23.439,P._planetTilts[10]=2.21,P._planetTilts[11]=0,P._planetTilts[12]=-.33,P._planetTilts[13]=0,P._planetTilts[14]=0,P._planetTilts[15]=0,P._planetTilts[16]=0,P._planetTilts[17]=0,P._planetTilts[18]=0,P._planetTilts[19]=23.5),P._planetTilts[19]=P._obliquity/P.RC,P.planetRotationPeriod==null&&(P.planetRotationPeriod=new Array(20),P.planetRotationPeriod[0]=25.37995,P.planetRotationPeriod[1]=58.6462,P.planetRotationPeriod[2]=-243.0187,P.planetRotationPeriod[3]=1.02595675,P.planetRotationPeriod[4]=.41007,P.planetRotationPeriod[5]=.426,P.planetRotationPeriod[6]=-.71833,P.planetRotationPeriod[7]=.67125,P.planetRotationPeriod[8]=-6.38718,P.planetRotationPeriod[9]=27.3,P.planetRotationPeriod[10]=1.769137786,P.planetRotationPeriod[11]=3.551,P.planetRotationPeriod[12]=7.155,P.planetRotationPeriod[13]=16.69,P.planetRotationPeriod[14]=0,P.planetRotationPeriod[15]=0,P.planetRotationPeriod[16]=0,P.planetRotationPeriod[17]=0,P.planetRotationPeriod[18]=0,P.planetRotationPeriod[19]=.99726968),P._planetScales==null&&(P._planetScales=new Array(20)),P._planet3dLocations==null&&(P._planet3dLocations=new Array(20)),U.get_active().get_actualPlanetScale())P._planetScales[0]=.5,P._planetScales[1]=.25,P._planetScales[2]=.25,P._planetScales[3]=.25,P._planetScales[4]=.25,P._planetScales[5]=.5,P._planetScales[6]=.25,P._planetScales[7]=.25,P._planetScales[8]=.25,P._planetScales[9]=.25,P._planetScales[10]=.25,P._planetScales[11]=.25,P._planetScales[12]=.25,P._planetScales[13]=.25,P._planetScales[14]=.25,P._planetScales[15]=.25,P._planetScales[16]=.25,P._planetScales[17]=.25,P._planetScales[18]=.5,P._planetScales[19]=.25;else{for(var n=0;n<20;n++)n<10?P._planetScales[n]=.25:P._planetScales[n]=.1;P._planetScales[0]=.5,P._planetScales[5]=.5,P._planetScales[18]=.5}P._planetDrawOrder={},P._planetLocations=new Array(20);var a=new I,l=0;{var f=dt.getPlanet(P._jNow,l,e?0:K.get_location().get_lat(),e?0:K.get_location().get_lng(),e?-6378149:K.get_altitude());a=V.raDecTo3dAu(f.RA,f.dec,f.distance)}P._planet3dLocations[19]=I.create(-a.x,-a.y,-a.z),P._planet3dLocations[19].rotateX(P._obliquity);for(var n=0;n<18;n++){if(P._planetLocations[n]=dt.getPlanet(P._jNow,n,e?0:K.get_location().get_lat(),e?0:K.get_location().get_lng(),e?-6378149:K.get_altitude()),P._planet3dLocations[n]=V.raDecTo3dAu(P._planetLocations[n].RA,P._planetLocations[n].dec,P._planetLocations[n].distance),P._planet3dLocations[n].subtract(a),P._planet3dLocations[n].rotateX(P._obliquity),U.get_active().get_actualPlanetScale()&&(P._planetScales[n]=2*Math.atan(.5*(P._planetDiameters[n]/P._planetLocations[n].distance))/Math.PI*180),U.get_active().get_solarSystemScale()!==1){var c=n;switch(c){case 9:var d=P._planet3dLocations[19];P._planet3dLocations[n].subtract(d),P._planet3dLocations[n].multiply(U.get_active().get_solarSystemScale()/2),P._planet3dLocations[n].add(d);break;case 10:case 11:case 12:case 13:var d=P._planet3dLocations[4];P._planet3dLocations[n].subtract(d),P._planet3dLocations[n].multiply(U.get_active().get_solarSystemScale()),P._planet3dLocations[n].add(d);break}}for(var m=-P._planetLocations[n].distance;i.keyExists(P._planetDrawOrder,m);)m+=1e-10;P._planetDrawOrder[m]=n}P._planetLocations[18]=P._planetLocations[0],P._planetScales[0]*=2,P._planetScales[18]=P._planetScales[0],P._planetScales[5]=P._planetScales[5]*2,P._lastUpdate=K.get_now()},P.planetsReady=function(){},P.updateOrbits=function(e){try{if(P._obliquity=V.meanObliquityOfEcliptic(K.get_jNow())*P.RC,e!==P._lastPlanetCenterID&&(P._orbits=null),P._lastPlanetCenterID=e,P._orbits==null&&(e<0?P._eclipticTilt=Z.get_identity():(P._eclipticTilt=Z.get_identity(),P._eclipticTilt=Z._rotationX(P._obliquity)),P.planetOrbitalYears==null&&(P.planetOrbitalYears=new Array(20),P.planetOrbitalYears[0]=1,P.planetOrbitalYears[1]=.241,P.planetOrbitalYears[2]=.615,P.planetOrbitalYears[3]=1.881,P.planetOrbitalYears[4]=11.87,P.planetOrbitalYears[5]=29.45,P.planetOrbitalYears[6]=84.07,P.planetOrbitalYears[7]=164.9,P.planetOrbitalYears[8]=248.1,P.planetOrbitalYears[9]=27.3/365.25,P.planetOrbitalYears[10]=16.6890184/365.25,P.planetOrbitalYears[11]=3.551181/365.25,P.planetOrbitalYears[12]=7.15455296/365.25,P.planetOrbitalYears[13]=16.6890184/365.25,P.planetOrbitalYears[19]=1),!P.readOrbits())){P._orbits=new Array(20);for(var t=1;t<20;t++)if(P._orbits[t]=new Array(P._orbitalSampleRate),t<9||t===19){for(var r=0;r<P._orbitalSampleRate;r++){var n=e,a=P._jNow+P.planetOrbitalYears[t]*365.25/P._orbitalSampleRate*(r-P._orbitalSampleRate/2),l=new I;if(t===9?n=-1:t>9&&t<14&&(n=4),n>-1){var f=dt.getPlanet(a,n,0,0,-6378149);l=V.raDecTo3dAu(f.RA,f.dec,f.distance)}if(t!==19){var c=dt.getPlanet(a,t,0,0,-6378149);P._orbits[t][r]=V.raDecTo3dAu(c.RA,c.dec,c.distance),P._orbits[t][r].subtract(l)}else P._orbits[t][r]=I.create(-l.x,-l.y,-l.z);P._orbits[t][r].rotateX(P._obliquity)}P._orbits[t][P._orbitalSampleRate-1]=P._orbits[t][0]}P.dumpOrbitsFile()}}finally{}},P.readOrbits=function(){return!1},P.dumpOrbitsFile=function(){},P.drawPlanets=function(e,t){P._planetTextures==null&&P._loadPlanetTextures();var r=P._geocentricElongation(P._planetLocations[9].RA,P._planetLocations[9].dec,P._planetLocations[0].RA,P._planetLocations[0].dec);P._planetLocations[9].RA-P._planetLocations[0].RA,P._planetLocations[9].RA<P._planetLocations[0].RA,P._phaseAngle(r,P._planetLocations[9].distance,P._planetLocations[0].distance),P._positionAngle(P._planetLocations[9].RA,P._planetLocations[9].dec,P._planetLocations[0].RA,P._planetLocations[0].dec);var n=Math.abs(P._planetLocations[9].RA-P._planetLocations[0].RA)*15*Math.cos(V.degreesToRadians(P._planetLocations[0].dec)),a=Math.abs(P._planetLocations[9].dec-P._planetLocations[0].dec),l=Math.sqrt(n*n+a*a),f=0,c=P._planetScales[9]/2-l;Math.min(32,i.truncate(l*32)),c>P._planetScales[0]/4&&(f=Math.min(1,(c-P._planetScales[0]/2)/.001),P._drawPlanet(e,18,f));for(var d=i.enumerate(i.keys(P._planetDrawOrder));d.moveNext();){var m=d.current,v=P._planetDrawOrder[m];P._drawPlanet(e,v,1)}return!0},P._loadPlanetTextures=function(){var e=Nt.singleton.engineAssetUrl("");P._planetTextures=new Array(20),P._planetTextures[0]=P.loadPlanetTexture(e+"sun.png"),P._planetTextures[1]=P.loadPlanetTexture(e+"mercury.png"),P._planetTextures[2]=P.loadPlanetTexture(e+"venus.png"),P._planetTextures[3]=P.loadPlanetTexture(e+"mars.png"),P._planetTextures[4]=P.loadPlanetTexture(e+"jupiter.png"),P._planetTextures[5]=P.loadPlanetTexture(e+"saturn.png"),P._planetTextures[6]=P.loadPlanetTexture(e+"uranus.png"),P._planetTextures[7]=P.loadPlanetTexture(e+"neptune.png"),P._planetTextures[8]=P.loadPlanetTexture(e+"pluto.png"),P._planetTextures[9]=P.loadPlanetTexture(e+"moon.png"),P._planetTextures[10]=P.loadPlanetTexture(e+"io.png"),P._planetTextures[11]=P.loadPlanetTexture(e+"europa.png"),P._planetTextures[12]=P.loadPlanetTexture(e+"ganymede.png"),P._planetTextures[13]=P.loadPlanetTexture(e+"callisto.png"),P._planetTextures[14]=P.loadPlanetTexture(e+"moonshadow.png"),P._planetTextures[15]=P.loadPlanetTexture(e+"moonshadow.png"),P._planetTextures[16]=P.loadPlanetTexture(e+"moonshadow.png"),P._planetTextures[17]=P.loadPlanetTexture(e+"moonshadow.png"),P._planetTextures[18]=P.loadPlanetTexture(e+"sunCorona.png"),P._planetTextures[19]=P.loadPlanetTexture(e+"earth.png")},P.drawPlanets3D=function(e,t,r){P.initPlanetResources(e);var n=bi.solarSystemToMeters(e.get_solarSystemCameraDistance());Math.min(1,Math.max(ye.log10(n)-7.3,0));var a=Math.min(1,Math.max(ye.log10(n)-8.6,0));if(U.get_active().get_solarSystemOrbits()&&a>0){for(var l=1;l<10;l++){var f=l;l===9&&(f=19);var c=Math.atan2(P._planet3dLocations[f].z,P._planet3dLocations[f].x);P._drawSingleOrbit(e,P.planetColors[f],f,r,c,P._planet3dLocations[f],a)}var d=9;P._drawSingleOrbit(e,P.planetColors[d],d,r,0,P._planet3dLocations[d],a)}i.clearKeys(P._drawOrder);for(var m=e.cameraPosition.copy(),v=0;v<14;v++)if(!(U.get_active().get_solarSystemLighting()&&P._planetLocations[v].eclipsed)){var C=I.subtractVectors(m,I.subtractVectors(P._planet3dLocations[v],r));i.keyExists(P._drawOrder,C.length())||(P._drawOrder[C.length()]=v)}var T=I.subtractVectors(m,I.subtractVectors(P._planet3dLocations[19],r));i.keyExists(P._drawOrder,T.length())||(P._drawOrder[T.length()]=19);for(var A=i.enumerate(i.keys(P._drawOrder));A.moveNext();){var $=A.current,v=P._drawOrder[$];P._drawPlanet3d(e,v,r)}return!0},P.getPlanetOrientationAtEpoch=function(e){var t=Z.get_identity(),r=23.4392794;return e===19?t._multiply(Z._rotationX(r*P.RC)):(t._multiply(Z._rotationX(-90*P.RC)),t._multiply(Z._rotationZ((180+P._planetAngles[e].primeMeridian)*P.RC)),t._multiply(Z._rotationX((90-P._planetAngles[e].poleDec)*P.RC)),t._multiply(Z._rotationZ((P._planetAngles[e].poleRa-90)*P.RC)),t._multiply(Z._rotationX(r*P.RC)),t._multiply(Z._rotationX(90*P.RC))),t},P.setupPlanetMatrix=function(e,t,r,n){var a=e.get_world().clone();if(P._setupMatrixForPlanetGeometry(e,t,r,n),t===0){var l=P.getAdjustedPlanetRadius(t);a.scale(I.create(l,l,l));var f=I.subtractVectors(P._planet3dLocations[t],r);a._multiply(Z.translation(f)),e.set_worldBaseNonRotating(a)}},P._setupMatrixForPlanetGeometry=function(e,t,r,n){var a=P.getAdjustedPlanetRadius(t),l=0;t===19?l=Math.PI+V.mstFromUTC2(K.get_now(),0)/180*Math.PI:l=Math.PI+(P._jNow-2451545)/P.planetRotationPeriod[t]*Math.PI*2%(Math.PI*2),t===9&&(l-=Math.PI/2);var f=e.get_world().clone(),c=e.get_world().clone(),d=I.subtractVectors(P._planet3dLocations[t],r),m=P.getPlanetOrientationAtEpoch(t);return f.scale(I.create(a,a,a)),f._multiply(Z._rotationY(-l)),f._multiply(m),t===e.viewCamera.target&&(P.earthMatrix=Z.get_identity(),P.earthMatrix._multiply(Z._rotationY(-l)),P.earthMatrix._multiply(m),P.earthMatrixInv=P.earthMatrix.clone(),P.earthMatrixInv.invert()),f._multiply(Z.translation(d)),e.set_world(f),e.set_worldBase(e.get_world().clone()),e.set_nominalRadius(P.getPlanetRadiusInMeters(t)),n&&e.makeFrustum(),c.scale(I.create(a,a,a)),c._multiply(m),c._multiply(Z.translation(d)),e.set_worldBaseNonRotating(c),l},P.initPlanetResources=function(e){},P._drawSingleOrbit=function(e,t,r,n,a,l,f){if(!(f<.01))if(e.gl==null){var c=P._orbitalSampleRate,d=!1;e.get_viewPoint();var m=e.device;m.save(),m.strokeStyle=t.toString(),m.lineWidth=2,m.globalAlpha=1;for(var v=new I,C=new I,T=new I,A=!0,$=Z.translation(I.negate(n)),N=Z.multiplyMatrix($,e.WVP),F=Z.multiplyMatrix($,e.WV),z=0;z<c;z++){var Y=P._orbits[r][z],W=(Math.atan2(P._orbits[r][z].z,P._orbits[r][z].x)+Math.PI*2-a)%(Math.PI*2),ee=i.truncate(W/(Math.PI*2)*255),ne=ee/255;ee<2&&!d&&(Y=l,ne=1),C=F.transform(Y),v=N.transform(Y),C.z>0&&(A?A=!1:(m.beginPath(),m.globalAlpha=ne*f,m.moveTo(T.x,T.y),m.lineTo(v.x,v.y),m.stroke())),T=v}m.restore()}else if(r!==9){var c=P._orbitalSampleRate,d=!1;e.get_viewPoint();for(var v=new I,C=new I,T=new I,ae=new G,A=!0,de=new go,z=0;z<c;z++){var Y=P._orbits[r][z].copy(),W=(Math.atan2(Y.z,Y.x)+Math.PI*2-a)%(Math.PI*2),ee=i.truncate(W/(Math.PI*2)*255),ne=ee/255,se=G.fromArgb(ee,t.r,t.g,t.b);ee<2&&!d&&!A&&(Y=I.subtractVectors(l,n),ne=1,ee=255,se.a=255,ae.a=255,de.addLine(T,Y.copy(),ae._clone(),se._clone()),ae.a=0,se.a=0,Y=P._orbits[r][z].copy(),d=!0),Y=I.subtractVectors(Y,n),A?A=!1:de.addLine(T,Y,ae,se),T=Y,ae=se._clone()}de.drawLines(e,1,Te.get_white()),de.clear()}else{var we=0;switch(r){case 9:we=398600.44189+4902.7779;break;case 10:case 11:case 12:case 13:we=126686534;break;default:we=1327124400188e-1;break}var fe=1/1440*.1,$e=P.getPlanetPositionDirect(r,P._jNow),ve=P.getPlanetPositionDirect(r,P._jNow-fe),ut=I.scale(I.subtractVectors($e,ve),1/fe),ht=P._stateVectorToKeplerian($e,ut,we);P._drawSingleOrbitElements(e,t,r,n,a,l,ht)}},P.getPlanetPositionDirect=function(e,t){var r=0,n=0,a=0;switch(e){case 1:r=Ye.eclipticLongitude(t),n=Ye.eclipticLatitude(t),a=Ye.radiusVector(t);break;case 2:r=tn.eclipticLongitude(t),n=tn.eclipticLatitude(t),a=tn.radiusVector(t);break;case 19:r=Qt.eclipticLongitude(t),n=Qt.eclipticLatitude(t),a=Qt.radiusVector(t);break;case 3:r=Ie.eclipticLongitude(t),n=Ie.eclipticLatitude(t),a=Ie.radiusVector(t);break;case 4:r=H.eclipticLongitude(t),n=H.eclipticLatitude(t),a=H.radiusVector(t);break;case 5:r=Er.eclipticLongitude(t),n=Er.eclipticLatitude(t),a=Er.radiusVector(t);break;case 6:r=Qr.eclipticLongitude(t),n=Qr.eclipticLatitude(t),a=Qr.radiusVector(t);break;case 7:r=vr.eclipticLongitude(t),n=vr.eclipticLatitude(t),a=vr.radiusVector(t);break;case 8:r=Zr.eclipticLongitude(t),n=Zr.eclipticLatitude(t),a=Zr.radiusVector(t);break;case 9:r=wt.eclipticLongitude(t),n=wt.eclipticLatitude(t),a=wt.radiusVector(t)/149598e3;break;case 10:var l=Ri.calculate(t),f=l.satellite1.eclipticRectangularCoordinates;return I.create(f.x,f.z,f.y);case 11:var l=Ri.calculate(t),f=l.satellite2.eclipticRectangularCoordinates;return I.create(f.x,f.z,f.y);case 12:var l=Ri.calculate(t),f=l.satellite3.eclipticRectangularCoordinates;return I.create(f.x,f.z,f.y);case 13:var l=Ri.calculate(t),f=l.satellite4.eclipticRectangularCoordinates;return I.create(f.x,f.z,f.y)}r=V.degreesToRadians(r),n=V.degreesToRadians(n);var c=I.create(Math.cos(r)*Math.cos(n)*a,Math.sin(r)*Math.cos(n)*a,Math.sin(n)*a),d=(V.meanObliquityOfEcliptic(t)-V.meanObliquityOfEcliptic(2451545))*P.RC;return c.rotateX(d),I.create(c.x,c.z,c.y)},P._stateVectorToKeplerian=function(e,t,r){var n=I.scale(e,149598e3),a=I.scale(I.scale(t,1/86400),149598e3),l=n.length(),f=a.length(),c=1/(2/l-f*f/r),d=I.cross(n,a),m=I.subtractVectors(I.scale(I.cross(a,d),1/r),I.scale(n,1/l)),v=m.length();d.normalize(),m.normalize();var C=I.cross(d,m);n.normalize();var T=I.dot(m,n),A=I.dot(C,n),$=Math.atan2(Math.sqrt(1-v*v)*A,v+T),N=new yo;return N.orientation=Z.create(m.x,m.y,m.z,0,C.x,C.y,C.z,0,d.x,d.y,d.z,0,0,0,0,1),N.a=c,N.e=v,N.ea=$,N},P._drawSingleOrbitElements=function(e,t,r,n,a,l,f){var c;switch(r){case 9:U.get_active().get_solarSystemScale()>1?c=U.get_active().get_solarSystemScale()/2:c=1;break;case 10:case 11:case 12:case 13:c=U.get_active().get_solarSystemScale();break;default:c=1;break}var d=I.negate(n);r===9?d.add(P._planet3dLocations[19]):(r===10||r===11||r===12||r===13)&&d.add(P._planet3dLocations[4]);var m=I.subtractVectors(l,n),v=Z.multiplyMatrix(Z.multiplyMatrix(f.orientation,Z.translation(d)),e.get_world());Yi.drawEllipseWithPosition(e,f.a/149598e3*c,f.e,f.ea,t,v,m)},P.isPlanetInFrustum=function(e,t){var r=e.get_frustum();I.create(0,0,0);for(var n=new Ka(0,0,0,1),a=0;a<6;a++)if(r[a].dot(n)+t<0)return!1;return!0},P._drawPlanet3d=function(e,t,r){t===0?tt.minLightingBrightness=1:(tt.minLightingBrightness=.025,t===19?tt.atmosphereColor=G.fromArgb(255,65,157,217):tt.atmosphereColor=G.fromArgb(0,0,0,0));var n=e.get_world(),a=e.get_worldBase(),l=e.get_worldBaseNonRotating(),f=P.getAdjustedPlanetRadius(t);P.setupPlanetMatrix(e,t,r,!0);var c=1;if(t===5&&(c=3),P.isPlanetInFrustum(e,c)){e.get_world(),e.get_worldBase(),e.get_worldBaseNonRotating();var d=P._planet3dLocations[0].copy(),m=P._planet3dLocations[t].copy();d=n.transform(d),m=n.transform(m),e.set_world(n),e.set_worldBase(a),e.set_worldBaseNonRotating(l),P._setupMatrixForPlanetGeometry(e,t,r,!0);var v=I.subtractVectors(d,m);v.normalize(),e.set_sunPosition(v),tt.sunPosition=I.subtractVectors(P._planet3dLocations[0],m);var C=I.subtractVectors(P._planet3dLocations[t],r);C.subtract(e.cameraPosition);var T=C.length(),A=2*Math.atan(.5*(f/T))/Math.PI*180,$=0;if(A>10.5?$=0:A>3.9?$=1:A>.72?$=2:A>.05?$=3:$=4,t===19&&$<2&&U.get_active().get_solarSystemScale()*1e-5,$<4){var N=e.lighting;t===5&&e.gl==null&&(e.lighting=!1,P.drawSaturnsRings(e,!1,T),e.lighting=N),t||(e.lighting=!1),P._drawSphere(e,t),t===5&&(e.gl==null?(e.lighting=!1,P.drawSaturnsRings(e,!0,T)):(e.lighting=!1,P._drawRings(e),e.lighting=N)),e.lighting=N}else if(!t)P.drawPointPlanet(e,new I,10*P._planetDiameters[t],P.planetColors[t],!0);else if(t<9||t===19){var F=800*P._planetDiameters[t];P.drawPointPlanet(e,new I,Math.max(.05,Math.min(.1,F)),P.planetColors[t],!0)}else if(A>.002){var F=800*P._planetDiameters[t];P.drawPointPlanet(e,new I,Math.max(.05,Math.min(.1,F)),P.planetColors[t],!0)}}k._draw(e,1,!1,P.getNameFrom3dId(t),!0,!1),e.set_world(n),e.set_worldBase(a),e.set_worldBaseNonRotating(l)},P.drawSaturnsRings=function(e,t,r){if(P._ringsTriangleLists[0]==null){P._ringImage=document.createElement("img");var n=P._ringImage;n.crossOrigin="anonymous",P._ringImage.src=Nt.singleton.engineAssetUrl("saturnringsshadow.png"),P._ringsTriangleLists[0]=[],P._ringsTriangleLists[1]=[];var a=2.25,l=I.create(-a,0,-a),f=I.create(a,0,-a),c=I.create(-a,0,a),d=I.create(a,0,a);I.create(0,0,0),I.create(-a,0,0),I.create(0,0,-a),I.create(0,0,a),I.create(a,0,0);var m=6,v;v=[];var C=1024,T=1024;v.push(Ue.createPosSize(l,0,0,C,T)),v.push(Ue.createPosSize(f,1,0,C,T)),v.push(Ue.createPosSize(c,0,1,C,T)),v.push(Ue.createPosSize(d,1,1,C,T));var A=[];A.push(mi.create(0,2,1)),A.push(mi.create(2,3,1));for(var $=5;$-- >1;){for(var N=[],F=i.enumerate(A);F.moveNext();){var z=F.current;z.subDivideNoNormalize(N,v)}A=N}for(var Y=.6/(C/256),W=i.enumerate(A);W.moveNext();){var z=W.current,ee=v[z.a],ne=v[z.b],ae=v[z.c];P._ringsTriangleLists[0].push(Ct.createWithMiter(ee,ne,ae,P._ringImage,m,Y))}}if(e.gl==null){e.cameraPosition;var de=new I,se=Z.multiplyMatrix(Z._rotationY(Math.atan2(e.get_sunPosition().x,e.get_sunPosition().z)),e.get_worldBaseNonRotating()),we=Z.multiplyMatrix(se,e.get_view()),fe=Z.multiplyMatrix(we,e.get_projection()),C=e.width,T=e.height;fe.scale(I.create(C/2,-T/2,1)),fe.translate(I.create(C/2,T/2,0));for(var $e=0,ve=0;ve<2;ve++){for(var ut=i.enumerate(P._ringsTriangleLists[0]);ut.moveNext();){var z=ut.current;de=we.transform(z.a.position),$e=de.length();var ht=$e>r;t&&(ht=!ht),ht&&(z.opacity=1,z.draw(e.device,fe))}Ct.cullInside=!Ct.cullInside}}},P._drawRings=function(e){P._initRings(),tt.use(e,P._ringsVertexBuffer.vertexBuffer,null,P._ringsTexture.texture2d,1,!1,I.zero),e.gl.drawArrays(5,0,P._triangleCountRings)},P._initRings=function(){if(P._ringsVertexBuffer==null){P._ringsTexture=P.loadPlanetTexture(Nt.singleton.engineAssetUrl("saturnringsstrip.png"));var e=1.113,t=2.25;P._ringsVertexBuffer=new pa((192+1)*2),P._triangleCountRings=(192+1)*2;for(var r=P._ringsVertexBuffer.lock(),n=Math.PI*2/192,a=0,l=0;l<=192;l+=2){var f=l*n,c=(l+1)*n;r[a]=new Ue,r[a].position=I.create(Math.cos(f)*e,0,Math.sin(f)*e),r[a].tu=1,r[a].tv=0,a++,r[a]=new Ue,r[a].position=I.create(Math.cos(f)*t,0,Math.sin(f)*t),r[a].tu=0,r[a].tv=0,a++,r[a]=new Ue,r[a].position=I.create(Math.cos(c)*e,0,Math.sin(c)*e),r[a].tu=1,r[a].tv=1,a++,r[a]=new Ue,r[a].position=I.create(Math.cos(c)*t,0,Math.sin(c)*t),r[a].tu=0,r[a].tv=1,a++}P._ringsVertexBuffer.unlock()}},P.drawPointPlanet=function(e,t,r,n,a){var l=t,f=r/2;if(e.gl!=null){var c=new qr(e);c.minSize=20,c.addPoint(t.copy(),n._clone(),new ii(0,1),r/100),c.depthBuffered=!0,c.draw(e,1,!1)}else{var d=e.WVP.transform(l);if(d.z<0||!a&&I.dot(e.get_viewPoint(),l)<.55)return;var m=e.device;m.save(),m.beginPath(),m.arc(d.x,d.y,f,0,Math.PI*2,!0),m.lineWidth=1,m.fillStyle=n.toString(),m.fill(),m.globalAlpha=1,m.strokeStyle=n.toString(),m.stroke(),m.restore()}},P.getAdjustedPlanetRadius=function(e){e>P._planetDiameters.length-1&&(e=19);var t=P._planetDiameters[e],r=t/2;return e?r=r*(1+3*(U.get_active().get_solarSystemScale()-1)):r=r*(1+.3*(U.get_active().get_solarSystemScale()-1)),r},P.getPlanetRadiusInMeters=function(e){e>P._planetDiameters.length-1&&(e=19);var t=P._planetDiameters[e];return t/2*149598e3*1e3},P._drawPlanet=function(e,t,r){var n=P._planetLocations[t];if(t<14&&P._planetScales[t]<e.viewCamera.zoom/6/400){if(t<10||t<14&&P._planetScales[t]>e.viewCamera.zoom/6/6400){var a=V.raDecTo3d(n.RA,n.dec);P.drawPointPlanet(e,a,3,P.planetColors[t],!1)}return}var l=null;if(t<10||t===18)l=P._planetTextures[t];else if(t<14)P._planetLocations[t].eclipsed?l=P._planetTextures[15]:U.get_active().get_showMoonsAsPointSource()?l=P._planetTextures[14]:l=P._planetTextures[t];else{if(!P._planetLocations[t].shadow)return;l=P._planetTextures[15]}if(e.gl!=null){if(P._planetPoints==null){P._planetPoints=new Array(4);for(var f=0;f<4;f++)P._planetPoints[f]=new qt}var c=P._planetScales[t]/2,d=c/Math.cos(n.dec/180*Math.PI);P._planetPoints[0].position=V.raDecTo3dAu(n.RA-d/15,n.dec+c,1),P._planetPoints[0].tu=0,P._planetPoints[0].tv=1,P._planetPoints[0].color=Te.get_white(),P._planetPoints[1].position=V.raDecTo3dAu(n.RA-d/15,n.dec-c,1),P._planetPoints[1].tu=0,P._planetPoints[1].tv=0,P._planetPoints[1].color=Te.get_white(),P._planetPoints[2].position=V.raDecTo3dAu(n.RA+d/15,n.dec+c,1),P._planetPoints[2].tu=1,P._planetPoints[2].tv=1,P._planetPoints[2].color=Te.get_white(),P._planetPoints[3].position=V.raDecTo3dAu(n.RA+d/15,n.dec-c,1),P._planetPoints[3].tu=1,P._planetPoints[3].tv=0,P._planetPoints[3].color=Te.get_white(),P._planetSprite.draw(e,P._planetPoints,4,l,!0,1)}else{var m=V.raDecTo3d(n.RA,n.dec),v=P._planetScales[t]/(e.get_fovScale()/3600)/2,C=e.WVP.transform(m);if(C.z<0||I.dot(e.get_viewPoint(),m)<.55)return;var T=e.device;T.save(),T.globalAlpha=r,T.beginPath(),T.arc(C.x,C.y,v,0,Math.PI*2,!0),T.lineWidth=0,T.closePath(),T.clip(),T.drawImage(l.imageElement,C.x-v,C.y-v,v*2,v*2),T.globalAlpha=1,T.restore()}},P._drawPlanetPhase=function(e,t,r,n,a){},P._geocentricElongation=function(e,t,r,n){return e=V.degreesToRadians(e*15),r=V.degreesToRadians(r*15),t=V.degreesToRadians(t),n=V.degreesToRadians(n),V.radiansToDegrees(Math.acos(Math.sin(n)*Math.sin(t)+Math.cos(n)*Math.cos(t)*Math.cos(r-e)))},P._phaseAngle=function(e,t,r){return e=V.degreesToRadians(e),V.mapTo0To360Range(V.radiansToDegrees(Math.atan2(r*Math.sin(e),t-r*Math.cos(e))))},P._positionAngle=function(e,t,r,n){return e=V.hoursToRadians(e),r=V.hoursToRadians(r),t=V.degreesToRadians(t),n=V.degreesToRadians(n),V.mapTo0To360Range(V.radiansToDegrees(Math.atan2(Math.cos(t)*Math.sin(e-r),Math.sin(t)*Math.cos(n)-Math.cos(t)*Math.sin(n)*Math.cos(e-r))))},P._drawSphere=function(e,t){var r=P.getImageSetNameNameFrom3dId(t),n=q.singleton.getImagesetByName(r);if(n==null&&(n=q.singleton.getImagesetByName("Bing Maps Aerial")),n!=null){e.drawImageSet(n,100);return}};var Cc={};function Zn(){this.specularSharpness=0,this.opacity=0,this.isDefault=!1}var Sc={};function Fs(){this.aborted=!1}var Mc={};function Zt(){this.height=0,this.width=0,this.lighting=!1,this._viewPoint=new I,this.space=!1,this._fovAngle=0,this._fovScale=0,this._nominalRadius=6378137,this._mainTexture=null,this.viewMover=null,this.viewCamera=new fi,this.targetCamera=new fi,this.alt=0,this.az=0,this.targetAlt=0,this.targetAz=0,this._backgroundImageset=null,this._foregroundImageset=null,this._activeCatalogHipsImagesets=[],this._targetHeight=1,this.targetAltitude=0,this._galactic=!0,this._galacticMatrix=Z.create(-.4838350155,-.0548755604,-.8734370902,0,.7469822445,.4941094279,-.44482963,0,.4559837762,-.867666149,-.1980763734,0,0,0,0,1),this._firstTimeInit=!1,this._useSolarSystemTilt=!0,this.customTrackingParams=new fi,this._cameraOffset=new I,this._fovLocal=Math.PI/4,this.perspectiveFov=Math.PI/4,this.nearPlane=0,this._frustumDirty=!0,this._frustum=new Array(6),this._ambientLightColor=Te.get_black(),this._hemiLightColor=Te.get_black(),this._hemiLightUp=new I,this._sunlightColor=Te.get_white(),this._sunPosition=new I,this._reflectedLightColor=Te.get_black(),this._reflectedLightPosition=new I,this._occludingPlanetRadius=0,this._occludingPlanetPosition=new I,this._lightingStateDirty=!0,this._twoSidedLighting=!1,this.cameraPosition=new I,this._skyColor="Blue";for(var e=0;e<6;e++)this._frustum[e]=new fo(0,0,0,0)}Zt.create=function(e){var t=new Zt;return t.device=e,t.viewCamera.zoom=700,t.viewCamera.target=65536,t},Zt.getTilesYForLevel=function(e,t){var r=1;switch(e.get_projection()){case 0:r=Math.pow(2,t);break;case 1:r=Math.pow(2,t)*(180/e.get_baseTileDegrees());break;case 2:r=Math.pow(2,t);break;case 4:r=1;break;case 7:r=4*Math.pow(2,t);break;default:r=Math.pow(2,t);break}return r===Number.POSITIVE_INFINITY&&(r=1),r},Zt.getTilesXForLevel=function(e,t){var r=1;switch(e.get_projection()){case 6:case 3:r=Math.pow(2,t);break;case 0:r=Math.pow(2,t)*i.truncate(e.get_baseTileDegrees()/360);break;case 1:r=Math.pow(2,t)*i.truncate(360/e.get_baseTileDegrees());break;case 2:e.get_widthFactor()===1?r=Math.pow(2,t)*2:r=Math.pow(2,t);break;case 5:r=1;break;case 4:r=1;break;case 7:r=Math.pow(2,t)*3;break;default:r=Math.pow(2,t)*2;break}return r};var Tc={save:function(){this.gl!=null||this.device.save()},restore:function(){this.gl!=null||this.device.restore()},clear:function(){this.gl!=null?(this.gl.viewport(0,0,i.truncate(this.width),i.truncate(this.height)),this.gl.clear(16640)):(this.device.save(),this.device.fillStyle="black",this.device.fillRect(0,0,this.width,this.height),this.device.restore())},get_viewPoint:function(){return this._viewPoint},get_RA:function(){return((180-(this.viewCamera.lng-180))/15%24+48)%24},rAtoViewLng:function(e){return 180-e/24*360-180},get_dec:function(){return this.viewCamera.lat},get_fovAngle:function(){return this._fovAngle},get_fovScale:function(){return this._fovScale},set_fovScale:function(e){return this._fovScale=e,e},get_view:function(){return this._view},set_view:function(e){return this._view=e,this._frustumDirty=!0,e},get_viewBase:function(){return this._viewBase},set_viewBase:function(e){return this._viewBase=e,e},get_projection:function(){return this._projection},set_projection:function(e){return this._projection=e,this._frustumDirty=!0,e},get_world:function(){return this._world},set_world:function(e){return this._world=e,this._frustumDirty=!0,e},_getScreenTexture:function(){var e=null;return e},get_worldBase:function(){return this._worldBase},set_worldBase:function(e){return this._worldBase=e,e},get_worldBaseNonRotating:function(){return this._worldBaseNonRotating},set_worldBaseNonRotating:function(e){return this._worldBaseNonRotating=e,e},get_nominalRadius:function(){return this._nominalRadius},set_nominalRadius:function(e){return this._nominalRadius=e,e},get_mainTexture:function(){return this._mainTexture},set_mainTexture:function(e){return e!=null&&(this._mainTexture=e,this.gl.bindTexture(3553,this._mainTexture.texture2d)),e},onTarget:function(e){return Math.abs(this.viewCamera.lat-this.targetCamera.lat)<1e-12&&Math.abs(this.viewCamera.lng-this.targetCamera.lng)<1e-12&&Math.abs(this.viewCamera.zoom-this.targetCamera.zoom)<1e-12&&this.viewMover==null},setTexture:function(e){},get_backgroundImageset:function(){return this._backgroundImageset},set_backgroundImageset:function(e){var t=this._backgroundImageset!=null&&e!=null&&this._backgroundImageset.get_dataSetType()!==e.get_dataSetType();return this._backgroundImageset=e,t&&(q.singleton._freezeView(),q.singleton.clampZooms(this)),e},get_foregroundImageset:function(){return this._foregroundImageset},set_foregroundImageset:function(e){return this._foregroundImageset=e,e},get_catalogHipsImagesets:function(){return this._activeCatalogHipsImagesets},getCatalogHipsDataInView:function(e,t,r){var n=this,a=new js,l=function(){a.useHeadersFromVoTable(e.get_hipsProperties().get_catalogColumnInfo()),n._tryGetAllDataInView(e,t,a,r,0)};e.get_hipsProperties()==null?(e.set_hipsProperties(new ja(e)),e.get_hipsProperties().setDownloadCompleteListener(l)):e.get_hipsProperties()!=null&&e.get_hipsProperties().get_downloadComplete()?l():e.get_hipsProperties().setDownloadCompleteListener(l)},_tryGetAllDataInView:function(e,t,r,n,a){for(var l=this,f=Zt.getTilesXForLevel(e,e.get_baseLevel()),c=Zt.getTilesYForLevel(e,e.get_baseLevel()),d=!1,m=0;m<f;m++)for(var v=0;v<c;v++){var C=Oe.getTile(e.get_baseLevel(),m,v,e,null);if(C!=null){var T=C.getDataInView(this,t,r);d=d||!T}else d=!0}if(d){var A=r.get__table().rows.length;if((A>1e4||a>100*60*5)&&t){console.log("Too Many results - Aborting"),console.log(A);var $=new Fs;$.aborted=!0,$.table=r.getTableDataInView(),n($),r.cleanUp()}else setTimeout(function(){l._tryGetAllDataInView(e,t,r,n,a)},10),a%200||(console.log("Waiting for more tiles to load"),console.log(A)),a++}else{var A=r.get__table().rows.length;console.log("Done!"),console.log(A);var $=new Fs;$.aborted=!1,$.table=r.getTableDataInView(),n($),r.cleanUp()}},addCatalogHips:function(e,t){this._activeCatalogHipsImagesets.indexOf(e)>=0||this._activeCatalogHipsImagesets.push(e),e.get_hipsProperties()==null?(e.set_hipsProperties(new ja(e)),e.get_hipsProperties().setDownloadCompleteListener(t)):e.get_hipsProperties()!=null&&e.get_hipsProperties().get_downloadComplete()&&(k.addSpreadsheetLayer(e.get_hipsProperties().get_catalogSpreadSheetLayer(),"Sky"),t!=null&&t())},removeCatalogHips:function(e){i.remove(this._activeCatalogHipsImagesets,e),e.get_hipsProperties()!=null&&k.deleteLayerByID(e.get_hipsProperties().get_catalogSpreadSheetLayer().id,!0,!0)},getCatalogHipsByName:function(e){for(var t=i.enumerate(this._activeCatalogHipsImagesets);t.moveNext();){var r=t.current;if(r.get_name()===e)return r}return null},getAltitudeForLatLongForPlanet:function(e,t,r){var n=q.singleton.getImagesetByName(P.getNameFrom3dId(e));if(n==null)return 0;for(var a=Zt.getTilesXForLevel(n,n.get_baseLevel()),l=Zt.getTilesYForLevel(n,n.get_baseLevel()),f=0;f<a;f++)for(var c=0;c<l;c++){var d=Oe.getTile(n.get_baseLevel(),f,c,n,null);if(d!=null&&d.isPointInTile(t,r))return d.getSurfacePointAltitude(t,r,!0)}return 0},getEarthAltitude:function(e,t,r){if(q.singleton.get_solarSystemMode()){var n=V.geoTo3dDouble(e,t+90),a=P.earthMatrixInv;n=I._transformCoordinate(n,a),n.normalize();var l=V.cartesianToLatLng(n);return this.getAltitudeForLatLongForPlanet(this.viewCamera.target,l.y,l.x)}else return this.get_backgroundImageset().get_dataSetType()?0:r?this.getMetersAltitudeForLatLong(e,t):this.getScaledAltitudeForLatLong(e,t)},drawImageSet:function(e,t){for(var r=Zt.getTilesXForLevel(e,e.get_baseLevel()),n=Zt.getTilesYForLevel(e,e.get_baseLevel()),a=0;a<r;a++)for(var l=0;l<n;l++){var f=Oe.getTile(e.get_baseLevel(),a,l,e,null);f!=null&&f.draw3D(this,t)}},_getTileAtLatLong:function(e,t){var r=this.get_backgroundImageset();if(r==null)return null;for(var n=Zt.getTilesXForLevel(r,r.get_baseLevel()),a=Zt.getTilesYForLevel(r,r.get_baseLevel()),l=0;l<n;l++)for(var f=0;f<a;f++){var c=Oe.getTile(r.get_baseLevel(),l,f,r,null);if(c!=null&&c.isPointInTile(e,t))return c}return null},getScaledAltitudeForLatLong:function(e,t){var r=this._getTileAtLatLong(e,t);return r!=null?r.getSurfacePointAltitude(e,t,!1):0},getMetersAltitudeForLatLong:function(e,t){var r=this._getTileAtLatLong(e,t);return r!=null?r.getSurfacePointAltitude(e,t,!0):0},_setupMatricesLand3d:function(){this.lighting=!1,this.space=!1,Ct.cullInside=!1;var e=Z._rotationY((this.viewCamera.lng-90)/180*Math.PI);e._multiply(Z._rotationX(-this.viewCamera.lat/180*Math.PI)),this.set_world(e),this.set_worldBase(e.clone()),this._viewPoint=V.geoTo3d(this.viewCamera.lat,this.viewCamera.lng);var t=0;if(this._backgroundImageset.get_isMandelbrot()?t=4*(this.viewCamera.zoom/180)+1e-41:t=4*(this.viewCamera.zoom/180)+1e-6,this._fovAngle=this.viewCamera.zoom/343.774/Math.PI*180,this._fovScale=this._fovAngle/this.height*3600,this.gl!=null){this.targetAltitude=this.getScaledAltitudeForLatLong(this.viewCamera.lat,this.viewCamera.lng);var r=1+this.targetAltitude;this.targetAltitude*=this.get_nominalRadius(),this._targetHeight<r?this._targetHeight=(this._targetHeight*2+r)/3:this._targetHeight=(this._targetHeight*9+r)/10}else this.targetAltitude=0,this._targetHeight=1;var n=this.viewCamera.rotation;this.cameraPosition=I.create(Math.sin(n)*Math.sin(this.viewCamera.angle)*t,Math.cos(n)*Math.sin(this.viewCamera.angle)*t,-this._targetHeight-Math.cos(this.viewCamera.angle)*t);var a=I.create(0,0,-this._targetHeight);this.cameraPosition.length();var l=I.create(Math.sin(n)*Math.cos(this.viewCamera.angle),Math.cos(n)*Math.cos(this.viewCamera.angle),Math.sin(this.viewCamera.angle));this.set_view(Z.lookAtLH(this.cameraPosition,a,l)),this.set_viewBase(this.get_view());var f=Math.sqrt((t+1)*(t+1)-1);f=Math.max(.5,f);var c=t*.05;c=t*.05,this.set_projection(Z.perspectiveFovLH(Math.PI/4,this.width/this.height,c,f)),this._setMatrixes(),this.makeFrustum()},setupMatricesSpace3d:function(e,t){this.lighting=!1,this._firstTimeInit||(this._galacticMatrix=Z.get_identity(),this._galacticMatrix._multiply(Z._rotationY(-(270-17.7603329867975*15)/180*Math.PI)),this._galacticMatrix._multiply(Z._rotationX(28.9361739586894/180*Math.PI)),this._galacticMatrix._multiply(Z._rotationZ((31.422052860102-90)/180*Math.PI)),this._firstTimeInit=!0),this.space=!0,Ct.cullInside=!0;var r=Z.get_identity();if(U.get_active().get_galacticMode()){r._multiply(this._galacticMatrix),r._multiply(Z._rotationY(this.az/180*Math.PI)),r._multiply(Z._rotationX(-this.alt/180*Math.PI));var n=V.galactictoJ2000(this.az,this.alt);this._viewPoint=V.raDecTo3dAu(n[0]/15,n[1],1),this.targetCamera.lng=this.rAtoViewLng(n[0]/15),this.targetCamera.lat=n[1],this.viewCamera.lat=this.targetCamera.lat,this.viewCamera.lng=this.targetCamera.lng}else r._multiply(Z._rotationY(-(this.viewCamera.lng-90)/180*Math.PI)),r._multiply(Z._rotationX(-this.viewCamera.lat/180*Math.PI)),this._viewPoint=V.raDecTo3dAu(this.get_RA(),this.get_dec(),1);var a=this.viewCamera.rotation;if(this._fovAngle=this.viewCamera.zoom/343.774/Math.PI*180,this._fovScale=this._fovAngle/t*3600,U.get_active().get_localHorizonMode()&&this._backgroundImageset.get_dataSetType()===2){var l=new V(0,0);l.set_az(0),l.set_alt(0);var f=V.horizonToEquitorial(l,K.get_location(),K.get_now()),c=-((f.get_RA()-6)/24*(Math.PI*2)),d=-(f.get_dec()/360*(Math.PI*2));V.formatDMS(f.get_RA()),r=Z._rotationY(-c-Math.PI),r._multiply(Z._rotationX(d)),K.get_location().get_lat()<0?(r._multiply(Z._rotationY(this.az/180*Math.PI)),r._multiply(Z._rotationX(this.alt/180*Math.PI)),a+=Math.PI):(r._multiply(Z._rotationY(-this.az/180*Math.PI)),r._multiply(Z._rotationX(-this.alt/180*Math.PI)));var m=V.horizonToEquitorial(V.fromLatLng(this.alt,this.az),K.get_location(),K.get_now());this.viewCamera.lat=this.targetCamera.lat=m.get_dec(),this.viewCamera.lng=this.targetCamera.lng=this.rAtoViewLng(m.get_RA())}this.set_world(r),this.set_worldBase(r.clone());var v=this.viewCamera.zoom;this.cameraPosition=I.create(0,0,0),this.set_view(Z.lookAtLH(this.cameraPosition,I.create(0,0,-1),I.create(Math.sin(a),Math.cos(a),0))),this.set_viewBase(this.get_view().clone()),this.nearPlane=.1,this.set_projection(Z.perspectiveFovLH(v/343.774,e/t,.1,-2)),this._setMatrixes(),this.makeFrustum()},get_solarSystemTrack:function(){return this.viewCamera.target},set_solarSystemTrack:function(e){return this.viewCamera.target=e,e},get_solarSystemCameraDistance:function(){return 4*(this.viewCamera.zoom/9)+1e-6},get_sandboxMode:function(){return this._backgroundImageset==null?!1:this._backgroundImageset.get_dataSetType()===5},get_trackingFrame:function(){return this.viewCamera.targetReferenceFrame},set_trackingFrame:function(e){return this.viewCamera.targetReferenceFrame=e,e},get_fovLocal:function(){return this._fovLocal},set_fovLocal:function(e){return this._fovLocal=e,e},setupMatricesOverlays:function(){this.set_world(Z.get_identity()),Z.get_identity();var e=I.create(0,0,0),t=I.create(0,0,1),r=I.create(0,1,0),n;n=Z.lookAtLH(e,t,r),n._multiply(Z._scaling(1,-1,1)),this.set_view(n);var a=1e4;this.nearPlane=.1,this.set_projection(Z.perspectiveFovLH(this._fovLocal,this.width/this.height,this.nearPlane,a))},setupMatricesSolarSystem:function(e){this.lighting=U.get_active().get_solarSystemLighting(),this.space=!1,this.get_solarSystemTrack()!==20&&this.get_solarSystemTrack()!==65536&&(this.viewCamera.viewTarget=P.getPlanetTargetPoint(this.get_solarSystemTrack(),this.viewCamera.lat,this.viewCamera.lng,0)),Ct.cullInside=!1;var t=this.get_solarSystemCameraDistance(),r=Z.get_identity();if(t-=1e-6,this.get_solarSystemTrack()===20&&!i.emptyString(this.get_trackingFrame())){var n=k._getFrameTarget(this,this.get_trackingFrame());this.viewCamera.viewTarget=n.target,r=n.matrix}else i.emptyString(this.get_trackingFrame())||this.set_trackingFrame("");this.viewCamera.viewTarget,this.viewCamera.zoom*20;var a=new I,l=Z.get_identity();l._multiply(Z._rotationX(-this.viewCamera.lat/180*Math.PI)),l._multiply(Z._rotationY(-this.viewCamera.lng/180*Math.PI));var f=Z.get_identity(),c;if(this._useSolarSystemTilt&&!this.get_sandboxMode()){var d=this.viewCamera.angle;if(t>8e-4)d=0;else if(t>1e-5){var m=Math.min(1.903089987,ye.log10(t)+5)/1.903089987;d=d*Math.max(0,1-m)}this.cameraPosition=I.create(Math.sin(-this.viewCamera.rotation)*Math.sin(d)*t,Math.cos(-this.viewCamera.rotation)*Math.sin(d)*t,Math.cos(d)*t),c=I.create(Math.sin(-this.viewCamera.rotation),Math.cos(-this.viewCamera.rotation),1e-5)}else this.cameraPosition=I.create(0,0,t),c=I.create(Math.sin(-this.viewCamera.rotation),Math.cos(-this.viewCamera.rotation),1e-4);this.cameraPosition=l.transform(this.cameraPosition),this._cameraOffset=this.cameraPosition.copy();var v=r.clone();v.invert(),this._cameraOffset=I._transformCoordinate(this._cameraOffset,v),c=l.transform(c),this.set_world(Z.get_identity()),this.set_worldBase(Z.get_identity()),this.set_worldBaseNonRotating(Z.get_identity()),this.set_view(Z.multiplyMatrix(Z.multiplyMatrix(r,Z.lookAtLH(this.cameraPosition,a,c)),f)),this.set_viewBase(this.get_view().clone());var C=I.subtractVectors(a,this.cameraPosition);C.normalize(),C=I._transformCoordinate(C,r),C.normalize(),this._viewPoint=C;var T=P.getAdjustedPlanetRadius(this.get_solarSystemTrack());t<T*2&&!e?(this.nearPlane=t*.03,this.nearPlane=Math.max(this.nearPlane,1e-11),Zt.back=1900):e?(Zt.back=900056,Zt.back=t>900056?t*3:900056,this.nearPlane=3e-5):(Zt.back=t>1900?t+200:1900,U.get_active().get_solarSystemScale()<13?this.nearPlane=Math.min(t*.03,.01):this.nearPlane=.001),this.set_projection(Z.perspectiveFovLH(this._fovLocal,this.width/this.height,this.nearPlane,Zt.back)),this.perspectiveFov=this._fovLocal,this._fovAngle=this.viewCamera.zoom/343.774/Math.PI*180,this._fovScale=this._fovAngle/this.height*3600,this._setMatrixes(),this.makeFrustum()},_setMatrixes:function(){},get_frustum:function(){return this._frustum},get_ambientLightColor:function(){return this._ambientLightColor},set_ambientLightColor:function(e){return this._ambientLightColor=e,this._lightingStateDirty=!0,e},get_hemisphereLightColor:function(){return this._hemiLightColor},set_hemisphereLightColor:function(e){return this._hemiLightColor=e,this._lightingStateDirty=!0,e},get_hemisphereLightUp:function(){return this._hemiLightUp},set_hemisphereLightUp:function(e){return this._hemiLightUp=e,this._lightingStateDirty=!0,e},get_sunlightColor:function(){return this._sunlightColor},set_sunlightColor:function(e){return this._sunlightColor=e,this._lightingStateDirty=!0,e},get_sunPosition:function(){return this._sunPosition},set_sunPosition:function(e){return this._sunPosition=e,this._lightingStateDirty=!0,e},get_reflectedLightColor:function(){return this._reflectedLightColor},set_reflectedLightColor:function(e){return this._reflectedLightColor!==e&&(this._reflectedLightColor=e,this._lightingStateDirty=!0),e},get_reflectedLightPosition:function(){return this._reflectedLightPosition},set_reflectedLightPosition:function(e){return this._reflectedLightPosition=e,this._lightingStateDirty=!0,e},get_occludingPlanetRadius:function(){return this._occludingPlanetRadius},set_occludingPlanetRadius:function(e){return this._occludingPlanetRadius=e,e},get_occludingPlanetPosition:function(){return this._occludingPlanetPosition},set_occludingPlanetPosition:function(e){return this._occludingPlanetPosition=e,e},get_twoSidedLighting:function(){return this._twoSidedLighting},set_twoSidedLighting:function(e){return e!==this._twoSidedLighting&&(this._twoSidedLighting=e,this._lightingStateDirty=!0),e},makeFrustum:function(){this.WV=Z.multiplyMatrix(this.get_world(),this.get_view());var e=Z.multiplyMatrix(this.WV,this.get_projection());this.WVP=e.clone();var t=this.get_world().clone();t.invert(),this._frustum[0].a=e.get_m14()+e.get_m11(),this._frustum[0].b=e.get_m24()+e.get_m21(),this._frustum[0].c=e.get_m34()+e.get_m31(),this._frustum[0].d=e.get_m44()+e.get_m41(),this._frustum[1].a=e.get_m14()-e.get_m11(),this._frustum[1].b=e.get_m24()-e.get_m21(),this._frustum[1].c=e.get_m34()-e.get_m31(),this._frustum[1].d=e.get_m44()-e.get_m41(),this._frustum[2].a=e.get_m14()-e.get_m12(),this._frustum[2].b=e.get_m24()-e.get_m22(),this._frustum[2].c=e.get_m34()-e.get_m32(),this._frustum[2].d=e.get_m44()-e.get_m42(),this._frustum[3].a=e.get_m14()+e.get_m12(),this._frustum[3].b=e.get_m24()+e.get_m22(),this._frustum[3].c=e.get_m34()+e.get_m32(),this._frustum[3].d=e.get_m44()+e.get_m42(),this._frustum[4].a=e.get_m13(),this._frustum[4].b=e.get_m23(),this._frustum[4].c=e.get_m33(),this._frustum[4].d=e.get_m43(),this._frustum[5].a=e.get_m14()-e.get_m13(),this._frustum[5].b=e.get_m24()-e.get_m23(),this._frustum[5].c=e.get_m34()-e.get_m33(),this._frustum[5].d=e.get_m44()-e.get_m43();for(var r=0;r<6;r++)this._frustum[r].normalize();this._frustumDirty=!1,this.WVP.scale(I.create(this.width/2,-this.height/2,1)),this.WVP.translate(I.create(this.width/2,this.height/2,0)),this._setMatrixes()},_initGL:function(){this.gl!=null&&(this.gl.getExtension("OES_element_index_uint"),O.uvMultiple=1,O.demEnabled=!0,tt.init(this))},freezeView:function(){this.targetAlt=this.alt,this.targetAz=this.az,this.targetCamera=this.viewCamera.copy()},_setVertexBuffer:function(e){},_setIndexBuffer:function(e){},setMaterial:function(e,t,r,n,a){this.set_mainTexture(t)},preDraw:function(){}};function Ct(){this.a=new Ue,this.b=new Ue,this.c=new Ue,this.normal=new I,this.opacity=1,this.expansionInPixels=.6,this.tileLevel=0,this._ta=new I,this._tb=new I,this._tc=new I,this._expandedS0=new xe,this._expandedS1=new xe,this._expandedS2=new xe,this.lighting=1}Ct.create=function(e,t,r,n,a){var l=new Ct;return l.a=e.copy(),l.b=t.copy(),l.c=r.copy(),l._texture=n,l.tileLevel=a,l.makeNormal(),l},Ct.createWithMiter=function(e,t,r,n,a,l){var f=new Ct;return f.expansionInPixels=l,f.a=e.copy(),f.b=t.copy(),f.c=r.copy(),f._texture=n,f.tileLevel=a,f.makeNormal(),f},Ct._getMiterPoint=function(e,t,r,n){var a=xe.subtract(t,e),l=xe.subtract(r,e);a.normalize(),l.normalize();var f=xe.create(a.x+l.x,a.y+l.y);f.normalize();var c=xe.create(a.x-l.x,a.y-l.y),d=c.get_length()/2,m=Math.min(2,n/d);return f.extend(m),xe.create(e.x-f.x,e.y-f.y)},Ct._miterPoint=function(e,t,r,n,a,l,f){var c=r-e,d=n-t,m=a-e,v=l-t,C=Math.sqrt(c*c+d*d);C&&(c/=C,d/=C),C=Math.sqrt(m*m+v*v),C&&(m/=C,v/=C);var T=c+m,A=d+v;C=Math.sqrt(T*T+A*A),C&&(T/=C,A/=C);var $=c-m,N=d-v;C=Math.sqrt($*$+N*N);var F=C/2,z=Math.min(2,f/F);return T*=z,A*=z,xe.create(e-T,t-A)},Ct._miterPointOut=function(e,t,r,n,a,l,f,c){var d=n-t,m=a-r,v=l-t,C=f-r,T=Math.sqrt(d*d+m*m);T&&(d/=T,m/=T),T=Math.sqrt(v*v+C*C),T&&(v/=T,C/=T);var A=d+v,$=m+C;T=Math.sqrt(A*A+$*$),T&&(A/=T,$/=T);var N=d-v,F=m-C;T=Math.sqrt(N*N+F*F);var z=T/2,Y=Math.min(2,c/z);A*=Y,$*=Y,e.x=t-A,e.y=r-$};var xc={makeNormal:function(){var e=this.a.position.copy(),t=this.b.position.copy(),r=this.c.position.copy();e.normalize(),t.normalize(),r.normalize();var n=e.x+t.x+r.x,a=e.y+t.y+r.y,l=e.z+t.z+r.z;this.normal=I.create(n/3,a/3,l/3),this.normal.normalize()},_checkBackface:function(){var e=I.subtractVectors(this._ta,this._tb),t=I.subtractVectors(this._ta,this._tc),r=I.cross(e,t);return r.normalize(),r.z>=0},draw:function(e,t){if(e!=null){if(t._transformTo(this.a.position,this._ta),t._transformTo(this.b.position,this._tb),t._transformTo(this.c.position,this._tc),this._checkBackface()===Ct.cullInside){Ct.trianglesCulled++;return}this._drawTriangle(e,this._texture,this._ta.x,this._ta.y,this._tb.x,this._tb.y,this._tc.x,this._tc.y,this.a.tu,this.a.tv,this.b.tu,this.b.tv,this.c.tu,this.c.tv)}},_drawTriangle:function(e,t,r,n,a,l,f,c,d,m,v,C,T,A){if(!this.intersects(0,Ct.width,0,Ct.height,r,n,a,l,f,c))return!1;Ct._miterPointOut(this._expandedS0,r,n,a,l,f,c,this.expansionInPixels),Ct._miterPointOut(this._expandedS1,a,l,r,n,f,c,this.expansionInPixels),Ct._miterPointOut(this._expandedS2,f,c,a,l,r,n,this.expansionInPixels),r=this._expandedS0.x,n=this._expandedS0.y,a=this._expandedS1.x,l=this._expandedS1.y,f=this._expandedS2.x,c=this._expandedS2.y,e.save(),Ct.renderingOn&&(e.beginPath(),e.moveTo(r,n),e.lineTo(a,l),e.lineTo(f,c),e.closePath(),e.clip());var $=d*(A-C)-v*A+T*C+(v-T)*m,N=-(m*(f-a)-C*f+A*a+(C-A)*r)/$,F=(C*c+m*(l-c)-A*l+(A-C)*n)/$,z=(d*(f-a)-v*f+T*a+(v-T)*r)/$,Y=-(v*c+d*(l-c)-T*l+(T-v)*n)/$,W=(d*(A*a-C*f)+m*(v*f-T*a)+(T*C-v*A)*r)/$,ee=(d*(A*l-C*c)+m*(v*c-T*l)+(T*C-v*A)*n)/$;return e.transform(N,F,z,Y,W,ee),Ct.renderingOn&&(e.globalAlpha=this.opacity,this.lighting<1&&(e.globalAlpha=1,e.fillStyle="Black",e.fillRect(0,0,Ct.width,Ct.height),e.globalAlpha=this.lighting*this.opacity),e.drawImage(t,0,0)),e.restore(),!0},intersects:function(e,t,r,n,a,l,f,c,d,m){if(a>e&&a<t&&l>r&&l<n||f>e&&f<t&&c>r&&c<n||d>e&&d<t&&m>r&&m<n)return!0;var v=Ct.height*4;return this.tileLevel<4&&(Math.abs(a-f)>v||Math.abs(l-c)>v||Math.abs(d-f)>v||Math.abs(m-c)>v||Math.abs(a-d)>v||Math.abs(l-m)>v)?!1:this.lineRectangleIntersect(e,t,r,n,a,l,f,c)||this.lineRectangleIntersect(e,t,r,n,f,c,d,m)||this.lineRectangleIntersect(e,t,r,n,d,m,a,l)},lineRectangleIntersect:function(e,t,r,n,a,l,f,c){var d,m,v,C,T,A;T=(c-l)/(f-a),A=l-T*a,T>0?(d=T*e+A,m=T*t+A):(d=T*t+A,m=T*e+A),l<c?(v=l,C=c):(v=c,C=l);var $,N;return $=d>v?d:v,N=m<C?m:C,$<N&&!(N<r||$>n)}};function on(){this._missedReady=!1,this.hideTourFeedback=!1,this._smoothAnimation=!1,this._showCaptions=!0}on._containsFitsLikeExtentsion=function(e){var t=e.toLowerCase();return i.endsWith(t,"fits")||i.endsWith(t,"ftz")||i.endsWith(t,"fit")||i.endsWith(t,"fts")},on._addImageSet=function(e,t,r,n){i.whitespace(e)&&(e=k.getNextImageSetName());var a=k.addImageSetLayerCallback(n,e,r);if(t){var l=n._guessZoomSetting(q.singleton.renderContext.viewCamera.zoom);q.singleton.gotoRADecZoom(n.get_viewCenterX()/15,n.get_viewCenterY(),l,!1,null)}return a},on._addFitsLayer=function(e,t,r,n){i.whitespace(t)&&(t=k.getNextFitsName());var a=new Hi,l=new Mi,f=function(c){if(!c.errored){if(i.truncate(c.get_sizeX()),i.truncate(c.get_sizeY()),l.setInitialParameters(c.get_description(),c.get_filename(),2,3,5,ye.getHashCode(c.get_filename()),0,0,c.get_scaleY(),".fits",c.get_scaleX()>0,"",c.get_centerX(),c.get_centerY(),c.get_rotation(),!1,"",!1,!1,1,c.get_referenceX(),c.get_referenceY(),c.get_copyright(),c.get_creditsUrl(),"","",0,""),l.set_wcsImage(c),a.set_imageSet(l),k.addFitsImageSetLayer(a,t),r){var d=l._guessZoomSetting(q.singleton.renderContext.viewCamera.zoom);q.singleton.gotoRADecZoom(c.get_viewCenterX()/15,c.get_viewCenterY(),d,!1,null)}n!=null&&n(a)}};return i.whitespace(t)&&(t=k.getNextFitsName()),Zt.useGlVersion2?new nr(l,e,null,f):new Wr(l,e,null,f),a};var Lc={add_ready:function(e){this.__ready=i.bindAdd(this.__ready,e)},remove_ready:function(e){this.__ready=i.bindSub(this.__ready,e)},_fireReady:function(){this.__ready!=null?this.__ready(this,new i.EventArgs):this._missedReady=!0},add_collectionLoaded:function(e){this.__collectionLoaded=i.bindAdd(this.__collectionLoaded,e)},remove_collectionLoaded:function(e){this.__collectionLoaded=i.bindSub(this.__collectionLoaded,e)},_fireCollectionLoaded:function(e){this.__collectionLoaded!=null&&this.__collectionLoaded(this,new jo(e))},add_colorPickerDisplay:function(e){this.__colorPickerDisplay=i.bindAdd(this.__colorPickerDisplay,e)},remove_colorPickerDisplay:function(e){this.__colorPickerDisplay=i.bindSub(this.__colorPickerDisplay,e)},add_voTableDisplay:function(e){this.__voTableDisplay=i.bindAdd(this.__voTableDisplay,e)},remove_voTableDisplay:function(e){this.__voTableDisplay=i.bindSub(this.__voTableDisplay,e)},add_refreshLayerManager:function(e){this.__refreshLayerManager=i.bindAdd(this.__refreshLayerManager,e)},remove_refreshLayerManager:function(e){this.__refreshLayerManager=i.bindSub(this.__refreshLayerManager,e)},add_arrived:function(e){this.__arrived=i.bindAdd(this.__arrived,e)},remove_arrived:function(e){this.__arrived=i.bindSub(this.__arrived,e)},add_clicked:function(e){this.__clicked=i.bindAdd(this.__clicked,e)},remove_clicked:function(e){this.__clicked=i.bindSub(this.__clicked,e)},add_annotationClicked:function(e){this.__annotationClicked=i.bindAdd(this.__annotationClicked,e)},remove_annotationClicked:function(e){this.__annotationClicked=i.bindSub(this.__annotationClicked,e)},add_imageryLoaded:function(e){this.__imageryLoaded=i.bindAdd(this.__imageryLoaded,e)},remove_imageryLoaded:function(e){this.__imageryLoaded=i.bindSub(this.__imageryLoaded,e)},add_tourReady:function(e){this.__tourReady=i.bindAdd(this.__tourReady,e)},remove_tourReady:function(e){this.__tourReady=i.bindSub(this.__tourReady,e)},add_tourError:function(e){this.__tourError=i.bindAdd(this.__tourError,e)},remove_tourError:function(e){this.__tourError=i.bindSub(this.__tourError,e)},add_tourPaused:function(e){this.__tourPaused=i.bindAdd(this.__tourPaused,e)},remove_tourPaused:function(e){this.__tourPaused=i.bindSub(this.__tourPaused,e)},add_tourResumed:function(e){this.__tourResumed=i.bindAdd(this.__tourResumed,e)},remove_tourResumed:function(e){this.__tourResumed=i.bindSub(this.__tourResumed,e)},add_tourEnded:function(e){this.__tourEnded=i.bindAdd(this.__tourEnded,e)},remove_tourEnded:function(e){this.__tourEnded=i.bindSub(this.__tourEnded,e)},add_slideChanged:function(e){this.__slideChanged=i.bindAdd(this.__slideChanged,e)},remove_slideChanged:function(e){this.__slideChanged=i.bindSub(this.__slideChanged,e)},add_timeScrubberHook:function(e){this.__timeScrubberHook=i.bindAdd(this.__timeScrubberHook,e)},remove_timeScrubberHook:function(e){this.__timeScrubberHook=i.bindSub(this.__timeScrubberHook,e)},setTimeScrubberPosition:function(e){k.setTimeSliderValue(e)},setTimeSlider:function(e,t){this.__timeScrubberHook(e,t)},showColorPicker:function(e,t){this.__colorPickerDisplay!=null&&this.__colorPickerDisplay(e,t)},displayVoTableLayer:function(e){this.__voTableDisplay!=null&&this.__voTableDisplay(e,new i.EventArgs)},refreshLayerManagerNow:function(){this.__refreshLayerManager!=null&&this.__refreshLayerManager(null,new i.EventArgs)},_fireTourReady:function(){this.__tourReady!=null&&this.__tourReady(this,new i.EventArgs)},_fireTourError:function(e){this.__tourError!=null&&this.__tourError(e,new i.EventArgs)},_fireTourPaused:function(){this.__tourPaused!=null&&this.__tourPaused(this,new i.EventArgs)},_fireTourResume:function(){this.__tourResumed!=null&&this.__tourResumed(this,new i.EventArgs)},_fireTourEnded:function(){this.__tourEnded!=null&&this.__tourEnded(this,new i.EventArgs)},_fireImageryLoaded:function(){this.__imageryLoaded!=null&&this.__imageryLoaded(this,new i.EventArgs)},_fireClick:function(e,t){this.__clicked!=null&&this.__clicked(this,new Ws(e,t,q.singleton.renderContext.viewCamera.zoom))},_fireArrived:function(e,t,r){this.__arrived!=null&&this.__arrived(this,new Ws(e,t,r))},_fireAnnotationclicked:function(e,t,r){try{this.__annotationClicked!=null&&this.__annotationClicked(this,new Yo(e,t,r))}catch{}},_fireSlideChanged:function(e){try{this.__slideChanged!=null&&this.__slideChanged(this,new Xo(e))}catch{}},endInit:function(){this._missedReady&&this._fireReady()},gotoRaDecZoom:function(e,t,r,n,a){q.singleton!=null&&q.singleton.gotoRADecZoom(e/15,t,r*6,n,a)},setBackgroundImageByName:function(e){q.singleton!=null&&q.singleton.setBackgroundImageByName(e)},addVoTableLayer:function(e){return k.addVoTableLayer(e,"Vo Table")},getLayers:function(){return k.get_layerList()},setForegroundImageByName:function(e){q.singleton!=null&&(q.singleton.setForegroundImageByName(e),q.singleton.renderContext.viewCamera.opacity=100)},setForegroundOpacity:function(e){q.singleton!=null&&(q.singleton.renderContext.viewCamera.opacity=e)},addCatalogHipsByName:function(e){q.singleton!=null&&q.singleton.addCatalogHipsByName(e)},addCatalogHipsByNameWithCallback:function(e,t){q.singleton!=null&&q.singleton.addCatalogHipsByNameWithCallback(e,t)},removeCatalogHipsByName:function(e){q.singleton!=null&&q.singleton.removeCatalogHipsByName(e)},getCatalogHipsDataInView:function(e,t,r){q.singleton!=null&&q.singleton.getCatalogHipsDataInView(e,t,r)},setCutsForFits:function(e,t,r){q.singleton!=null&&q.singleton.setCutsForFits(e,t,r)},setColorMapForFits:function(e,t){q.singleton!=null&&q.singleton.setColorMapForFits(e,t)},setScaleTypeForFits:function(e,t){q.singleton!=null&&q.singleton.setScaleTypeForFits(e,t)},hideUI:function(e){},loadTour:function(e){q.singleton!=null&&q.singleton.playTour(e)},loadFits:function(e){return this.loadFitsLayer(e,"",!0,null)},loadFitsLayer:function(e,t,r,n){return this.addImageSetLayer(e,"fits",t,r,n)},addImageSetLayer:function(e,t,r,n,a){if(t!=null&&t.toLowerCase()==="fits")return on._addFitsLayer(e,r,n,a);if(t!=null&&t.toLowerCase()==="preloaded"){var l=q.singleton.getImageSetByUrl(e);if(l!=null)return on._addImageSet(r,n,a,l)}else{var l=q.singleton.getImageSetByUrl(e);if(l!=null)return on._addImageSet(r,n,a,l);if(on._containsFitsLikeExtentsion(e))return on._addFitsLayer(e,r,n,a)}return null},setImageSetLayerOrder:function(e,t){var r=k.get_layerList()[e];i.canCast(r,Hi)&&t>=0&&(i.remove(k.get_allMaps()[r.get_referenceFrame()].layers,r),k.get_allMaps()[r.get_referenceFrame()].layers.splice(t,0,r))},isUsingWebGl2:function(){return Zt.useGlVersion2},get_hideTourFeedback:function(){return this.hideTourFeedback},set_hideTourFeedback:function(e){return this.hideTourFeedback=e,e},playTour:function(){q.singleton!=null&&q.singleton.playCurrentTour()},stopTour:function(){q.singleton!=null&&q.singleton.stopCurrentTour()},loadImageCollection:function(e,t){var r=this;this._imageUrl=e,ma.getWtmlFile(e,function(){r._fireCollectionLoaded(e)},t)},_imageFileLoaded:function(){this._fireCollectionLoaded(this._imageUrl)},zoom:function(e){q.singleton!=null&&q.singleton.zoom(e)},getRA:function(){return q.singleton!=null?q.singleton.renderContext.get_RA():0},getDec:function(){return q.singleton!=null?q.singleton.renderContext.get_dec():0},createFolder:function(){var e=new vn;return e},createPolygon:function(e){var t=new Io;return t.set_fill(e),t},createPolyLine:function(e){return new Po},createCircle:function(e){var t=new Ao;return t.set_fill(e),t},addAnnotation:function(e){e!=null&&i.canCast(e,vt)&&q.singleton!=null&&q.singleton._addAnnotation(e)},removeAnnotation:function(e){e!=null&&q.singleton!=null&&q.singleton._removeAnnotation(e)},clearAnnotations:function(){q.singleton!=null&&q.singleton._clearAnnotations()},get_smoothAnimation:function(){return this._smoothAnimation},set_smoothAnimation:function(e){return this._smoothAnimation=e,e},get_showCaptions:function(){return this._showCaptions},set_showCaptions:function(e){return this._showCaptions=e,e},loadVOTable:function(e,t){},get_fov:function(){return q.singleton!=null?q.singleton.renderContext.viewCamera.zoom/6:60}};function U(){this.autoRepeatTour=!1,this._localHorizonMode=!1,this._galacticMode=!1,this._constellationBoundryColor="blue",this._constellationSelectionColor="yellow",this._constellationFigureColor="red",this._showConstellationFigures=!0,this._showConstellationBoundries=!0,this._showConstellationSelection=!0,this._showCrosshairs=!0,this._crosshairsColor="white",this._showEcliptic=!1,this._locationLat=47.717,this._locationLng=-122.0858,this._locationAltitude=100,this._showFiledOfView=!1,this._actualPlanetScale=!0,this._fovCamera=0,this._fovEyepiece=0,this._fovTelescope=0,this._showClouds=!1,this._showGrid=!1,this._showHorizon=!0,this._showHorizonPanorama=!1,this._showMoonsAsPointSource=!0,this._showSolarSystem=!0,this._solarSystemStars=!0,this._solarSystemMilkyWay=!0,this._solarSystemCosmos=!0,this._solarSystemOrbits=!0,this._solarSystemOverlays=!0,this._solarSystemLighting=!0,this._solarSystemMultiRes=!0,this._solarSystemScale=1,this._smoothPan=!0,this._showElevationModel=!0,this._showEquatorialGridText=!1,this._showGalacticGrid=!1,this._showGalacticGridText=!1,this._showEclipticGrid=!1,this._showEclipticGridText=!1,this._showEclipticOverviewText=!1,this._showAltAzGrid=!1,this._eclipticGridColor=Te.get_green(),this._galacticGridColor=Te.get_cyan(),this._altAzGridColor=Te.get_magenta(),this._precessionChartColor=Te.get_orange(),this._eclipticColor=Te.get_blue(),this._equatorialGridColor=Te.get_white(),this._showAltAzGridText=!1,this._showPrecessionChart=!1,this._showConstellationPictures=!1,this._showConstellationLabels=!1,this._constellationLabelsHeight=80,this._solarSystemCMB=!0,this._solarSystemMinorPlanets=!1,this._solarSystemPlanets=!0,this._showEarthSky=!0,this._solarSystemMinorOrbits=!1,this._constellationsEnabled="",this._constellationFiguresFilter=new Lt,this._constellationBoundariesFilter=new Lt,this._constellationNamesFilter=new Lt,this._constellationArtFilter=new Lt,this._showSkyOverlays=!0,this._showConstellations=!0,this._showSkyNode=!0,this._showSkyGrids=!0,this._showSkyOverlaysIn3d=!0,this._earthCutawayView=!1,this._showISSModel=!1,this._milkyWayModel=!1,this._minorPlanetsFilter=255,this._planetOrbitsFilter=2147483647,this._constellations=!0}U.get_current=function(){return U._active==null&&(U._active=new U),U._active},U.get_globalSettings=function(){return U._active==null&&(U._active=new U),U._active},U.get_active=function(){return U._active==null&&(U._active=new U),U.tourSettings!=null?U.tourSettings:U._active};var kc={get_constellationFigureColor:function(){return this._constellationFigureColor},set_constellationFigureColor:function(e){return this._constellationFigureColor=e,e},get_constellationBoundryColor:function(){return this._constellationBoundryColor},set_constellationBoundryColor:function(e){return this._constellationBoundryColor=e,e},get_constellationSelectionColor:function(){return this._constellationSelectionColor},set_constellationSelectionColor:function(e){return this._constellationSelectionColor=e,e},get_showCrosshairs:function(){return this._showCrosshairs},set_showCrosshairs:function(e){return this._showCrosshairs=e,e},get_smoothPan:function(){return this._smoothPan},set_smoothPan:function(e){return this._smoothPan=e,e},get_crosshairsColor:function(){return this._crosshairsColor},set_crosshairsColor:function(e){return this._crosshairsColor=e,e},get_actualPlanetScale:function(){return this._actualPlanetScale},set_actualPlanetScale:function(e){return this._actualPlanetScale=e,e},get_fovCamera:function(){return this._fovCamera},get_fovEyepiece:function(){return this._fovEyepiece},get_fovTelescope:function(){return this._fovTelescope},get_locationAltitude:function(){return this._locationAltitude},set_locationAltitude:function(e){return this._locationAltitude=e,e},get_locationLat:function(){return this._locationLat},set_locationLat:function(e){return this._locationLat=e,e},get_locationLng:function(){return this._locationLng},set_locationLng:function(e){return this._locationLng=e,e},get_showClouds:function(){return this._showClouds},get_showConstellationBoundries:function(){return this._showConstellationBoundries},set_showConstellationBoundries:function(e){return this._showConstellationBoundries=e,e},get_showConstellationFigures:function(){return this._showConstellationFigures},set_showConstellationFigures:function(e){return this._showConstellationFigures=e,e},get_showConstellationSelection:function(){return this._showConstellationSelection},set_showConstellationSelection:function(e){return this._showConstellationSelection=e,e},get_showEcliptic:function(){return this._showEcliptic},set_showEcliptic:function(e){return this._showEcliptic=e,e},get_showElevationModel:function(){return this._showElevationModel},set_showElevationModel:function(e){return this._showElevationModel=e,e},get_showFieldOfView:function(){return this._showFiledOfView},get_showGrid:function(){return this._showGrid},set_showGrid:function(e){return this._showGrid=e,e},get_showHorizon:function(){return this._showHorizon},set_showHorizon:function(e){return this._showHorizon=e,e},get_showHorizonPanorama:function(){return this._showHorizonPanorama},get_showMoonsAsPointSource:function(){return this._showMoonsAsPointSource},get_showSolarSystem:function(){return this._showSolarSystem},set_showSolarSystem:function(e){return this._showSolarSystem=e,e},get_localHorizonMode:function(){return this._localHorizonMode},set_localHorizonMode:function(e){return this._localHorizonMode=e,e},get_galacticMode:function(){return this._galacticMode},set_galacticMode:function(e){return this._galacticMode=e,e},get_solarSystemStars:function(){return this._solarSystemStars},set_solarSystemStars:function(e){return this._solarSystemStars=e,e},get_solarSystemMilkyWay:function(){return this._solarSystemMilkyWay},set_solarSystemMilkyWay:function(e){return this._solarSystemMilkyWay=e,e},get_solarSystemCosmos:function(){return this._solarSystemCosmos},set_solarSystemCosmos:function(e){return this._solarSystemCosmos=e,e},get_solarSystemOrbits:function(){return this._solarSystemOrbits},set_solarSystemOrbits:function(e){return this._solarSystemOrbits=e,e},get_solarSystemOverlays:function(){return this._solarSystemOverlays},set_solarSystemOverlays:function(e){return this._solarSystemOverlays=e,e},get_solarSystemLighting:function(){return this._solarSystemLighting},set_solarSystemLighting:function(e){return this._solarSystemLighting=e,e},get_solarSystemMultiRes:function(){return!0},set_solarSystemMultiRes:function(e){return this._solarSystemMultiRes=e,e},get_solarSystemScale:function(){return this._solarSystemScale},set_solarSystemScale:function(e){return this._solarSystemScale=e,e},get_showEquatorialGridText:function(){return this._showEquatorialGridText},set_showEquatorialGridText:function(e){return this._showEquatorialGridText=e,e},get_showGalacticGrid:function(){return this._showGalacticGrid},set_showGalacticGrid:function(e){return this._showGalacticGrid=e,e},get_showGalacticGridText:function(){return this._showGalacticGridText},set_showGalacticGridText:function(e){return this._showGalacticGridText=e,e},get_showEclipticGrid:function(){return this._showEclipticGrid},set_showEclipticGrid:function(e){return this._showEclipticGrid=e,e},get_showEclipticGridText:function(){return this._showEclipticGridText},set_showEclipticGridText:function(e){return this._showEclipticGridText=e,e},get_showEclipticOverviewText:function(){return this._showEclipticOverviewText},set_showEclipticOverviewText:function(e){return this._showEclipticOverviewText=e,e},get_showAltAzGrid:function(){return this._showAltAzGrid},set_showAltAzGrid:function(e){return this._showAltAzGrid=e,e},get_eclipticGridColor:function(){return this._eclipticGridColor},set_eclipticGridColor:function(e){return this._eclipticGridColor=e,e},get_galacticGridColor:function(){return this._galacticGridColor},set_galacticGridColor:function(e){return this._galacticGridColor=e,e},get_altAzGridColor:function(){return this._altAzGridColor},set_altAzGridColor:function(e){return this._altAzGridColor=e,e},get_precessionChartColor:function(){return this._precessionChartColor},set_precessionChartColor:function(e){return this._precessionChartColor=e,e},get_eclipticColor:function(){return this._eclipticColor},set_eclipticColor:function(e){return this._eclipticColor=e,e},get_equatorialGridColor:function(){return this._equatorialGridColor},set_equatorialGridColor:function(e){return this._equatorialGridColor=e,e},get_showAltAzGridText:function(){return this._showAltAzGridText},set_showAltAzGridText:function(e){return this._showAltAzGridText=e,e},get_showPrecessionChart:function(){return this._showPrecessionChart},set_showPrecessionChart:function(e){return this._showPrecessionChart=e,e},get_showConstellationPictures:function(){return this._showConstellationPictures},set_showConstellationPictures:function(e){return this._showConstellationPictures=e,e},get_showConstellationLabels:function(){return this._showConstellationLabels},set_showConstellationLabels:function(e){return this._showConstellationLabels=e,e},get_constellationLabelsHeight:function(){return this._constellationLabelsHeight},set_constellationLabelsHeight:function(e){return this._constellationLabelsHeight=e,e},get_solarSystemCMB:function(){return this._solarSystemCMB},set_solarSystemCMB:function(e){return this._solarSystemCMB=e,e},get_solarSystemMinorPlanets:function(){return this._solarSystemMinorPlanets},set_solarSystemMinorPlanets:function(e){return this._solarSystemMinorPlanets=e,e},get_solarSystemPlanets:function(){return this._solarSystemPlanets},set_solarSystemPlanets:function(e){return this._solarSystemPlanets=e,e},get_showEarthSky:function(){return this._showEarthSky},set_showEarthSky:function(e){return this._showEarthSky=e,e},get_solarSystemMinorOrbits:function(){return this._solarSystemMinorOrbits},set_solarSystemMinorOrbits:function(e){return this._solarSystemMinorOrbits=e,e},get_constellationsEnabled:function(){return this._constellationsEnabled},set_constellationsEnabled:function(e){return this._constellationsEnabled=e,e},get_constellationFiguresFilter:function(){return this._constellationFiguresFilter},set_constellationFiguresFilter:function(e){return this._constellationFiguresFilter=e,e},get_constellationBoundariesFilter:function(){return this._constellationBoundariesFilter},set_constellationBoundariesFilter:function(e){return this._constellationBoundariesFilter=e,e},get_constellationNamesFilter:function(){return this._constellationNamesFilter},set_constellationNamesFilter:function(e){return this._constellationNamesFilter=e,e},get_constellationArtFilter:function(){return this._constellationArtFilter},set_constellationArtFilter:function(e){return this._constellationArtFilter=e,e},get_showSkyOverlays:function(){return this._showSkyOverlays},set_showSkyOverlays:function(e){return this._showSkyOverlays=e,e},get_showConstellations:function(){return this._showConstellations},set_showConstellations:function(e){return this._showConstellations=e,e},get_showSkyNode:function(){return this._showSkyNode},set_showSkyNode:function(e){return this._showSkyNode=e,e},get_showSkyGrids:function(){return this._showSkyGrids},set_showSkyGrids:function(e){return this._showSkyGrids=e,e},get_showSkyOverlaysIn3d:function(){return this._showSkyOverlaysIn3d},set_showSkyOverlaysIn3d:function(e){return this._showSkyOverlaysIn3d=e,e},get_earthCutawayView:function(){return this._earthCutawayView},set_earthCutawayView:function(e){return this._earthCutawayView=e,e},get_showISSModel:function(){return this._showISSModel},set_showISSModel:function(e){return this._showISSModel=e,e},get_milkyWayModel:function(){return this._milkyWayModel},set_milkyWayModel:function(e){return this._milkyWayModel=e,e},get_minorPlanetsFilter:function(){return this._minorPlanetsFilter},set_minorPlanetsFilter:function(e){return this._minorPlanetsFilter=e,e},get_planetOrbitsFilter:function(){return this._planetOrbitsFilter},set_planetOrbitsFilter:function(e){return this._planetOrbitsFilter=e,e},get_constellations:function(){return this._constellations},set_constellations:function(e){return this._constellations=e,e},getSetting:function(e){return e===17?new $a(!0,0,!1,null):new $a(!1,1,!1,null)}};function wn(e){this.height=128,this.items=[],this._glyphVersion=-1,this.viewTransform=Z.get_identity(),this._textObject=new $n,this._vertCount=0,this.height=e*3}var Ac={add:function(e){this.items.push(e)},draw:function(e,t,r){if(e.gl==null)for(var n=I._transformCoordinate(e.get_viewPoint(),this.viewTransform),a=this.height/e.get_fovAngle()*e.height/180,l=i.enumerate(this.items);l.moveNext();){var f=l.current,c=e.WVP.transform(f.center);if(!(c.z<0)&&!(I.dot(n,f.center)<.55)){var d=e.WVP.transform(f.top),m=Math.atan2(c.x-d.x,c.y-d.y),v=e.device;v.save(),v.translate(c.x,c.y),v.rotate(-m),v.globalAlpha=t,v.fillStyle=r.toString(),v.font="normal normal "+Math.round(a*1.2).toString()+"px Arial",v.textBaseline="top";var C=v.measureText(f.text);v.fillText(f.text,-C.width/2,-a/2),v.restore()}}else{if((this._glyphCache==null||this._glyphCache.get_version()>this._glyphVersion)&&this.prepareBatch(),!this._glyphCache.ready)return;jt.use(e,this._vertexBuffer.vertexBuffer,this._glyphCache.get_texture().texture2d),e.gl.drawArrays(4,0,this._vertexBuffer.count)}},prepareBatch:function(){if(this._glyphCache==null&&(this._glyphCache=Cr.getCache(this.height)),!!this._glyphCache.ready){this._textObject.text="",this._textObject.fontSize=this.height*.5;for(var e=[],t=i.enumerate(this.items);t.moveNext();){for(var r=t.current,n=r.text,a=0,l=this._textObject.fontSize/128,f=.6666,c=0,d=0,m=0;m<n.length;m++){var v=this._glyphCache.getGlyphItem(n.substr(m,1));v!=null&&(c+=v.extents.x,d=Math.max(v.extents.y,d))}var C=xe.create(c,d);r.width=C.x*r.scale*f*l,r.height=C.y*r.scale*f*l;for(var T=n.length,m=0;m<T;m++){var v=this._glyphCache.getGlyphItem(n.substr(m,1));if(v!=null){var A=Ki.create(a*r.scale*f,0*r.scale*f,v.extents.x*l*r.scale*f,v.extents.y*l*r.scale*f);a+=v.extents.x*l,r.addGlyphPoints(e,v.size,A,v.uvRect)}}}this._vertCount=e.length,this._vertexBuffer=new pa(this._vertCount);for(var $=this._vertexBuffer.lock(),m=0;m<this._vertCount;m++)$[m]=e[m];this._vertexBuffer.unlock(),this._glyphVersion=this._glyphCache.get_version()}},cleanUp:function(){this._vertexBuffer!=null&&(this._vertexBuffer=null),this.items.length=0}};function Qn(e){this.referenceCount=0,this.glyph=e,this.uvRect=new Ki,this.size=new xe,this.referenceCount=1}Qn.create=function(e,t,r,n){var a=new Qn(e);return a.glyph=e,a.uvRect=t,a.size=r,a.extents=n,a.referenceCount=1,a},Qn._fromXML=function(e){var t=e.attributes.getNamedItem("Glyph").nodeValue,r=new Qn(t);return r.uvRect=Ki.create(parseFloat(e.attributes.getNamedItem("UVLeft").nodeValue),parseFloat(e.attributes.getNamedItem("UVTop").nodeValue),parseFloat(e.attributes.getNamedItem("UVWidth").nodeValue),parseFloat(e.attributes.getNamedItem("UVHeight").nodeValue)),r.size=xe.create(parseFloat(e.attributes.getNamedItem("SizeWidth").nodeValue),parseFloat(e.attributes.getNamedItem("SizeHeight").nodeValue)),r.extents=xe.create(parseFloat(e.attributes.getNamedItem("ExtentsWidth").nodeValue),parseFloat(e.attributes.getNamedItem("ExtentsHeight").nodeValue)),r};var Ic={addRef:function(){this.referenceCount++},release:function(){this.referenceCount--}};function Cr(e){this._cellHeight=128,this._gridSize=8,this.ready=!1,this._glyphItems={},this.textObject=new $n,this._dirty=!0,this._textureDirty=!0,this._version=0,this._cellHeight=e,this._texture=P.loadPlanetTexture(Nt.singleton.engineAssetUrl("glyphs1.png")),this._webFile=new fr(Nt.singleton.engineAssetUrl("glyphs1.xml")),this._webFile.onStateChange=i.bind("_glyphXmlReady",this),this._webFile.send()}Cr.getCache=function(e){return i.keyExists(Cr._caches,e)||(Cr._caches[e]=new Cr(e)),Cr._caches[e]},Cr.cleanUpAll=function(){i.clearKeys(Cr._caches)};var Pc={get_height:function(){return this._cellHeight},_glyphXmlReady:function(){this._webFile.get_state()===2?alert(this._webFile.get_message()):this._webFile.get_state()===1&&this._loadXmlGlyph(this._webFile.getXml())},_loadXmlGlyph:function(e){for(var t=ye.selectSingleNode(e,"GlyphItems"),r=i.enumerate(t.childNodes);r.moveNext();){var n=r.current;if(n.nodeName==="GlyphItem"){var a=Qn._fromXML(n);this._glyphItems[a.glyph]=a,Cr._allGlyphs=Cr._allGlyphs+a.glyph}}this.ready=!0},get_texture:function(){return this._texture},_makeTexture:function(){this._calcOrMake(!0)},getGlyphItem:function(e){return this._dirty&&this._calculateGlyphDetails(),this._glyphItems[e]},_calculateGlyphDetails:function(){this._calcOrMake(!1)},_calcOrMake:function(e){},get_version:function(){return this._version},set_version:function(e){return this._version=e,e},addGlyph:function(e){if(i.keyExists(this._glyphItems,e))this._glyphItems[e].addRef();else{var t=new Qn(e);this._glyphItems[e]=t,this._dirty=!0,this._textureDirty=!0,this._version++,Cr._allGlyphs=Cr._allGlyphs+e}},cleanUp:function(){this._dirty=!0,this._texture=null},dispose:function(){this.cleanUp()},get_dirty:function(){return this._dirty},set_dirty:function(e){return this._dirty=e,e}};function rr(e,t,r,n,a){this.rotation=0,this.tilt=0,this.bank=0,this._matInit=!1,this.color=Te.get_white(),this.sky=!0,this.scale=0,this.opacity=1,this.text="",this.width=1,this.height=1,this.alignment=0,this.text=r,this.up=t,this.center=e,this.scale=a,this.top=I.addVectors(e,I.scale(t,a)),n<0&&(this.sky=!1)}var Rc={addGlyphPoints:function(e,t,r,n){for(var a=new Array(6),l=0;l<6;l++)a[l]=new Ue;var f=I.cross(this.center,this.up),c=I.cross(this.up,this.center);f.normalize(),c.normalize(),this.up.normalize();var d=I.cross(this.center,c);d.normalize(),this.alignment?this.alignment===1&&(f.multiply(-r.get_left()*2),c.multiply(r.get_right()*2)):(f.multiply(this.width-r.get_left()*2),c.multiply(this.width-(this.width*2-r.get_right()*2)));var m=d.copy(),v=I.subtractVectors(I.get_empty(),d);m.multiply(this.height-r.get_top()*2),v.multiply(this.height-(this.height*2-r.get_bottom()*2));var C=this.center.copy();C.add(m),this.sky?C.add(f):C.subtract(f);var T=this.center.copy();T.add(m),this.sky?T.add(c):T.subtract(c);var A=this.center.copy();this.sky?A.add(f):A.subtract(f),A.add(v);var $=this.center.copy();if(this.sky?$.add(c):$.subtract(c),$.add(v),a[0].position=C.copy(),a[0].tu=n.get_left(),a[0].tv=n.get_top(),a[2].tu=n.get_left(),a[2].tv=n.get_bottom(),a[2].position=A.copy(),a[1].tu=n.get_right(),a[1].tv=n.get_top(),a[1].position=T.copy(),a[3].tu=n.get_right(),a[3].tv=n.get_bottom(),a[3].position=$.copy(),a[5].tu=n.get_right(),a[5].tv=n.get_top(),a[5].position=T.copy(),a[4].tu=n.get_left(),a[4].tv=n.get_bottom(),a[4].position=A.copy(),this.rotation||this.tilt||this.bank){if(!this._matInit){var N=Z.lookAtLH(this.center,new I,this.up),F=N.clone();F.invert(),this._rtbMat=Z.multiplyMatrix(Z.multiplyMatrix(Z.multiplyMatrix(Z.multiplyMatrix(N,Z._rotationZ(-this.rotation/180*Math.PI)),Z._rotationX(-this.tilt/180*Math.PI)),Z._rotationY(-this.bank/180*Math.PI)),F),this._matInit=!0}for(var l=0;l<6;l++)a[l].position=I._transformCoordinate(a[l].position,this._rtbMat)}for(var z=i.enumerate(a);z.moveNext();){var Y=z.current;e.push(Y)}}};function K(){}K.updateClock=function(){if(K._syncToClock){var e=K.get_metaNow();if(K._timeRate!==1){var t=e.getTime()-K.last.getTime(),r=t*K._timeRate;K._offset+=r}K.last=e;try{K._now=new Date(e.getTime()+K._offset)}catch{K._now=new Date(1,12,25,23,59,59),K._offset=K._now-K.get_metaNow()}K._now.getFullYear()>4e3&&(K._now=new Date(4e3,12,31,23,59,59),K._offset=K._now-K.get_metaNow()),K._now.getFullYear()<1&&(K._now=new Date(0,12,25,23,59,59),K._offset=K._now-K.get_metaNow())}},K.getTimeForFutureTime=function(e){try{if(K._syncToClock){var t=new Date(K.get_now().getTime()+e*1e3*K._timeRate);return t}else return K.get_now()}catch{return K.get_now()}},K.getJNowForFutureTime=function(e){try{if(K._syncToClock){var t=new Date(K.get_now().getTime()+i.truncate(e*1e3*K._timeRate));return K.utcToJulian(t)}else return K.utcToJulian(K.get_now())}catch{return K.utcToJulian(K.get_now())}},K.get_now=function(){return K._now},K.set_now=function(e){return K._now=e,K._offset=K._now-K.get_metaNow(),K.last=K.get_metaNow(),e},K.get_metaNow=function(){return K._metaNow},K.set_metaNow=function(e){return K.frameDumping||(K._metaNow=e),e},K.nextFrame=function(){K._metaNow.setMilliseconds(K._metaNow.getMilliseconds()+Math.round(1e3/K.framesPerSecond)),K.currentFrameNumber+=1},K.get_doneDumping=function(){return!K.frameDumping||K.cancelFrameDump||K.currentFrameNumber>=K.totalFrames},K.syncTime=function(){K._offset=0,K._now=i.now(),K._syncToClock=!0},K.get_jNow=function(){return K.utcToJulian(K.get_now())},K.get_syncToClock=function(){return K._syncToClock},K.set_syncToClock=function(e){return K._syncToClock!==e&&(K._syncToClock=e,e?(K.last=i.now(),K._offset=K._now-i.now()):K._now=new Date(i.now().getTime()+K._offset)),e},K.get_timeRate=function(){return K._timeRate},K.set_timeRate=function(e){return K._timeRate=e,e},K.get_altitude=function(){return K._altitude},K.set_altitude=function(e){return K._altitude=e,e},K.get_location=function(){return K._location=V.fromLatLng(U.get_active().get_locationLat(),U.get_active().get_locationLng()),K._altitude=U.get_active().get_locationAltitude(),K._location},K.set_location=function(e){return U.get_globalSettings().get_locationLat()!==e.get_lat()&&U.get_globalSettings().set_locationLat(e.get_lat()),U.get_globalSettings().get_locationLng()!==e.get_lng()&&U.get_globalSettings().set_locationLng(e.get_lng()),K._location=e,e},K.julianToUtc=function(e){var t=new li;t.setJD(e,!0);var r=(t.second()-i.truncate(t.second()))*1e3;return new Date(t.year(),t.month()-1,t.day(),t.hour(),t.minute(),i.truncate(t.second()),i.truncate(r))},K._twoLineDateToJulian=function(e){var t=parseInt(e.substring(0,1))<6,r=parseInt((t?" 20":"19")+e.substring(0,2)),n=parseFloat(e.substring(2,3)),a=parseFloat(e.substr(5)),l=new Date(r,0,1,0,0);return K.utcToJulian(l)+(n-1+a)},K.julianToTwoLineDate=function(e){return K.dateToTwoLineDate(K.julianToUtc(e))},K.dateToTwoLineDate=function(e){var t=new i.StringBuilder;t.append(e.getFullYear()%100);var r=new Date(e.getFullYear(),0,1,0,0),n=Math.floor((e-r)/(60*60*24*1e3))+2,a=n+e.getHours()/24+e.getMinutes()/60/24+e.getSeconds()/60/60/24+e.getMilliseconds()/1e3/60/60/24,l=K.tleDayString(a);return t.append(l),t.toString()},K.tleDayString=function(e){var t=e.toString(),r=t.indexOf(".");r===-1&&(r=t.length,t+=".0");var n=t.length-r-1,a="00000000";return t=a.substr(0,3-r)+t+a.substr(0,8-n),t},K.utcToJulian=function(e){var t=e.getUTCFullYear(),r=e.getUTCMonth()+1,n=e.getUTCDate(),a=e.getUTCHours(),l=e.getUTCMinutes(),f=e.getUTCSeconds()+e.getUTCMilliseconds()/1e3,c=n+a/24+l/1440+f/86400;return dt.getJulianDay(t,r,c)},K.dateToJD=function(e,t,r,n){var a=e,l=t;l<3&&(a=a-1,l=l+12);var f=0,c=0;return n&&(f=i.truncate(a/100),c=2-f+i.truncate(f/4)),i.truncate(365.25*(a+4716))+i.truncate(30.6001*(l+1))+r+c-1524.5};var $c={};function Ns(e){this.magnitude=0,this.RA=0,this.dec=0,this.BMV=0,this.id=0,this.absoluteMagnitude=0,this.par=0,this.distance=0;var t=e.split("	");if(this.id=parseInt(i.replaceString(t[0],"HIP","")),this.dec=parseFloat(t[3]),this.RA=parseFloat(t[2])/15,t.length>4)try{t[4].toUpperCase()!=="NULL"&&t[4]&&(this.magnitude=parseFloat(t[4]))}catch{}if(t.length>5)try{this.BMV=parseFloat(t[5]),this._makeColor(this.BMV)}catch{}t.length>6&&(this.par=parseFloat(t[6]),this._makeDistanceAndMagnitude())}var Ec={get_name:function(){return"HIP"+this.id.toString()},get_coordinates:function(){return V.fromRaDec(this.RA,this.dec)},get_asPlace:function(){var e=hr.create(this.get_name(),this.dec,this.RA,1,Ge.containment.findConstellationForPoint(this.RA,this.dec),4,-1);return e.set_magnitude(this.magnitude),e.set_distance(this.distance),e},stars:function(e,t){var r=e.split("	");if(this.id=parseInt(r[0]),this.RA=parseFloat(r[1])/15,this.dec=parseFloat(r[2]),r.length>3)try{this.magnitude=parseFloat(r[3])}catch{}if(r.length>4)try{this.col=G.load(r[4])}catch{}},_makeDistanceAndMagnitude:function(){this.distance=1/(this.par/1e3),this.absoluteMagnitude=this.magnitude-5*(ye.logN(this.distance,10)-1),this.distance*=206264.806},_makeColor:function(e){var t=4294967295;e<=-.32?t=4288854271:e<=-.31?t=4288919807:e<=-.3?t=4288985855:e<=-.3?t=4289051391:e<=-.28?t=4289182975:e<=-.26?t=4289314303:e<=-.24?t=4289445887:e<=-.2?t=4289708799:e<=-.16?t=4290037503:e<=-.14?t=4290169087:e<=-.12?t=4290366207:e<=-.09?t=4290563583:e<=-.06?t=4290892031:e<=0?t=4291483391:e<=.06?t=4292009215:e<=.14?t=4292732159:e<=.19?t=4293126399:e<=.31?t=4294111999:e<=.36?t=4294571775:e<=.43?t=4294965756:e<=.54?t=4294964979:e<=.59?t=4294964203:e<=.63?t=4294963687:e<=.66?t=4294963169:e<=.74?t=4294962909:e<=.82?t=4294961877:e<=.92?t=4294960324:e<=1.15?t=4294959032:e<=1.3?t=4294958516:e<=1.41?t=4294955933:e<=1.48?t=4294954385:e<=1.52?t=4294953351:e<=1.55?t=4294952319:e<=1.56?t=4294951287:e<=1.61?t=4294950257:e<=1.72?t=4294948966:e<=1.84?t=4294947419:e<=2&&(t=4294946129),this.col=G.fromInt(t)}};function _a(e){this.RA=0,this.dec=0,this.distance=0,this.type=0,this.eTypeBucket=0,this.size=5,this.sdssID=0,this.sdssID=e.readInt64(),this.RA=e.readSingle(),this.dec=e.readSingle(),this.distance=e.readSingle(),this.eTypeBucket=e.readByte(),this.size=e.readSingle()}_a.getEType=function(e){for(var t=0,r=_a._eTypeBuckets.length-1;r-t>1;){var n=(t+r)/2;e>_a._eTypeBuckets[n]?t=n:r=n}return t};var Dc={};function Vs(){this.latMin=0,this.latMax=0,this.lngMin=0,this.lngMax=0}var Fc={};function O(){this._renderTriangleLists=new Array(4),this._indexBuffers=new Array(4),this.level=0,this.tileX=0,this.tileY=0,this.texture=null,this.texture2d=null,this.isCatalogTile=!1,this.readyToRender=!1,this.inViewFrustum=!0,this.globalCenter=I.zero,this.children=[null,null,null,null],this.parent=null,this.localCenter=new I,this.renderedAtOrBelowGeneration=0,this._demScaleFactor=6371e3,this.demIndex=0,this.demAverage=0,this.demReady=!1,this.texReady=!1,this.demTile=!1,this.demDownloading=!1,this.renderedGeneration=0,this.accomidation=0,this.accessCount=0,this.downloading=!1,this.geometryCreated=!1,this._isHdTile=!1,this.demSize=33*33,this._topLeftScreen=new I,this._bottomRightScreen=new I,this._topRightScreen=new I,this._bottomLeftScreen=new I,this.sphereRadius=0,this.sphereCenter=new I,this.radius=1,this.triangleCount=0,this.requestHits=0,this.requestPending=!1,this.errored=!1,this._key=null,this._tileId=null,this._vertexCount=0,this.renderChildPart=null,this.renderChildPart=new Array(4);for(var e=0;e<4;e++)this.renderChildPart[e]=pn.create(!1,500)}O.getFrustumList=function(){try{return O.frustumList}catch{return null}},O.get_subDivisions=function(){return 32};var Nc={getIndexBuffer:function(e,t){return this._indexBuffers[e]},isPointInTile:function(e,t){return!1},getSurfacePointAltitude:function(e,t,r){return 0},makeTexture:function(){if(O.prepDevice!=null)try{if(this.texture2d=O.prepDevice.createTexture(),O.prepDevice.bindTexture(3553,this.texture2d),O.prepDevice.texParameteri(3553,10242,33071),O.prepDevice.texParameteri(3553,10243,33071),this.dataset.get_extension().toLowerCase().indexOf("fits")>-1&&Zt.useGlVersion2)O.prepDevice.texImage2D(3553,0,33326,i.truncate(this.fitsImage.get_sizeX()),i.truncate(this.fitsImage.get_sizeY()),0,6403,5126,this.fitsImage.dataUnit),O.prepDevice.texParameteri(3553,10241,9728),O.prepDevice.texParameteri(3553,10240,9728);else{var e=this.texture;if((!di.isPowerOfTwo(this.texture.height)|!di.isPowerOfTwo(this.texture.width))===1){var t=document.createElement("canvas");t.height=di.fitPowerOfTwo(e.height),t.width=di.fitPowerOfTwo(e.width);var r=t.getContext("2d");r.drawImage(e,0,0,t.width,t.height),e=t}O.prepDevice.texImage2D(3553,0,6408,6408,5121,e),O.prepDevice.texParameteri(3553,10241,9985),O.prepDevice.generateMipmap(3553)}O.prepDevice.bindTexture(3553,null)}catch{this.errored=!0}},addVertex:function(e,t,r){return e[t++]=r.position.x,e[t++]=r.position.y,e[t++]=r.position.z,e[t++]=r.tu,e[t++]=r.tv,t},geoTo3dWithAlt:function(e,t,r,n){if(e=Math.max(Math.min(90,e),-90),t=Math.max(Math.min(180,t),-180),!O.demEnabled||this.demData==null)return this.geoTo3d(e,t,r);n&&(t-=180);var a=this.demData[this.demIndex],l=this.geoTo3dWithAltitude(e,t,a,r);return l},geoTo3dWithAltitude:function(e,t,r,n){var a=1+r/this.get__demScaleFactor(),l=I.create(Math.cos(t*O.RC)*Math.cos(e*O.RC)*a,Math.sin(e*O.RC)*a,Math.sin(t*O.RC)*Math.cos(e*O.RC)*a);return n&&l.subtract(this.localCenter),l},get__demScaleFactor:function(){return this._demScaleFactor},set__demScaleFactor:function(e){return this._demScaleFactor=e,e},requestImage:function(){var e=this;if(this.dataset.get_extension().toLowerCase().indexOf("fits")>-1)!this.downloading&&!this.readyToRender&&(this.downloading=!0,Zt.useGlVersion2?this.fitsImage=new qo(this.dataset,this.get_URL(),function(r){e.downloading=!1,e.errored=e.fitsImage.errored,Oe.removeFromQueue(e.get_key(),!0),e.fitsImage.errored||(e.level||(e.dataset.get_fitsProperties()._fireMainImageLoaded(e.fitsImage),e.fitsImage.applyDisplaySettings()),e.texReady=!0,e.readyToRender=e.texReady&&(e.demReady||!e.demTile),e.requestPending=!1,e.makeTexture())}):this.fitsImage=Wr.createTiledFits(this.dataset,this.get_URL(),function(r){e.level||e.dataset.get_fitsProperties()._fireMainImageLoaded(e.fitsImage),e.texReady=!0,e.downloading=!1,e.errored=e.fitsImage.errored,e.readyToRender=e.texReady&&(e.demReady||!e.demTile),e.requestPending=!1,Oe.removeFromQueue(e.get_key(),!0),e.texture2d=r.getBitmap().getTexture()}));else{if(this.get_dataset().get_wcsImage()!=null){this.texReady=!0,this.downloading=!1,this.errored=!1,this.readyToRender=!0,this.requestPending=!1,Oe.removeFromQueue(this.get_key(),!0);return}if(!this.downloading&&!this.readyToRender){this.downloading=!0,this.texture=document.createElement("img");var t=this.texture;this.texture.addEventListener("load",function(r){e.texReady=!0,e.downloading=!1,e.errored=!1,e.readyToRender=e.texReady&&(e.demReady||!e.demTile),e.requestPending=!1,Oe.removeFromQueue(e.get_key(),!0),e.makeTexture()},!1),this.texture.addEventListener("error",function(r){if(!e.texture.hasAttribute("proxyattempt")){e.texture.setAttribute("proxyattempt",!0);var n=Nt.singleton.activateProxy(e.texture.src);if(n!=null){e.texture.src=n;return}}e.downloading=!1,e.readyToRender=!1,e.errored=!0,e.requestPending=!1,Oe.removeFromQueue(e.get_key(),!0)},!1),t.crossOrigin="anonymous",this.texture.src=this.get_URL()}}},createDemFromParent:function(){return!1},_loadDemData:function(){if(this.demFile==null)return this.createDemFromParent();if(this.demData=this.demFile,this.demFile.length!==1089&&this.demFile.length!==513)return this.createDemFromParent();for(var e=i.enumerate(this.demData);e.moveNext();)e.current;return this.demAverage/=this.demData.length,!0},requestDem:function(){var e=this;if(!this.readyToRender&&!this.demDownloading){this.demTile=!0,this.demDownloading=!0,O.callCount++;var t=new XMLHttpRequest;t.addEventListener("load",function(r){e.demReady=!0,e.demDownloading=!1,e.readyToRender=e.texReady&&(e.demReady||!e.demTile),e.requestPending=!1;try{e.demFile=new Float32Array(t.response)}catch{}Oe.removeFromQueue(e.get_key(),!0)},!1),t.addEventListener("error",function(r){e.demDownloading=!1,e.demReady=!1,e.readyToRender=!1,e.errored=!0,e.requestPending=!1,Oe.removeFromQueue(e.get_key(),!0)},!1),t.open("GET",this.get_demURL(),!0),t.responseType="arraybuffer",t.send()}},draw3D:function(e,t){if(this.renderedGeneration=O.currentRenderGeneration,O.tilesTouched++,this.accessCount=Oe.accessID++,this.errored)return!1;var r=2;if(this.inViewFrustum=!0,!this.readyToRender)return Oe.addTileToQueue(this),!1;var n=0,a=0;(this.dataset.get_mercator()||this.dataset.get_bottomsUp())&&(a=1);for(var l=0,f=!1,c=!1,d=0;d<2;d++)for(var m=0;m<r;m++)this.level<this.dataset.get_levels()?(this.children[n]==null&&(this.children[n]=Oe.getTile(this.level+1,this.tileX*2+(m+l)%2,this.tileY*2+(d+a)%2,this.dataset,this)),this.children[n].isTileInFrustum(e.get_frustum())?(this.inViewFrustum=!0,this.children[n].isTileBigEnough(e)?(this.renderChildPart[n].set_targetState(!this.children[n].draw3D(e,t)),this.renderChildPart[n].get_targetState()&&(c=!0)):this.renderChildPart[n].set_targetState(!0)):this.renderChildPart[n].set_targetState(this.renderChildPart[n].set_state(!1)),this.renderChildPart[n].get_targetState(),this.renderChildPart[n].get_state()):this.renderChildPart[n].set_state(!0),this.renderChildPart[n].get_state()&&(f=!0),n++;if((c||f)&&(this.renderedAtOrBelowGeneration=O.currentRenderGeneration,this.parent!=null&&(this.parent.renderedAtOrBelowGeneration=this.renderedAtOrBelowGeneration)),!f)return!0;if(!this.createGeometry(e))return!1;O.tilesInView++,this.accomidation=this._computeAccomidation();for(var v=0;v<4;v++)this.renderChildPart[v].get_targetState()&&this.renderPart(e,v,t/100,!1);return!0},_computeAccomidation:function(){var e=0;if(!O.useAccomidation)return 0;var t=Oe.getCachedTile(this.level,this.tileX,this.tileY+1,this.dataset,this);(t==null||t.renderedAtOrBelowGeneration<O.currentRenderGeneration-2)&&(e+=1);var r=Oe.getCachedTile(this.level,this.tileX+1,this.tileY,this.dataset,this);(r==null||r.renderedAtOrBelowGeneration<O.currentRenderGeneration-2)&&(e+=2);var n=Oe.getCachedTile(this.level,this.tileX,this.tileY-1,this.dataset,this);(n==null||n.renderedAtOrBelowGeneration<O.currentRenderGeneration-2)&&(e+=4);var a=Oe.getCachedTile(this.level,this.tileX-1,this.tileY,this.dataset,this);return(a==null||a.renderedAtOrBelowGeneration<O.currentRenderGeneration-2)&&(e+=8),e},renderPart:function(e,t,r,n){if(O.prepDevice==null)for(var a=e.lighting&&e.get_sunPosition()!=null,l=i.enumerate(this._renderTriangleLists[t]);l.moveNext();){var f=l.current;if(f.opacity=r,a){var c=f.normal.copy();e.get_world().multiplyVector(c),c.normalize();var d=I.dot(c,e.get_sunPosition());d<0?d=0:d=Math.min(1,d*1),f.lighting=d}else f.lighting=1;f.draw(e.device,e.WVP)}else Zt.useGlVersion2&&this.fitsImage!=null?(bt.bindColorMapTexture(O.prepDevice,this.dataset.get_fitsProperties().colorMapName),Ne.min=this.dataset.get_fitsProperties().lowerCut,Ne.max=this.dataset.get_fitsProperties().upperCut,Ne.containsBlanks=this.dataset.get_fitsProperties().containsBlanks,Ne.blankValue=this.dataset.get_fitsProperties().blankValue,Ne.bZero=this.dataset.get_fitsProperties().bZero,Ne.bScale=this.dataset.get_fitsProperties().bScale,Ne.scaleType=this.dataset.get_fitsProperties().scaleType,Ne.transparentBlack=this.dataset.get_fitsProperties().transparentBlack,Ne.use(e,this._vertexBuffer,this.getIndexBuffer(t,this.accomidation),this.texture2d,r,!1,this.globalCenter)):tt.use(e,this._vertexBuffer,this.getIndexBuffer(t,this.accomidation),this.texture2d,r,!1,this.globalCenter),e.gl.drawElements(4,this.triangleCount*3,5123,0)},cleanUp:function(e){if(this.readyToRender=!1,this.demData=null,this.demFile=null,this.demDownloading=!1,this.texReady=!1,this.demReady=!1,this.errored=!1,this.texture!=null&&(this.texture=null),this._renderTriangleLists=new Array(4),this.geometryCreated=!1,e&&this.parent!=null&&(this.parent.removeChild(this),this.parent=null),O.prepDevice!=null){for(var t=i.enumerate(this._indexBuffers);t.moveNext();){var r=t.current;O.prepDevice.deleteBuffer(r)}this._indexBuffers=new Array(4),this._vertexBuffer!=null&&(O.prepDevice.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this.texture2d!=null&&(O.prepDevice.deleteTexture(this.texture2d),this.texture2d=null)}},removeChild:function(e){for(var t=0;t<4;t++)if(this.children[t]===e){this.children[t]=null;return}},createGeometry:function(e){return O.demEnabled&&this.demReady&&this.demData==null&&!this._loadDemData()||O.demEnabled&&this.demData==null?!1:(this.readyToRender=!0,!0)},calcSphere:function(){var e=new Array(4);e[0]=this.topLeft,e[1]=this.bottomRight,e[2]=this.topRight,e[3]=this.bottomLeft;var t=An.findEnclosingSphere(e);this.sphereCenter=t.center,this.sphereRadius=t.radius},isTileBigEnough:function(e){if(this.level>1){var t=e.WVP;t._transformTo(this.topLeft,this._topLeftScreen),t._transformTo(this.bottomRight,this._bottomRightScreen),t._transformTo(this.topRight,this._topRightScreen),t._transformTo(this.bottomLeft,this._bottomLeftScreen);var r=this._topLeftScreen;r.subtract(this._topRightScreen);var n=r.length(),a=this._bottomLeftScreen;a.subtract(this._bottomRightScreen);var l=a.length(),f=this._bottomLeftScreen;f.subtract(this._topLeftScreen);var c=f.length(),d=this._bottomRightScreen;d.subtract(this._topRightScreen);var m=d.length(),v=Math.max(Math.max(m,c),Math.max(l,n));if(v<300)return!1;O.deepestLevel=this.level>O.deepestLevel?this.level:O.deepestLevel}return!0},isTileInFrustum:function(e){this.level<2&&(!this.dataset.get_projection()||this.dataset.get_projection()),this.inViewFrustum=!1;for(var t=new Ka(this.sphereCenter.x,this.sphereCenter.y,this.sphereCenter.z,1),r=0;r<6;r++)if(e[r].dot(t)<-this.sphereRadius)return!1;return this.inViewFrustum=!0,!0},get_sphereRadius:function(){return this.sphereRadius},get_sphereCenter:function(){return this.sphereCenter},geoTo3d:function(e,t,r){if(this.dataset.get_dataSetType()===3){var n=I.create(-(Math.cos(t*O.RC)*Math.cos(e*O.RC)*this.radius),Math.sin(e*O.RC)*this.radius,Math.sin(t*O.RC)*Math.cos(e*O.RC)*this.radius);return n}else{t-=180;var n=I.create(Math.cos(t*O.RC)*Math.cos(e*O.RC)*this.radius,Math.sin(e*O.RC)*this.radius,Math.sin(t*O.RC)*Math.cos(e*O.RC)*this.radius);return n}},onCreateVertexBuffer:function(e,t){},get_dataset:function(){return this.dataset},set_dataset:function(e){return this.dataset=e,e},get_key:function(){return this._key==null&&(this._key=Mi.getTileKey(this.dataset,this.level,this.tileX,this.tileY,this.parent)),this._key},get_URL:function(){var e=Nt.singleton.rewrite(this.dataset.get_url(),0),t=e;if(e.indexOf("{1}")>-1)return!this.dataset.get_projection()&&!i.emptyString(this.dataset.get_quadTreeTileMap())?(t=i.format(e,this.getServerID(),this.getTileID()),t.indexOf("virtualearth.net")>-1&&(t+="&n=z"),t):i.format(e,this.dataset.get_imageSetID(),this.level,this.tileX,this.tileY);t=i.replaceString(t,"{X}",this.tileX.toString()),t=i.replaceString(t,"{Y}",this.tileY.toString()),t=i.replaceString(t,"{L}",this.level.toString());var r=0;t.indexOf("{S:0}")>-1&&(r=0,t=i.replaceString(t,"{S:0}","{S}")),t.indexOf("{S:1}")>-1&&(r=1,t=i.replaceString(t,"{S:1}","{S}")),t.indexOf("{S:2}")>-1&&(r=2,t=i.replaceString(t,"{S:2}","{S}")),t.indexOf("{S:3}")>-1&&(r=3,t=i.replaceString(t,"{S:3}","{S}")),t.indexOf("a{S}")>-1&&(t=i.replaceString(t,"a{S}","r{S}")),t.indexOf("h{S}")>-1&&(t=i.replaceString(t,"h{S}","r{S}")),t.indexOf("//r{S}.ortho.tiles.virtualearth.net")>-1&&(t=i.replaceString(t,"//r{S}.ortho.tiles.virtualearth.net","//ecn.t{S}.tiles.virtualearth.net"));var n=this.getTileID(),a="";return n.length?a=n.substr(n.length-1,1):a=r.toString(),t=i.replaceString(t,"{Q}",n),t=i.replaceString(t,"{S}",a),t.indexOf("virtualearth.net")>-1&&(t+="&n=z"),t},get_demURL:function(){var e=Nt.singleton.rewrite(this.dataset.get_demUrl(),0);if(!this.dataset.get_projection()&&!q.singleton.freestandingMode&&(Nt.singleton.coreStaticUrl("wwtweb/demtile.aspx?q={0},{1},{2},M"),i.emptyString(e)),e.indexOf("{1}")>-1)return i.format(e+"&new",this.level,this.tileX,this.tileY);var t=e;t=i.replaceString(t,"{X}",this.tileX.toString()),t=i.replaceString(t,"{Y}",this.tileY.toString()),t=i.replaceString(t,"{L}",this.level.toString());var r=0;t.indexOf("{S:0}")>-1&&(r=0,t=i.replaceString(t,"{S:0}","{S}")),t.indexOf("{S:1}")>-1&&(r=1,t=i.replaceString(t,"{S:1}","{S}")),t.indexOf("{S:2}")>-1&&(r=2,t=i.replaceString(t,"{S:2}","{S}")),t.indexOf("{S:3}")>-1&&(r=3,t=i.replaceString(t,"{S:3}","{S}"));var n=this.getTileID(),a="";return n.length?a=n.substr(n.length-1,1):a=r.toString(),t=i.replaceString(t,"{Q}",n),t=i.replaceString(t,"{S}",a),t},getServerID:function(){var e=(this.tileX&1)+((this.tileY&1)<<1);return e},getTileID:function(){if(this._tileId!=null)return this._tileId;var e=this.level,t=this.tileX,r=this.tileY;this.dataset.get_projection()===1&&e++;var n=this.dataset.get_quadTreeTileMap();if(i.emptyString(n))return this._tileId="0",this._tileId;for(var a=new i.StringBuilder,l=e;l>0;--l){var f=1<<l-1,c=0;t&f&&(c=1),r&f&&(c+=2),a.append(n.substr(c,1))}return this._tileId=a.toString(),this._tileId},get_vertexCount:function(){return this._vertexCount},set_vertexCount:function(e){return this._vertexCount=e,e}};function Oe(){}Oe.get_queueCount=function(){return i.keyCount(Oe._queue)},Oe.getTile=function(e,t,r,n,a){var l=null,f=Mi.getTileKey(n,e,t,r,a);return i.keyExists(Oe._tiles,f)?l=Oe._tiles[f]:(l=Mi.getNewTile(n,e,t,r,a),l!=null&&(Oe._tiles[f]=l)),l},Oe.getCachedTile=function(e,t,r,n,a){if(e<n.get_baseLevel())return null;var l=null,f=Mi.getTileKey(n,e,t,r,a);try{if(i.keyExists(Oe._tiles,f))l=Oe._tiles[f];else return null}catch{}return l},Oe.getReadyToRenderTileCount=function(){var e=[],t=[];try{try{for(var r=i.enumerate(i.keys(Oe._tiles));r.moveNext();){var n=r.current,a=Oe._tiles[n];a.renderedGeneration<O.currentRenderGeneration-10&&!(a.requestPending||a.downloading)&&(a.readyToRender?t.push(a):e.push(a))}}catch{}return t.length}catch{return-1}},Oe.processQueue=function(e){for(;i.keyCount(Oe._queue)>0&&Oe.openThreads>0;){for(var t=1e5,r=!1,n=null,a=i.enumerate(i.keys(Oe._queue));a.moveNext();){var l=a.current,f=Oe._queue[l];if(!f.requestPending&&f.inViewFrustum){var c=I.makeCopy(f.get_sphereCenter());c._transformByMatrics(e.get_world()),e.space?c.subtract(I.create(0,0,-1)):c.subtract(e.cameraPosition);var d=Math.max(0,c.length()-f.get_sphereRadius()),m=f.get_dataset().get_projection()===2||f.get_dataset().get_projection()===5;d<t&&(!r||m)&&(t=d,n=f.get_key(),f.level,r=m)}}if(n!=null){var v=Oe._queue[n];v.requestPending=!0,Oe.openThreads--,Oe.openThreads<0&&(Oe.openThreads=0),v.requestImage(),v.get_dataset().get_elevationModel()&&v.requestDem()}else return}},Oe.addTileToQueue=function(e){var t;return t=256,!e.downloading&&!e.readyToRender&&(i.keyExists(Oe._queue,e.get_key())?Oe._queue[e.get_key()].requestHits+=t:(e.requestHits=t,Oe._queue[e.get_key()]=e)),!0},Oe.removeFromQueue=function(e,t){if(t){var r=Oe._queue[e];r!=null&&(r.requestPending=!1,delete Oe._queue[r.get_key()]),Oe.openThreads++}delete Oe._queue[e]},Oe.clearCache=function(){i.clearKeys(Oe._tiles)},Oe.purgeQueue=function(){i.clearKeys(Oe._queue)},Oe.purgeLRU=function(){if(!(i.keyCount(Oe._tiles)<Oe.maxReadyToRenderSize)){var e=[],t=[];try{try{for(var r=i.enumerate(i.keys(Oe._tiles));r.moveNext();){var n=r.current,a=Oe._tiles[n];a.renderedGeneration<O.currentRenderGeneration-10&&!(a.requestPending||a.downloading)&&(a.readyToRender?t.push(a):e.push(a))}}catch{}if(Oe.readyToRenderCount=t.length,t.length>Oe.maxReadyToRenderSize){t.sort(function(d,m){return m.accessCount<d.accessCount?1:m.accessCount===d.accessCount?0:-1});for(var l=t.length-Oe.maxReadyToRenderSize,f=i.enumerate(t);f.moveNext();){var a=f.current;if(l<1)break;a.cleanUp(!1),l--}}if(i.keyCount(Oe._tiles)<Oe.maxTileCacheSize)return;if(e.length>Oe.maxTileCacheSize){e.sort(function(m,v){return v.accessCount<m.accessCount?1:v.accessCount===m.accessCount?0:-1});var l=e.length-Oe.maxTileCacheSize;l>20&&(l=20);for(var c=i.enumerate(e);c.moveNext();){var a=c.current;if(l<1)break;a.cleanUp(!0),delete Oe._tiles[a.get_key()],l--}}}catch{}finally{}}},Oe.decimateQueue=function(){for(var e=[],t=i.enumerate(i.keys(Oe._queue));t.moveNext();){var r=t.current,n=Oe._queue[r];if(!n.requestPending){n.requestHits=n.requestHits/2;try{n.requestHits<2?e.push(n):n.inViewFrustum||e.push(n)}catch{}}}for(var a=i.enumerate(e);a.moveNext();){var n=a.current;delete Oe._queue[n.get_key()]}};var Vc={};function bn(){}bn.lineToPoint=function(e,t,r){var n=I.subtractVectors(t,e),a=I.subtractVectors(r,e),l=I.cross(a,n).length()/n.length();return l},bn.getUVFromInnerPoint=function(e,t,r,n,a){e.normalize(),t.normalize(),r.normalize(),n.normalize(),a.normalize();var l=bn.lineToPoint(e,t,a),f=bn.lineToPoint(r,n,a),c=l+f,d=bn.lineToPoint(t,n,a),m=bn.lineToPoint(e,r,a),v=d+m;return xe.create(m/v,l/c)};var Bc={};function Ra(){this.userLevel=0,this.classification=0,this.averageRating=0,this.lengthInSecs=0,this._thumbnailUrlField=""}Ra._fromXml=function(e){var t=new Ra;return e.attributes.getNamedItem("ID")!=null&&(t.id=e.attributes.getNamedItem("ID").nodeValue),e.attributes.getNamedItem("TourUrl")!=null&&(t._tourUrl=e.attributes.getNamedItem("TourUrl").nodeValue),e.attributes.getNamedItem("Title")!=null&&(t.title=e.attributes.getNamedItem("Title").nodeValue),e.attributes.getNamedItem("Description")!=null&&(t.description=e.attributes.getNamedItem("Description").nodeValue),e.attributes.getNamedItem("Classification")!=null&&(t.classification=gt.parse("Classification",e.attributes.getNamedItem("Classification").nodeValue)),e.attributes.getNamedItem("AuthorEmail")!=null&&(t.authorEmail=e.attributes.getNamedItem("AuthorEmail").nodeValue),e.attributes.getNamedItem("Author")!=null&&(t.author=e.attributes.getNamedItem("Author").nodeValue),e.attributes.getNamedItem("AuthorURL")!=null&&(t.authorURL=e.attributes.getNamedItem("AuthorURL").nodeValue),e.attributes.getNamedItem("AuthorImageUrl")!=null&&(t.authorImageUrl=e.attributes.getNamedItem("AuthorImageUrl").nodeValue),e.attributes.getNamedItem("AverageRating")!=null&&(t.averageRating=parseFloat(e.attributes.getNamedItem("AverageRating").nodeValue)),e.attributes.getNamedItem("LengthInSecs")!=null&&(t.lengthInSecs=parseFloat(e.attributes.getNamedItem("LengthInSecs").nodeValue)),e.attributes.getNamedItem("OrganizationUrl")!=null&&(t.organizationUrl=e.attributes.getNamedItem("OrganizationUrl").nodeValue),e.attributes.getNamedItem("OrganizationName")!=null&&(t.organizationName=e.attributes.getNamedItem("OrganizationName").nodeValue),e.attributes.getNamedItem("RelatedTours")!=null&&(t.relatedTours=e.attributes.getNamedItem("RelatedTours").nodeValue),e.attributes.getNamedItem("Keywords")!=null&&(t.keywords=e.attributes.getNamedItem("Keywords").nodeValue),e.attributes.getNamedItem("ThumbnailUrl")!=null&&t.set_thumbnailUrl(e.attributes.getNamedItem("ThumbnailUrl").nodeValue),t};var zc={get_name:function(){return this.title},get_thumbnail:function(){return this._thumbnail},set_thumbnail:function(e){return this._thumbnail=e,e},get_thumbnailUrl:function(){if(i.emptyString(this._thumbnailUrlField)){if(q.singleton.freestandingMode)return Nt.singleton.engineAssetUrl("thumb_star.jpg")}else return this._thumbnailUrlField;return i.format(Nt.singleton.coreStaticUrl("wwtweb/GetTourThumbnail.aspx?GUID={0}"),this.id)},set_thumbnailUrl:function(e){return this._thumbnailUrlField=e,e},get_tourUrl:function(){return i.emptyString(this._tourUrl)&&!q.singleton.freestandingMode?i.format(Nt.singleton.coreStaticUrl("wwtweb/GetTour.aspx?GUID={0}"),this.id):this._tourUrl},set_tourUrl:function(e){return this._tourUrl=e,e},get_bounds:function(){return this._bounds},set_bounds:function(e){return this._bounds=e,e},get_isImage:function(){return!1},get_isTour:function(){return!0},get_isFolder:function(){return!1},get_isCloudCommunityItem:function(){return!1},get_readOnly:function(){return!1},get_children:function(){return[]}};function Bs(e,t){this.size=0,this.offset=0,this.filename=e,this.size=t}var Oc={toString:function(){return this.filename}};function ga(){this.tempDirectory="",this._currentOffset=0,this._packageID="",this.url="",this.clearFileList()}ga.fromUrl=function(e,t){var r=new ga;return r.url=e,r._callMe=t,r._webFile=new fr(e),r._webFile.responseType="blob",r._webFile.onStateChange=i.bind("_loadCabinet",r),r._webFile.send(),r};var Uc={get_packageID:function(){return this._packageID},set_packageID:function(e){return this._packageID=e,e},addFile:function(e,t){if(t!=null&&!i.keyExists(this._fileDirectory,e)){var r=new Bs(e,t.size);r.offset=this._currentOffset,r.blob=t,this.fileList.push(r),this._fileDirectory[e]=r,this._currentOffset+=r.size}},clearFileList:function(){this.fileList==null&&(this.fileList=[]),this._fileDirectory==null&&(this._fileDirectory={}),this.fileList.length=0,i.clearKeys(this._fileDirectory),this._currentOffset=0},packageFiles:function(){var e=new ia;e.formatting=1,e._writeProcessingInstruction("xml","version='1.0' encoding='UTF-8'"),e._writeStartElement("FileCabinet"),e._writeAttributeString("HeaderSize","0x0BADFOOD"),e._writeStartElement("Files");for(var t=i.enumerate(this.fileList);t.moveNext();){var r=t.current;e._writeStartElement("File"),e._writeAttributeString("Name",r.filename),e._writeAttributeString("Size",r.size.toString()),e._writeAttributeString("Offset",r.offset.toString()),e._writeEndElement()}e._writeEndElement(),e._writeFullEndElement(),e._close();var n=e.body,a=new Blob([n]),l=i.format("0x{0:x8}",a.size);n=i.replaceString(n,"0x0BADFOOD",l),a=new Blob([n]);var f=[];f.push(a);for(var c=i.enumerate(this.fileList);c.moveNext();){var r=c.current;f.push(r.blob)}var d=new Blob(f,{type:"application/x-wtt"});return d},_loadCabinet:function(){var e=this;if(this._webFile.get_state()===2)alert(this._webFile.get_message());else if(this._webFile.get_state()===1){this._mainBlob=this._webFile.getBlob();var t=new FileReader;t.onloadend=function(r){var n=e._getSize(t.result),a=new FileReader;a.onloadend=function(l){var f=i.safeCast(a.result,String),c=new DOMParser;e.extract(c.parseFromString(f,"text/xml"),n),e._callMe()},a.readAsText(e._mainBlob.slice(0,n))},t.readAsText(this._mainBlob.slice(0,255))}},_getSize:function(e){var t=e.indexOf("0x");return t===-1?0:parseInt(e.substring(t,t+10),16)},extract:function(e,t){try{var r=ye.selectSingleNode(e,"FileCabinet"),n=ye.selectSingleNode(r,"Files");this.fileList.length=0;for(var a=i.enumerate(n.childNodes);a.moveNext();){var l=a.current;if(l.nodeName==="File"){var f=new Bs(l.attributes.getNamedItem("Name").nodeValue,parseInt(l.attributes.getNamedItem("Size").nodeValue));f.offset=t,t+=f.size,this.fileList.push(f)}}}catch{}},getFileBlob:function(e){var t=this.getFileEntry(e);if(t!=null){var r=e.substr(e.lastIndexOf(".")).toLowerCase(),n=null;switch(r){case".png":n="image/png";break;case".jpg":case".jpeg":n="image/jpeg";break;case".mp3":n="audio/mpeg3";break;case".txt":n="text/plain";break;case".fit":case".fits":n="application/octet-stream";break}return this._mainBlob.slice(t.offset,t.offset+t.size,n)}return null},getFileEntry:function(e){for(var t=i.enumerate(this.fileList);t.moveNext();){var r=t.current;if(r.filename===e)return r}return null},get_masterFile:function(){return this.fileList.length>0?this.fileList[0].filename:null},clearTempFiles:function(){for(var e=i.enumerate(this.fileList);e.moveNext();)e.current}};function $a(e,t,r,n){this.targetState=!1,this.edgeTrigger=!1,this.opacity=0,this.edgeTrigger=e,this.opacity=t,this.targetState=r,this.filter=n}var Hc={};function _i(){this.isDynamic=!1,this.isDesignTimeOnly=!1,this._name="",this.id=(_i.nextId++).toString(),this._owner=null,this._url="",this._linkID="",this._domeMatrix=Z.get_identity(),this._domeMatX=0,this._domeMatY=0,this._domeAngle=0,this.points=null,this._animate=!1,this._tweenFactor=0,this._endX=0,this._endY=0,this._endOpacity=0,this._endColor=new G,this._endWidth=0,this._endHeight=0,this._endRotationAngle=0,this._anchor=1,this._x=0,this._y=0,this._width=0,this._height=0,this._color=Te.get_white(),this._opacity=.5,this._rotationAngle=0,this.currentRotation=0,this.texture=null,this.texture2d=null,this._interpolationType=5}_i._fromXml=function(e,t){if(t.attributes==null||t.attributes.getNamedItem("Type")==null)return null;var r=t.attributes.getNamedItem("Type").nodeValue,n=i.replaceString(r,"TerraViewer.",""),a=null;switch(n){case"AudioOverlay":a=new Na;break;case"BitmapOverlay":a=new ra;break;case"FlipBookOverlay":a=new va;break;case"ShapeOverlay":a=new na;break;case"TextOverlay":a=new jr;break;default:return null}return a._owner=e,a._initOverlayFromXml(t),a};var Gc={get_name:function(){return this._name},set_name:function(e){return this._name=e,e},get_owner:function(){return this._owner},set_owner:function(e){return this._owner=e,e},get_zOrder:function(){for(var e=0,t=i.enumerate(this._owner.get_overlays());t.moveNext();){var r=t.current;if(r===this)break;e++}return e},get_url:function(){return this._url},set_url:function(e){return this._url=e,e},get_linkID:function(){return this._linkID},set_linkID:function(e){return this._linkID=e,e},play:function(){},pause:function(){},stop:function(){},seek:function(e){},makePosition:function(e,t,r,n,a){e-=960,t-=558;var l=I.create(e+r,t+n,1347);return(this._domeMatX||this._domeMatY||this._domeAngle!==a)&&(this._domeMatX=e,this._domeMatY=t,this._domeMatrix=Z.translation(I.create(-e,-t,0)),this._domeMatrix._multiply(Z._rotationZ(a/180*Math.PI)),this._domeMatrix._multiply(Z.translation(I.create(e,t,0)))),l=I._transformCoordinate(l,this._domeMatrix),l},draw3D:function(e,t){Zt.useGl&&((this.texture==null||this.isDynamic)&&this.initializeTexture(),(!this.isDesignTimeOnly||t)&&(this.initializeGeometry(),this.updateRotation()))},cleanUp:function(){this.texture!=null&&(this.texture=null),this.texture2d=null},initializeTexture:function(){},prepMultimedia:function(){},cleanUpGeometry:function(){this.currentRotation=0,this.points=null},initializeGeometry:function(){this.points==null&&(this.currentRotation=0,this.points=new Array(4),this.points[0]=new qt,this.points[0].position=this.makePosition(this.get_x(),this.get_y(),-this.get_width()/2,-this.get_height()/2,this.get_rotationAngle()),this.points[0].tu=0,this.points[0].tv=0,this.points[0].color=this.get_color(),this.points[1]=new qt,this.points[1].position=this.makePosition(this.get_x(),this.get_y(),this.get_width()/2,-this.get_height()/2,this.get_rotationAngle()),this.points[1].tu=1,this.points[1].tv=0,this.points[1].color=this.get_color(),this.points[2]=new qt,this.points[2].position=this.makePosition(this.get_x(),this.get_y(),-this.get_width()/2,this.get_height()/2,this.get_rotationAngle()),this.points[2].tu=0,this.points[2].tv=1,this.points[2].color=this.get_color(),this.points[3]=new qt,this.points[3].position=this.makePosition(this.get_x(),this.get_y(),this.get_width()/2,this.get_height()/2,this.get_rotationAngle()),this.points[3].tu=1,this.points[3].tv=1,this.points[3].color=this.get_color())},updateRotation:function(){},get_animate:function(){return this._animate},set_animate:function(e){return this._animate!==e&&(this._animate=e,this._animate?(this._endX=this._x,this._endY=this._y,this._endRotationAngle=this._rotationAngle,this._endColor=this._color,this._endWidth=this._width,this._endHeight=this._height,this.cleanUpGeometry()):(this._endX=this._x=this.get_x(),this._endY=this._y=this.get_y(),this._endRotationAngle=this._rotationAngle=this.get_rotationAngle(),this._endColor=this._color=this.get_color(),this._endWidth=this._width=this.get_width(),this._endHeight=this._height=this.get_height(),this.cleanUpGeometry(),this._tweenFactor=0)),e},get_tweenFactor:function(){return this._tweenFactor},set_tweenFactor:function(e){return this._animate?this._tweenFactor!==e&&(this._tweenFactor=e,this.cleanUpGeometry()):this._tweenFactor=0,e},get_anchor:function(){return this._anchor},set_anchor:function(e){return this._anchor=e,e},get_position:function(){return xe.create(this.get_x(),this.get_y())},set_position:function(e){return this.set_x(e.x),this.set_y(e.y),e},get_x:function(){return this._x*(1-this._tweenFactor)+this._endX*this._tweenFactor},set_x:function(e){return this._tweenFactor<.5?this._x!==e&&(this._x=e,this.cleanUpGeometry()):this._endX!==e&&(this._endX=e,this.cleanUpGeometry()),e},get_y:function(){return this._y*(1-this._tweenFactor)+this._endY*this._tweenFactor},set_y:function(e){return this._tweenFactor<.5?this._y!==e&&(this._y=e,this.cleanUpGeometry()):this._endY!==e&&(this._endY=e,this.cleanUpGeometry()),e},get_width:function(){return this._width*(1-this._tweenFactor)+this._endWidth*this._tweenFactor},set_width:function(e){return e<5&&e&&(e=5),this._tweenFactor<.5?this._width!==e&&(this._width=e,this.cleanUpGeometry()):this._endWidth!==e&&(this._endWidth=e,this.cleanUpGeometry()),e},get_height:function(){return this._height*(1-this._tweenFactor)+this._endHeight*this._tweenFactor},set_height:function(e){return e<5&&e&&(e=5),this._tweenFactor<.5?this._height!==e&&(this._height=e,this.cleanUpGeometry()):this._endHeight!==e&&(this._endHeight=e,this.cleanUpGeometry()),e},get_color:function(){var e=i.truncate(this._color.r*(1-this._tweenFactor)+this._endColor.r*this._tweenFactor),t=i.truncate(this._color.g*(1-this._tweenFactor)+this._endColor.g*this._tweenFactor),r=i.truncate(this._color.b*(1-this._tweenFactor)+this._endColor.b*this._tweenFactor),n=i.truncate(this._color.a*(1-this._tweenFactor)+this._endColor.a*this._tweenFactor);return G.fromArgb(Math.max(0,Math.min(255,n)),Math.max(0,Math.min(255,e)),Math.max(0,Math.min(255,t)),Math.max(0,Math.min(255,r)))},set_color:function(e){return this._tweenFactor<.5?this._color!==e&&(this._color=e,this.cleanUpGeometry()):this._endColor!==e&&(this._endColor=e,this.cleanUpGeometry()),e},get_opacity:function(){return this.get_color().a/255},set_opacity:function(e){var t=this.get_color();return this.set_color(G.fromArgb(Math.min(255,i.truncate(e*255)),t.r,t.g,t.b)),this._opacity=e,e},get_rotationAngle:function(){return this._rotationAngle*(1-this._tweenFactor)+this._endRotationAngle*this._tweenFactor},set_rotationAngle:function(e){return this._tweenFactor<.5?this._rotationAngle!==e&&(this._rotationAngle=e,this.cleanUpGeometry()):this._endRotationAngle!==e&&(this._endRotationAngle=e,this.cleanUpGeometry()),e},hitTest:function(e){var t=new Array(1);t[0]=xe.create(e.x,e.y);var r=Si.rotateAt(-this.get_rotationAngle()/180*Math.PI,xe.create(this.get_x(),this.get_y()));r._transformPoints(t);var n=Ki.create(this.get_x()-this.get_width()/2,this.get_y()-this.get_height()/2,this.get_width(),this.get_height());return n.contains(t[0])},get_bounds:function(){return this._bounds},set_bounds:function(e){return this._bounds=e,e},get_interpolationType:function(){return this._interpolationType},set_interpolationType:function(e){return this._interpolationType=e,e},saveToXml:function(e,t){e._writeStartElement("Overlay"),e._writeAttributeString("Id",this.id),e._writeAttributeString("Type",this.getTypeName()),e._writeAttributeString("Name",this.get_name()),e._writeAttributeString("X",this._x.toString()),e._writeAttributeString("Y",this._y.toString()),e._writeAttributeString("Width",this._width.toString()),e._writeAttributeString("Height",this._height.toString()),e._writeAttributeString("Rotation",this._rotationAngle.toString()),e._writeAttributeString("Color",this._color.save()),e._writeAttributeString("Url",this._url),e._writeAttributeString("LinkID",this._linkID),e._writeAttributeString("Animate",this._animate.toString()),this._animate&&(e._writeAttributeString("EndX",this._endX.toString()),e._writeAttributeString("EndY",this._endY.toString()),e._writeAttributeString("EndWidth",this._endWidth.toString()),e._writeAttributeString("EndHeight",this._endHeight.toString()),e._writeAttributeString("EndRotation",this._endRotationAngle.toString()),e._writeAttributeString("EndColor",this._endColor.save()),e._writeAttributeString("InterpolationType",gt.toXml("InterpolationType",this._interpolationType))),e._writeAttributeString("Anchor",gt.toXml("OverlayAnchor",this._anchor)),this.writeOverlayProperties(e),e._writeEndElement()},getTypeName:function(){return"TerraViewer.Overlay"},addFilesToCabinet:function(e){},writeOverlayProperties:function(e){},_initOverlayFromXml:function(e){this.id=e.attributes.getNamedItem("Id").nodeValue,this.set_name(e.attributes.getNamedItem("Name").nodeValue),this._x=parseFloat(e.attributes.getNamedItem("X").nodeValue),this._y=parseFloat(e.attributes.getNamedItem("Y").nodeValue),this._width=parseFloat(e.attributes.getNamedItem("Width").nodeValue),this._height=parseFloat(e.attributes.getNamedItem("Height").nodeValue),this._rotationAngle=parseFloat(e.attributes.getNamedItem("Rotation").nodeValue),this._color=G.load(e.attributes.getNamedItem("Color").nodeValue),e.attributes.getNamedItem("Url")!=null&&this.set_url(e.attributes.getNamedItem("Url").nodeValue),e.attributes.getNamedItem("LinkID")!=null&&this.set_linkID(e.attributes.getNamedItem("LinkID").nodeValue),e.attributes.getNamedItem("Animate")!=null&&(this._animate=i.boolean(e.attributes.getNamedItem("Animate").nodeValue),this._animate&&(this._endX=parseFloat(e.attributes.getNamedItem("EndX").nodeValue),this._endY=parseFloat(e.attributes.getNamedItem("EndY").nodeValue),this._endColor=G.load(e.attributes.getNamedItem("EndColor").nodeValue),this._endWidth=parseFloat(e.attributes.getNamedItem("EndWidth").nodeValue),this._endHeight=parseFloat(e.attributes.getNamedItem("EndHeight").nodeValue),this._endRotationAngle=parseFloat(e.attributes.getNamedItem("EndRotation").nodeValue),e.attributes.getNamedItem("InterpolationType")!=null&&this.set_interpolationType(gt.parse("InterpolationType",e.attributes.getNamedItem("InterpolationType").nodeValue)))),this.initializeFromXml(e)},initializeFromXml:function(e){},toString:function(){return this.get_name()}};function gi(){this._singleSelectHandles=null,this._multiSelectHandles=null,this._focusHandles=null,this.selectionSet=[],this._focus=null,this._ratio=1,this._sprite=new Wn,this._centerX=0,this._centerY=0}var qc={clearSelection:function(){this.selectionSet.length=0},addSelection:function(e){e!=null&&(this.selectionSet.indexOf(e)>=0||this.selectionSet.push(e))},addSelectionRange:function(e){for(var t=i.enumerate(e);t.moveNext();){var r=t.current;this.selectionSet.push(r)}},isOverlaySelected:function(e){return this.selectionSet.indexOf(e)>=0},setSelection:function(e){this.selectionSet.length=0,e!=null&&this.selectionSet.push(e)},get_multiSelect:function(){return this.selectionSet.length>1},setSelectionRange:function(e){this.selectionSet.length=0;for(var t=i.enumerate(e);t.moveNext();){var r=t.current;this.selectionSet.push(r)}},get_focus:function(){return this._focus},set_focus:function(e){return this._focus=e,e},draw3D:function(e,t){if(this._ratio=1116/e.height,this._singleSelectHandles==null&&(this._singleSelectHandles=di.fromUrl("images/Selhand.bmp")),this._multiSelectHandles==null&&(this._multiSelectHandles=di.fromUrl("images/multiSelhand.bmp")),this._focusHandles==null&&(this._focusHandles=di.fromUrl("images/FocusHandles.png")),this.selectionSet.length>1)for(var r=i.enumerate(this.selectionSet);r.moveNext();){var n=r.current;n===this._focus?this._drawSelectionHandles(e,n,this._focusHandles):this._drawSelectionHandles(e,n,this._multiSelectHandles)}else for(var a=i.enumerate(this.selectionSet);a.moveNext();){var n=a.current;this._drawSelectionHandles(e,n,this._singleSelectHandles)}},_drawSelectionHandles:function(e,t,r){for(var n=this.makeHandles(t),a=t.get_rotationAngle(),l=0,f=0,c=i.enumerate(n);c.moveNext();){var d=c.current;gi._points[l+0]=new qt,gi._points[l+0].position=t.makePosition(this._centerX,this._centerY,d.get_left()-this._centerX,d.get_top()-this._centerY,a),gi._points[l+0].tu=f*(1/9),gi._points[l+0].tv=0,gi._points[l+0].color=Te.get_white(),gi._points[l+1]=new qt,gi._points[l+1].position=t.makePosition(this._centerX,this._centerY,d.get_right()-this._centerX,d.get_top()-this._centerY,a),gi._points[l+1].tu=(f+1)*(1/9),gi._points[l+1].tv=0,gi._points[l+1].color=Te.get_white(),gi._points[l+2]=new qt,gi._points[l+2].position=t.makePosition(this._centerX,this._centerY,d.get_left()-this._centerX,d.get_bottom()-this._centerY,a),gi._points[l+2].tu=f*(1/9),gi._points[l+2].tv=1,gi._points[l+2].color=Te.get_white(),gi._points[l+3]=new qt,gi._points[l+3].position=t.makePosition(this._centerX,this._centerY,d.get_right()-this._centerX,d.get_top()-this._centerY,a),gi._points[l+3].tu=(f+1)*(1/9),gi._points[l+3].tv=0,gi._points[l+3].color=Te.get_white(),gi._points[l+4]=new qt,gi._points[l+4].position=t.makePosition(this._centerX,this._centerY,d.get_right()-this._centerX,d.get_bottom()-this._centerY,a),gi._points[l+4].tu=(f+1)*(1/9),gi._points[l+4].tv=1,gi._points[l+4].color=Te.get_white(),gi._points[l+5]=new qt,gi._points[l+5].position=t.makePosition(this._centerX,this._centerY,d.get_left()-this._centerX,d.get_bottom()-this._centerY,a),gi._points[l+5].tu=f*(1/9),gi._points[l+5].tv=1,gi._points[l+5].color=Te.get_white(),l+=6,f++}this.get_multiSelect()?this._sprite.draw(e,gi._points,gi._points.length-6,r,!1,1):this._sprite.draw(e,gi._points,gi._points.length,r,!1,1)},pointToSelectionSpace:function(e){var t=new Array(1);t[0]=xe.create(e.x,e.y);var r=Si.rotateAt(-this.selectionSet[0].get_rotationAngle()/180*Math.PI,xe.create(this.selectionSet[0].get_x(),this.selectionSet[0].get_y()));return r._transformPoints(t),t[0]},pointToScreenSpace:function(e){var t=new Array(1);t[0]=xe.create(e.x,e.y);var r=Si.rotateAt(this.selectionSet[0].get_rotationAngle()/180*Math.PI,xe.create(this.selectionSet[0].get_x(),this.selectionSet[0].get_y()));return r._transformPoints(t),t[0]},hitTest:function(e){if(this.selectionSet.length===1)for(var t=i.enumerate(this.selectionSet);t.moveNext();)for(var r=t.current,n=this.makeHandles(r),a=0,l=this.pointToSelectionSpace(e),f=i.enumerate(n);f.moveNext();){var c=f.current;if(c.contains(l))return a;a++}return 11},makeHandles:function(e){var t=i.truncate(e.get_x()-e.get_width()/2)+.5,r=i.truncate(e.get_y())-e.get_height()/2+.5;this._centerX=e.get_x(),this._centerY=e.get_y();var n=e.get_width(),a=e.get_height(),l=12*this._ratio,f=new Array(9);return f[0]=Ki.create(t-l,r-l,l,l),f[1]=Ki.create(t+n/2-l/2,r-l,l,l),f[2]=Ki.create(t+n,r-l,l,l),f[3]=Ki.create(t+n,r+a/2-l/2,l,l),f[4]=Ki.create(t+n,r+a,l,l),f[5]=Ki.create(t+n/2-l/2,r+a,l,l),f[6]=Ki.create(t-l,r+a,l,l),f[7]=Ki.create(t-l,r+a/2-l/2,l,l),f[8]=Ki.create(t+n/2-l/2,r-30*this._ratio,l,l),f}};function $n(){this.bold=!1,this.italic=!1,this.underline=!1,this.fontSize=0,this.borderStyle=0}$n.create=function(e,t,r,n,a,l,f,c,d){var m=new $n;return m.text=e,m.bold=t,m.italic=r,m.underline=n,m.fontSize=a,m.fontName=l,m.foregroundColor=f,m.backgroundColor=c,m.borderStyle=d,m},$n._fromXml=function(e){var t=new $n;return t.text=ye.getInnerText(e),t.borderStyle=0,t.bold=i.boolean(e.attributes.getNamedItem("Bold").nodeValue),t.italic=i.boolean(e.attributes.getNamedItem("Italic").nodeValue),t.underline=i.boolean(e.attributes.getNamedItem("Underline").nodeValue),t.fontSize=parseFloat(e.attributes.getNamedItem("FontSize").nodeValue),t.fontName=e.attributes.getNamedItem("FontName").nodeValue,t.foregroundColor=G.load(e.attributes.getNamedItem("ForgroundColor").nodeValue),t.backgroundColor=G.load(e.attributes.getNamedItem("BackgroundColor").nodeValue),e.attributes.getNamedItem("BorderStyle")!=null&&(t.borderStyle=gt.parse("TextBorderStyle",e.attributes.getNamedItem("BorderStyle").nodeValue)),t};var Xc={toString:function(){return this.text},_saveToXml:function(e){e._writeStartElement("TextObject"),e._writeAttributeString("Bold",this.bold.toString()),e._writeAttributeString("Italic",this.italic.toString()),e._writeAttributeString("Underline",this.underline.toString()),e._writeAttributeString("FontSize",this.fontSize.toString()),e._writeAttributeString("FontName",this.fontName),e._writeAttributeString("ForgroundColor",this.foregroundColor.save()),e._writeAttributeString("BackgroundColor",this.backgroundColor.save()),e._writeAttributeString("BorderStyle",gt.toXml("TextBorderStyle",this.borderStyle)),e._writeString(this.text),e._writeEndElement()}};function Yr(){this._tourDirty=0,this._workingDirectory="",this.url="",this._tagId="",this._representativeThumbnailTourstop=0,this._id="",this._title="",this._runTime=0,this._lastDirtyCheck=0,this._description="",this._attributesAndCredits="",this._authorEmailOther="",this._authorEmail="",this._authorUrl="",this._authorPhone="",this._authorContactText="",this._orgName="None",this._orgUrl="",this._author="",this._authorImageUrl="",this._authorImage=null,this._organizationUrl="",this._filename="",this._level=0,this._type=268435456,this._taxonomy="",this._keywords="",this._objects="",this._editMode=!1,this.explicitTourLinks=[],this.implicitTourLinks=[],this._tourStops=[],this._currentTourstopIndex=-1,this._textureList={},this._textureList2d={},this._fileCache={},this.dontCleanUpTempFiles=!1,this._id=er.newGuid().toString()}Yr.get_baseWorkingDirectory=function(){return""},Yr.fromUrl=function(e,t){var r=new Yr;return r.url=e,r._callMe=t,r._cabinet=ga.fromUrl(e,i.bind("_loadXmlDocument",r)),r},Yr.fromUrlRaw=function(e,t){var r=new Yr;return r.url=e,r._callMe=t,r._cabinet=ga.fromUrl(e,t),r};var Yc={get_tourDirty:function(){return this._tourDirty>0},set_tourDirty:function(e){return e?this._tourDirty++:this._tourDirty=0,e},get_workingDirectory:function(){return i.emptyString(this._workingDirectory)&&(this._workingDirectory=Yr.get_baseWorkingDirectory()+this._id+"\\"),this._workingDirectory},set_workingDirectory:function(e){return this._workingDirectory=e,e},_loadXmlDocument:function(){var e=this;try{var t=this._cabinet.get_masterFile(),r=new FileReader;r.onloadend=function(n){var a=i.safeCast(r.result,String),l=new DOMParser;e.fromXml(l.parseFromString(a,"text/xml")),e._callMe()},r.readAsText(this._cabinet.getFileBlob(t))}catch(n){q.scriptInterface._fireTourError(n)}},fromXml:function(e){var t=ye.selectSingleNode(e,"Tour");this._id=t.attributes.getNamedItem("ID").nodeValue,this.set_title(t.attributes.getNamedItem("Title").nodeValue),this.set_author(t.attributes.getNamedItem("Author").nodeValue),t.attributes.getNamedItem("Descirption")!=null&&this.set_description(t.attributes.getNamedItem("Descirption").nodeValue),t.attributes.getNamedItem("AuthorEmail")!=null&&(this._authorEmail=t.attributes.getNamedItem("AuthorEmail").nodeValue),t.attributes.getNamedItem("Keywords")!=null&&this.set_keywords(t.attributes.getNamedItem("Keywords").nodeValue),t.attributes.getNamedItem("OrganizationName")!=null&&this.set_orgName(t.attributes.getNamedItem("OrganizationName").nodeValue),this._organizationUrl=t.attributes.getNamedItem("OrganizationUrl").nodeValue,this._level=gt.parse("UserLevel",t.attributes.getNamedItem("UserLevel").nodeValue),this._type=gt.parse("Classification",t.attributes.getNamedItem("Classification").nodeValue),this._taxonomy=t.attributes.getNamedItem("Taxonomy").nodeValue;for(var r=ye.selectSingleNode(t,"TourStops"),n=i.enumerate(r.childNodes);n.moveNext();){var a=n.current;a.nodeName==="TourStop"&&this.addTourStop(Sr._fromXml(this,a))}var l=ye.selectSingleNode(t,"ReferenceFrames");if(l!=null){for(var f=i.enumerate(l.childNodes);f.moveNext();){var c=f.current;if(c.nodeName==="ReferenceFrame"){var d=new ji;if(d.initializeFromXml(c),!i.keyExists(k.get_allMaps(),d.name)){var m=new Ti(d.name,18);m.frame=d,m.loadedFromTour=!0,k.get_allMaps()[d.name]=m}}}k.connectAllChildren(),k.loadTree()}var v=ye.selectSingleNode(t,"Layers");if(v!=null){for(var C=i.enumerate(v.childNodes);C.moveNext();){var T=C.current;if(T.nodeName==="Layer"){var A=ri.fromXml(T,!0);if(A!=null){if(i.canCast(A,Hi)){var $=A,N=$.get_imageSet();if(N.get_projection()===7&&N.get_extension()===".tsv"){q.singleton.addCatalogHips(N);continue}}var F=i.format("{0}.txt",A.id.toString());i.keyExists(k.get_layerList(),A.id)&&k.deleteLayerByID(A.id,!0,!1);try{A.loadedFromTour=!0,A.loadData(this,F),k.add(A,!1)}catch{}}}}k.loadTree()}this._tourDirty=0},saveToDataUrl:function(){return URL.createObjectURL(this.saveToBlob())},saveToBlob:function(){var e=!1;this.cleanUp();var t=this.getTourXML(),r=new ga;r.set_packageID(this.get_id()),r.addFile("Tour.wwtxml",new Blob([t])),this._authorImage!=null;for(var n=i.enumerate(this.get_tourStops());n.moveNext();){var a=n.current;a._addFilesToCabinet(r,e)}for(var l=this._createLayerMasterList(),f=i.enumerate(l);f.moveNext();){var c=f.current;i.keyExists(k.get_layerList(),c)&&k.get_layerList()[c].addFilesToCabinet(r)}return this.set_tourDirty(!1),r.packageFiles()},getTourXML:function(){var e=new ia;e.formatting=1,e._writeProcessingInstruction("xml","version='1.0' encoding='UTF-8'"),e._writeStartElement("Tour"),e._writeAttributeString("ID",this._id),e._writeAttributeString("Title",this._title),e._writeAttributeString("Descirption",this.get_description()),e._writeAttributeString("Description",this.get_description()),e._writeAttributeString("RunTime",(this.get_runTime()/1e3).toString()),e._writeAttributeString("Author",this._author),e._writeAttributeString("AuthorEmail",this._authorEmail),e._writeAttributeString("OrganizationUrl",this._organizationUrl),e._writeAttributeString("OrganizationName",this.get_orgName()),e._writeAttributeString("Keywords",this.get_keywords()),e._writeAttributeString("UserLevel",gt.toXml("UserLevel",this._level)),e._writeAttributeString("Classification",gt.toXml("Classification",this._type)),e._writeAttributeString("Taxonomy",this._taxonomy);var t=this._isTimelineTour();e._writeAttributeString("TimeLineTour",t.toString()),e._writeStartElement("TourStops");for(var r=i.enumerate(this.get_tourStops());r.moveNext();){var n=r.current;n._saveToXml(e,!0)}e._writeEndElement();var a=this._createLayerMasterList(),l=this._getReferenceFrameList();e._writeStartElement("ReferenceFrames");for(var f=i.enumerate(l);f.moveNext();){var c=f.current;c.saveToXml(e)}e._writeEndElement(),e._writeStartElement("Layers");for(var d=i.enumerate(a);d.moveNext();){var m=d.current;if(i.keyExists(k.get_layerList(),m)){var v=k.get_layerList()[m],C=v.get_name(),T=q.singleton.renderContext.getCatalogHipsByName(C);if(T!=null){var A=Hi.create(T);A.id=m,A.set_name(C),A.set_referenceFrame("Sky"),A.saveToXml(e)}else k.get_layerList()[m].saveToXml(e)}}return e._writeEndElement(),e._writeFullEndElement(),e._close(),e.body},_getReferenceFrameList:function(){for(var e=[],t=i.enumerate(i.keys(k.get_allMaps()));t.moveNext();){var r=t.current,n=k.get_allMaps()[r];(n.frame.reference===18||n.frame.reference===19)&&!(e.indexOf(n.frame)>=0)&&!n.frame._systemGenerated&&e.push(n.frame)}return e},_createLayerMasterList:function(){for(var e=[],t=i.enumerate(this.get_tourStops());t.moveNext();)for(var r=t.current,n=i.enumerate(i.keys(r.layers));n.moveNext();){var a=n.current;e.indexOf(a)>=0||i.keyExists(k.get_layerList(),a)&&e.push(a)}return e},_isTimelineTour:function(){return!1},get_tagId:function(){return this._tagId},set_tagId:function(e){return this._tagId=e,e},get_authorThumbnailFilename:function(){return"Author.Png"},get_tourThumbnailFilename:function(){return this._representativeThumbnailTourstop<this._tourStops.length?this._tourStops[this._representativeThumbnailTourstop].get_tourStopThumbnailFilename():null},get_id:function(){return this._id},set_id:function(e){return this._id=e,e},get_title:function(){return this._title},set_title:function(e){return this._title=e,this.set_tourDirty(!0),e},get_runTime:function(){return(!this._runTime||this._lastDirtyCheck!==this._tourDirty)&&(this._runTime=this._calculateRunTime(),this._lastDirtyCheck=this._tourDirty),this._runTime},get_description:function(){return this._description},set_description:function(e){return this._description=e,this.set_tourDirty(!0),e},get_attributesAndCredits:function(){return this._attributesAndCredits},set_attributesAndCredits:function(e){return this._attributesAndCredits=e,this.set_tourDirty(!0),e},get_authorEmailOther:function(){return this._authorEmailOther},set_authorEmailOther:function(e){return this._authorEmailOther=e,this.set_tourDirty(!0),e},get_authorEmail:function(){return this._authorEmail},set_authorEmail:function(e){return this._authorEmail=e,this.set_tourDirty(!0),e},get_authorUrl:function(){return this._authorUrl},set_authorUrl:function(e){return this._authorUrl=e,this.set_tourDirty(!0),e},get_authorPhone:function(){return this._authorPhone},set_authorPhone:function(e){return this._authorPhone=e,this.set_tourDirty(!0),e},get_authorContactText:function(){return this._authorContactText},set_authorContactText:function(e){return this._authorContactText=e,this.set_tourDirty(!0),e},get_orgName:function(){return this._orgName},set_orgName:function(e){return this._orgName=e,this.set_tourDirty(!0),e},get_orgUrl:function(){return this._orgUrl},set_orgUrl:function(e){return this._orgUrl=e,this.set_tourDirty(!0),e},get_author:function(){return this._author},set_author:function(e){return this._author=e,this.set_tourDirty(!0),e},get_authorImageUrl:function(){return this._authorImageUrl},set_authorImageUrl:function(e){return this._authorImageUrl=e,this.set_tourDirty(!0),e},get_authorImage:function(){return this._authorImage},set_authorImage:function(e){return this._authorImage=e,this.set_tourDirty(!0),e},get_organizationUrl:function(){return this._organizationUrl},set_organizationUrl:function(e){return this._organizationUrl=e,this.set_tourDirty(!0),e},get_fileName:function(){return this._filename},set_fileName:function(e){return this._filename=e,e},get_level:function(){return this._level},set_level:function(e){return this._level=e,this.set_tourDirty(!0),e},get_type:function(){return this._type},set_type:function(e){return this._type=e,this.set_tourDirty(!0),e},get_taxonomy:function(){return this._taxonomy},set_taxonomy:function(e){return this._taxonomy=e,this.set_tourDirty(!0),e},get_keywords:function(){return this._keywords},set_keywords:function(e){return this._keywords=e,this.set_tourDirty(!0),e},get_objects:function(){return this._objects},set_objects:function(e){return this._objects=e,this.set_tourDirty(!0),e},get_editMode:function(){return this._editMode},set_editMode:function(e){return this._editMode=e,e},get_tourStops:function(){return this._tourStops},set_tourStops:function(e){return this._tourStops=e,e},get_currentTourstopIndex:function(){return this._currentTourstopIndex},set_currentTourstopIndex:function(e){return this._currentTourstopIndex=e,e},addTourStop:function(e){e.set_owner(this),this.get_tourStops().push(e),this._currentTourstopIndex=this._tourStops.length-1,this.set_tourDirty(!0)},insertTourStop:function(e){e.set_owner(this),this._currentTourstopIndex>-1?this.get_tourStops().splice(this._currentTourstopIndex,0,e):(this.get_tourStops().push(e),this._currentTourstopIndex=this._tourStops.length-1),this.set_tourDirty(!0)},insertAfterTourStop:function(e){e.set_owner(this),this._currentTourstopIndex>-1||this._currentTourstopIndex<this.get_tourStops().length?this.get_tourStops().splice(this._currentTourstopIndex+1,0,e):(this.get_tourStops().push(e),this._currentTourstopIndex=this._tourStops.length-1),this.set_tourDirty(!0)},removeTourStop:function(e){i.remove(this._tourStops,e),this._currentTourstopIndex>this._tourStops.length-1&&this._currentTourstopIndex--,this.set_tourDirty(!0)},_calculateRunTime:function(){for(var e=0,t=0;t<this._tourStops.length;t++)if(e+=this._tourStops[t].get_duration(),t>0)switch(this._tourStops[t].get__transition()){case 0:if(this._tourStops[t].get_target().get_backgroundImageset()==null||this._tourStops[t-1].get_target().get_backgroundImageset().get_dataSetType()===this._tourStops[t].get_target().get_backgroundImageset().get_dataSetType()&&(this._tourStops[t-1].get_target().get_backgroundImageset().get_dataSetType()!==4||this._tourStops[t-1].get_target().get_target()===this._tourStops[t].get_target().get_target())){var r=this._tourStops[t-1].get_endTarget()==null?this._tourStops[t-1].get_target().get_camParams():this._tourStops[t-1].get_endTarget().get_camParams(),n=sn.create(r,this._tourStops[t].get_target().get_camParams());e+=n.get_moveTime()*1e3}break}return i.truncate(e)},elapsedTimeTillTourstop:function(e){if(!e&&e>=this._tourStops.length)return 0;for(var t=0,r=0;r<e;r++)if(t+=this._tourStops[r].get_duration(),r>0)switch(this._tourStops[r].get__transition()){case 0:var n=this._tourStops[r-1].get_endTarget()==null?this._tourStops[r-1].get_target().get_camParams():this._tourStops[r-1].get_endTarget().get_camParams();if(this._tourStops[r-1].get_target().get_backgroundImageset().get_dataSetType()===this._tourStops[r].get_target().get_backgroundImageset().get_dataSetType()&&(this._tourStops[r-1].get_target().get_backgroundImageset().get_dataSetType()!==4||this._tourStops[r-1].get_target().get_target()===this._tourStops[r].get_target().get_target())){var a=sn.create(n,this._tourStops[r].get_target().get_camParams());t+=a.get_moveTime()*1e3}break}return t/1e3},elapsedTimeSinceLastMaster:function(e){var t=null;if(!e&&e>=this._tourStops.length)return null;for(var r=0,n=0;n<e;n++)if(this._tourStops[n].get_masterSlide()&&(r=0,t=this._tourStops[n]),r+=this._tourStops[n].get_duration(),n>0)switch(this._tourStops[n].get__transition()){case 0:var a=this._tourStops[n-1].get_endTarget()==null?this._tourStops[n-1].get_target().get_camParams():this._tourStops[n-1].get_endTarget().get_camParams();if(this._tourStops[n-1].get_target().get_backgroundImageset().get_dataSetType()===this._tourStops[n].get_target().get_backgroundImageset().get_dataSetType()&&(this._tourStops[n-1].get_target().get_backgroundImageset().get_dataSetType()!==4||this._tourStops[n-1].get_target().get_target()===this._tourStops[n].get_target().get_target())){var l=sn.create(a,this._tourStops[n].get_target().get_camParams());r+=l.get_moveTime()*1e3}break}return new Mo(t,r/1e3)},getMasterSlideForIndex:function(e){for(var t=-1,r=0;r<e;r++)this._tourStops[r].get_masterSlide()&&(t=r);return t===-1?null:this._tourStops[t]},getTourStopIndexByID:function(e){if(!e||e==="Next")return this._currentTourstopIndex++;for(var t=0,r=i.enumerate(this._tourStops);r.moveNext();){var n=r.current;if(n.get_id()===e)return t;t++}return-1},cleanUp:function(){},getCachedTexture:function(e,t){if(this._textureList==null&&(this._textureList={}),i.keyExists(this._textureList,e))return t(),this._textureList[e];var r=this.getFileStream(e);if(i.whitespace(r))return null;var n=document.createElement("img");return n.src=this.getFileStream(e),n.addEventListener("load",function(){t()},!1),this._textureList[e]=n,n},getCachedTexture2d:function(e){if(this._textureList2d==null&&(this._textureList2d={}),i.keyExists(this._textureList2d,e))return this._textureList2d[e];var t=new di;return t.load(this.getFileStream(e)),this._textureList2d[e]=t,t},addCachedFile:function(e,t){this._fileCache[e]=t,i.keyExists(this._textureList2d,e)&&delete this._textureList2d[e],i.keyExists(this._textureList,e)&&delete this._textureList[e]},getFileStream:function(e){var t=this.getFileBlob(e);return t==null?null:URL.createObjectURL(t)},getFileBlob:function(e){return i.keyExists(this._fileCache,e)?this._fileCache[e]:this._cabinet!=null?this._cabinet.getFileBlob(this.get_workingDirectory()+e):null},get_currentTourStop:function(){return this._currentTourstopIndex>-1?this.get_tourStops()[this._currentTourstopIndex]:null},set_currentTourStop:function(e){for(var t=0,r=i.enumerate(this.get_tourStops());r.moveNext();){var n=r.current;if(n===e){this._currentTourstopIndex>-1,this._currentTourstopIndex=t;break}t++}return e},clearTempFiles:function(){}};function Co(){this.musicTrack=new zs,this.voiceTrack=new zs,this._tour=null,this.tourStopList=new So,this.tourEditorUI=new Vi,this._contextMenu=new un,this.nextSlideCallback=null,this.playing=!1,this._player=null,this._defultColor=Te.get_white()}var jc={setUiStrings:function(){},get_tour:function(){return this._tour},set_tour:function(e){return this._tour=e,this.tourEditorUI.set_tour(this._tour),this.tourStopList.tour=this._tour,_i.defaultAnchor=1,this._tour.get_tourStops().length>0&&(q.singleton.gotoTarget(this._tour.get_tourStops()[0].get_target(),!1,!0,!1),this._tour.set_currentTourstopIndex(0),this.tourStopList.selectedItem=this._tour.get_currentTourstopIndex(),this.musicTrack.target=this._tour.get_currentTourStop(),this.voiceTrack.target=this._tour.get_currentTourStop(),k.setVisibleLayerList(this._tour.get_currentTourStop().layers)),this.setEditMode(this._tour.get_editMode()),e},tour_CurrentTourstopChanged:function(){Bi._updateOverlayList(this._tour.get_currentTourStop(),this.tourEditorUI.selection),this.tourEditorUI!=null&&this.tourEditorUI.clearSelection(),this.tourStopList.refresh()},setFocusedChild:function(){},selectCurrent:function(){this.tourStopList.selectedItem=this._tour.get_currentTourstopIndex(),this.tourStopList.refresh()},tourEdit_Load:function(e,t){},playNow:function(e){this.playing=!0,(this.get_tour().get_editMode()||e)&&this.get_tour().set_currentTourstopIndex(-1),this.setPlayPauseMode()},_tourPlayer_TourEnded:function(e,t){},_endTour_CloseTour:function(e,t){},_endTour_LaunchTour:function(e,t){this.playNow(!0)},setEditMode:function(e){},tourStopList_ItemClicked:function(e,t){this._tour.get_currentTourStop()!==t&&(this._tour.set_currentTourStop(t),t!=null?(this.musicTrack.target=this._tour.get_currentTourStop(),this.voiceTrack.target=this._tour.get_currentTourStop()):(this.musicTrack.target=null,this.voiceTrack.target=null),this.tourEditorUI.clearSelection()),this.playing&&this._playFromHere_Click(e,new i.EventArgs)},tourStopList_ItemDoubleClicked:function(e,t){this.showSlideStartPosition(t)},showSlideStartPosition:function(e){this._tour.set_currentTourStop(e),e!=null?(this.musicTrack.target=this._tour.get_currentTourStop(),this.voiceTrack.target=this._tour.get_currentTourStop()):(this.musicTrack.target=null,this.voiceTrack.target=null),this.tourEditorUI.clearSelection(),this._tour.get_currentTourStop()!=null&&(this._tour.get_currentTourStop().syncSettings(),K.set_now(this._tour.get_currentTourStop().get_startTime()),K.set_syncToClock(!1),q.singleton.gotoTarget(e.get_target(),!1,!0,!1),this._tour.get_currentTourStop().set_tweenPosition(0),this._tour.get_currentTourStop()._updateLayerOpacity(),k.setVisibleLayerList(this._tour.get_currentTourStop().layers))},tourStopList_MouseClick:function(e,t){if(this._tour.get_editMode(),this.tourStopList.multipleSelection){this._contextMenu!=null&&this._contextMenu._dispose(),this._contextMenu=new un;var r=Pe.create(_e.getLocalizedText(1345,"Select All")),n=Pe.create(_e.getLocalizedText(427,"Cut")),a=Pe.create(_e.getLocalizedText(428,"Copy")),l=Pe.create(_e.getLocalizedText(429,"Paste")),f=Pe.create(_e.getLocalizedText(167,"Delete"));n.click=i.bind("_cutMenu_Click",this),a.click=i.bind("_copyMenu_Click",this),l.click=i.bind("_pasteMenu_Click",this),f.click=i.bind("_deleteMenu_Click",this),r.click=i.bind("_selectAllMenu_Click",this);var c=new ar;this._contextMenu.items.push(r),this._contextMenu.items.push(c),this._contextMenu.items.push(n),this._contextMenu.items.push(a),l.enabled=this.tourEditorUI.clipboardType==="WorldWideTelescope.Slide",this._contextMenu.items.push(l),this._contextMenu.items.push(f),this._contextMenu._show(Ei.get_position())}else if(this._tour.get_currentTourStop()==null){this._contextMenu!=null&&this._contextMenu._dispose(),this._contextMenu=new un;var r=Pe.create(_e.getLocalizedText(1345,"Select All")),l=Pe.create(_e.getLocalizedText(425,"Paste")),c=new ar,d=new ar,m=Pe.create(_e.getLocalizedText(426,"Add New Slide"));l.click=i.bind("_pasteMenu_Click",this),r.click=i.bind("_selectAllMenu_Click",this),m.click=i.bind("_addNewSlide_Click",this),l.enabled=this.tourEditorUI.clipboardType==="WorldWideTelescope.Slide",this._contextMenu.items.push(r),this._contextMenu.items.push(c),this._contextMenu.items.push(l),this._contextMenu.items.push(d),this._contextMenu.items.push(m),this._contextMenu._show(Ei.get_position())}else{this._contextMenu!=null&&this._contextMenu._dispose(),this._contextMenu=new un;var r=Pe.create(_e.getLocalizedText(1345,"Select All")),n=Pe.create(_e.getLocalizedText(427,"Cut")),a=Pe.create(_e.getLocalizedText(428,"Copy")),l=Pe.create(_e.getLocalizedText(429,"Paste")),f=Pe.create(_e.getLocalizedText(167,"Delete")),c=new ar,v=new ar,C=new ar,T=new ar,A=new ar,$=new ar,m=Pe.create(_e.getLocalizedText(431,"Insert New Slide")),N=Pe.create(_e.getLocalizedText(627,"Duplicate Slide at End Position")),F=Pe.create(_e.getLocalizedText(628,"Merge Tour after slide...")),z=Pe.create(_e.getLocalizedText(432,"Preview Tour From Here")),d=new ar,Y=Pe.create(_e.getLocalizedText(433,"Capture New Thumbnail")),W=Pe.create(_e.getLocalizedText(434,"Set Start Camera Position")),ee=Pe.create(_e.getLocalizedText(435,"Set End Camera Position")),ne=Pe.create(_e.getLocalizedText(436,"Show Start Camera Position")),ae=Pe.create(_e.getLocalizedText(437,"Show End Camera Position")),de=Pe.create(_e.getLocalizedText(438,"Master Slide"));Pe.create(_e.getLocalizedText(1346,"Create Timeline")),Pe.create(_e.getLocalizedText(1347,"Show Timeline"));var se=this._tour.get_currentTourStop().get_nextSlide();switch(se){case"":case null:case"Next":se=" ("+_e.getLocalizedText(610,"Next Slide")+")";break;case"Return":se=" ("+_e.getLocalizedText(602,"Return to Caller")+")";break;default:var we=this.get_tour().getTourStopIndexByID(se);we>-1&&(i.emptyString(this._tour.get_tourStops()[we].get_description())?se=i.format(" (Slide {0})",we):se=" ("+this._tour.get_tourStops()[we].get_description()+")");break}var fe=Pe.create(_e.getLocalizedText(590,"Set Next Slide")+se),$e=Pe.create(_e.getLocalizedText(439,"Track Date/Time/Location")),ve=Pe.create(_e.getLocalizedText(629,"Fade In Slide Elements")),ut=Pe.create(_e.getLocalizedText(20,"Properties")),ht=Pe.create(_e.getLocalizedText(1029,"Animation Tween Type")),Je=Pe.create(_e.getLocalizedText(1030,"Linear")),Ee=Pe.create(_e.getLocalizedText(1031,"Ease In/Out")),pi=Pe.create(_e.getLocalizedText(1032,"Ease In")),Ii=Pe.create(_e.getLocalizedText(1033,"Ease Out")),xi=Pe.create(_e.getLocalizedText(1034,"Exponential"));switch(Je.tag=0,Ee.tag=3,pi.tag=1,Ii.tag=2,xi.tag=4,Je.click=i.bind("_interpolation_Click",this),Ee.click=i.bind("_interpolation_Click",this),pi.click=i.bind("_interpolation_Click",this),Ii.click=i.bind("_interpolation_Click",this),xi.click=i.bind("_interpolation_Click",this),this._tour.get_currentTourStop().get_interpolationType()){case 0:Je.checked=!0;break;case 1:pi.checked=!0;break;case 2:Ii.checked=!0;break;case 3:Ee.checked=!0;break;case 4:xi.checked=!0;break}ht.dropDownItems.push(Je),ht.dropDownItems.push(Ee),ht.dropDownItems.push(pi),ht.dropDownItems.push(Ii),ht.dropDownItems.push(xi),r.click=i.bind("_selectAllMenu_Click",this),N.click=i.bind("_insertDuplicate_Click",this),n.click=i.bind("_cutMenu_Click",this),a.click=i.bind("_copyMenu_Click",this),l.click=i.bind("_pasteMenu_Click",this),f.click=i.bind("_deleteMenu_Click",this),m.click=i.bind("_insertNewSlide_Click",this),ut.click=i.bind("_properties_Click",this),Y.click=i.bind("_captureThumbnail_Click",this),W.click=i.bind("_setSkyPosition_Click",this),ee.click=i.bind("_setEndSkyPosition_Click",this),ae.click=i.bind("_showEndSkyPosition_Click",this),ne.click=i.bind("_showSkyPosition_Click",this),z.click=i.bind("_playFromHere_Click",this),de.click=i.bind("_masterSlide_Click",this),fe.click=i.bind("_setNextSlide_Click",this),$e.click=i.bind("_trackSpaceTime_Click",this),F.click=i.bind("_insertSlideshow_Click",this),ve.click=i.bind("_fadeInOverlays_Click",this),this._tour.get_currentTourStop().get_masterSlide()&&(de.checked=!0),this._tour.get_currentTourStop().get_hasTime()&&($e.checked=!0),ve.checked=this._tour.get_currentTourStop().get_fadeInOverlays(),this._contextMenu.items.push(r),this._contextMenu.items.push($),this._contextMenu.items.push(n),this._contextMenu.items.push(a),l.enabled=this.tourEditorUI.clipboardType==="WorldWideTelescope.Slide",this._contextMenu.items.push(l),this._contextMenu.items.push(f),this._contextMenu.items.push(c),this._contextMenu.items.push(m),this._contextMenu.items.push(N),this._contextMenu.items.push(F),this._contextMenu.items.push(d),this._contextMenu.items.push(z),this._contextMenu.items.push(v),this._contextMenu.items.push(W),this._contextMenu.items.push(ee),this._contextMenu.items.push(C),this._contextMenu.items.push(ne),this._contextMenu.items.push(ae),this._contextMenu.items.push(T),this._contextMenu.items.push(Y),this._contextMenu.items.push(A),this._contextMenu.items.push(de),this._contextMenu.items.push(fe),this._contextMenu.items.push(ve),this._contextMenu.items.push($e),this._contextMenu.items.push(ht),this._contextMenu._show(xe.create(t.clientX,t.clientY))}},_selectAllMenu_Click:function(e,t){this.tourStopList.selectAll()},_interpolation_Click:function(e,t){var r=e;this._tour.get_currentTourStop().set_interpolationType(r.tag)},_nextSlideChosen:function(){this._selectDialog.get_OK()&&this._tour.get_currentTourStop().set_nextSlide(this._selectDialog.get_id())},_setNextSlide_Click:function(e,t){this._selectDialog=new Us(null),this.nextSlideCallback(this._selectDialog,i.bind("_nextSlideChosen",this))},_insertDuplicate_Click:function(e,t){rt.push(new ea(_e.getLocalizedText(530,"Duplicate Slide at End Position"),this._tour));var r=this._tour.get_currentTourStop().copy();if(r!=null){r.get_endTarget()!=null&&(r.get_endTarget().set_backgroundImageset(r.get_target().get_backgroundImageset()),r.get_endTarget().set_studyImageset(r.get_target().get_studyImageset()),r.set_target(r.get_endTarget()),r.set_startTime(r.get_endTime()),r.set_endTarget(null));for(var n=i.enumerate(r.get_overlays());n.moveNext();){var a=n.current;a.set_tweenFactor(1),a.set_animate(!a.get_animate()),a.set_animate(!a.get_animate())}r.set_tweenPosition(0),r.set_fadeInOverlays(!1),this._tour.insertAfterTourStop(r),this.tourStopList.refresh()}},_fadeInOverlays_Click:function(e,t){this._tour.get_currentTourStop().set_fadeInOverlays(!this._tour.get_currentTourStop().get_fadeInOverlays())},_insertSlideshow_Click:function(e,t){},_trackSpaceTime_Click:function(e,t){rt.push(new oi(_e.getLocalizedText(532,"Track Time Edit"),this._tour)),this._tour.get_currentTourStop().set_hasTime(!this._tour.get_currentTourStop().get_hasTime())},_masterSlide_Click:function(e,t){rt.push(new oi(_e.getLocalizedText(533,"Master Slide State Edit"),this._tour)),this._tour.get_currentTourStop().set_masterSlide(!this._tour.get_currentTourStop().get_masterSlide()),this.tourStopList.refresh()},_playFromHere_Click:function(e,t){this.playFromCurrentTourstop()},playFromCurrentTourstop:function(){this.playing=!0,q.singleton.gotoTarget(this._tour.get_currentTourStop().get_target(),!1,!0,!1),K.set_now(this._tour.get_currentTourStop().get_startTime()),K.set_syncToClock(!1),this.setPlayPauseMode()},playFromTourstop:function(e){this._tour.set_currentTourStop(e),this.playFromCurrentTourstop()},_showSkyPosition_Click:function(e,t){this._tour.get_currentTourStop()!=null&&(q.singleton.gotoTarget(this._tour.get_currentTourStop().get_target(),!1,!0,!1),this._tour.get_currentTourStop().syncSettings(),K.set_now(this._tour.get_currentTourStop().get_startTime()),K.set_syncToClock(!1),this._tour.get_currentTourStop().set_tweenPosition(0),k.setVisibleLayerList(this._tour.get_currentTourStop().layers),this.tourStopList.refresh())},_showEndSkyPosition_Click:function(e,t){this._tour.get_currentTourStop().set_tweenPosition(1),this._tour.get_currentTourStop()._updateLayerOpacity(),this._tour.get_currentTourStop()!=null&&this._tour.get_currentTourStop().get_endTarget()!=null&&(q.singleton.gotoTargetFull(!1,!0,this._tour.get_currentTourStop().get_endTarget().get_camParams(),this._tour.get_currentTourStop().get_target().get_studyImageset(),this._tour.get_currentTourStop().get_target().get_backgroundImageset()),q.singleton.renderContext.set_solarSystemTrack(this._tour.get_currentTourStop().get_endTarget().get_target()),K.set_now(this._tour.get_currentTourStop().get_endTime()),this._tour.get_currentTourStop().syncSettings(),k.setVisibleLayerList(this._tour.get_currentTourStop().layers),K.set_syncToClock(!1),this.tourStopList.refresh(),this.tourEditorUI.clearSelection())},_setEndSkyPosition_Click:function(e,t){if(this._tour.get_currentTourStop()!=null){rt.push(new oi(_e.getLocalizedText(435,"Set End Camera Position"),this._tour));var r=hr.createCameraParams("End Place",q.singleton.renderContext.viewCamera.copy(),268435456,q.singleton.constellation,q.singleton.renderContext.get_backgroundImageset().get_dataSetType(),q.singleton.renderContext.get_solarSystemTrack());this._tour.get_currentTourStop().set_endTarget(r),this._tour.get_currentTourStop().get_endTarget().set_constellation(q.singleton.constellation),this._tour.get_currentTourStop().set_endTime(K.get_now()),this._tour.get_currentTourStop().set_tweenPosition(1);for(var n=i.enumerate(i.keys(this._tour.get_currentTourStop().layers));n.moveNext();){var a=n.current,l=this._tour.get_currentTourStop().layers[a];i.keyExists(k.get_layerList(),l.id)&&(l.endOpacity=k.get_layerList()[l.id].get_opacity(),l.endParams=k.get_layerList()[l.id].getParams())}this._tour.get_currentTourStop()._updateLayerOpacity(),this.tourStopList.refresh(),Ea.refreshUi(),this.tourEditorUI.clearSelection()}},_setSkyPosition_Click:function(e,t){this._tour.get_currentTourStop()!=null&&(rt.push(new oi(_e.getLocalizedText(434,"Set Start Camera Position"),this._tour)),this._tour.get_currentTourStop().get_target().set_target(q.singleton.renderContext.get_solarSystemTrack()),this._tour.get_currentTourStop().get_target().set_type(q.singleton.renderContext.get_backgroundImageset().get_dataSetType()),this._tour.get_currentTourStop().get_target().set_camParams(q.singleton.renderContext.viewCamera.copy()),this._tour.get_currentTourStop().get_target().set_constellation(q.singleton.constellation),this._tour.get_currentTourStop().get_target().set_studyImageset(q.singleton.renderContext.get_foregroundImageset()),this._tour.get_currentTourStop().get_target().set_type(q.singleton.renderContext.get_backgroundImageset().get_dataSetType()),this._tour.get_currentTourStop().get_target().set_backgroundImageset(q.singleton.renderContext.get_backgroundImageset().get_stockImageSet()),this._tour.get_currentTourStop().captureSettings(),this._tour.get_currentTourStop().layers=k._getVisibleLayerList(this._tour.get_currentTourStop().layers),this._tour.get_currentTourStop().set_tweenPosition(0),this.tourStopList.refresh(),Ea.refreshUi(),this.tourEditorUI.clearSelection())},_captureThumbnail_Click:function(e,t){this._tour.get_currentTourStop()!=null&&this._captureThumbnail(this._tour.get_currentTourStop())},_captureThumbnail:function(e){var t=this;q.singleton.captureThumbnail(function(r){var n=i.format("{0}.thumb.png",e.get_id());t._tour.addCachedFile(n,r),e.set_thumbnail(t._tour.getCachedTexture(n,function(){t.tourStopList.refresh()}))})},_properties_Click:function(e,t){throw new Error("The method or operation is not implemented.")},tourStopList_AddNewSlide:function(e,t){this.addSlide(!1),this.tourStopList.ensureAddVisible()},_addNewSlide_Click:function(e,t){this.addSlide(!1),this.tourStopList.ensureAddVisible()},_insertNewSlide_Click:function(e,t){this.addSlide(!0)},addSlide:function(e){rt.push(new ea(_e.getLocalizedText(426,"Add New Slide"),this._tour)),Ei.set_current(vi.get_waitCursor());var t="Current Screen",r=hr.createCameraParams(t,q.singleton.renderContext.viewCamera.copy(),268435456,q.singleton.constellation,q.singleton.renderContext.get_backgroundImageset().get_dataSetType(),q.singleton.renderContext.get_solarSystemTrack());r.set_studyImageset(q.singleton.renderContext.get_foregroundImageset()),r.set_backgroundImageset(q.singleton.renderContext.get_backgroundImageset().get_stockImageSet());var n=Sr.create(r);e?this._tour.insertTourStop(n):this._tour.addTourStop(n),this._tour.get_currentTourStop()!=null?(this.musicTrack.target=this._tour.get_currentTourStop(),this.voiceTrack.target=this._tour.get_currentTourStop()):(this.musicTrack.target=null,this.voiceTrack.target=null),this._tour.get_currentTourStop().layers=k._getVisibleLayerList(this._tour.get_currentTourStop().layers),this._captureThumbnail(n),this.tourStopList.selectedItem=this.tourStopList.findItem(n),this.tourStopList.refresh(),this.tourEditorUI.clearSelection(),Ei.set_current(vi.get_defaultV()),Ea.refreshUi()},_deleteMenu_Click:function(e,t){rt.push(new ea(_e.getLocalizedText(534,"Delete Slide"),this._tour));for(var r=i.enumerate(i.keys(this.tourStopList.selectedItems));r.moveNext();){var n=r.current,a=this.tourStopList.selectedItems[n];this._tour.removeTourStop(a)}i.clearKeys(this.tourStopList.selectedItems),this.tourStopList.selectedItem=-1,this._tour.set_currentTourStop(null),this.musicTrack.target=null,this.voiceTrack.target=null,this.tourStopList.refresh(),this.tourEditorUI.clearSelection()},_pasteMenu_Click:function(e,t){if(this.tourEditorUI.clipboardType==="WorldWideTelescope.Slide"){rt.push(new ea(_e.getLocalizedText(535,"Paste Slide"),this._tour));for(var r=new DOMParser,n=r.parseFromString(this.tourEditorUI.clipboardData,"text/xml"),a=ye.selectSingleNode(n,"TourStops"),l=new i.Stack,f=i.enumerate(a.childNodes);f.moveNext();){var c=f.current;if(c.nodeName==="TourStop"){var d=Sr._fromXml(this._tour,c);d.set_id(er.newGuid().toString()),l.push(d)}}i.clearKeys(this.tourStopList.selectedItems);for(var m=this.tourStopList.selectedItem+l.count-1;l.count>0;){var d=l.pop();this._tour.insertTourStop(d),this.tourStopList.selectedItems[m--]=d}this.tourStopList.refresh(),this.tourEditorUI.clearSelection()}},_copyMenu_Click:function(e,t){var r=new ia;r._writeProcessingInstruction("xml","version='1.0' encoding='UTF-8'"),r._writeStartElement("TourStops");for(var n=i.enumerate(i.keys(this.tourStopList.selectedItems));n.moveNext();){var a=n.current,l=this.tourStopList.selectedItems[a];l._saveToXml(r,!0)}r._writeEndElement(),this.tourEditorUI.clipboardType="WorldWideTelescope.Slide",this.tourEditorUI.clipboardData=r.body},_cutMenu_Click:function(e,t){rt.push(new ea(_e.getLocalizedText(536,"Cut Slide"),this._tour)),this._copyMenu_Click(e,t);for(var r=i.enumerate(i.keys(this.tourStopList.selectedItems));r.moveNext();){var n=r.current,a=this.tourStopList.selectedItems[n];this._tour.removeTourStop(a)}i.clearKeys(this.tourStopList.selectedItems),this.tourStopList.refresh(),this.tourEditorUI.clearSelection()},pauseTour:function(){this.playing&&(this.playing=!1),this.setPlayPauseMode()},preview_Click:function(e,t){this.playing=!this.playing,this.playing&&this._tour.get_editMode()&&this.get_tour().set_currentTourstopIndex(-1),this.setPlayPauseMode()},setPlayPauseMode:function(){this._tour.get_editMode()?this.playing?(this._player==null&&(this._player=new Ht),this._player.set_tour(this._tour),q.singleton.uiController=this._player,this._player.play(),this.tourStopList.showAddButton=!1):(q.singleton.uiController=this.tourEditorUI,this._player!=null&&this._player.stop(!1),this._player=null,q.singleton.set__mover(null),this.tourStopList.showAddButton=this._tour.get_editMode()):this.playing?(this._player==null&&(this._player=new Ht),this._player.set_tour(this._tour),q.singleton.uiController=this._player,this._player.play(),this.tourStopList.showAddButton=!1):(q.singleton.uiController=null,q.singleton.renderContext.freezeView(),this._player!=null&&this._player.stop(!1),this._player=null,q.singleton.uiController=null,q.singleton.set__mover(null),this.tourStopList.showAddButton=this._tour.get_editMode()),this.tourStopList.refresh()},playerTimer_Tick:function(e,t){this.playing&&this._player!=null&&(Ht.get_playing()?this.tourStopList.selectedItem!==this._tour.get_currentTourstopIndex()&&(this.tourStopList.selectedItem=this._tour.get_currentTourstopIndex()):(this.playing=!1,this.setPlayPauseMode()))},insertShapeCircle_Click:function(e,t){this.tourEditorUI.addShape("",0)},insertShapeRectangle_Click:function(e,t){this.tourEditorUI.addShape("",1)},insertShapeLine_Click:function(e,t){this.tourEditorUI.addShape("",5)},insertDonut_Click:function(e,t){this.tourEditorUI.addShape("",3)},_addArrow_Click:function(e,t){this.tourEditorUI.addShape("",4)},insertVideo_Click:function(e,t){},insertAudio_Click:function(e,t){},insertHyperlink_Click:function(e,t){},colorPicker_Click:function(e,t){},tourEditTab_Leave:function(e,t){},editTourProperties_Click:function(e,t){},saveTour_Click:function(e,t){this.save(!1)},save:function(e){return!0},addVideo_Click:function(e,t){},addPicture_Click:function(e,t){},addShape_Click:function(e,t){},_addOpenRectangle_Click:function(e,t){this.tourEditorUI.addShape("",6)},_addStar_Click:function(e,t){this.tourEditorUI.addShape("",2)},addText_Click:function(e,t){},preview_EnabledChanged:function(e,t){this.playing},preview_MouseEnter:function(e,t){},preview_MouseLeave:function(e,t){},preview_MouseUp:function(e,t){},preview_MouseDown:function(e,t){},tourStopList_ItemHover:function(e,t){},refresh:function(){},undoStep:function(){rt.peekAction()&&(rt.stepBack(),this.tourStopList.refresh(),this.tourStopList.selectedItem=this._tour.get_currentTourstopIndex(),this.showSlideStartPosition(this._tour.get_currentTourStop()),this.refresh(),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.tourEditorUI.selection))},redoStep:function(){rt.peekRedoAction()&&(rt.stepForward(),this.tourStopList.refresh(),this.tourStopList.selectedItem=this._tour.get_currentTourstopIndex(),this.showSlideStartPosition(this._tour.get_currentTourStop()),this.refresh(),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.tourEditorUI.selection))},tourStopList_ShowEndPosition:function(e,t){this._showEndSkyPosition_Click(this,new i.EventArgs)},tourStopList_ShowStartPosition:function(e,t){this.showSlideStartPosition(this.get_tour().get_currentTourStop()),this.tourEditorUI.clearSelection()},tourStopList_KeyDown:function(e,t){if(t.ctrlKey)switch(t.keyCode){case 67:this._copyMenu_Click(null,new i.EventArgs);break;case 86:this._pasteMenu_Click(null,new i.EventArgs);break;case 88:this._cutMenu_Click(null,new i.EventArgs);break;case 90:rt.peekAction()?Fr._undoStep():bi._beep();break;case 89:rt.peekRedoAction()?Fr._redoStep():bi._beep();break}t.keyCode===46&&this._deleteMenu_Click(null,new i.EventArgs)},_ensureSelectedVisible:function(){this.tourStopList.ensureSelectedVisible()}};function Vi(){this.selection=new gi,this._contextMenu=new un,this._tour=null,this._mouseDown=!1,this._selectionAction=11,this._needUndoFrame=!1,this._contextPoint=new xe,this._dragCopying=!1,this._brokeThreshold=!1,this.nextSlideCallback=null,this.clipboardData="",this.clipboardType="",this.editTextCallback=null,this._defaultColor=Te.get_white()}var Wc={render:function(e){if(e.setupMatricesOverlays(),!(this._tour==null||this._tour.get_currentTourStop()==null)){for(var t=i.enumerate(this._tour.get_currentTourStop().get_overlays());t.moveNext();){var r=t.current;r.get_animate()&&this.get_tour().get_currentTourStop().get_keyFramed()?r.set_tweenFactor(this._tour.get_currentTourStop().get_tweenPosition()):this.get_tour().get_currentTourStop().get_keyFramed()||r.set_tweenFactor(this._tour.get_currentTourStop().get_tweenPosition()<.5?0:1),r.draw3D(e,!0)}this.selection.draw3D(e,1),Vi.currentEditor!=null&&Vi.currentEditor.render(e),U.tourSettings=null}},get_tour:function(){return this._tour},set_tour:function(e){return this._tour=e,e},close:function(){this._tour!=null&&(this._tour=null,this.set_focus(null))},clearSelection:function(){this.selection.clearSelection(),Bi._updateOverlayListSelection(this.selection),this.set_focus(null)},get_focus:function(){return this.selection.get_focus()},set_focus:function(e){return this.selection.set_focus(e),e},pointToView:function(e){var t=q.singleton.renderContext.height,r=q.singleton.renderContext.width,n=q.singleton.renderContext.width/q.singleton.renderContext.height*1116,a=e.x/r*n-(n-1920)/2,l=e.y/t*1116;return xe.create(a,l)},mouseDown:function(e,t){this._brokeThreshold=!1,this._needUndoFrame=!0;var r=this.pointToView(xe.create(t.offsetX,t.offsetY));if(this._tour==null||this._tour.get_currentTourStop()==null)return this._needUndoFrame=!1,!1;if(Vi.currentEditor!=null&&Vi.currentEditor.mouseDown(e,t))return!0;if(this.get_focus()!=null){if(this.selection.get_multiSelect())for(var n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;if(a.hitTest(r))return this._selectionAction=9,this._mouseDown=!0,this._pointDown=r,this.set_focus(a),t.ctrlKey&&(this._dragCopying=!0),!0}else if(this.get_focus().hitTest(r))return this._selectionAction=9,this._mouseDown=!0,this._pointDown=r,t.ctrlKey&&(this._dragCopying=!0),!0;var l=this.selection.hitTest(r);if(l!==11)return this._selectionAction=l,this._mouseDown=!0,l===8?this._pointDown=r:this._pointDown=this.selection.pointToSelectionSpace(r),!0}for(var f=this._tour.get_currentTourStop().get_overlays().length-1;f>=0;f--)if(this._tour.get_currentTourStop().get_overlays()[f].hitTest(r))return this._selectionAction=9,this.set_focus(this._tour.get_currentTourStop().get_overlays()[f]),t.ctrlKey||t.shiftKey?this.selection.addSelection(this.get_focus()):this.selection.setSelection(this.get_focus()),Bi._updateOverlayListSelection(this.selection),this._mouseDown=!0,this._pointDown=r,!0;return this.set_focus(null),this.clearSelection(),this._needUndoFrame=!1,!1},mouseUp:function(e,t){return this._brokeThreshold=!1,Vi.currentEditor!=null&&Vi.currentEditor.mouseUp(e,t)?!0:(this._contextPoint=xe.create(t.offsetX,t.offsetY),this._mouseDown?(this._mouseDown=!1,t.button===2&&this.get_focus()!=null&&this.showSelectionContextMenu(xe.create(t.offsetX,t.offsetY)),!0):t.button===2?(this.get_focus()==null&&this._showNoSelectionContextMenu(xe.create(t.offsetX,t.offsetY)),!0):!1)},mouseMove:function(e,t){if(Vi.currentEditor!=null&&Vi.currentEditor.mouseMove(e,t))return!0;var r=this.pointToView(xe.create(t.offsetX,t.offsetY));if(this._mouseDown&&this.get_focus()!=null){var n=null,a=_e.getLocalizedText(502,"Edit");this._needUndoFrame&&(n=new oi(_e.getLocalizedText(502,"Edit"),this._tour));var l,f;if(this._selectionAction!==9&&this._selectionAction!==8){var c=this.selection.pointToSelectionSpace(r);l=c.x-this._pointDown.x,f=c.y-this._pointDown.y,this._pointDown=c}else{if(l=r.x-this._pointDown.x,f=r.y-this._pointDown.y,this._selectionAction===9&&!this._brokeThreshold)if(Math.abs(l)>3||Math.abs(f)>3)this._brokeThreshold=!0;else return!0;this._pointDown=r}if(this._dragCopying)if(this.selection.get_multiSelect()){var d=this.selection.selectionSet;this.clearSelection();for(var m=i.enumerate(d);m.moveNext();){var v=m.current,C=this.addOverlay(v);C.set_x(v.get_x()),C.set_y(v.get_y()),this.set_focus(C),this.selection.addSelection(this.get_focus())}Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection),this._dragCopying=!1}else{var C=this.addOverlay(this.get_focus());C.set_x(this.get_focus().get_x()),C.set_y(this.get_focus().get_y()),this.set_focus(C),this.selection.setSelection(this.get_focus()),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection),this._dragCopying=!1}var T=this.get_focus().get_width()/this.get_focus().get_height(),A=xe.create(this.get_focus().get_x(),this.get_focus().get_y());if(t.ctrlKey)switch(a=_e.getLocalizedText(537,"Resize"),this._selectionAction){case 0:this.get_focus().set_width(Math.max(2,this.get_focus().get_width()-l*2)),this.get_focus().set_height(Math.max(2,this.get_focus().get_height()-l/T*2));break;case 1:this.get_focus().set_height(Math.max(2,this.get_focus().get_height()-f*2));break;case 2:this.get_focus().set_width(Math.max(2,this.get_focus().get_width()+l*2)),this.get_focus().set_height(Math.max(2,this.get_focus().get_height()+l/T*2));break;case 3:this.get_focus().set_width(Math.max(2,this.get_focus().get_width()+l*2));break;case 4:this.get_focus().set_width(Math.max(2,this.get_focus().get_width()+l*2)),this.get_focus().set_height(Math.max(2,this.get_focus().get_height()+l/T*2));break;case 5:this.get_focus().set_height(Math.max(2,this.get_focus().get_height()+f*2));break;case 6:this.get_focus().set_width(Math.max(2,this.get_focus().get_width()-l*2)),this.get_focus().set_height(Math.max(2,this.get_focus().get_height()-l/T*2));break;case 7:this.get_focus().set_width(Math.max(2,this.get_focus().get_width()-l*2));break;case 8:a=_e.getLocalizedText(538,"Rotate"),this.get_focus().set_rotationAngle(this.get_focus().get_rotationAngle()+l/10);break;case 9:a=_e.getLocalizedText(539,"Drag Copy"),A.x+=l,A.y+=f;break}else switch(this._selectionAction!==8&&this._selectionAction!==9&&(l>this.get_focus().get_width()-2&&(l=0),f>this.get_focus().get_height()-2&&(f=0)),a=_e.getLocalizedText(537,"Resize"),this._selectionAction){case 0:this.get_focus().set_width(this.get_focus().get_width()-l),this.get_focus().set_height(this.get_focus().get_height()-l/T),A.x+=l/2,A.y+=l/T/2;break;case 1:this.get_focus().set_height(this.get_focus().get_height()-f),A.y+=f/2;break;case 2:this.get_focus().set_width(this.get_focus().get_width()+l),this.get_focus().set_height(this.get_focus().get_height()+l/T),A.x+=l/2,A.y-=l/T/2;break;case 3:this.get_focus().set_width(this.get_focus().get_width()+l),A.x+=l/2;break;case 4:this.get_focus().set_width(this.get_focus().get_width()+l),this.get_focus().set_height(this.get_focus().get_height()+l/T),A.x+=l/2,A.y+=l/T/2;break;case 5:this.get_focus().set_height(this.get_focus().get_height()+f),A.y+=f/2;break;case 6:this.get_focus().set_width(this.get_focus().get_width()-l),this.get_focus().set_height(this.get_focus().get_height()-l/T),A.x+=l/2,A.y-=l/T/2;break;case 7:this.get_focus().set_width(this.get_focus().get_width()-l),A.x+=l/2;break;case 8:a=_e.getLocalizedText(538,"Rotate"),this.get_focus().set_rotationAngle(this.get_focus().get_rotationAngle()+l);break;case 9:a=_e.getLocalizedText(540,"Move"),A.x+=l,A.y+=f;break}if(this._selectionAction!==9&&this._selectionAction!==8&&(A=this.selection.pointToScreenSpace(A)),this.selection.get_multiSelect())for(var $=i.enumerate(this.selection.selectionSet);$.moveNext();){var v=$.current;v.set_x(v.get_x()+l),v.set_y(v.get_y()+f)}else this.get_focus().set_x(A.x),this.get_focus().set_y(A.y);this._needUndoFrame&&(this._needUndoFrame=!1,n.set_actionText(a),rt.push(n))}else if(this.get_focus()!=null){if(this.get_focus().hitTest(r))return Ei.set_current(vi.get_sizeAll()),!1;var N=this.selection.hitTest(r);if(N===11)return!1;switch(N){case 0:Ei.set_current(vi.get_sizeNWSE());break;case 1:Ei.set_current(vi.get_sizeNS());break;case 2:Ei.set_current(vi.get_sizeNESW());break;case 3:Ei.set_current(vi.get_sizeWE());break;case 4:Ei.set_current(vi.get_sizeNWSE());break;case 5:Ei.set_current(vi.get_sizeNS());break;case 6:Ei.set_current(vi.get_sizeNESW());break;case 7:Ei.set_current(vi.get_sizeWE());break;case 8:Ei.set_current(vi.get_sizeWE());break}}return!1},_showNoSelectionContextMenu:function(e){if(this._contextMenu!=null&&this._contextMenu._dispose(),this._tour.get_currentTourStop()!=null){this._contextMenu=new un;var t=Pe.create(_e.getLocalizedText(425,"Paste"));t.enabled=this.clipboardType==="WorldWideTelescope.Overlay",t.click=i.bind("_pasteMenu_Click",this),this._contextMenu.items.push(t),this._contextMenu._show(e)}},_addOpenRectangle_Click:function(e,t){this.addShape("",6)},_addStar_Click:function(e,t){this.addShape("",2)},_insertShapeCircle_Click:function(e,t){this.addShape("",0)},_insertShapeRectangle_Click:function(e,t){this.addShape("",1)},_insertShapeLine_Click:function(e,t){this.addShape("",5)},_insertDonut_Click:function(e,t){this.addShape("",3)},_addArrow_Click:function(e,t){this.addShape("",4)},showSelectionContextMenu:function(e){if(this.get_focus()!=null){var t=this.selection.get_multiSelect();this._contextMenu!=null&&this._contextMenu._dispose(),this._contextMenu=new un;var r=Pe.create(_e.getLocalizedText(427,"Cut")),n=Pe.create(_e.getLocalizedText(428,"Copy")),a=Pe.create(_e.getLocalizedText(425,"Paste")),l=Pe.create(_e.getLocalizedText(167,"Delete")),f=new ar,c=new ar,d=new ar,m=Pe.create(_e.getLocalizedText(452,"Bring to Front")),v=Pe.create(_e.getLocalizedText(453,"Send to Back")),C=Pe.create(_e.getLocalizedText(454,"Bring Forward")),T=Pe.create(_e.getLocalizedText(455,"Send Backward")),A=Pe.create(_e.getLocalizedText(20,"Properties")),$=Pe.create(_e.getLocalizedText(502,"Edit")),N=Pe.create(_e.getLocalizedText(587,"Hyperlink")),F=this.get_focus().get_linkID();switch(this.get_focus().get_linkID()){case"":case null:F=" ("+_e.getLocalizedText(609,"No Link")+")";break;case"Next":F=" ("+_e.getLocalizedText(610,"Next Slide")+")";break;case"Return":F=" ("+_e.getLocalizedText(602,"Return to Caller")+")";break;default:var z=this.get_tour().getTourStopIndexByID(this.get_focus().get_linkID());z>-1&&(i.emptyString(this._tour.get_tourStops()[z].get_description())?F=i.format(" ("+_e.getLocalizedText(1340,"Slide")+" {0})",z):F=" ("+this._tour.get_tourStops()[z].get_description()+")");break}var Y=Pe.create(_e.getLocalizedText(588,"Animate")),W=Pe.create(_e.getLocalizedText(589,"Link to Slide")+F),ee=Pe.create(_e.getLocalizedText(458,"Color/Opacity")),ne=Pe.create(_e.getLocalizedText(630,"Flipbook Properties")),ae=Pe.create(_e.getLocalizedText(1029,"Animation Tween Type")),de=Pe.create(_e.getLocalizedText(1030,"Linear")),se=Pe.create(_e.getLocalizedText(1031,"Ease In/Out")),we=Pe.create(_e.getLocalizedText(1032,"Ease In")),fe=Pe.create(_e.getLocalizedText(1033,"Ease Out")),$e=Pe.create(_e.getLocalizedText(1034,"Exponential")),ve=Pe.create(_e.getLocalizedText(1035,"Slide Default")),ut=Pe.create(_e.getLocalizedText(790,"Align")),ht=Pe.create(_e.getLocalizedText(1333,"Top")),Je=Pe.create(_e.getLocalizedText(1334,"Bottom")),Ee=Pe.create(_e.getLocalizedText(1335,"Left")),pi=Pe.create(_e.getLocalizedText(1336,"Right")),Ii=Pe.create(_e.getLocalizedText(1337,"Horizontal")),xi=Pe.create(_e.getLocalizedText(1338,"Vertical")),ei=Pe.create(_e.getLocalizedText(1339,"Centered"));switch(ut.dropDownItems.push(ht),ut.dropDownItems.push(Je),ut.dropDownItems.push(Ee),ut.dropDownItems.push(pi),ut.dropDownItems.push(Ii),ut.dropDownItems.push(xi),ut.dropDownItems.push(ei),de.tag=0,se.tag=3,we.tag=1,fe.tag=2,$e.tag=4,ve.tag=5,de.click=i.bind("_interpolation_Click",this),se.click=i.bind("_interpolation_Click",this),we.click=i.bind("_interpolation_Click",this),fe.click=i.bind("_interpolation_Click",this),$e.click=i.bind("_interpolation_Click",this),ve.click=i.bind("_interpolation_Click",this),this.get_focus().get_interpolationType()){case 0:de.checked=!0;break;case 1:we.checked=!0;break;case 2:fe.checked=!0;break;case 3:se.checked=!0;break;case 4:$e.checked=!0;break;case 5:ve.checked=!0;break}ae.dropDownItems.push(ve),ae.dropDownItems.push(de),ae.dropDownItems.push(se),ae.dropDownItems.push(we),ae.dropDownItems.push(fe),ae.dropDownItems.push($e),r.click=i.bind("_cutMenu_Click",this),n.click=i.bind("_copyMenu_Click",this),l.click=i.bind("_deleteMenu_Click",this),m.click=i.bind("_bringToFront_Click",this),v.click=i.bind("_sendToBack_Click",this),T.click=i.bind("_sendBackward_Click",this),C.click=i.bind("_bringForward_Click",this),A.click=i.bind("_properties_Click",this),$.click=i.bind("_editText_Click",this),N.click=i.bind("_url_Click",this),ee.click=i.bind("_pickColor_Click",this),a.click=i.bind("_pasteMenu_Click",this),Y.click=i.bind("_animateMenu_Click",this),ne.click=i.bind("_flipbookProperties_Click",this),W.click=i.bind("_linkID_Click",this),ht.click=i.bind("_alignTop_Click",this),Je.click=i.bind("_alignBottom_Click",this),Ee.click=i.bind("_alignLeft_Click",this),pi.click=i.bind("_alignRight_Click",this),Ii.click=i.bind("_alignHorizon_Click",this),xi.click=i.bind("_alignVertical_Click",this),ei.click=i.bind("_alignCenter_Click",this),this._contextMenu.items.push(r),this._contextMenu.items.push(n),this._contextMenu.items.push(a),this._contextMenu.items.push(l),this._contextMenu.items.push(f),this._contextMenu.items.push(m),this._contextMenu.items.push(v),this._contextMenu.items.push(C),this._contextMenu.items.push(T),this._contextMenu.items.push(ut),this._contextMenu.items.push(c),a.enabled=!1,this._contextMenu.items.push(ee),this._contextMenu.items.push(N),this._contextMenu.items.push(W),this._contextMenu.items.push(Y),this._contextMenu.items.push(d),this._contextMenu.items.push(ne),Y.checked=this.get_focus().get_animate(),this._contextMenu.items.push(ae),ae.enabled=this.get_focus().get_animate(),ne.visible=i.canCast(this.get_focus(),va),d.visible=i.canCast(this.get_focus(),va),t?(N.visible=!1,W.visible=!1,A.visible=!1,ne.visible=!1,C.visible=!1,T.visible=!1):ut.visible=!1,this._contextMenu.items.push(A),this.get_focus()!=null&&i.typeOf(this.get_focus())===jr&&this._contextMenu.items.push($),this._contextMenu._show(e)}},_editText_Click:function(e,t){this.get_focus()!=null&&i.typeOf(this.get_focus())===jr&&this._editText()},_alignVertical_Click:function(e,t){if(this.get_focus()!=null){rt.push(new oi(_e.getLocalizedText(1036,"Vertical Align"),this._tour));for(var r=this.get_focus().get_x(),n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.set_x(r)}}},_alignHorizon_Click:function(e,t){if(this.get_focus()!=null){rt.push(new oi(_e.getLocalizedText(1037,"Horizontal Align"),this._tour));for(var r=this.get_focus().get_y(),n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.set_y(r)}}},_alignCenter_Click:function(e,t){if(this.get_focus()!=null){rt.push(new oi(_e.getLocalizedText(1038,"Align Centers"),this._tour));for(var r=this.get_focus().get_y(),n=this.get_focus().get_x(),a=i.enumerate(this.selection.selectionSet);a.moveNext();){var l=a.current;l.set_y(r),l.set_x(n)}}},_alignRight_Click:function(e,t){if(this.get_focus()!=null){rt.push(new oi(_e.getLocalizedText(1040,"Align Right"),this._tour));for(var r=this.get_focus().get_x()+this.get_focus().get_width()/2,n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.set_x(r-a.get_width()/2)}}},_alignLeft_Click:function(e,t){if(this.get_focus()!=null){rt.push(new oi(_e.getLocalizedText(1041,"Align Left"),this._tour));for(var r=this.get_focus().get_x()-this.get_focus().get_width()/2,n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.set_x(r+a.get_width()/2)}}},_alignBottom_Click:function(e,t){if(this.get_focus()!=null){rt.push(new oi(_e.getLocalizedText(1042,"Align Bottoms"),this._tour));for(var r=this.get_focus().get_y()+this.get_focus().get_height()/2,n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.set_y(r-a.get_height()/2)}}},_alignTop_Click:function(e,t){if(this.get_focus()!=null){rt.push(new oi(_e.getLocalizedText(1039,"Align Tops"),this._tour));for(var r=this.get_focus().get_y()-this.get_focus().get_height()/2,n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.set_y(r+a.get_height()/2)}}},_interpolation_Click:function(e,t){var r=e;if(this.get_focus()!=null)for(var n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.set_interpolationType(r.tag)}},_linkSlideChosen:function(){this.selectDialog.get_OK()&&this.get_focus().set_linkID(this.selectDialog.get_id())},_linkID_Click:function(e,t){this.selectDialog=new Us(this.get_focus().get_linkID()),this.nextSlideCallback(this.selectDialog,i.bind("_linkSlideChosen",this))},_flipbookProperties_Click:function(e,t){},_animateMenu_Click:function(e,t){if(this.get_focus()!=null){rt.push(new oi(_e.getLocalizedText(588,"Animate"),this._tour));for(var r=!this.get_focus().get_animate(),n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.set_animate(r)}}},_url_Click:function(e,t){var r=this;if(this.get_focus()!=null){var n=new Da(_e.getLocalizedText(541,"Edit Hyperlink"),_e.getLocalizedText(542,"Url"),this.get_focus().get_url());n.show(Ei.get_position(),function(){rt.push(new oi(_e.getLocalizedText(541,"Edit Hyperlink"),r._tour)),r.get_focus().set_url(n.text)})}},_pickColor_Click:function(e,t){var r=this,n=new Hs;n.color=this.get_focus().get_color(),n.callBack=function(){rt.push(new oi(_e.getLocalizedText(543,"Edit Color"),r._tour));for(var a=i.enumerate(r.selection.selectionSet);a.moveNext();){var l=a.current;l.set_color(n.color)}},n.show(t)},_volume_Click:function(e,t){var r=new To;r.volume=this.get_focus().get_volume(),r.showDialog(),this.get_focus().set_volume(r.volume)},_deleteMenu_Click:function(e,t){if(!(this._tour==null||this._tour.get_currentTourStop()==null)){rt.push(new oi(_e.getLocalizedText(167,"Delete"),this._tour));for(var r=i.enumerate(this.selection.selectionSet);r.moveNext();){var n=r.current;this._tour.get_currentTourStop().removeOverlay(n)}this.set_focus(null),this.clearSelection(),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection)}},_properties_Click:function(e,t){this._tour==null||this._tour.get_currentTourStop()==null,rt.push(new oi(_e.getLocalizedText(549,"Properties Edit"),this._tour));var r=new xo;r.overlay=this.get_focus(),r.showDialog(),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection)},_bringForward_Click:function(e,t){if(!(this._tour==null||this._tour.get_currentTourStop()==null)){rt.push(new oi(_e.getLocalizedText(454,"Bring Forward"),this._tour));for(var r=i.enumerate(this._getSortedSelection(!1));r.moveNext();){var n=r.current;this._tour.get_currentTourStop().bringForward(n)}Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection)}},_sendBackward_Click:function(e,t){if(!(this._tour==null||this._tour.get_currentTourStop()==null)){rt.push(new oi(_e.getLocalizedText(455,"Send Backward"),this._tour));for(var r=i.enumerate(this._getSortedSelection(!0));r.moveNext();){var n=r.current;this._tour.get_currentTourStop().sendBackward(n)}Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection)}},_sendToBack_Click:function(e,t){if(!(this._tour==null||this._tour.get_currentTourStop()==null)){rt.push(new oi(_e.getLocalizedText(453,"Send to Back"),this._tour));for(var r=i.enumerate(this._getSortedSelection(!0));r.moveNext();){var n=r.current;this._tour.get_currentTourStop().sendToBack(n)}Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection)}},_bringToFront_Click:function(e,t){if(!(this._tour==null||this._tour.get_currentTourStop()==null)){rt.push(new oi(_e.getLocalizedText(452,"Bring to Front"),this._tour));for(var r=i.enumerate(this._getSortedSelection(!1));r.moveNext();){var n=r.current;this._tour.get_currentTourStop().bringToFront(n)}Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection)}},_getSortedSelection:function(e){for(var t=[],r=i.enumerate(this.selection.selectionSet);r.moveNext();){var n=r.current;t.push(n)}return e?t.sort(function(a,l){return-ye.compare(a.get_zOrder(),l.get_zOrder())}):t.sort(function(a,l){return ye.compare(a.get_zOrder(),l.get_zOrder())}),t},_copyMenu_Click:function(e,t){if(!(this._tour==null||this._tour.get_currentTourStop()==null)){var r=new ia;r._writeProcessingInstruction("xml","version='1.0' encoding='UTF-8'"),r._writeStartElement("Overlays");for(var n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;a.saveToXml(r,!0)}r._writeEndElement(),this.clipboardData=r.body,this.clipboardType="WorldWideTelescope.Overlay"}},_cutMenu_Click:function(e,t){if(!(this._tour==null||this._tour.get_currentTourStop()==null)){rt.push(new oi(_e.getLocalizedText(427,"Cut"),this._tour)),this._copyMenu_Click(e,t);for(var r=i.enumerate(this.selection.selectionSet);r.moveNext();){var n=r.current;this._tour.get_currentTourStop().removeOverlay(n)}this.set_focus(null),this.clearSelection(),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection)}},_pasteMenu_Click:function(e,t){if(rt.push(new ea(_e.getLocalizedText(544,"Paste Object"),this._tour)),this.clipboardType==="WorldWideTelescope.Overlay"){var r=new DOMParser,n=r.parseFromString(this.clipboardData,"text/xml");this.clearSelection();for(var a=ye.selectSingleNode(n,"Overlays"),l=i.enumerate(a.childNodes);l.moveNext();){var f=l.current;if(f.nodeName==="Overlay"){for(var c=_i._fromXml(this._tour.get_currentTourStop(),f),d=!1,m=0,v=0,C=i.enumerate(this._tour.get_currentTourStop().get_overlays());C.moveNext();){var T=C.current;T.id===c.id&&i.typeOf(T)===i.typeOf(c)&&(d=!0,(v<T.get_y()||m<T.get_x())&&(m=T.get_x(),v=T.get_y()))}d&&(c.set_x(m+20),c.set_y(v+20)),this._tour.get_currentTourStop().addOverlay(c),this.set_focus(c),this.selection.addSelection(this.get_focus()),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection)}}}},mouseClick:function(e,t){return!!(Vi.currentEditor!=null&&Vi.currentEditor.mouseClick(e,t))},click:function(e,t){return!!(Vi.currentEditor!=null&&Vi.currentEditor.click(e,t))},mouseDoubleClick:function(e,t){return Vi.currentEditor!=null&&Vi.currentEditor.mouseDoubleClick(e,t)||this.get_focus()!=null&&i.typeOf(this.get_focus())===jr&&this._editText(),!0},_doneEditing:function(){rt.push(new oi(_e.getLocalizedText(545,"Text Edit"),this._tour)),this.get_focus().set_width(0),this.get_focus().set_height(0),this.get_focus().set_color(this.get_focus().textObject.foregroundColor),this.get_focus().cleanUp()},_editText:function(){var e=this.get_focus().textObject;this.editTextCallback(e,i.bind("_doneEditing",this))},keyDown:function(e,t){if(Vi.currentEditor!=null&&Vi.currentEditor.keyDown(e,t))return!0;var r=1;switch(t.ctrlKey&&(r=10),t.keyCode){case 65:t.ctrlKey&&(this.clearSelection(),this.selection.addSelectionRange(this._tour.get_currentTourStop().get_overlays()),Bi._updateOverlayListSelection(this.selection),this._tour.get_currentTourStop().get_overlays().length>0&&this.set_focus(this._tour.get_currentTourStop().get_overlays()[0]));break;case 90:t.ctrlKey&&(rt.peekAction()?Fr._undoStep():bi._beep());break;case 89:t.ctrlKey&&(rt.peekRedoAction()?Fr._redoStep():bi._beep());break;case 67:t.ctrlKey&&this._copyMenu_Click(this,new i.EventArgs);break;case 86:t.ctrlKey&&this._pasteMenu_Click(this,new i.EventArgs);break;case 88:t.ctrlKey&&this._cutMenu_Click(this,new i.EventArgs);break;case 46:return this._deleteMenu_Click(null,null),!0;case 9:return t.shiftKey?this._selectLast():this._selectNext(),!0;case 37:if(this.get_focus()!=null){for(var n=i.enumerate(this.selection.selectionSet);n.moveNext();){var a=n.current;if(t.shiftKey)if(t.altKey)a.get_width()>r&&(rt.push(new oi(_e.getLocalizedText(537,"Resize"),this._tour)),a.set_width(a.get_width()-r));else{var l=a.get_width()/a.get_height();a.get_width()>r&&a.get_height()>r*l&&(rt.push(new oi(_e.getLocalizedText(537,"Resize"),this._tour)),a.set_width(a.get_width()-r),a.set_height(a.get_height()-r*l))}else t.altKey?(rt.push(new oi(_e.getLocalizedText(538,"Rotate"),this._tour)),a.set_rotationAngle(a.get_rotationAngle()-r)):(rt.push(new oi(_e.getLocalizedText(540,"Move"),this._tour)),a.set_x(a.get_x()-r))}return!0}break;case 39:if(this.get_focus()!=null){for(var f=i.enumerate(this.selection.selectionSet);f.moveNext();){var a=f.current;if(t.shiftKey)if(rt.push(new oi(_e.getLocalizedText(537,"Resize"),this._tour)),t.altKey)a.set_width(a.get_width()+r);else{var l=a.get_width()/a.get_height();a.set_width(a.get_width()+r),a.set_height(a.get_height()+r*l)}else t.altKey?(rt.push(new oi(_e.getLocalizedText(538,"Rotate"),this._tour)),a.set_rotationAngle(a.get_rotationAngle()+r)):(rt.push(new oi(_e.getLocalizedText(540,"Move"),this._tour)),a.set_x(a.get_x()+r))}return!0}break;case 38:if(this.get_focus()!=null){for(var c=i.enumerate(this.selection.selectionSet);c.moveNext();){var a=c.current;if(t.shiftKey)if(rt.push(new oi(_e.getLocalizedText(537,"Resize"),this._tour)),t.altKey)a.set_height(a.get_height()+r);else{var l=a.get_width()/a.get_height();a.set_width(a.get_width()+r),a.set_height(a.get_height()+r*l)}else t.altKey||(rt.push(new oi(_e.getLocalizedText(540,"Move"),this._tour)),a.set_y(a.get_y()-r))}return!0}break;case 40:if(this.get_focus()!=null){for(var d=i.enumerate(this.selection.selectionSet);d.moveNext();){var a=d.current;if(t.shiftKey)if(t.altKey)a.get_height()>r&&(rt.push(new oi(_e.getLocalizedText(537,"Resize"),this._tour)),a.set_height(a.get_height()-r));else{var l=a.get_width()/a.get_height();a.get_width()>r&&a.get_height()>r*l&&(rt.push(new oi(_e.getLocalizedText(537,"Resize"),this._tour)),a.set_width(a.get_width()-r),a.set_height(a.get_height()-r*l))}else t.altKey||(rt.push(new oi(_e.getLocalizedText(540,"Move"),this._tour)),a.set_y(a.get_y()+r))}return!0}break;case 34:if(t.altKey)return this._tour.get_currentTourstopIndex()<this._tour.get_tourStops().length-1&&(this._tour.set_currentTourstopIndex(this._tour.get_currentTourstopIndex()+1)-1,Fr._selectCurrent(),Fr._ensureSelectedVisible()),!0;break;case 33:if(t.altKey)return this._tour.get_currentTourstopIndex()>0&&(this._tour.set_currentTourstopIndex(this._tour.get_currentTourstopIndex()-1)+1,Fr._selectCurrent(),Fr._ensureSelectedVisible()),!0;break}return!1},_selectNext:function(){this._tour==null||this._tour.get_currentTourStop()==null||(this.set_focus(this._tour.get_currentTourStop().getNextOverlay(this.get_focus())),this.selection.setSelection(this.get_focus()),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection))},_selectLast:function(){this._tour==null||this._tour.get_currentTourStop()==null||(this.set_focus(this._tour.get_currentTourStop().getPerviousOverlay(this.get_focus())),this.selection.setSelection(this.get_focus()),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection))},keyUp:function(e,t){return!!(Vi.currentEditor!=null&&Vi.currentEditor.keyUp(e,t))},addPicture:function(e){if(this._tour==null||this._tour.get_currentTourStop()==null)return!1;rt.push(new oi(_e.getLocalizedText(546,"Insert Picture"),this._tour));var t=ra.create(this._tour.get_currentTourStop(),e);return t.set_x(960),t.set_y(600),this._tour.get_currentTourStop().addOverlay(t),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection),!0},addFlipbook:function(e){return!1},addAudio:function(e,t){if(this._tour==null||this._tour.get_currentTourStop()==null)return!1;var r=Na.create(this._tour.get_currentTourStop(),e);return r.set_x(900),r.set_y(600),t?this._tour.get_currentTourStop().set_musicTrack(r):this._tour.get_currentTourStop().set_voiceTrack(r),!0},addVideo:function(e){return!0},addText:function(e,t){if(this._tour==null||this._tour.get_currentTourStop()==null)return!1;var r=jr.create(t);return r.set_color(t.foregroundColor),r.set_x(960),r.set_y(600),rt.push(new oi(_e.getLocalizedText(547,"Insert Text"),this._tour)),this._tour.get_currentTourStop().addOverlay(r),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection),!0},addOverlay:function(e){if(this._tour==null||this._tour.get_currentTourStop()==null)return null;if(i.typeOf(e)===na){var t=e;if(t!=null){var r=na._create(this._tour.get_currentTourStop(),t.get_shapeType());return r.set_width(t.get_width()),r.set_height(t.get_height()),r.set_x(this._contextPoint.x),r.set_y(this._contextPoint.y),r.set_color(t.get_color()),r.set_rotationAngle(t.get_rotationAngle()),this._tour.get_currentTourStop().addOverlay(r),r}}else if(i.typeOf(e)===jr){var n=e;if(n!=null){var a=jr.create(n.textObject);return a.set_x(this._contextPoint.x),a.set_y(this._contextPoint.y),a.set_color(n.get_color()),this._tour.get_currentTourStop().addOverlay(a),a}}else if(i.typeOf(e)===ra){var l=e;if(l!=null){var f=l.copy(this._tour.get_currentTourStop());return f.set_x(this._contextPoint.x),f.set_y(this._contextPoint.y),this._tour.get_currentTourStop().addOverlay(f),f}}else if(i.typeOf(e)===va){var c=e;if(c!=null){var f=c.copy(this._tour.get_currentTourStop());return f.set_x(this._contextPoint.x),f.set_y(this._contextPoint.y),this._tour.get_currentTourStop().addOverlay(f),f}}return null},addShape:function(e,t){if(this._tour==null||this._tour.get_currentTourStop()==null)return!1;rt.push(new oi(_e.getLocalizedText(548,"Insert Shape"),this._tour));var r=na._create(this._tour.get_currentTourStop(),t);return r.set_width(200),r.set_height(200),t===4&&r.set_height(r.get_height()/2),t===5&&r.set_height(12),r.set_x(960),r.set_y(600),this._tour.get_currentTourStop().addOverlay(r),this.set_focus(r),this.selection.setSelection(this.get_focus()),Bi._updateOverlayList(this._tour.get_currentTourStop(),this.selection),!0},getCurrentColor:function(){return this._tour==null||this._tour.get_currentTourStop()==null?this._defaultColor:this.get_focus()!=null?this.get_focus().get_color():this._defaultColor},setCurrentColor:function(e){this._defaultColor=e,!(this._tour==null||this._tour.get_currentTourStop()==null)&&this.get_focus()!=null&&this.get_focus().set_color(e)},dispose:function(){this._contextMenu!=null&&(this._contextMenu._dispose(),this._contextMenu=null)},hover:function(e){return Vi.currentEditor!=null&&Vi.currentEditor.hover(e),!0}};function Bi(){}Bi._updateOverlayList=function(e,t){},Bi._updateOverlayListSelection=function(e){};var Kc={};function Fr(){}Fr._ensureSelectedVisible=function(){},Fr._selectCurrent=function(){},Fr._undoStep=function(){rt.peekAction()&&rt.stepBack()},Fr._redoStep=function(){rt.peekRedoAction()&&rt.stepForward()};var Jc={};function zs(){this.target=null}var Zc={};function So(){this.tour=null,this.showAddButton=!1,this.selectedItems=null,this.selectedItem=-1,this.refreshCallback=null,this.multipleSelection=!1,this.hitType=!1}var Qc={selectAll:function(){this.selectedItems={};for(var e=0;e<this.tour.get_tourStops().length;e++)this.selectedItems[e]=this.tour.get_tourStops()[e]},refresh:function(){this.refreshCallback!=null&&this.refreshCallback()},findItem:function(e){return-1},ensureSelectedVisible:function(){},ensureAddVisible:function(){}};function Ea(){}Ea.refreshUi=function(){};var eh={};function Ht(){this._overlayBlend=pn.create(!1,1e3),this._tour=null,this._onTarget=!1,this._currentMasterSlide=null,this._callStack=new i.Stack,this._leaveSettingsWhenStopped=!1}Ht.get_playing=function(){return Ht._playing},Ht.set_playing=function(e){return Ht._playing=e,e},Ht.add_tourEnded=function(e){Ht.__tourEnded=i.bindAdd(Ht.__tourEnded,e)},Ht.remove_tourEnded=function(e){Ht.__tourEnded=i.bindSub(Ht.__tourEnded,e)};var th={render:function(e){if(!(this._tour==null||this._tour.get_currentTourStop()==null||!Ht._playing)){if(e.save(),this.updateSlideStates(),!this._onTarget&&(this._slideStartTime=i.now(),e.onTarget(this.get_tour().get_currentTourStop().get_target()))){this._onTarget=!0,this._overlayBlend.set_state(!this.get_tour().get_currentTourStop().get_fadeInOverlays()),this._overlayBlend.set_targetState(!0),this._tour.get_currentTourStop().get_musicTrack()!=null&&(this._tour.get_currentTourStop().get_musicTrack().seek(0),this._tour.get_currentTourStop().get_musicTrack().play()),this._tour.get_currentTourStop().get_voiceTrack()!=null&&(this._tour.get_currentTourStop().get_voiceTrack().seek(0),this._tour.get_currentTourStop().get_voiceTrack().play());for(var t="",r=i.enumerate(this._tour.get_currentTourStop().get_overlays());r.moveNext();){var n=r.current;if(n.get_name().toLowerCase()==="caption"){var a=i.safeCast(n,jr);a!=null&&(t=a.textObject.text)}n.play()}k.setVisibleLayerList(this._tour.get_currentTourStop().layers),this._tour.get_currentTourStop().get_endTarget()!=null&&this._tour.get_currentTourStop().get_endTarget().get_zoomLevel()!==-1&&(this._tour.get_currentTourStop().get_target().get_type(),e.viewMover=new Rs(this._tour.get_currentTourStop().get_target().get_camParams(),this._tour.get_currentTourStop().get_endTarget().get_camParams(),this._tour.get_currentTourStop().get_duration()/1e3,this._tour.get_currentTourStop().get_startTime(),this._tour.get_currentTourStop().get_endTime(),this._tour.get_currentTourStop().get_interpolationType())),U.tourSettings=this._tour.get_currentTourStop(),K.set_now(this._tour.get_currentTourStop().get_startTime()),K.set_syncToClock(!1),q.scriptInterface._fireSlideChanged(t)}if(e.gl!=null){if(e.setupMatricesOverlays(),this._currentMasterSlide!=null)for(var l=i.enumerate(this._currentMasterSlide.get_overlays());l.moveNext();){var n=l.current;n.set_tweenFactor(1),n.draw3D(e,!1)}if(this._onTarget)for(var f=i.enumerate(this._tour.get_currentTourStop().get_overlays());f.moveNext();){var n=f.current;(n.get_name().toLowerCase()!=="caption"||q.scriptInterface.get_showCaptions())&&(n.set_tweenFactor(fi.easeCurve(this._tour.get_currentTourStop().get_tweenPosition(),n.get_interpolationType()===5?this._tour.get_currentTourStop().get_interpolationType():n.get_interpolationType())),n.draw3D(e,!1))}e.restore()}else{e.device.scale(e.height/1116,e.height/1116);var c=e.width/e.height;if(e.device.translate(-((1920-c*1116)/2),0),this._currentMasterSlide!=null)for(var d=i.enumerate(this._currentMasterSlide.get_overlays());d.moveNext();){var n=d.current;n.set_tweenFactor(1),n.draw3D(e,!1)}if(this._onTarget)for(var m=i.enumerate(this._tour.get_currentTourStop().get_overlays());m.moveNext();){var n=m.current;(n.get_name().toLowerCase()!=="caption"||q.scriptInterface.get_showCaptions())&&(n.set_tweenFactor(fi.easeCurve(this._tour.get_currentTourStop().get_tweenPosition(),n.get_interpolationType()===5?this._tour.get_currentTourStop().get_interpolationType():n.get_interpolationType())),n.draw3D(e,!1))}e.restore()}}},get_tour:function(){return this._tour},set_tour:function(e){return this._tour=e,e},nextSlide:function(){if(this._tour.get_currentTourStop()!=null)if(this._tour.get_currentTourStop().get_masterSlide())this._currentMasterSlide=this._tour.get_currentTourStop();else{this._tour.get_currentTourStop().get_musicTrack()!=null&&this._tour.get_currentTourStop().get_musicTrack().stop(),this._tour.get_currentTourStop().get_voiceTrack()!=null&&this._tour.get_currentTourStop().get_voiceTrack().stop();for(var e=i.enumerate(this._tour.get_currentTourStop().get_overlays());e.moveNext();){var t=e.current;t.stop()}}if(this._tour.get_currentTourstopIndex()<this._tour.get_tourStops().length-1||this._tour.get_currentTourStop().get_isLinked()){if(this._tour.get_currentTourStop().get_endTarget()!=null&&(q.singleton.gotoTargetFull(!1,!0,this._tour.get_currentTourStop().get_endTarget().get_camParams(),this._tour.get_currentTourStop().get_target().get_studyImageset(),this._tour.get_currentTourStop().get_target().get_backgroundImageset()),q.singleton.set__mover(null)),this._onTarget=!1,this._tour.get_currentTourStop().get_isLinked())try{switch(this._tour.get_currentTourStop().get_nextSlide()){case"Return":this._callStack.count>0?this.playFromTourstop(this._tour.get_tourStops()[this._callStack.pop()]):this._tour.set_currentTourstopIndex(this._tour.get_tourStops().length-1);break;default:this.playFromTourstop(this._tour.get_tourStops()[this._tour.getTourStopIndexByID(this._tour.get_currentTourStop().get_nextSlide())]);break}}catch{this._tour.get_currentTourstopIndex()<this._tour.get_tourStops().length-1&&this._tour.set_currentTourstopIndex(this._tour.get_currentTourstopIndex()+1)-1}else this._tour.set_currentTourstopIndex(this._tour.get_currentTourstopIndex()+1)-1;this._currentMasterSlide!=null&&this._tour.get_currentTourStop().get_masterSlide()&&this._stopCurrentMaster();var r=!1;switch(this._tour.get_currentTourStop().get__transition()){case 0:break;case 1:r=!0;break;case 2:r=!0;break;case 3:r=!0;break;case 5:r=!0;break;case 4:r=!0;break}q.singleton.gotoTarget(this._tour.get_currentTourStop().get_target(),!1,r,!1),this._slideStartTime=i.now(),U.tourSettings=this._tour.get_currentTourStop(),K.set_now(this._tour.get_currentTourStop().get_startTime()),K.set_syncToClock(!1)}else this._stopCurrentMaster(),Ht._playing=!1,U.get_current().autoRepeatTour?(this._tour.set_currentTourstopIndex(-1),this.play()):(q.singleton._freezeView(),Ht.__tourEnded!=null&&Ht.__tourEnded(this,new i.EventArgs),q.singleton._hideUI(!1),q.scriptInterface._fireTourEnded())},_stopCurrentMaster:function(){if(this._currentMasterSlide!=null){this._currentMasterSlide.get_musicTrack()!=null&&this._currentMasterSlide.get_musicTrack().stop(),this._currentMasterSlide.get_voiceTrack()!=null&&this._currentMasterSlide.get_voiceTrack().stop();for(var e=i.enumerate(this._currentMasterSlide.get_overlays());e.moveNext();){var t=e.current;t.stop()}this._currentMasterSlide=null}},get_leaveSettingsWhenStopped:function(){return this._leaveSettingsWhenStopped},set_leaveSettingsWhenStopped:function(e){return this._leaveSettingsWhenStopped=e,e},play:function(){if(this._tour!=null){if(Ht._playing?this.stop(!0):Ht._playing=!0,q.singleton._hideUI(!0),Ht._playing=!0,this._tour.get_tourStops().length>0){this._onTarget=!1,this._tour.get_currentTourstopIndex()===-1&&this._tour.set_currentTourStop(this._tour.get_tourStops()[0]);for(var e=i.enumerate(this._tour.get_tourStops());e.moveNext();){var t=e.current;t.get_musicTrack()!=null&&t.get_musicTrack().prepMultimedia(),t.get_voiceTrack()!=null&&t.get_voiceTrack().prepMultimedia();for(var r=i.enumerate(t.get_overlays());r.moveNext();){var n=r.current;n.prepMultimedia()}}this._tour.get_currentTourstopIndex()>0&&this._playMasterForCurrent(),q.singleton.gotoTarget(this._tour.get_currentTourStop().get_target(),!1,!0,!1)}this._slideStartTime=i.now(),Ht._playing=!0}},_playMasterForCurrent:function(){if(!this._tour.get_currentTourStop().get_masterSlide()){var e=this._tour.elapsedTimeSinceLastMaster(this._tour.get_currentTourstopIndex());if(e!=null){var t=e.duration;this._currentMasterSlide=e.master,this._currentMasterSlide.get_musicTrack()!=null&&(this._currentMasterSlide.get_musicTrack().seek(t),this._currentMasterSlide.get_musicTrack().play()),this._currentMasterSlide.get_voiceTrack()!=null&&(this._currentMasterSlide.get_voiceTrack().seek(t),this._currentMasterSlide.get_voiceTrack().play());for(var r=i.enumerate(this._currentMasterSlide.get_overlays());r.moveNext();){var n=r.current;n.seek(t),n.play()}}}},stop:function(e){if(Ht._switchedToFullScreen,this._leaveSettingsWhenStopped||(U.tourSettings=null),Ht._playing=!1,this._tour.get_currentTourStop()!=null){this._tour.get_currentTourStop().get_musicTrack()!=null&&this._tour.get_currentTourStop().get_musicTrack().stop(),this._tour.get_currentTourStop().get_voiceTrack()!=null&&this._tour.get_currentTourStop().get_voiceTrack().stop();for(var t=i.enumerate(this._tour.get_currentTourStop().get_overlays());t.moveNext();){var r=t.current;r.stop()}}if(this._currentMasterSlide!=null){this._currentMasterSlide.get_musicTrack()!=null&&this._currentMasterSlide.get_musicTrack().stop(),this._currentMasterSlide.get_voiceTrack()!=null&&this._currentMasterSlide.get_voiceTrack().stop();for(var n=i.enumerate(this._currentMasterSlide.get_overlays());n.moveNext();){var r=n.current;r.stop()}}q.singleton._hideUI(Ht.noRestoreUIOnStop),q.scriptInterface._fireTourEnded()},updateSlideStates:function(){var e=!1,t=i.now()-this._slideStartTime;if(t>this._tour.get_currentTourStop().get_duration()&&Ht._playing&&(this.nextSlide(),e=!0),t=i.now()-this._slideStartTime,this._tour.get_currentTourStop()!=null){this._tour.get_currentTourStop().set_tweenPosition(Math.min(1,t/this._tour.get_currentTourStop().get_duration())),this._tour.get_currentTourStop().faderOpacity=0;var r=this._tour.get_currentTourStop().get_tweenPosition()*this._tour.get_currentTourStop().get_duration()/1e3;switch(e&&q.singleton.set_crossFadeFrame(!1),this._tour.get_currentTourStop().get__transition()){case 0:this._tour.get_currentTourStop().faderOpacity=0,q.singleton.set_crossFadeFrame(!1);break;case 2:r<r-this._tour.get_currentTourStop().get__transitionHoldTime()?(q.singleton.set_crossFadeFrame(!0),this._tour.get_currentTourStop().faderOpacity=1):(this._tour.get_currentTourStop().faderOpacity=0,q.singleton.set_crossFadeFrame(!1));break;case 1:q.singleton.set_crossFadeFrame(!0);var n=Math.max(0,1-Math.min(1,(r-this._tour.get_currentTourStop().get__transitionHoldTime())/this._tour.get_currentTourStop().get__transitionTime()));this._tour.get_currentTourStop().faderOpacity=n;break;case 3:case 4:q.singleton.set_crossFadeFrame(!1);var n=Math.max(0,1-Math.max(0,r-this._tour.get_currentTourStop().get__transitionHoldTime())/this._tour.get_currentTourStop().get__transitionTime());this._tour.get_currentTourStop().faderOpacity=n;break;case 5:q.singleton.set_crossFadeFrame(!1);break}if(!this._tour.get_currentTourStop().get_isLinked()&&this._tour.get_currentTourstopIndex()<this._tour.get_tourStops().length-1){var a=this._tour.get_tourStops()[this._tour.get_currentTourstopIndex()+1].get__transition(),l=this._tour.get_tourStops()[this._tour.get_currentTourstopIndex()+1].get__transitionOutTime();switch(a){case 5:case 3:if(!this._tour.get_currentTourStop().faderOpacity){q.singleton.set_crossFadeFrame(!1);var n=Math.max(0,1-Math.min(1,(this._tour.get_currentTourStop().get_duration()/1e3-r)/l));this._tour.get_currentTourStop().faderOpacity=n}break}}}},updateTweenPosition:function(e){var t=i.now()-this._slideStartTime;return e>-1?this._tour.get_currentTourStop().set_tweenPosition(Math.min(1,e)):this._tour.get_currentTourStop().set_tweenPosition(Math.min(1,t/this._tour.get_currentTourStop().get_duration()))},close:function(){this._tour!=null&&(Ht.get_playing()&&this.stop(Ht._switchedToFullScreen),this._tour=null)},mouseDown:function(e,t){var r;if(r=this.pointToView(xe.create(t.offsetX,t.offsetY)),this._tour==null||this._tour.get_currentTourStop()==null)return!1;for(var n=this._tour.get_currentTourStop().get_overlays().length-1;n>=0;n--)if(this._tour.get_currentTourStop().get_overlays()[n].hitTest(r)){if(!i.emptyString(this._tour.get_currentTourStop().get_overlays()[n].get_url())){var a=this._tour.get_currentTourStop().get_overlays()[n];return ye._openUrl(a.get_url()),!0}if(!i.emptyString(this._tour.get_currentTourStop().get_overlays()[n].get_linkID()))return this._callStack.push(this._tour.get_currentTourstopIndex()),this.playFromTourstop(this._tour.get_tourStops()[this._tour.getTourStopIndexByID(this._tour.get_currentTourStop().get_overlays()[n].get_linkID())]),!0}return!1},mouseUp:function(e,t){return!1},mouseMove:function(e,t){var r;try{r=this.pointToView(xe.create(t.offsetX,t.offsetY))}catch{return!1}if(this._tour==null||this._tour.get_currentTourStop()==null)return!1;for(var n=this._tour.get_currentTourStop().get_overlays().length-1;n>=0;n--)if(this._tour.get_currentTourStop().get_overlays()[n].hitTest(r)&&(!i.emptyString(this._tour.get_currentTourStop().get_overlays()[n].get_url())||!i.emptyString(this._tour.get_currentTourStop().get_overlays()[n].get_linkID())))return!0;return!1},mouseClick:function(e,t){return!1},click:function(e,t){return!1},mouseDoubleClick:function(e,t){return!1},keyDown:function(e,t){switch(t.keyCode){case 27:return this.stop(Ht._switchedToFullScreen),q.singleton._closeTour(),!0;case 32:return this.pauseTour(),!0;case 39:return this._playNextSlide(),!0;case 37:return this._playPreviousSlide(),!0;case 35:return this._tour.get_tourStops().length>0&&this.playFromTourstop(this._tour.get_tourStops()[this._tour.get_tourStops().length-1]),!0;case 36:return this._tour.get_tourStops().length>0&&this.playFromTourstop(this._tour.get_tourStops()[0]),!0}return!1},_playNextSlide:function(){this._tour.get_currentTourstopIndex()<this._tour.get_tourStops().length-1&&this._tour.get_tourStops().length>0&&this.playFromTourstop(this._tour.get_tourStops()[this._tour.get_currentTourstopIndex()+1])},_playPreviousSlide:function(){this._tour.get_currentTourstopIndex()>0&&this.playFromTourstop(this._tour.get_tourStops()[this._tour.get_currentTourstopIndex()-1])},playFromTourstop:function(e){this.stop(!0),this._tour.set_currentTourStop(e),q.singleton.gotoTarget(this._tour.get_currentTourStop().get_target(),!1,!0,!1),K.set_now(this._tour.get_currentTourStop().get_startTime()),K.set_syncToClock(!1),this.play()},pauseTour:function(){Ht._playing?(this.stop(Ht._switchedToFullScreen),q.singleton._freezeView(),q.scriptInterface._fireTourPaused()):(this.play(),q.scriptInterface._fireTourResume())},keyUp:function(e,t){return!1},hover:function(e){return!!Ht._playing},pointToView:function(e){var t=q.singleton.canvas.height,r=q.singleton.canvas.width,n=r/t*1116,a=e.x/r*n-(n-1920)/2,l=e.y/t*1116;return xe.create(a,l)}};function Mo(e,t){this.duration=0,this.master=e,this.duration=t}var ih={};function Sr(){this._tourStopType=0,this._keyFramed=!1,this._tweenPosition=0,this.faderOpacity=0,this._owner=null,this._transition=0,this._transitionTime=2,this._transitionHoldTime=4,this._transitionOutTime=2,this._nextSlide="Next",this._fadeInOverlays=!1,this._masterSlide=!1,this._id="",this._description="",this._name="",this._duration=1e4,this._interpolationType=0,this._hasLocation=!0,this._hasTime=!0,this._startTime=K.get_now(),this._endTime=K.get_now(),this._actualPlanetScale=U.get_current().get_actualPlanetScale(),this._locationAltitude=U.get_current().get_locationAltitude(),this._locationLat=U.get_current().get_locationLat(),this._locationLng=U.get_current().get_locationLng(),this._showClouds=U.get_current().get_showClouds(),this._showConstellationBoundries=U.get_current().get_showConstellationBoundries(),this._showConstellationFigures=U.get_current().get_showConstellationFigures(),this._showConstellationSelection=U.get_current().get_showConstellationSelection(),this._showEcliptic=U.get_current().get_showEcliptic(),this._showElevationModel=U.get_current().get_showElevationModel(),this._showFieldOfView=U.get_current().get_showFieldOfView(),this._showGrid=U.get_current().get_showGrid(),this._showHorizon=U.get_current().get_showHorizon(),this._showHorizonPanorama=U.get_current().get_showHorizonPanorama(),this._showMoonsAsPointSource=U.get_current().get_showMoonsAsPointSource(),this._showSolarSystem=U.get_current().get_showSolarSystem(),this._fovTelescope=U.get_current().get_fovTelescope(),this._fovEyepiece=U.get_current().get_fovEyepiece(),this._fovCamera=U.get_current().get_fovCamera(),this._localHorizonMode=U.get_current().get_localHorizonMode(),this._galacticMode=U.get_current().get_galacticMode(),this._solarSystemStars=U.get_current().get_solarSystemStars(),this._solarSystemMilkyWay=U.get_current().get_solarSystemMilkyWay(),this._solarSystemCosmos=U.get_current().get_solarSystemCosmos(),this._solarSystemOrbits=U.get_current().get_solarSystemOrbits(),this._solarSystemOverlays=U.get_current().get_solarSystemOverlays(),this._solarSystemLighting=U.get_current().get_solarSystemLighting(),this._solarSystemScale=U.get_current().get_solarSystemScale(),this._solarSystemMultiRes=U.get_current().get_solarSystemMultiRes(),this._showEquatorialGridText=U.get_current().get_showEquatorialGridText(),this._showGalacticGrid=U.get_current().get_showGalacticGrid(),this._showGalacticGridText=U.get_current().get_showGalacticGridText(),this._showEclipticGrid=U.get_current().get_showEclipticGrid(),this._showEclipticGridText=U.get_current().get_showEclipticGridText(),this._showEclipticOverviewText=U.get_current().get_showEclipticOverviewText(),this._showAltAzGrid=U.get_current().get_showAltAzGrid(),this._showAltAzGridText=U.get_current().get_showAltAzGridText(),this._showPrecessionChart=U.get_current().get_showPrecessionChart(),this._showConstellationPictures=U.get_current().get_showConstellationPictures(),this._showConstellationLabels=U.get_current().get_showConstellationLabels(),this._solarSystemCMB=U.get_current().get_solarSystemCMB(),this._solarSystemMinorPlanets=U.get_current().get_solarSystemMinorPlanets(),this._solarSystemPlanets=U.get_current().get_solarSystemPlanets(),this._showEarthSky=U.get_current().get_showEarthSky(),this._solarSystemMinorOrbits=U.get_current().get_solarSystemMinorOrbits(),this._constellationsEnabled="",this._constellationFiguresFilter=U.get_current().get_constellationFiguresFilter().clone(),this._constellationBoundariesFilter=U.get_current().get_constellationBoundariesFilter().clone(),this._constellationNamesFilter=U.get_current().get_constellationNamesFilter().clone(),this._constellationArtFilter=U.get_current().get_constellationArtFilter().clone(),this._showSkyOverlays=U.get_current().get_showSkyOverlays(),this._showConstellations=U.get_current().get_showConstellations(),this._showSkyNode=U.get_current().get_showSkyNode(),this._showSkyGrids=U.get_current().get_showSkyGrids(),this._showSkyOverlaysIn3d=U.get_current().get_showSkyOverlaysIn3d(),this._earthCutawayView=U.get_current().get_earthCutawayView(),this._showISSModel=U.get_current().get_showISSModel(),this._milkyWayModel=U.get_current().get_milkyWayModel(),this._minorPlanetsFilter=U.get_current().get_minorPlanetsFilter(),this._planetOrbitsFilter=U.get_current().get_planetOrbitsFilter(),this._thumbnailString="",this._thumbnail=null,this.layers={},this._overlays=[],this._musicTrack=null,this._voiceTrack=null,this._eclipticGridColor=Te.get_green(),this._galacticGridColor=Te.get_cyan(),this._altAzGridColor=Te.get_magenta(),this._precessionChartColor=Te.get_orange(),this._eclipticColor=Te.get_blue(),this._equatorialGridColor=Te.get_white(),this._constellationLabelsHeight=80,this._id=er.newGuid().toString()}Sr.create=function(e){var t=new Sr;return t._target=e,t},Sr.getXmlText=function(e){var t=new ia;return t._writeProcessingInstruction("xml","version='1.0' encoding='UTF-8'"),e._saveToXml(t,!0),t._close(),t.body},Sr._fromXml=function(e,t){try{var r=new Sr;r._owner=e,r.set_id(t.attributes.getNamedItem("Id").nodeValue),r.set_name(t.attributes.getNamedItem("Name").nodeValue),r.set_description(t.attributes.getNamedItem("Description").nodeValue),r._thumbnailString=t.attributes.getNamedItem("Thumbnail").nodeValue,r._duration=ye.parseTimeSpan(t.attributes.getNamedItem("Duration").nodeValue),t.attributes.getNamedItem("Master")!=null&&(r._masterSlide=i.boolean(t.attributes.getNamedItem("Master").nodeValue)),t.attributes.getNamedItem("NextSlide")!=null&&(r._nextSlide=t.attributes.getNamedItem("NextSlide").nodeValue),t.attributes.getNamedItem("InterpolationType")!=null&&r.set_interpolationType(gt.parse("InterpolationType",t.attributes.getNamedItem("InterpolationType").nodeValue)),r._fadeInOverlays=!0,t.attributes.getNamedItem("FadeInOverlays")!=null&&(r._fadeInOverlays=i.boolean(t.attributes.getNamedItem("FadeInOverlays").nodeValue)),t.attributes.getNamedItem("Transition")!=null&&(r._transition=gt.parse("TransitionType",t.attributes.getNamedItem("Transition").nodeValue)),t.attributes.getNamedItem("HasLocation")!=null&&(r._hasLocation=i.boolean(t.attributes.getNamedItem("HasLocation").nodeValue)),r._hasLocation&&(t.attributes.getNamedItem("LocationAltitude")!=null&&(r._locationAltitude=parseFloat(t.attributes.getNamedItem("LocationAltitude").nodeValue)),t.attributes.getNamedItem("LocationLat")!=null&&(r._locationLat=parseFloat(t.attributes.getNamedItem("LocationLat").nodeValue)),t.attributes.getNamedItem("LocationLng")!=null&&(r._locationLng=parseFloat(t.attributes.getNamedItem("LocationLng").nodeValue))),t.attributes.getNamedItem("HasTime")!=null&&(r._hasTime=i.boolean(t.attributes.getNamedItem("HasTime").nodeValue),r._hasTime&&(t.attributes.getNamedItem("StartTime")!=null&&(r._startTime=i.date(t.attributes.getNamedItem("StartTime").nodeValue+" UTC")),t.attributes.getNamedItem("EndTime")!=null&&(r._endTime=i.date(t.attributes.getNamedItem("EndTime").nodeValue+" UTC")))),t.attributes.getNamedItem("ActualPlanetScale")!=null&&(r._actualPlanetScale=i.boolean(t.attributes.getNamedItem("ActualPlanetScale").nodeValue)),t.attributes.getNamedItem("ShowClouds")!=null&&(r._showClouds=i.boolean(t.attributes.getNamedItem("ShowClouds").nodeValue)),t.attributes.getNamedItem("ShowConstellationBoundries")!=null&&(r._showConstellationBoundries=i.boolean(t.attributes.getNamedItem("ShowConstellationBoundries").nodeValue)),t.attributes.getNamedItem("ShowConstellationFigures")!=null&&(r._showConstellationFigures=i.boolean(t.attributes.getNamedItem("ShowConstellationFigures").nodeValue)),t.attributes.getNamedItem("ShowConstellationSelection")!=null&&(r._showConstellationSelection=i.boolean(t.attributes.getNamedItem("ShowConstellationSelection").nodeValue)),t.attributes.getNamedItem("ShowEcliptic")!=null&&(r._showEcliptic=i.boolean(t.attributes.getNamedItem("ShowEcliptic").nodeValue)),t.attributes.getNamedItem("EclipticColor")!=null&&(r._eclipticColor=G.load(t.attributes.getNamedItem("EclipticColor").nodeValue)),t.attributes.getNamedItem("ShowElevationModel")!=null&&(r._showElevationModel=i.boolean(t.attributes.getNamedItem("ShowElevationModel").nodeValue)),t.attributes.getNamedItem("ShowFieldOfView")!=null&&(r._showFieldOfView=i.boolean(t.attributes.getNamedItem("ShowFieldOfView").nodeValue)),t.attributes.getNamedItem("ShowGrid")!=null&&(r._showGrid=i.boolean(t.attributes.getNamedItem("ShowGrid").nodeValue)),t.attributes.getNamedItem("ShowHorizon")!=null&&(r._showHorizon=i.boolean(t.attributes.getNamedItem("ShowHorizon").nodeValue)),t.attributes.getNamedItem("ShowHorizonPanorama")!=null&&(r._showHorizonPanorama=i.boolean(t.attributes.getNamedItem("ShowHorizonPanorama").nodeValue)),t.attributes.getNamedItem("ShowMoonsAsPointSource")!=null&&(r._showMoonsAsPointSource=i.boolean(t.attributes.getNamedItem("ShowMoonsAsPointSource").nodeValue)),t.attributes.getNamedItem("ShowSolarSystem")!=null&&(r._showSolarSystem=i.boolean(t.attributes.getNamedItem("ShowSolarSystem").nodeValue)),t.attributes.getNamedItem("FovTelescope")!=null&&(r._fovTelescope=parseInt(t.attributes.getNamedItem("FovTelescope").nodeValue)),t.attributes.getNamedItem("FovEyepiece")!=null&&(r._fovEyepiece=parseInt(t.attributes.getNamedItem("FovEyepiece").nodeValue)),t.attributes.getNamedItem("FovCamera")!=null&&(r._fovCamera=parseInt(t.attributes.getNamedItem("FovCamera").nodeValue)),t.attributes.getNamedItem("LocalHorizonMode")!=null&&(r._localHorizonMode=i.boolean(t.attributes.getNamedItem("LocalHorizonMode").nodeValue)),t.attributes.getNamedItem("GalacticMode")!=null&&(r._galacticMode=i.boolean(t.attributes.getNamedItem("GalacticMode").nodeValue)),t.attributes.getNamedItem("SolarSystemStars")!=null&&(r._solarSystemStars=i.boolean(t.attributes.getNamedItem("SolarSystemStars").nodeValue)),t.attributes.getNamedItem("SolarSystemMilkyWay")!=null&&(r._solarSystemMilkyWay=i.boolean(t.attributes.getNamedItem("SolarSystemMilkyWay").nodeValue)),t.attributes.getNamedItem("SolarSystemCosmos")!=null&&(r._solarSystemCosmos=i.boolean(t.attributes.getNamedItem("SolarSystemCosmos").nodeValue)),t.attributes.getNamedItem("SolarSystemOrbits")!=null&&(r._solarSystemOrbits=i.boolean(t.attributes.getNamedItem("SolarSystemOrbits").nodeValue)),t.attributes.getNamedItem("SolarSystemOverlays")!=null&&(r._solarSystemOverlays=i.boolean(t.attributes.getNamedItem("SolarSystemOverlays").nodeValue)),t.attributes.getNamedItem("SolarSystemLighting")!=null&&(r._solarSystemLighting=i.boolean(t.attributes.getNamedItem("SolarSystemLighting").nodeValue)),t.attributes.getNamedItem("SolarSystemScale")!=null&&(r._solarSystemScale=parseInt(t.attributes.getNamedItem("SolarSystemScale").nodeValue)),t.attributes.getNamedItem("SolarSystemMultiRes")!=null&&(r._solarSystemMultiRes=i.boolean(t.attributes.getNamedItem("SolarSystemMultiRes").nodeValue)),t.attributes.getNamedItem("ShowEquatorialGridText")!=null&&(r._showEquatorialGridText=i.boolean(t.attributes.getNamedItem("ShowEquatorialGridText").nodeValue)),t.attributes.getNamedItem("EquatorialGridColor")!=null&&(r._equatorialGridColor=G.load(t.attributes.getNamedItem("EquatorialGridColor").nodeValue)),t.attributes.getNamedItem("ShowGalacticGrid")!=null&&(r._showGalacticGrid=i.boolean(t.attributes.getNamedItem("ShowGalacticGrid").nodeValue)),t.attributes.getNamedItem("ShowGalacticGridText")!=null&&(r._showGalacticGridText=i.boolean(t.attributes.getNamedItem("ShowGalacticGridText").nodeValue)),t.attributes.getNamedItem("GalacticGridColor")!=null&&(r._galacticGridColor=G.load(t.attributes.getNamedItem("GalacticGridColor").nodeValue)),t.attributes.getNamedItem("ShowEclipticGrid")!=null&&(r._showEclipticGrid=i.boolean(t.attributes.getNamedItem("ShowEclipticGrid").nodeValue)),t.attributes.getNamedItem("ShowEclipticGridText")!=null&&(r._showEclipticGridText=i.boolean(t.attributes.getNamedItem("ShowEclipticGridText").nodeValue)),t.attributes.getNamedItem("EclipticGridColor")!=null&&(r._eclipticGridColor=G.load(t.attributes.getNamedItem("EclipticGridColor").nodeValue)),t.attributes.getNamedItem("ShowEclipticOverviewText")!=null&&(r._showEclipticOverviewText=i.boolean(t.attributes.getNamedItem("ShowEclipticOverviewText").nodeValue)),t.attributes.getNamedItem("ShowAltAzGrid")!=null&&(r._showAltAzGrid=i.boolean(t.attributes.getNamedItem("ShowAltAzGrid").nodeValue)),t.attributes.getNamedItem("ShowAltAzGridText")!=null&&(r._showAltAzGridText=i.boolean(t.attributes.getNamedItem("ShowAltAzGridText").nodeValue)),t.attributes.getNamedItem("AltAzGridColor")!=null&&(r._altAzGridColor=G.load(t.attributes.getNamedItem("AltAzGridColor").nodeValue)),t.attributes.getNamedItem("ShowPrecessionChart")!=null&&(r._showPrecessionChart=i.boolean(t.attributes.getNamedItem("ShowPrecessionChart").nodeValue)),t.attributes.getNamedItem("PrecessionChartColor")!=null&&(r._precessionChartColor=G.load(t.attributes.getNamedItem("PrecessionChartColor").nodeValue)),t.attributes.getNamedItem("ShowConstellationPictures")!=null&&(r._showConstellationPictures=i.boolean(t.attributes.getNamedItem("ShowConstellationPictures").nodeValue)),t.attributes.getNamedItem("ShowConstellationLabels")!=null&&(r._showConstellationLabels=i.boolean(t.attributes.getNamedItem("ShowConstellationLabels").nodeValue)),t.attributes.getNamedItem("SolarSystemCMB")!=null&&(r._solarSystemCMB=i.boolean(t.attributes.getNamedItem("SolarSystemCMB").nodeValue)),t.attributes.getNamedItem("SolarSystemMinorPlanets")!=null&&(r._solarSystemMinorPlanets=i.boolean(t.attributes.getNamedItem("SolarSystemMinorPlanets").nodeValue)),t.attributes.getNamedItem("SolarSystemPlanets")!=null&&(r._solarSystemPlanets=i.boolean(t.attributes.getNamedItem("SolarSystemPlanets").nodeValue)),t.attributes.getNamedItem("ShowEarthSky")!=null&&(r._showEarthSky=i.boolean(t.attributes.getNamedItem("ShowEarthSky").nodeValue)),t.attributes.getNamedItem("SolarSystemMinorOrbits")!=null&&(r._solarSystemMinorOrbits=i.boolean(t.attributes.getNamedItem("SolarSystemMinorOrbits").nodeValue)),t.attributes.getNamedItem("ShowSkyOverlays")!=null?r._showSkyOverlays=i.boolean(t.attributes.getNamedItem("ShowSkyOverlays").nodeValue):r._showSkyOverlays=!0,t.attributes.getNamedItem("ShowConstellations")!=null?r._showConstellations=i.boolean(t.attributes.getNamedItem("ShowConstellations").nodeValue):r._showConstellations=!0,t.attributes.getNamedItem("ShowSkyNode")!=null?r._showSkyNode=i.boolean(t.attributes.getNamedItem("ShowSkyNode").nodeValue):r._showSkyNode=!0,t.attributes.getNamedItem("ShowSkyGrids")!=null?r._showSkyGrids=i.boolean(t.attributes.getNamedItem("ShowSkyGrids").nodeValue):r._showSkyGrids=!0,t.attributes.getNamedItem("ShowSkyOverlaysIn3d")!=null&&(r._showSkyOverlaysIn3d=i.boolean(t.attributes.getNamedItem("ShowSkyOverlaysIn3d").nodeValue)),t.attributes.getNamedItem("EarthCutawayView")!=null&&(r._earthCutawayView=i.boolean(t.attributes.getNamedItem("EarthCutawayView").nodeValue)),t.attributes.getNamedItem("ShowISSModel")!=null&&(r._showISSModel=i.boolean(t.attributes.getNamedItem("ShowISSModel").nodeValue)),t.attributes.getNamedItem("MilkyWayModel")!=null&&(r._milkyWayModel=i.boolean(t.attributes.getNamedItem("MilkyWayModel").nodeValue)),t.attributes.getNamedItem("ConstellationBoundariesFilter")!=null?r._constellationBoundariesFilter=Lt.parse(t.attributes.getNamedItem("ConstellationBoundariesFilter").nodeValue):r._constellationBoundariesFilter=Lt.get_allConstellation(),t.attributes.getNamedItem("ConstellationBoundariesFilter")!=null?r._constellationFiguresFilter=Lt.parse(t.attributes.getNamedItem("ConstellationBoundariesFilter").nodeValue):r._constellationFiguresFilter=new Lt,t.attributes.getNamedItem("ConstellationNamesFilter")!=null?r._constellationNamesFilter=Lt.parse(t.attributes.getNamedItem("ConstellationNamesFilter").nodeValue):r._constellationNamesFilter=new Lt,t.attributes.getNamedItem("ConstellationArtFilter")!=null?r._constellationArtFilter=Lt.parse(t.attributes.getNamedItem("ConstellationArtFilter").nodeValue):r._constellationArtFilter=new Lt,t.attributes.getNamedItem("MinorPlanetsFilter")!=null&&(r._minorPlanetsFilter=parseInt(t.attributes.getNamedItem("MinorPlanetsFilter").nodeValue)),t.attributes.getNamedItem("PlanetOrbitsFilter")!=null&&(r._planetOrbitsFilter=parseInt(t.attributes.getNamedItem("PlanetOrbitsFilter").nodeValue));var n=ye.selectSingleNode(t,"Place");r._target=hr._fromXml(n);var a=ye.selectSingleNode(t,"EndTarget");a!=null&&(r._endTarget=hr._fromXml(a));for(var l=ye.selectSingleNode(t,"Overlays"),f=i.enumerate(l.childNodes);f.moveNext();){var c=f.current;c.nodeName==="Overlay"&&r.addOverlay(_i._fromXml(r,c))}var d=ye.selectSingleNode(t,"MusicTrack");d!=null&&(r._musicTrack=_i._fromXml(r,ye.selectSingleNode(d,"Overlay")));var m=ye.selectSingleNode(t,"VoiceTrack");m!=null&&(r._voiceTrack=_i._fromXml(r,ye.selectSingleNode(m,"Overlay")));var v=ye.selectSingleNode(t,"VisibleLayers");return v!=null&&r._loadLayerList(v),r._thumbnail=e.getCachedTexture(i.format("{0}.thumb.png",r._id),function(){var C=0}),r}catch(C){return q.scriptInterface._fireTourError(C),null}};var rh={get_keyFramed:function(){return this._keyFramed},get_tourStopType:function(){return this._target.get_backgroundImageset()!=null?this._target.get_backgroundImageset().get_dataSetType():this._tourStopType},set_tourStopType:function(e){return this._target.get_backgroundImageset()!=null&&this._target.get_backgroundImageset().get_dataSetType()!==e&&this._target.set_backgroundImageset(null),this._tourStopType=e,e},get_tweenPosition:function(){return this._tweenPosition},set_tweenPosition:function(e){return this._tweenPosition!==e&&(this._tweenPosition=Math.max(0,Math.min(1,e)),this.updateTweenPosition()),e},updateTweenPosition:function(){this.get_keyFramed()},copy:function(){var e=new ia;e._writeProcessingInstruction("xml","version='1.0' encoding='UTF-8'"),this._saveToXml(e,!0);try{var t=new DOMParser,r=t.parseFromString(e.body,"text/xml"),n=ye.selectSingleNode(r,"TourStop"),a=Sr._fromXml(this.get_owner(),n);return a.set_id(er.newGuid().toString()),a}catch{}return null},get_owner:function(){return this._owner},set_owner:function(e){return this._owner=e,e},get__transition:function(){return this._transition},set__transition:function(e){return this._transition!==e&&(this._transition=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get__transitionTime:function(){return this._transitionTime},set__transitionTime:function(e){return this._transitionTime!==e&&(this._transitionTime=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get__transitionHoldTime:function(){return this._transitionHoldTime},set__transitionHoldTime:function(e){return this._transitionHoldTime!==e&&(this._transitionHoldTime=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get__transitionOutTime:function(){return this._transitionOutTime},set__transitionOutTime:function(e){return this._transitionOutTime!==e&&(this._transitionOutTime=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_nextSlide:function(){return this._nextSlide},set_nextSlide:function(e){return this._nextSlide=e,e},get_isLinked:function(){return!(this._nextSlide==null||this._nextSlide==="Next"||!this._nextSlide)},get_fadeInOverlays:function(){return this._fadeInOverlays},set_fadeInOverlays:function(e){return this._fadeInOverlays=e,e},get_masterSlide:function(){return this._masterSlide},set_masterSlide:function(e){return this._masterSlide!==e&&(this._masterSlide=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_id:function(){return this._id},set_id:function(e){return this._id=e,this._owner!=null&&this._owner.set_tourDirty(!0),e},toString:function(){return this._target!=null?this.get_target().get_name():this._description},get_description:function(){return this._description},set_description:function(e){return this._description!==e&&(this._description=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_name:function(){return this._target!=null?this._target.get_name():this._name},set_name:function(e){return this._name!==e&&(this._name=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_duration:function(){return this._duration},set_duration:function(e){return this._duration!==e&&(this._duration=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_target:function(){return this._target},set_target:function(e){return this._target!==e&&(this._target=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_endTarget:function(){return this._endTarget},set_endTarget:function(e){return this._endTarget!==e&&(this._endTarget=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_interpolationType:function(){return this._interpolationType},set_interpolationType:function(e){return this._interpolationType=e,e},get_hasLocation:function(){return this._hasTime},set_hasLocation:function(e){return this._hasLocation!==e&&(this._hasLocation=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_hasTime:function(){return this._hasTime},set_hasTime:function(e){return this._hasTime!==e&&(this._hasTime=this._hasLocation=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_startTime:function(){return this._startTime},set_startTime:function(e){return this._startTime=e,i.compareDates(this._startTime,e)||(this._startTime=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_endTime:function(){return this._endTime},set_endTime:function(e){return i.compareDates(this._endTime,e)||(this._endTime=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},captureSettings:function(){this._startTime=K.get_now(),this._actualPlanetScale=U.get_current().get_actualPlanetScale(),this._locationAltitude=U.get_current().get_locationAltitude(),this._locationLat=U.get_current().get_locationLat(),this._locationLng=U.get_current().get_locationLng(),this._showClouds=U.get_current().get_showClouds(),this._showConstellationBoundries=U.get_current().get_showConstellationBoundries(),this._showConstellationFigures=U.get_current().get_showConstellationFigures(),this._showConstellationSelection=U.get_current().get_showConstellationSelection(),this._showEcliptic=U.get_current().get_showEcliptic(),this._showElevationModel=U.get_current().get_showElevationModel(),this._showFieldOfView=U.get_current().get_showFieldOfView(),this._showGrid=U.get_current().get_showGrid(),this._showHorizon=U.get_current().get_showHorizon(),this._showHorizonPanorama=U.get_current().get_showHorizonPanorama(),this._showMoonsAsPointSource=U.get_current().get_showMoonsAsPointSource(),this._showSolarSystem=U.get_current().get_showSolarSystem(),this._fovTelescope=U.get_current().get_fovTelescope(),this._fovEyepiece=U.get_current().get_fovEyepiece(),this._fovCamera=U.get_current().get_fovCamera(),this._localHorizonMode=U.get_current().get_localHorizonMode(),this._galacticMode=U.get_current().get_galacticMode(),this._solarSystemStars=U.get_current().get_solarSystemStars(),this._solarSystemMilkyWay=U.get_current().get_solarSystemMilkyWay(),this._solarSystemCosmos=U.get_current().get_solarSystemCosmos(),this._solarSystemOrbits=U.get_current().get_solarSystemOrbits(),this._solarSystemOverlays=U.get_current().get_solarSystemOverlays(),this._solarSystemLighting=U.get_current().get_solarSystemLighting(),this._solarSystemScale=U.get_current().get_solarSystemScale(),this._solarSystemMultiRes=U.get_current().get_solarSystemMultiRes(),this._showEquatorialGridText=U.get_current().get_showEquatorialGridText(),this._showGalacticGrid=U.get_current().get_showGalacticGrid(),this._showGalacticGridText=U.get_current().get_showGalacticGridText(),this._showEclipticGrid=U.get_current().get_showEclipticGrid(),this._showEclipticGridText=U.get_current().get_showEclipticGridText(),this._showEclipticOverviewText=U.get_current().get_showEclipticOverviewText(),this._showAltAzGrid=U.get_current().get_showAltAzGrid(),this._showAltAzGridText=U.get_current().get_showAltAzGridText(),this._showPrecessionChart=U.get_current().get_showPrecessionChart(),this._showConstellationPictures=U.get_current().get_showConstellationPictures(),this._showConstellationLabels=U.get_current().get_showConstellationLabels(),this._solarSystemCMB=U.get_current().get_solarSystemCMB(),this._solarSystemMinorPlanets=U.get_current().get_solarSystemMinorPlanets(),this._solarSystemPlanets=U.get_current().get_solarSystemPlanets(),this._showEarthSky=U.get_current().get_showEarthSky(),this._solarSystemMinorOrbits=U.get_current().get_solarSystemMinorOrbits(),this._constellationFiguresFilter=U.get_current().get_constellationFiguresFilter().clone(),this._constellationBoundariesFilter=U.get_current().get_constellationBoundariesFilter().clone(),this._constellationNamesFilter=U.get_current().get_constellationNamesFilter().clone(),this._constellationArtFilter=U.get_current().get_constellationArtFilter().clone(),this._showSkyOverlays=U.get_current().get_showSkyOverlays(),this._showConstellations=U.get_current().get_showConstellations(),this._showSkyNode=U.get_current().get_showSkyNode(),this._showSkyGrids=U.get_current().get_showSkyGrids(),this._showSkyOverlaysIn3d=U.get_current().get_showSkyOverlaysIn3d(),this._earthCutawayView=U.get_current().get_earthCutawayView(),this._showISSModel=U.get_current().get_showISSModel(),this._milkyWayModel=U.get_current().get_milkyWayModel(),this._minorPlanetsFilter=U.get_current().get_minorPlanetsFilter(),this._planetOrbitsFilter=U.get_current().get_planetOrbitsFilter()},syncSettings:function(){U.get_globalSettings().set_actualPlanetScale(this._actualPlanetScale),U.get_globalSettings().set_locationAltitude(this._locationAltitude),U.get_globalSettings().set_locationLat(this._locationLat),U.get_globalSettings().set_locationLng(this._locationLng),U.get_globalSettings().set_earthCutawayView(this._earthCutawayView),U.get_globalSettings().set_showConstellationBoundries(this._showConstellationBoundries),U.get_globalSettings().set_showConstellationFigures(this._showConstellationFigures),U.get_globalSettings().set_showConstellationSelection(this._showConstellationSelection),U.get_globalSettings().set_showEcliptic(this._showEcliptic),U.get_globalSettings().set_showElevationModel(this._showElevationModel),U.get_globalSettings().set_showGrid(this._showGrid),U.get_globalSettings().set_showHorizon(this._showHorizon),U.get_globalSettings().set_showSolarSystem(this._showSolarSystem),U.get_globalSettings().set_localHorizonMode(this._localHorizonMode),U.get_globalSettings().set_galacticMode(this._galacticMode),U.get_globalSettings().set_solarSystemStars(this._solarSystemStars),U.get_globalSettings().set_solarSystemMilkyWay(this._solarSystemMilkyWay),U.get_globalSettings().set_solarSystemCosmos(this._solarSystemCosmos),U.get_globalSettings().set_solarSystemCMB(this._solarSystemCMB),U.get_globalSettings().set_solarSystemOrbits(this._solarSystemOrbits),U.get_globalSettings().set_solarSystemMinorOrbits(this._solarSystemMinorOrbits),U.get_globalSettings().set_solarSystemMinorPlanets(this._solarSystemMinorPlanets),U.get_globalSettings().set_solarSystemOverlays(this._solarSystemOverlays),U.get_globalSettings().set_solarSystemLighting(this._solarSystemLighting),U.get_globalSettings().set_showISSModel(this._showISSModel),U.get_globalSettings().set_solarSystemScale(this._solarSystemScale),U.get_globalSettings().set_solarSystemMultiRes(this._solarSystemMultiRes),U.get_globalSettings().set_showEarthSky(this._showEarthSky),U.get_globalSettings().set_minorPlanetsFilter(this._minorPlanetsFilter),U.get_globalSettings().set_planetOrbitsFilter(this._planetOrbitsFilter),U.get_globalSettings().set_showEquatorialGridText(this._showEquatorialGridText),U.get_globalSettings().set_showGalacticGrid(this._showGalacticGrid),U.get_globalSettings().set_showGalacticGridText(this._showGalacticGridText),U.get_globalSettings().set_showEclipticGrid(this._showEclipticGrid),U.get_globalSettings().set_showEclipticGridText(this._showEclipticGridText),U.get_globalSettings().set_showEclipticOverviewText(this._showEclipticOverviewText),U.get_globalSettings().set_showAltAzGrid(this._showAltAzGrid),U.get_globalSettings().set_showAltAzGridText(this._showAltAzGridText),U.get_globalSettings().set_showPrecessionChart(this._showPrecessionChart),U.get_globalSettings().set_showConstellationPictures(this._showConstellationPictures),U.get_globalSettings().set_constellationsEnabled(this._constellationsEnabled),U.get_globalSettings().set_showSkyOverlays(this._showSkyOverlays),U.get_globalSettings().set_constellations(this._showConstellations),U.get_globalSettings().set_showSkyNode(this._showSkyNode),U.get_globalSettings().set_showSkyGrids(this._showSkyGrids),U.get_globalSettings().set_constellationFiguresFilter(this._constellationFiguresFilter.clone()),U.get_globalSettings().set_constellationBoundariesFilter(this._constellationBoundariesFilter.clone()),U.get_globalSettings().set_constellationNamesFilter(this._constellationNamesFilter.clone()),U.get_globalSettings().set_constellationArtFilter(this._constellationArtFilter.clone())},get_solarSystemStars:function(){return this._solarSystemStars},get_solarSystemMultiRes:function(){return this._solarSystemMultiRes},get_solarSystemMilkyWay:function(){return this._solarSystemMilkyWay},get_solarSystemCosmos:function(){return this._solarSystemCosmos},get_solarSystemOrbits:function(){return this._solarSystemOrbits},get_solarSystemOverlays:function(){return this._solarSystemOverlays},get_solarSystemLighting:function(){return this._solarSystemLighting},get_solarSystemScale:function(){return this._solarSystemScale},get_actualPlanetScale:function(){return this._actualPlanetScale},get_fovCamera:function(){return this._fovCamera},get_fovEyepiece:function(){return this._fovEyepiece},get_fovTelescope:function(){return this._fovTelescope},get_locationAltitude:function(){return this._hasLocation?this._locationAltitude:U.get_current().get_locationAltitude()},get_locationLat:function(){return this._hasLocation?this._locationLat:U.get_current().get_locationLat()},get_locationLng:function(){return this._hasLocation?this._locationLng:U.get_current().get_locationLng()},get_showClouds:function(){return this._showClouds},get_showConstellationBoundries:function(){return this._showConstellationBoundries},get_showConstellationFigures:function(){return this._showConstellationFigures},get_showConstellationSelection:function(){return this._showConstellationSelection},get_showEcliptic:function(){return this._showEcliptic},get_showElevationModel:function(){return this._showElevationModel},get_showFieldOfView:function(){return this._showFieldOfView},get_showGrid:function(){return this._showGrid},get_showHorizon:function(){return this._showHorizon},get_showHorizonPanorama:function(){return this._showHorizonPanorama},get_showMoonsAsPointSource:function(){return this._showMoonsAsPointSource},get_showSolarSystem:function(){return this._showSolarSystem},get_localHorizonMode:function(){return this._localHorizonMode},get_galacticMode:function(){return this._galacticMode},get_thumbnail:function(){return this._target!=null&&this._thumbnail==null?null:this._thumbnail},set_thumbnail:function(e){return this._thumbnail=e,this._owner!=null&&this._owner.set_tourDirty(!0),e},get_overlays:function(){return this._overlays},get_musicTrack:function(){return this._musicTrack},set_musicTrack:function(e){return this._musicTrack!==e&&(this._musicTrack=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},get_voiceTrack:function(){return this._voiceTrack},set_voiceTrack:function(e){return this._voiceTrack!==e&&(this._voiceTrack=e,this._owner!=null&&this._owner.set_tourDirty(!0)),e},addOverlay:function(e){e!=null&&(e.set_owner(this),this._overlays.push(e),this._owner!=null&&this._owner.set_tourDirty(!0))},removeOverlay:function(e){i.remove(this._overlays,e),this._owner!=null&&this._owner.set_tourDirty(!0)},cleanUp:function(){for(var e=i.enumerate(this.get_overlays());e.moveNext();){var t=e.current;t.cleanUp()}this._voiceTrack!=null&&this._voiceTrack.cleanUp(),this._musicTrack!=null&&this._musicTrack.cleanUp()},sendToBack:function(e){i.remove(this._overlays,e),this._overlays.splice(0,0,e),this._owner!=null&&this._owner.set_tourDirty(!0)},bringToFront:function(e){i.remove(this._overlays,e),this._overlays.push(e),this._owner!=null&&this._owner.set_tourDirty(!0)},bringForward:function(e){var t=this._overlays.indexOf(e);t<this._overlays.length-1&&(i.remove(this._overlays,e),this._overlays.splice(t+1,0,e)),this._owner!=null&&this._owner.set_tourDirty(!0)},sendBackward:function(e){var t=this._overlays.indexOf(e);t>0&&(i.remove(this._overlays,e),this._overlays.splice(t-1,0,e)),this._owner!=null&&this._owner.set_tourDirty(!0)},getNextOverlay:function(e){if(e==null)return this._overlays.length>0?this._overlays[0]:null;var t=this._overlays.indexOf(e);return t<this._overlays.length-1?this._overlays[t+1]:this._overlays[0]},getPerviousOverlay:function(e){if(e==null)return this._overlays.length>0?this._overlays[0]:null;var t=this._overlays.indexOf(e);return t>0?this._overlays[t-1]:this._overlays[this._overlays.length-1]},getOverlayById:function(e){for(var t=i.enumerate(this._overlays);t.moveNext();){var r=t.current;if(r.id===e)return r}return null},get_tourStopThumbnailFilename:function(){return i.format("{0}.thumb.png",this._id)},_saveToXml:function(e,t){t&&this._thumbnail!=null,e._writeStartElement("TourStop"),e._writeAttributeString("Id",this._id),e._writeAttributeString("Name",this._name),e._writeAttributeString("Description",this._description),e._writeAttributeString("Thumbnail",this._thumbnailString),e._writeAttributeString("Duration",ye.xmlDuration(this._duration)),e._writeAttributeString("Master",this._masterSlide.toString()),e._writeAttributeString("TransitionType",gt.toXml("TransitionType",this._transition)),e._writeAttributeString("TransitionTime",this._transitionTime.toString()),e._writeAttributeString("TransitionOutTime",this._transitionOutTime.toString()),e._writeAttributeString("TransitionHoldTime",this._transitionHoldTime.toString()),e._writeAttributeString("NextSlide",this._nextSlide),e._writeAttributeString("InterpolationType",gt.toXml("InterpolationType",this._interpolationType)),e._writeAttributeString("HasLocation",this._hasLocation.toString()),this._hasLocation&&(e._writeAttributeString("LocationAltitude",this._locationAltitude.toString()),e._writeAttributeString("LocationLat",this._locationLat.toString()),e._writeAttributeString("LocationLng",this._locationLng.toString())),e._writeAttributeString("HasTime",this._hasTime.toString()),this._hasTime&&(e._writeAttributeString("StartTime",ye.xmlDate(this._startTime)),e._writeAttributeString("EndTime",ye.xmlDate(this._endTime))),e._writeAttributeString("ActualPlanetScale",this._actualPlanetScale.toString()),e._writeAttributeString("ShowClouds",this._showClouds.toString()),e._writeAttributeString("EarthCutawayView",this._earthCutawayView.toString()),e._writeAttributeString("ShowConstellationBoundries",this._showConstellationBoundries.toString()),e._writeAttributeString("ShowConstellationFigures",this._showConstellationFigures.toString()),e._writeAttributeString("ShowConstellationSelection",this._showConstellationSelection.toString()),e._writeAttributeString("ShowEcliptic",this._showEcliptic.toString()),e._writeAttributeString("EclipticColor",this._eclipticColor.save()),e._writeAttributeString("ShowElevationModel",this._showElevationModel.toString()),this._showFieldOfView=!1,e._writeAttributeString("ShowFieldOfView",this._showFieldOfView.toString()),e._writeAttributeString("ShowGrid",this._showGrid.toString()),e._writeAttributeString("ShowHorizon",this._showHorizon.toString()),e._writeAttributeString("ShowHorizonPanorama",this._showHorizonPanorama.toString()),e._writeAttributeString("ShowMoonsAsPointSource",this._showMoonsAsPointSource.toString()),e._writeAttributeString("ShowSolarSystem",this._showSolarSystem.toString()),e._writeAttributeString("FovTelescope",this._fovTelescope.toString()),e._writeAttributeString("FovEyepiece",this._fovEyepiece.toString()),e._writeAttributeString("FovCamera",this._fovCamera.toString()),e._writeAttributeString("LocalHorizonMode",this._localHorizonMode.toString()),e._writeAttributeString("GalacticMode",this._galacticMode.toString()),e._writeAttributeString("FadeInOverlays",this._fadeInOverlays.toString()),e._writeAttributeString("SolarSystemStars",this._solarSystemStars.toString()),e._writeAttributeString("SolarSystemMilkyWay",this._solarSystemMilkyWay.toString()),e._writeAttributeString("SolarSystemCosmos",this._solarSystemCosmos.toString()),e._writeAttributeString("SolarSystemCMB",this._solarSystemCMB.toString()),e._writeAttributeString("SolarSystemOrbits",this._solarSystemOrbits.toString()),e._writeAttributeString("SolarSystemMinorOrbits",this._solarSystemMinorOrbits.toString()),e._writeAttributeString("SolarSystemOverlays",this._solarSystemOverlays.toString()),e._writeAttributeString("SolarSystemLighting",this._solarSystemLighting.toString()),e._writeAttributeString("ShowISSModel",this._showISSModel.toString()),e._writeAttributeString("SolarSystemScale",this._solarSystemScale.toString()),e._writeAttributeString("MinorPlanetsFilter",this._minorPlanetsFilter.toString()),e._writeAttributeString("PlanetOrbitsFilter",this._planetOrbitsFilter.toString()),e._writeAttributeString("SolarSystemMultiRes",this._solarSystemMultiRes.toString()),e._writeAttributeString("SolarSystemMinorPlanets",this._solarSystemMinorPlanets.toString()),e._writeAttributeString("SolarSystemPlanets",this._solarSystemPlanets.toString()),e._writeAttributeString("ShowEarthSky",this._showEarthSky.toString()),e._writeAttributeString("ShowEquatorialGridText",this.get_showEquatorialGridText().toString()),e._writeAttributeString("EquatorialGridColor",this.get_equatorialGridColor().save()),e._writeAttributeString("ShowGalacticGrid",this.get_showGalacticGrid().toString()),e._writeAttributeString("ShowGalacticGridText",this.get_showGalacticGridText().toString()),e._writeAttributeString("GalacticGridColor",this.get_galacticGridColor().save()),e._writeAttributeString("ShowEclipticGrid",this.get_showEclipticGrid().toString()),e._writeAttributeString("ShowEclipticGridText",this.get_showEclipticGridText().toString()),e._writeAttributeString("EclipticGridColor",this.get_eclipticGridColor().save()),e._writeAttributeString("ShowEclipticOverviewText",this.get_showEclipticOverviewText().toString()),e._writeAttributeString("ShowAltAzGrid",this.get_showAltAzGrid().toString()),e._writeAttributeString("ShowAltAzGridText",this.get_showAltAzGridText().toString()),e._writeAttributeString("AltAzGridColor",this.get_altAzGridColor().save()),e._writeAttributeString("ShowPrecessionChart",this.get_showPrecessionChart().toString()),e._writeAttributeString("PrecessionChartColor",this.get_precessionChartColor().save()),e._writeAttributeString("ConstellationPictures",this.get_showConstellationPictures().toString()),e._writeAttributeString("ConstellationsEnabled",this.get_constellationsEnabled()),e._writeAttributeString("ShowConstellationLabels",this.get_showConstellationLabels().toString()),e._writeAttributeString("ShowSkyOverlays",this.get_showSkyOverlays().toString()),e._writeAttributeString("ShowConstellations",this.get_showConstellations().toString()),e._writeAttributeString("ShowSkyNode",this.get_showSkyNode().toString()),e._writeAttributeString("ShowSkyGrids",this.get_showSkyGrids().toString()),e._writeAttributeString("SkyOverlaysIn3d",this.get_showSkyOverlaysIn3d().toString()),e._writeAttributeString("ConstellationFiguresFilter",this._constellationFiguresFilter.toString()),e._writeAttributeString("ConstellationBoundariesFilter",this._constellationBoundariesFilter.toString()),e._writeAttributeString("ConstellationNamesFilter",this._constellationNamesFilter.toString()),e._writeAttributeString("ConstellationArtFilter",this._constellationArtFilter.toString()),this._target._saveToXml(e,"Place"),this._endTarget!=null&&this._endTarget._saveToXml(e,"EndTarget"),e._writeStartElement("Overlays");for(var r=i.enumerate(this._overlays);r.moveNext();){var n=r.current;n.saveToXml(e,!1)}e._writeEndElement(),this._musicTrack!=null&&(e._writeStartElement("MusicTrack"),this._musicTrack.saveToXml(e,!1),e._writeEndElement()),this._voiceTrack!=null&&(e._writeStartElement("VoiceTrack"),this._voiceTrack.saveToXml(e,!1),e._writeEndElement()),this._writeLayerList(e),e._writeEndElement()},_writeLayerList:function(e){if(i.keyCount(this.layers)>0){e._writeStartElement("VisibleLayers");for(var t=i.enumerate(i.keys(this.layers));t.moveNext();){var r=t.current,n=this.layers[r];e._writeStartElement("Layer"),e._writeAttributeString("StartOpacity",n.startOpacity.toString()),e._writeAttributeString("EndOpacity",n.endOpacity.toString());var a=n.startParams.length;e._writeAttributeString("ParamCount",a.toString());for(var l=0;l<a;l++)e._writeAttributeString(i.format("StartParam{0}",l),n.startParams[l].toString()),e._writeAttributeString(i.format("EndParam{0}",l),n.endParams[l].toString());e._writeValue(n.id.toString()),e._writeEndElement()}e._writeEndElement()}},_addFilesToCabinet:function(e,t){if(this._thumbnail!=null){var r=i.format("{0}.thumb.png",this._id),n=this._owner.getFileBlob(r);e.addFile(this._owner.get_workingDirectory()+r,n)}t||(this._musicTrack!=null&&this._musicTrack.addFilesToCabinet(e),this._voiceTrack!=null&&this._voiceTrack.addFilesToCabinet(e));for(var a=i.enumerate(this._overlays);a.moveNext();){var l=a.current;l.addFilesToCabinet(e)}},getNextDefaultName:function(e){for(var t=1,r=i.enumerate(this._overlays);r.moveNext();){var n=r.current;if(i.startsWith(n.get_name(),e)){var a=0;try{a=parseInt(n.get_name().substr(e.length))}catch{}a>=t&&(t=a+1)}}return i.format("{0} {1}",e,t)},_loadLayerList:function(e){for(var t=i.enumerate(e.childNodes);t.moveNext();){var r=t.current;if(r.nodeName==="Layer"){var n=new Os,a=r.innerHTML;n.id=er.fromString(a),n.startOpacity=parseFloat(r.attributes.getNamedItem("StartOpacity").nodeValue),n.endOpacity=parseFloat(r.attributes.getNamedItem("EndOpacity").nodeValue);var l=0;r.attributes.getNamedItem("ParamCount")!=null&&(l=parseInt(r.attributes.getNamedItem("ParamCount").nodeValue)),n.startParams=new Array(l),n.endParams=new Array(l),n.frameParams=new Array(l);for(var f=0;f<l;f++)n.startParams[f]=parseFloat(r.attributes.getNamedItem(i.format("StartParam{0}",f)).nodeValue),n.endParams[f]=parseFloat(r.attributes.getNamedItem(i.format("EndParam{0}",f)).nodeValue),n.frameParams[f]=n.startParams[f];this.layers[n.id]=n}}},_updateLayerOpacity:function(){this.get_keyFramed()&&this.updateTweenPosition()},get_showEquatorialGridText:function(){return this._showEquatorialGridText},set_showEquatorialGridText:function(e){return this._showEquatorialGridText=e,e},get_showGalacticGrid:function(){return this._showGalacticGrid},set_showGalacticGrid:function(e){return this._showGalacticGrid=e,e},get_showGalacticGridText:function(){return this._showGalacticGridText},set_showGalacticGridText:function(e){return this._showGalacticGridText=e,e},get_showEclipticGrid:function(){return this._showEclipticGrid},set_showEclipticGrid:function(e){return this._showEclipticGrid=e,e},get_showEclipticGridText:function(){return this._showEclipticGridText},set_showEclipticGridText:function(e){return this._showEclipticGridText=e,e},get_showEclipticOverviewText:function(){return this._showEclipticOverviewText},set_showEclipticOverviewText:function(e){return this._showEclipticOverviewText=e,e},get_showAltAzGrid:function(){return this._showAltAzGrid},set_showAltAzGrid:function(e){return this._showAltAzGrid=e,e},get_showAltAzGridText:function(){return this._showAltAzGridText},set_showAltAzGridText:function(e){return this._showAltAzGridText=e,e},get_showPrecessionChart:function(){return this._showPrecessionChart},set_showPrecessionChart:function(e){return this._showPrecessionChart=e,e},get_showConstellationPictures:function(){return this._showConstellationPictures},set_showConstellationPictures:function(e){return this._showConstellationPictures=e,e},get_showConstellationLabels:function(){return this._showConstellationLabels},set_showConstellationLabels:function(e){return this._showConstellationLabels=e,e},get_solarSystemCMB:function(){return this._solarSystemCMB},set_solarSystemCMB:function(e){return this._solarSystemCMB=e,e},get_solarSystemMinorPlanets:function(){return this._solarSystemMinorPlanets},set_solarSystemMinorPlanets:function(e){return this._solarSystemMinorPlanets=e,e},get_solarSystemPlanets:function(){return this._solarSystemPlanets},set_solarSystemPlanets:function(e){return this._solarSystemPlanets=e,e},get_showEarthSky:function(){return this._showEarthSky},set_showEarthSky:function(e){return this._showEarthSky=e,e},get_solarSystemMinorOrbits:function(){return this._solarSystemMinorOrbits},set_solarSystemMinorOrbits:function(e){return this._solarSystemMinorOrbits=e,e},get_constellationsEnabled:function(){return this._constellationsEnabled},set_constellationsEnabled:function(e){return this._constellationsEnabled=e,e},get_constellationFiguresFilter:function(){return this._constellationFiguresFilter},set_constellationFiguresFilter:function(e){return this._constellationFiguresFilter=e,e},get_constellationBoundariesFilter:function(){return this._constellationBoundariesFilter},set_constellationBoundariesFilter:function(e){return this._constellationBoundariesFilter=e,e},get_constellationNamesFilter:function(){return this._constellationNamesFilter},set_constellationNamesFilter:function(e){return this._constellationNamesFilter=e,e},get_constellationArtFilter:function(){return this._constellationArtFilter},set_constellationArtFilter:function(e){return this._constellationArtFilter=e,e},get_showSkyOverlays:function(){return this._showSkyOverlays},set_showSkyOverlays:function(e){return this._showSkyOverlays=e,e},get_showConstellations:function(){return this._showConstellations},set_showConstellations:function(e){return this._showConstellations=e,e},get_showSkyNode:function(){return this._showSkyNode},set_showSkyNode:function(e){return this._showSkyNode=e,e},get_showSkyGrids:function(){return this._showSkyGrids},set_showSkyGrids:function(e){return this._showSkyGrids=e,e},get_showSkyOverlaysIn3d:function(){return this._showSkyOverlaysIn3d},set_showSkyOverlaysIn3d:function(e){return this._showSkyOverlaysIn3d=e,e},get_earthCutawayView:function(){return this._earthCutawayView},set_earthCutawayView:function(e){return this._earthCutawayView=e,e},get_showISSModel:function(){return this._showISSModel},set_showISSModel:function(e){return this._showISSModel=e,e},get_milkyWayModel:function(){return this._milkyWayModel},set_milkyWayModel:function(e){return this._milkyWayModel=e,e},get_minorPlanetsFilter:function(){return this._minorPlanetsFilter},set_minorPlanetsFilter:function(e){return this._minorPlanetsFilter=e,e},get_planetOrbitsFilter:function(){return this._planetOrbitsFilter},set_planetOrbitsFilter:function(e){return this._planetOrbitsFilter=e,e},getSetting:function(e){return e===17?new $a(!0,this.faderOpacity,!!this.faderOpacity,null):new $a(!1,1,!1,null)},get_eclipticGridColor:function(){return this._eclipticGridColor},set_eclipticGridColor:function(e){return this._eclipticGridColor=e,e},get_galacticGridColor:function(){return this._galacticGridColor},set_galacticGridColor:function(e){return this._galacticGridColor=e,e},get_altAzGridColor:function(){return this._altAzGridColor},set_altAzGridColor:function(e){return this._altAzGridColor=e,e},get_precessionChartColor:function(){return this._precessionChartColor},set_precessionChartColor:function(e){return this._precessionChartColor=e,e},get_eclipticColor:function(){return this._eclipticColor},set_eclipticColor:function(e){return this._eclipticColor=e,e},get_equatorialGridColor:function(){return this._equatorialGridColor},set_equatorialGridColor:function(e){return this._equatorialGridColor=e,e},get_constellationLabelsHeight:function(){return this._constellationLabelsHeight},set_constellationLabelsHeight:function(e){return this._constellationLabelsHeight=e,e}};function Os(){this.id=er.newGuid(),this.startOpacity=1,this.endOpacity=1,this.frameOpacity=1,this.startParams=new Array(0),this.endParams=new Array(0),this.frameParams=new Array(0)}var nh={};function oi(e,t){this._undoXml="",this._redoXml="",this._currentIndex=0,this._actionText="",this._targetTour=null,this._currentIndex=t.get_currentTourstopIndex(),this._actionText=e,this._targetTour=t,this._undoXml=Sr.getXmlText(t.get_currentTourStop()),this._targetTour.set_tourDirty(!0)}var ah={get_actionText:function(){return this._actionText},set_actionText:function(e){return this._actionText=e,e},undo:function(){var e=this._targetTour.get_tourStops()[this._currentIndex],t=new DOMParser,r=t.parseFromString(this._undoXml,"text/xml"),n=ye.selectSingleNode(r,"TourStop");this._targetTour.get_tourStops()[this._currentIndex]=Sr._fromXml(this._targetTour,n),this._targetTour.set_currentTourstopIndex(this._currentIndex),i.emptyString(this._redoXml)&&(this._redoXml=Sr.getXmlText(e)),this._targetTour.set_tourDirty(!0)},redo:function(){var e=new DOMParser,t=e.parseFromString(this._redoXml,"text/xml"),r=ye.selectSingleNode(t,"TourStop");this._targetTour.get_tourStops()[this._currentIndex]=Sr._fromXml(this._targetTour,r),this._targetTour.set_currentTourstopIndex(this._currentIndex),this._targetTour.set_tourDirty(!0)},toString:function(){return this._actionText}};function rt(){}rt.clear=function(){rt._undoStack=new i.Stack,rt._redoStack=new i.Stack},rt.push=function(e){rt._undoStack.push(e),rt._redoStack=new i.Stack},rt.peekActionString=function(){return rt._undoStack.count>0?rt._undoStack.peek().toString():_e.getLocalizedText(551,"Nothing to Undo")},rt.peekRedoActionString=function(){return rt._redoStack.count>0?rt._redoStack.peek().toString():""},rt.peekAction=function(){return rt._undoStack.count>0},rt.peekRedoAction=function(){return rt._redoStack.count>0},rt.stepBack=function(){var e=rt._undoStack.pop();e.undo(),rt._redoStack.push(e)},rt.stepForward=function(){var e=rt._redoStack.pop();e.redo(),rt._undoStack.push(e)};var sh={};function oh(){}var lh={undo:function(){},redo:function(){},toString:function(){return _e.getLocalizedText(551,"Nothing to Undo")}};function ea(e,t){this._currentIndex=0,this._actionText="",this._targetTour=null,this._undoList=[];for(var r=0;r<t.get_tourStops().length;r++)this._undoList.push(t.get_tourStops()[r]);this._currentIndex=t.get_currentTourstopIndex(),this._actionText=e,this._targetTour=t,this._targetTour.set_tourDirty(!0)}var uh={get_actionText:function(){return this._actionText},set_actionText:function(e){return this._actionText=e,e},undo:function(){this._redoList=this._targetTour.get_tourStops(),this._targetTour.set_tourStops(this._undoList),this._targetTour.set_currentTourstopIndex(this._currentIndex),this._targetTour.set_tourDirty(!0)},redo:function(){this._undoList=this._targetTour.get_tourStops(),this._targetTour.set_tourStops(this._redoList),this._targetTour.set_currentTourstopIndex(this._currentIndex),this._targetTour.set_tourDirty(!0)},toString:function(){return this._actionText}};function ch(e,t){this._actionText="",this._targetTour=null,this._undoDomeMode=!1,this._undoLevel=0,this._redoDomeMode=!1,this._redoLevel=0,this._undoTitle=t.get_title(),this._undoAuthor=t.get_author(),this._undoAuthorEmail=t.get_authorEmail(),this._undoDescription=t.get_description(),this._undoAuthorImage=t.get_authorImage(),this._undoOrganizationUrl=t.get_organizationUrl(),this._undoOrgName=t.get_orgName(),this._undoKeywords=t.get_keywords(),this._undoTaxonomy=t.get_taxonomy(),this._undoLevel=t.get_level(),this._actionText=e,this._targetTour=t,this._targetTour.set_tourDirty(!0)}var hh={get_actionText:function(){return this._actionText},set_actionText:function(e){return this._actionText=e,e},undo:function(){this._redoTitle=this._targetTour.get_title(),this._redoAuthor=this._targetTour.get_author(),this._redoAuthorEmail=this._targetTour.get_authorEmail(),this._redoDescription=this._targetTour.get_description(),this._redoAuthorImage=this._targetTour.get_authorImage(),this._redoOrganizationUrl=this._targetTour.get_organizationUrl(),this._redoOrgName=this._targetTour.get_orgName(),this._redoKeywords=this._targetTour.get_keywords(),this._redoTaxonomy=this._targetTour.get_taxonomy(),this._redoLevel=this._targetTour.get_level(),this._targetTour.set_title(this._undoTitle),this._targetTour.set_author(this._undoAuthor),this._targetTour.set_authorEmail(this._undoAuthorEmail),this._targetTour.set_description(this._undoDescription),this._targetTour.set_authorImage(this._undoAuthorImage),this._targetTour.set_organizationUrl(this._undoOrganizationUrl),this._targetTour.set_orgName(this._undoOrgName),this._targetTour.set_keywords(this._undoKeywords),this._targetTour.set_taxonomy(this._undoTaxonomy),this._targetTour.set_level(this._undoLevel),this._targetTour.set_tourDirty(!0)},redo:function(){this._targetTour.set_title(this._redoTitle),this._targetTour.set_author(this._redoAuthor),this._targetTour.set_authorEmail(this._redoAuthorEmail),this._targetTour.set_description(this._redoDescription),this._targetTour.set_authorImage(this._redoAuthorImage),this._targetTour.set_organizationUrl(this._redoOrganizationUrl),this._targetTour.set_orgName(this._redoOrgName),this._targetTour.set_keywords(this._redoKeywords),this._targetTour.set_taxonomy(this._redoTaxonomy),this._targetTour.set_level(this._redoLevel),this._targetTour.set_tourDirty(!0)},toString:function(){return this._actionText}};function mi(){this.a=0,this.b=0,this.c=0,this.a=-1,this.b=-1,this.c=-1}mi.create=function(e,t,r){var n=new mi;return n.a=e,n.b=t,n.c=r,n};var fh={subDivide:function(e,t){var r=I.lerp(t[this.b].position,t[this.c].position,.5),n=I.lerp(t[this.c].position,t[this.a].position,.5),a=I.lerp(t[this.a].position,t[this.b].position,.5),l=xe.lerp(xe.create(t[this.b].tu,t[this.b].tv),xe.create(t[this.c].tu,t[this.c].tv),.5),f=xe.lerp(xe.create(t[this.c].tu,t[this.c].tv),xe.create(t[this.a].tu,t[this.a].tv),.5),c=xe.lerp(xe.create(t[this.a].tu,t[this.a].tv),xe.create(t[this.b].tu,t[this.b].tv),.5);r.normalize(),n.normalize(),a.normalize();var d=t.length,m=t.length+1,v=t.length+2;t.push(Ue.createPosRaw(r,l.x,l.y)),t.push(Ue.createPosRaw(n,f.x,f.y)),t.push(Ue.createPosRaw(a,c.x,c.y)),e.push(mi.create(this.a,v,m)),e.push(mi.create(this.b,d,v)),e.push(mi.create(this.c,m,d)),e.push(mi.create(d,m,v))},subDivideNoNormalize:function(e,t){var r=I.lerp(t[this.b].position,t[this.c].position,.5),n=I.lerp(t[this.c].position,t[this.a].position,.5),a=I.lerp(t[this.a].position,t[this.b].position,.5),l=xe.lerp(xe.create(t[this.b].tu,t[this.b].tv),xe.create(t[this.c].tu,t[this.c].tv),.5),f=xe.lerp(xe.create(t[this.c].tu,t[this.c].tv),xe.create(t[this.a].tu,t[this.a].tv),.5),c=xe.lerp(xe.create(t[this.a].tu,t[this.a].tv),xe.create(t[this.b].tu,t[this.b].tv),.5),d=t.length,m=t.length+1,v=t.length+2;t.push(Ue.createPosRaw(r,l.x,l.y)),t.push(Ue.createPosRaw(n,f.x,f.y)),t.push(Ue.createPosRaw(a,c.x,c.y)),e.push(mi.create(this.a,v,m)),e.push(mi.create(this.b,d,v)),e.push(mi.create(this.c,m,d)),e.push(mi.create(d,m,v))}};function bi(){}bi.gamma=function(e,t){return Math.min(255,i.truncate(255*Math.pow(e/255,1/t)+.5))},bi.getNamesStringFromArray=function(e){for(var t="",r="",n=i.enumerate(e);n.moveNext();){var a=n.current;t+=r,t+=a,r=";"}return t},bi.solarSystemToMeters=function(e){return e*149598e3*370},bi.metersToSolarSystemDistance=function(e){return e/370*149598e3},bi.metersToZoom=function(e){return(e/1e3/370-1e-6)/4*9},bi.formatDistance=function(e){if(e<.1){var t=e*149598e3;if(t<10){var r=i.truncate(t*1e3);return i.format("{0} m",r)}else return t=i.truncate(t),i.format("{0} km",t)}else if(e<10){var n=i.truncate(e*10)/10;return i.format("{0} au",n)}else if(e<63239.6717/10){var n=i.truncate(e);return i.format("{0} au",n)}else if(e<63239.6717*10){var a=i.truncate(e*10/63239.6717)/10;return i.format("{0} ly",a)}else if(e<63239.6717*1e6){var a=i.truncate(e/63239.6717);return i.format("{0} ly",a)}else if(e<206264.806*1e7){var l=i.truncate(e*10/206264806e3)/10;return i.format("{0} Mpc",l)}else if(e<206264.806*1e9){var l=i.truncate(e/206264806e3);return i.format("{0} Mpc",l)}else{var l=i.truncate(e*10/206264806e6)/10;return i.format("{0} Gpc",l)}},bi.formatDecimalHours=function(e){var t=i.now(),r=t.getTimezoneOffset()/60;r=0;for(var n=e-r+.0083333334;n>24;)n-=24;for(;n<0;)n+=24;var a=i.truncate(n),l=i.truncate(n*60-a*60),f=i.truncate(n*3600-(a*3600+l*60));return i.format("{0}:{1}",a,l,f)},bi.splitString=function(e,t){for(var r=[],n=0,a=0,l=0,f=0;a<e.length;){if(e.substr(a,1)==="("&&n++,e.substr(a,1)===")"&&n--,a===e.length-1){if(e.substr(a,1)===t)return r.push(e.substr(f,l)),r.push(""),r;l++}a===e.length-1||e.substr(a,1)===t&&t==="	"||!n&&e.substr(a,1)===t?(r.push(e.substr(f,l)),f=a+1,l=0):l++,a++}return r},bi.split=function(e,t){for(var r=[],n=0,a=0,l=0;n<e.length;)n===e.length-1&&a++,n===e.length-1||t.indexOf(e.substr(n,1))>-1?(r.push(e.substr(l,a)),l=n+1,a=0):a++,n++;return r},bi._beep=function(){};var dh={};function ye(){}ye.splitString=function(e,t){for(var r=[],n=0,a=0,l=0;l<e.length;l++){for(var f=!1,c=0;c<t.length;c++){if(e[l]===t[c]){r.push(e.substring(n,a-n)),f=!0;continue}n=l+1,a=l+1}f||a++}return a>n&&r.push(e.substring(n,a-n)),r},ye.stringContains=function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},ye.getHashCode=function(e){var t=0;if(!e.length)return t;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);t=(t<<5)-t+n}return t},ye.compare=function(e,t){return e===t?0:e>t?1:-1},ye.logN=function(e,t){return Math.log(e)/Math.log(t)},ye.parseTimeSpan=function(e){var t=0,r=e.split(":");return r.length===3&&(t+=parseInt(r[0])*36e5,t+=parseInt(r[1])*6e4,t+=i.truncate(parseFloat(r[2])*1e3)),t},ye.xmlDuration=function(e){var t=e/1e3,r=Math.floor(t/3600),n=Math.floor(t/60)-r*60,a=t-(r*3600+n*60);return i.format("{0}:{1}:{2}",r,n,a)},ye.xmlDate=function(e){var t=e.getHours(),r="AM";return t>12&&(t-=12,r="PM"),(e.getMonth()+1).toString()+"/"+e.getDate().toString()+"/"+e.getFullYear().toString()+" "+t.toString()+":"+e.getMinutes().toString()+":"+e.getSeconds().toString()+" "+r},ye.selectSingleNode=function(e,t){for(var r=null,n=i.enumerate(e.childNodes);n.moveNext();){var a=n.current;if(a.nodeName===t){r=a;break}}return r},ye.getInnerText=function(e){if(i.emptyString(e.text)){var t=e;return t.textContent}else return e.text},ye.getWrappedText=function(e,t,r){var n=[];return n.push(t),n},ye.toHex=function(e){var t=Math.max(0,Math.min(i.truncate(e),255));return"0123456789ABCDEF".substr((t-t%16)/16,1)+"0123456789ABCDEF".substr(t%16,1)},ye.fromHex=function(e){var t=0;switch(e.substr(1,1).toUpperCase()){case"A":t+=10;break;case"B":t+=11;break;case"C":t+=12;break;case"D":t+=13;break;case"E":t+=14;break;case"F":t+=15;break;default:t+=parseInt(e.substr(1,1));break}switch(e.substr(0,1).toUpperCase()){case"A":t+=10*16;break;case"B":t+=11*16;break;case"C":t+=12*16;break;case"D":t+=13*16;break;case"E":t+=14*16;break;case"F":t+=15*16;break;default:t+=parseInt(e.substr(0,1))*16;break}return t},ye._openUrl=function(e){window.open(e)},ye.log10=function(e){return Math.log(e)/2.30258509299405},ye.sign=function(e){return e<0?-1:1};var _h={};function Ki(){this.x=0,this.y=0,this.width=0,this.height=0}Ki.create=function(e,t,r,n){var a=new Ki;return a.x=e,a.y=t,a.width=r,a.height=n,a};var gh={get_left:function(){return this.x},get_right:function(){return this.x+this.width},get_top:function(){return this.y},get_bottom:function(){return this.y+this.height},contains:function(e){return this._between(e.x,this.x,this.x+this.width)&&this._between(e.y,this.y,this.y+this.height)},_between:function(e,t,r){return t>r?!(e>t)&&!(e<r):!(e<t)&&!(e>r)},copy:function(){var e=new Ki;return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}};function er(){this._guid=er.create()}er.newGuid=function(){return new er},er.fromString=function(e){var t=new er;return t._guid=i.trim(e),t},er.create=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e=="x"?t:t&3|8;return r.toString(16)})},er.createFrom=function(e){var t=Js.v5(e,"1420736a-a637-40a7-813a-ba692e72204e");return er.fromString(t)};var mh={toString:function(){return this._guid}};function gt(){}gt.parse=function(e,t){if(t==="Default"&&(t="DefaultV"),t==="0")return 0;var r=t.substr(0,1).toLowerCase()+t.substr(1);return this._wwtlib[e][r]},gt.toXml=function(e,t){var r="0",n=Object.keys(this._wwtlib[e]);for(var a in n)if(this._wwtlib[e][n[a]]==t){r=n[a];break}var l=r,f=l.substr(0,1).toUpperCase()+l.substr(1);return f==="DefaultV"&&(f="Default"),f};var ph={};function Li(){}Li.offsetX=function(e,t){var r=0,n=e,a=t;if(n.offsetParent!=null)do r+=n.offsetLeft;while((n=n.offsetParent)!=null);return a.pageX-r},Li.offsetY=function(e,t){var r=0,n=e,a=t;if(n.offsetParent!=null)do r+=n.offsetTop;while((n=n.offsetParent)!=null);return a.pageY-r};function _e(){}_e.getLocalizedText=function(e,t){return t};var vh={};function Ei(){}Ei.get_position=function(){return new xe},Ei.get_current=function(){return document.body.style.cursor},Ei.set_current=function(e){return document.body.style.cursor=e,e};var wh={};function vi(){}vi.get_arrow=function(){return"default"},vi.get_cross=function(){return"crosshair"},vi.get_defaultV=function(){return"default"},vi.get_hand=function(){return"grab"},vi.get_help=function(){return"help"},vi.get_hSplit=function(){return"row-resize"},vi.get_iBeam=function(){return"text"},vi.get_no=function(){return"not-allowed"},vi.get_sizeAll=function(){return"help"},vi.get_sizeNESW=function(){return"nwse-resize"},vi.get_sizeNS=function(){return"ns-resize"},vi.get_sizeNWSE=function(){return"nwse-resize"},vi.get_sizeWE=function(){return"ew-resize"},vi.get_upArrow=function(){return"help"},vi.get_vSplit=function(){return"col-resize"},vi.get_waitCursor=function(){return"wait"};var bh={};function Us(e){this._return=!1,this._next=!0,this._linkSlide=!1,this._slide=null,this._ok=!1,e!=null?this.set_id(e):this.set_next(!0)}var yh={get_returnCaller:function(){return this._return},set_returnCaller:function(e){return e&&(this._slide="Return"),this._return=e,e},get_next:function(){return this._next},set_next:function(e){return e&&(this._slide="Next"),this._next=e,e},get_linkToSlide:function(){return this._linkSlide},set_linkToSlide:function(e){return e&&(this._slide="Next"),this._linkSlide=e,e},get_id:function(){return this._slide},set_id:function(e){return this._return=!1,this._next=!1,this._linkSlide=!0,this._slide=e,e},get_OK:function(){return this._ok},set_OK:function(e){return this._ok=e,e}};function To(){this.volume=0}var Ch={showDialog:function(){return 1}};function Sh(){this.volume=0,this.location=new xe,this.color=new G}var Mh={showDialog:function(){return 1}};function xo(){this.volume=0,this.location=new xe,this.overlay=null}var Th={showDialog:function(){return 1}};function ta(e){this.position=0,this._data=null,this._data=e}var xh={get_position:function(){return this.position},seek:function(e){this.position=e},seekRelative:function(e){this.position+=e},get_length:function(){return this._data.length},get_endOfStream:function(){return this.position>=this.get_length()},readByte:function(){var e;return e=this._data[this.position],this.position+=1,e},readSByte:function(){var e;return e=this._data[this.position],this.position+=1,e},readBytes:function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this._data[this.position+r];return this.position+=e,t},readRemainingI16:function(e){for(var t=new Float32Array(e),r=0;r<e;r++)t[r]=this.readInt16(!0);return t},readByteString:function(e){for(var t="",r=0;r<e;r++)t+=String.fromCharCode(this._data[this.position+r]);return this.position+=e,t},readSingle:function(){var e=new Uint8Array(4);e[0]=this._data[this.position],e[1]=this._data[this.position+1],e[2]=this._data[this.position+2],e[3]=this._data[this.position+3];var t=new Float32Array(e.buffer,0,1)[0];return this.position+=4,t},readUInt32:function(){var e=this._data[this.position]+(this._data[this.position+1]<<8)+(this._data[this.position+2]<<16)+(this._data[this.position+3]<<24);return this.position+=4,e},readUInt16:function(){var e=this._data[this.position]+(this._data[this.position+1]<<8);return this.position+=2,e},readUInt16LittleEndian:function(){var e=(this._data[this.position]<<8)+this._data[this.position+1];return this.position+=2,e},readInt16:function(e){var t=e?this.readUInt16LittleEndian():this.readUInt16();return t&32768?-(t-1^65535):t},readInt32:function(){var e=this.readUInt32();return e&2147483648?-(e-1^4294967295):e},readInt64:function(){return this.position+=8,ta.id++},close:function(){}};function ln(){this.width=0,this.height=0}ln.create=function(e,t){t=di.fitPowerOfTwo(t),e=di.fitPowerOfTwo(e);var r=new ln;return r.height=t,r.width=e,r._buffer=new Uint8Array(e*t*4),r};var Lh={setPixel:function(e,t,r,n,a,l){var f=(e+t*this.width)*4;this._buffer[f++]=r,this._buffer[f++]=n,this._buffer[f++]=a,this._buffer[f++]=l},getTexture:function(){var e=O.prepDevice.createTexture();return O.prepDevice.bindTexture(3553,e),O.prepDevice.texParameteri(3553,10242,33071),O.prepDevice.texParameteri(3553,10243,33071),O.prepDevice.texImage2D(3553,0,6408,this.width,this.height,0,6408,5121,this._buffer),O.prepDevice.texParameteri(3553,10241,9985),O.prepDevice.generateMipmap(3553),O.prepDevice.bindTexture(3553,null),e}};function Hs(){this.callBack=null,this.color=Te.get_white()}var kh={nonMenuClick:function(e){},show:function(e){q.scriptInterface.showColorPicker(this,e)},getColorFromClick:function(e){var t=document.getElementById("colorhex"),r=document.createElement("canvas");r.width=t.width,r.height=t.height;var n=r.getContext("2d");n.drawImage(t,0,0);var a=n.getImageData(e.offsetX,e.offsetY,1,1).data;return this.color=G.fromArgb(a[3],a[0],a[1],a[2]),this.color},pickColor:function(e){this.callBack(this.color)}};function un(){this.items=[]}var Ah={_dispose:function(){},_nonMenuClick:function(e){var t=document.getElementById("contextmenu");t.style.display="none",window.removeEventListener("click",i.bind("_nonMenuClick",this),!1);for(var r=document.getElementById("popoutmenu");r.firstChild!=null;)r.removeChild(r.firstChild);r.style.display="none"},_menuItemClicked:function(e){var t=e.currentTarget;t.itemTag.click(t.itemTag,new i.EventArgs)},_show:function(e){for(var t=document.getElementById("contextmenu");t.firstChild!=null;)t.removeChild(t.firstChild);t.className="contextmenu",t.style.display="block",t.style.left=e.x.toString()+"px",t.style.top=e.y.toString()+"px",window.addEventListener("click",i.bind("_nonMenuClick",this),!0);for(var r=i.enumerate(this.items);r.moveNext();){var n=r.current;if(n.visible){var a=document.createElement("div");n.dropDownItems.length>0?a.className="contextmenuitem submenu":n.checked?a.className="contextmenuitem checkedmenu":a.className="contextmenuitem",a.innerText=n.name;var l=a;l.itemTag=n,a.addEventListener("mouseover",i.bind("_openSubMenu",this),!1),n.click!=null&&a.addEventListener("click",i.bind("_menuItemClicked",this),!1),t.appendChild(a)}}},_openSubMenu:function(e){for(var t=e.currentTarget,r=t.itemTag,n=document.getElementById("popoutmenu");n.firstChild!=null;)n.removeChild(n.firstChild);if(n.style.display="none",!!r.dropDownItems.length){var a=new xe;a.x=e.currentTarget.parentNode.offsetLeft+e.currentTarget.parentNode.clientWidth,a.y=e.currentTarget.parentNode.offsetTop+e.currentTarget.offsetTop,n.className="contextmenu",n.style.display="block",n.style.left=a.x.toString()+"px",n.style.top=a.y.toString()+"px",window.addEventListener("click",i.bind("_nonMenuClick",this),!0);for(var l=i.enumerate(r.dropDownItems);l.moveNext();){var f=l.current;if(f.visible){var c=document.createElement("div");c.className=f.checked?"contextmenuitem checkedmenu":"contextmenuitem",c.innerText=f.name;var d=c;d.itemTag=f,c.addEventListener("click",i.bind("_menuItemClicked",this),!1),n.appendChild(c)}}}}};function Pe(){this.tag=null,this.dropDownItems=[],this.checked=!1,this.enabled=!0,this.visible=!0}Pe.create=function(e){var t=new Pe;return t.name=e,t};var Ih={};function Ph(){}var Rh={};function yn(){}var $h={add_showDialogHook:function(e){this.__showDialogHook=i.bindAdd(this.__showDialogHook,e)},remove_showDialogHook:function(e){this.__showDialogHook=i.bindSub(this.__showDialogHook,e)},show:function(e,t){this.__showDialogHook!=null&&this.__showDialogHook(e,t)}};function En(){this.image=null,this.layer=null,this.tile=null,this._dropDown=null,this._downPosition=0,this._lowPosition=0,this._highPosition=255,this._center=127,this._ignoreNextClick=!1,this._dragType=4,this._updated=!1,this.selectedCurveStyle=0}En.updateImage=function(e,t){if(!Zt.useGlVersion2){var r=i.safeCast(e.get_imageSet().get_wcsImage(),Wr),n=Oe.getTile(0,0,0,e.get_imageSet(),null);n.texture2d=r.getBitmap().getTexture()}},En.updateScale=function(e,t,r,n){if(e.get_imageSet().get_fitsProperties().scaleType=t,e.get_imageSet().get_fitsProperties().lowerCut=r,e.get_imageSet().get_fitsProperties().upperCut=n,!Zt.useGlVersion2){var a=i.safeCast(e.get_imageSet().get_wcsImage(),Wr),l=Oe.getTile(0,0,0,e.get_imageSet(),null);l.texture2d=a.getBitmap().getTexture()}},En.updateColorMapper=function(e,t){if(e.get_imageSet().get_fitsProperties().colorMapName=t,!Zt.useGlVersion2){var r=i.safeCast(e.get_imageSet().get_wcsImage(),Wr),n=Oe.getTile(0,0,0,e.get_imageSet(),null);n.texture2d=r.getBitmap().getTexture()}};var Eh={close:function(e){var t=document.getElementById("histogram");document.getElementById("histogramClose"),t.style.display="none",window.removeEventListener("click",i.bind("close",this),!0);var r=document.getElementById("graph");r.removeEventListener("mousedown",i.bind("onPointerDown",this),!1),r.removeEventListener("mousemove",i.bind("onPointerMove",this),!1),r.removeEventListener("mouseup",i.bind("onPointerUp",this),!1),this._dropDown.removeEventListener("change",i.bind("curveStyleSelected",this),!1),this._dropDown.removeEventListener("click",i.bind("ignoreMe",this),!0)},show:function(e){this.tile=Oe.getTile(0,0,0,this.layer.get_imageSet(),null);var t=document.getElementById("histogram"),r=document.getElementById("histogramClose");t.style.display="block",t.style.left=e.x.toString()+"px",t.style.top=e.y.toString()+"px",this.selectedCurveStyle=this.layer.get_imageSet().get_fitsProperties().scaleType,this._dropDown=document.getElementById("ScaleTypePicker"),this._dropDown.addEventListener("change",i.bind("curveStyleSelected",this),!1),this._dropDown.addEventListener("click",i.bind("ignoreMe",this),!0);var n=document.getElementById("graph");n.addEventListener("pointerdown",i.bind("onPointerDown",this),!1),n.addEventListener("pointermove",i.bind("onPointerMove",this),!1),n.addEventListener("pointerup",i.bind("onPointerUp",this),!1),r.addEventListener("click",i.bind("close",this),!0),this.draw()},ignoreMe:function(e){this._ignoreNextClick=!0},curveStyleSelected:function(e){this.selectedCurveStyle=this._dropDown.selectedIndex,this.setUpdateTimer(),this.layer.get_imageSet().get_fitsProperties().scaleType=this.selectedCurveStyle,this.draw(),this._ignoreNextClick=!0},onPointerDown:function(e){var t=document.getElementById("graph"),r=Li.offsetX(t,e),n=Li.offsetY(t,e);t.setPointerCapture(e.pointerId),Math.abs(r-this._center)<10&&Math.abs(n-75)<10?this._dragType=3:Math.abs(r-this._lowPosition)<10?this._dragType=0:Math.abs(r-this._highPosition)<10?this._dragType=1:(this._dragType=2,this._downPosition=Math.min(255,Math.max(0,r)),this.draw()),e.cancelBubble=!0},onPointerMove:function(e){var t=document.getElementById("graph"),r=Li.offsetX(t,e);switch(Li.offsetY(t,e),this._dragType){case 0:this._lowPosition=Math.min(255,Math.max(0,r));break;case 1:this._highPosition=Math.min(255,Math.max(0,r));break;case 2:this._lowPosition=this._downPosition,this._highPosition=Math.min(255,Math.max(0,r));break;case 3:var n=Math.abs(this._highPosition-this._lowPosition)/2,a=Math.min(255-n,Math.max(n,r)),l=this._center-a;this._lowPosition-=l,this._highPosition-=l;break;case 4:return}this._center=(this._lowPosition+this._highPosition)/2,this.draw();var f=(this.layer.get_imageSet().get_fitsProperties().maxVal-this.layer.get_imageSet().get_fitsProperties().minVal)/256,c=this.layer.get_imageSet().get_fitsProperties().minVal+this._lowPosition*f,d=this.layer.get_imageSet().get_fitsProperties().minVal+this._highPosition*f;this.setUpdateTimer(),this.layer.get_imageSet().get_fitsProperties().upperCut=d,this.layer.get_imageSet().get_fitsProperties().lowerCut=c,this.layer.get_imageSet().get_fitsProperties().scaleType=this.selectedCurveStyle,e.cancelBubble=!0},onPointerUp:function(e){e.srcElement.releasePointerCapture(e.pointerId),this._dragType!==4&&(this._dragType=4,this.setUpdateTimer(),this._ignoreNextClick=!0),e.cancelBubble=!0},setUpdateTimer:function(){var e=this;Zt.useGlVersion2||(setTimeout(function(){e.update()},500),this._updated=!1)},update:function(){if(!this._updated){if(i.canCast(this.image,Wr)){var e=(this.layer.get_imageSet().get_fitsProperties().maxVal-this.layer.get_imageSet().get_fitsProperties().minVal)/256,t=this.layer.get_imageSet().get_fitsProperties().minVal+this._lowPosition*e,r=this.layer.get_imageSet().get_fitsProperties().minVal+this._highPosition*e;this.tile.texture2d=this.image.getScaledBitmap(t,r,this.selectedCurveStyle,0,null).getTexture()}this._updated=!0}},draw:function(){var e=document.getElementById("graph"),t=e.getContext("2d");this.image!=null&&this.image.drawHistogram(t);var r="rgba(255,0,0,255)",n="rgba(0,255,0,255)",a="rgba(0,0,255,255)";t.strokeStyle=r,t.beginPath(),t.moveTo(this._lowPosition,0),t.lineTo(this._lowPosition,150),t.stroke(),t.strokeStyle=n,t.beginPath(),t.moveTo(this._highPosition,0),t.lineTo(this._highPosition,150),t.stroke(),t.strokeStyle=a,t.beginPath(),t.arc(this._center,75,10,0,Math.PI*2,!1),t.closePath(),t.stroke();var l=[];switch(this.selectedCurveStyle){case 0:l.length=0,l.push(xe.create(this._lowPosition,150)),l.push(xe.create(this._highPosition,0));break;case 1:l.length=0;for(var c=150/Math.log(255),d=this._highPosition-this._lowPosition,m=d<0?-1:1,v=Math.abs(256/(d||1e-6)),C=1e-6,f=this._lowPosition;f!==this._highPosition;f+=m)l.push(xe.create(f,150-Math.log(C)*c)),C+=v;break;case 2:l.length=0;for(var c=150/Math.pow(255,2),d=this._highPosition-this._lowPosition,m=d<0?-1:1,v=Math.abs(256/(d||1e-6)),C=1e-6,f=this._lowPosition;f!==this._highPosition;f+=m)l.push(xe.create(f,150-Math.pow(C,2)*c)),C+=v;break;case 3:l.length=0;for(var c=150/Math.sqrt(255),d=this._highPosition-this._lowPosition,m=d<0?-1:1,v=Math.abs(256/(d||1e-6)),C=1e-6,f=this._lowPosition;f!==this._highPosition;f+=m)l.push(xe.create(f,150-Math.sqrt(C)*c)),C+=v;break}if(l.length>1){t.beginPath(),t.strokeStyle=a,t.moveTo(l[0].x,l[0].y);for(var f=1;f<l.length;f++)t.lineTo(l[f].x,l[f].y);t.stroke()}}};function Da(e,t,r,n){this.title="Tile",this.label="Enter Text Below",this.text="",this._textElement=null,this._ignoreNextClick=!1,this.title=e,this.label=t,this.text=r}var Dh={showDialog:function(){return 1},nonMenuClick:function(e){this._ignoreNextClick||this._close(),this._ignoreNextClick=!1},show:function(e,t){var r=document.getElementById("simpleinput"),n=document.getElementById("simplemodal");n.style.display="block",r.style.display="block",r.style.marginLeft=e.x.toString()+"px",r.style.marginTop=e.y.toString()+"px",this._textElement=document.getElementById("inputtext"),this._textElement.value=this.text;var a=document.getElementById("simpletitle"),l=document.getElementById("inputlabel");a.innerText=this.title,l.innerText=this.label,this._textElement.addEventListener("change",i.bind("textChanged",this),!1),this._textElement.addEventListener("click",i.bind("ignoreMe",this),!0);var f=document.getElementById("simpleinputok"),c=document.getElementById("simpleinputcancel");f.addEventListener("click",i.bind("okClicked",this),!1),c.addEventListener("click",i.bind("cancelClicked",this),!1),this._okCallback=t},okClicked:function(e){this._close(),this._okCallback!=null&&this._okCallback()},cancelClicked:function(e){this._close()},_close:function(){var e=document.getElementById("simplemodal");e.style.display="none",this._textElement.removeEventListener("change",i.bind("textChanged",this),!1);var t=document.getElementById("simpleinputok"),r=document.getElementById("simpleinputcancel");t.removeEventListener("click",i.bind("okClicked",this),!1),r.removeEventListener("click",i.bind("cancelClicked",this),!1)},ignoreMe:function(e){this._ignoreNextClick=!0},textChanged:function(e){this.text=this._textElement.value,this._ignoreNextClick=!0}};function ia(){this.body=`<?xml version='1.0' encoding='UTF-8'?>\r
`,this.formatting=1,this._elementStack=new i.Stack,this._pending=!1,this._currentName="",this._attributes={},this._value=""}var Fh={_pushNewElement:function(e){this._writePending(!1),this._elementStack.push(e),this._pending=!0,this._currentName=e},_writePending:function(e){var t=!0;if(this._pending){for(var r=1;r<this._elementStack.count;r++)this.body+="  ";if(this.body+="<"+this._currentName,i.keyCount(this._attributes)>0)for(var n=i.enumerate(i.keys(this._attributes));n.moveNext();){var a=n.current;this.body+=i.format(' {0}="{1}"',a,this._attributes[a])}return i.emptyString(this._value)?e?(this.body+=` />\r
`,t=!0):this.body+=`>\r
`:(this.body+=">",t=!1,i.emptyString(this._value)||(this.body+=this._value)),this._pending=!1,this._currentName="",this._value="",this._attributes={},t}return!1},_writeProcessingInstruction:function(e,t){},_writeStartElement:function(e){this._pushNewElement(e)},_writeAttributeString:function(e,t){t!=null?this._attributes[e]=i.replaceString(t.toString(),"&","&amp;"):this._attributes[e]=""},_writeEndElement:function(){if(this._writePending(!0))this._elementStack.pop();else{for(var e=1;e<this._elementStack.count;e++)this.body+="  ";this.body+=i.format(`</{0}>\r
`,this._elementStack.pop())}},_writeString:function(e){this._value=i.replaceString(e,"&","&amp;")},_writeFullEndElement:function(){this._writePending(!1);for(var e=1;e<this._elementStack.count;e++)this.body+="  ";this.body+=i.format(`</{0}>\r
`,this._elementStack.pop())},_close:function(){},_writeElementString:function(e,t){this._writeStartElement(e),this._writeValue(i.replaceString(t,"&","&amp;")),this._writeEndElement()},_writeValue:function(e){this._value=i.replaceString(e,"&","&amp;")},_writeCData:function(e){this._value=i.format("<![CDATA[{0}]]>",e)}};function Lo(){this.table=[],this.items=[],this._imageReady=!1,this._dateColumn=0,this._latColumn=1,this._lngColumn=2,this._depthColumn=3,this._magColumn=4}var Nh={load:function(e){var t=this,r=e.split(`\r
`);this._starProfile=document.createElement("img"),this._starProfile.addEventListener("load",function(f){t._imageReady=!0},!1),this._starProfile.src=Nt.singleton.engineAssetUrl("StarProfileAlpha.png");for(var n=!1,a=i.enumerate(r);a.moveNext();){var l=a.current;n?this.table.push(l.split("	")):(this.header=l.split("	"),n=!0)}},prepare:function(){this._worldList=new Array(this.table.length),this._transformedList=new Array(this.table.length);for(var e=0,t=i.enumerate(this.table);t.moveNext();){var r=t.current,n=new Gs;n.eventTime=i.date(r[this._dateColumn]);var a=(6371e3-parseFloat(r[this._depthColumn])*1e3)/6371e3;n.location=V.geoTo3dRad(parseFloat(r[this._latColumn]),parseFloat(r[this._lngColumn])+180,a),n.tranformed=new I,n.size=Math.pow(2,parseFloat(r[this._magColumn]))/50,this._worldList[e]=n.location,this._transformedList[e]=n.tranformed,this.items.push(n),e++}},draw:function(e){if(this._imageReady){e.device.save(),e.WVP.projectArrayToScreen(this._worldList,this._transformedList);var t=e.device;t.globalAlpha=.4;var r=e.width,n=e.height;I.makeCopy(e.get_viewPoint());for(var a=e.get_fovScale()/100,l=i.enumerate(this.items);l.moveNext();){var f=l.current;if(f.tranformed.z<1){var c=f.tranformed.x,d=f.tranformed.y,m=4*f.size/a,v=m/2;c>-v&&c<r+v&&d>-v&&d<n+v&&t.drawImage(this._starProfile,c-m/2,d-m/2,m,m)}}e.device.restore()}}};function Gs(){this.size=0}var Vh={getColor:function(){return"Red"}};function fr(e){this._state=0,this.responseType="",this._triedOnce=!1,this._url=e}var Bh={send:function(){if(!(typeof navigator>"u")){var e=navigator.appVersion;e.indexOf("MSIE 8")>-1||e.indexOf("MSIE 9")>-1?this._ieCrossDomain():this._CORS(),this.set_state(0)}},get_message:function(){return this._message},get_state:function(){return this._state},set_state:function(e){return this._state=e,this.onStateChange!=null&&this.onStateChange(),e},_loadData:function(e){this._data=e,this.set_state(1)},_loadBlob:function(e){this._blobdata=e,this.set_state(1)},_error:function(){this._message=i.format("Error encountered loading {0}",this._url),this.set_state(2)},_timeOut:function(){this._message=i.format("Timeout encountered loading {0}",this._url),this.set_state(2)},_ieCrossDomain:function(){var e=this;this._xdr=new XDomainRequest,this._xdr.onload=function(){e._loadData(e._xdr.responseText)},this._xdr.onTimeout=i.bind("_error",this),this._xdr.onError=i.bind("_timeOut",this),this._xdr.open("get",this._url),this._xdr.send()},_CORS:function(){var e=this;this._xhr=new XMLHttpRequest;try{this._xhr.open("GET",this._url),this.responseType!=null&&(this._xhr.responseType=this.responseType),this._xhr.onreadystatechange=function(){if(e._xhr.readyState===4){if(e._xhr.status)e._xhr.status>=400?(e._message=e._xhr.statusText,e.set_state(2)):e.responseType?e._loadBlob(e._xhr.response):e._loadData(e._xhr.responseText);else if(!e._triedOnce){e._triedOnce=!0,e._xhr.onreadystatechange=null;var t=Nt.singleton.activateProxy(e._url);t!=null?(e._url=t,e._CORS()):(e._message=e._xhr.statusText,e.set_state(2))}}},this._xhr.send()}catch(t){throw this._message=t.message,this.set_state(2),t}},getText:function(){return this._data},getBlob:function(){return this._blobdata},getXml:function(){var e=new DOMParser;return e.parseFromString(this._data,"text/xml")}};function ko(e,t){this.loadChildFolders=!1,this._numLoadingFolders=0,this._onComplete=e,this.loadChildFolders=t}var zh={_folderLoaded:function(){this._numLoadingFolders--,this._numLoadingFolders||this._onComplete()},startingNewFolderLoad:function(e){var t=this;this._numLoadingFolders++,e.childLoadCallback(function(){ma.loadImagesets(e,t),t._folderLoaded()})}};function ma(){}ma.getWtmlFile=function(e,t,r){r==null&&(r=!1);var n=new vn;n.set_url(e);var a=new ko(t,r);return a.startingNewFolderLoad(n),n},ma.loadImagesets=function(e,t){for(var r=e.get_children(),n=i.enumerate(r);n.moveNext();){var a=n.current;if(i.canCast(a,Mi)){var l=a;q.addImageSetToRepository(l)}if(i.canCast(a,hr)){var f=a;f.get_studyImageset()!=null&&q.addImageSetToRepository(f.get_studyImageset()),f.get_backgroundImageset()!=null&&q.addImageSetToRepository(f.get_backgroundImageset())}i.canCast(a,vn)&&t.loadChildFolders&&t.startingNewFolderLoad(a)}if(!i.emptyString(q.imageSetName))for(var c=q.imageSetName.toLowerCase(),d=i.enumerate(q.getImageSets());d.moveNext();){var m=d.current;m.get_name().toLowerCase()===c&&q.singleton.renderContext.set_backgroundImageset(m)}};var Oh={};function q(){this.freestandingMode=!1,this.uiController=null,this._annotations=[],this._hoverText="",this._hoverTextPoint=new xe,this._lastMouseMove=new Date(1900,1,0,0,0,0,0),this.layers=[],this._frameCount=0,this._zoomMax=360,this._zoomMaxSolarSystem=1e16,this._zoomMin=.001373291015625,this._zoomMinSolarSystem=1e-8,this.constellation="UMA",this._fadePoints=null,this.fader=pn.create(!0,2e3),this._crossFadeFrame=!1,this._crossFadeTexture=null,this._sprite=new Wn,this.renderType=2,this._milkyWayBackground=null,this.capturingVideo=!1,this._videoBlobReady=null,this.dumpFrameParams=null,this._videoBlobQueue={},this._videoQueueIndex=0,this._emptyFrames=[],this._beginZoom=1,this._dragging=!1,this._mouseDown=!1,this._isPinching=!1,this._lastX=0,this._lastY=0,this._pointerIds=new Array(2),this._pinchingZoomRect=new Array(2),this._moved=!1,this._foregroundCanvas=null,this._fgDevice=null,this._tracking=!1,this._trackingObject=null,this.sandboxMode=!1,this._solarSystemTrack=65536,this._moving=!1,this._targetStudyImageset=null,this._targetBackgroundImageset=null,this.tour=null,this.tourEdit=null,this._crossHairs=null}q.addImageSetToRepository=function(e){for(var t=i.enumerate(q.imageSets);t.moveNext();){var r=t.current;if(r.get_imageSetID()===e.get_imageSetID())return r}return q.imageSets.push(e),e},q.getImageSets=function(){return q.imageSets},q.get_renderNeeded=function(){return q._renderNeeded},q.set_renderNeeded=function(e){return q._renderNeeded=!0,e},q.initControl=function(e){return q.initControl2(e,!0)},q.initControlParam=function(e,t){return q.initControl2(e,!0)},q.initControl2=function(e,t){return q.initControl6(e,t,0,0,360,"Sky")},q.initControl6=function(e,t,r,n,a,l){if(q.singleton.renderContext.device==null){q.scriptInterface=new on,q.scriptInterface.settings=U.get_current();var f=q._createCanvasElement(e),c=f.getContext("webgl2");if(c!=null?Zt.useGlVersion2=!0:(console.warn("This browser does not support WebGL 2.0. Some features will work suboptimally. To get the full AAS WWT experience, consider using the latest version of Chrome, Firefox or Edge. In case you would like to use Safari, we recommend that you enable WebGL 2.0"),c=f.getContext("webgl")),c==null&&(c=f.getContext("experimental-webgl")),c==null){var d=f.getContext("2d");q.singleton.renderContext.device=d}else O.prepDevice=c,q.singleton.renderContext.gl=c,Zt.useGl=!0;q.singleton.canvas=f,q.singleton.renderContext.width=f.width,q.singleton.renderContext.height=f.height,q.singleton.setup(f,r,n,a),Ge.initializeConstellations(),k.oneTimeInitialization(),l==="earth"?q.singleton.renderContext.set_backgroundImageset(Mi.create("Blue Marble",Nt.singleton.coreStaticUrl("wwtweb/tiles.aspx?q={1},{2},{3},bm200407"),0,3,3,101,0,7,256,180,".png",!1,"",0,0,0,!1,Nt.singleton.coreStaticUrl("wwtweb/thumbnail.aspx?name=bm200407"),!0,!1,0,0,0,"","","","",6371e3,"Earth")):l==="black"?q.singleton.renderContext.set_backgroundImageset(Mi.create("Black Sky Background","",2,3,3,102,0,0,256,180,".png",!1,"0123",0,0,0,!1,"",!1,!1,2,0,0,"","","","",1,"Sky")):q.singleton.renderContext.set_backgroundImageset(Mi.create("DSS",Nt.singleton.coreStaticUrl("wwtweb/dss.aspx?q={1},{2},{3}"),2,3,3,100,0,12,256,180,".png",!1,"",0,0,0,!1,Nt.singleton.coreStaticUrl("thumbnails/DSS.png"),!0,!1,0,0,0,"","","","",1,"Sky"))}return q.singleton.renderContext.viewCamera.lng+=0,q.singleton.renderContext._initGL(),t&&q.singleton.render(),q.scriptInterface},q._createCanvasElement=function(e){var t=document.getElementById(e),r=document.createElement("canvas");return r.height=t.clientHeight,r.width=t.clientWidth,t.appendChild(r),r},q.useUserLocation=function(){navigator.geolocation.getCurrentPosition(q._getLocation,q._getLocationError)},q._getLocation=function(e){e.coords.latitude&&U.get_globalSettings().set_locationLat(e.coords.latitude),e.coords.longitude&&U.get_globalSettings().set_locationLng(e.coords.longitude),e.coords.altitude&&U.get_globalSettings().set_locationAltitude(e.coords.altitude)},q._getLocationError=function(e){e!=null&&e.coords!=null&&(e.coords.latitude,e.coords.longitude)},q.setBackgroundImageName=function(e){q.imageSetName=e},q.setForegroundImageName=function(e){q.imageSetName=e},q.showLayers=function(e){q.showDataLayers=e};var Uh={_addAnnotation:function(e){this._annotations.push(e),vt.batchDirty=!0},_removeAnnotation:function(e){i.remove(this._annotations,e),vt.batchDirty=!0},_clearAnnotations:function(){this._annotations.length=0,vt.batchDirty=!0},_annotationclicked:function(e,t,r,n){if(this._annotations!=null&&this._annotations.length>0)for(var a=i.enumerate(this._annotations);a.moveNext();){var l=a.current;if(l.hitTest(this.renderContext,e,t,r,n))return q.scriptInterface._fireAnnotationclicked(e,t,l.get_id()),!0}return!1},_annotationHover:function(e,t,r,n){if(this._annotations!=null&&this._annotations.length>0)for(var a=i.enumerate(this._annotations);a.moveNext();){var l=a.current;if(l.hitTest(this.renderContext,e,t,r,n))return this._hoverText=l.get_label(),this._hoverTextPoint=xe.create(r,n),!0}return!1},get_zoomMax:function(){return this.renderContext.get_backgroundImageset()!=null&&this.renderContext.get_backgroundImageset().get_dataSetType()===4?this._zoomMaxSolarSystem:this._zoomMax},set_zoomMax:function(e){return this._zoomMax=e,e},setSolarSystemMaxZoom:function(e){this._zoomMaxSolarSystem=e},get_zoomMin:function(){return this.renderContext.get_backgroundImageset()!=null&&this.renderContext.get_backgroundImageset().get_dataSetType()===4?this._zoomMinSolarSystem:this._zoomMin},set_zoomMin:function(e){return this._zoomMin=e,e},setSolarSystemMinZoom:function(e){this._zoomMinSolarSystem=e},_notifyMoveComplete:function(){},get_crossFadeFrame:function(){return this._crossFadeFrame},set_crossFadeFrame:function(e){return e&&this._crossFadeFrame!==e&&(this._crossFadeTexture!=null,this._crossFadeTexture=this.renderContext._getScreenTexture()),this._crossFadeFrame=e,e||this._crossFadeTexture!=null&&(this._crossFadeTexture=null),e},_fadeFrame:function(){if(this.renderContext.gl!=null){var e=U.get_active().getSetting(17);if(e.opacity>0){var t=G._fromArgbColor(255-bi.gamma(255-i.truncate(e.opacity*255),.45454545454545453),Te.get_black());if(e.opacity>0||(t=G._fromArgbColor(255-bi.gamma(255-i.truncate(e.opacity*255),1/2.2),Te.get_black())),this._crossFadeFrame?t=G._fromArgbColor(bi.gamma(i.truncate(e.opacity*255),1/2.2),Te.get_white()):this._crossFadeTexture!=null&&(this._crossFadeTexture=null),this._fadePoints==null){this._fadePoints=new Array(4);for(var r=0;r<4;r++)this._fadePoints[r]=new qt}this._fadePoints[0].position.x=-this.renderContext.width/2,this._fadePoints[0].position.y=this.renderContext.height/2,this._fadePoints[0].position.z=1347,this._fadePoints[0].tu=0,this._fadePoints[0].tv=1,this._fadePoints[0].color=t,this._fadePoints[1].position.x=-this.renderContext.width/2,this._fadePoints[1].position.y=-this.renderContext.height/2,this._fadePoints[1].position.z=1347,this._fadePoints[1].tu=0,this._fadePoints[1].tv=0,this._fadePoints[1].color=t,this._fadePoints[2].position.x=this.renderContext.width/2,this._fadePoints[2].position.y=this.renderContext.height/2,this._fadePoints[2].position.z=1347,this._fadePoints[2].tu=1,this._fadePoints[2].tv=1,this._fadePoints[2].color=t,this._fadePoints[3].position.x=this.renderContext.width/2,this._fadePoints[3].position.y=-this.renderContext.height/2,this._fadePoints[3].position.z=1347,this._fadePoints[3].tu=1,this._fadePoints[3].tv=0,this._fadePoints[3].color=t,this._sprite.draw(this.renderContext,this._fadePoints,4,this._crossFadeTexture,!0,1)}}},captureVideo:function(e,t,r,n,a,l){this.capturingVideo=!0,this._videoBlobReady=e,i.clearKeys(this._videoBlobQueue),this._videoQueueIndex=0,this._emptyFrames.length=0,this.dumpFrameParams=new oo(t,r,n,l,!0),K.frameDumping=!0,K.framesPerSecond=n,K.totalFrames=a,K.currentFrameNumber=0},render:function(){var e=this;this.renderOneFrame(),setTimeout(function(){e.render()},10)},renderOneFrame:function(){this.renderContext.get_backgroundImageset()!=null?this.renderType=this.renderContext.get_backgroundImageset().get_dataSetType():this.renderType=2;var e=!1;if(this.canvas.width!==this.canvas.parentNode.clientWidth&&(this.canvas.width=this.canvas.parentNode.clientWidth,e=!0),this.canvas.height!==this.canvas.parentNode.clientHeight&&(this.canvas.height=this.canvas.parentNode.clientHeight,e=!0),e&&this.explorer!=null&&this.explorer.refresh(),!(this.canvas.width<1||this.canvas.height<1)){if(e&&(this._crossHairs=null),O.lastDeepestLevel=O.deepestLevel,Ct.width=this.renderContext.width=this.canvas.width,Ct.height=this.renderContext.height=this.canvas.height,O.tilesInView=0,O.tilesTouched=0,O.deepestLevel=0,K.set_metaNow(i.now()),this.get__mover()!=null){if(K.set_now(this.get__mover().get_currentDateTime()),P.updatePlanetLocations(this.get_solarSystemMode()),this.get__mover()!=null){var t=this.get__mover().get_currentPosition();if(this.renderContext.targetCamera=t.copy(),this.renderContext.viewCamera=t.copy(),this.renderContext.space&&U.get_active().get_galacticMode()){var r=V.j2000toGalactic(t.get_RA()*15,t.get_dec());this.renderContext.targetAlt=this.renderContext.alt=r[1],this.renderContext.targetAz=this.renderContext.az=r[0]}else if(this.renderContext.space&&U.get_active().get_localHorizonMode()){var n=V.equitorialToHorizon(V.fromRaDec(t.get_RA(),t.get_dec()),K.get_location(),K.get_now());this.renderContext.targetAlt=this.renderContext.alt=n.get_alt(),this.renderContext.targetAz=this.renderContext.az=n.get_az()}this.get__mover().get_complete()&&(q.scriptInterface._fireArrived(this.get__mover().get_currentPosition().get_RA(),this.get__mover().get_currentPosition().get_dec(),q.singleton.renderContext.viewCamera.zoom),this.set__mover(null),this._notifyMoveComplete())}}else K.updateClock(),P.updatePlanetLocations(this.get_solarSystemMode()),this._updateViewParameters();if(this.renderContext.clear(),this.renderType===4){this._solarSystemTrack<20&&(P.getAdjustedPlanetRadius(this._solarSystemTrack),this.renderContext.get_solarSystemCameraDistance(),this.renderContext.get_fovLocal()),this._trackingObject==null,this.renderContext.setupMatricesSolarSystem(!0);var a=this.renderContext.viewCamera.zoom,l=Math.min(1,Math.max(0,Math.log(a)-8.4)/4.2),f=Math.min(1,Math.max(0,Math.log(a)-17.9)/2.3),c=this.renderContext.get_world(),d=this.renderContext.get_world().clone();d._multiply(Z._scaling(1e5,1e5,1e5)),d._multiply(Z._rotationX(23.5/180*Math.PI)),d._multiply(Z.translation(this.renderContext.cameraPosition)),this.renderContext.set_world(d),this.renderContext.set_worldBase(d),this.renderContext.space=!0,this.renderContext.makeFrustum();var m=this.renderContext.lighting;if(this.renderContext.lighting=!1,U.get_active().get_solarSystemMilkyWay()&&l<1&&(this._milkyWayBackground==null&&(this._milkyWayBackground=this.getImagesetByName("Digitized Sky Survey (Color)")),this._milkyWayBackground!=null)){Ct.cullInside=!0;var v=(1-l)/2;this.renderContext.drawImageSet(this._milkyWayBackground,v*100),Ct.cullInside=!1}this._drawSkyOverlays(),this.renderContext.lighting=m,this.renderContext.space=!1,this.renderContext.set_world(c),this.renderContext.set_worldBase(c),this.renderContext.makeFrustum();var C=this.renderContext.cameraPosition,T=this.renderContext.get_world(),A=this.renderContext.get_world();A._multiply(Z.translation(this.renderContext.viewCamera.viewTarget)),this.renderContext.cameraPosition=I.subtractVectors(this.renderContext.cameraPosition,this.renderContext.viewCamera.viewTarget),this.renderContext.set_world(A),this.renderContext.makeFrustum(),U.get_active().get_solarSystemCosmos()&&X.drawCosmos3D(this.renderContext,1),U.get_active().get_solarSystemMilkyWay()&&f>0&&X.drawGalaxyImage(this.renderContext,f),U.get_active().get_solarSystemStars()&&X.drawStars3D(this.renderContext,1),A=T;var $=this.renderContext.viewCamera.viewTarget,N=I.create(-$.x,-$.y,-$.z);this.renderContext.cameraPosition=C,A._multiply(Z.translation(N)),this.renderContext.set_world(A),this.renderContext.makeFrustum(),k._draw(this.renderContext,1,!0,"Sky",!0,!1),this.renderContext.set_world(T),this.renderContext.makeFrustum(),this.renderContext.get_solarSystemCameraDistance()<15e3&&(this.renderContext.setupMatricesSolarSystem(!1),U.get_active().get_solarSystemMinorPlanets()&&Ut.drawMPC3D(this.renderContext,1,this.renderContext.viewCamera.viewTarget),U.get_active().get_solarSystemPlanets()&&P.drawPlanets3D(this.renderContext,1,this.renderContext.viewCamera.viewTarget))}else{if(!this.renderType||this.renderType===1?this.renderContext._setupMatricesLand3d():this.renderContext.setupMatricesSpace3d(this.renderContext.width,this.renderContext.height),this.renderContext.drawImageSet(this.renderContext.get_backgroundImageset(),100),this.renderContext.get_foregroundImageset()!=null)if(this.renderContext.get_foregroundImageset().get_dataSetType()!==this.renderContext.get_backgroundImageset().get_dataSetType())this.renderContext.set_foregroundImageset(null);else if(this.renderContext.viewCamera.opacity!==100&&this.renderContext.gl==null){(this._foregroundCanvas.width!==this.renderContext.width||this._foregroundCanvas.height!==this.renderContext.height)&&(this._foregroundCanvas.width=i.truncate(this.renderContext.width),this._foregroundCanvas.height=i.truncate(this.renderContext.height));var F=this.renderContext.device;this._fgDevice.clearRect(0,0,this.renderContext.width,this.renderContext.height),this.renderContext.device=this._fgDevice,this.renderContext.drawImageSet(this.renderContext.get_foregroundImageset(),100),this.renderContext.device=F,this.renderContext.device.save(),this.renderContext.device.globalAlpha=this.renderContext.viewCamera.opacity/100,this.renderContext.device.drawImage(this._foregroundCanvas,0,0),this.renderContext.device.restore()}else this.renderContext.drawImageSet(this.renderContext.get_foregroundImageset(),this.renderContext.viewCamera.opacity);if(this.renderType===2)for(var z=i.enumerate(this.renderContext.get_catalogHipsImagesets());z.moveNext();){var Y=z.current;Y.get_hipsProperties().get_catalogSpreadSheetLayer().enabled&&Y.get_hipsProperties().get_catalogSpreadSheetLayer().lastVersion===Y.get_hipsProperties().get_catalogSpreadSheetLayer().get_version()&&this.renderContext.drawImageSet(Y,100)}if(this.renderType===2&&U.get_active().get_showSolarSystem()&&(P.drawPlanets(this.renderContext,1),this.constellation=Ge.containment.findConstellationForPoint(this.renderContext.viewCamera.get_RA(),this.renderContext.viewCamera.get_dec()),this._drawSkyOverlays()),this.get_planetLike()||this.get_space()){if(this.get_space())this.renderContext.set_worldBaseNonRotating(this.renderContext.get_world()),this._targetBackgroundImageset!=null&&this.renderContext.set_nominalRadius(this._targetBackgroundImageset.get_meanRadius());else{var W=V.mstFromUTC2(K.get_now(),0)/180*Math.PI;this.renderContext.set_worldBaseNonRotating(Z.multiplyMatrix(Z._rotationY(W),this.renderContext.get_worldBase())),this._targetBackgroundImageset!=null&&this.renderContext.set_nominalRadius(this._targetBackgroundImageset.get_meanRadius())}var ee=this.getCurrentReferenceFrame();k._draw(this.renderContext,1,this.get_space(),ee,!0,this.get_space())}}var ne=this.renderContext.get_world(),ae=this.renderContext.get_view(),de=this.renderContext.get_projection();if(U.get_current().get_showCrosshairs()&&this._drawCrosshairs(this.renderContext),this.uiController!=null)this.uiController.render(this.renderContext);else{vt.prepBatch(this.renderContext);for(var se=i.enumerate(this._annotations);se.moveNext();){var we=se.current;we.draw(this.renderContext)}if(vt.drawBatch(this.renderContext),i.now()-this._lastMouseMove>400){var fe=this.getCoordinatesForScreenPoint(this._hoverTextPoint.x,this._hoverTextPoint.y);this._annotationHover(fe.x,fe.y,this._hoverTextPoint.x,this._hoverTextPoint.y),this._lastMouseMove=new Date(2100,1,1)}i.emptyString(this._hoverText)||this._drawHoverText(this.renderContext)}var $e=!Oe.get_queueCount();this.renderContext.setupMatricesOverlays(),this._fadeFrame(),this._frameCount++,Oe.decimateQueue(),Oe.processQueue(this.renderContext),O.currentRenderGeneration++,Ht.get_playing()||this.set_crossFadeFrame(!1),this.renderContext.set_world(ne),this.renderContext.set_view(ae),this.renderContext.set_projection(de);var ve=i.now(),ut=ve-this._lastUpdate;ut>1e3&&(this._lastUpdate=ve,this._frameCount=0,Ct.trianglesRendered=0,Ct.trianglesCulled=0),this.capturingVideo&&(this.dumpFrameParams!=null&&(!this.dumpFrameParams.waitDownload||$e)&&(this.captureFrameForVideo(this._videoBlobReady,this.dumpFrameParams.width,this.dumpFrameParams.height,this.dumpFrameParams.format),K.nextFrame()),K.get_doneDumping()&&(K.frameDumping=!1,K.cancelFrameDump=!1,this.capturingVideo=!1))}},getCurrentReferenceFrame:function(){if(this.renderContext.get_backgroundImageset()==null)return"Sun";if(!i.emptyString(this.renderContext.get_backgroundImageset().get_referenceFrame()))return this.renderContext.get_backgroundImageset().get_referenceFrame();if(!this.renderContext.get_backgroundImageset().get_dataSetType())return"Earth";if(this.renderContext.get_backgroundImageset().get_name()==="Visible Imagery"&&this.renderContext.get_backgroundImageset().get_url().toLowerCase().indexOf("mars")>-1)return this.renderContext.get_backgroundImageset().set_referenceFrame("Mars"),this.renderContext.get_backgroundImageset().get_referenceFrame();if(this.renderContext.get_backgroundImageset().get_dataSetType()===1)for(var e=i.enumerate(q.solarSystemObjectsNames);e.moveNext();){var t=e.current;if(this.renderContext.get_backgroundImageset().get_name().toLowerCase().indexOf(t.toLowerCase())>-1)return this.renderContext.get_backgroundImageset().set_referenceFrame(t),t}return this.renderContext.get_backgroundImageset().get_dataSetType()===2?"Sky":""},get_planetLike:function(){return this.renderContext.get_backgroundImageset()!=null?!this.renderContext.get_backgroundImageset().get_dataSetType()||this.renderContext.get_backgroundImageset().get_dataSetType()===1:!0},get_space:function(){return this.renderContext.get_backgroundImageset()!=null?this.renderContext.get_backgroundImageset().get_dataSetType()===2:!0},_drawSkyOverlays:function(){U.get_active().get_showConstellationPictures()&&!this.freestandingMode&&Ge.drawArtwork(this.renderContext),U.get_active().get_showConstellationFigures()&&(q.constellationsFigures==null&&(q.constellationsFigures=Ge.create("Constellations",Nt.singleton.engineAssetUrl("figures.txt"),!1,!1,!1)),q.constellationsFigures.draw(this.renderContext,!1,"UMA",!1)),U.get_active().get_showEclipticGrid()&&(X.drawEclipticGrid(this.renderContext,1,U.get_active().get_eclipticGridColor()),U.get_active().get_showEclipticGridText()&&X.drawEclipticGridText(this.renderContext,1,U.get_active().get_eclipticGridColor())),U.get_active().get_showGalacticGrid()&&(X.drawGalacticGrid(this.renderContext,1,U.get_active().get_galacticGridColor()),U.get_active().get_showGalacticGridText()&&X.drawGalacticGridText(this.renderContext,1,U.get_active().get_galacticGridColor())),U.get_active().get_showAltAzGrid()&&(X.drawAltAzGrid(this.renderContext,1,U.get_active().get_altAzGridColor()),U.get_active().get_showAltAzGridText()&&X.drawAltAzGridText(this.renderContext,1,U.get_active().get_altAzGridColor())),U.get_active().get_showPrecessionChart()&&X.drawPrecessionChart(this.renderContext,1,U.get_active().get_precessionChartColor()),U.get_active().get_showEcliptic()&&(X.drawEcliptic(this.renderContext,1,U.get_active().get_eclipticColor()),U.get_active().get_showEclipticOverviewText()&&X.drawEclipticText(this.renderContext,1,U.get_active().get_eclipticColor())),U.get_active().get_showGrid()&&(X.drawEquitorialGrid(this.renderContext,1,U.get_active().get_equatorialGridColor()),U.get_active().get_showEquatorialGridText()&&X.drawEquitorialGridText(this.renderContext,1,U.get_active().get_equatorialGridColor())),U.get_active().get_showConstellationBoundries()&&(q.constellationsBoundries==null&&(q.constellationsBoundries=Ge.create("Constellations",Nt.singleton.engineAssetUrl("constellations.txt"),!0,!1,!1)),q.constellationsBoundries.draw(this.renderContext,U.get_active().get_showConstellationSelection(),this.constellation,!1)),U.get_active().get_showConstellationLabels()&&Ge.drawConstellationNames(this.renderContext,1,Te.get_yellow())},_drawHoverText:function(e){if(e.gl==null){var t=e.device;t.save(),t.fillStyle="White",t.font="15px Arial",t.fillText(this._hoverText,this._hoverTextPoint.x,this._hoverTextPoint.y),t.restore()}},rAtoViewLng:function(e){return(180-e/24*360-180+540)%360-180},_updateViewParameters:function(){if(this.renderContext.space&&this._tracking&&this._trackingObject!=null)if(U.get_active().get_galacticMode()&&this.renderContext.space){var e=V.j2000toGalactic(this._trackingObject.get_RA()*15,this._trackingObject.get_dec());this.renderContext.targetAlt=this.renderContext.alt=e[1],this.renderContext.targetAz=this.renderContext.az=e[0]}else if(this.renderContext.space&&U.get_active().get_localHorizonMode()){var t=V.equitorialToHorizon(V.fromRaDec(this._trackingObject.get_RA(),this._trackingObject.get_dec()),K.get_location(),K.get_now());this.renderContext.targetAlt=t.get_alt(),this.renderContext.targetAz=t.get_az()}else this.renderContext.viewCamera.lng=this.renderContext.targetCamera.lng=this.rAtoViewLng(this._trackingObject.get_RA()),this.renderContext.viewCamera.lat=this.renderContext.targetCamera.lat=this._trackingObject.get_dec();else this.get_solarSystemMode()||(this._tracking=!1,this._trackingObject=null);var r=1-.8,n=.8;if(!this._tracking){var a=this.renderContext.viewCamera.zoom/4e3;this.renderContext.viewCamera.zoom>360&&(a=360/4e4),this.renderContext.space&&(U.get_active().get_localHorizonMode()||U.get_active().get_galacticMode())?(Math.abs(this.renderContext.targetAlt-this.renderContext.alt)>=a|Math.abs(this.renderContext.targetAz-this.renderContext.az)>=a)===1&&(this.renderContext.alt+=(this.renderContext.targetAlt-this.renderContext.alt)/10,Math.abs(this.renderContext.targetAz-this.renderContext.az)>170?this.renderContext.targetAz>this.renderContext.az?this.renderContext.az+=(this.renderContext.targetAz-(360+this.renderContext.az))/10:this.renderContext.az+=(360+this.renderContext.targetAz-this.renderContext.az)/10:this.renderContext.az+=(this.renderContext.targetAz-this.renderContext.az)/10,this.renderContext.az=(this.renderContext.az+720)%360):(Math.abs(this.renderContext.targetCamera.lat-this.renderContext.viewCamera.lat)>=a|Math.abs(this.renderContext.targetCamera.lng-this.renderContext.viewCamera.lng)>=a)===1?(this.renderContext.viewCamera.lat+=(this.renderContext.targetCamera.lat-this.renderContext.viewCamera.lat)/10,Math.abs(this.renderContext.targetCamera.lng-this.renderContext.viewCamera.lng)>170?this.renderContext.targetCamera.lng>this.renderContext.viewCamera.lng?this.renderContext.viewCamera.lng+=(this.renderContext.targetCamera.lng-(360+this.renderContext.viewCamera.lng))/10:this.renderContext.viewCamera.lng+=(360+this.renderContext.targetCamera.lng-this.renderContext.viewCamera.lng)/10:this.renderContext.viewCamera.lng+=(this.renderContext.targetCamera.lng-this.renderContext.viewCamera.lng)/10,this.renderContext.viewCamera.lng=(this.renderContext.viewCamera.lng+720)%360):(this.renderContext.viewCamera.lat!==this.renderContext.targetCamera.lat||this.renderContext.viewCamera.lng!==this.renderContext.targetCamera.lng)&&(this.renderContext.viewCamera.lat=this.renderContext.targetCamera.lat,this.renderContext.viewCamera.lng=this.renderContext.targetCamera.lng)}this.renderContext.viewCamera.zoom=n*this.renderContext.viewCamera.zoom+r*this.renderContext.targetCamera.zoom,this.renderContext.viewCamera.rotation=n*this.renderContext.viewCamera.rotation+r*this.renderContext.targetCamera.rotation,this.renderContext.viewCamera.angle=n*this.renderContext.viewCamera.angle+r*this.renderContext.targetCamera.angle},move:function(e,t){var r=Math.atan2(t,e),n=Math.sqrt(e*e+t*t);this.get_solarSystemMode()||this.get_planetLike()?(e=Math.cos(r+this.renderContext.viewCamera.rotation)*n,t=Math.sin(r+this.renderContext.viewCamera.rotation)*n):(e=Math.cos(r-this.renderContext.viewCamera.rotation)*n,t=Math.sin(r-this.renderContext.viewCamera.rotation)*n);var a=this.renderContext.get_fovScale()/3600;this.renderContext.get_backgroundImageset().get_dataSetType()===4&&(a=.06);var l=a/Math.max(.2,Math.cos(this.renderContext.viewCamera.lat/180*Math.PI));(!this.renderContext.get_backgroundImageset().get_dataSetType()||this.renderContext.get_backgroundImageset().get_dataSetType()===1||this.renderContext.get_backgroundImageset().get_dataSetType()===4)&&(l*=6.3,a*=6.3),this.renderContext.space&&(U.get_active().get_galacticMode()||U.get_active().get_localHorizonMode())?(e=U.get_active().get_localHorizonMode()?-e:e,this.renderContext.targetAz+=e*l,this.renderContext.targetAz=(this.renderContext.targetAz+720)%360,this.renderContext.targetAlt+=t*a,this.renderContext.targetAlt>90&&(this.renderContext.targetAlt=90),this.renderContext.targetAlt<-90&&(this.renderContext.targetAlt=-90)):(this.renderContext.targetCamera.lng-=e*l,this.renderContext.targetCamera.lng=(this.renderContext.targetCamera.lng+720)%360,this.renderContext.targetCamera.lat+=t*a,this.renderContext.targetCamera.lat>90&&(this.renderContext.targetCamera.lat=90),this.renderContext.targetCamera.lat<-90&&(this.renderContext.targetCamera.lat=-90)),U.get_globalSettings().get_smoothPan()||(this.renderContext.viewCamera=this.renderContext.targetCamera.copy()),e&&t&&(this._tracking=!1,this._trackingObject=null)},zoom:function(e){this.renderContext.targetCamera.zoom*=e,this.renderContext.targetCamera.zoom>this.get_zoomMax()&&(this.renderContext.targetCamera.zoom=this.get_zoomMax()),U.get_globalSettings().get_smoothPan()||(this.renderContext.viewCamera=this.renderContext.targetCamera.copy())},onGestureStart:function(e){this._mouseDown=!1,this._beginZoom=this.renderContext.viewCamera.zoom},onGestureChange:function(e){var t=e;this._mouseDown=!1,this.renderContext.targetCamera.zoom=this.renderContext.viewCamera.zoom=Math.min(360,this._beginZoom*(1/t.scale))},onGestureEnd:function(e){this._mouseDown=!1},onTouchStart:function(e){var t=e;if(t.preventDefault(),t.stopPropagation(),this._lastX=t.targetTouches[0].pageX,this._lastY=t.targetTouches[0].pageY,t.targetTouches.length===2){this._isPinching=!0;return}if(this.uiController!=null){var r=new qs(this._lastX,this._lastY);if(this.uiController.mouseDown(this,r)){this._mouseDown=!1,this._dragging=!1;return}}this._mouseDown=!0},onTouchMove:function(e){var t=e;if(this._isPinching){var r=t.touches[0],n=t.touches[1],a=new Array(2);if(a[0]=xe.create(r.pageX,r.pageY),a[1]=xe.create(n.pageX,n.pageY),this._pinchingZoomRect[0]!=null&&this._pinchingZoomRect[1]!=null){var l=this.getDistance(this._pinchingZoomRect[0],this._pinchingZoomRect[1]),f=this.getDistance(a[0],a[1]),c=l/f;this.zoom(c)}this._pinchingZoomRect=a,t.stopPropagation(),t.preventDefault();return}if(t.preventDefault(),t.stopPropagation(),this._mouseDown){this._dragging=!0;var d=t.targetTouches[0].pageX-this._lastX,m=t.targetTouches[0].pageY-this._lastY;this.move(d,m),this._lastX=t.targetTouches[0].pageX,this._lastY=t.targetTouches[0].pageY}else if(this.uiController!=null&&this.uiController.mouseMove(this,e)){e.preventDefault(),e.stopPropagation();return}},onTouchEnd:function(e){var t=e;if(t.preventDefault(),t.stopPropagation(),this._pinchingZoomRect[0]=null,this._pinchingZoomRect[1]=null,this._isPinching){t.touches.length<2&&(this._isPinching=!1);return}if(this.uiController!=null){var r=new qs(this._lastX,this._lastY);if(this.uiController.mouseUp(this,r)){this._mouseDown=!1,this._dragging=!1;return}}this._mouseDown=!1,this._dragging=!1},onPointerDown:function(e){var t=e,r=0,n=arguments[0],a=arguments[0].target;if(a.setPointerCapture?a.setPointerCapture(n.pointerId):a.msSetPointerCapture&&a.msSetPointerCapture(n.pointerId),this._pointerIds[0]===t.pointerId)r=0;else if(this._pointerIds[1]===t.pointerId)r=1;else if(!this._pointerIds[0])r=0;else if(!this._pointerIds[1])r=1;else return;this._pointerIds[r]=t.pointerId,this._pinchingZoomRect[r]=xe.create(e.offsetX,e.offsetY)},onPointerMove:function(e){var t=e,r=0;if(this._pointerIds[0]===t.pointerId)r=0;else if(this._pointerIds[1]===t.pointerId)r=1;else return;if(this._pinchingZoomRect[0]!=null&&this._pinchingZoomRect[1]!=null){var n=this.getDistance(this._pinchingZoomRect[0],this._pinchingZoomRect[1]),a=xe.create(e.offsetX,e.offsetY),l=this.getDistance(a,this._pinchingZoomRect[0]),f=n/l,c=Math.abs(Math.log(f));isFinite(c)||(c=1e3);var d=this.getDistance(a,this._pinchingZoomRect[1]),m=n/d,v=Math.abs(Math.log(m));isFinite(v)||(v=1e3),v<c?(this._pinchingZoomRect[0]=a,this.zoom(m)):(this._pinchingZoomRect[1]=a,this.zoom(f))}else this._pinchingZoomRect[r]=xe.create(e.offsetX,e.offsetY);e.stopPropagation(),e.preventDefault()},onPointerUp:function(e){var t=e;this._pointerIds[0]===t.pointerId&&(this._pointerIds[0]=-2,this._pinchingZoomRect[0]=null),this._pointerIds[1]===t.pointerId&&(this._pointerIds[1]=-2,this._pinchingZoomRect[1]=null)},onMouseDown:function(e){document.addEventListener("mousemove",i.bind("onMouseMove",this),!1),document.addEventListener("mouseup",i.bind("onMouseUp",this),!1),!(this.uiController!=null&&this.uiController.mouseDown(this,e))&&(this._mouseDown=!0,this._lastX=Li.offsetX(this.canvas,e),this._lastY=Li.offsetY(this.canvas,e))},onMouseMove:function(e){if(this._lastMouseMove=i.now(),this._hoverTextPoint=xe.create(Li.offsetX(this.canvas,e),Li.offsetY(this.canvas,e)),this._hoverText="",this._mouseDown)e.preventDefault(),e.stopPropagation(),this._moved=!0,e.ctrlKey?this._tilt(Li.offsetX(this.canvas,e)-this._lastX,Li.offsetY(this.canvas,e)-this._lastY):this.move(Li.offsetX(this.canvas,e)-this._lastX,Li.offsetY(this.canvas,e)-this._lastY),this._lastX=Li.offsetX(this.canvas,e),this._lastY=Li.offsetY(this.canvas,e);else if(this.uiController!=null&&this.uiController.mouseMove(this,e)){e.preventDefault(),e.stopPropagation();return}},onMouseUp:function(e){if(document.removeEventListener("mousemove",i.bind("onMouseMove",this),!1),document.removeEventListener("mouseup",i.bind("onMouseUp",this),!1),this.uiController!=null&&this.uiController.mouseUp(this,e)){this._mouseDown=!1,e.preventDefault();return}if(this._mouseDown&&!this._moved){var t=this.getCoordinatesForScreenPoint(Li.offsetX(this.canvas,e),Li.offsetY(this.canvas,e));this._annotationclicked(t.x,t.y,Li.offsetX(this.canvas,e),Li.offsetY(this.canvas,e))||q.scriptInterface._fireClick(t.x,t.y)}this._mouseDown=!1,this._moved=!1},onMouseWheel:function(e){var t=e,r;t.deltaY?r=-t.deltaY:t.detail?r=t.detail*-1:r=t.wheelDelta,r>0?this.zoom(.9):this.zoom(1.1),e.stopPropagation(),e.preventDefault()},onDoubleClick:function(e){q.showDataLayers=!0},onKeyDown:function(e){this.uiController!=null&&this.uiController.keyDown(this,e)},getDistance:function(e,t){var r,n;return r=e.x-t.x,n=e.y-t.y,Math.sqrt(r*r+n*n)},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},_tilt:function(e,t){this.renderContext.targetCamera.rotation+=e*.001,this.renderContext.targetCamera.angle+=t*.001,this.renderContext.targetCamera.angle<-1.52&&(this.renderContext.targetCamera.angle=-1.52),this.renderContext.targetCamera.angle>0&&(this.renderContext.targetCamera.angle=0)},getCoordinatesForScreenPoint:function(e,t){var r=xe.create(e,t),n=this.transformPickPointToWorldSpace(r,this.renderContext.width,this.renderContext.height);return V.cartesianToSphericalSky(n)},transformPickPointToWorldSpace:function(e,t,r){var n=new I;if(this.renderContext.get_projection()!=null){var a=new I;a.x=(2*e.x/t-1)/this.renderContext.get_projection().get_m11(),a.y=(2*e.y/r-1)/this.renderContext.get_projection().get_m22(),a.z=1;var l=Z.multiplyMatrix(this.renderContext.get_view(),this.renderContext.get_world());l.invert(),n.x=a.x*l.get_m11()+a.y*l.get_m21()+a.z*l.get_m31(),n.y=a.x*l.get_m12()+a.y*l.get_m22()+a.z*l.get_m32(),n.z=a.x*l.get_m13()+a.y*l.get_m23()+a.z*l.get_m33(),n.normalize()}return n},transformWorldPointToPickSpace:function(e,t,r){var n=Z.multiplyMatrix(this.renderContext.get_view(),this.renderContext.get_world());n.invert();var a=new xe,l=e.x*n.get_m31()+e.y*n.get_m32()+e.z*n.get_m33(),f=(e.x*n.get_m11()+e.y*n.get_m12()+e.z*n.get_m13())/l,c=(e.x*n.get_m21()+e.y*n.get_m22()+e.z*n.get_m23())/l;return a.x=Math.round((1+this.renderContext.get_projection().get_m11()*f)*(t/2)),a.y=Math.round((1+this.renderContext.get_projection().get_m22()*c)*(r/2)),a},getScreenPointForCoordinates:function(e,t){var r=xe.create(e,t),n=V.sphericalSkyToCartesian(r),a=this.transformWorldPointToPickSpace(n,this.renderContext.width,this.renderContext.height);return a},setup:function(e,t,r,n){var a=this;window.addEventListener("contextmenu",i.bind("onContextMenu",this),!1),document.body.addEventListener("keydown",i.bind("onKeyDown",this),!1),e.addEventListener("dblclick",i.bind("onDoubleClick",this),!1),e.addEventListener("mousedown",i.bind("onMouseDown",this),!1),e.addEventListener("wheel",i.bind("onMouseWheel",this),!1),e.addEventListener("mousewheel",i.bind("onMouseWheel",this),!1),e.addEventListener("DOMMouseScroll",i.bind("onMouseWheel",this),!1),e.addEventListener("touchstart",i.bind("onTouchStart",this),!1),e.addEventListener("touchmove",i.bind("onTouchMove",this),!1),e.addEventListener("touchend",i.bind("onTouchEnd",this),!1),e.addEventListener("gesturechange",i.bind("onGestureChange",this),!1),e.addEventListener("gesturestart",i.bind("onGestureStart",this),!1),e.addEventListener("gestureend",i.bind("onGestureEnd",this),!1),e.addEventListener("pointerdown",i.bind("onPointerDown",this),!1),e.addEventListener("pointermove",i.bind("onPointerMove",this),!1),e.addEventListener("pointerup",i.bind("onPointerUp",this),!1),this.renderContext.viewCamera.lat=t,this.renderContext.viewCamera.lng=r,this.renderContext.viewCamera.zoom=n,this.renderContext.targetCamera=this.renderContext.viewCamera.copy(),this.renderContext.gl==null&&(this._foregroundCanvas=document.createElement("canvas"),this._foregroundCanvas.width=e.width,this._foregroundCanvas.height=e.height,this._fgDevice=this._foregroundCanvas.getContext("2d")),this.freestandingMode?setTimeout(function(){a._setupComplete()},0):ma.getWtmlFile(Nt.singleton.coreDynamicUrl("wwtweb/catalog.aspx?X=ImageSets6"),i.bind("_setupComplete",this),!0)},_setupComplete:function(){q.scriptInterface._fireReady()},gotoRADecZoom:function(e,t,r,n,a){this._tracking=!1,this._trackingObject=null,this.gotoTargetFull(!1,n,this._cameraParametersFromRADecZoom(e,t,r,a),q.singleton.renderContext.get_foregroundImageset(),q.singleton.renderContext.get_backgroundImageset())},_cameraParametersFromRADecZoom:function(e,t,r,n){for(;e>24;)e-=24;for(;e<0;)e+=24;t=Dr.clamp(t,-90,90),r=Dr.clamp(r,this.get_zoomMin(),this.get_zoomMax());var a=n??q.singleton.renderContext.viewCamera.rotation,l=fi.create(t,q.singleton.renderContext.rAtoViewLng(e),r,a,q.singleton.renderContext.viewCamera.angle,q.singleton.renderContext.viewCamera.opacity);return l},timeToRADecZoom:function(e,t,r,n){var a=this._cameraParametersFromRADecZoom(e,t,r,n);return this.timeToTargetFull(a,!1)},get_solarSystemMode:function(){return this.renderContext.get_backgroundImageset()==null?!1:this.renderContext.get_backgroundImageset().get_dataSetType()===4},gotoTarget:function(e,t,r,n){if(e!=null){if(n&&this.get_solarSystemMode()&&(e.get_classification()===536870912&&e.get_type()!==4||e.get_classification()===1||e.get_classification()===1048576&&e.get_distance()>0)){var a=65536;if(e.get_classification()===1||e.get_classification()===1048576)a=20;else try{e.get_target()!==65536?a=e.get_target():a=P.getPlanetIDFromName(e.get_name())}catch{}if(a!==65536){if(this._trackingObject=e,a===this._solarSystemTrack&&!(e.get_classification()===1||e.get_classification()===1048576)){this.gotoTarget3(e.get_camParams(),t,r);return}var l=4;a===20?l=17:l+=13*(101-U.get_active().get_solarSystemScale())/100,r&&(l=1);var f=this.renderContext.viewCamera.copy();f.targetReferenceFrame="",f.target=a;var c=10;if(a===20){e.get_classification()===1048576?c=1404946007758:c=63239.6717*100;var d=V.raDecTo3dAu(e.get_RA(),e.get_dec(),e.get_distance()),m=V.meanObliquityOfEcliptic(K.get_jNow())/180*Math.PI;d.rotateX(m),f.viewTarget=I.negate(f.viewTarget)}else{switch(f.viewTarget=P.getPlanet3dLocationJD(a,K.getJNowForFutureTime(l)),a){case 0:c=.6;break;case 1:c=4e-4;break;case 2:c=4e-4;break;case 3:c=4e-4;break;case 4:c=.007;break;case 5:c=.007;break;case 6:c=.004;break;case 7:c=.004;break;case 8:c=4e-4;break;case 9:c=4e-4;break;case 10:c=4e-4;break;case 11:c=4e-4;break;case 12:c=4e-4;break;case 13:c=4e-4;break;case 19:c=4e-4;break;case 20:c=10;break}c=c*U.get_active().get_solarSystemScale()}var v=this.renderContext.viewCamera.copy();this._solarSystemTrack===20&&!i.emptyString(this.renderContext.get_trackingFrame())&&(v=this.renderContext.customTrackingParams,this.renderContext.set_trackingFrame("")),f.zoom=c;var C=f.viewTarget;if(C.subtract(v.viewTarget),e.get_classification()===1&&(C=I.negate(C)),C.length()){var T=C.toRaDec();a===20?f.lat=-T.y:f.lat=T.y,f.lng=T.x*15-90}else f.lat=this.renderContext.viewCamera.lat,f.lng=this.renderContext.viewCamera.lng;a!==20&&(f.viewTarget=P.getPlanetTargetPoint(a,f.lat,f.lng,K.getJNowForFutureTime(l)));var A=new Rs(v,f,l,K.get_now(),K.getTimeForFutureTime(l),3);A.fastDirectionMove=!0,this.set__mover(A);return}}this._tracking=!1,this._trackingObject=null;var $=e.get_camParams().copy();this.renderContext.get_backgroundImageset()!=null&&e.get_type()!==this.renderContext.get_backgroundImageset().get_dataSetType()?(this.renderContext.targetCamera=e.get_camParams().copy(),this.renderContext.viewCamera=this.renderContext.targetCamera.copy(),this.renderContext.set_backgroundImageset(this.getDefaultImageset(e.get_type(),3)),r=!0):this.get_solarSystemMode()&&e.get_target()!==this._solarSystemTrack&&(this.renderContext.targetCamera=e.get_camParams().copy(),this.renderContext.viewCamera=this.renderContext.targetCamera.copy(),this._solarSystemTrack=e.get_target(),r=!0),e.get_classification()===128?($.zoom=this.get_zoomMax(),this.gotoTargetFull(!1,r,$,null,null)):(this._solarSystemTrack=e.get_target(),this.gotoTargetFull(t,r,$,e.get_studyImageset(),e.get_backgroundImageset()),n&&(this._tracking=!0,this._trackingObject=e))}},gotoTarget3:function(e,t,r){this._tracking=!1,this._trackingObject=null,this.gotoTargetFull(t,r,e,this.renderContext.get_foregroundImageset(),this.renderContext.get_backgroundImageset())},_tooCloseForSlewMove:function(e){return Math.abs(this.renderContext.viewCamera.lat-e.lat)<1e-12&&Math.abs(this.renderContext.viewCamera.lng-e.lng)<1e-12&&Math.abs(this.renderContext.viewCamera.zoom-e.zoom)<1e-12&&Math.abs(this.renderContext.viewCamera.rotation-e.rotation)<1e-12},gotoTargetFull:function(e,t,r,n,a){if(q.set_renderNeeded(!0),this._tracking=!1,this._trackingObject=null,this._targetStudyImageset=n,this._targetBackgroundImageset=a,e?(r.zoom=this.renderContext.viewCamera.zoom,r.angle=this.renderContext.viewCamera.angle,r.rotation=this.renderContext.viewCamera.rotation):(r.zoom===-1||!r.zoom)&&(this.renderContext.space?r.zoom=1.40625:r.zoom=.09),t||this._tooCloseForSlewMove(r)){if(this.set__mover(null),this.renderContext.targetCamera=r.copy(),this.renderContext.viewCamera=this.renderContext.targetCamera.copy(),this.renderContext.space&&U.get_active().get_galacticMode()){var l=V.j2000toGalactic(this.renderContext.viewCamera.get_RA()*15,this.renderContext.viewCamera.get_dec());this.renderContext.targetAlt=this.renderContext.alt=l[1],this.renderContext.targetAz=this.renderContext.az=l[0]}else if(this.renderContext.space&&U.get_active().get_localHorizonMode()){var f=V.equitorialToHorizon(V.fromRaDec(this.renderContext.viewCamera.get_RA(),this.renderContext.viewCamera.get_dec()),K.get_location(),K.get_now());this.renderContext.targetAlt=this.renderContext.alt=f.get_alt(),this.renderContext.targetAz=this.renderContext.az=f.get_az()}this._mover_Midpoint()}else this.set__mover(sn.create(this.renderContext.viewCamera,r)),q.set_renderNeeded(!0),this.get__mover().set_midpoint(i.bind("_mover_Midpoint",this))},_slewTimeBetweenTargets:function(e,t){var r=sn.create(e,t);return r.get_moveTime()},timeToTargetFull:function(e,t){return t&&(e.zoom=this.renderContext.viewCamera.zoom,e.angle=this.renderContext.viewCamera.angle,e.rotation=this.renderContext.viewCamera.rotation),this._tooCloseForSlewMove(e)?0:this._slewTimeBetweenTargets(q.singleton.renderContext.viewCamera,e)},_freezeView:function(){this.renderContext.viewCamera=this.renderContext.targetCamera.copy(),this.set__mover(null)},get__mover:function(){return this.renderContext.viewMover},set__mover:function(e){return this.renderContext.viewMover=e,q.set_renderNeeded(!0),e},fadeInImageSet:function(e){this.renderContext.get_backgroundImageset()!=null&&e.get_dataSetType()!==this.renderContext.get_backgroundImageset().get_dataSetType()&&(Oe.purgeQueue(),Oe.clearCache()),this.renderContext.set_backgroundImageset(e)},_mover_Midpoint:function(){(this._targetStudyImageset!=null&&this.renderContext.get_foregroundImageset()==null||this.renderContext.get_foregroundImageset()!=null&&!this.renderContext.get_foregroundImageset().equals(this._targetStudyImageset))&&this.renderContext.set_foregroundImageset(this._targetStudyImageset),this.renderContext.get_backgroundImageset()!=null&&this._targetBackgroundImageset!=null&&!this.renderContext.get_backgroundImageset().equals(this._targetBackgroundImageset)&&(this._targetBackgroundImageset!=null&&this._targetBackgroundImageset.get_generic()?this.fadeInImageSet(this._getRealImagesetFromGeneric(this._targetBackgroundImageset)):this.fadeInImageSet(this._targetBackgroundImageset))},getDefaultImageset:function(e,t){for(var r=i.enumerate(q.imageSets);r.moveNext();){var n=r.current;if(n.get_defaultSet()&&n.get_bandPass()===t&&n.get_dataSetType()===e)return n}for(var a=i.enumerate(q.imageSets);a.moveNext();){var n=a.current;if(n.get_bandPass()===t&&n.get_dataSetType()===e)return n}for(var l=i.enumerate(q.imageSets);l.moveNext();){var n=l.current;if(n.get_dataSetType()===e)return n}return q.imageSets[0]},_getRealImagesetFromGeneric:function(e){for(var t=i.enumerate(q.imageSets);t.moveNext();){var r=t.current;if(r.get_defaultSet()&&r.get_bandPass()===e.get_bandPass()&&r.get_dataSetType()===e.get_dataSetType())return r}for(var n=i.enumerate(q.imageSets);n.moveNext();){var r=n.current;if(r.get_bandPass()===e.get_bandPass()&&r.get_dataSetType()===e.get_dataSetType())return r}return q.imageSets[0]},_hideUI:function(e){},createTour:function(e){if(i.canCast(this.uiController,Ht)){var t=this.uiController;t.stop(!1)}return this.tour=new Yr,this.tour.set_title(e),this.setupTour(),this.tour.set_editMode(!0),this.tour},setupTour:function(){this.tourEdit=new Co,this.tourEdit.set_tour(this.tour),this.tour.set_currentTourstopIndex(0),this.tour.set_editMode(!1),this.uiController=this.tourEdit.tourEditorUI},loadTour:function(e){var t=this;if(i.canCast(this.uiController,Ht)){var r=this.uiController;r.stop(!1)}this.tour=Yr.fromUrl(e,function(){t.setupTour();var n=new Ht;n.set_tour(t.tour),q.singleton.uiController=n,q.scriptInterface._fireTourReady()})},playTour:function(e){var t=this;if(i.canCast(this.uiController,Ht)){var r=this.uiController;r.stop(!1)}this.tour=Yr.fromUrl(e,function(){t.setupTour(),t.tourEdit.playNow(!0),q.scriptInterface._fireTourReady()})},playCurrentTour:function(){if(i.canCast(this.uiController,Ht)){var e=this.uiController;e.play()}},pauseCurrentTour:function(){if(i.canCast(this.uiController,Ht)){var e=this.uiController;e.pauseTour()}},stopCurrentTour:function(){if(i.canCast(this.uiController,Ht)){var e=this.uiController;e.stop(!1)}},_closeTour:function(){},getImagesetByName:function(e){for(var t=i.enumerate(q.imageSets);t.moveNext();){var r=t.current;if(r.get_name().toLowerCase().indexOf(e.toLowerCase())>-1)return r}return null},getImageSetByUrl:function(e){for(var t=i.enumerate(q.imageSets);t.moveNext();){var r=t.current;if(r.get_url()===e)return r}return null},setBackgroundImageByName:function(e){var t=this.getImagesetByName(e);t!=null&&this.renderContext.set_backgroundImageset(t)},setForegroundImageByName:function(e){var t=this.getImagesetByName(e);t!=null&&this.renderContext.set_foregroundImageset(t)},addCatalogHips:function(e){this.renderContext.addCatalogHips(e,null)},addCatalogHipsByName:function(e){this.addCatalogHipsByNameWithCallback(e,null)},addCatalogHipsByNameWithCallback:function(e,t){var r=this.getImagesetByName(e);r!=null&&this.renderContext.addCatalogHips(r,t)},removeCatalogHipsByName:function(e){var t=this.getImagesetByName(e);t!=null&&this.renderContext.removeCatalogHips(t)},getCatalogHipsByName:function(e){return this.renderContext.getCatalogHipsByName(e)},getCatalogHipsDataInView:function(e,t,r){var n=this.getImagesetByName(e);n!=null&&this.renderContext.getCatalogHipsDataInView(n,t,r)},setCutsForFits:function(e,t,r){var n=this.getImagesetByName(e);n!=null&&n.get_fitsProperties()!=null?(n.get_fitsProperties().lowerCut=t,n.get_fitsProperties().upperCut=r):console.log(e+" not found")},setColorMapForFits:function(e,t){var r=this.getImagesetByName(e);r!=null&&r.get_fitsProperties()!=null?r.get_fitsProperties().colorMapName=t:console.log(e+" not found")},setScaleTypeForFits:function(e,t){var r=this.getImagesetByName(e);r!=null&&r.get_fitsProperties()!=null?r.get_fitsProperties().scaleType=t:console.log(e+" not found")},_drawCrosshairs:function(e){if(e.gl==null){var t=e.device;t.save(),t.beginPath(),t.strokeStyle=U.get_current().get_crosshairsColor(),t.lineWidth=2;var r=e.width/2,n=e.height/2,a=5;t.moveTo(r,n+a),t.lineTo(r,n-a),t.moveTo(r+a,n),t.lineTo(r-a,n),t.stroke(),t.restore()}else{if(this._crossHairs==null){var l=.03,f=l*e.height/e.width;this._crossHairs=new an,this._crossHairs.set_depthBuffered(!1),this._crossHairs.pure2D=!0,this._crossHairs.addLine(I.create(-f,0,0),I.create(f,0,0)),this._crossHairs.addLine(I.create(0,-l,0),I.create(0,l,0))}this._crossHairs.drawLines(e,1,Te.get_white())}},captureThumbnail:function(e){this.captureFrame(e,96,45,"image/jpeg",!0)},captureCurrentFrame:function(e,t,r,n){this.captureFrame(e,t,r,n,!1)},captureFrameForVideo:function(e,t,r,n){var a=this,l=K.currentFrameNumber,f=function(c){var d;if(l===a._videoQueueIndex)for(e(c),a._videoQueueIndex+=1;(d=i.keyExists(a._videoBlobQueue,a._videoQueueIndex))||a._emptyFrames.indexOf(a._videoQueueIndex)>=0;)d?(e(a._videoBlobQueue[a._videoQueueIndex]),a._videoBlobQueue[a._videoQueueIndex]=null):i.remove(a._emptyFrames,a._videoQueueIndex),a._videoQueueIndex+=1;else c!=null?a._videoBlobQueue[l]=c:a._emptyFrames.push(l);a._videoQueueIndex>=K.totalFrames&&(a._videoBlobReady=null,a._videoBlobQueue=null,a._videoQueueIndex=0,a._emptyFrames.length=0)};this.captureCurrentFrame(f,t,r,n)},captureFrame:function(e,t,r,n,a){a&&this.renderOneFrame();var l=document.createElement("img");l.addEventListener("load",function(f){var c=l.width/l.height,d=t/r,m=t,v=r;c<d?v=i.truncate(m/c):m=i.truncate(v*c);var C=(t-m)/2,T=(r-v)/2,A=document.createElement("canvas");A.height=r,A.width=t;var $=A.getContext("2d");if($.drawImage(l,C,T,m,v),typeof A.msToBlob=="function"){var N=A.msToBlob();e(N)}else A.toBlob(e,n)},!1),l.src=q.singleton.canvas.toDataURL()},clampZooms:function(e){e.viewCamera.zoom=Dr.clamp(e.viewCamera.zoom,this.get_zoomMin(),this.get_zoomMax()),e.targetCamera.zoom=Dr.clamp(e.targetCamera.zoom,this.get_zoomMin(),this.get_zoomMax())}};function Hh(e){this._divId=null,this._startRenderLoop=!1,this._startLat=0,this._startLng=0,this._startZoom=360,this._freestandingAssetBaseurl="",this._startMode="",this._divId=e}var Gh={startRenderLoop:function(e){this._startRenderLoop=e},initialView:function(e,t,r){this._startLat=e,this._startLng=t,this._startZoom=r},freestandingMode:function(e){this._freestandingAssetBaseurl=e},initialMode:function(e){this._startMode=e},create:function(){var e=!!this._freestandingAssetBaseurl,t;return this._startMode?t=this._startMode:e?t="black":t="sky",q.singleton.freestandingMode=e,e&&Nt.singleton.overrideAssetBaseurl(this._freestandingAssetBaseurl),q.initControl6(this._divId,this._startRenderLoop,this._startLat,this._startLng,this._startZoom,t)}};function qs(e,t){this.offsetX=0,this.offsetY=0,this.offsetX=e,this.offsetY=t}var qh={};function V(e,t){this._ascention=0,this._declination=0,this._ascention=e+Math.PI*80%(Math.PI*2),this._declination=t}V.geoTo3d=function(e,t){return I.create(Math.cos(t*V.RC)*Math.cos(e*V.RC)*1,Math.sin(e*V.RC)*1,Math.sin(t*V.RC)*Math.cos(e*V.RC)*1)},V.geoTo3dDouble=function(e,t){return I.create(Math.cos(t*V.RC)*Math.cos(e*V.RC)*1,Math.sin(e*V.RC)*1,Math.sin(t*V.RC)*Math.cos(e*V.RC)*1)},V.geoTo3dRad=function(e,t,r){return I.create(Math.cos(t*V.RC)*Math.cos(e*V.RC)*r,Math.sin(e*V.RC)*r,Math.sin(t*V.RC)*Math.cos(e*V.RC)*r)},V.raDecTo3d=function(e,t){return I.create(Math.cos(e*V.RCRA)*Math.cos(t*V.RC)*1,Math.sin(t*V.RC)*1,Math.sin(e*V.RCRA)*Math.cos(t*V.RC)*1)},V.raDecTo3dAu=function(e,t,r){return I.create(Math.cos(e*V.RCRA)*Math.cos(t*V.RC)*r,Math.sin(t*V.RC)*r,Math.sin(e*V.RCRA)*Math.cos(t*V.RC)*r)},V.raDecTo3dMat=function(e,t,r){return I._transformCoordinate(I.create(Math.cos(e*V.RCRA)*Math.cos(t*V.RC)*1,Math.sin(t*V.RC)*1,Math.sin(e*V.RCRA)*Math.cos(t*V.RC)*1),r)},V.raDecTo3dPointRad=function(e,t){return e.set_dec(-e.get_dec()),I.create(Math.cos(e.get_RA()*V.RCRA)*Math.cos(e.get_dec()*V.RC)*t,Math.sin(e.get_dec()*V.RC)*t,Math.sin(e.get_RA()*V.RCRA)*Math.cos(e.get_dec()*V.RC)*t)},V.sterographicTo3d=function(e,t,r,n,a,l,f,c,d){var m=90,v=0;if(e-=l,t-=f,e||t){var C=(1+Math.sin(Math.abs(n)/180*Math.PI))*6371e3/c,T=C*C,A=180/Math.PI;e?v=Math.atan2(t,e)*A:v=90*t<0?-1:1;var $=e*e+t*t;m=(T-$)/(T+$),m=Math.asin(m)*A,d||(m=-m,v=-v,a=-a)}return V.geoTo3dRad(m,90+v+a,r)},V.equitorialToHorizon=function(e,t,r){var n=V.mstFromUTC2(r,t.get_lng())-e.get_RA()*15;n<0&&(n+=360);var a=n*V.RC,l=e.get_dec()*V.RC,f=t.get_lat()*V.RC,c=Math.sin(l)*Math.sin(f)+Math.cos(l)*Math.cos(f)*Math.cos(a),d=Math.asin(c),m=(Math.sin(l)-Math.sin(d)*Math.sin(f))/(Math.cos(d)*Math.cos(f)),v=Math.acos(m),C=new V(v,d);return Math.sin(a)>0&&C.set_az(360-C.get_az()),C},V.horizonToEquitorial=function(e,t,r){var n=V.mstFromUTC2(r,t.get_lng()),a,l,f=V._altAzToRaDec(e.get_alt()*V.RC,e.get_az()*V.RC,t.get_lat()*V.RC);a=f.x,l=f.y;var c=a/V.RC;return n+=c,n<0&&(n+=360),n>360&&(n-=360),V.fromRaDec(n/15,l/V.RC)},V._altAzToRaDec=function(e,t,r){var n=0,a=0;return t=Math.PI-t,t<0&&(t+=Math.PI*2),n=Math.atan2(Math.sin(t),Math.cos(t)*Math.sin(r)+Math.tan(e)*Math.cos(r)),n<0&&(n+=Math.PI*2),a=Math.asin(Math.sin(r)*Math.sin(e)-Math.cos(r)*Math.cos(e)*Math.cos(t)),xe.create(n,a)},V.mstFromUTC2=function(e,t){var r=e.getUTCFullYear(),n=e.getUTCMonth()+1,a=e.getUTCDate(),l=e.getUTCHours(),f=e.getUTCMinutes(),c=e.getUTCSeconds()+e.getUTCMilliseconds()/1e3;(n===1||n===2)&&(r-=1,n+=12);var d=i.truncate(r/100),m=2-d+Math.floor(d/4),v=Math.floor(365.25*r),C=Math.floor(30.6001*(n+1)),T,A,$;if(T=m+v+C-730550.5+a+(l+f/60+c/3600)/24,A=T/36525,$=280.46061837+360.98564736629*T+387933e-9*A*A-A*A*A/3871e4+t,$>0)for(;$>360;)$=$-360;else for(;$<0;)$=$+360;return $},V.cartesianToSpherical=function(e){var t,r,n=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),a=Math.sqrt(e.x*e.x+e.z*e.z);return r=Math.asin(e.y/n),0<e.x?t=Math.asin(e.z/a):0>e.x?t=Math.PI-Math.asin(e.z/a):t=0,new V(t,r)},V.cartesianToSpherical2=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),r=Math.atan2(e.z,e.x),n=Math.asin(e.y/t);return new V(r,n)},V.cartesianToSphericalSky=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),r=Math.atan2(e.z,e.x),n=Math.asin(-e.y/t);return xe.create(r/Math.PI*12,n/Math.PI*180)},V.sphericalSkyToCartesian=function(e){var t=e.x*(Math.PI/12),r=e.y*(Math.PI/180),n=Math.cos(t)*Math.cos(r),a=-Math.sin(r),l=Math.sin(t)*Math.cos(r);return I.create(n,a,l)},V.cartesianToLatLng=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),r=Math.atan2(e.z,e.x),n=Math.asin(e.y/t);return xe.create(r*180/Math.PI,n*180/Math.PI)},V.cartesianToSpherical3=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),r=Math.atan2(e.z,e.x),n=Math.asin(e.y/t);return new V(r,n)},V.sign=function(e){return e<0?-1:1},V.formatDMSSign=function(e,t){try{e+=V.sign(e)*.0001388888888889;var r=i.truncate(e),n=(e-i.truncate(e))*60,a=(n-i.truncate(n))*60;if(t){var l=e>0?"+":"-";return i.format("{3}{0:00;00}:{1:00}:{2:00}",r,Math.abs(i.truncate(n)),Math.abs(i.truncate(a)),l)}else return i.format("{0:00}:{1:00}:{2:00}",r,Math.abs(i.truncate(n)),Math.abs(i.truncate(a)))}catch{return""}},V.twoPlaces=function(e){var t=e.toString();return t.length<2&&(t="0"+t),t},V.formatDMS=function(e){try{e+=(e<0?-1:1)*.0001388888888889;var t=Math.abs(i.truncate(e)),r=(e-i.truncate(e))*60,n=(r-i.truncate(r))*60,a=e<0?"-":"";return i.format("{3}{0}:{1}:{2}",Math.abs(t),V.twoPlaces(Math.abs(i.truncate(r))),V.twoPlaces(Math.abs(i.truncate(n))),a)}catch{return""}},V.formatDMSWide=function(e){try{e+=V.sign(e)*.0001388888888889;var t=Math.abs(i.truncate(e)),r=(e-i.truncate(e))*60,n=(r-i.truncate(r))*60,a=e<0?"-":"";return i.format("{3}{0:00} : {1:00} : {2:00}",t,Math.abs(i.truncate(r)),Math.abs(i.truncate(n)),a)}catch{return""}},V.formatHMS=function(e){try{e+=V.sign(e)*.0001388888888889;var t=i.truncate(e),r=(e-i.truncate(e))*60,n=(r-i.truncate(r))*60;return i.format("{0:00}h{1:00}m{2:00}s",t,Math.abs(i.truncate(r)),Math.abs(i.truncate(n)))}catch{return""}},V.parseRA=function(e,t){e=i.trim(e).toLowerCase(),(e.indexOf("d")>-1||e.indexOf("")>-1)&&(t=!0),(e.indexOf("h")>-1||e.indexOf(":")>-1)&&(t=!1);var r=V.parse(e)/(t?15:1);return Math.max(Math.min(r,24),0)},V.parseDec=function(e){var t=V.parse(e);return Math.max(Math.min(t,90),-90)},V.parse=function(e){try{if(e=i.trim(e).toLowerCase(),e=i.replaceString(i.replaceString(i.replaceString(i.replaceString(i.replaceString(i.replaceString(e,"d ","d"),"h ","h"),"m ","m"),"s ","s"),"' ","'"),'" ','"'),ye.stringContains(e,[":"," ","d","h","m","s","'",'"',""])){var t=0,r=0,n=0,a=0,l=ye.splitString(e,[":"," ","d","h","m","s","'",'"',""]);return l.length>0&&(i.emptyString(l[0])||(t=Math.abs(parseFloat(l[0])),a=parseFloat(l[0])<0?-1:1,l[0].indexOf("-")>-1&&(a=-1))),l.length>1&&(i.emptyString(l[1])||(r=parseFloat(l[1]))),l.length>2&&(i.emptyString(l[2])||(n=parseFloat(l[2]))),a||(a=1),a*(t+r/60+n/3600)}else{var f=0;try{f=parseFloat(e)}catch{f=0}return f}}catch{return 0}},V.fromRaDec=function(e,t){return new V((e-12)*15*V.RC,t*V.RC)},V.fromLatLng=function(e,t){return new V(t*V.RC,e*V.RC)},V.dmsToDegrees=function(e,t,r){return e+t/60+r/3600},V.degreesToRadians=function(e){return e*.0174532925199433},V.radiansToDegrees=function(e){return e*57.2957795130823},V.radiansToHours=function(e){return e*3.81971863420549},V.hoursToRadians=function(e){return e*.261799387799149},V.hoursToDegrees=function(e){return e*15},V.degreesToHours=function(e){return e/15},V.PI=function(){return 3.14159265358979},V.mapTo0To360Range=function(e){for(var t=e;t<0;)t+=360;for(;t>360;)t-=360;return t},V.mapTo0To24Range=function(e){for(var t=e;t<0;)t+=24;for(;t>24;)t-=24;return t},V.meanObliquityOfEcliptic=function(e){var t=(e-2451545)/3652500,r=t*t,n=r*t,a=n*t,l=a*t,f=l*t,c=f*t,d=c*t,m=d*t,v=m*t;return V.dmsToDegrees(23,26,21.448)-V.dmsToDegrees(0,0,4680.93)*t-V.dmsToDegrees(0,0,1.55)*r+V.dmsToDegrees(0,0,1999.25)*n-V.dmsToDegrees(0,0,51.38)*a-V.dmsToDegrees(0,0,249.67)*l-V.dmsToDegrees(0,0,39.05)*f+V.dmsToDegrees(0,0,7.12)*c+V.dmsToDegrees(0,0,27.87)*d+V.dmsToDegrees(0,0,5.79)*m+V.dmsToDegrees(0,0,2.45)*v},V.j2000toGalactic=function(e,t){var r=[Math.cos(e/180*Math.PI)*Math.cos(t/180*Math.PI),Math.sin(e/180*Math.PI)*Math.cos(t/180*Math.PI),Math.sin(t/180*Math.PI)];V._rotationMatrix==null&&(V._rotationMatrix=new Array(3),V._rotationMatrix[0]=[-.0548755604,-.8734370902,-.4838350155],V._rotationMatrix[1]=[.4941094279,-.44482963,.7469822445],V._rotationMatrix[2]=[-.867666149,-.1980763734,.4559837762]);for(var n=new Array(3),a=0;a<3;a++)n[a]=r[0]*V._rotationMatrix[a][0]+r[1]*V._rotationMatrix[a][1]+r[2]*V._rotationMatrix[a][2];var l=Math.atan2(n[1],n[0]);l<0&&(l=l+2*Math.PI),l>2*Math.PI&&(l=l-2*Math.PI);var f=Math.atan2(n[2],Math.sqrt(n[0]*n[0]+n[1]*n[1]));return[l/Math.PI*180,f/Math.PI*180]},V.galacticTo3dDouble=function(e,t){var r=V.galactictoJ2000(e,t);return V.raDecTo3dAu(r[0]/15,r[1],1)},V.galactictoJ2000=function(e,t){var r=[Math.cos(e/180*Math.PI)*Math.cos(t/180*Math.PI),Math.sin(e/180*Math.PI)*Math.cos(t/180*Math.PI),Math.sin(t/180*Math.PI)];V._rotationMatrix==null&&(V._rotationMatrix=new Array(3),V._rotationMatrix[0]=[-.0548755604,-.8734370902,-.4838350155],V._rotationMatrix[1]=[.4941094279,-.44482963,.7469822445],V._rotationMatrix[2]=[-.867666149,-.1980763734,.4559837762]);for(var n=new Array(3),a=0;a<3;a++)n[a]=r[0]*V._rotationMatrix[0][a]+r[1]*V._rotationMatrix[1][a]+r[2]*V._rotationMatrix[2][a];var l=Math.atan2(n[1],n[0]);l<0&&(l=l+2*Math.PI),l>2*Math.PI&&(l=l-2*Math.PI);var f=Math.atan2(n[2],Math.sqrt(n[0]*n[0]+n[1]*n[1]));return[l/Math.PI*180,f/Math.PI*180]};var Xh={distance:function(e){var t=this.get_lat(),r=this.get_lng()*Math.cos(t*V.RC),n=e.get_lat(),a=e.get_lng()*Math.cos(n*V.RC);return Math.sqrt((t-n)*(t-n)+(r-a)*(r-a))},distance3d:function(e){var t=V.geoTo3dDouble(e.get_lat(),e.get_lng()),r=V.geoTo3dDouble(this.get_lat(),this.get_lng()),n=I.subtractVectors(t,r);return n.length()/V.RC},angle:function(e){var t=this.get_lat(),r=this.get_lng()*Math.cos(t*V.RC),n=e.get_lat(),a=e.get_lng()*Math.cos(n*V.RC);return Math.atan2(n-t,a-r)},get_RA:function(){return(this._ascention/Math.PI*12+12)%24},set_RA:function(e){return this._ascention=e/12*Math.PI,e},get_dec:function(){return this._declination/V.RC},set_dec:function(e){return this._declination=e*V.RC,e},get_lat:function(){return this._declination/V.RC},set_lat:function(e){return this._declination=e*V.RC,e},get_lng:function(){var e=this._ascention/V.RC;return e<=180?e:-180+(180-e)},set_lng:function(e){return this._ascention=e*V.RC+Math.PI*2%(Math.PI*2),e},get_alt:function(){return this._declination/V.RC},set_alt:function(e){return this._declination=e*V.RC,e},get_az:function(){return this._ascention/V.RC},set_az:function(e){return this._ascention=e*V.RC,e},toString:function(){return i.format("Lat: {0}, Lng: {1}",this.get_lat(),this.get_lng())}};function Ji(){this.fx=0,this.fy=0,this.face=0,Gr.call(this)}Ji.create=function(e,t,r){var n=new Ji;return n.fx=e,n.fy=t,n.face=r,n},Ji._fromHploc$1=function(e){var t=new Ji,r=e.z,n=e.phi,a=Math.abs(r),l=rn.fmodulo(n*Ji._inv_halfpi$1,4);if(a<=Ji._twothird$1){var f=.5+l,c=r*.75,d=f-c,m=f+c,v=d,C=m,T=v===C?v|4:v<C?v:C+8;t.fx=rn.fmodulo(m,1),t.fy=1-rn.fmodulo(d,1),t.face=T}else{var A=Math.min(3,i.truncate(l)),$=l-A,N;a<.99||!e.have_sth?N=Math.sqrt(3*(1-a)):N=e.sth/Math.sqrt((1+a)/3);var d=$*N,m=(1-$)*N;d>=1&&(d=1),m>=1&&(m=1),r>=0?(t.fx=1-m,t.fy=1-d,t.face=A):(t.fx=d,t.fy=m,t.face=A+8)}return t},Ji.fromVector=function(e){return Ji._fromHploc$1(ka.create(e))};var Yh={toHploc:function(){var e=new ka,t=Gr.jrll[this.face]-this.fx-this.fy,r,n;return t<1?(r=t,n=r*r/3,e.z=1-n,e.z>.99&&(e.sth=Math.sqrt(n*(2-n)),e.have_sth=!0)):t>3?(r=4-t,n=r*r/3,e.z=n-1,e.z<-.99&&(e.sth=Math.sqrt(n*(2-n)),e.have_sth=!0)):(r=1,e.z=(2-t)*2/3),n=Gr.jpll[this.face]*r+this.fx-this.fy,n<0&&(n+=8),n>=8&&(n-=8),e.phi=r<1e-15?0:.5*Ji._halfpi$1*n/r,e},toVec3:function(){return this.toHploc().toVec3()}};function es(e,t,r,n,a){if(this.ipix=0,this.indexBuffer=new Array(4),this._vertexList$1=null,this._nside$1=0,this._tileIndex$1=0,this._face$1=0,this._faceX$1=0,this._faceY$1=0,this._step$1=0,this._subDivided$1=!1,this._catalogRows$1=[],O.call(this),this.level=e,this.tileX=t,this.tileY=r,this.dataset=n,O.demEnabled=!1,e?this._nside$1=Math.pow(2,e+1):this._nside$1=4,a==null)this._face$1=t*4+r,this.ipix=this._face$1;else{this.parent=a;var l=a;this._face$1=l._face$1,this._tileIndex$1=l._tileIndex$1*4+r*2+t,this.ipix=this._face$1*this._nside$1*this._nside$1/4+this._tileIndex$1,this._faceX$1=l._faceX$1*2+t,this._faceY$1=l._faceY$1*2+r}this.isCatalogTile=i.keyExists(n.get_hipsProperties().get_properties(),"dataproduct_type")&&n.get_hipsProperties().get_properties().dataproduct_type.toLowerCase()==="catalog",this._computeBoundingSphere$1()}var jh={get_URL:function(){return this._url$1==null?(this._url$1=this._getUrl$1(this.dataset,this.level,this.tileX,this.tileY),this._url$1):this._url$1},_computeBoundingSphere$1:function(){this._setStep$1(),this.createGeometry(null);for(var e=new Array(this._vertexList$1.length),t=0;t<this._vertexList$1.length;t++)e[t]=this._vertexList$1[t].position;this._calcSphere$1(e),this._setCorners$1()},createGeometry:function(e){if(this._vertexList$1!=null)return!0;if(this._vertexList$1=[],this._populateVertexList$1(this._vertexList$1,this._step$1),i.keyExists(this.dataset.get_hipsProperties().get_properties(),"hips_frame")&&this.dataset.get_hipsProperties().get_properties().hips_frame==="galactic")for(var t=0;t<this._vertexList$1.length;t++){var r=this._vertexList$1[t];es._galacticMatrix$1.multiplyVector(r.position)}this.triangleCount=this._step$1*this._step$1/2;var n=new Uint16Array(3*this.triangleCount),a=n;if(!this._subDivided$1)try{this._vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this._vertexBuffer);for(var l=new Float32Array(this._vertexList$1.length*5),f=l,c=0,d=i.enumerate(this._vertexList$1);d.moveNext();){var r=d.current;c=this.addVertex(f,c,r)}O.prepDevice.bufferData(34962,l,35044),c=0;var m=this._vertexList$1.length/(4*this._step$1);this._setIndexBufferForQuadrant$1(a,0,1),this._step$1>1&&(this._setIndexBufferForQuadrant$1(a,0,0),this._setIndexBufferForQuadrant$1(a,1,1),this._setIndexBufferForQuadrant$1(a,1,0))}catch{}return!0},_setIndexBufferForQuadrant$1:function(e,t,r){for(var n=0,a=t*this._step$1/2;a<this._step$1/2*(t+1);a++)for(var l=r*this._step$1/2;l<this._step$1/2*(r+1);l++)e[n++]=a*(this._step$1+1)+l,e[n++]=1+a*(this._step$1+1)+l,e[n++]=this._step$1+1+a*(this._step$1+1)+l,e[n++]=1+a*(this._step$1+1)+l,e[n++]=this._step$1+1+a*(this._step$1+1)+l,e[n++]=this._step$1+2+a*(this._step$1+1)+l;this._processIndexBuffer$1(e,t*2+r)},_getUrl$1:function(e,t,r,n){var a=this._getHipsFileExtension$1(),l=-1;t?l=this._face$1*this._nside$1*this._nside$1/4+this._tileIndex$1:l=this._face$1,new i.StringBuilder;var f=Math.floor(l/1e4)*1e4;return i.format(e.get_url(),t.toString(),f.toString(),l.toString()+a)},_getHipsFileExtension$1:function(){return this.dataset.get_extension().toLowerCase().indexOf("png")>-1?".png":this.dataset.get_extension().toLowerCase().indexOf("jpeg")>-1||this.dataset.get_extension().toLowerCase().indexOf("jpg")>-1?".jpg":this.dataset.get_extension().toLowerCase().indexOf("tsv")>-1?".tsv":this.dataset.get_extension().toLowerCase().indexOf("fits")>-1?".fits":".jpg"},isTileBigEnough:function(e){if(this.dataset.get_dataSetType()===1){var t=180/(Math.pow(2,this.level)*4);return e.get_fovScale()<t}else{var t=3600/(Math.pow(2,this.level)*4);return e.get_fovScale()<t}},_boundaries$1:function(e,t,r){var n=r*Math.pow(2,this.level),a=new Array(4),l=La.create(e+this._faceX$1*r,t+this._faceY$1*r,this._face$1),f=.5/n,c=(l.ix+.5)/n,d=(l.iy+.5)/n;return a[0]=Ji.create(c+f,d+f,l.face).toVec3(),a[1]=Ji.create(c-f,d+f,l.face).toVec3(),a[2]=Ji.create(c-f,d-f,l.face).toVec3(),a[3]=Ji.create(c+f,d-f,l.face).toVec3(),a},_setCorners$1:function(){var e=La.create(this.tileX,this.tileY,this._face$1),t=.5/this._nside$1,r=(e.ix+.5)/this._nside$1,n=(e.iy+.5)/this._nside$1;this.topLeft=Ji.create(r+t,n+t,e.face).toVec3(),this.bottomLeft=Ji.create(r-t,n+t,e.face).toVec3(),this.bottomRight=Ji.create(r-t,n-t,e.face).toVec3(),this.topRight=Ji.create(r+t,n-t,e.face).toVec3()},draw3D:function(e,t){if(this.isCatalogTile)return this.drawCatalogTile(e,t),!0;this.renderedGeneration=O.currentRenderGeneration,O.tilesTouched++,this.inViewFrustum=!0;var r=!1;if(!this.readyToRender){if(!this.errored)return Oe.addTileToQueue(this),!1;if(this.errored&&this.level<3)r=!0;else return!1}var n=this.triangleCount;O.trianglesRendered+=n;for(var a=!1,l=!1,f=0,c=0;c<2;c++)for(var d=0;d<2;d++)this.level<this.dataset.get_levels()?(this.children[f]==null&&(this.children[f]=Oe.getTile(this.level+1,d,c,this.dataset,this)),this.children[f].isTileInFrustum(e.get_frustum())?(this.inViewFrustum=!0,this.children[f].isTileBigEnough(e)||r?(this.renderChildPart[f].set_targetState(!this.children[f].draw3D(e,t)),this.renderChildPart[f].get_targetState()&&(l=!0)):this.renderChildPart[f].set_targetState(!0)):this.renderChildPart[f].set_targetState(this.renderChildPart[f].set_state(!1))):this.renderChildPart[f].set_state(!0),this.renderChildPart[f].get_state()&&(a=!0),f++;if((l||a)&&(this.renderedAtOrBelowGeneration=O.currentRenderGeneration,this.parent!=null&&(this.parent.renderedAtOrBelowGeneration=this.renderedAtOrBelowGeneration)),!a)return!0;if(!this.createGeometry(e))return!1;if(r)return!0;O.tilesInView++;for(var m=0;m<4;m++)this.renderChildPart[m].get_targetState()&&this.renderPart(e,m,t/100,!1);return!0},drawCatalogTile:function(e,t){this.renderedGeneration=O.currentRenderGeneration,O.tilesTouched++,this.inViewFrustum=!0;var r=!1;if(!this.readyToRender){if(!this.errored){Oe.addTileToQueue(this);return}if(this.errored&&this.level<3)r=!0;else return}for(var n=!1,a=0,l=0;l<2;l++)for(var f=0;f<2;f++)this.level<this.dataset.get_levels()&&(this.children[a]==null&&(this.children[a]=Oe.getTile(this.level+1,f,l,this.dataset,this)),this.children[a].isTileInFrustum(e.get_frustum())?(this.inViewFrustum=!0,n=!0,this.children[a].isTileBigEnough(e)||r?this.children[a].drawCatalogTile(e,t):this.children[a].removeCatalogTile()):this.children[a].removeCatalogTile()),a++;!this.level&&!n&&!r?this.removeCatalogTile():n&&(O.tilesInView++,this._addCatalogTile$1())},removeCatalogTile:function(){this.dataset.get_hipsProperties().get_catalogSpreadSheetLayer().removeTileRows(this.get_key(),this._catalogRows$1)},_addCatalogTile$1:function(){this.dataset.get_hipsProperties().get_catalogSpreadSheetLayer().addTileRows(this.get_key(),this._catalogRows$1)},_extractCatalogTileRows$1:function(){for(var e=!1,t=i.enumerate(this._catalogData$1.getText().split(`
`));t.moveNext();){var r=t.current;if(!i.startsWith(r,"#")&&!e){e=!0;continue}if(!i.startsWith(r,"#")){var n=bi.splitString(r,this.dataset.get_hipsProperties().get_catalogSpreadSheetLayer().get__table().delimiter);this._catalogRows$1.push(n)}}},getDataInView:function(e,t,r){if(!this.readyToRender){if(this.errored){if(this.level>=3)return!0}else if(this.requestImage(),t)return!1}for(var n=!0,a=!1,l=0,f=0;f<2;f++)for(var c=0;c<2;c++)this.level<this.dataset.get_levels()&&(this.children[l]==null&&(this.children[l]=Oe.getTile(this.level+1,c,f,this.dataset,this)),this.children[l].isTileInFrustum(e.get_frustum())&&(a=!0,n=n&&this.children[l].getDataInView(e,t,r))),l++;return a&&r.addTileRows(this.get_key(),this._catalogRows$1),n&&!this.downloading},_setStep$1:function(){if(this.isCatalogTile)this._step$1=2;else switch(this.level){case 0:case 1:case 2:case 3:case 4:this._step$1=16;break;case 5:this._step$1=8;break;case 6:this._step$1=4;break;default:this._step$1=2;break}},requestImage:function(){this.isCatalogTile?!this.downloading&&!this.readyToRender&&(this.downloading=!0,this._catalogData$1=new fr(this.get_URL()),this._catalogData$1.onStateChange=i.bind("_loadCatalogData$1",this),this._catalogData$1.send()):O.prototype.requestImage.call(this)},_loadCatalogData$1:function(){this._catalogData$1.get_state()===2?(this.requestPending=!1,this.downloading=!1,this.errored=!0,Oe.removeFromQueue(this.get_key(),!0)):this._catalogData$1.get_state()===1&&(this._extractCatalogTileRows$1(),this.texReady=!0,this.downloading=!1,this.errored=!1,this.readyToRender=!0,this.requestPending=!1,Oe.removeFromQueue(this.get_key(),!0))},getIndexBuffer:function(e,t){return this.indexBuffer[e]},_calcSphere$1:function(e){var t=An.findEnclosingSphere(e);this.sphereCenter=t.center,this.sphereRadius=t.radius},isPointInTile:function(e,t){if(!this.level||this.level===1&&(t>=0&&t<=90&&!this.tileX&&this.tileY===1||t>90&&t<=180&&this.tileX===1&&this.tileY===1||t<0&&t>=-90&&!this.tileX&&!this.tileY||t<-90&&t>=-180&&this.tileX===1&&!this.tileY))return!0;var r=V.geoTo3dDouble(e,t),n=this._isLeftOfHalfSpace$1(this.topLeft,this.topRight,r),a=this._isLeftOfHalfSpace$1(this.topRight,this.bottomRight,r),l=this._isLeftOfHalfSpace$1(this.bottomRight,this.bottomLeft,r),f=this._isLeftOfHalfSpace$1(this.bottomLeft,this.topLeft,r);return!!(n&&a&&l&&f)},_isLeftOfHalfSpace$1:function(e,t,r){e.normalize(),t.normalize();var n=I.cross(e,t),a=I.dot(n,r);return a>0},getSurfacePointAltitude:function(e,t,r){if(this.level<O.lastDeepestLevel)for(var n=i.enumerate(this.children);n.moveNext();){var a=n.current;if(a!=null&&a.isPointInTile(e,t)){var l=a.getSurfacePointAltitude(e,t,r);if(l)return l;break}}return this._getAltitudeFromLatLng$1(e,t,r)},_getAltitudeFromLatLng$1:function(e,t,r){var n=V.geoTo3dDouble(e,t),a=bn.getUVFromInnerPoint(this.topLeft,this.topRight,this.bottomLeft,this.bottomRight,n),l=Math.max(0,Math.min(16,a.x*16)),f=Math.max(0,Math.min(16,a.y*16)),c=Math.max(0,Math.min(15,i.truncate(a.x*16))),d=Math.max(0,Math.min(15,i.truncate(a.y*16))),m=l-c,v=f-d;if(this.demArray!=null){var C=this.demArray[c+17*d],T=this.demArray[c+1+17*d],A=this.demArray[c+17*(d+1)],$=this.demArray[c+1+17*(d+1)],N=C*(1-m)+m*T,F=A*(1-m)+m*$,z=N*(1-v)+v*F;return z/(r?1:this.get__demScaleFactor())}return this.demAverage/(r?1:this.get__demScaleFactor())},_processIndexBuffer$1:function(e,t){this.indexBuffer[t]=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,this.indexBuffer[t]),O.prepDevice.bufferData(34963,e,35044)},cleanUp:function(e){O.prototype.cleanUp.call(this,e),this._returnBuffers$1(),this._subDivided$1=!1},_returnBuffers$1:function(){this._vertexList$1!=null&&(this._vertexList$1=null)},_populateVertexList$1:function(e,t){for(var r=0;r<t;r+=2)for(var n=0;n<t;n+=2){var a=this._boundaries$1(n,r,t);e[r*(t+1)+n]=Ue.createPos(a[2],1/t*r,1/t*n),e[r*(t+1)+n+1]=Ue.createPos(a[3],1/t*r,1/t+1/t*n),e[(r+1)*(t+1)+n]=Ue.createPos(a[1],1/t+1/t*r,1/t*n),e[(r+1)*(t+1)+n+1]=Ue.createPos(a[0],1/t+1/t*r,1/t+1/t*n),n+2>=t&&t>1&&(n=t-1,a=this._boundaries$1(n,r,t),e[r*(t+1)+t]=Ue.createPos(a[3],1/t*r,1/t+1/t*n),e[(r+1)*(t+1)+t]=Ue.createPos(a[0],1/t+1/t*r,1/t+1/t*n))}t>1&&this._vertexOfLastRow$1(e,t)},_vertexOfLastRow$1:function(e,t){for(var r=t-1,n=0;n<t;n+=2){var a=this._boundaries$1(n,r,t);e[(r+1)*(t+1)+n]=Ue.createPos(a[1],1/t+1/t*r,1/t*n),e[(r+1)*(t+1)+n+1]=Ue.createPos(a[0],1/t+1/t*r,1/t+1/t*n),n+2>=t&&(n=t-1,a=this._boundaries$1(n,r,t),e[(r+1)*(t+1)+t]=Ue.createPos(a[0],1/t+1/t*r,1/t+1/t*n))}}};function nr(e,t,r,n){this.errored=!1,this.numAxis=0,this.histogramMaxCount=0,this.sourceBlob=null,this.header={},this.position=0,this.bufferSize=1,this._parseSuccessful$1=!1,Qa.call(this),this.dataset=e,this.fitsProperties=e.get_fitsProperties(),this._callBack$1=n,this.filename=t,r!=null?this._readFromBlob$1(r):this.getFile(t)}var Wh={getFile:function(e){this._webFile$1=new fr(e),this._webFile$1.responseType="blob",this._webFile$1.onStateChange=i.bind("fileStateChange",this),this._webFile$1.send()},fileStateChange:function(){if(this._webFile$1.get_state()===2)this.errored=!0,this._callBack$1!=null&&this._callBack$1(this);else if(this._webFile$1.get_state()===1){var e=this._webFile$1.getBlob();this._readFromBlob$1(e)}},_readFromBlob$1:function(e){var t=this;this.sourceBlob=e;var r=new FileReader;r.onloadend=function(n){t.readFromBin(new DataView(r.result)),t.errored=!t._parseSuccessful$1,t._callBack$1!=null&&t._callBack$1(t)},r.readAsArrayBuffer(e)},_readByteString$1:function(e,t){for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e.getUint8(this.position)),this.position++;return r},_validateFitsSimple$1:function(e){var t=this._readByteString$1(e,8),r=i.trimEnd(t);return this.position-=8,r.toUpperCase()==="SIMPLE"},readFromBin:function(e){if(!this._validateFitsSimple$1(e)){console.log("The requested file is not a valid FITS file.");return}for(var t=!1;!t;)for(var r=0;r<36;r++){var n=this._readByteString$1(e,80);if(!t){var a=i.trimEnd(n.substring(0,8)),l=n.substring(10).split("/");if(a.toUpperCase()==="END"){for(t=!0,r++,n=this._readByteString$1(e,80);i.whitespace(n);)r++,n=this._readByteString$1(e,80);a=i.trimEnd(n.substring(0,8)),a.toUpperCase()==="XTENSION"?t=!1:this.position-=80}else this._addKeyword$1(a,l)}}if(!t){console.log("Unable to parse requested FITS file.");return}this.numAxis=parseInt(this.header.NAXIS),i.keyExists(this.header,"BLANK")&&(this.fitsProperties.blankValue=parseFloat(this.header.BLANK),this.fitsProperties.containsBlanks=!0),i.keyExists(this.header,"BZERO")&&(this.fitsProperties.bZero=parseFloat(this.header.BZERO)),i.keyExists(this.header,"BSCALE")&&(this.fitsProperties.bScale=parseFloat(this.header.BSCALE)),this.axisSize=new Array(this.numAxis);for(var f=0;f<this.numAxis;f++)this.axisSize[f]=parseInt(this.header[i.format("NAXIS{0}",f+1)]),this.bufferSize*=this.axisSize[f];var c=parseInt(this.header.BITPIX);this.readDataUnit(e,c),this.numAxis>1&&(this.sizeX=this.axisSize[0],this.sizeY=this.axisSize[1],this.histogram=this.computeHistogram(256),this.histogramMaxCount=this.histogram[256]),this.computeWcs(),this._parseSuccessful$1=!0},_addKeyword$1:function(e,t){if(e!=="CONTINUE"&&e!=="COMMENT"&&e!=="HISTORY"&&!i.emptyString(e))try{i.keyExists(this.header,e)?this.header[e]=i.trim(t[0]):this.header[e.toUpperCase()]=i.trim(t[0])}catch{}},readDataUnit:function(e,t){switch(this.dataUnit=new Float32Array(this.bufferSize),t){case-64:this.readDataUnitFloat64(e);break;case-32:this.readDataUnitFloat32(e);break;case 8:this.readDataUnitUint8(e);break;case 16:this.readDataUnitInt16(e);break;case 32:this.readDataUnitInt32(e);break;case 64:console.log("64 bit integer FITS are not yet supported");break}},readDataUnitFloat64:function(e){for(var t=0;this.position<e.byteLength;){this.dataUnit[t]=e.getFloat64(this.position,!1);var r=this.dataUnit[t]*this.fitsProperties.bScale+this.fitsProperties.bZero;this.fitsProperties.minVal>r&&(this.fitsProperties.minVal=r),this.fitsProperties.maxVal<r&&(this.fitsProperties.maxVal=r),t++,this.position+=8}this.fitsProperties.lowerCut=this.fitsProperties.minVal,this.fitsProperties.upperCut=this.fitsProperties.maxVal},readDataUnitFloat32:function(e){for(var t=0;this.position<e.byteLength;){this.dataUnit[t]=e.getFloat32(this.position,!1);var r=this.dataUnit[t]*this.fitsProperties.bScale+this.fitsProperties.bZero;this.fitsProperties.minVal>r&&(this.fitsProperties.minVal=r),this.fitsProperties.maxVal<r&&(this.fitsProperties.maxVal=r),t++,this.position+=4}this.fitsProperties.lowerCut=this.fitsProperties.minVal,this.fitsProperties.upperCut=this.fitsProperties.maxVal},readDataUnitUint8:function(e){for(var t=0;this.position<e.byteLength;)this.dataUnit[t]=e.getUint8(this.position),this.fitsProperties.minVal>this.dataUnit[t]&&(this.fitsProperties.minVal=this.dataUnit[t]),this.fitsProperties.maxVal<this.dataUnit[t]&&(this.fitsProperties.maxVal=this.dataUnit[t]),t++,this.position+=1;this.fitsProperties.lowerCut=this.fitsProperties.minVal,this.fitsProperties.upperCut=this.fitsProperties.maxVal},readDataUnitInt16:function(e){for(var t=0;this.position<e.byteLength;)this.dataUnit[t]=e.getInt16(this.position,!1),this.fitsProperties.minVal>this.dataUnit[t]&&(this.fitsProperties.minVal=this.dataUnit[t]),this.fitsProperties.maxVal<this.dataUnit[t]&&(this.fitsProperties.maxVal=this.dataUnit[t]),t++,this.position+=2;this.fitsProperties.lowerCut=this.fitsProperties.minVal,this.fitsProperties.upperCut=this.fitsProperties.maxVal},readDataUnitInt32:function(e){for(var t=0;this.position<e.byteLength;)this.dataUnit[t]=e.getInt32(this.position,!1),this.fitsProperties.minVal>this.dataUnit[t]&&(this.fitsProperties.minVal=this.dataUnit[t]),this.fitsProperties.maxVal<this.dataUnit[t]&&(this.fitsProperties.maxVal=this.dataUnit[t]),t++,this.position+=4;this.fitsProperties.lowerCut=this.fitsProperties.minVal,this.fitsProperties.upperCut=this.fitsProperties.maxVal},computeWcs:function(){i.keyExists(this.header,"CROTA2")&&(this.rotation=parseFloat(i.trim(this.header.CROTA2)),this.hasRotation=!0),i.keyExists(this.header,"CDELT1")&&(this.scaleX=parseFloat(i.trim(this.header.CDELT1)),i.keyExists(this.header,"CDELT2")&&(this.scaleY=parseFloat(i.trim(this.header.CDELT2)),this.hasScale=!0)),i.keyExists(this.header,"CRPIX1")&&(this.referenceX=parseFloat(i.trim(this.header.CRPIX1))-.5,i.keyExists(this.header,"CRPIX2")&&(this.referenceY=parseFloat(i.trim(this.header.CRPIX2))-.5,this.hasPixel=!0));var e=!1,t=!1;if(i.keyExists(this.header,"CTYPE1")&&(this.header.CTYPE1.indexOf("GLON-")>-1&&(e=!0,t=!0),this.header.CTYPE2.indexOf("GLAT-")>-1&&(e=!0,t=!0),this.header.CTYPE1.indexOf("-TAN")>-1&&(t=!0),this.header.CTYPE1.indexOf("-SIN")>-1&&(t=!0)),!t)throw new Error("Only TAN projected images are supported: ");if(this.hasSize=!0,i.keyExists(this.header,"CRVAL1")&&(this.centerX=parseFloat(i.trim(this.header.CRVAL1)),i.keyExists(this.header,"CRVAL2")&&(this.centerY=parseFloat(i.trim(this.header.CRVAL2)),this.hasLocation=!0)),e){var r=V.galactictoJ2000(this.centerX,this.centerY);this.centerX=r[0],this.centerY=r[1]}i.keyExists(this.header,"CD1_1")&&i.keyExists(this.header,"CD1_2")&&i.keyExists(this.header,"CD2_1")&&i.keyExists(this.header,"CD2_2")&&(this.cd1_1=parseFloat(i.trim(this.header.CD1_1)),this.cd1_2=parseFloat(i.trim(this.header.CD1_2)),this.cd2_1=parseFloat(i.trim(this.header.CD2_1)),this.cd2_2=parseFloat(i.trim(this.header.CD2_2)),this.hasRotation||this.calculateRotationFromCD(),this.hasScale||this.calculateScaleFromCD(),this.hasScale=!0,this.hasRotation=!0),this.set_validWcs(this.hasScale&&this.hasRotation&&this.hasPixel&&this.hasLocation)},applyDisplaySettings:function(){i.keyExists(this.header,"DATAMIN")&&(this.fitsProperties.lowerCut=parseFloat(i.trim(this.header.DATAMIN)),this.fitsProperties.minVal=this.fitsProperties.lowerCut),i.keyExists(this.header,"DATAMAX")&&(this.fitsProperties.upperCut=parseFloat(i.trim(this.header.DATAMAX)),this.fitsProperties.maxVal=this.fitsProperties.upperCut),i.keyExists(this.header,"PXCUTMIN")&&(this.fitsProperties.lowerCut=parseFloat(i.trim(this.header.PXCUTMIN))),i.keyExists(this.header,"PXCUTMAX")&&(this.fitsProperties.upperCut=parseFloat(i.trim(this.header.PXCUTMAX)))},computeHistogram:function(e){for(var t=new Array(e+1),r=0;r<e+1;r++)t[r]=0;this.populateHistogram(t);for(var n=1,a=i.enumerate(t);a.moveNext();){var l=a.current;l>n&&(n=l)}return t[e]=n,t},populateHistogram:function(e){for(var t=e.length,r=(this.fitsProperties.maxVal-this.fitsProperties.minVal)/t,n=0;n<this.dataUnit.length;n++)this.dataUnit[n]!==nr.naN&&e[Math.min(t-1,i.truncate((this.fitsProperties.bZero+this.fitsProperties.bScale*this.dataUnit[n]-this.fitsProperties.minVal)/r))]++},drawHistogram:function(e){e.clearRect(0,0,255,150),e.beginPath(),e.strokeStyle="rgba(255,255,255,255)";for(var t=Math.log(this.histogramMaxCount),r=0;r<this.histogram.length;r++){var n=Math.log(this.histogram[r])/t;n<0&&(n=0),e.moveTo(r,150),e.lineTo(r,150-n*150),e.stroke()}}};function Ao(){this._fill$1=!1,this._skyRelative$1=!1,this._strokeWidth$1=1,this._radius$1=10,this._lineColor$1=Te.get_white(),this._fillColor$1=Te.get_white(),this._ra$1=0,this._dec$1=0,vt.call(this)}var Kh={get_fill:function(){return this._fill$1},set_fill:function(e){return vt.batchDirty=!0,this._fill$1=e,e},get_skyRelative:function(){return this._skyRelative$1},set_skyRelative:function(e){return vt.batchDirty=!0,this._skyRelative$1=e,e},get_lineWidth:function(){return this._strokeWidth$1},set_lineWidth:function(e){return vt.batchDirty=!0,this._strokeWidth$1=e,e},get_radius:function(){return this._radius$1},set_radius:function(e){return vt.batchDirty=!0,this._radius$1=e,e},get_lineColor:function(){return this._lineColor$1.toString()},set_lineColor:function(e){return vt.batchDirty=!0,this._lineColor$1=G.load(e),e},get_fillColor:function(){return this._fillColor$1.toString()},set_fillColor:function(e){return vt.batchDirty=!0,this._fillColor$1=G.fromName(e),e},setCenter:function(e,t){vt.batchDirty=!0,this._ra$1=e/15,this._dec$1=t,this.center=V.raDecTo3d(this._ra$1,this._dec$1)},draw:function(e){var t=!0,r=this._radius$1;this._skyRelative$1&&(r/=e.get_fovScale()/3600);var n=e.WVP.transform(this.center);if(n.z<0&&(t=!1),I.dot(e.get_viewPoint(),this.center)<.55&&(t=!1),e.gl!=null){if(vt.batchDirty||this.annotationDirty){for(var a=I.create(0,1,0),l=I.cross(this.center,a),f=I.cross(this.center,l),c=this._radius$1/44,d=72,m=Math.PI*2/d,v=[],C=0;C<=d;C++){var T=Math.cos(C*m)*c,A=Math.sin(C*m)*c;v.push(I.create(this.center.x+T*l.x+A*f.x,this.center.y+T*l.y+A*f.y,this.center.z+T*l.z+A*f.z))}if(this._strokeWidth$1>0&&v.length>1){var $=this._lineColor$1._clone();$.a=Math.round($.a*this.get_opacity());for(var N=0;N<v.length-1;N++)vt.lineList.addLine(v[N],v[N+1],$,new ii(0,1))}if(this._fill$1){var F=this._fillColor$1._clone();F.a=Math.round(F.a*this.get_opacity());var z=I.create(this.center.x,this.center.y,this.center.z);v.splice(0,0,z),vt.triangleFanPointList.addShape(v,F,new ii(0,1))}this.annotationDirty=!1}}else if(t){var Y=e.device;Y.save(),Y.globalAlpha=this.get_opacity(),Y.beginPath(),Y.arc(n.x,n.y,r,0,Math.PI*2,!0),Y.lineWidth=this._strokeWidth$1,Y.fillStyle=this._fillColor$1.toString(),this._fill$1&&Y.fill(),Y.globalAlpha=1,Y.strokeStyle=this._lineColor$1.toString(),Y.stroke(),Y.restore()}},hitTest:function(e,t,r,n,a){if(i.emptyString(this.get_id()))return!1;var l=this._radius$1;return this._skyRelative$1||(l*=e.get_fovScale()/3600),vt.separation(t,r,this._ra$1,this._dec$1)<l}};function Io(){this._points$1=[],this._fill$1=!1,this._strokeWidth$1=1,this._lineColor$1=Te.get_white(),this._fillColor$1=Te.get_white(),vt.call(this)}var Jh={addPoint:function(e,t){vt.batchDirty=!0,this._points$1.push(V.raDecTo3d(e/15,t))},get_fill:function(){return this._fill$1},set_fill:function(e){return vt.batchDirty=!0,this._fill$1=e,e},get_lineWidth:function(){return this._strokeWidth$1},set_lineWidth:function(e){return vt.batchDirty=!0,this._strokeWidth$1=e,e},get_lineColor:function(){return this._lineColor$1.toString()},set_lineColor:function(e){return vt.batchDirty=!0,this._lineColor$1=G.fromName(e),e},get_fillColor:function(){return this._fillColor$1.toString()},set_fillColor:function(e){return vt.batchDirty=!0,this._fillColor$1=G.fromName(e),e},draw:function(e){if(e.gl!=null){if(vt.batchDirty||this.annotationDirty){var t=this._points$1;if(this._strokeWidth$1>0&&this._points$1.length>1){var r=this._lineColor$1._clone();r.a=Math.round(r.a*this.get_opacity());for(var n=0;n<this._points$1.length-1;n++)vt.lineList.addLine(t[n],t[n+1],r,new ii(0,1));vt.lineList.addLine(t[this._points$1.length-1],t[0],r,new ii(0,1))}if(this._fill$1){var a=this._fillColor$1._clone();a.a=Math.round(a.a*this.get_opacity());for(var l=fa.tesselateSimplePoly(t),n=0;n<l.length;n+=3)vt.triangleList.addSubdividedTriangles(t[l[n]],t[l[n+1]],t[l[n+2]],a,new ii(0,1),2)}this.annotationDirty=!1}}else{var f=e.device;f.save(),f.globalAlpha=this.get_opacity(),f.beginPath();for(var c=!0,d=i.enumerate(this._points$1);d.moveNext();){var m=d.current,v=e.WVP.transform(m);if(v.z<0){f.restore();return}if(I.dot(e.get_viewPoint(),m)<.75){f.restore();return}c?(c=!1,f.moveTo(v.x,v.y)):f.lineTo(v.x,v.y)}f.closePath(),f.lineWidth=this._strokeWidth$1,this._fill$1&&(f.fillStyle=this._fillColor$1.toString(),f.fill()),f.strokeStyle=this._lineColor$1.toString(),f.globalAlpha=1,f.stroke(),f.restore()}}};function Po(){this._points$1=[],this._strokeWidth$1=1,this._lineColor$1=Te.get_white(),vt.call(this)}var Zh={addPoint:function(e,t){vt.batchDirty=!0,this._points$1.push(V.raDecTo3d(e/15,t))},get_lineWidth:function(){return this._strokeWidth$1},set_lineWidth:function(e){return vt.batchDirty=!0,this._strokeWidth$1=e,e},get_lineColor:function(){return this._lineColor$1.toString()},set_lineColor:function(e){return vt.batchDirty=!0,this._lineColor$1=G.fromName(e),e},draw:function(e){if(e.gl!=null){if(vt.batchDirty||this.annotationDirty){var t=this._points$1;if(this._strokeWidth$1>0){var r=this._lineColor$1._clone();r.a=Math.round(r.a*this.get_opacity());for(var n=0;n<this._points$1.length-1;n++)vt.lineList.addLine(t[n],t[n+1],r,new ii(0,1))}this.annotationDirty=!1}}else{var a=e.device;a.save(),a.globalAlpha=this.get_opacity();for(var l=!0,f=i.enumerate(this._points$1);f.moveNext();){var c=f.current,d=e.WVP.transform(c);if(d.z<0){a.restore();return}if(I.dot(e.get_viewPoint(),c)<.75){a.restore();return}l?(l=!1,a.beginPath(),a.moveTo(d.x,d.y)):a.lineTo(d.x,d.y)}a.lineWidth=this._strokeWidth$1,a.strokeStyle=this._lineColor$1.toString(),a.stroke(),a.restore()}}};function ts(){this._tileDegrees$1=0,this._topDown$1=!0,this._subDivisionLevel$1=1,O.call(this)}ts.create=function(e,t,r,n,a){var l=new ts;return l.parent=a,l.level=e,l.tileX=t,l.tileY=r,l.dataset=n,l._topDown$1=!n.get_bottomsUp(),l.computeBoundingSphere(),l};var Qh={computeBoundingSphere:function(){if(!this._topDown$1){this.computeBoundingSphereBottomsUp();return}this._tileDegrees$1=this.dataset.get_baseTileDegrees()/Math.pow(2,this.level);var e=90-this.tileY*this._tileDegrees$1,t=90-(this.tileY+1)*this._tileDegrees$1,r=this.tileX*this._tileDegrees$1-180,n=(this.tileX+1)*this._tileDegrees$1-180,a=(e+t)/2,l=(r+n)/2;this.sphereCenter=this.geoTo3d(a,l,!1),this.topLeft=this.geoTo3d(e,r,!1),this.bottomRight=this.geoTo3d(t,n,!1),this.topRight=this.geoTo3d(e,n,!1),this.bottomLeft=this.geoTo3d(t,r,!1);var f=this.geoTo3d(e,r,!1);f.subtract(this.sphereCenter),this.sphereRadius=f.length(),this._tileDegrees$1=n-r},computeBoundingSphereBottomsUp:function(){var e=this.dataset.get_baseTileDegrees()/Math.pow(2,this.level),t=-90+(this.tileY+1)*e,r=-90+this.tileY*e,n=this.tileX*e-180,a=(this.tileX+1)*e-180,l=(t+r)/2,f=(n+a)/2;this.sphereCenter=this.geoTo3d(l,f,!1),this.topLeft=this.geoTo3d(t,n,!1),this.bottomRight=this.geoTo3d(r,a,!1),this.topRight=this.geoTo3d(t,a,!1),this.bottomLeft=this.geoTo3d(r,n,!1);var c=this.topLeft;c.subtract(this.sphereCenter),this.sphereRadius=c.length(),e=a-n},createGeometry:function(e){O.prototype.createGeometry.call(this,e),e.gl==null?(!this.dataset.get_dataSetType()||this.dataset.get_dataSetType()===1)&&(this._subDivisionLevel$1=Math.max(2,(4-this.level)*2)):this._subDivisionLevel$1=32;try{for(var t=0;t<4;t++)this._renderTriangleLists[t]=[];if(!this._topDown$1)return this._createGeometryBottomsUp$1(e);var r,n,a=0,l=this.dataset.get_baseTileDegrees()/Math.pow(2,this.level),f=90-this.tileY*l,c=90-(this.tileY+1)*l,d=this.tileX*l-180,m=(this.tileX+1)*l-180,v=m-d,C=c-f;this.topLeft=this.geoTo3d(f,d,!1),this.bottomRight=this.geoTo3d(c,m,!1),this.topRight=this.geoTo3d(f,m,!1),this.bottomLeft=this.geoTo3d(c,d,!1);var T=new Array((this._subDivisionLevel$1+1)*(this._subDivisionLevel$1+1)),A,$,N=1/this._subDivisionLevel$1;for($=0;$<=this._subDivisionLevel$1;$++)for($!==this._subDivisionLevel$1?r=f+N*C*$:r=c,A=0;A<=this._subDivisionLevel$1;A++)A!==this._subDivisionLevel$1?n=d+N*v*A:n=m,a=$*(this._subDivisionLevel$1+1)+A,T[a]=Ue.createPos(this.geoTo3d(r,n,!1),A*N,$*N);this.triangleCount=this._subDivisionLevel$1*this._subDivisionLevel$1*2;var F=this._subDivisionLevel$1/2,z=0;if(e.gl==null)for(var Y=0;Y<2;Y++)for(var W=0;W<2;W++){a=0;for(var ee=F*Y;ee<F*(Y+1);ee++)for(var ne=F*W;ne<F*(W+1);ne++){var ae,de,se;ae=T[ee*(this._subDivisionLevel$1+1)+ne],de=T[(ee+1)*(this._subDivisionLevel$1+1)+ne],se=T[ee*(this._subDivisionLevel$1+1)+(ne+1)],this._renderTriangleLists[z].push(Ct.create(ae,se,de,this.texture,this.level)),ae=T[ee*(this._subDivisionLevel$1+1)+(ne+1)],de=T[(ee+1)*(this._subDivisionLevel$1+1)+ne],se=T[(ee+1)*(this._subDivisionLevel$1+1)+(ne+1)],this._renderTriangleLists[z].push(Ct.create(ae,se,de,this.texture,this.level))}z++}else{this._vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this._vertexBuffer);var we=new Float32Array(T.length*5),fe=we;a=0;for(var $e=i.enumerate(T);$e.moveNext();){var ve=$e.current;a=this.addVertex(fe,a,ve)}O.prepDevice.bufferData(34962,we,35044);for(var Y=0;Y<2;Y++)for(var W=0;W<2;W++){var ut=new Uint16Array(this.triangleCount*3),ht=ut;a=0;for(var ee=F*Y;ee<F*(Y+1);ee++)for(var ne=F*W;ne<F*(W+1);ne++)ht[a++]=ee*(this._subDivisionLevel$1+1)+ne,ht[a++]=(ee+1)*(this._subDivisionLevel$1+1)+ne,ht[a++]=ee*(this._subDivisionLevel$1+1)+(ne+1),ht[a++]=ee*(this._subDivisionLevel$1+1)+(ne+1),ht[a++]=(ee+1)*(this._subDivisionLevel$1+1)+ne,ht[a++]=(ee+1)*(this._subDivisionLevel$1+1)+(ne+1);this._indexBuffers[z]=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,this._indexBuffers[z]),O.prepDevice.bufferData(34963,ut,35044),z++}}}catch{}return!0},_createGeometryBottomsUp$1:function(e){var t,r,n=0,a=this.dataset.get_baseTileDegrees()/Math.pow(2,this.level),l=-90+(this.tileY+1)*a,f=-90+this.tileY*a,c=this.tileX*a-180,d=(this.tileX+1)*a-180,m=d-c,v=f-l,C=new Array((this._subDivisionLevel$1+1)*(this._subDivisionLevel$1+1)),T,A,$=1/this._subDivisionLevel$1;for(A=0;A<=this._subDivisionLevel$1;A++)for(A!==this._subDivisionLevel$1?t=l+$*v*A:t=f,T=0;T<=this._subDivisionLevel$1;T++)T!==this._subDivisionLevel$1?r=c+$*m*T:r=d,n=A*(this._subDivisionLevel$1+1)+T,C[n]=Ue.createPos(this.geoTo3d(t,r,!1),T*$,A*$);this.triangleCount=this._subDivisionLevel$1*this._subDivisionLevel$1*2;var N=this._subDivisionLevel$1/2,F=0;if(e.gl==null)for(var z=0;z<2;z++)for(var Y=0;Y<2;Y++){n=0;for(var W=N*z;W<N*(z+1);W++)for(var ee=N*Y;ee<N*(Y+1);ee++){var ne,ae,de;ne=C[W*(this._subDivisionLevel$1+1)+ee],ae=C[(W+1)*(this._subDivisionLevel$1+1)+ee],de=C[W*(this._subDivisionLevel$1+1)+(ee+1)],this._renderTriangleLists[F].push(Ct.create(ne,de,ae,this.texture,this.level)),ne=C[W*(this._subDivisionLevel$1+1)+(ee+1)],ae=C[(W+1)*(this._subDivisionLevel$1+1)+ee],de=C[(W+1)*(this._subDivisionLevel$1+1)+(ee+1)],this._renderTriangleLists[F].push(Ct.create(ne,de,ae,this.texture,this.level))}F++}else{this._vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this._vertexBuffer);var se=new Float32Array(C.length*5),we=se;n=0;for(var fe=i.enumerate(C);fe.moveNext();){var $e=fe.current;n=this.addVertex(we,n,$e)}O.prepDevice.bufferData(34962,se,35044);for(var z=0;z<2;z++)for(var Y=0;Y<2;Y++){var ve=new Uint16Array(this.triangleCount*3),ut=ve;n=0;for(var W=N*z;W<N*(z+1);W++)for(var ee=N*Y;ee<N*(Y+1);ee++)ut[n++]=W*(this._subDivisionLevel$1+1)+ee,ut[n++]=(W+1)*(this._subDivisionLevel$1+1)+ee,ut[n++]=W*(this._subDivisionLevel$1+1)+(ee+1),ut[n++]=W*(this._subDivisionLevel$1+1)+(ee+1),ut[n++]=(W+1)*(this._subDivisionLevel$1+1)+ee,ut[n++]=(W+1)*(this._subDivisionLevel$1+1)+(ee+1);this._indexBuffers[F]=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,this._indexBuffers[F]),O.prepDevice.bufferData(34963,ve,35044),F++}}return!0}};function is(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}var ef={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*3),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}O.prepDevice.bufferData(34962,e,35044)}};function pa(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}pa.create=function(e){var t=new pa(e.length);return t._verts$1=e,t.unlock(),t};var tf={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*5),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.position.x,t[r++]=a.position.y,t[r++]=a.position.z,t[r++]=a.tu,t[r++]=a.tv}O.prepDevice.bufferData(34962,e,35044)}};function rs(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}rs.create=function(e){var t=new rs(e.length);return t._verts$1=e,t.unlock(),t};var rf={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*8),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.nx,t[r++]=a.ny,t[r++]=a.nz,t[r++]=a.tu,t[r++]=a.tv}O.prepDevice.bufferData(34962,e,35044)}};function ns(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}ns.create=function(e){var t=new ns(e.length);return t._verts$1=e,t.unlock(),t};var nf={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*11),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.nx,t[r++]=a.ny,t[r++]=a.nz,t[r++]=a.tanx,t[r++]=a.tany,t[r++]=a.tanz,t[r++]=a.tu,t[r++]=a.tv}O.prepDevice.bufferData(34962,e,35044)}};function as(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}as.create=function(e){var t=new as(e.length);return t._verts$1=e,t};var af={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*19),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.ABC.x,t[r++]=a.ABC.y,t[r++]=a.ABC.z,t[r++]=a.abc1.x,t[r++]=a.abc1.y,t[r++]=a.abc1.z,t[r++]=a.pointSize,t[r++]=a.color.r/255,t[r++]=a.color.g/255,t[r++]=a.color.b/255,t[r++]=a.color.a/255,t[r++]=a.w,t[r++]=a.e,t[r++]=a.n,t[r++]=a.t,t[r++]=a.a,t[r++]=a.z,t[r++]=a.orbitPos,t[r++]=a.orbits}O.prepDevice.bufferData(34962,e,35044)}};function os(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}var sf={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*9),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.position.x,t[r++]=a.position.y,t[r++]=a.position.z,t[r++]=a.get_color().r/255,t[r++]=a.get_color().g/255,t[r++]=a.get_color().b/255,t[r++]=a.get_color().a/255,t[r++]=a.tu,t[r++]=a.tv}O.prepDevice.bufferData(34962,e,35044)}};function Ro(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}var of={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*10),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.position.x,t[r++]=a.position.y,t[r++]=a.position.z,t[r++]=a.get_color().r/255,t[r++]=a.get_color().g/255,t[r++]=a.get_color().b/255,t[r++]=a.get_color().a/255,t[r++]=a.tu,t[r++]=a.tv,t[r++]=a.pointSize}O.prepDevice.bufferData(34962,e,35044)},dispose:function(){O.prepDevice.bindBuffer(34962,null),O.prepDevice.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null}};function $o(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}var lf={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*7),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.position.x,t[r++]=a.position.y,t[r++]=a.position.z,t[r++]=a.color.r/255,t[r++]=a.color.g/255,t[r++]=a.color.b/255,t[r++]=a.color.a/255}O.prepDevice.bufferData(34962,e,35044)}};function uf(e){this.count=0,this._verts$1=null,ir.call(this),this.count=e}var cf={lock:function(){return this._verts$1=new Array(this.count),this._verts$1},unlock:function(){this.vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this.vertexBuffer);for(var e=new Float32Array(this.count*9),t=e,r=0,n=i.enumerate(this._verts$1);n.moveNext();){var a=n.current;t[r++]=a.position.x,t[r++]=a.position.y,t[r++]=a.position.z,t[r++]=a.color.r/255,t[r++]=a.color.g/255,t[r++]=a.color.b/255,t[r++]=a.color.a/255,t[r++]=a.tu,t[r++]=a.tv}O.prepDevice.bufferData(34962,e,35044)}};function Eo(e,t){this._min$1=0,this._max$1=0,this._factor$1=0,this._logFactor$1=0,Xr.call(this),this._min$1=e,this._max$1=t,this._factor$1=t-e}var hf={map:function(e){return Math.min(255,Math.max(0,i.truncate((e-this._min$1)/this._factor$1*255)))}};function Do(e,t){this._min$1=0,this._max$1=0,this._factor$1=0,this._logFactor$1=0,Xr.call(this),this._min$1=e,this._max$1=t,this._factor$1=t-e,this._logFactor$1=255/Math.log(255)}var ff={map:function(e){return Math.min(255,Math.max(0,i.truncate(Math.log((e-this._min$1)/this._factor$1*255)*this._logFactor$1)))}};function Fo(e,t){this._min$1=0,this._max$1=0,this._factor$1=0,this._powFactor$1=0,Xr.call(this),this._min$1=e,this._max$1=t,this._factor$1=t-e,this._powFactor$1=255/Math.pow(255,2)}var df={map:function(e){return Math.min(255,Math.max(0,i.truncate(Math.pow((e-this._min$1)/this._factor$1*255,2)*this._powFactor$1)))}};function No(e,t){this._min$1=0,this._max$1=0,this._factor$1=0,this._sqrtFactor$1=0,Xr.call(this),this._min$1=e,this._max$1=t,this._factor$1=t-e,this._sqrtFactor$1=255/Math.sqrt(255)}var _f={map:function(e){return Math.min(255,Math.max(0,i.truncate(Math.sqrt((e-this._min$1)/this._factor$1*255)*this._sqrtFactor$1)))}};function Vo(e,t,r){this._min$1=0,this._max$1=0,this._factor$1=0,this._maxHistogramValue$1=1,Xr.call(this),this._min$1=t,this._max$1=r,this._factor$1=r-t,this._histogram$1=e.computeHistogram(1e4),this._maxHistogramValue$1=this._histogram$1[1e4],this._lookup$1=new Array(1e4);for(var n=i.truncate(e.get_sizeX()*e.get_sizeY()),a=0,l=0;l<1e4;l++)a+=this._histogram$1[l],this._lookup$1[l]=Math.min(255,a*255/n)+.5}var gf={map:function(e){return this._lookup$1[Math.min(1e4-1,Math.max(0,i.truncate((e-this._min$1)/this._factor$1*(1e4-1))))]}};function Fa(){this._triangleList$1=null,this._latStart$1=0,this._lngStart$1=0,this._latEnd$1=0,this._lngEnd$1=0,this._width$1=4,this._percentComplete$1=100,ri.call(this)}var mf={getTypeName:function(){return"TerraViewer.GreatCirlceRouteLayer"},cleanUp:function(){this._triangleList$1!=null&&this._triangleList$1.clear(),this._triangleList$1=null,ri.prototype.cleanUp.call(this)},draw:function(e,t,r){return this._triangleList$1==null&&this._initializeRoute$1(e),this._triangleList$1.jNow=this._percentComplete$1/100,this._triangleList$1.draw(e,t*this.get_opacity(),2),!0},_initializeRoute$1:function(e){this._triangleList$1=new In,this._triangleList$1.decay=1e3,this._triangleList$1.sky=this.get_astronomical(),this._triangleList$1.timeSeries=!0,this._triangleList$1.depthBuffered=!1,this._triangleList$1.autoTime=!1;var t=500,r=V.geoTo3dDouble(this._latStart$1,this._lngStart$1),n=V.geoTo3dDouble(this._latEnd$1,this._lngEnd$1),a=I.subtractVectors(n,r);a.normalize();var l=r;l.normalize();var f=I.cross(l,a),c=I.cross(a,l);f.normalize(),c.normalize(),f.multiply(.001*this._width$1),c.multiply(.001*this._width$1);for(var d=new I,m=new I,v=!0,C=0;C<=t;C++){var T=I.lerp(r,n,C/t);T.normalize();var A=T,$=T;A.add(f),$.add(c),v?v=!1:this._triangleList$1.addQuad(m,d,$,A,this.get_color(),new ii(C/t,2)),d=A,m=$}},getParams:function(){return[this._percentComplete$1]},getParamNames:function(){return["Percentage"]},setParams:function(e){e.length>0&&(this._percentComplete$1=e[0])},get_latStart:function(){return this._latStart$1},set_latStart:function(e){return this._latStart$1!==e&&(this._latStart$1=e,this.version++),e},get_lngStart:function(){return this._lngStart$1},set_lngStart:function(e){return this._lngStart$1!==e&&(this._lngStart$1=e,this.version++),e},get_latEnd:function(){return this._latEnd$1},set_latEnd:function(e){return this._latEnd$1!==e&&(this._latEnd$1=e,this.version++),e},get_lngEnd:function(){return this._lngEnd$1},set_lngEnd:function(e){return this._lngEnd$1!==e&&(this._lngEnd$1=e,this.version++),e},get_width:function(){return this._width$1},set_width:function(e){return this._width$1!==e&&(this._width$1=e,this.version++),e},get_percentComplete:function(){return this._percentComplete$1},set_percentComplete:function(e){return this._percentComplete$1!==e&&(this._percentComplete$1=e,this.version++),e},writeLayerProperties:function(e){e._writeAttributeString("LatStart",this.get_latStart().toString()),e._writeAttributeString("LngStart",this.get_lngStart().toString()),e._writeAttributeString("LatEnd",this.get_latEnd().toString()),e._writeAttributeString("LngEnd",this.get_lngEnd().toString()),e._writeAttributeString("Width",this.get_width().toString()),e._writeAttributeString("PercentComplete",this.get_percentComplete().toString())},initializeFromXml:function(e){this._latStart$1=parseFloat(e.attributes.getNamedItem("LatStart").nodeValue),this._lngStart$1=parseFloat(e.attributes.getNamedItem("LngStart").nodeValue),this._latEnd$1=parseFloat(e.attributes.getNamedItem("LatEnd").nodeValue),this._lngEnd$1=parseFloat(e.attributes.getNamedItem("LngEnd").nodeValue),this._width$1=parseFloat(e.attributes.getNamedItem("Width").nodeValue),this._percentComplete$1=parseFloat(e.attributes.getNamedItem("PercentComplete").nodeValue)}};function Xs(){ri.call(this)}var pf={draw:function(e,t,r){return X.drawPlanetGrid(e,t*this.get_opacity(),this.get_color()),X.drawPlanetGridText(e,t*this.get_opacity(),this.get_color()),!0}};function Hi(){this._imageSet$1=null,this._extension$1=".txt",this._overrideDefaultLayer$1=!1,this._loaded$1=!1,ri.call(this)}Hi.create=function(e){var t=new Hi;return t._imageSet$1=e,t};var vf={get_imageSet:function(){return this._imageSet$1},set_imageSet:function(e){return this._imageSet$1=e,e},get_overrideDefaultLayer:function(){return this._overrideDefaultLayer$1},set_overrideDefaultLayer:function(e){return this._overrideDefaultLayer$1=e,e},getFitsImage:function(){return i.safeCast(this._imageSet$1.get_wcsImage(),nr)},_isFitsImageset$1:function(){var e=this._imageSet$1.get_extension()===".fits";return i.canCast(this._imageSet$1.get_wcsImage(),nr)||this._imageSet$1.get_wcsImage()==null&&e},initializeFromXml:function(e){var t=ye.selectSingleNode(e,"ImageSet");this._imageSet$1=Mi.fromXMLNode(t),e.attributes.getNamedItem("Extension")!=null&&(this._extension$1=e.attributes.getNamedItem("Extension").nodeValue),e.attributes.getNamedItem("ScaleType")!=null&&(this.get_imageSet().get_fitsProperties().scaleType=gt.parse("ScaleTypes",e.attributes.getNamedItem("ScaleType").nodeValue)),e.attributes.getNamedItem("MinValue")!=null&&(this.get_imageSet().get_fitsProperties().minVal=parseFloat(e.attributes.getNamedItem("MinValue").nodeValue),this.get_imageSet().get_fitsProperties().lowerCut=e.attributes.getNamedItem("LowerCut")!=null?parseFloat(e.attributes.getNamedItem("LowerCut").nodeValue):this.get_imageSet().get_fitsProperties().minVal),e.attributes.getNamedItem("MaxValue")!=null&&(this.get_imageSet().get_fitsProperties().maxVal=parseFloat(e.attributes.getNamedItem("MaxValue").nodeValue),this.get_imageSet().get_fitsProperties().upperCut=e.attributes.getNamedItem("UpperCut")!=null?parseFloat(e.attributes.getNamedItem("UpperCut").nodeValue):this.get_imageSet().get_fitsProperties().maxVal),e.attributes.getNamedItem("ColorMapperName")!=null&&(this.get_imageSet().get_fitsProperties().colorMapName=e.attributes.getNamedItem("ColorMapperName").nodeValue),e.attributes.getNamedItem("OverrideDefault")!=null&&(this._overrideDefaultLayer$1=i.boolean(e.attributes.getNamedItem("OverrideDefault").nodeValue))},draw:function(e,t,r){return this._loaded$1?(e.set_worldBase(e.get_world()),e.set_viewBase(e.get_view()),e.makeFrustum(),e.drawImageSet(this._imageSet$1,this.get_opacity()*t*100),!0):!1},writeLayerProperties:function(e){this._imageSet$1.get_wcsImage()!=null&&(this._isFitsImageset$1()?this._extension$1=".fit":this._extension$1=".png",e._writeAttributeString("Extension",this._extension$1)),this._isFitsImageset$1()&&(e._writeAttributeString("ScaleType",gt.toXml("ScaleTypes",this._imageSet$1.get_fitsProperties().scaleType)),e._writeAttributeString("MinValue",this._imageSet$1.get_fitsProperties().minVal.toString()),e._writeAttributeString("MaxValue",this._imageSet$1.get_fitsProperties().maxVal.toString()),e._writeAttributeString("LowerCut",this._imageSet$1.get_fitsProperties().lowerCut.toString()),e._writeAttributeString("UpperCut",this._imageSet$1.get_fitsProperties().upperCut.toString()),this._imageSet$1.get_fitsProperties().colorMapName!=null&&e._writeAttributeString("ColorMapperName",this._imageSet$1.get_fitsProperties().colorMapName)),e._writeAttributeString("OverrideDefault",this._overrideDefaultLayer$1.toString()),Mi.saveToXml(e,this._imageSet$1,""),ri.prototype.writeLayerProperties.call(this,e)},getTypeName:function(){return"TerraViewer.ImageSetLayer"},cleanUp:function(){ri.prototype.cleanUp.call(this)},addFilesToCabinet:function(e){if(i.canCast(this._imageSet$1.get_wcsImage(),nr)){this._imageSet$1.get_wcsImage().get_filename();var t=e.tempDirectory+i.format("{0}\\{1}{2}",e.get_packageID(),this.id.toString(),this._extension$1);e.addFile(t,this._imageSet$1.get_wcsImage().sourceBlob)}},getParamNames:function(){return ri.prototype.getParamNames.call(this)},getParams:function(){return ri.prototype.getParams.call(this)},setParams:function(e){ri.prototype.setParams.call(this,e)},setImageScale:function(e,t,r){console.warn("SetImageScale is considered deprecated. Use setImageScaleRaw or setImageScalePhysical instead."),this.setImageScaleRaw(e,t,r)},setImageScaleRaw:function(e,t,r){this.get_imageSet().get_fitsProperties().lowerCut=t,this.get_imageSet().get_fitsProperties().upperCut=r,this.get_imageSet().get_fitsProperties().scaleType=e,i.canCast(this._imageSet$1.get_wcsImage(),Wr)&&En.updateScale(this,e,t,r)},setImageScalePhysical:function(e,t,r){var n=t,a=r;this._isFitsImageset$1()&&(n=(n-this._imageSet$1.get_fitsProperties().bZero)/this._imageSet$1.get_fitsProperties().bScale,a=(a-this._imageSet$1.get_fitsProperties().bZero)/this._imageSet$1.get_fitsProperties().bScale),this.setImageScaleRaw(e,n,a)},setImageZ:function(e){this._isFitsImageset$1()&&En.updateImage(this,e)},get_colorMapperName:function(){return this.get_imageSet().get_fitsProperties().colorMapName},set_colorMapperName:function(e){if(bt.fromNamedColormap(e)==null)throw new Error("Invalid colormap name");return this.version++,this._isFitsImageset$1()&&(Zt.useGlVersion2?this._imageSet$1.get_fitsProperties().colorMapName=e:En.updateColorMapper(this,e)),e},get_colorMapper:function(){return this.get_imageSet().get_fitsProperties().colorMapName==null?null:bt.fromNamedColormap(this.get_imageSet().get_fitsProperties().colorMapName)},loadData:function(e,t){if(i.startsWith(this._extension$1.toLowerCase(),".fit")){var r=e.getFileBlob(i.replaceString(t,".txt",this._extension$1)),n;Zt.useGlVersion2?n=new nr(this._imageSet$1,"image.fit",r,i.bind("doneLoading",this)):n=new Wr(this._imageSet$1,"image.fit",r,i.bind("doneLoading",this)),this._imageSet$1.set_wcsImage(n)}else this._loaded$1=!0},doneLoading:function(e){this._loaded$1=!0}};function wf(){ri.call(this)}var bf={draw:function(e,t,r){return ri.prototype.draw.call(this,e,t,!1)}};function Et(){this._primaryUI$1=null,this._heading$1=0,this._flipV$1=!0,this._flipHandedness$1=!1,this._smooth$1=!0,this._twoSidedGeometry$1=!1,this._pitch$1=0,this._roll$1=0,this._scale$1=I.create(1,1,1),this._translate$1=I.create(0,0,0),this._lightID$1=0,this._dirty$1=!1,this.objType=!1,this._xHandle$1=new xe,this._yHandle$1=new xe,this._zHandle$1=new xe,this._hprHandles$1=new Array(6),this._uiScale$1=1,this._showEditUi$1=!1,this._dragMode$1=0,this._pntDown$1=new xe,this._valueOnDown$1=0,this._valueOnDown2$1=0,this._hitDist$1=20,this._lockPreferedAxis$1=!1,this._preferY$1=!1,ri.call(this)}Et._initTranslateUI$1=function(){Et._translateUILines$1=new ca,Et._translateUILines$1.timeSeries=!1,Et._translateUILines$1.set_depthBuffered(!1),Et._translateUILines$1.showFarSide=!0,Et._translateUI$1=new In,Et._translateUI$1.depthBuffered=!1,Et._translateUI$1.timeSeries=!1,Et._translateUI$1.writeZbuffer=!1;for(var e=Math.PI*2,t=e/45,r=.05,n=0;n<e;n+=t){var a=I.create(1-r*4,0,0),l=I.create(1-r*4,Math.cos(n)*r,Math.sin(n)*r),f=I.create(1-r*4,Math.cos(n+t)*r,Math.sin(n+t)*r);Et._translateUI$1.addTriangle(a,l,f,Te.get_red(),ii.empty())}for(var n=0;n<e;n+=t){var a=I.create(1,0,0),f=I.create(1-r*4,Math.cos(n)*r,Math.sin(n)*r),l=I.create(1-r*4,Math.cos(n+t)*r,Math.sin(n+t)*r);Et._translateUI$1.addTriangle(a,l,f,G.fromArgb(255,255,Math.max(0,Math.sin(n)*128),Math.max(0,Math.sin(n)*128)),ii.empty())}Et._translateUILines$1.addLine(I.create(0,0,0),I.create(1,0,0),Te.get_red(),ii.empty());for(var n=0;n<e;n+=t){var a=I.create(0,1-r*4,0),f=I.create(Math.cos(n)*r,1-r*4,Math.sin(n)*r),l=I.create(Math.cos(n+t)*r,1-r*4,Math.sin(n+t)*r);Et._translateUI$1.addTriangle(a,l,f,Te.get_green(),ii.empty())}for(var n=0;n<e;n+=t){var a=I.create(0,1,0),l=I.create(Math.cos(n)*r,1-r*4,Math.sin(n)*r),f=I.create(Math.cos(n+t)*r,1-r*4,Math.sin(n+t)*r);Et._translateUI$1.addTriangle(a,l,f,G.fromArgb(255,Math.max(0,Math.sin(n)*128),255,Math.max(0,Math.sin(n)*128)),ii.empty())}Et._translateUILines$1.addLine(I.create(0,0,0),I.create(0,1,0),Te.get_green(),ii.empty());for(var n=0;n<e;n+=t){var a=I.create(0,0,1-r*4),l=I.create(Math.cos(n)*r,Math.sin(n)*r,1-r*4),f=I.create(Math.cos(n+t)*r,Math.sin(n+t)*r,1-r*4);Et._translateUI$1.addTriangle(a,l,f,Te.get_blue(),ii.empty())}for(var n=0;n<e;n+=t){var a=I.create(0,0,1),f=I.create(Math.cos(n)*r,Math.sin(n)*r,1-r*4),l=I.create(Math.cos(n+t)*r,Math.sin(n+t)*r,1-r*4);Et._translateUI$1.addTriangle(a,l,f,G.fromArgb(255,Math.max(0,Math.sin(n)*128),Math.max(0,Math.sin(n)*128),255),ii.empty())}Et._translateUILines$1.addLine(I.create(0,0,0),I.create(0,0,1),Te.get_blue(),ii.empty()),Et._initRotateUI$1(),Et._initScaleUI$1()},Et._initScaleUI$1=function(){Et._scaleUI$1=new In,Et._scaleUI$1.depthBuffered=!1,Et._scaleUI$1.timeSeries=!1,Et._scaleUI$1.writeZbuffer=!1;var e=.05;Et._makeCube$1(Et._scaleUI$1,I.create(1-e*2,0,0),e*2,Te.get_red()),Et._makeCube$1(Et._scaleUI$1,I.create(0,1-e*2,0),e*2,Te.get_green()),Et._makeCube$1(Et._scaleUI$1,I.create(0,0,1-e*2),e*2,Te.get_blue())},Et._makeCube$1=function(e,t,r,n){var a=G.fromArgb(255,i.truncate(n.r*.6),n.g,i.truncate(n.b*.6)),l=G.fromArgb(255,i.truncate(n.r*.8),i.truncate(n.g*.8),i.truncate(n.b*.8));e.addQuad(I.create(t.x+r,t.y+r,t.z+r),I.create(t.x+r,t.y+r,t.z-r),I.create(t.x-r,t.y+r,t.z+r),I.create(t.x-r,t.y+r,t.z-r),n,ii.empty()),e.addQuad(I.create(t.x+r,t.y-r,t.z+r),I.create(t.x-r,t.y-r,t.z+r),I.create(t.x+r,t.y-r,t.z-r),I.create(t.x-r,t.y-r,t.z-r),n,ii.empty()),e.addQuad(I.create(t.x-r,t.y+r,t.z+r),I.create(t.x-r,t.y+r,t.z-r),I.create(t.x-r,t.y-r,t.z+r),I.create(t.x-r,t.y-r,t.z-r),a,ii.empty()),e.addQuad(I.create(t.x+r,t.y+r,t.z+r),I.create(t.x+r,t.y-r,t.z+r),I.create(t.x+r,t.y+r,t.z-r),I.create(t.x+r,t.y-r,t.z-r),a,ii.empty()),e.addQuad(I.create(t.x+r,t.y+r,t.z+r),I.create(t.x-r,t.y+r,t.z+r),I.create(t.x+r,t.y-r,t.z+r),I.create(t.x-r,t.y-r,t.z+r),l,ii.empty()),e.addQuad(I.create(t.x+r,t.y+r,t.z-r),I.create(t.x+r,t.y-r,t.z-r),I.create(t.x-r,t.y+r,t.z-r),I.create(t.x-r,t.y-r,t.z-r),l,ii.empty())},Et._initRotateUI$1=function(){Et._rotateUi$1=new In,Et._rotateUi$1.depthBuffered=!1,Et._rotateUi$1.timeSeries=!1,Et._rotateUi$1.writeZbuffer=!1;for(var e=Math.PI*2,t=e/40,r=.05,n=0,a=0;a<e;a+=t){var l=!(n%10),f=!((n+1)%10),c=I.create(r*(l?0:f?1.5:1),Math.cos(a),Math.sin(a)),d=I.create(-r*(l?0:f?1.5:1),Math.cos(a),Math.sin(a)),m=I.create(r*(l?1.5:f?0:1),Math.cos(a+t),Math.sin(a+t)),v=I.create(-r*(l?1.5:f?0:1),Math.cos(a+t),Math.sin(a+t));Et._rotateUi$1.addQuad(c,m,d,v,G._fromArgbColor(192,Te.get_red()),ii.empty()),n++}n=0;for(var a=0;a<e;a+=t){var l=!(n%10),f=!((n+1)%10),c=I.create(Math.cos(a),Math.sin(a),r*(l?0:f?1.5:1)),d=I.create(Math.cos(a),Math.sin(a),-r*(l?0:f?1.5:1)),m=I.create(Math.cos(a+t),Math.sin(a+t),r*(l?1.5:f?0:1)),v=I.create(Math.cos(a+t),Math.sin(a+t),-r*(l?1.5:f?0:1));Et._rotateUi$1.addQuad(c,m,d,v,G._fromArgbColor(192,Te.get_blue()),ii.empty()),n++}n=0;for(var a=0;a<e;a+=t){var l=!(n%10),f=!((n+1)%10),c=I.create(Math.cos(a),r*(l?0:f?1.5:1),Math.sin(a)),d=I.create(Math.cos(a),-r*(l?0:f?1.5:1),Math.sin(a)),m=I.create(Math.cos(a+t),r*(l?1.5:f?0:1),Math.sin(a+t)),v=I.create(Math.cos(a+t),-r*(l?1.5:f?0:1),Math.sin(a+t));Et._rotateUi$1.addQuad(c,d,m,v,G._fromArgbColor(192,Te.get_green()),ii.empty()),n++}n=0;for(var a=0;a<e;a+=t){var l=!(n%10),f=!((n+1)%10),c=I.create(-r*(l?0:f?1.5:1),Math.cos(a),Math.sin(a)),d=I.create(r*(l?0:f?1.5:1),Math.cos(a),Math.sin(a)),m=I.create(-r*(l?1.5:f?0:1),Math.cos(a+t),Math.sin(a+t)),v=I.create(r*(l?1.5:f?0:1),Math.cos(a+t),Math.sin(a+t));Et._rotateUi$1.addQuad(c,m,d,v,Te.get_red(),ii.empty()),n++}n=0;for(var a=0;a<e;a+=t){var l=!(n%10),f=!((n+1)%10),c=I.create(Math.cos(a),Math.sin(a),-r*(l?0:f?1.5:1)),d=I.create(Math.cos(a),Math.sin(a),r*(l?0:f?1.5:1)),m=I.create(Math.cos(a+t),Math.sin(a+t),-r*(l?1.5:f?0:1)),v=I.create(Math.cos(a+t),Math.sin(a+t),r*(l?1.5:f?0:1));Et._rotateUi$1.addQuad(c,m,d,v,Te.get_blue(),ii.empty()),n++}n=0;for(var a=0;a<e;a+=t){var l=!(n%10),f=!((n+1)%10),c=I.create(Math.cos(a),-r*(l?0:f?1.5:1),Math.sin(a)),d=I.create(Math.cos(a),r*(l?0:f?1.5:1),Math.sin(a)),m=I.create(Math.cos(a+t),-r*(l?1.5:f?0:1),Math.sin(a+t)),v=I.create(Math.cos(a+t),r*(l?1.5:f?0:1),Math.sin(a+t));Et._rotateUi$1.addQuad(c,d,m,v,Te.get_green(),ii.empty()),n++}};var yf={getPrimaryUI:function(){return this._primaryUI$1==null&&(this._primaryUI$1=new Bo(this)),this._primaryUI$1},get_flipV:function(){return this._flipV$1},set_flipV:function(e){return this._flipV$1!==e&&(this._flipV$1=e,this.object3d!=null&&(this.object3d.flipV=this._flipV$1,this.object3d._reload()),this.version++),e},get_flipHandedness:function(){return this._flipHandedness$1},set_flipHandedness:function(e){return this._flipHandedness$1!==e&&(this._flipHandedness$1=e,this.object3d!=null&&(this.object3d.flipHandedness=this._flipHandedness$1,this.object3d._reload()),this.version++),e},get_smooth:function(){return this._smooth$1},set_smooth:function(e){return this._smooth$1!==e&&(this._smooth$1=e,this.object3d!=null&&(this.object3d.smooth=this._smooth$1,this.object3d._reload()),this.version++),e},get_twoSidedGeometry:function(){return this._twoSidedGeometry$1},set_twoSidedGeometry:function(e){return this._twoSidedGeometry$1!==e&&(this._twoSidedGeometry$1=e,this.version++),e},get_heading:function(){return this._heading$1},set_heading:function(e){return this._heading$1!==e&&(this.version++,this._heading$1=e),e},get_pitch:function(){return this._pitch$1},set_pitch:function(e){return this._pitch$1!==e&&(this.version++,this._pitch$1=e),e},get_roll:function(){return this._roll$1},set_roll:function(e){return this._roll$1!==e&&(this.version++,this._roll$1=e),e},get_scale:function(){return this._scale$1},set_scale:function(e){return this._scale$1!==e&&(this.version++,this._scale$1=e),e},get_translate:function(){return this._translate$1},set_translate:function(e){return this._translate$1!==e&&(this.version++,this._translate$1=e),e},get_lightID:function(){return this._lightID$1},set_lightID:function(e){return this._lightID$1=e,e},cleanUp:function(){this._dirty$1=!0},colorChanged:function(){this.object3d!=null&&(this.object3d.color=this.get_color())},writeLayerProperties:function(e){e._writeAttributeString("FlipV",this.get_flipV().toString()),e._writeAttributeString("FlipHandedness",this.get_flipHandedness().toString()),e._writeAttributeString("Smooth",this.get_smooth().toString()),e._writeAttributeString("TwoSidedGeometry",this.get_twoSidedGeometry().toString()),e._writeAttributeString("Heading",this.get_heading().toString()),e._writeAttributeString("Pitch",this.get_pitch().toString()),e._writeAttributeString("Roll",this.get_roll().toString()),e._writeAttributeString("Scale",this.get_scale().toString()),e._writeAttributeString("Translate",this.get_translate().toString()),e._writeAttributeString("LightID",this.get_lightID().toString()),e._writeAttributeString("Obj",this.objType.toString())},getParams:function(){var e=new Array(14);return e[0]=this._heading$1,e[1]=this._pitch$1,e[2]=this._roll$1,e[3]=this._scale$1.x,e[4]=this._scale$1.y,e[5]=this._scale$1.z,e[6]=this._translate$1.x,e[7]=this._translate$1.y,e[8]=this._translate$1.z,e[9]=this.get_color().r/255,e[10]=this.get_color().g/255,e[11]=this.get_color().b/255,e[12]=this.get_color().a/255,e[13]=this.get_opacity(),e},getParamNames:function(){return["Heading","Pitch","Roll","Scale.X","Scale.Y","Scale.Z","Translate.X","Translate.Y","Translate.Z","Colors.Red","Colors.Green","Colors.Blue","Colors.Alpha","Opacity"]},setParams:function(e){if(e.length===14){this._heading$1=e[0],this._pitch$1=e[1],this._roll$1=e[2],this._scale$1.x=e[3],this._scale$1.y=e[4],this._scale$1.z=e[5],this._translate$1.x=e[6],this._translate$1.y=e[7],this._translate$1.z=e[8],this.set_opacity(e[13]);var t=G.fromArgb(i.truncate(e[12]*255),i.truncate(e[9]*255),i.truncate(e[10]*255),i.truncate(e[11]*255));this.set_color(t)}},add_propertiesChanged:function(e){this.__propertiesChanged$1=i.bindAdd(this.__propertiesChanged$1,e)},remove_propertiesChanged:function(e){this.__propertiesChanged$1=i.bindSub(this.__propertiesChanged$1,e)},fireChanged:function(){this.__propertiesChanged$1!=null&&this.__propertiesChanged$1(this,new i.EventArgs)},getEditUI:function(){return i.safeCast(this,ue)},initializeFromXml:function(e){this.set_flipV(i.boolean(e.attributes.getNamedItem("FlipV").nodeValue)),e.attributes.getNamedItem("FlipHandedness")!=null?this.set_flipHandedness(i.boolean(e.attributes.getNamedItem("FlipHandedness").nodeValue)):this.set_flipHandedness(!1),e.attributes.getNamedItem("Smooth")!=null?this.set_smooth(i.boolean(e.attributes.getNamedItem("Smooth").nodeValue)):this.set_smooth(!0),e.attributes.getNamedItem("TwoSidedGeometry")!=null?this.set_twoSidedGeometry(i.boolean(e.attributes.getNamedItem("TwoSidedGeometry").nodeValue)):this.set_twoSidedGeometry(!1),e.attributes.getNamedItem("Obj")!=null?this.objType=i.boolean(e.attributes.getNamedItem("Obj").nodeValue):this.objType=!1,this.set_heading(parseFloat(e.attributes.getNamedItem("Heading").nodeValue)),this.set_pitch(parseFloat(e.attributes.getNamedItem("Pitch").nodeValue)),this.set_roll(parseFloat(e.attributes.getNamedItem("Roll").nodeValue)),this.set_scale(I.parse(e.attributes.getNamedItem("Scale").nodeValue)),this.set_translate(I.parse(e.attributes.getNamedItem("Translate").nodeValue)),e.attributes.getNamedItem("LightID")!=null&&this.set_lightID(parseInt(e.attributes.getNamedItem("LightID").nodeValue))},draw:function(e,t,r){var n=e.get_world(),a=Z.multiplyMatrix(Z.multiplyMatrix(Z._rotationZ(-this._roll$1/180*Math.PI),Z._rotationX(-this._pitch$1/180*Math.PI)),Z._rotationY(this._heading$1/180*Math.PI));return e.set_world(Z.multiplyMatrix(Z.multiplyMatrix(Z.multiplyMatrix(a,Z._scaling(this._scale$1.x,this._scale$1.y,this._scale$1.z)),Z.translation(this._translate$1)),n)),e.set_twoSidedLighting(this.get_twoSidedGeometry()),P.drawPointPlanet(e,new I,1,Te.get_red(),!1),this._lightID$1>0||this.object3d!=null&&(this.object3d.color=this.get_color(),this.object3d.render(e,t*this.get_opacity())),e.set_twoSidedLighting(!1),e.set_world(n),!0},addFilesToCabinet:function(e){},loadData:function(e,t){i.endsWith(t.toLowerCase(),".obj")&&(this.objType=!0),this._lightID$1||(this.objType?this.object3d=new ur(e,i.replaceString(t,".txt",".obj"),this.get_flipV(),this._flipHandedness$1,!0,this.get_color()):this.object3d=new ur(e,i.replaceString(t,".txt",".3ds"),this.get_flipV(),this._flipHandedness$1,!0,this.get_color()))},pointToView:function(e){var t=q.singleton.renderContext.height,r=q.singleton.renderContext.width,n=q.singleton.renderContext.width/q.singleton.renderContext.height*1116,a=e.x/r*n-(n-1920)/2,l=e.y/t*1116;return xe.create(a,l)},render:function(e){this._showEditUi$1=!0},preRender:function(e){this._showEditUi$1=!0},mouseDown:function(e,t){var r=this.pointToView(xe.create(t.offsetX,t.offsetY));this._pntDown$1=r;var n=r;if(t.shiftKey){if(xe.subtract(n,this._xHandle$1).get_length()<this._hitDist$1)return this._dragMode$1=10,this._valueOnDown$1=this._scale$1.x,!0;if(xe.subtract(n,this._yHandle$1).get_length()<this._hitDist$1)return this._dragMode$1=10,this._valueOnDown$1=this._scale$1.y,!0;if(xe.subtract(n,this._zHandle$1).get_length()<this._hitDist$1)return this._dragMode$1=10,this._valueOnDown$1=this._scale$1.z,!0}else{if(xe.subtract(n,this._xHandle$1).get_length()<this._hitDist$1)return this._dragMode$1=1,this._valueOnDown$1=this._translate$1.x,!0;if(xe.subtract(n,this._yHandle$1).get_length()<this._hitDist$1)return this._dragMode$1=2,this._valueOnDown$1=this._translate$1.y,!0;if(xe.subtract(n,this._zHandle$1).get_length()<this._hitDist$1)return this._dragMode$1=3,this._valueOnDown$1=this._translate$1.z,!0}for(var a=0;a<this._hprHandles$1.length;a++)if(xe.subtract(n,this._hprHandles$1[a]).get_length()<this._hitDist$1)switch(a){case 0:return this._dragMode$1=4,this._valueOnDown$1=this._heading$1,this._valueOnDown2$1=this._pitch$1,!0;case 1:return this._dragMode$1=7,this._valueOnDown$1=this._heading$1,this._valueOnDown2$1=this._pitch$1,!0;case 2:return this._dragMode$1=5,this._valueOnDown$1=this._pitch$1,this._valueOnDown2$1=this._roll$1,!0;case 3:return this._dragMode$1=8,this._valueOnDown$1=this._pitch$1,this._valueOnDown2$1=this._roll$1,!0;case 4:return this._dragMode$1=6,this._valueOnDown$1=this._roll$1,this._valueOnDown2$1=this._heading$1,!0;case 5:return this._dragMode$1=9,this._valueOnDown$1=this._roll$1,this._valueOnDown2$1=this._heading$1,!0}return!1},mouseUp:function(e,t){return this._dragMode$1?(this._dragMode$1=0,this._lockPreferedAxis$1=!1,!0):!1},mouseMove:function(e,t){var r=this.pointToView(xe.create(t.offsetX,t.offsetY));if(this._dragMode$1){var n=0,a=r.x-this._pntDown$1.x,l=-(r.y-this._pntDown$1.y);switch(this._lockPreferedAxis$1?this._preferY$1?(n=l,this._preferY$1=!0,Ei.set_current(vi.get_sizeNS())):(n=a,this._preferY$1=!1,Ei.set_current(vi.get_sizeWE())):(Math.abs(a)>Math.abs(l)?(n=a,this._preferY$1=!1):(n=l,this._preferY$1=!0),n>5&&(this._lockPreferedAxis$1=!0)),this._dragMode$1){case 0:break;case 1:this._translate$1.x=this._valueOnDown$1+12*this._uiScale$1*(n/q.singleton.renderContext.width);break;case 2:this._translate$1.y=this._valueOnDown$1+12*this._uiScale$1*(n/q.singleton.renderContext.width);break;case 3:this._translate$1.z=this._valueOnDown$1+12*this._uiScale$1*(n/q.singleton.renderContext.width);break;case 4:this._heading$1=this._valueOnDown$1-a/4,this._pitch$1=this._valueOnDown2$1+l/4;break;case 5:this._pitch$1=this._valueOnDown$1+l/4,this._roll$1=this._valueOnDown2$1-a/4;break;case 6:this._roll$1=this._valueOnDown$1+l/4,this._heading$1=this._valueOnDown2$1-a/4;break;case 7:this._heading$1=this._valueOnDown$1-a/4,this._pitch$1=this._valueOnDown2$1-l/4;break;case 8:this._pitch$1=this._valueOnDown$1+l/4,this._roll$1=this._valueOnDown2$1+a/4;break;case 9:this._roll$1=this._valueOnDown$1-l/4,this._heading$1=this._valueOnDown2$1-a/4;break;case 10:this._scale$1.x=this._scale$1.y=this._scale$1.z=this._valueOnDown$1*Math.pow(2,n/100);break}return this.fireChanged(),!0}else{var f=r;if(xe.subtract(f,this._xHandle$1).get_length()<this._hitDist$1||xe.subtract(f,this._yHandle$1).get_length()<this._hitDist$1||xe.subtract(f,this._zHandle$1).get_length()<this._hitDist$1)return Ei.set_current(vi.get_sizeAll()),!0;for(var c=0;c<this._hprHandles$1.length;c++)if(xe.subtract(f,this._hprHandles$1[c]).get_length()<this._hitDist$1)return Ei.set_current(vi.get_sizeAll()),!0}return!1},mouseClick:function(e,t){return!1},click:function(e,t){return!1},mouseDoubleClick:function(e,t){return!1},keyDown:function(e,t){return!1},keyUp:function(e,t){return!1},hover:function(e){return!1}};function Bo(e){this._layer$1=null,this._opened$1=!0,this._callbacks$1=null,Pn.call(this),this._layer$1=e}var Cf={setUICallbacks:function(e){this._callbacks$1=e},get_hasTreeViewNodes:function(){return!0},getTreeNodes:function(){var e=[];return this._layer$1.object3d.objects.length>0&&this._layer$1.object3d.objects[0].children!=null&&this._loadTree$1(e,this._layer$1.object3d.objects[0].children),e},_loadTree$1:function(e,t){for(var r=i.enumerate(t);r.moveNext();){var n=r.current,a=new Ja;a.set_name(n.name),a.set_tag(n),a.set_checked(n.enabled),a.add_nodeSelected(i.bind("_node_NodeSelected$1",this)),a.add_nodeChecked(i.bind("_node_NodeChecked$1",this)),e.push(a),this._loadTree$1(a.get_nodes(),n.children)}},_node_NodeChecked$1:function(e,t){var r=e.get_tag();r!=null&&(r.enabled=t)},_node_NodeSelected$1:function(e){if(this._callbacks$1!=null){var t=e.get_tag(),r={};r.Name=t.name,r["Pivot.X"]=t.pivotPoint.x.toString(),r["Pivot.Y"]=t.pivotPoint.y.toString(),r["Pivot.Z"]=t.pivotPoint.z.toString(),this._callbacks$1.showRowData(r)}},getNodeContextMenu:function(e){return Pn.prototype.getNodeContextMenu.call(this,e)}};function Ys(){this._frames$1=[],this._primaryUI$1=null,this._pointOpacity$1=1,this._pointColor$1=Te.get_yellow(),this._filename$1="",this._dataFile$1="",ri.call(this)}var Sf={get_frames:function(){return this._frames$1},set_frames:function(e){return this._frames$1=e,e},getPrimaryUI:function(){return this._primaryUI$1==null&&(this._primaryUI$1=new zo(this)),this._primaryUI$1},cleanUp:function(){for(var e=i.enumerate(this._frames$1);e.moveNext();){var t=e.current;t.get_orbit()!=null&&(t.get_orbit().cleanUp(),t.set_orbit(null))}},writeLayerProperties:function(e){e._writeAttributeString("PointOpacity",this.get_pointOpacity().toString()),e._writeAttributeString("PointColor",this._pointColor$1.save())},get_pointOpacity:function(){return this._pointOpacity$1},set_pointOpacity:function(e){return this._pointOpacity$1!==e&&(this.version++,this._pointOpacity$1=e),e},get_pointColor:function(){return this._pointColor$1},set_pointColor:function(e){return this._pointColor$1!==e&&(this.version++,this._pointColor$1=e),e},getParams:function(){var e=new Array(6);return e[0]=this._pointOpacity$1,e[1]=this.get_color().r/255,e[2]=this.get_color().g/255,e[3]=this.get_color().b/255,e[4]=this.get_color().a/255,e[5]=this.get_opacity(),e},getParamNames:function(){return["PointOpacity","Color.Red","Color.Green","Color.Blue","Color.Alpha","Opacity"]},setParams:function(e){if(e.length===6){this._pointOpacity$1=e[0],this.set_opacity(e[5]);var t=G.fromArgb(i.truncate(e[4]*255),i.truncate(e[1]*255),i.truncate(e[2]*255),i.truncate(e[3]*255));this.set_color(t)}},initializeFromXml:function(e){this.set_pointOpacity(parseFloat(e.attributes.getNamedItem("PointOpacity").nodeValue)),this.set_pointColor(G.load(e.attributes.getNamedItem("PointColor").nodeValue))},draw:function(e,t,r){var n=e.get_world();e.set_world(e.get_worldBaseNonRotating());for(var a=i.enumerate(this._frames$1);a.moveNext();){var l=a.current;l.showOrbitPath&&(l.get_orbit()==null&&l.set_orbit(new da(l.get_elements(),360,this.get_color(),1,e.get_nominalRadius())),l.get_orbit().draw3D(e,t*this.get_opacity(),new I))}return e.set_world(n),!0},addFilesToCabinet:function(e){this._filename$1=e.tempDirectory+i.format("{0}\\{1}.txt",e.get_packageID(),this.id.toString()),this._filename$1.substring(0,this._filename$1.lastIndexOf("\\"));var t=new Blob([this._dataFile$1]);e.addFile(this._filename$1,t),ri.prototype.addFilesToCabinet.call(this,e)},loadData:function(e,t){var r=this,n=e.getFileBlob(t),a=new FileReader;a.onloadend=function(l){r._dataFile$1=i.safeCast(a.result,String),r.loadString(r._dataFile$1)},a.readAsText(n)},loadString:function(e){var t=e.split(`
`);this._frames$1.length=0;for(var r=0;r<t.length;r+=2){var n=r,a=r+1;if(t[r].length>0){var l=new ji;if(t[r].substring(0,1)!=="1")n++,a++,l.name=i.trim(t[r]),r++;else if(t[r].substring(0,1)==="1")l.name=t[r].substring(2,5);else{r-=2;continue}l.reference=18,l.oblateness=0,l.showOrbitPath=!0,l.showAsPoint=!0,l.referenceFrameType=1,l.scale=1,l.semiMajorAxisUnits=1,l.meanRadius=10,l.oblateness=0,l.fromTLE(t[n],t[a],3986004418e5),this._frames$1.push(l)}else r-=1}}};function zo(e){this._layer$1=null,this._opened$1=!0,this._callbacks$1=null,Pn.call(this),this._layer$1=e}var Mf={setUICallbacks:function(e){this._callbacks$1=e},get_hasTreeViewNodes:function(){return!0},getTreeNodes:function(){for(var e=[],t=i.enumerate(this._layer$1.get_frames());t.moveNext();){var r=t.current,n=new Ja;n.set_name(r.name),n.set_tag(r),n.set_checked(r.showOrbitPath),n.add_nodeSelected(i.bind("_node_NodeSelected$1",this)),n.add_nodeChecked(i.bind("_node_NodeChecked$1",this)),e.push(n)}return e},_node_NodeChecked$1:function(e,t){var r=e.get_tag();r!=null&&(r.showOrbitPath=t)},_node_NodeSelected$1:function(e){if(this._callbacks$1!=null){var t=e.get_tag(),r={};r.Name=t.name,r["SemiMajor Axis"]=t.semiMajorAxis.toString(),r["SMA Units"]=t.semiMajorAxisUnits.toString(),r.Inclination=t.inclination.toString(),r.Eccentricity=t.eccentricity.toString(),r["Long of Asc. Node"]=t.longitudeOfAscendingNode.toString(),r["Argument Of Periapsis"]=t.argumentOfPeriapsis.toString(),r.Epoch=t.epoch.toString(),r["Mean Daily Motion"]=t.meanDailyMotion.toString(),r["Mean Anomoly at Epoch"]=t.meanAnomolyAtEpoch.toString(),this._callbacks$1.showRowData(r)}},getNodeContextMenu:function(e){return Pn.prototype.getNodeContextMenu.call(this,e)}};function zi(){this._dataDirty$1=!1,this._lastNormalizeSizeColumnIndex$1=-1,this._lastDynamicColorColumnIndex$1=-1,this._table_backcompat$1=null,this._barChartBitmask$1=0,this._barScaleFactor$1=20,this._meanRadius$1=6371e3,this._table$1=new Pa,this.isLongIndex=!1,this.shapeVertexCount=0,this.lines=!1,this.latColumn=-1,this.fixedSize=1,this.decay=16,this.timeSeries=!1,this._dynamicData$1=!1,this._autoUpdate$1=!1,this._dataSourceUrl$1="",this._beginRange$1=new Date("1/1/2100"),this._endRange$1=new Date("01/01/1800"),this.markerDomainValues={},this.colorDomainValues={},this._coordinatesType$1=0,this.lngColumn=-1,this.geometryColumn=-1,this._xAxisColumn$1=-1,this._yAxisColumn$1=-1,this._zAxisColumn$1=-1,this._xAxisReverse$1=!1,this._yAxisReverse$1=!1,this._zAxisReverse$1=!1,this._altType$1=3,this._markerMix$1=0,this._raUnits$1=0,this.colorMap=3,this.colorMapperName="Greys",this._dynamicColorColumnName$1="2efc32e3-b9d9-47ff-8036-8cc344c585bd",this.dynamicColor=!1,this.normalizeColorMap=!1,this.normalizeColorMapMin=0,this.normalizeColorMapMax=1,this._markerColumn$1=-1,this.colorMapColumn=-1,this._plotType$1=0,this._markerIndex$1=0,this._showFarSide$1=!1,this._markerScale$1=1,this._altUnit$1=1,this._cartesianScale$1=1,this._cartesianCustomScale$1=1,this.altColumn=-1,this.startDateColumn=-1,this.endDateColumn=-1,this.sizeColumn=-1,this._normalizeSizeColumnName$1="dfe78b4c-f972-4796-b04f-68c5efd4ecb0",this.normalizeSize=!1,this.normalizeSizeClip=!1,this.normalizeSizeMin=0,this.normalizeSizeMax=1,this.nameColumn=0,this._hyperlinkFormat$1="",this._hyperlinkColumn$1=-1,this.scaleFactor=1,this.pointScaleType=1,this.positions=[],this.bufferIsFlat=!1,this.baseDate=new Date(2010,0,1,12,0,0),this.dirty=!0,this.lastVersion=0,ri.call(this)}zi._getDatafromFeed$1=function(e){return""},zi._executeQuery$1=function(e){return""},zi.parseDate=function(e){var t=i.now();try{t=new Date(e)}catch{try{return zi.execlToDateTime(parseFloat(e))}catch{}}return t},zi.execlToDateTime=function(e){e>59&&(e-=1),e>73e4&&(e=73e4);var t=new Date(1899,12,31);return new Date(t.getDate()+i.truncate(e*24*60*60*1e3))},zi.get__circleTexture$1=function(){if(zi._circleTexture$1==null){var e=Nt.singleton.engineAssetUrl("circle.png");zi._circleTexture$1=P.loadPlanetTexture(e)}return zi._circleTexture$1};var Tf={getTypeName:function(){return"TerraViewer.SpreadSheetLayer"},get_header:function(){return this._table$1.header},canCopyToClipboard:function(){return!0},copyToClipboard:function(){},dynamicUpdate:function(){var e=zi._getDatafromFeed$1(this.get_dataSourceUrl());return e!=null?(this.updateData(e,!1,!0,!0),this.guessHeaderAssignments(),!0):!1},updateData:function(e,t,r,n){return this.loadFromString(i.safeCast(e,String),!0,t,r,n),this.computeDateDomainRange(-1,-1),this._dataDirty$1=!0,this.dirty=!0,!0},loadData:function(e,t){var r=this;this._table$1=new Pa;var n=e.getFileBlob(t);this.getStringFromGzipBlob(n,function(a){r._table$1.loadFromString(a,!1,!0,!0),r._table$1.header.indexOf(r._normalizeSizeColumnName$1)>-1&&r._table$1.removeColumn(r._normalizeSizeColumnName$1),r.computeDateDomainRange(-1,-1),r.get_dynamicData()&&r.get_autoUpdate()&&r.dynamicUpdate(),r._dataDirty$1=!0,r.dirty=!0})},addFilesToCabinet:function(e){this._fileName$1=e.tempDirectory+i.format("{0}\\{1}.txt",e.get_packageID(),this.id.toString()),this._fileName$1.substring(0,this._fileName$1.lastIndexOf("\\"));var t="";this._table_backcompat$1==null?t=this._table$1.save():t=this._table_backcompat$1.save();var r=new Blob([t]);e.addFile(this._fileName$1,r),ri.prototype.addFilesToCabinet.call(this,e)},_prepareBackCompatTable$1:function(){if((this.sizeColumn===-1||!this.get_normalizeSize())&&(this.colorMapColumn===-1||!this.get_dynamicColor())){this._lastNormalizeSizeColumnIndex$1=-1,this._lastDynamicColorColumnIndex$1=-1;return}if(this._table_backcompat$1=this._table$1.clone(),this.sizeColumn>-1&&this.get_normalizeSize()){for(var e=[],t=i.enumerate(this._table_backcompat$1.rows);t.moveNext();){var r=t.current;e.push(this.normalizePointSize(parseFloat(r[this.sizeColumn])).toString())}this._table_backcompat$1.addColumn(this._normalizeSizeColumnName$1,e),this._lastNormalizeSizeColumnIndex$1=this._table_backcompat$1.header.length-1}else this._lastNormalizeSizeColumnIndex$1=-1;if(this.colorMapColumn>-1&&this.get_dynamicColor()){for(var n=[],a=i.enumerate(this._table_backcompat$1.rows);a.moveNext();){var r=a.current;n.push(this.get_colorMapper().findClosestColor(this.normalizeColorMapValue(parseFloat(r[this.get_colorMapColumn()]))).toSimpleHex())}this._table_backcompat$1.addColumn(this._dynamicColorColumnName$1,n),this._lastDynamicColorColumnIndex$1=this._table_backcompat$1.header.length-1}else this._lastDynamicColorColumnIndex$1=-1},guessHeaderAssignments:function(){for(var e=0,t=i.enumerate(this._table$1.header);t.moveNext();){var r=t.current;this._guessHeaderAssignment$1(r,e++)}this._table$1.header.length>0&&(this.nameColumn=0)},guessHeaderAssignmentsFromVoTable:function(e){var t=e.getDecColumn();t!=null&&(this.latColumn=t.index,this.astronomical=!0);var r=e.getRAColumn();r!=null&&(this.lngColumn=r.index,this.astronomical=!0,this.pointScaleType=4);var n=e.getMagColumn();n!=null&&(this.sizeColumn=n.index);for(var a=0,l=i.enumerate(e.column);l.moveNext();){var f=l.current;this._guessHeaderAssignment$1(f.name,a++)}this._table$1.header.length>0&&(this.nameColumn=0)},_guessHeaderAssignment$1:function(e,t){e=e.toLowerCase(),e.indexOf("lat")>-1&&this.latColumn===-1&&(this.latColumn=t),(e.indexOf("lon")>-1||e.indexOf("lng")>-1)&&this.lngColumn===-1&&(this.lngColumn=t),e.indexOf("dec")>-1&&this.latColumn===-1&&(this.latColumn=t,this.astronomical=!0),(e.indexOf("ra")>-1||e.indexOf("ascen")>-1)&&this.lngColumn===-1&&(this.lngColumn=t,this.astronomical=!0,this.pointScaleType=4),(e.indexOf("mag")>-1||e.indexOf("size")>-1)&&this.sizeColumn===-1&&(this.sizeColumn=t),(e.indexOf("date")>-1||e.indexOf("time")>-1||e.indexOf("dt")>-1||e.indexOf("tm")>-1)&&(e.indexOf("end")>-1&&this.endDateColumn===-1?this.endDateColumn=t:this.startDateColumn===-1&&(this.startDateColumn=t)),(e.indexOf("altitude")>-1||e.indexOf("alt")>-1)&&this.altColumn===-1&&(this.altColumn=t,this.set_altType(1),this.set_altUnit(1)),e.indexOf("depth")>-1&&this.altColumn===-1&&(this.altColumn=t,this.set_altType(0),this.set_altUnit(5)),i.startsWith(e,"x")&&this.get_xAxisColumn()===-1&&this.set_xAxisColumn(t),i.startsWith(e,"y")&&this.get_yAxisColumn()===-1&&this.set_yAxisColumn(t),i.startsWith(e,"z")&&this.get_zAxisColumn()===-1&&this.set_zAxisColumn(t),e.indexOf("color")>-1&&this.get_colorMapColumn()===-1&&this.set_colorMapColumn(t),(e.indexOf("geometry")>-1||e.indexOf("geography")>-1)&&this.geometryColumn===-1&&(this.geometryColumn=t)},computeDateDomainRange:function(e,t){e===-1&&(e=this.startDateColumn),t===-1&&(t=this.endDateColumn),t===-1&&(t=e),this.set_beginRange(new Date("12/31/2100")),this.set_endRange(new Date("12/31/1890"));for(var r=i.enumerate(this._table$1.rows);r.moveNext();){var n=r.current;try{if(e>-1){var a=!0,l=new Date("12/31/2100");try{l=new Date(n[e]),l<this.get_beginRange()&&this.set_beginRange(l)}catch{}try{var f=new Date("12/31/1890");t>-1&&(f=new Date(n[t]),a&&f>this.get_endRange()&&this.set_endRange(f))}catch{}}}catch{}}},checkState:function(){},getMaxValue:function(e){var t=0;this._table$1.lock();for(var r=i.enumerate(this._table$1.rows);r.moveNext();){var n=r.current;try{if(e>-1){var a=!0;try{var l=parseFloat(n[e]);a&&l>t&&(t=l)}catch{}}}catch{}}return this._table$1.unlock(),t},getDomainValues:function(e){var t=[];this._table$1.lock();for(var r=i.enumerate(this._table$1.rows);r.moveNext();){var n=r.current;try{e>-1&&(t.indexOf(n[e])>=0||t.push(n[e]))}catch{}}return t.sort(),this._table$1.unlock(),t},get_barChartBitmask:function(){return this._barChartBitmask$1},set_barChartBitmask:function(e){return this._barChartBitmask$1=e,e},_isPointInFrustum$1:function(e,t){for(var r=new Ka(e.x,e.y,e.z,1),n=0;n<6;n++)if(t[n].dot(r)<0)return!1;return!0},getTableDataInView:function(){for(var e="",t=!0,r=i.enumerate(this.get_header());r.moveNext();){var n=r.current;t?t=!1:e+="	",e+=n}e+=`\r
`;for(var a=i.enumerate(this.get__table().rows);a.moveNext();){var l=a.current,f=parseFloat(l[this.get_lngColumn()]),c=parseFloat(l[this.get_latColumn()]),d=V.geoTo3dDouble(c,f);if(this._isPointInFrustum$1(d,q.singleton.renderContext.get_frustum())){t=!0;for(var m=i.enumerate(l);m.moveNext();){var n=m.current;t?t=!1:e+="	",e+=n}e+=`\r
`}}return e},prepVertexBuffer:function(e,t){this._table$1.lock(),this.lineList!=null&&this.lineList.clear(),this.lineList2d!=null&&this.lineList2d.clear(),this.triangleList!=null&&this.triangleList.clear(),this.pointList!=null&&this.pointList.clear(),this.triangleList2d!=null&&this.triangleList2d.clear(),this.lineList==null&&(this.lineList=new ca),this.pointList==null&&(this.pointList=new qr(e)),this.lineList.timeSeries=this.timeSeries,this.lineList2d==null&&(this.lineList2d=new ca,this.lineList2d.set_depthBuffered(!1)),this.lineList.timeSeries=this.timeSeries,this.triangleList==null&&(this.triangleList=new In),this.triangleList2d==null&&(this.triangleList2d=new In,this.triangleList2d.depthBuffered=!1),this.positions.length=0;var r=0,n=this.get_color(),a=V.meanObliquityOfEcliptic(K.get_jNow())/180*Math.PI,l=k.get_allMaps()[this.get_referenceFrame()].frame.meanRadius;l&&(this._meanRadius$1=l);for(var f=new I,c=2e-4,d=Te.get_white(),m=0,v=0,C=i.enumerate(this._table$1.rows);C.moveNext();){var T=C.current;try{if(this.geometryColumn>-1||!this.get_coordinatesType()&&this.lngColumn>-1&&this.latColumn>-1||this.get_coordinatesType()===1&&this.get_xAxisColumn()>-1&&this.get_yAxisColumn()>-1){var A=0,$=0,N=0,F=1,z=0,Y=0,W=this.getScaleFactor(this.get_altUnit(),1);if(this.altColumn===-1||this.get_altType()===3||this.bufferIsFlat)F=1,(this.astronomical&!this.bufferIsFlat)===1&&(F=63239.6717*100);else{this.get_altType()||(W=-W),F=0;try{F=parseFloat(T[this.altColumn])}catch{}this.astronomical?(W=W/(1e3*149598e3),Y=F*W/206264.806,z=W*F,F=W*F):this.get_altType()===2?(z=W*F,F=W*F/this._meanRadius$1):(z=W*F,F=1+W*F/this._meanRadius$1)}if(!this.get_coordinatesType()&&this.lngColumn>-1&&this.latColumn>-1){A=parseFloat(T[this.lngColumn]),$=parseFloat(T[this.latColumn]),this.astronomical?(this.get_raUnits()||(A*=15),this.bufferIsFlat):A+=180;var ee=V.geoTo3dRad($,A,F);this.astronomical&&!this.bufferIsFlat&&ee.rotateX(a),f=ee,this.positions.push(f)}else if(this.get_coordinatesType()===1){var ne=this.getScaleFactor(this.get_cartesianScale(),this.get_cartesianCustomScale());this.astronomical?ne/=1e3*149598e3:ne/=this._meanRadius$1,this.get_zAxisColumn()>-1&&(N=parseFloat(T[this.get_zAxisColumn()])),A=parseFloat(T[this.get_xAxisColumn()]),$=parseFloat(T[this.get_yAxisColumn()]),this.get_xAxisReverse()&&(A=-A),this.get_yAxisReverse()&&($=-$),this.get_zAxisReverse()&&(N=-N),f=I.create(A*ne,N*ne,$*ne),this.positions.push(f)}switch(this.get_colorMap()){case 0:d=n;break;case 3:this.get_colorMapColumn()>-1?this.get_dynamicColor()?d=this.get_colorMapper().findClosestColor(this.normalizeColorMapValue(parseFloat(T[this.get_colorMapColumn()]))):d=this._parseColor$1(T[this.get_colorMapColumn()],n):d=n;break;default:break}if(d==null&&(d=Te.get_transparent()),this.sizeColumn>-1)switch(this.pointScaleType){case 0:c=parseFloat(T[this.sizeColumn]),c=this.normalizePointSize(c);break;case 2:c=parseFloat(T[this.sizeColumn]),c=Math.log(c);break;case 1:try{c=parseFloat(T[this.sizeColumn]),c=this.normalizePointSize(c),c=Math.pow(2,c)}catch{c=0}break;case 4:var ae=0;try{ae=parseFloat(T[this.sizeColumn]),this.bufferIsFlat?c=40/Math.pow(1.6,ae):(ae=ae-5*(ye.logN(Y,10)-1),c=12e7/Math.pow(1.6,ae))}catch{c=0}break;case 3:c=1;break;default:break}else c=.2;if(this.get_plotType()===1&&(c=1),this.astronomical&!this.bufferIsFlat,this.startDateColumn>-1){var de=new Date(T[this.startDateColumn]);m=K.utcToJulian(de)-K.utcToJulian(this.baseDate),this.endDateColumn>-1?(de=new Date(T[this.endDateColumn]),v=K.utcToJulian(de)-K.utcToJulian(this.baseDate)):v=m}this.pointList.addPoint(f,d,new ii(m,v),c),this.geometryColumn>-1&&this._parseGeometry$1(T[this.geometryColumn],d,d,z,new ii(m,v)),r++}}catch{}this.lines=!1}return this._table$1.unlock(),this._dataDirty$1=!1,this.dirty=!1,!1},_parseGeometry$1:function(e,t,r,n,a){e=i.trim(e).toLowerCase();var l=e.indexOf("(");if(!(l<0)&&i.endsWith(e,")")){var f=i.trim(e.substring(0,l)),c=e.substr(l),d=f.split(" "),m=null,v=null;if(d.length>0)for(var C=i.enumerate(d);C.moveNext();){var T=C.current;i.emptyString(m)?m=T:i.emptyString(v)&&(v=T)}switch(m){case"multipolygon":case"polygon":this._parsePolygon$1(c,v,t,r,n,a);break;case"multilinestring":this._parseLineString$1(c,v,t,n,!1,a);break;case"linestring":this._parseLineString$1(c,v,t,n,!0,a);break;case"geometrycollection":c=c.substring(1,c.length-2);for(var A=bi.splitString(c,","),$=i.enumerate(A);$.moveNext();){var N=$.current;this._parseGeometry$1(N,t,r,n,a)}break}}},_parsePolygon$1:function(e,t,r,n,a,l){if(!(!i.startsWith(e,"(")&&i.endsWith(e,")"))){e=e.substring(1,e.length-2);for(var f=bi.splitString(e,","),c=i.enumerate(f);c.moveNext();){var d=c.current,m=new Ds;m.astronomical=this.astronomical,m.meanRadius=this._meanRadius$1,m.parseWkt(d,t,a,l),a?this._addPolygon$1(!1,m,1,n,r,!0,!0,l):this._addPolygonFlat$1(!1,m,1,n,r,!0,!0,l)}}},_parseLineString$1:function(e,t,r,n,a,l){if(!(!i.startsWith(e,"(")&&i.endsWith(e,")"))){a||(e=e.substring(1,e.length-2));for(var f=bi.splitString(e,","),c=i.enumerate(f);c.moveNext();){var d=c.current,m=new Ds;m.astronomical=this.astronomical,m.meanRadius=this._meanRadius$1,m.parseWkt(d,t,n,l),this._addPolygon$1(!1,m,1,Te.get_white(),r,!1,!1,l)}}},_splitShapes$1:function(e){for(var t=[],r=0;r<e.length;)e.substr(r,1);return t},_addPolygon$1:function(e,t,r,n,a,l,f,c){for(var d=[],m=[],v=0;v<t.pointList.length;v++)d.push(V.geoTo3dRad(t.pointList[v].lat,t.pointList[v].lng,1+t.pointList[v].alt/this._meanRadius$1)),m.push(V.geoTo3dRad(t.pointList[v].lat,t.pointList[v].lng,1));for(var v=0;v<t.pointList.length-1;v++)e||(l&&this.triangleList.addQuad(d[v],d[v+1],m[v],m[v+1],n,c),r>0&&(l?this.lineList.addLine(d[v],d[v+1],a,c):this.lineList2d.addLine(d[v],d[v+1],a,c),l&&(this.lineList.addLine(m[v],m[v+1],a,c),this.lineList.addLine(d[v],m[v],a,c),this.lineList.addLine(d[v+1],m[v+1],a,c))));if(f)for(var C=fa.tesselateSimplePoly(d),v=0;v<C.length;v+=3)this.triangleList.addTriangle(d[C[v]],d[C[v+1]],d[C[v+2]],n,c)},_addPolygonFlat$1:function(e,t,r,n,a,l,f,c){for(var d=[],m=0;m<t.pointList.length;m++)d.push(V.geoTo3dRad(t.pointList[m].lat,t.pointList[m].lng,1+t.pointList[m].alt/this._meanRadius$1));for(var m=0;m<t.pointList.length-1;m++)e||r>0&&this.lineList2d.addLine(d[m],d[m+1],a,c);if(f)for(var v=fa.tesselateSimplePoly(d),m=0;m<v.length;m+=3)this.triangleList2d.addSubdividedTriangles(d[v[m]],d[v[m+1]],d[v[m+2]],n,c,2)},_parseColor$1:function(e,t){return G.load(e)},getScaleFactor:function(e,t){var r=1;switch(e){case 1:r=1;break;case 2:r=1*.3048;break;case 3:r=1/12*.3048;break;case 4:r=5280*.3048;break;case 5:r=1e3;break;case 6:r=1e3*149598e3;break;case 7:r=1e3*149598e3*63239.6717;break;case 8:r=1e3*149598e3*206264.806;break;case 9:r=1e3*149598e3*206264.806*1e6;break;case 10:r=t;break}return r},get__table:function(){return this._table$1},set__table:function(e){return this._table$1=e,e},useHeadersFromVoTable:function(e){for(var t=i.enumerate(e.column);t.moveNext();){var r=t.current;this.get_header().push(r.name)}this.guessHeaderAssignmentsFromVoTable(e),e.getRAColumn()!=null&&e.getRAColumn().unit.toLowerCase()==="deg"&&this.set_raUnits(1)},loadFromString:function(e,t,r,n,a){if(t||(this._table$1=new Pa),this._table$1.lock(),this._table$1.loadFromString(e,t,n,a),!t&&(this.guessHeaderAssignments(),this.astronomical&&this.lngColumn>-1)){var l=this.getMaxValue(this.lngColumn);l>24&&this.set_raUnits(1)}r&&this.purgeByTime(),this._table$1.unlock()},purgeByTime:function(){if(!(this.startDateColumn<0)){var e=this.startDateColumn;this.endDateColumn>-1&&(e=this.endDateColumn);var t=K.get_now(),r=i.truncate(this.decay)*24*60*60*1e3;t=new Date(t.getDate()-r);for(var n=this._table$1.rows.length,a=0;a<n;a++)try{var l=this._table$1.rows[a],f=new Date(l[e]);f<t&&(this._table$1.rows.splice(a,1),n--,a--)}catch{}}},cleanUp:function(){this.cleanUpBase(),this._table$1.lock(),ri.prototype.cleanUp.call(this),this._table$1.unlock(),this.dirty=!0},writeLayerProperties:function(e){e._writeAttributeString("TimeSeries",this.get_timeSeries().toString()),e._writeAttributeString("BeginRange",ye.xmlDate(this.get_beginRange())),e._writeAttributeString("EndRange",ye.xmlDate(this.get_endRange())),e._writeAttributeString("Decay",this.get_decay().toString()),e._writeAttributeString("CoordinatesType",gt.toXml("CoordinatesTypes",this.get_coordinatesType())),e._writeAttributeString("LatColumn",this.get_latColumn().toString()),e._writeAttributeString("LngColumn",this.get_lngColumn().toString()),e._writeAttributeString("GeometryColumn",this.get_geometryColumn().toString()),e._writeAttributeString("AltType",gt.toXml("AltTypes",this.get_altType())),e._writeAttributeString("MarkerMix",gt.toXml("MarkerMixes",this.get_markerMix())),e._writeAttributeString("ColorMap",gt.toXml("ColorMaps",this.get_colorMap())),e._writeAttributeString("MarkerColumn",this.get_markerColumn().toString()),e._writeAttributeString("PlotType",gt.toXml("PlotTypes",this.get_plotType())),e._writeAttributeString("MarkerIndex",this.get_markerIndex().toString()),e._writeAttributeString("MarkerScale",gt.toXml("MarkerScales",this.get_markerScale())),e._writeAttributeString("AltUnit",gt.toXml("AltUnits",this.get_altUnit())),e._writeAttributeString("AltColumn",this.get_altColumn().toString()),e._writeAttributeString("StartDateColumn",this.get_startDateColumn().toString()),e._writeAttributeString("EndDateColumn",this.get_endDateColumn().toString()),this._prepareBackCompatTable$1(),this._lastNormalizeSizeColumnIndex$1>-1?(e._writeAttributeString("SizeColumn",this._lastNormalizeSizeColumnIndex$1),e._writeAttributeString("NormalizeSizeColumn",this.sizeColumn.toString())):e._writeAttributeString("SizeColumn",this.get_sizeColumn().toString()),e._writeAttributeString("NormalizeSize",this.get_normalizeSize().toString()),e._writeAttributeString("NormalizeSizeClip",this.get_normalizeSizeClip().toString()),e._writeAttributeString("NormalizeSizeMin",this.get_normalizeSizeMin().toString()),e._writeAttributeString("NormalizeSizeMax",this.get_normalizeSizeMax().toString()),this._lastDynamicColorColumnIndex$1>-1?(e._writeAttributeString("ColorMapColumn",this._lastDynamicColorColumnIndex$1),e._writeAttributeString("DynamicColorColumn",this.get_colorMapColumn().toString())):e._writeAttributeString("ColorMapColumn",this.get_colorMapColumn().toString()),e._writeAttributeString("DynamicColor",this.get_dynamicColor().toString()),e._writeAttributeString("ColorMapperName",this.get_colorMapperName()),e._writeAttributeString("NormalizeColorMap",this.get_normalizeColorMap().toString()),e._writeAttributeString("NormalizeColorMapMin",this.get_normalizeColorMapMin().toString()),e._writeAttributeString("NormalizeColorMapMax",this.get_normalizeColorMapMax().toString()),e._writeAttributeString("HyperlinkFormat",this.get_hyperlinkFormat()),e._writeAttributeString("HyperlinkColumn",this.get_hyperlinkColumn().toString()),e._writeAttributeString("ScaleFactor",this.get_scaleFactor().toString()),e._writeAttributeString("PointScaleType",gt.toXml("PointScaleTypes",this.get_pointScaleType())),e._writeAttributeString("ShowFarSide",this.get_showFarSide().toString()),e._writeAttributeString("RaUnits",gt.toXml("RAUnits",this.get_raUnits())),e._writeAttributeString("HoverTextColumn",this.get_nameColumn().toString()),e._writeAttributeString("XAxisColumn",this.get_xAxisColumn().toString()),e._writeAttributeString("XAxisReverse",this.get_xAxisReverse().toString()),e._writeAttributeString("YAxisColumn",this.get_yAxisColumn().toString()),e._writeAttributeString("YAxisReverse",this.get_yAxisReverse().toString()),e._writeAttributeString("ZAxisColumn",this.get_zAxisColumn().toString()),e._writeAttributeString("ZAxisReverse",this.get_zAxisReverse().toString()),e._writeAttributeString("CartesianScale",gt.toXml("AltUnits",this.get_cartesianScale())),e._writeAttributeString("CartesianCustomScale",this.get_cartesianCustomScale().toString()),e._writeAttributeString("DynamicData",this.get_dynamicData().toString()),e._writeAttributeString("AutoUpdate",this.get_autoUpdate().toString()),e._writeAttributeString("DataSourceUrl",this.get_dataSourceUrl())},get_dynamicData:function(){return this._dynamicData$1},set_dynamicData:function(e){return this._dynamicData$1=e,e},get_autoUpdate:function(){return this._autoUpdate$1},set_autoUpdate:function(e){return this._autoUpdate$1=e,e},get_dataSourceUrl:function(){return this._dataSourceUrl$1},set_dataSourceUrl:function(e){return this._dataSourceUrl$1=e,e},get_timeSeries:function(){return this.timeSeries},set_timeSeries:function(e){return this.timeSeries!==e&&(this.version++,this.timeSeries=e),e},get_beginRange:function(){return this._beginRange$1},set_beginRange:function(e){return i.compareDates(this._beginRange$1,e)||(this.version++,this._beginRange$1=e),e},get_endRange:function(){return this._endRange$1},set_endRange:function(e){return i.compareDates(this._endRange$1,e)||(this.version++,this._endRange$1=e),e},initializeFromXml:function(e){this.set_timeSeries(i.boolean(e.attributes.getNamedItem("TimeSeries").nodeValue)),this.set_beginRange(new Date(e.attributes.getNamedItem("BeginRange").nodeValue)),this.set_endRange(new Date(e.attributes.getNamedItem("EndRange").nodeValue)),this.set_decay(parseFloat(e.attributes.getNamedItem("Decay").nodeValue)),this.set_coordinatesType(gt.parse("CoordinatesTypes",e.attributes.getNamedItem("CoordinatesType").nodeValue)),this.get_coordinatesType()<0&&this.set_coordinatesType(0),this.set_latColumn(parseInt(e.attributes.getNamedItem("LatColumn").nodeValue)),this.set_lngColumn(parseInt(e.attributes.getNamedItem("LngColumn").nodeValue)),e.attributes.getNamedItem("GeometryColumn")!=null&&this.set_geometryColumn(parseInt(e.attributes.getNamedItem("GeometryColumn").nodeValue)),this.set_altType(gt.parse("AltTypes",e.attributes.getNamedItem("AltType").nodeValue)),this.set_markerMix(0),this.set_colorMap(gt.parse("ColorMaps",e.attributes.getNamedItem("ColorMap").nodeValue)),this.set_markerColumn(parseInt(e.attributes.getNamedItem("MarkerColumn").nodeValue)),this.set_colorMapColumn(parseInt(e.attributes.getNamedItem("ColorMapColumn").nodeValue)),this.set_plotType(gt.parse("PlotTypes",e.attributes.getNamedItem("PlotType").nodeValue)),this.set_markerIndex(parseInt(e.attributes.getNamedItem("MarkerIndex").nodeValue)),this.set_markerScale(gt.parse("MarkerScales",e.attributes.getNamedItem("MarkerScale").nodeValue)),this.set_altUnit(gt.parse("AltUnits",e.attributes.getNamedItem("AltUnit").nodeValue)),this.set_altColumn(parseInt(e.attributes.getNamedItem("AltColumn").nodeValue)),this.set_startDateColumn(parseInt(e.attributes.getNamedItem("StartDateColumn").nodeValue)),this.set_endDateColumn(parseInt(e.attributes.getNamedItem("EndDateColumn").nodeValue)),e.attributes.getNamedItem("NormalizeSizeColumn")!=null?this.set_sizeColumn(parseInt(e.attributes.getNamedItem("NormalizeSizeColumn").nodeValue)):this.set_sizeColumn(parseInt(e.attributes.getNamedItem("SizeColumn").nodeValue)),e.attributes.getNamedItem("NormalizeSize")!=null&&(this.set_normalizeSize(i.boolean(e.attributes.getNamedItem("NormalizeSize").nodeValue)),this.set_normalizeSizeClip(i.boolean(e.attributes.getNamedItem("NormalizeSizeClip").nodeValue)),this.set_normalizeSizeMin(parseFloat(e.attributes.getNamedItem("NormalizeSizeMin").nodeValue)),this.set_normalizeSizeMax(parseFloat(e.attributes.getNamedItem("NormalizeSizeMax").nodeValue))),e.attributes.getNamedItem("DynamicColorColumn")!=null?this.set_colorMapColumn(parseInt(e.attributes.getNamedItem("DynamicColorColumn").nodeValue)):this.set_colorMapColumn(parseInt(e.attributes.getNamedItem("ColorMapColumn").nodeValue)),e.attributes.getNamedItem("DynamicColor")!=null&&(this.set_dynamicColor(i.boolean(e.attributes.getNamedItem("DynamicColor").nodeValue)),this.set_colorMapperName(e.attributes.getNamedItem("ColorMapperName").nodeValue),this.set_normalizeColorMap(i.boolean(e.attributes.getNamedItem("NormalizeColorMap").nodeValue)),this.set_normalizeColorMapMin(parseFloat(e.attributes.getNamedItem("NormalizeColorMapMin").nodeValue)),this.set_normalizeColorMapMax(parseFloat(e.attributes.getNamedItem("NormalizeColorMapMax").nodeValue))),this.set_hyperlinkFormat(e.attributes.getNamedItem("HyperlinkFormat").nodeValue),this.set_hyperlinkColumn(parseInt(e.attributes.getNamedItem("HyperlinkColumn").nodeValue)),this.set_scaleFactor(parseFloat(e.attributes.getNamedItem("ScaleFactor").nodeValue)),this.set_pointScaleType(gt.parse("PointScaleTypes",e.attributes.getNamedItem("PointScaleType").nodeValue)),e.attributes.getNamedItem("ShowFarSide")!=null&&this.set_showFarSide(i.boolean(e.attributes.getNamedItem("ShowFarSide").nodeValue)),e.attributes.getNamedItem("RaUnits")!=null&&this.set_raUnits(gt.parse("RAUnits",e.attributes.getNamedItem("RaUnits").nodeValue)),e.attributes.getNamedItem("HoverTextColumn")!=null&&this.set_nameColumn(parseInt(e.attributes.getNamedItem("HoverTextColumn").nodeValue)),e.attributes.getNamedItem("XAxisColumn")!=null&&(this.set_xAxisColumn(parseInt(e.attributes.getNamedItem("XAxisColumn").nodeValue)),this.set_xAxisReverse(i.boolean(e.attributes.getNamedItem("XAxisReverse").nodeValue)),this.set_yAxisColumn(parseInt(e.attributes.getNamedItem("YAxisColumn").nodeValue)),this.set_yAxisReverse(i.boolean(e.attributes.getNamedItem("YAxisReverse").nodeValue)),this.set_zAxisColumn(parseInt(e.attributes.getNamedItem("ZAxisColumn").nodeValue)),this.set_zAxisReverse(i.boolean(e.attributes.getNamedItem("ZAxisReverse").nodeValue)),this.set_cartesianScale(gt.parse("AltUnits",e.attributes.getNamedItem("CartesianScale").nodeValue)),this.set_cartesianCustomScale(parseFloat(e.attributes.getNamedItem("CartesianCustomScale").nodeValue))),e.attributes.getNamedItem("DynamicData")!=null&&(this.set_dynamicData(i.boolean(e.attributes.getNamedItem("DynamicData").nodeValue)),this.set_autoUpdate(i.boolean(e.attributes.getNamedItem("AutoUpdate").nodeValue)),this.set_dataSourceUrl(e.attributes.getNamedItem("DataSourceUrl").nodeValue))},get_decay:function(){return this.decay},set_decay:function(e){return this.decay!==e&&(this.version++,this.decay=e),e},get_coordinatesType:function(){return this._coordinatesType$1},set_coordinatesType:function(e){return this._coordinatesType$1!==e&&(this.version++,this._coordinatesType$1=e),e},get_latColumn:function(){return this.latColumn},set_latColumn:function(e){return this.latColumn!==e&&(this.version++,this.latColumn=e),e},get_lngColumn:function(){return this.lngColumn},set_lngColumn:function(e){return this.lngColumn!==e&&(this.version++,this.lngColumn=e),e},get_geometryColumn:function(){return this.geometryColumn},set_geometryColumn:function(e){return this.geometryColumn!==e&&(this.version++,this.geometryColumn=e),e},get_xAxisColumn:function(){return this._xAxisColumn$1},set_xAxisColumn:function(e){return this._xAxisColumn$1!==e&&(this.version++,this._xAxisColumn$1=e),e},get_yAxisColumn:function(){return this._yAxisColumn$1},set_yAxisColumn:function(e){return this._yAxisColumn$1!==e&&(this.version++,this._yAxisColumn$1=e),e},get_zAxisColumn:function(){return this._zAxisColumn$1},set_zAxisColumn:function(e){return this._zAxisColumn$1!==e&&(this.version++,this._zAxisColumn$1=e),e},get_xAxisReverse:function(){return this._xAxisReverse$1},set_xAxisReverse:function(e){return this._xAxisReverse$1!==e&&(this.version++,this._xAxisReverse$1=e),e},get_yAxisReverse:function(){return this._yAxisReverse$1},set_yAxisReverse:function(e){return this._yAxisReverse$1!==e&&(this.version++,this._yAxisReverse$1=e),e},get_zAxisReverse:function(){return this._zAxisReverse$1},set_zAxisReverse:function(e){return this._zAxisReverse$1!==e&&(this.version++,this._zAxisReverse$1=e),e},get_altType:function(){return this._altType$1},set_altType:function(e){return this._altType$1!==e&&(this.version++,this._altType$1=e),e},get_markerMix:function(){return this._markerMix$1},set_markerMix:function(e){return this._markerMix$1!==e&&(this.version++,this._markerMix$1=e),e},get_raUnits:function(){return this._raUnits$1},set_raUnits:function(e){return this._raUnits$1!==e&&(this.version++,this._raUnits$1=e),e},get_colorMap:function(){return this.colorMap},set_colorMap:function(e){return this.colorMap!==e&&(this.version++,this.colorMap=e),e},get_colorMapperName:function(){return this.colorMapperName},set_colorMapperName:function(e){if(bt.fromNamedColormap(e)==null)throw new Error("Invalid colormap name");return this.version++,this.colorMapperName=e,e},get_colorMapper:function(){return bt.fromNamedColormap(this.colorMapperName)},get_dynamicColor:function(){return this.dynamicColor},set_dynamicColor:function(e){return this.version++,this.dynamicColor=e,e},get_normalizeColorMap:function(){return this.normalizeColorMap},set_normalizeColorMap:function(e){return this.version++,this.normalizeColorMap=e,e},get_normalizeColorMapMin:function(){return this.normalizeColorMapMin},set_normalizeColorMapMin:function(e){return this.version++,this.normalizeColorMapMin=e,e},get_normalizeColorMapMax:function(){return this.normalizeColorMapMax},set_normalizeColorMapMax:function(e){return this.version++,this.normalizeColorMapMax=e,e},normalizeColorMapValue:function(e){if(!this.get_normalizeColorMap())return e;var t=(e-this.get_normalizeColorMapMin())/(this.get_normalizeColorMapMax()-this.get_normalizeColorMapMin());return t<0?t=0:t>1&&(t=1),t},get_markerColumn:function(){return this._markerColumn$1},set_markerColumn:function(e){return this._markerColumn$1!==e&&(this.version++,this._markerColumn$1=e),e},get_colorMapColumn:function(){return this.colorMapColumn},set_colorMapColumn:function(e){return this.colorMapColumn!==e&&(this.version++,this.colorMapColumn=e),e},get_plotType:function(){return this._plotType$1},set_plotType:function(e){return this._plotType$1!==e&&(this.version++,this._plotType$1=e),e},get_markerIndex:function(){return this._markerIndex$1},set_markerIndex:function(e){return this._markerIndex$1!==e&&(this.version++,this._markerIndex$1=e),e},get_showFarSide:function(){return this._showFarSide$1},set_showFarSide:function(e){return this._showFarSide$1!==e&&(this.version++,this._showFarSide$1=e),e},get_markerScale:function(){return this._markerScale$1},set_markerScale:function(e){return this._markerScale$1!==e&&(this.version++,this._markerScale$1=e),e},get_altUnit:function(){return this._altUnit$1},set_altUnit:function(e){return this._altUnit$1!==e&&(this.version++,this._altUnit$1=e),e},get_cartesianScale:function(){return this._cartesianScale$1},set_cartesianScale:function(e){return this._cartesianScale$1!==e&&(this.version++,this._cartesianScale$1=e),e},get_cartesianCustomScale:function(){return this._cartesianCustomScale$1},set_cartesianCustomScale:function(e){return this._cartesianCustomScale$1!==e&&(this.version++,this._cartesianCustomScale$1=e),e},get_altColumn:function(){return this.altColumn},set_altColumn:function(e){return this.altColumn!==e&&(this.version++,this.altColumn=e),e},get_startDateColumn:function(){return this.startDateColumn},set_startDateColumn:function(e){return this.startDateColumn!==e&&(this.version++,this.startDateColumn=e),e},get_endDateColumn:function(){return this.endDateColumn},set_endDateColumn:function(e){return this.endDateColumn!==e&&(this.version++,this.endDateColumn=e),e},get_sizeColumn:function(){return this.sizeColumn},set_sizeColumn:function(e){return this.sizeColumn!==e&&(this.version++,this.sizeColumn=e),e},get_normalizeSize:function(){return this.normalizeSize},set_normalizeSize:function(e){return this.normalizeSize!==e&&(this.version++,this.normalizeSize=e),e},get_normalizeSizeClip:function(){return this.normalizeSizeClip},set_normalizeSizeClip:function(e){return this.normalizeSizeClip!==e&&(this.version++,this.normalizeSizeClip=e),e},get_normalizeSizeMin:function(){return this.normalizeSizeMin},set_normalizeSizeMin:function(e){return this.normalizeSizeMin!==e&&(this.version++,this.normalizeSizeMin=e),e},get_normalizeSizeMax:function(){return this.normalizeSizeMax},set_normalizeSizeMax:function(e){return this.normalizeSizeMax!==e&&(this.version++,this.normalizeSizeMax=e),e},normalizePointSize:function(e){if(!this.get_normalizeSize())return e;var t=(e-this.get_normalizeSizeMin())/(this.get_normalizeSizeMax()-this.get_normalizeSizeMin());return this.get_normalizeSizeClip()&&(t<0?t=0:t>1&&(t=1)),t},get_nameColumn:function(){return this.nameColumn},set_nameColumn:function(e){return this.nameColumn!==e&&(this.version++,this.nameColumn=e),e},get_hyperlinkFormat:function(){return this._hyperlinkFormat$1},set_hyperlinkFormat:function(e){return this._hyperlinkFormat$1!==e&&(this.version++,this._hyperlinkFormat$1=e),e},get_hyperlinkColumn:function(){return this._hyperlinkColumn$1},set_hyperlinkColumn:function(e){return this._hyperlinkColumn$1!==e&&(this.version++,this._hyperlinkColumn$1=e),e},get_scaleFactor:function(){return this.scaleFactor},set_scaleFactor:function(e){return this.scaleFactor!==e&&(this.version++,this.scaleFactor=e),e},get_pointScaleType:function(){return this.pointScaleType},set_pointScaleType:function(e){return this.pointScaleType!==e&&(this.version++,this.pointScaleType=e),e},draw:function(e,t,r){var n=e;this.version!==this.lastVersion&&this.cleanUp(),this.lastVersion=this.version,this.bufferIsFlat!==r&&(this.cleanUp(),this.bufferIsFlat=r),this.dirty&&this.prepVertexBuffer(n,t);var a=K.get_jNow()-K.utcToJulian(this.baseDate),l=this.scaleFactor*3;if(r&&this.astronomical&&this._markerScale$1===1&&(l=this.scaleFactor/(e.viewCamera.zoom/360)),this.triangleList2d!=null&&(this.triangleList2d.decay=this.decay,this.triangleList2d.sky=this.get_astronomical(),this.triangleList2d.timeSeries=this.timeSeries,this.triangleList2d.jNow=a,this.triangleList2d.draw(e,t*this.get_opacity(),1)),this.triangleList!=null&&(this.triangleList.decay=this.decay,this.triangleList.sky=this.get_astronomical(),this.triangleList.timeSeries=this.timeSeries,this.triangleList.jNow=a,this.triangleList.draw(e,t*this.get_opacity(),1)),this.pointList!=null)switch(this.pointList.depthBuffered=!1,this.pointList.showFarSide=this.get_showFarSide(),this.pointList.decay=this.timeSeries?this.decay:0,this.pointList.sky=this.get_astronomical(),this.pointList.timeSeries=this.timeSeries,this.pointList.jNow=a,this.pointList.scale=this._markerScale$1===1?l:-l,this._plotType$1){case 0:this.pointList.draw(e,t*this.get_opacity(),!1);break;case 2:this.pointList.drawTextured(e,zi.get__circleTexture$1().texture2d,t*this.get_opacity());break;case 1:this.pointList.drawTextured(e,cr.getPushPinTexture(19),t*this.get_opacity());break;case 3:this.pointList.drawTextured(e,cr.getPushPinTexture(35),t*this.get_opacity());break;case 5:case 4:this.pointList.drawTextured(e,cr.getPushPinTexture(this._markerIndex$1),t*this.get_opacity());break}return this.lineList!=null&&(this.lineList.sky=this.get_astronomical(),this.lineList.decay=this.decay,this.lineList.timeSeries=this.timeSeries,this.lineList.jNow=a,this.lineList.drawLines(e,t*this.get_opacity())),this.lineList2d!=null&&(this.lineList2d.sky=this.get_astronomical(),this.lineList2d.decay=this.decay,this.lineList2d.timeSeries=this.timeSeries,this.lineList2d.showFarSide=this.get_showFarSide(),this.lineList2d.jNow=a,this.lineList2d.drawLines(e,t*this.get_opacity())),!0},cleanUpBase:function(){this.lineList!=null&&this.lineList.clear(),this.lineList2d!=null&&this.lineList2d.clear(),this.triangleList2d!=null&&this.triangleList2d.clear(),this.pointList!=null&&this.pointList.clear(),this.triangleList!=null&&this.triangleList.clear()}};function ls(){this.isLongIndex=!1,this.shapeVertexCount=0,this.lines=!1,this.latColumn=-1,this.fixedSize=1,this.decay=16,this.timeSeries=!1,this._dynamicData$1=!1,this._autoUpdate$1=!1,this._dataSourceUrl$1="",this._beginRange$1=new Date("1/1/2100"),this._endRange$1=new Date("01/01/1800"),this.markerDomainValues={},this.colorDomainValues={},this._coordinatesType$1=0,this.lngColumn=-1,this.geometryColumn=-1,this._xAxisColumn$1=-1,this._yAxisColumn$1=-1,this._zAxisColumn$1=-1,this._xAxisReverse$1=!1,this._yAxisReverse$1=!1,this._zAxisReverse$1=!1,this._altType$1=3,this._markerMix$1=0,this._raUnits$1=0,this._colorMap$1=3,this._markerColumn$1=-1,this._colorMapColumn$1=-1,this._plotType$1=0,this._markerIndex$1=0,this._showFarSide$1=!1,this._markerScale$1=1,this._altUnit$1=1,this._cartesianScale$1=1,this._cartesianCustomScale$1=1,this.altColumn=-1,this.startDateColumn=-1,this.endDateColumn=-1,this.sizeColumn=-1,this.nameColumn=0,this._hyperlinkFormat$1="",this._hyperlinkColumn$1=-1,this.scaleFactor=1,this.pointScaleType=1,this.positions=[],this.bufferIsFlat=!1,this.baseDate=new Date(2010,0,1,12,0,0),this.dirty=!0,this.lastVersion=0,ri.call(this)}ls.get__circleTexture$1=function(){return ls._circleTexture$1};var xf={get_dynamicData:function(){return this._dynamicData$1},set_dynamicData:function(e){return this._dynamicData$1=e,e},get_autoUpdate:function(){return this._autoUpdate$1},set_autoUpdate:function(e){return this._autoUpdate$1=e,e},get_dataSourceUrl:function(){return this._dataSourceUrl$1},set_dataSourceUrl:function(e){return this._dataSourceUrl$1=e,e},get_timeSeries:function(){return this.timeSeries},set_timeSeries:function(e){return this.timeSeries!==e&&(this.version++,this.timeSeries=e),e},get_header:function(){return null},get_beginRange:function(){return this._beginRange$1},set_beginRange:function(e){return i.compareDates(this._beginRange$1,e)||(this.version++,this._beginRange$1=e),e},get_endRange:function(){return this._endRange$1},set_endRange:function(e){return i.compareDates(this._endRange$1,e)||(this.version++,this._endRange$1=e),e},initializeFromXml:function(e){switch(this.set_timeSeries(i.boolean(e.attributes.getNamedItem("TimeSeries").nodeValue)),this.set_beginRange(new Date(e.attributes.getNamedItem("BeginRange").nodeValue)),this.set_endRange(new Date(e.attributes.getNamedItem("EndRange").nodeValue)),this.set_decay(parseFloat(e.attributes.getNamedItem("Decay").nodeValue)),this.set_coordinatesType(gt.parse("CoordinatesTypes",e.attributes.getNamedItem("CoordinatesType").nodeValue)),this.get_coordinatesType()<0&&this.set_coordinatesType(0),this.set_latColumn(parseInt(e.attributes.getNamedItem("LatColumn").nodeValue)),this.set_lngColumn(parseInt(e.attributes.getNamedItem("LngColumn").nodeValue)),e.attributes.getNamedItem("GeometryColumn")!=null&&this.set_geometryColumn(parseInt(e.attributes.getNamedItem("GeometryColumn").nodeValue)),e.attributes.getNamedItem("AltType").nodeValue){case"Depth":this.set_altType(0);break;case"Altitude":this.set_altType(1);break;case"Distance":this.set_altType(2);break;case"SeaLevel":this.set_altType(3);break;case"Terrain":this.set_altType(4);break}switch(this.set_markerMix(0),e.attributes.getNamedItem("ColorMap").nodeValue){case"Same_For_All":this.set__colorMap(0);break;case"Group_by_Values":this.set__colorMap(2);break;case"Per_Column_Literal":this.set__colorMap(3);break}switch(this.set_markerColumn(parseInt(e.attributes.getNamedItem("MarkerColumn").nodeValue)),this.set_colorMapColumn(parseInt(e.attributes.getNamedItem("ColorMapColumn").nodeValue)),e.attributes.getNamedItem("PlotType").nodeValue){case"Gaussian":this.set_plotType(0);break;case"Point":this.set_plotType(1);break;case"Circle":this.set_plotType(2);break;case"PushPin":this.set_plotType(4);break}switch(this.set_markerIndex(parseInt(e.attributes.getNamedItem("MarkerIndex").nodeValue)),e.attributes.getNamedItem("MarkerScale").nodeValue){case"Screen":this.set_markerScale(0);break;case"World":this.set_markerScale(1);break}switch(e.attributes.getNamedItem("AltUnit").nodeValue){case"Meters":this.set_altUnit(1);break;case"Feet":this.set_altUnit(2);break;case"Inches":this.set_altUnit(3);break;case"Miles":this.set_altUnit(4);break;case"Kilometers":this.set_altUnit(5);break;case"AstronomicalUnits":this.set_altUnit(6);break;case"LightYears":this.set_altUnit(7);break;case"Parsecs":this.set_altUnit(8);break;case"MegaParsecs":this.set_altUnit(9);break;case"Custom":this.set_altUnit(10);break}switch(this.set_altColumn(parseInt(e.attributes.getNamedItem("AltColumn").nodeValue)),this.set_startDateColumn(parseInt(e.attributes.getNamedItem("StartDateColumn").nodeValue)),this.set_endDateColumn(parseInt(e.attributes.getNamedItem("EndDateColumn").nodeValue)),this.set_sizeColumn(parseInt(e.attributes.getNamedItem("SizeColumn").nodeValue)),this.set_hyperlinkFormat(e.attributes.getNamedItem("HyperlinkFormat").nodeValue),this.set_hyperlinkColumn(parseInt(e.attributes.getNamedItem("HyperlinkColumn").nodeValue)),this.set_scaleFactor(parseFloat(e.attributes.getNamedItem("ScaleFactor").nodeValue)),e.attributes.getNamedItem("PointScaleType").nodeValue){case"Linear":this.set_pointScaleType(0);break;case"Power":this.set_pointScaleType(1);break;case"Log":this.set_pointScaleType(2);break;case"Constant":this.set_pointScaleType(3);break;case"StellarMagnitude":this.set_pointScaleType(4);break}if(e.attributes.getNamedItem("ShowFarSide")!=null&&this.set_showFarSide(i.boolean(e.attributes.getNamedItem("ShowFarSide").nodeValue)),e.attributes.getNamedItem("RaUnits")!=null)switch(e.attributes.getNamedItem("RaUnits").nodeValue){case"Hours":this.set_raUnits(0);break;case"Degrees":this.set_raUnits(1);break}if(e.attributes.getNamedItem("HoverTextColumn")!=null&&this.set_nameColumn(parseInt(e.attributes.getNamedItem("HoverTextColumn").nodeValue)),e.attributes.getNamedItem("XAxisColumn")!=null){switch(this.set_xAxisColumn(parseInt(e.attributes.getNamedItem("XAxisColumn").nodeValue)),this.set_xAxisReverse(i.boolean(e.attributes.getNamedItem("XAxisReverse").nodeValue)),this.set_yAxisColumn(parseInt(e.attributes.getNamedItem("YAxisColumn").nodeValue)),this.set_yAxisReverse(i.boolean(e.attributes.getNamedItem("YAxisReverse").nodeValue)),this.set_zAxisColumn(parseInt(e.attributes.getNamedItem("ZAxisColumn").nodeValue)),this.set_zAxisReverse(i.boolean(e.attributes.getNamedItem("ZAxisReverse").nodeValue)),e.attributes.getNamedItem("CartesianScale").nodeValue){case"Meters":this.set_cartesianScale(1);break;case"Feet":this.set_cartesianScale(2);break;case"Inches":this.set_cartesianScale(3);break;case"Miles":this.set_cartesianScale(4);break;case"Kilometers":this.set_cartesianScale(5);break;case"AstronomicalUnits":this.set_cartesianScale(6);break;case"LightYears":this.set_cartesianScale(7);break;case"Parsecs":this.set_cartesianScale(8);break;case"MegaParsecs":this.set_cartesianScale(9);break;case"Custom":this.set_cartesianScale(10);break}this.set_cartesianCustomScale(parseFloat(e.attributes.getNamedItem("CartesianCustomScale").nodeValue))}e.attributes.getNamedItem("DynamicData")!=null&&(this.set_dynamicData(i.boolean(e.attributes.getNamedItem("DynamicData").nodeValue)),this.set_autoUpdate(i.boolean(e.attributes.getNamedItem("AutoUpdate").nodeValue)),this.set_dataSourceUrl(e.attributes.getNamedItem("DataSourceUrl").nodeValue))},computeDateDomainRange:function(e,t){},getDomainValues:function(e){return[]},get_decay:function(){return this.decay},set_decay:function(e){return this.decay!==e&&(this.version++,this.decay=e),e},get_coordinatesType:function(){return this._coordinatesType$1},set_coordinatesType:function(e){return this._coordinatesType$1!==e&&(this.version++,this._coordinatesType$1=e),e},get_latColumn:function(){return this.latColumn},set_latColumn:function(e){return this.latColumn!==e&&(this.version++,this.latColumn=e),e},get_lngColumn:function(){return this.lngColumn},set_lngColumn:function(e){return this.lngColumn!==e&&(this.version++,this.lngColumn=e),e},get_geometryColumn:function(){return this.geometryColumn},set_geometryColumn:function(e){return this.geometryColumn!==e&&(this.version++,this.geometryColumn=e),e},get_xAxisColumn:function(){return this._xAxisColumn$1},set_xAxisColumn:function(e){return this._xAxisColumn$1!==e&&(this.version++,this._xAxisColumn$1=e),e},get_yAxisColumn:function(){return this._yAxisColumn$1},set_yAxisColumn:function(e){return this._yAxisColumn$1!==e&&(this.version++,this._yAxisColumn$1=e),e},get_zAxisColumn:function(){return this._zAxisColumn$1},set_zAxisColumn:function(e){return this._zAxisColumn$1!==e&&(this.version++,this._zAxisColumn$1=e),e},get_xAxisReverse:function(){return this._xAxisReverse$1},set_xAxisReverse:function(e){return this._xAxisReverse$1!==e&&(this.version++,this._xAxisReverse$1=e),e},get_yAxisReverse:function(){return this._yAxisReverse$1},set_yAxisReverse:function(e){return this._yAxisReverse$1!==e&&(this.version++,this._yAxisReverse$1=e),e},get_zAxisReverse:function(){return this._zAxisReverse$1},set_zAxisReverse:function(e){return this._zAxisReverse$1!==e&&(this.version++,this._zAxisReverse$1=e),e},get_altType:function(){return this._altType$1},set_altType:function(e){return this._altType$1!==e&&(this.version++,this._altType$1=e),e},get_markerMix:function(){return this._markerMix$1},set_markerMix:function(e){return this._markerMix$1!==e&&(this.version++,this._markerMix$1=e),e},get_raUnits:function(){return this._raUnits$1},set_raUnits:function(e){return this._raUnits$1!==e&&(this.version++,this._raUnits$1=e),e},get__colorMap:function(){return this._colorMap$1},set__colorMap:function(e){return this._colorMap$1!==e&&(this.version++,this._colorMap$1=e),e},get_markerColumn:function(){return this._markerColumn$1},set_markerColumn:function(e){return this._markerColumn$1!==e&&(this.version++,this._markerColumn$1=e),e},get_colorMapColumn:function(){return this._colorMapColumn$1},set_colorMapColumn:function(e){return this._colorMapColumn$1!==e&&(this.version++,this._colorMapColumn$1=e),e},get_plotType:function(){return this._plotType$1},set_plotType:function(e){return this._plotType$1!==e&&(this.version++,this._plotType$1=e),e},get_markerIndex:function(){return this._markerIndex$1},set_markerIndex:function(e){return this._markerIndex$1!==e&&(this.version++,this._markerIndex$1=e),e},get_showFarSide:function(){return this._showFarSide$1},set_showFarSide:function(e){return this._showFarSide$1!==e&&(this.version++,this._showFarSide$1=e),e},get_markerScale:function(){return this._markerScale$1},set_markerScale:function(e){return this._markerScale$1!==e&&(this.version++,this._markerScale$1=e),e},get_altUnit:function(){return this._altUnit$1},set_altUnit:function(e){return this._altUnit$1!==e&&(this.version++,this._altUnit$1=e),e},get_cartesianScale:function(){return this._cartesianScale$1},set_cartesianScale:function(e){return this._cartesianScale$1!==e&&(this.version++,this._cartesianScale$1=e),e},get_cartesianCustomScale:function(){return this._cartesianCustomScale$1},set_cartesianCustomScale:function(e){return this._cartesianCustomScale$1!==e&&(this.version++,this._cartesianCustomScale$1=e),e},get_altColumn:function(){return this.altColumn},set_altColumn:function(e){return this.altColumn!==e&&(this.version++,this.altColumn=e),e},get_startDateColumn:function(){return this.startDateColumn},set_startDateColumn:function(e){return this.startDateColumn!==e&&(this.version++,this.startDateColumn=e),e},get_endDateColumn:function(){return this.endDateColumn},set_endDateColumn:function(e){return this.endDateColumn!==e&&(this.version++,this.endDateColumn=e),e},get_sizeColumn:function(){return this.sizeColumn},set_sizeColumn:function(e){return this.sizeColumn!==e&&(this.version++,this.sizeColumn=e),e},get_nameColumn:function(){return this.nameColumn},set_nameColumn:function(e){return this.nameColumn!==e&&(this.version++,this.nameColumn=e),e},get_hyperlinkFormat:function(){return this._hyperlinkFormat$1},set_hyperlinkFormat:function(e){return this._hyperlinkFormat$1!==e&&(this.version++,this._hyperlinkFormat$1=e),e},get_hyperlinkColumn:function(){return this._hyperlinkColumn$1},set_hyperlinkColumn:function(e){return this._hyperlinkColumn$1!==e&&(this.version++,this._hyperlinkColumn$1=e),e},get_scaleFactor:function(){return this.scaleFactor},set_scaleFactor:function(e){return this.scaleFactor!==e&&(this.version++,this.scaleFactor=e),e},get_pointScaleType:function(){return this.pointScaleType},set_pointScaleType:function(e){return this.pointScaleType!==e&&(this.version++,this.pointScaleType=e),e},prepVertexBuffer:function(e,t){return!0},draw:function(e,t,r){var n=e;this.version!==this.lastVersion&&this.cleanUp(),this.bufferIsFlat!==r&&(this.cleanUp(),this.bufferIsFlat=r),this.dirty&&this.prepVertexBuffer(n,t);var a=K.get_jNow()-K.utcToJulian(this.baseDate),l=this.scaleFactor;return r&&this.astronomical&&this._markerScale$1===1&&(l=this.scaleFactor/(e.viewCamera.zoom/360)),this.triangleList2d!=null&&(this.triangleList2d.decay=this.decay,this.triangleList2d.sky=this.get_astronomical(),this.triangleList2d.timeSeries=this.timeSeries,this.triangleList2d.jNow=a,this.triangleList2d.draw(e,t*this.get_opacity(),1)),this.triangleList!=null&&(this.triangleList.decay=this.decay,this.triangleList.sky=this.get_astronomical(),this.triangleList.timeSeries=this.timeSeries,this.triangleList.jNow=a,this.triangleList.draw(e,t*this.get_opacity(),1)),this.pointList!=null&&(this.pointList.depthBuffered=!1,this.pointList.decay=this.decay,this.pointList.sky=this.get_astronomical(),this.pointList.timeSeries=this.timeSeries,this.pointList.jNow=a,this.pointList.scale=this._markerScale$1===1?l:-l,this.pointList.draw(e,t*this.get_opacity(),!1)),this.lineList!=null&&(this.lineList.sky=this.get_astronomical(),this.lineList.decay=this.decay,this.lineList.timeSeries=this.timeSeries,this.lineList.jNow=a,this.lineList.drawLines(e,t*this.get_opacity())),this.lineList2d!=null&&(this.lineList2d.sky=this.get_astronomical(),this.lineList2d.decay=this.decay,this.lineList2d.timeSeries=this.timeSeries,this.lineList2d.showFarSide=this.get_showFarSide(),this.lineList2d.jNow=a,this.lineList2d.drawLines(e,t*this.get_opacity())),!0},initFromXml:function(e){ri.prototype.initFromXml.call(this,e)},cleanUp:function(){this.lineList!=null&&this.lineList.clear(),this.lineList2d!=null&&this.lineList2d.clear(),this.triangleList2d!=null&&this.triangleList2d.clear(),this.pointList!=null&&this.pointList.clear(),this.triangleList!=null&&this.triangleList.clear()},dynamicUpdate:function(){return!1}};function kr(){this.isLongIndex=!1,this.shapeVertexCount=0,this.lines=!1,this.latColumn=-1,this.fixedSize=1,this.decay=0,this.timeSeries=!1,this._dynamicData$1=!1,this._autoUpdate$1=!1,this._dataSourceUrl$1="",this._beginRange$1=new Date("1/1/2100"),this._endRange$1=new Date("01/01/1800"),this.markerDomainValues={},this.colorDomainValues={},this._coordinatesType$1=0,this.lngColumn=-1,this.geometryColumn=-1,this._xAxisColumn$1=-1,this._yAxisColumn$1=-1,this._zAxisColumn$1=-1,this._xAxisReverse$1=!1,this._yAxisReverse$1=!1,this._zAxisReverse$1=!1,this._altType$1=3,this._markerMix$1=0,this._raUnits$1=0,this._colorMap$1=3,this._markerColumn$1=-1,this._colorMapColumn$1=-1,this._plotType$1=0,this._markerIndex$1=0,this._showFarSide$1=!1,this._markerScale$1=1,this._altUnit$1=1,this._cartesianScale$1=1,this._cartesianCustomScale$1=1,this.altColumn=-1,this.startDateColumn=-1,this.endDateColumn=-1,this.sizeColumn=-1,this.nameColumn=0,this._hyperlinkFormat$1="",this._hyperlinkColumn$1=-1,this.scaleFactor=1,this.pointScaleType=1,this.positions=[],this.bufferIsFlat=!1,this.baseDate=new Date(2010,0,1,12,0,0),this.dirty=!0,this._filename$1="",ri.call(this),this._table$1=null,this._filename$1="",this.set_plotType(2)}kr.get__circleTexture$1=function(){if(kr._circleTexture$1==null){var e=Nt.singleton.engineAssetUrl("circle.png");kr._circleTexture$1=P.loadPlanetTexture(e)}return kr._circleTexture$1},kr.create=function(e,t){var r=new kr;return r._table$1=e,r._filename$1=e.loadFilename,r.set_lngColumn(e.getRAColumn().index),r.set_latColumn(e.getDecColumn().index),r.sizeColumn=e.getColumnByUcd("phot.mag").index,r.set_plotType(t),r};var Lf={get_dynamicData:function(){return this._dynamicData$1},set_dynamicData:function(e){return this._dynamicData$1=e,e},get_autoUpdate:function(){return this._autoUpdate$1},set_autoUpdate:function(e){return this._autoUpdate$1=e,e},get_dataSourceUrl:function(){return this._dataSourceUrl$1},set_dataSourceUrl:function(e){return this._dataSourceUrl$1=e,e},get_timeSeries:function(){return this.timeSeries},set_timeSeries:function(e){return this.timeSeries!==e&&(this.version++,this.timeSeries=e),e},get_beginRange:function(){return this._beginRange$1},set_beginRange:function(e){return i.compareDates(this._beginRange$1,e)||(this.version++,this._beginRange$1=e),e},get_endRange:function(){return this._endRange$1},set_endRange:function(e){return i.compareDates(this._endRange$1,e)||(this.version++,this._endRange$1=e),e},initializeFromXml:function(e){switch(this.set_timeSeries(i.boolean(e.attributes.getNamedItem("TimeSeries").nodeValue)),this.set_beginRange(new Date(e.attributes.getNamedItem("BeginRange").nodeValue)),this.set_endRange(new Date(e.attributes.getNamedItem("EndRange").nodeValue)),this.set_decay(parseFloat(e.attributes.getNamedItem("Decay").nodeValue)),this.set_coordinatesType(gt.parse("CoordinatesTypes",e.attributes.getNamedItem("CoordinatesType").nodeValue)),this.get_coordinatesType()<0&&this.set_coordinatesType(0),this.set_latColumn(parseInt(e.attributes.getNamedItem("LatColumn").nodeValue)),this.set_lngColumn(parseInt(e.attributes.getNamedItem("LngColumn").nodeValue)),e.attributes.getNamedItem("GeometryColumn")!=null&&this.set_geometryColumn(parseInt(e.attributes.getNamedItem("GeometryColumn").nodeValue)),e.attributes.getNamedItem("AltType").nodeValue){case"Depth":this.set_altType(0);break;case"Altitude":this.set_altType(1);break;case"Distance":this.set_altType(2);break;case"SeaLevel":this.set_altType(3);break;case"Terrain":this.set_altType(4);break}switch(this.set_markerMix(0),e.attributes.getNamedItem("ColorMap").nodeValue){case"Same_For_All":this.set__colorMap(0);break;case"Group_by_Values":this.set__colorMap(2);break;case"Per_Column_Literal":this.set__colorMap(3);break}switch(this.set_markerColumn(parseInt(e.attributes.getNamedItem("MarkerColumn").nodeValue)),this.set_colorMapColumn(parseInt(e.attributes.getNamedItem("ColorMapColumn").nodeValue)),e.attributes.getNamedItem("PlotType").nodeValue){case"Gaussian":this.set_plotType(0);break;case"Point":this.set_plotType(1);break;case"Circle":this.set_plotType(2);break;case"PushPin":this.set_plotType(4);break}switch(this.set_markerIndex(parseInt(e.attributes.getNamedItem("MarkerIndex").nodeValue)),e.attributes.getNamedItem("MarkerScale").nodeValue){case"Screen":this.set_markerScale(0);break;case"World":this.set_markerScale(1);break}switch(e.attributes.getNamedItem("AltUnit").nodeValue){case"Meters":this.set_altUnit(1);break;case"Feet":this.set_altUnit(2);break;case"Inches":this.set_altUnit(3);break;case"Miles":this.set_altUnit(4);break;case"Kilometers":this.set_altUnit(5);break;case"AstronomicalUnits":this.set_altUnit(6);break;case"LightYears":this.set_altUnit(7);break;case"Parsecs":this.set_altUnit(8);break;case"MegaParsecs":this.set_altUnit(9);break;case"Custom":this.set_altUnit(10);break}switch(this.set_altColumn(parseInt(e.attributes.getNamedItem("AltColumn").nodeValue)),this.set_startDateColumn(parseInt(e.attributes.getNamedItem("StartDateColumn").nodeValue)),this.set_endDateColumn(parseInt(e.attributes.getNamedItem("EndDateColumn").nodeValue)),this.set_sizeColumn(parseInt(e.attributes.getNamedItem("SizeColumn").nodeValue)),this.set_hyperlinkFormat(e.attributes.getNamedItem("HyperlinkFormat").nodeValue),this.set_hyperlinkColumn(parseInt(e.attributes.getNamedItem("HyperlinkColumn").nodeValue)),this.set_scaleFactor(parseFloat(e.attributes.getNamedItem("ScaleFactor").nodeValue)),e.attributes.getNamedItem("PointScaleType").nodeValue){case"Linear":this.set_pointScaleType(0);break;case"Power":this.set_pointScaleType(1);break;case"Log":this.set_pointScaleType(2);break;case"Constant":this.set_pointScaleType(3);break;case"StellarMagnitude":this.set_pointScaleType(4);break}if(e.attributes.getNamedItem("ShowFarSide")!=null&&this.set_showFarSide(i.boolean(e.attributes.getNamedItem("ShowFarSide").nodeValue)),e.attributes.getNamedItem("RaUnits")!=null)switch(e.attributes.getNamedItem("RaUnits").nodeValue){case"Hours":this.set_raUnits(0);break;case"Degrees":this.set_raUnits(1);break}if(e.attributes.getNamedItem("HoverTextColumn")!=null&&this.set_nameColumn(parseInt(e.attributes.getNamedItem("HoverTextColumn").nodeValue)),e.attributes.getNamedItem("XAxisColumn")!=null){switch(this.set_xAxisColumn(parseInt(e.attributes.getNamedItem("XAxisColumn").nodeValue)),this.set_xAxisReverse(i.boolean(e.attributes.getNamedItem("XAxisReverse").nodeValue)),this.set_yAxisColumn(parseInt(e.attributes.getNamedItem("YAxisColumn").nodeValue)),this.set_yAxisReverse(i.boolean(e.attributes.getNamedItem("YAxisReverse").nodeValue)),this.set_zAxisColumn(parseInt(e.attributes.getNamedItem("ZAxisColumn").nodeValue)),this.set_zAxisReverse(i.boolean(e.attributes.getNamedItem("ZAxisReverse").nodeValue)),e.attributes.getNamedItem("CartesianScale").nodeValue){case"Meters":this.set_cartesianScale(1);break;case"Feet":this.set_cartesianScale(2);break;case"Inches":this.set_cartesianScale(3);break;case"Miles":this.set_cartesianScale(4);break;case"Kilometers":this.set_cartesianScale(5);break;case"AstronomicalUnits":this.set_cartesianScale(6);break;case"LightYears":this.set_cartesianScale(7);break;case"Parsecs":this.set_cartesianScale(8);break;case"MegaParsecs":this.set_cartesianScale(9);break;case"Custom":this.set_cartesianScale(10);break}this.set_cartesianCustomScale(parseFloat(e.attributes.getNamedItem("CartesianCustomScale").nodeValue))}e.attributes.getNamedItem("DynamicData")!=null&&(this.set_dynamicData(i.boolean(e.attributes.getNamedItem("DynamicData").nodeValue)),this.set_autoUpdate(i.boolean(e.attributes.getNamedItem("AutoUpdate").nodeValue)),this.set_dataSourceUrl(e.attributes.getNamedItem("DataSourceUrl").nodeValue))},get_decay:function(){return this.decay},set_decay:function(e){return this.decay!==e&&(this.version++,this.decay=e),e},get_coordinatesType:function(){return this._coordinatesType$1},set_coordinatesType:function(e){return this._coordinatesType$1!==e&&(this.version++,this._coordinatesType$1=e),e},get_latColumn:function(){return this.latColumn},set_latColumn:function(e){return this.latColumn!==e&&(this.version++,this.latColumn=e),e},get_lngColumn:function(){return this.lngColumn},set_lngColumn:function(e){return this.lngColumn!==e&&(this.version++,this.lngColumn=e),e},get_geometryColumn:function(){return this.geometryColumn},set_geometryColumn:function(e){return this.geometryColumn!==e&&(this.version++,this.geometryColumn=e),e},get_xAxisColumn:function(){return this._xAxisColumn$1},set_xAxisColumn:function(e){return this._xAxisColumn$1!==e&&(this.version++,this._xAxisColumn$1=e),e},get_yAxisColumn:function(){return this._yAxisColumn$1},set_yAxisColumn:function(e){return this._yAxisColumn$1!==e&&(this.version++,this._yAxisColumn$1=e),e},get_zAxisColumn:function(){return this._zAxisColumn$1},set_zAxisColumn:function(e){return this._zAxisColumn$1!==e&&(this.version++,this._zAxisColumn$1=e),e},get_xAxisReverse:function(){return this._xAxisReverse$1},set_xAxisReverse:function(e){return this._xAxisReverse$1!==e&&(this.version++,this._xAxisReverse$1=e),e},get_yAxisReverse:function(){return this._yAxisReverse$1},set_yAxisReverse:function(e){return this._yAxisReverse$1!==e&&(this.version++,this._yAxisReverse$1=e),e},get_zAxisReverse:function(){return this._zAxisReverse$1},set_zAxisReverse:function(e){return this._zAxisReverse$1!==e&&(this.version++,this._zAxisReverse$1=e),e},get_altType:function(){return this._altType$1},set_altType:function(e){return this._altType$1!==e&&(this.version++,this._altType$1=e),e},get_markerMix:function(){return this._markerMix$1},set_markerMix:function(e){return this._markerMix$1!==e&&(this.version++,this._markerMix$1=e),e},get_raUnits:function(){return this._raUnits$1},set_raUnits:function(e){return this._raUnits$1!==e&&(this.version++,this._raUnits$1=e),e},get__colorMap:function(){return this._colorMap$1},set__colorMap:function(e){return this._colorMap$1!==e&&(this.version++,this._colorMap$1=e),e},get_markerColumn:function(){return this._markerColumn$1},set_markerColumn:function(e){return this._markerColumn$1!==e&&(this.version++,this._markerColumn$1=e),e},get_colorMapColumn:function(){return this._colorMapColumn$1},set_colorMapColumn:function(e){return this._colorMapColumn$1!==e&&(this.version++,this._colorMapColumn$1=e),e},get_plotType:function(){return this._plotType$1},set_plotType:function(e){return this._plotType$1!==e&&(this.version++,this._plotType$1=e),e},get_markerIndex:function(){return this._markerIndex$1},set_markerIndex:function(e){return this._markerIndex$1!==e&&(this.version++,this._markerIndex$1=e),e},get_showFarSide:function(){return this._showFarSide$1},set_showFarSide:function(e){return this._showFarSide$1!==e&&(this.version++,this._showFarSide$1=e),e},get_markerScale:function(){return this._markerScale$1},set_markerScale:function(e){return this._markerScale$1!==e&&(this.version++,this._markerScale$1=e),e},get_altUnit:function(){return this._altUnit$1},set_altUnit:function(e){return this._altUnit$1!==e&&(this.version++,this._altUnit$1=e),e},get_cartesianScale:function(){return this._cartesianScale$1},set_cartesianScale:function(e){return this._cartesianScale$1!==e&&(this.version++,this._cartesianScale$1=e),e},get_cartesianCustomScale:function(){return this._cartesianCustomScale$1},set_cartesianCustomScale:function(e){return this._cartesianCustomScale$1!==e&&(this.version++,this._cartesianCustomScale$1=e),e},get_altColumn:function(){return this.altColumn},set_altColumn:function(e){return this.altColumn!==e&&(this.version++,this.altColumn=e),e},get_startDateColumn:function(){return this.startDateColumn},set_startDateColumn:function(e){return this.startDateColumn!==e&&(this.version++,this.startDateColumn=e),e},get_endDateColumn:function(){return this.endDateColumn},set_endDateColumn:function(e){return this.endDateColumn!==e&&(this.version++,this.endDateColumn=e),e},get_sizeColumn:function(){return this.sizeColumn},set_sizeColumn:function(e){return this.sizeColumn!==e&&(this.version++,this.sizeColumn=e),e},get_nameColumn:function(){return this.nameColumn},set_nameColumn:function(e){return this.nameColumn!==e&&(this.version++,this.nameColumn=e),e},get_hyperlinkFormat:function(){return this._hyperlinkFormat$1},set_hyperlinkFormat:function(e){return this._hyperlinkFormat$1!==e&&(this.version++,this._hyperlinkFormat$1=e),e},get_hyperlinkColumn:function(){return this._hyperlinkColumn$1},set_hyperlinkColumn:function(e){return this._hyperlinkColumn$1!==e&&(this.version++,this._hyperlinkColumn$1=e),e},get_scaleFactor:function(){return this.scaleFactor},set_scaleFactor:function(e){return this.scaleFactor!==e&&(this.version++,this.scaleFactor=e),e},get_pointScaleType:function(){return this.pointScaleType},set_pointScaleType:function(e){return this.pointScaleType!==e&&(this.version++,this.pointScaleType=e),e},draw:function(e,t,r){this.bufferIsFlat!==r&&(this.cleanUp(),this.bufferIsFlat=r),this.dirty&&(this.prepVertexBuffer(e,t),this.dirty=!1);var n=K.get_jNow()-K.utcToJulian(this.baseDate),a=this.scaleFactor;if(r&&this.astronomical&&this._markerScale$1===1&&(a=this.scaleFactor/(e.viewCamera.zoom/360)),this.triangleList2d!=null&&(this.triangleList2d.decay=this.decay,this.triangleList2d.sky=this.get_astronomical(),this.triangleList2d.timeSeries=this.timeSeries,this.triangleList2d.jNow=n,this.triangleList2d.draw(e,t*this.get_opacity(),1)),this.triangleList!=null&&(this.triangleList.decay=this.decay,this.triangleList.sky=this.get_astronomical(),this.triangleList.timeSeries=this.timeSeries,this.triangleList.jNow=n,this.triangleList.draw(e,t*this.get_opacity(),1)),this.pointList!=null)switch(this.pointList.depthBuffered=!1,this.pointList.showFarSide=this.get_showFarSide(),this.pointList.decay=this.timeSeries?this.decay:0,this.pointList.sky=this.get_astronomical(),this.pointList.timeSeries=this.timeSeries,this.pointList.jNow=n,this.pointList.scale=this._markerScale$1===1?a:-a,this._plotType$1){case 0:this.pointList.draw(e,t*this.get_opacity(),!1);break;case 2:this.pointList.drawTextured(e,kr.get__circleTexture$1().texture2d,t*this.get_opacity());break;case 1:this.pointList.drawTextured(e,cr.getPushPinTexture(19),t*this.get_opacity());break;case 3:this.pointList.drawTextured(e,cr.getPushPinTexture(35),t*this.get_opacity());break;case 5:case 4:this.pointList.drawTextured(e,cr.getPushPinTexture(this._markerIndex$1),t*this.get_opacity());break}return this.lineList!=null&&(this.lineList.sky=this.get_astronomical(),this.lineList.decay=this.decay,this.lineList.timeSeries=this.timeSeries,this.lineList.jNow=n,this.lineList.drawLines(e,t*this.get_opacity())),this.lineList2d!=null&&(this.lineList2d.sky=this.get_astronomical(),this.lineList2d.decay=this.decay,this.lineList2d.timeSeries=this.timeSeries,this.lineList2d.showFarSide=this.get_showFarSide(),this.lineList2d.jNow=n,this.lineList2d.drawLines(e,t*this.get_opacity())),!0},initFromXml:function(e){ri.prototype.initFromXml.call(this,e)},cleanUp:function(){this.dirty=!0,this.lineList!=null&&this.lineList.clear(),this.lineList2d!=null&&this.lineList2d.clear(),this.triangleList2d!=null&&this.triangleList2d.clear(),this.pointList!=null&&this.pointList.clear(),this.triangleList!=null&&this.triangleList.clear()},dynamicUpdate:function(){return!1},addFilesToCabinet:function(e){var t=this._filename$1,r=e.tempDirectory+i.format("{0}\\{1}.txt",e.get_packageID(),this.id.toString());t.substring(0,t.lastIndexOf("\\")+1),r.substring(0,r.lastIndexOf("\\")+1)},loadData:function(e,t){var r=this,n=e.getFileBlob(t),a=new FileReader;a.onloadend=function(l){var f=i.safeCast(a.result,String);r._table$1=Jn.loadFromString(f),r.set_lngColumn(r._table$1.getRAColumn().index),r.set_latColumn(r._table$1.getDecColumn().index)},a.readAsText(n)},canCopyToClipboard:function(){return!0},copyToClipboard:function(){},findClosest:function(e,t,r,n){var a=V.geoTo3dDouble(e.get_lat(),e.get_lng()),l;if(r!=null){var f=V.raDecTo3dAu(r.get_RA(),-r.get_dec(),-1);l=I.subtractVectors(a,f),t=l.length()}for(var c=-1,d=0,m=i.enumerate(this.positions);m.moveNext();){var v=m.current;l=I.subtractVectors(a,v),l.length()<t&&(t=l.length(),c=d),d++}if(c===-1)return r;var C=V.cartesianToSpherical2(this.positions[c]),T=this._table$1.rows[c].columnData[this.nameColumn].toString();(this.nameColumn===this.startDateColumn||this.nameColumn===this.endDateColumn)&&(T=zi.parseDate(T).toString()),i.emptyString(T)&&(T=i.format("RA={0}, Dec={1}",V.formatHMS(C.get_RA()),V.formatDMS(C.get_dec())));for(var A=hr.create(T,C.get_lat(),C.get_RA(),268435456,"",2,-1),$={},N=0;N<i.keyCount(this._table$1.columns);N++){var F=this._table$1.rows[c].get_item(N).toString();(N===this.startDateColumn||N===this.endDateColumn)&&(F=zi.parseDate(F).toString()),!i.keyExists($,this._table$1.column[N].name)&&!i.emptyString(this._table$1.column[N].name)?$[this._table$1.column[N].name]=F:$["Column"+N.toString()]=F}return A.set_tag($),A},prepVertexBuffer:function(e,t){var r=this._table$1.getColumnByUcd("meta.id");r==null&&(r=this._table$1.column[0]);var n=this.isSiapResultSet();this.pointList==null&&(this.pointList=new qr(e)),this.lineList2d==null&&(this.lineList2d=new ca),this.lineList2d.clear();var a=this._table$1.getColumnByUcd("phys.area;obs.field");a==null&&i.keyExists(this._table$1.columns,"regionSTCS")&&(a=this._table$1.columns.regionSTCS),this.get_plotType()?this.set_markerScale(0):this.set_markerScale(1);var l=[],f=new Aa;this.positions.length=0;var c=0,d=G.fromArgb(i.truncate(t*this.get_color().a),this.get_color().r,this.get_color().g,this.get_color().b);this.pointScaleType=4;for(var m=i.enumerate(this._table$1.rows);m.moveNext();){var v=m.current;try{if(this.lngColumn>-1&&this.latColumn>-1){var C=parseFloat(v.get_item(this.get_lngColumn()).toString()),T=parseFloat(v.get_item(this.get_latColumn()).toString()),A=V.geoTo3dDouble(T,C);if(f.position=A,this.positions.push(f.position),f.set_color(d),this.sizeColumn>-1)try{if(!this.get_markerScale())f.pointSize=20;else switch(this.pointScaleType){case 0:f.pointSize=parseFloat(v.get_item(this.sizeColumn).toString());break;case 2:f.pointSize=Math.log(parseFloat(v.get_item(this.sizeColumn).toString()));break;case 1:f.pointSize=Math.pow(2,parseFloat(v.get_item(this.sizeColumn).toString()));break;case 4:var $=parseFloat(v.get_item(this.sizeColumn).toString());f.pointSize=40/Math.pow(1.6,$)*10;break;case 3:f.pointSize=1;break;default:break}}catch{f.pointSize=.01}else this.get_markerScale()?f.pointSize=Math.pow(2,1)*100:f.pointSize=20;if(this.startDateColumn>-1){var N=i.date(v.get_item(this.startDateColumn).toString());f.tu=K.utcToJulian(N),f.tv=0}l.push(f),this.pointList.addPoint(f.position,f.color,new ii(f.tu,f.tv),f.pointSize),c++}n&&a!=null&&this._addSiapStcRow$1(a.name,v,v===this._table$1.selectedRow)}catch{}this.lines=!1}return n&&a!=null&&this._addSiapStcRow$1(a.name,this._table$1.selectedRow,!0),!0},_addSiapStcRow$1:function(e,t,r){var n=i.replaceString(t.getColumnData(e).toString(),"  "," "),a=G.fromArgb(120,255,255,255);if(r&&(a=Te.get_yellow()),i.startsWith(n,"Polygon J2000")){for(var l=n.split(" "),f=l.length,c=0;c<f;)if(l[c]==="Polygon"){c+=2;for(var d=new I,m=new I,v=!0,C=c;C<f;C+=2){if(l[C]==="Polygon"){v=!0;break}else{var T=V.parseRA(l[C],!0)*15+180,A=V.parseDec(l[C+1]),$=V.geoTo3dDouble(A,T);v?(m=$,v=!1):this.lineList2d.addLine(d,$,a,new ii(0,0)),d=$}c+=2}f>4&&this.lineList2d.addLine(m,d,a,new ii(0,0))}}},isSiapResultSet:function(){return this._table$1.getColumnByUcd("vox:image.title")!=null&&this._table$1.getColumnByUcd("VOX:Image.AccessReference")!=null},get_header:function(){for(var e=new Array(i.keyCount(this._table$1.columns)),t=0,r=i.enumerate(this._table$1.column);r.moveNext();){var n=r.current;e[t++]=n.name}return e},get_table:function(){return this._table$1},set_table:function(e){return this._table$1=e,e}};function Wt(){this._tileDegrees$1=0,this._latMin$1=0,this._latMax$1=0,this._lngMin$1=0,this._lngMax$1=0,this._subDivisionLevel$1=32,O.call(this)}Wt.create=function(e,t,r,n,a){var l=new Wt;return l.parent=a,l.level=e,l.tileX=t,l.tileY=r,l.dataset=n,l.computeBoundingSphere(),l},Wt.getCentrePointOffsetAsTileRatio=function(e,t,r){var n=Wt.absoluteLonToMetersAtZoom(t,r),a=n/256-Math.floor(n/256),l=Wt.absoluteLatToMetersAtZoom(e,r),f=l/256-Math.floor(l/256);return xe.create(a,f)},Wt.relativeMetersToLatAtZoom=function(e,t){var r=Wt.metersPerPixel2(t),n=e*r;return Wt._radToDeg$1(Math.PI/2-2*Math.atan(Math.exp(0-n/6378137)))},Wt.relativeMetersToLonAtZoom=function(e,t){var r=Wt.metersPerPixel2(t),n=e*r;return Wt._radToDeg$1(n/6378137)},Wt.absoluteLatToMetersAtZoom=function(e,t){var r=Math.sin(Wt._degToRad$1(e)),n=6378137/2*Math.log((1+r)/(1-r)),a=Wt.metersPerPixel2(t);return i.truncate(Math.round(20037508-n)/a)},Wt.absoluteMetersToLatAtZoom=function(e,t){var r=Wt.metersPerPixel2(t),n=20037508-e*r;return Wt._radToDeg$1(Math.PI/2-2*Math.atan(Math.exp(0-n/6378137)))},Wt.absoluteLonToMetersAtZoom=function(e,t){var r=6378137*Wt._degToRad$1(e),n=Wt.metersPerPixel2(t);return i.truncate((r+20037508)/n)},Wt.absoluteMetersToLonAtZoom=function(e,t){var r=Wt.metersPerPixel2(t),n=e*r-20037508;return Wt._radToDeg$1(n/6378137)},Wt.absoluteLonToMetersAtZoomTile=function(e,t,r){var n=6378137*Wt._degToRad$1(e),a=Wt.metersPerPixel2(t);return i.truncate((n+20037508)/a)},Wt.absoluteLatToMetersAtZoomTile=function(e,t,r){var n=Math.sin(Wt._degToRad$1(e)),a=6378137/2*Math.log((1+n)/(1-n)),l=Wt.metersPerPixel2(t);return i.truncate(Math.round(20037508-a)/l)},Wt.absoluteMetersToLonAtZoomByTileY=function(e,t,r){var n=Wt.metersPerPixel2(t),a=e*n-20037508;return Wt._radToDeg$1(a/6378137)},Wt._degToRad$1=function(e){return e*Math.PI/180},Wt.metersPerPixel2=function(e){return 156543/(1<<e)},Wt._radToDeg$1=function(e){return e*180/Math.PI};var kf={computeBoundingSphere:function(){this._tileDegrees$1=360/Math.pow(2,this.level),this._latMin$1=Wt.absoluteMetersToLatAtZoom(this.tileY*256,this.level),this._latMax$1=Wt.absoluteMetersToLatAtZoom((this.tileY+1)*256,this.level),this._lngMin$1=this.tileX*this._tileDegrees$1-180,this._lngMax$1=(this.tileX+1)*this._tileDegrees$1-180;var e=(this._latMin$1+this._latMax$1)/2,t=(this._lngMin$1+this._lngMax$1)/2;this.sphereCenter=this.geoTo3d(e,t,!1),this.topLeft=this.geoTo3d(this._latMin$1,this._lngMin$1,!1),this.bottomRight=this.geoTo3d(this._latMax$1,this._lngMax$1,!1),this.topRight=this.geoTo3d(this._latMin$1,this._lngMax$1,!1),this.bottomLeft=this.geoTo3d(this._latMax$1,this._lngMin$1,!1),this.tileY||(this.topLeft=I.create(0,1,0),this.topRight=I.create(0,1,0)),this.tileY===Math.pow(2,this.level)-1&&(this.bottomRight=I.create(0,-1,0),this.bottomLeft=I.create(0,-1,0));var r=this.topLeft;r.subtract(this.sphereCenter),this.sphereRadius=r.length(),r=this.bottomRight,r.subtract(this.sphereCenter);var n=r.length();this.sphereRadius<n&&(this.sphereRadius=n),this._tileDegrees$1=Math.abs(this._latMax$1-this._latMin$1)},isPointInTile:function(e,t){return!(!this.demReady||this.demData==null||e<Math.min(this._latMin$1,this._latMax$1)||e>Math.max(this._latMax$1,this._latMin$1)||t<Math.min(this._lngMin$1,this._lngMax$1)||t>Math.max(this._lngMin$1,this._lngMax$1))},getSurfacePointAltitude:function(e,t,r){if(this.level<O.lastDeepestLevel)for(var n=i.enumerate(this.children);n.moveNext();){var a=n.current;if(a!=null&&a.isPointInTile(e,t)){var l=a.getSurfacePointAltitude(e,t,r);if(l)return l;break}}var f=this._getAltitudeAtLatLng$1(e,t,r?1:this.get__demScaleFactor());return f},_getAltitudeAtLatLng$1:function(e,t,r){var n=Math.abs(this._latMax$1-this._latMin$1),a=Math.abs(this._lngMax$1-this._lngMin$1),l=(e-Math.min(this._latMax$1,this._latMin$1))/n*32,f=(t-Math.min(this._lngMax$1,this._lngMin$1))/a*32,c=Math.min(31,i.truncate(l)),d=Math.min(31,i.truncate(f)),m=f-d,v=l-c,C=this.demData[c*33+d],T=this.demData[c*33+(d+1)],A=this.demData[(c+1)*33+d],$=this.demData[(c+1)*33+(d+1)],N=C*(1-m)+m*T,F=A*(1-m)+m*$,z=N*(1-v)+v*F;return z/r},createGeometry:function(e){if(O.prototype.createGeometry.call(this,e),this.geometryCreated)return!0;this.geometryCreated=!0,O.uvMultiple===256&&(!this.dataset.get_dataSetType()||this.dataset.get_dataSetType()===1)&&(this._subDivisionLevel$1=Math.max(2,(6-this.level)*2));for(var t=0;t<4;t++)this._renderTriangleLists[t]=[];var r,n,a=0,l=360/Math.pow(2,this.level);this._latMin$1=Wt.absoluteMetersToLatAtZoom(this.tileY*256,this.level),this._latMax$1=Wt.absoluteMetersToLatAtZoom((this.tileY+1)*256,this.level),this._lngMin$1=this.tileX*l-180,this._lngMax$1=(this.tileX+1)*l-180;var f=Wt.absoluteMetersToLatAtZoom((this.tileY*2+1)*256,this.level+1);this.topLeft=this.geoTo3d(this._latMin$1,this._lngMin$1,!1),this.bottomRight=this.geoTo3d(this._latMax$1,this._lngMax$1,!1),this.topRight=this.geoTo3d(this._latMin$1,this._lngMax$1,!1),this.bottomLeft=this.geoTo3d(this._latMax$1,this._lngMin$1,!1);var c=new Array((this._subDivisionLevel$1+1)*(this._subDivisionLevel$1+1));l=this._lngMax$1-this._lngMin$1,l/this._subDivisionLevel$1;var d,m,v=1/this._subDivisionLevel$1,C=this._latMax$1-f;for(m=0;m<this._subDivisionLevel$1/2;m++)for(m!==this._subDivisionLevel$1/2?r=this._latMax$1-2*v*C*m:r=f,d=0;d<=this._subDivisionLevel$1;d++)d!==this._subDivisionLevel$1?n=this._lngMin$1+v*l*d:n=this._lngMax$1,a=m*(this._subDivisionLevel$1+1)+d,c[a]=new Ue,c[a].position=this.geoTo3dWithAlt(r,n,!1,!0),c[a].tu=d*v*O.uvMultiple,c[a].tv=(Wt.absoluteLatToMetersAtZoom(r,this.level)-this.tileY*256)/256*O.uvMultiple,this.demIndex++;for(C=this._latMin$1-f,m=this._subDivisionLevel$1/2;m<=this._subDivisionLevel$1;m++)for(m!==this._subDivisionLevel$1?r=f+2*v*C*(m-this._subDivisionLevel$1/2):r=this._latMin$1,d=0;d<=this._subDivisionLevel$1;d++)d!==this._subDivisionLevel$1?n=this._lngMin$1+v*l*d:n=this._lngMax$1,a=m*(this._subDivisionLevel$1+1)+d,c[a]=new Ue,c[a].position=this.geoTo3dWithAlt(r,n,!1,!0),c[a].tu=d*v*O.uvMultiple,c[a].tv=(Wt.absoluteLatToMetersAtZoom(r,this.level)-this.tileY*256)/256*O.uvMultiple,this.demIndex++;if(!this.tileY)for(m=this._subDivisionLevel$1,d=0;d<=this._subDivisionLevel$1;d++)a=m*(this._subDivisionLevel$1+1)+d,c[a].position=I.create(0,1,0);if(this.tileY===Math.pow(2,this.level)-1)for(m=0,d=0;d<=this._subDivisionLevel$1;d++)a=m*(this._subDivisionLevel$1+1)+d,c[a].position=I.create(0,-1,0);this.triangleCount=this._subDivisionLevel$1*this._subDivisionLevel$1*2;var T=this._subDivisionLevel$1/2,A=0;if(e.gl==null)for(var $=0;$<2;$++)for(var N=0;N<2;N++){for(a=0,m=T*$;m<T*($+1);m++)for(d=T*N;d<T*(N+1);d++){var F,z,Y;F=c[m*(this._subDivisionLevel$1+1)+d],z=c[(m+1)*(this._subDivisionLevel$1+1)+d],Y=c[m*(this._subDivisionLevel$1+1)+(d+1)];var W=Ct.create(F,z,Y,this.texture,this.level);this._renderTriangleLists[A].push(W),F=c[m*(this._subDivisionLevel$1+1)+(d+1)],z=c[(m+1)*(this._subDivisionLevel$1+1)+d],Y=c[(m+1)*(this._subDivisionLevel$1+1)+(d+1)],W=Ct.create(F,z,Y,this.texture,this.level),this._renderTriangleLists[A].push(W)}A++}else{this._vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this._vertexBuffer);var ee=new Float32Array(c.length*5),ne=ee;a=0;for(var ae=i.enumerate(c);ae.moveNext();){var de=ae.current;a=this.addVertex(ne,a,de)}O.prepDevice.bufferData(34962,ee,35044);for(var $=0;$<2;$++)for(var N=0;N<2;N++){var se=new Uint16Array(this.triangleCount*3),we=se;for(a=0,m=T*$;m<T*($+1);m++)for(d=T*N;d<T*(N+1);d++)we[a++]=m*(this._subDivisionLevel$1+1)+d,we[a++]=(m+1)*(this._subDivisionLevel$1+1)+d,we[a++]=m*(this._subDivisionLevel$1+1)+(d+1),we[a++]=m*(this._subDivisionLevel$1+1)+(d+1),we[a++]=(m+1)*(this._subDivisionLevel$1+1)+d,we[a++]=(m+1)*(this._subDivisionLevel$1+1)+(d+1);this._indexBuffers[A]=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,this._indexBuffers[A]),O.prepDevice.bufferData(34963,se,35044),A++}}return!0},_getDemSample$1:function(e,t){return this.demData[(32-t)*33+e]},createDemFromParent:function(){var e=i.safeCast(this.parent,Wt);if(e==null||e.demData==null)return!1;var t=this.tileX%2===1?16:0,r=this.tileY%2===1?16:0;this.demData=new Array(this.demSize);for(var n=0;n<33;n+=2)for(var a=!0,l=0;l<33;l++)a?this.demData[(32-n)*33+l]=e._getDemSample$1(l/2+t,n/2+r):this.demData[(32-n)*33+l]=(e._getDemSample$1(l/2+t,n/2+r)+e._getDemSample$1(l/2+t+1,n/2+r))/2,a=!a;for(var n=1;n<33;n+=2)for(var l=0;l<33;l++)this.demData[(32-n)*33+l]=(this._getDemSample$1(l,n-1)+this._getDemSample$1(l,n+1))/2;for(var f=i.enumerate(this.demData);f.moveNext();){var c=f.current;this.demAverage+=c}return this.demAverage/=this.demData.length,this.demReady=!0,!0}};function us(){this._topDown$1=!0,this.backslash=!1,this._vertexList$1=null,this._childTriangleList$1=null,this._stars$1=[],this._subDivisionLevel$1=4,this._subDivided$1=!1,O.call(this)}us.create=function(e,t,r,n,a){var l=new us;return l.parent=a,l.level=e,l.tileX=t,l.tileY=r,l.dataset=n,l._topDown$1=!n.get_bottomsUp(),l.tileX!==t&&alert("bad"),n.get_meanRadius()?l.set__demScaleFactor(n.get_meanRadius()):n.get_dataSetType()?l.set__demScaleFactor(3396010):l.set__demScaleFactor(6371e3),l.computeBoundingSphere(),l};var Af={computeBoundingSphere:function(){this._initializeGrids$1(),this.topLeft=this.bounds[0+3*0].position.copy(),this.bottomRight=this.bounds[2+3*2].position.copy(),this.topRight=this.bounds[2+3*0].position.copy(),this.bottomLeft=this.bounds[0+3*2].position.copy(),this.calcSphere()},renderPart:function(e,t,r,n){if(e.gl==null){if(!t)for(var a=i.enumerate(this._stars$1);a.moveNext();){var l=a.current,f=25/Math.pow(1.6,l.magnitude);P.drawPointPlanet(e,l.position,f,l.col,!1)}}},requestImage:function(){!this.downloading&&!this.readyToRender&&(this.downloading=!0,this._webFile$1=new fr(Nt.singleton.rewrite(this.get_URL(),0)),this._webFile$1.onStateChange=i.bind("fileStateChange",this),this._webFile$1.send())},fileStateChange:function(){this._webFile$1.get_state()===2?(this.downloading=!1,this.readyToRender=!1,this.errored=!0,this.requestPending=!1,Oe.removeFromQueue(this.get_key(),!0)):this._webFile$1.get_state()===1&&(this.texReady=!0,this.downloading=!1,this.errored=!1,this.readyToRender=this.texReady&&(this.demReady||!this.demTile),this.requestPending=!1,Oe.removeFromQueue(this.get_key(),!0),this._loadData$1(this._webFile$1.getText()))},_loadData$1:function(e){for(var t=i.replaceString(e,`\r
`,`
`).split(`
`),r=!0,n=null,a=i.enumerate(t);a.moveNext();){var l=a.current;if(r){r=!1;continue}i.trim(l).length>5&&(n=new Ns(l),n.position=V.raDecTo3dAu(n.RA,n.dec,1),this._stars$1.push(n))}},isPointInTile:function(e,t){if(!this.level)return!0;if(this.level===1)return t>=0&&t<=90&&!this.tileX&&this.tileY===1||t>90&&t<=180&&this.tileX===1&&this.tileY===1||t<0&&t>=-90&&!this.tileX&&!this.tileY||t<-90&&t>=-180&&this.tileX===1&&!this.tileY;if(!this.demReady||this.demData==null)return!1;var r=V.geoTo3dDouble(-e,t),n=this._isLeftOfHalfSpace$1(this.topLeft.copy(),this.topRight.copy(),r),a=this._isLeftOfHalfSpace$1(this.topRight.copy(),this.bottomRight.copy(),r),l=this._isLeftOfHalfSpace$1(this.bottomRight.copy(),this.bottomLeft.copy(),r),f=this._isLeftOfHalfSpace$1(this.bottomLeft.copy(),this.topLeft.copy(),r);return!!(n&&a&&l&&f)},_isLeftOfHalfSpace$1:function(e,t,r){e.normalize(),t.normalize();var n=I.cross(e,t),a=I.dot(n,r);return a<0},_initializeGrids$1:function(){if(this._vertexList$1=[],this._childTriangleList$1=new Array(4),this._childTriangleList$1[0]=[],this._childTriangleList$1[1]=[],this._childTriangleList$1[2]=[],this._childTriangleList$1[3]=[],this.bounds=new Array(9),this.level>0){this.parent==null&&(this.parent=Oe.getTile(this.level-1,this.tileX/2,this.tileY/2,this.dataset,null));var e=this.parent,t=this.tileX%2,r=this.tileY%2;this.level>1?this.backslash=e.backslash:this.backslash=(t===1^r===1)===1,this.bounds[0+3*0]=e.bounds[t+3*r].copy(),this.bounds[1+3*0]=this._midpoint$1(e.bounds[t+3*r],e.bounds[t+1+3*r]),this.bounds[2+3*0]=e.bounds[t+1+3*r].copy(),this.bounds[0+3*1]=this._midpoint$1(e.bounds[t+3*r],e.bounds[t+3*(r+1)]),this.backslash?this.bounds[1+3*1]=this._midpoint$1(e.bounds[t+3*r],e.bounds[t+1+3*(r+1)]):this.bounds[1+3*1]=this._midpoint$1(e.bounds[t+1+3*r],e.bounds[t+3*(r+1)]),this.bounds[2+3*1]=this._midpoint$1(e.bounds[t+1+3*r],e.bounds[t+1+3*(r+1)]),this.bounds[0+3*2]=e.bounds[t+3*(r+1)].copy(),this.bounds[1+3*2]=this._midpoint$1(e.bounds[t+3*(r+1)],e.bounds[t+1+3*(r+1)]),this.bounds[2+3*2]=e.bounds[t+1+3*(r+1)].copy(),this.bounds[0+3*0].tu=0*O.uvMultiple,this.bounds[0+3*0].tv=0*O.uvMultiple,this.bounds[1+3*0].tu=.5*O.uvMultiple,this.bounds[1+3*0].tv=0*O.uvMultiple,this.bounds[2+3*0].tu=1*O.uvMultiple,this.bounds[2+3*0].tv=0*O.uvMultiple,this.bounds[0+3*1].tu=0*O.uvMultiple,this.bounds[0+3*1].tv=.5*O.uvMultiple,this.bounds[1+3*1].tu=.5*O.uvMultiple,this.bounds[1+3*1].tv=.5*O.uvMultiple,this.bounds[2+3*1].tu=1*O.uvMultiple,this.bounds[2+3*1].tv=.5*O.uvMultiple,this.bounds[0+3*2].tu=0*O.uvMultiple,this.bounds[0+3*2].tv=1*O.uvMultiple,this.bounds[1+3*2].tu=.5*O.uvMultiple,this.bounds[1+3*2].tv=1*O.uvMultiple,this.bounds[2+3*2].tu=1*O.uvMultiple,this.bounds[2+3*2].tv=1*O.uvMultiple}else this.bounds[0+3*0]=Ue.create(0,-1,0,0,0),this.bounds[1+3*0]=Ue.create(0,0,1,.5,0),this.bounds[2+3*0]=Ue.create(0,-1,0,1,0),this.bounds[0+3*1]=Ue.create(-1,0,0,0,.5),this.bounds[1+3*1]=Ue.create(0,1,0,.5,.5),this.bounds[2+3*1]=Ue.create(1,0,0,1,.5),this.bounds[0+3*2]=Ue.create(0,-1,0,0,1),this.bounds[1+3*2]=Ue.create(0,0,-1,.5,1),this.bounds[2+3*2]=Ue.create(0,-1,0,1,1)},_midpoint$1:function(e,t){var r=I.lerp(e.position,t.position,.5),n=xe.lerp(xe.create(e.tu,e.tv),xe.create(t.tu,t.tv),.5);return r.normalize(),Ue.createPos(r,n.x,n.y)},createGeometry:function(e){return this.geometryCreated||(this.geometryCreated=!0,O.prototype.createGeometry.call(this,e)),!0},cleanUp:function(e){O.prototype.cleanUp.call(this,e),this._vertexList$1!=null&&(this._vertexList$1=null),this._childTriangleList$1!=null&&(this._childTriangleList$1=null),this._subDivided$1=!1,this.demArray=null}};function cs(e,t,r,n,a){this._topDown$1=!0,O.call(this),this.parent=a,this.level=e,this.tileX=t,this.tileY=r,this.dataset=n,this._topDown$1=!n.get_bottomsUp(),this.computeBoundingSphere()}var If={computeBoundingSphere:function(){if(!this._topDown$1){this.computeBoundingSphereBottomsUp();return}var e=this.dataset.get_baseTileDegrees()/Math.pow(2,this.level),t=this.dataset.get_baseTileDegrees()/2-this.tileY*e+this.dataset.get_offsetY(),r=this.dataset.get_baseTileDegrees()/2-(this.tileY+1)*e+this.dataset.get_offsetY(),n=this.tileX*e-this.dataset.get_baseTileDegrees()/this.dataset.get_widthFactor()+this.dataset.get_offsetX(),a=(this.tileX+1)*e-this.dataset.get_baseTileDegrees()/this.dataset.get_widthFactor()+this.dataset.get_offsetX(),l=(t+r)/2,f=(n+a)/2;this.sphereCenter=this.geoTo3dTan(l,f),this.topLeft=this.geoTo3dTan(t,n),this.bottomRight=this.geoTo3dTan(r,a),this.topRight=this.geoTo3dTan(t,a),this.bottomLeft=this.geoTo3dTan(r,n);var c=this.geoTo3dTan(t,n);c.subtract(this.sphereCenter),this.sphereRadius=c.length()},computeBoundingSphereBottomsUp:function(){var e=this.dataset.get_baseTileDegrees()/Math.pow(2,this.level),t=this.dataset.get_baseTileDegrees()/2+(this.tileY+1)*e+this.dataset.get_offsetY(),r=this.dataset.get_baseTileDegrees()/2+this.tileY*e+this.dataset.get_offsetY(),n=this.tileX*e-this.dataset.get_baseTileDegrees()/this.dataset.get_widthFactor()+this.dataset.get_offsetX(),a=(this.tileX+1)*e-this.dataset.get_baseTileDegrees()/this.dataset.get_widthFactor()+this.dataset.get_offsetX();this.topLeft=this.geoTo3dTan(t,n),this.bottomRight=this.geoTo3dTan(r,a),this.topRight=this.geoTo3dTan(t,a),this.bottomLeft=this.geoTo3dTan(r,n)},getLatLngEdges:function(){var e=this.dataset.get_baseTileDegrees()/Math.pow(2,this.level),t=new Vs;return t.latMin=this.dataset.get_baseTileDegrees()/2-this.tileY*e+this.dataset.get_offsetY(),t.latMax=this.dataset.get_baseTileDegrees()/2-(this.tileY+1)*e+this.dataset.get_offsetY(),t.lngMin=this.tileX*e-this.dataset.get_baseTileDegrees()/this.dataset.get_widthFactor()+this.dataset.get_offsetX(),t.lngMax=(this.tileX+1)*e-this.dataset.get_baseTileDegrees()/this.dataset.get_widthFactor()+this.dataset.get_offsetX(),t},geoTo3dTan:function(e,t){t=-t;var r=this.dataset.get_baseTileDegrees()/2,n=Math.tan(r*O.RC);return this.dataset.get_matrix().transform(I.create(1,e/r*n,t/r*n))},requestImage:function(){this.fitsImage=i.safeCast(this.dataset.get_wcsImage(),nr),this.fitsImage!=null?(this.texReady=!0,this.downloading=!1,this.errored=this.fitsImage.errored,this.requestPending=!1,Oe.removeFromQueue(this.get_key(),!0),Zt.useGlVersion2?(this.makeTexture(),this.readyToRender=!0):(this.bmp=this.fitsImage.getBitmap(),this.texture2d=this.bmp.getTexture(),this.readyToRender=!0)):O.prototype.requestImage.call(this)},createGeometry:function(e){if(this.geometryCreated)return!0;this.geometryCreated=!0;for(var t=0;t<4;t++)this._renderTriangleLists[t]=[];this.globalCenter=this.geoTo3dTan(0,0);var r=this.getLatLngEdges();this.topLeft=this.geoTo3dTan(r.latMin,r.lngMin).subtract(this.globalCenter),this.bottomRight=this.geoTo3dTan(r.latMax,r.lngMax).subtract(this.globalCenter),this.topRight=this.geoTo3dTan(r.latMin,r.lngMax).subtract(this.globalCenter),this.bottomLeft=this.geoTo3dTan(r.latMax,r.lngMin).subtract(this.globalCenter);var n=I.midPoint(this.topLeft,this.bottomRight),a=I.midPoint(this.topLeft,this.bottomLeft),l=I.midPoint(this.topRight,this.bottomRight),f=I.midPoint(this.topLeft,this.topRight),c=I.midPoint(this.bottomLeft,this.bottomRight);if(e.gl==null)this._renderTriangleLists[0].push(Ct.create(Ue.createPos(this.topLeft,0,0),Ue.createPos(a,0,.5),Ue.createPos(f,.5,0),this.texture,this.level)),this._renderTriangleLists[0].push(Ct.create(Ue.createPos(a,0,.5),Ue.createPos(n,.5,.5),Ue.createPos(f,.5,0),this.texture,this.level)),this._renderTriangleLists[1].push(Ct.create(Ue.createPos(f,.5,0),Ue.createPos(l,1,.5),Ue.createPos(this.topRight,1,0),this.texture,this.level)),this._renderTriangleLists[1].push(Ct.create(Ue.createPos(f,.5,0),Ue.createPos(n,.5,.5),Ue.createPos(l,1,.5),this.texture,this.level)),this._renderTriangleLists[2].push(Ct.create(Ue.createPos(a,0,.5),Ue.createPos(c,.5,1),Ue.createPos(n,.5,.5),this.texture,this.level)),this._renderTriangleLists[2].push(Ct.create(Ue.createPos(a,0,.5),Ue.createPos(this.bottomLeft,0,1),Ue.createPos(c,.5,1),this.texture,this.level)),this._renderTriangleLists[3].push(Ct.create(Ue.createPos(n,.5,.5),Ue.createPos(this.bottomRight,1,1),Ue.createPos(l,1,.5),this.texture,this.level)),this._renderTriangleLists[3].push(Ct.create(Ue.createPos(n,.5,.5),Ue.createPos(c,.5,1),Ue.createPos(this.bottomRight,1,1),this.texture,this.level)),this.readyToRender=!0;else{this._vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this._vertexBuffer);var d=new Float32Array(9*5),m=d,v=0;v=this.addVertex(m,v,Ue.createPos(c,.5,1)),v=this.addVertex(m,v,Ue.createPos(this.bottomLeft,0,1)),v=this.addVertex(m,v,Ue.createPos(this.bottomRight,1,1)),v=this.addVertex(m,v,Ue.createPos(n,.5,.5)),v=this.addVertex(m,v,Ue.createPos(a,0,.5)),v=this.addVertex(m,v,Ue.createPos(l,1,.5)),v=this.addVertex(m,v,Ue.createPos(f,.5,0)),v=this.addVertex(m,v,Ue.createPos(this.topLeft,0,0)),v=this.addVertex(m,v,Ue.createPos(this.topRight,1,0)),O.prepDevice.bufferData(34962,d,35044);for(var t=0;t<4;t++){v=0,this.triangleCount=2;var C=new Uint16Array(this.triangleCount*3),T=C;switch(t){case 0:T[v++]=7,T[v++]=4,T[v++]=6,T[v++]=4,T[v++]=3,T[v++]=6;break;case 1:T[v++]=6,T[v++]=5,T[v++]=8,T[v++]=6,T[v++]=3,T[v++]=5;break;case 2:T[v++]=4,T[v++]=0,T[v++]=3,T[v++]=4,T[v++]=1,T[v++]=0;break;case 3:T[v++]=3,T[v++]=2,T[v++]=5,T[v++]=3,T[v++]=0,T[v++]=2;break}this._indexBuffers[t]=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,this._indexBuffers[t]),O.prepDevice.bufferData(34963,C,35044)}}return!0}};function ki(){this._topDown$1=!0,this.backslash=!1,this._vertexList$1=null,this._childTriangleList$1=null,this._subDivisionLevel$1=4,this._subDivided$1=!1,O.call(this)}ki._cloneArray$1=function(e){for(var t=e.length,r=new Uint16Array(t),n=r,a=0;a<t;a++)n[a]=e[a];return n},ki.create=function(e,t,r,n,a){var l=new ki;return l.parent=a,l.level=e,l.tileX=t,l.tileY=r,l.dataset=n,l._topDown$1=!n.get_bottomsUp(),l.tileX!==t&&alert("bad"),n.get_meanRadius()?l.set__demScaleFactor(n.get_meanRadius()):n.get_dataSetType()?l.set__demScaleFactor(3396010):l.set__demScaleFactor(6371e3),l.computeBoundingSphere(),l};var Pf={computeBoundingSphere:function(){this._initializeGrids$1(),this.topLeft=this.bounds[0+3*0].position.copy(),this.bottomRight=this.bounds[2+3*2].position.copy(),this.topRight=this.bounds[2+3*0].position.copy(),this.bottomLeft=this.bounds[0+3*2].position.copy(),this.calcSphere()},getIndexBuffer:function(e,t){return this.level?this.backslash?ki.backSlashIndexBuffer[e*16+t]:ki.slashIndexBuffer[e*16+t]:ki.rootIndexBuffer[e]},_processIndexBuffer$1:function(e,t){if(!this.level){ki.rootIndexBuffer[t]=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,ki.rootIndexBuffer[t]),O.prepDevice.bufferData(34963,e,35044);return}for(var r=0;r<16;r++){var n=ki._cloneArray$1(e);this._processAccomindations$1(n,r),this.backslash?(ki.backSlashIndexBuffer[t*16+r]=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,ki.backSlashIndexBuffer[t*16+r]),O.prepDevice.bufferData(34963,n,35044)):(ki.slashIndexBuffer[t*16+r]=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34963,ki.slashIndexBuffer[t*16+r]),O.prepDevice.bufferData(34963,n,35044))}},_processAccomindations$1:function(e,t){for(var r={},n={},a=i.enumerate(e);a.moveNext();){var l=a.current,f=this._vertexList$1[l],c=i.truncate(f.tu*16+.5),d=i.truncate(f.tv*16+.5),m=(d<<8)+c;i.keyExists(n,m)||(n[m]=l)}var v=16;if((t&1)===1)for(var C=1;C<v;C+=2){var T=v,A=(T<<8)+C,$=(T<<8)+C+1;i.keyExists(n,A)&&(r[n[A]]=n[$])}if((t&2)===2)for(var T=1;T<v;T+=2){var C=v,A=(T<<8)+C,$=(T+1<<8)+C;i.keyExists(n,A)&&(r[n[A]]=n[$])}if((t&4)===4)for(var C=1;C<v;C+=2){var T=0,A=(T<<8)+C,$=(T<<8)+C+1;i.keyExists(n,A)&&(r[n[A]]=n[$])}if((t&8)===8)for(var T=1;T<v;T+=2){var C=0,A=(T<<8)+C,$=(T+1<<8)+C;i.keyExists(n,A)&&(r[n[A]]=n[$])}if(i.keyCount(r))for(var N=0;N<e.length;N++)i.keyExists(r,e[N])&&(e[N]=r[e[N]])},calculateFullSphere:function(e){var t=An.findEnclosingSphere(e);this.sphereCenter=t.center,this.sphereRadius=t.radius},isPointInTile:function(e,t){if(!this.level)return!0;if(this.level===1)return t>=0&&t<=90&&!this.tileX&&this.tileY===1||t>90&&t<=180&&this.tileX===1&&this.tileY===1||t<0&&t>=-90&&!this.tileX&&!this.tileY||t<-90&&t>=-180&&this.tileX===1&&!this.tileY;if(!this.demReady||this.demData==null)return!1;var r=V.geoTo3dDouble(-e,t),n=this._isLeftOfHalfSpace$1(this.topLeft.copy(),this.topRight.copy(),r),a=this._isLeftOfHalfSpace$1(this.topRight.copy(),this.bottomRight.copy(),r),l=this._isLeftOfHalfSpace$1(this.bottomRight.copy(),this.bottomLeft.copy(),r),f=this._isLeftOfHalfSpace$1(this.bottomLeft.copy(),this.topLeft.copy(),r);return!!(n&&a&&l&&f)},_isLeftOfHalfSpace$1:function(e,t,r){e.normalize(),t.normalize();var n=I.cross(e,t),a=I.dot(n,r);return a<0},getSurfacePointAltitude:function(e,t,r){if(this.level<O.lastDeepestLevel)for(var n=0;n<4;n++){var a=this.children[n];if(a!=null&&a.isPointInTile(e,t)){var l=a.getSurfacePointAltitude(e,t,r);if(l)return l;break}}O.tileTargetLevel=this.level,O.tileTargetX=this.tileX,O.tileTargetY=this.tileY;var f=V.geoTo3dDouble(-e,t);f=I.subtractVectors(new I,f);var c=bn.getUVFromInnerPoint(this.topLeft.copy(),this.topRight.copy(),this.bottomLeft.copy(),this.bottomRight.copy(),f.copy()),d=Math.max(0,Math.min(16,c.x*16)),m=Math.max(0,Math.min(16,c.y*16)),v=Math.max(0,Math.min(15,i.truncate(c.x*16))),C=Math.max(0,Math.min(15,i.truncate(c.y*16))),T=d-v,A=m-C;if(this.demArray!=null){var $=this.demArray[v+17*C],N=this.demArray[v+1+17*C],F=this.demArray[v+17*(C+1)],z=this.demArray[v+1+17*(C+1)],Y=$*(1-T)+T*N,W=F*(1-T)+T*z,ee=Y*(1-A)+A*W;return ee/this.get__demScaleFactor()}return this.demAverage/this.get__demScaleFactor()},_initializeGrids$1:function(){if(this._vertexList$1=[],this._childTriangleList$1=new Array(4),this._childTriangleList$1[0]=[],this._childTriangleList$1[1]=[],this._childTriangleList$1[2]=[],this._childTriangleList$1[3]=[],this.bounds=new Array(9),this.level>0){this.parent==null&&(this.parent=Oe.getTile(this.level-1,this.tileX/2,this.tileY/2,this.dataset,null));var e=this.parent,t=this.tileX%2,r=this.tileY%2;this.level>1?this.backslash=e.backslash:this.backslash=(t===1^r===1)===1,this.bounds[0+3*0]=e.bounds[t+3*r].copy(),this.bounds[1+3*0]=this._midpoint$1(e.bounds[t+3*r],e.bounds[t+1+3*r]),this.bounds[2+3*0]=e.bounds[t+1+3*r].copy(),this.bounds[0+3*1]=this._midpoint$1(e.bounds[t+3*r],e.bounds[t+3*(r+1)]),this.backslash?this.bounds[1+3*1]=this._midpoint$1(e.bounds[t+3*r],e.bounds[t+1+3*(r+1)]):this.bounds[1+3*1]=this._midpoint$1(e.bounds[t+1+3*r],e.bounds[t+3*(r+1)]),this.bounds[2+3*1]=this._midpoint$1(e.bounds[t+1+3*r],e.bounds[t+1+3*(r+1)]),this.bounds[0+3*2]=e.bounds[t+3*(r+1)].copy(),this.bounds[1+3*2]=this._midpoint$1(e.bounds[t+3*(r+1)],e.bounds[t+1+3*(r+1)]),this.bounds[2+3*2]=e.bounds[t+1+3*(r+1)].copy(),this.bounds[0+3*0].tu=0*O.uvMultiple,this.bounds[0+3*0].tv=0*O.uvMultiple,this.bounds[1+3*0].tu=.5*O.uvMultiple,this.bounds[1+3*0].tv=0*O.uvMultiple,this.bounds[2+3*0].tu=1*O.uvMultiple,this.bounds[2+3*0].tv=0*O.uvMultiple,this.bounds[0+3*1].tu=0*O.uvMultiple,this.bounds[0+3*1].tv=.5*O.uvMultiple,this.bounds[1+3*1].tu=.5*O.uvMultiple,this.bounds[1+3*1].tv=.5*O.uvMultiple,this.bounds[2+3*1].tu=1*O.uvMultiple,this.bounds[2+3*1].tv=.5*O.uvMultiple,this.bounds[0+3*2].tu=0*O.uvMultiple,this.bounds[0+3*2].tv=1*O.uvMultiple,this.bounds[1+3*2].tu=.5*O.uvMultiple,this.bounds[1+3*2].tv=1*O.uvMultiple,this.bounds[2+3*2].tu=1*O.uvMultiple,this.bounds[2+3*2].tv=1*O.uvMultiple,this._vertexList$1.push(this.bounds[0+3*0]),this._vertexList$1.push(this.bounds[1+3*0]),this._vertexList$1.push(this.bounds[2+3*0]),this._vertexList$1.push(this.bounds[0+3*1]),this._vertexList$1.push(this.bounds[1+3*1]),this._vertexList$1.push(this.bounds[2+3*1]),this._vertexList$1.push(this.bounds[0+3*2]),this._vertexList$1.push(this.bounds[1+3*2]),this._vertexList$1.push(this.bounds[2+3*2]),this.backslash?(this._childTriangleList$1[0].push(mi.create(4,1,0)),this._childTriangleList$1[0].push(mi.create(3,4,0)),this._childTriangleList$1[1].push(mi.create(5,2,1)),this._childTriangleList$1[1].push(mi.create(4,5,1)),this._childTriangleList$1[2].push(mi.create(7,4,3)),this._childTriangleList$1[2].push(mi.create(6,7,3)),this._childTriangleList$1[3].push(mi.create(8,5,4)),this._childTriangleList$1[3].push(mi.create(7,8,4))):(this._childTriangleList$1[0].push(mi.create(3,1,0)),this._childTriangleList$1[0].push(mi.create(4,1,3)),this._childTriangleList$1[1].push(mi.create(4,2,1)),this._childTriangleList$1[1].push(mi.create(5,2,4)),this._childTriangleList$1[2].push(mi.create(6,4,3)),this._childTriangleList$1[2].push(mi.create(7,4,6)),this._childTriangleList$1[3].push(mi.create(7,5,4)),this._childTriangleList$1[3].push(mi.create(8,5,7)))}else this.bounds[0+3*0]=Ue.create(0,-1,0,0,0),this.bounds[1+3*0]=Ue.create(0,0,1,.5,0),this.bounds[2+3*0]=Ue.create(0,-1,0,1,0),this.bounds[0+3*1]=Ue.create(-1,0,0,0,.5),this.bounds[1+3*1]=Ue.create(0,1,0,.5,.5),this.bounds[2+3*1]=Ue.create(1,0,0,1,.5),this.bounds[0+3*2]=Ue.create(0,-1,0,0,1),this.bounds[1+3*2]=Ue.create(0,0,-1,.5,1),this.bounds[2+3*2]=Ue.create(0,-1,0,1,1),this._vertexList$1.push(this.bounds[0+3*0]),this._vertexList$1.push(this.bounds[1+3*0]),this._vertexList$1.push(this.bounds[2+3*0]),this._vertexList$1.push(this.bounds[0+3*1]),this._vertexList$1.push(this.bounds[1+3*1]),this._vertexList$1.push(this.bounds[2+3*1]),this._vertexList$1.push(this.bounds[0+3*2]),this._vertexList$1.push(this.bounds[1+3*2]),this._vertexList$1.push(this.bounds[2+3*2]),this._childTriangleList$1[0].push(mi.create(3,1,0)),this._childTriangleList$1[0].push(mi.create(4,1,3)),this._childTriangleList$1[1].push(mi.create(5,2,1)),this._childTriangleList$1[1].push(mi.create(4,5,1)),this._childTriangleList$1[2].push(mi.create(7,4,3)),this._childTriangleList$1[2].push(mi.create(6,7,3)),this._childTriangleList$1[3].push(mi.create(7,5,4)),this._childTriangleList$1[3].push(mi.create(8,5,7))},_midpoint$1:function(e,t){var r=I.lerp(e.position,t.position,.5),n=xe.lerp(xe.create(e.tu,e.tv),xe.create(t.tu,t.tv),.5);return r.normalize(),Ue.createPos(r,n.x,n.y)},createGeometry:function(e){if(this.geometryCreated)return!0;if(this.geometryCreated=!0,O.prototype.createGeometry.call(this,e),!this._subDivided$1){this._vertexList$1==null&&this._initializeGrids$1(),O.uvMultiple===256?!this.dataset.get_dataSetType()||this.dataset.get_dataSetType()===1?this._subDivisionLevel$1=Math.min(5,Math.max(0,5-this.level)):this._subDivisionLevel$1=Math.min(5,Math.max(0,5-this.level)):this.demTile&&this.level>1&&(this.demArray=new Array(17*17),this.demSize=17*17,this.backslash?ki._backslashYIndex$1==null&&(this._tempBackslashYIndex$1=new Array(this.demSize),this._tempBackslashXIndex$1=new Array(this.demSize)):ki._slashYIndex$1==null&&(this._tempSlashYIndex$1=new Array(this.demSize),this._tempSlashXIndex$1=new Array(this.demSize)));for(var t=0;t<4;t++)for(var r=this._subDivisionLevel$1;r-- >1;){for(var n=[],a=i.enumerate(this._childTriangleList$1[t]);a.moveNext();){var l=a.current;l.subDivide(n,this._vertexList$1)}this._childTriangleList$1[t]=n}if(e.gl==null)for(var t=0;t<4;t++){this._renderTriangleLists[t]=[];for(var f=i.enumerate(this._childTriangleList$1[t]);f.moveNext();){var l=f.current,c=this._vertexList$1[l.c],d=this._vertexList$1[l.b],m=this._vertexList$1[l.a];this._renderTriangleLists[t].push(Ct.create(c,d,m,this.texture,this.level))}}else{this._vertexBuffer=O.prepDevice.createBuffer(),O.prepDevice.bindBuffer(34962,this._vertexBuffer);for(var v=new Float32Array(this._vertexList$1.length*5),C=v,T=0,A=i.enumerate(this._vertexList$1);A.moveNext();){var $=A.current;this.demTile?(T=this.addVertex(C,T,this._getMappedVertex($)),this.demIndex++):T=this.addVertex(C,T,$)}this.demTile&&(this.backslash?this._tempBackslashXIndex$1!=null&&(ki._backslashXIndex$1=this._tempBackslashXIndex$1,ki._backslashYIndex$1=this._tempBackslashYIndex$1,this._tempBackslashXIndex$1=null,this._tempBackslashYIndex$1=null):this._tempSlashYIndex$1!=null&&(ki._slashXIndex$1=this._tempSlashXIndex$1,ki._slashYIndex$1=this._tempSlashYIndex$1,this._tempSlashYIndex$1=null,this._tempSlashXIndex$1=null)),O.prepDevice.bufferData(34962,v,35044);for(var t=0;t<4;t++)if(this.triangleCount=this._childTriangleList$1[t].length,this.getIndexBuffer(t,0)==null){var N=new Uint16Array(this.triangleCount*3),F=N;T=0;for(var z=i.enumerate(this._childTriangleList$1[t]);z.moveNext();){var l=z.current;F[T++]=l.c,F[T++]=l.b,F[T++]=l.a}this._processIndexBuffer$1(F,t)}}this._subDivided$1=!0}return!0},_getMappedVertex:function(e){var t=new Ue,r=V.cartesianToSpherical2(e.position);if(r.get_lng()<-180&&r.set_lng(r.get_lng()+360),r.get_lng()>180&&r.set_lng(r.get_lng()-360),this.level>1){var n=i.truncate(e.tu*16+.5),a=i.truncate(e.tv*16+.5);this.demArray[n+a*17]=this.demData[this.demIndex],this.backslash?this._tempBackslashYIndex$1!=null&&(this._tempBackslashXIndex$1[this.demIndex]=n,this._tempBackslashYIndex$1[this.demIndex]=a):this._tempSlashYIndex$1!=null&&(this._tempSlashXIndex$1[this.demIndex]=n,this._tempSlashYIndex$1[this.demIndex]=a)}var l=this.geoTo3dWithAlt(r.get_lat(),r.get_lng(),!1,!1);return t.tu=e.tu,t.tv=e.tv,l.subtract(this.localCenter),t.position=l,t},cleanUp:function(e){O.prototype.cleanUp.call(this,e),this._vertexList$1!=null&&(this._vertexList$1=null),this._childTriangleList$1!=null&&(this._childTriangleList$1=null),this._subDivided$1=!1,this.demArray=null},_getDemSample$1:function(e,t){return this.demArray[(16-t)*17+e]},createDemFromParent:function(){var e=i.safeCast(this.parent,ki);if(e==null)return!1;var t=this.tileX%2===1?8:0,r=this.tileY%2?0:8;this.demArray=new Array(17*17);for(var n=0;n<17;n+=2)for(var a=!0,l=0;l<17;l++)a?this.demArray[(16-n)*17+l]=e._getDemSample$1(l/2+t,n/2+r):this.demArray[(16-n)*17+l]=(e._getDemSample$1(l/2+t,n/2+r)+e._getDemSample$1(l/2+t+1,n/2+r))/2,a=!a;for(var f=1;f<17;f+=2)for(var c=0;c<17;c++)this.demArray[(16-f)*17+c]=(this._getDemSample$1(c,f-1)+this._getDemSample$1(c,f+1))/2;this.demData=new Array(this.demSize);for(var d=0;d<this.demSize;d++)this.backslash?this.demData[d]=this.demArray[ki._backslashXIndex$1[d]+ki._backslashYIndex$1[d]*17]:this.demData[d]=this.demArray[ki._slashXIndex$1[d]+ki._slashYIndex$1[d]*17],this.demAverage+=this.demData[d];return this.demAverage/=this.demData.length,this.demReady=!0,!0}};function ra(){this._textureReady$1=!1,this._sprite$1=new Wn,_i.call(this)}ra.create=function(e,t){var r=new ra;return r.set_owner(e),r._filename$1=t.name,r.set_name(e.getNextDefaultName("Image")),r.set_x(0),r.set_y(0),e.get_owner().addCachedFile(t.name,t),r};var Rf={getTypeName:function(){return"TerraViewer.BitmapOverlay"},copy:function(e){var t=new ra;return t.set_owner(e),t._filename$1=this._filename$1,t.set_x(this.get_x()),t.set_y(this.get_y()),t.set_width(this.get_width()),t.set_height(this.get_height()),t.set_color(this.get_color()),t.set_opacity(this.get_opacity()),t.set_rotationAngle(this.get_rotationAngle()),t.set_name(this.get_name()+" - Copy"),t},cleanUp:function(){this.texture=null,this.texture2d!=null&&(this.texture2d.cleanUp(),this.texture2d=null)},initializeTexture:function(){var e=this;try{Zt.useGl?(this.texture2d=this.get_owner().get_owner().getCachedTexture2d(this._filename$1),this._textureReady$1=!0):this.texture=this.get_owner().get_owner().getCachedTexture(this._filename$1,function(){e._textureReady$1=!0})}catch{}},draw3D:function(e,t){if(Zt.useGl)this.texture2d==null&&this.initializeTexture(),!this.get_width()&&!this.get_height()&&(this.set_width(this.texture2d.imageElement.width),this.set_height(this.texture2d.imageElement.height)),this.initializeGeometry(),this.updateRotation(),this._sprite$1.draw(e,this.points,this.points.length,this.texture2d,!0,1);else{if(this.texture==null&&this.initializeTexture(),!this._textureReady$1)return;!this.get_width()&&!this.get_height()&&(this.set_width(this.texture.width),this.set_height(this.texture.height));var r=e.device;r.save(),r.translate(this.get_x(),this.get_y()),r.rotate(this.get_rotationAngle()*_i.RC),r.globalAlpha=this.get_opacity(),r.drawImage(this.texture,-this.get_width()/2,-this.get_height()/2,this.get_width(),this.get_height()),r.restore()}},addFilesToCabinet:function(e){e.addFile(this.get_owner().get_owner().get_workingDirectory()+this._filename$1,this.get_owner().get_owner().getFileBlob(this._filename$1))},writeOverlayProperties:function(e){e._writeStartElement("Bitmap"),e._writeAttributeString("Filename",this._filename$1),e._writeEndElement()},initializeFromXml:function(e){var t=ye.selectSingleNode(e,"Bitmap");this._filename$1=t.attributes.getNamedItem("Filename").nodeValue}};function jr(){this._sprite$1=new Wn,this._ctx$1=null,this._ce$1=null,_i.call(this)}jr.create=function(e){var t=new jr;return t.textObject=e,t._calculateTextSize$1(),t};var $f={getTypeName:function(){return"TerraViewer.TextOverlay"},get_color:function(){return _i.prototype.get_color.call(this)},set_color:function(e){return this.textObject.foregroundColor!==e&&(this.textObject.foregroundColor=e,_i.prototype.set_color.call(this,e),this.cleanUp()),e},draw3D:function(e,t){if(Zt.useGl)this.initializeTexture(),this.initializeGeometry(),this.updateRotation(),this._sprite$1.draw(e,this.points,this.points.length,this.texture2d,!0,1);else{var r=e.device;r.save(),r.translate(this.get_x(),this.get_y()),r.rotate(this.get_rotationAngle()*_i.RC),r.globalAlpha=this.get_opacity(),this._drawCanvasText$1(r),r.restore()}},_drawCanvasText$1:function(e){e.fillStyle=this.textObject.foregroundColor.toString(),e.font=(this.textObject.italic?"italic":"normal")+" "+(this.textObject.bold?"bold":"normal")+" "+Math.round(this.textObject.fontSize*1.2).toString()+"px "+this.textObject.fontName,e.textBaseline="top";var t=this.textObject.text;if(t.indexOf("{$")>-1){if(t.indexOf("{$DATE}")>-1){var r=i.format("{0:yyyy/MM/dd}",K.get_now());t=i.replaceString(t,"{$DATE}",r)}if(t.indexOf("{$TIME}")>-1){var n=i.format("{0:HH:mm:ss}",K.get_now());t=i.replaceString(t,"{$TIME}",n)}t=i.replaceString(t,"{$DIST}",bi.formatDistance(q.singleton.renderContext.get_solarSystemCameraDistance())),t=i.replaceString(t,"{$LAT}",V.formatDMS(q.singleton.renderContext.viewCamera.lat)),t=i.replaceString(t,"{$LNG}",V.formatDMS(q.singleton.renderContext.viewCamera.lat)),t=i.replaceString(t,"{$RA}",V.formatDMS(q.singleton.renderContext.viewCamera.get_RA())),t=i.replaceString(t,"{$DEC}",V.formatDMS(q.singleton.renderContext.viewCamera.get_dec())),t=i.replaceString(t,"{$FOV}",V.formatDMS(q.singleton.renderContext.get_fovAngle()))}for(var a=t.split(`
`),l=-(this.get_height()/2),f=this.textObject.fontSize*1.7,c=i.enumerate(a);c.moveNext();)for(var d=c.current,m=ye.getWrappedText(e,d,this.get_width()),v=i.enumerate(m);v.moveNext();){var C=v.current;e.fillText(C,-this.get_width()/2,l),l+=f}},_calculateTextSize$1:function(){(this._ctx$1==null||this._ce$1==null)&&(this._ce$1=document.createElement("canvas"),this._ce$1.height=100,this._ce$1.width=100,this._ctx$1=this._ce$1.getContext("2d")),this._ctx$1.fillStyle=this.textObject.foregroundColor.toString(),this._ctx$1.font=(this.textObject.italic?"italic":"normal")+" "+(this.textObject.bold?"bold":"normal")+" "+Math.round(this.textObject.fontSize*1.2).toString()+"px "+this.textObject.fontName,this._ctx$1.textBaseline="top";var e=this.textObject.text;if(e.indexOf("{$")>-1){if(e.indexOf("{$DATE}")>-1){var t=i.format("{0:yyyy/MM/dd}",K.get_now());e=i.replaceString(e,"{$DATE}",t)}if(e.indexOf("{$TIME}")>-1){var r=i.format("{0:HH:mm:ss}",K.get_now());e=i.replaceString(e,"{$TIME}",r)}e=i.replaceString(e,"{$DIST}",bi.formatDistance(q.singleton.renderContext.get_solarSystemCameraDistance())),e=i.replaceString(e,"{$LAT}",V.formatDMS(q.singleton.renderContext.viewCamera.lat)),e=i.replaceString(e,"{$LNG}",V.formatDMS(q.singleton.renderContext.viewCamera.lat)),e=i.replaceString(e,"{$RA}",V.formatDMS(q.singleton.renderContext.viewCamera.get_RA())),e=i.replaceString(e,"{$DEC}",V.formatDMS(q.singleton.renderContext.viewCamera.get_dec())),e=i.replaceString(e,"{$FOV}",V.formatDMS(q.singleton.renderContext.get_fovAngle()))}for(var n=e.split(`
`),a=0,l=this.textObject.fontSize*1.7,f=0,c=i.enumerate(n);c.moveNext();){var d=c.current,m=this._ctx$1.measureText(d).width;f=Math.max(m,f),a+=l}this.set_width(f*1.01),this.set_height(a),this._ce$1=null,this._ctx$1=null},initializeTexture:function(){(this.texture2d==null||this.textObject.text.indexOf("{$")>-1)&&((!this.get_height()||!this.get_width())&&this._calculateTextSize$1(),(this._ctx$1==null||this._ce$1==null)&&(this._ce$1=document.createElement("canvas"),this._ce$1.height=i.truncate(this.get_height()),this._ce$1.width=i.truncate(this.get_width()),this._ctx$1=this._ce$1.getContext("2d")),this._ctx$1.translate(this.get_width()/2,this.get_height()/2),this._ctx$1.clearRect(0,0,this.get_width(),this.get_height()),this._drawCanvasText$1(this._ctx$1),this.texture2d=new di,this.texture2d.imageElement=this._ce$1,this.texture2d.makeTexture(),this._ce$1=null,this._ctx$1=null)},writeOverlayProperties:function(e){e._writeStartElement("Text"),this.textObject._saveToXml(e),e._writeEndElement()},initializeFromXml:function(e){var t=ye.selectSingleNode(e,"Text");this.textObject=$n._fromXml(ye.selectSingleNode(t,"TextObject"))},initializeGeometry:function(){Zt.useGl&&_i.prototype.initializeGeometry.call(this)}};function na(){this._shapeType$1=1,this._sprite$1=new Wn,this._triangleStrip$1=!0,_i.call(this)}na._create=function(e,t){var r=new na;return r._shapeType$1=t,r.set_owner(e),r};var Ef={getTypeName:function(){return"TerraViewer.ShapeOverlay"},get_shapeType:function(){return this._shapeType$1},set_shapeType:function(e){return this._shapeType$1=e,this.cleanUpGeometry(),e},draw3D:function(e,t){if(Zt.useGl)this.initializeGeometry(),this._sprite$1.draw(e,this.points,this.points.length,null,this._triangleStrip$1,this.get_opacity());else switch(this._shapeType$1){case 0:this._drawCircleGeometry$1(e);break;case 1:this._drawRectGeometry$1(e);break;case 6:this._drawOpenRectGeometry$1(e);break;case 2:this._drawStarGeometry$1(e);break;case 3:this._drawDonutGeometry$1(e);break;case 4:this._drawArrowGeometry$1(e);break;case 5:this._drawLineGeometry$1(e);break}},initializeGeometry:function(){if(this.points==null)switch(this._shapeType$1){case 0:this._createCircleGeometry$1();break;case 1:_i.prototype.initializeGeometry.call(this);break;case 6:this._createOpenRectGeometry$1();break;case 2:this._createStarGeometry$1();break;case 3:this._createDonutGeometry$1();break;case 4:this._createArrowGeometry$1();break;case 5:this._createLineGeometry$1();break}},_createLineGeometry$1:function(){this.get_x(),this.get_y(),this.get_width()/2;var e=this.get_width(),t=i.truncate(e/12)+1;this.points==null&&(this.points=new Array(t*2+2));for(var r=0;r<=t;r++){var n=r*2;this.points[n]=new qt,this.points[n].position=this.makePosition(this.get_x(),this.get_y(),r/t*this.get_width()-this.get_width()/2,6,this.get_rotationAngle()),this.points[n].tu=r%2,this.points[n].tv=0,this.points[n].color=this.get_color(),this.points[n+1]=new qt,this.points[n+1].position=this.makePosition(this.get_x(),this.get_y(),r/t*this.get_width()-this.get_width()/2,-6,this.get_rotationAngle()),this.points[n+1].tu=r%2,this.points[n+1].tv=1,this.points[n+1].color=this.get_color()}},_createOpenRectGeometry$1:function(){var e=this.get_x(),t=this.get_y();this.get_width()/2;var r=this.get_width(),n=i.truncate(r/12)+1,a=i.truncate(this.get_height()/12)+1,l=((n+1)*2+(a+1)*2)*2;this.points==null&&(this.points=new Array(l));for(var f=0;f<=n;f++){var c=f*2;this.points[c]=new qt,this.points[c].position=this.makePosition(e,t,f/n*this.get_width()-this.get_width()/2,this.get_height()/2,this.get_rotationAngle()),this.points[c].tu=f%2,this.points[c].tv=0,this.points[c].color=this.get_color(),this.points[c+1]=new qt,this.points[c+1].position=this.makePosition(e,t,f/n*this.get_width()-this.get_width()/2,this.get_height()/2-12,this.get_rotationAngle()),this.points[c+1].tu=f%2,this.points[c+1].tv=1,this.points[c+1].color=this.get_color();var d=(n+1)*4+(a+1)*2-2-c;this.points[d]=new qt,this.points[d].position=this.makePosition(e,t,f/n*this.get_width()-this.get_width()/2,-(this.get_height()/2)+12,this.get_rotationAngle()),this.points[d].tu=f%2,this.points[d].tv=0,this.points[d].color=this.get_color(),this.points[d+1]=new qt,this.points[d+1].position=this.makePosition(e,t,f/n*this.get_width()-this.get_width()/2,-(this.get_height()/2),this.get_rotationAngle()),this.points[d+1].tu=f%2,this.points[d+1].tv=1,this.points[d+1].color=this.get_color()}for(var m=(n+1)*2,f=0;f<=a;f++){var v=(a+1)*2+m-2,c=f*2;this.points[v-c]=new qt,this.points[v-c].position=this.makePosition(e,t,this.get_width()/2,f/a*this.get_height()-this.get_height()/2,this.get_rotationAngle()),this.points[v-c].tu=f%2,this.points[v-c].tv=0,this.points[v-c].color=this.get_color(),this.points[v-c+1]=new qt,this.points[v-c+1].position=this.makePosition(e,t,this.get_width()/2-12,f/a*this.get_height()-this.get_height()/2,this.get_rotationAngle()),this.points[v-c+1].tu=f%2,this.points[v-c+1].tv=1,this.points[v-c+1].color=this.get_color();var d=c+(n+1)*4+(a+1)*2;this.points[d]=new qt,this.points[d].position=this.makePosition(e,t,-(this.get_width()/2)+12,f/a*this.get_height()-this.get_height()/2,this.get_rotationAngle()),this.points[d].tu=f%2,this.points[d].tv=0,this.points[d].color=this.get_color(),this.points[d+1]=new qt,this.points[d+1].position=this.makePosition(e,t,-(this.get_width()/2),f/a*this.get_height()-this.get_height()/2,this.get_rotationAngle()),this.points[d+1].tu=f%2,this.points[d+1].tv=1,this.points[d+1].color=this.get_color()}},_createStarGeometry$1:function(){var e=this.get_x(),t=this.get_y();this.get_width()/2;var r=Math.PI*2/5;this.points==null&&(this.points=new Array(12)),this._pnts$1==null&&(this._pnts$1=new Array(10));for(var n=0;n<5;n++){var a=n*r-Math.PI/2;this._pnts$1[n]=new qt,this._pnts$1[n].position=this.makePosition(e,t,Math.cos(a)*(this.get_width()/2),Math.sin(a)*(this.get_height()/2),this.get_rotationAngle()),this._pnts$1[n].tu=0,this._pnts$1[n].tv=0,this._pnts$1[n].color=this.get_color()}for(var n=5;n<10;n++){var a=n*r+r/2-Math.PI/2;this._pnts$1[n]=new qt,this._pnts$1[n].position=this.makePosition(e,t,Math.cos(a)*(this.get_width()/5.3),Math.sin(a)*(this.get_height()/5.3),this.get_rotationAngle()),this._pnts$1[n].tu=0,this._pnts$1[n].tv=0,this._pnts$1[n].color=this.get_color()}this.points[0]=this._pnts$1[0],this.points[1]=this._pnts$1[5],this.points[2]=this._pnts$1[9],this.points[3]=this._pnts$1[1],this.points[4]=this._pnts$1[7],this.points[5]=this._pnts$1[4],this.points[6]=this._pnts$1[6],this.points[7]=this._pnts$1[2],this.points[8]=this._pnts$1[7],this.points[9]=this._pnts$1[7],this.points[10]=this._pnts$1[3],this.points[11]=this._pnts$1[8],this._triangleStrip$1=!1},_createArrowGeometry$1:function(){this.points==null&&(this.points=new Array(9)),this.points[0]=new qt,this.points[0].position=this.makePosition(this.get_x(),this.get_y(),-this.get_width()/2,-this.get_height()/4,this.get_rotationAngle()),this.points[0].tu=0,this.points[0].tv=0,this.points[0].color=this.get_color(),this.points[1]=new qt,this.points[1].position=this.makePosition(this.get_x(),this.get_y(),this.get_width()/4,-this.get_height()/4,this.get_rotationAngle()),this.points[1].tu=1,this.points[1].tv=0,this.points[1].color=this.get_color(),this.points[2]=new qt,this.points[2].position=this.makePosition(this.get_x(),this.get_y(),-this.get_width()/2,this.get_height()/4,this.get_rotationAngle()),this.points[2].tu=0,this.points[2].tv=1,this.points[2].color=this.get_color(),this.points[3]=new qt,this.points[3].position=this.makePosition(this.get_x(),this.get_y(),this.get_width()/4,-this.get_height()/4,this.get_rotationAngle()),this.points[3].tu=1,this.points[3].tv=0,this.points[3].color=this.get_color(),this.points[4]=new qt,this.points[4].position=this.makePosition(this.get_x(),this.get_y(),-this.get_width()/2,this.get_height()/4,this.get_rotationAngle()),this.points[4].tu=0,this.points[4].tv=1,this.points[4].color=this.get_color(),this.points[5]=new qt,this.points[5].position=this.makePosition(this.get_x(),this.get_y(),this.get_width()/4,this.get_height()/4,this.get_rotationAngle()),this.points[5].tu=1,this.points[5].tv=1,this.points[5].color=this.get_color(),this.points[6]=new qt,this.points[6].position=this.makePosition(this.get_x(),this.get_y(),this.get_width()/4,-this.get_height()/2,this.get_rotationAngle()),this.points[6].tu=1,this.points[6].tv=1,this.points[6].color=this.get_color(),this.points[7]=new qt,this.points[7].position=this.makePosition(this.get_x(),this.get_y(),this.get_width()/2,0,this.get_rotationAngle()),this.points[7].tu=1,this.points[7].tv=.5,this.points[7].color=this.get_color(),this.points[8]=new qt,this.points[8].position=this.makePosition(this.get_x(),this.get_y(),this.get_width()/4,this.get_height()/2,this.get_rotationAngle()),this.points[8].tu=1,this.points[8].tv=1,this.points[8].color=this.get_color(),this._triangleStrip$1=!1},_createDonutGeometry$1:function(){var e=this.get_x(),t=this.get_y(),r=this.get_width()/2,n=Math.PI*2*r,a=i.truncate(n/12)+1,l=Math.PI*2/a;this.points==null&&(this.points=new Array(a*2+2));for(var f=0;f<=a;f++){var c=f*2;this.points[c]=new qt,this.points[c].position=this.makePosition(e,t,Math.cos(f*l)*(this.get_width()/2),Math.sin(f*l)*(this.get_height()/2),this.get_rotationAngle()),this.points[c].tu=f%2,this.points[c].tv=0,this.points[c].color=this.get_color(),this.points[c+1]=new qt,this.points[c+1].position=this.makePosition(e,t,Math.cos(f*l)*(this.get_width()/2-10),Math.sin(f*l)*(this.get_height()/2-10),this.get_rotationAngle()),this.points[c+1].tu=f%2,this.points[c+1].tv=1,this.points[c+1].color=this.get_color()}},_createCircleGeometry$1:function(){var e=this.get_x(),t=this.get_y(),r=this.get_width()/2,n=Math.PI*2*r,a=i.truncate(n/12)+1,l=Math.PI*2/a;this.points==null&&(this.points=new Array(a*2+2));for(var f=0;f<=a;f++){var c=f*2;this.points[c]=new qt,this.points[c].position=this.makePosition(e,t,Math.cos(f*l)*(this.get_width()/2),Math.sin(f*l)*(this.get_height()/2),this.get_rotationAngle()),this.points[c].tu=f%2,this.points[c].tv=0,this.points[c].color=this.get_color(),this.points[c+1]=new qt,this.points[c+1].position=this.makePosition(e,t,0,0,this.get_rotationAngle()),this.points[c+1].tu=f%2,this.points[c+1].tv=1,this.points[c+1].color=this.get_color()}},initializeTexture:function(){switch(this.get_shapeType()){case 5:case 3:case 6:break;case 0:case 1:case 2:case 4:default:this.texture=null;break}},_drawLineGeometry$1:function(e){var t=e.device;t.save();var r=this.get_width()/2;t.translate(this.get_x(),this.get_y()),t.rotate(this.get_rotationAngle()*_i.RC),t.moveTo(-r,0),t.lineTo(r,0),t.lineWidth=9,t.strokeStyle=this.get_color().toString(),t.globalAlpha=this.get_opacity(),t.stroke(),t.restore()},_drawOpenRectGeometry$1:function(e){var t=e.device;t.save(),t.translate(this.get_x(),this.get_y()),t.rotate(this.get_rotationAngle()*_i.RC),t.beginPath(),t.moveTo(-this.get_width()/2,-this.get_height()/2),t.lineTo(this.get_width()/2,-this.get_height()/2),t.lineTo(this.get_width()/2,this.get_height()/2),t.lineTo(-this.get_width()/2,this.get_height()/2),t.closePath(),t.lineWidth=9,t.strokeStyle=this.get_color().toString(),t.globalAlpha=this.get_opacity(),t.stroke(),t.restore()},_drawRectGeometry$1:function(e){var t=e.device;t.save(),t.translate(this.get_x(),this.get_y()),t.rotate(this.get_rotationAngle()*_i.RC),t.beginPath(),t.moveTo(-this.get_width()/2,-this.get_height()/2),t.lineTo(this.get_width()/2,-this.get_height()/2),t.lineTo(this.get_width()/2,this.get_height()/2),t.lineTo(-this.get_width()/2,this.get_height()/2),t.closePath(),t.lineWidth=0,t.fillStyle=this.get_color().toString(),t.globalAlpha=this.get_opacity(),t.fill(),t.restore()},_drawStarGeometry$1:function(e){var t=e.device;t.save(),t.translate(this.get_x(),this.get_y()),t.rotate(this.get_rotationAngle()*_i.RC),t.beginPath();var r=0,n=0;this.get_width()/2;for(var a=Math.PI*2/5,l=!0,f=0;f<5;f++){var c=f*a-Math.PI/2;l?(l=!1,t.moveTo(r+Math.cos(c)*(this.get_width()/2),n+Math.sin(c)*(this.get_height()/2))):t.lineTo(r+Math.cos(c)*(this.get_width()/2),n+Math.sin(c)*(this.get_height()/2));var d=f*a+a/2-Math.PI/2;t.lineTo(r+Math.cos(d)*(this.get_width()/5.3),n+Math.sin(d)*(this.get_height()/5.3))}t.closePath(),t.lineWidth=0,t.fillStyle=this.get_color().toString(),t.globalAlpha=this.get_opacity(),t.fill(),t.restore()},_drawArrowGeometry$1:function(e){var t=e.device;t.save(),t.translate(this.get_x(),this.get_y()),t.rotate(this.get_rotationAngle()*_i.RC),t.beginPath(),t.moveTo(-(this.get_width()/2),-(this.get_height()/4)),t.lineTo(this.get_width()/4,-(this.get_height()/4)),t.lineTo(this.get_width()/4,-(this.get_height()/2)),t.lineTo(this.get_width()/2,0),t.lineTo(this.get_width()/4,this.get_height()/2),t.lineTo(this.get_width()/4,this.get_height()/4),t.lineTo(-(this.get_width()/2),this.get_height()/4),t.closePath(),t.lineWidth=0,t.fillStyle=this.get_color().toString(),t.globalAlpha=this.get_opacity(),t.fill(),t.restore()},_drawDonutGeometry$1:function(e){var t=e.device;t.save(),t.translate(this.get_x(),this.get_y()),t.scale(1,this.get_height()/this.get_width()),t.rotate(this.get_rotationAngle()*_i.RC),t.beginPath(),t.arc(0,0,this.get_width()/2,0,Math.PI*2,!1),t.closePath(),t.lineWidth=9,t.strokeStyle=this.get_color().toString(),t.globalAlpha=this.get_opacity(),t.stroke(),t.restore()},_drawCircleGeometry$1:function(e){var t=e.device;t.save(),t.scale(1,this.get_width()/this.get_height()),t.translate(this.get_x(),this.get_y()),t.rotate(this.get_rotationAngle()*_i.RC),t.beginPath(),t.arc(0,0,this.get_width(),0,Math.PI*2,!1),t.closePath(),t.lineWidth=0,t.fillStyle=this.get_color().toString(),t.globalAlpha=this.get_opacity(),t.fill(),t.restore()},cleanUpGeometry:function(){_i.prototype.cleanUpGeometry.call(this),this.cleanUp()},writeOverlayProperties:function(e){e._writeStartElement("Shape"),e._writeAttributeString("ShapeType",gt.toXml("ShapeType",this._shapeType$1)),e._writeEndElement()},initializeFromXml:function(e){var t=ye.selectSingleNode(e,"Shape");this._shapeType$1=gt.parse("ShapeType",t.attributes.getNamedItem("ShapeType").nodeValue)}};function Na(){this._audio$1=null,this._audioReady$1=!1,this._wantPlaying$1=!1,this._volume$1=100,this._mute$1=!1,this._position$1=0,this._trackType$1=0,_i.call(this),this.isDesignTimeOnly=!0}Na.create=function(e,t){var r=new Na;return r.set_owner(e),r._filename$1=t.name,r.get_owner().get_owner().addCachedFile(t.name,t),r};var Df={getTypeName:function(){return"TerraViewer.AudioOverlay"},get_mute:function(){return this._mute$1},set_mute:function(e){return this._mute$1=e,this.set_volume(this.get_volume()),e},get_volume:function(){return this._volume$1},set_volume:function(e){return this._volume$1=e,this._audio$1!=null&&(this._audio$1.volume=this._mute$1?0:this._volume$1/100),e},addFilesToCabinet:function(e){e.addFile(this.get_owner().get_owner().get_workingDirectory()+this._filename$1,this.get_owner().get_owner().getFileBlob(this._filename$1))},play:function(){this._audio$1==null&&this.prepMultimedia(),this._wantPlaying$1=!0,this._audio$1!=null&&this._audioReady$1&&(this._audio$1.play(),this.set_volume(this.get_volume()),this._audio$1.currentTime=this._position$1)},pause:function(){this._audio$1==null&&this.prepMultimedia(),this._wantPlaying$1=!1,this._audio$1!=null&&this._audioReady$1&&this._audio$1.pause()},stop:function(){this.pause()},seek:function(e){this._position$1=e,this._audio$1==null&&this.prepMultimedia(),this._audioReady$1&&(this._audio$1.duration<e?this._audio$1.pause():this._audio$1.currentTime=this._position$1)},prepMultimedia:function(){var e=this;if(this._audio$1==null){this._audio$1=document.createElement("audio"),this._audio$1.addEventListener("canplaythrough",function(){e._audioReady$1||(e._audioReady$1=!0,e._wantPlaying$1&&e.play())},!1);var t=document.createElement("source");this._audio$1.appendChild(t),t.src=this.get_owner().get_owner().getFileStream(this._filename$1),t.type="audio/mp3",this._audio$1.load()}},initializeTexture:function(){this.prepMultimedia()},cleanUp:function(){_i.prototype.cleanUp.call(this),this._wantPlaying$1=!1,this._audio$1!=null&&(this._audio$1.pause(),this._audio$1.src=null,this._audio$1=null)},get_trackType:function(){return this._trackType$1},set_trackType:function(e){return this._trackType$1=e,e},writeOverlayProperties:function(e){e._writeStartElement("Audio"),e._writeAttributeString("Filename",this._filename$1),e._writeAttributeString("Volume",this._volume$1.toString()),e._writeAttributeString("Mute",this._mute$1.toString()),e._writeAttributeString("TrackType",gt.toXml("AudioType",this._trackType$1)),e._writeEndElement()},initializeFromXml:function(e){var t=ye.selectSingleNode(e,"Audio");this._filename$1=t.attributes.getNamedItem("Filename").nodeValue,t.attributes.getNamedItem("Volume")!=null&&(this._volume$1=parseInt(t.attributes.getNamedItem("Volume").nodeValue)),t.attributes.getNamedItem("Mute")!=null&&(this._mute$1=i.boolean(t.attributes.getNamedItem("Mute").nodeValue)),t.attributes.getNamedItem("TrackType")!=null&&(this._trackType$1=gt.parse("AudioType",t.attributes.getNamedItem("TrackType").nodeValue))}};function va(){this._loopType$1=1,this._startFrame$1=0,this._framesList$1=[],this._frames$1=1,this._framesX$1=8,this._framesY$1=8,this._textureReady$1=!1,this._currentFrame$1=0,this._cellHeight$1=256,this._cellWidth$1=256,this._timeStart$1=i.now(),this._playing$1=!0,_i.call(this)}var Ff={getTypeName:function(){return"TerraViewer.FlipbookOverlay"},get_loopType:function(){return this._loopType$1},set_loopType:function(e){return this._loopType$1=e,e},get_startFrame:function(){return this._startFrame$1},set_startFrame:function(e){return this._startFrame$1=e,e},get_frameSequence:function(){return this._frameSequence$1},set_frameSequence:function(e){if(this._frameSequence$1!==e&&(this._frameSequence$1=e,this._framesList$1=[],!i.emptyString(this._frameSequence$1)))try{for(var t=this._frameSequence$1.split(","),r=i.enumerate(t);r.moveNext();){var n=r.current,a=parseInt(i.trim(n));this._framesList$1.push(a)}}catch{}return e},get_frames:function(){return this._frames$1},set_frames:function(e){return this._frames$1=e,e},get_framesX:function(){return this._framesX$1},set_framesX:function(e){return this._framesX$1=e,e},get_framesY:function(){return this._framesY$1},set_framesY:function(e){return this._framesY$1=e,e},copy:function(e){var t=new va;return t.set_owner(e),t._filename$1=this._filename$1,t.set_x(this.get_x()),t.set_y(this.get_y()),t.set_width(this.get_width()),t.set_height(this.get_height()),t.set_color(this.get_color()),t.set_opacity(this.get_opacity()),t.set_rotationAngle(this.get_rotationAngle()),t.set_name(this.get_name()+" - Copy"),t.set_startFrame(this.get_startFrame()),t.set_frames(this.get_frames()),t.set_loopType(this.get_loopType()),t.set_frameSequence(this.get_frameSequence()),t.set_framesX(this.get_framesX()),t.set_framesY(this.get_framesY()),t},cleanUp:function(){this.texture=null},initializeTexture:function(){var e=this;try{var t=i.endsWith(this._filename$1.toLowerCase(),".jpg");this.texture=this.get_owner().get_owner().getCachedTexture(this._filename$1,function(){e._textureReady$1=!0})}catch{}},addFilesToCabinet:function(e){e.addFile(this.get_owner().get_owner().get_workingDirectory()+this._filename$1,this.get_owner().get_owner().getFileBlob(this._filename$1))},writeOverlayProperties:function(e){e._writeStartElement("Flipbook"),e._writeAttributeString("Filename",this._filename$1),e._writeAttributeString("Frames",this._frames$1.toString()),e._writeAttributeString("Loop",gt.toXml("LoopTypes",this._loopType$1)),e._writeAttributeString("FramesX",this._framesX$1.toString()),e._writeAttributeString("FramesY",this._framesY$1.toString()),e._writeAttributeString("StartFrame",this._startFrame$1.toString()),i.emptyString(this._frameSequence$1)||e._writeAttributeString("FrameSequence",this._frameSequence$1),e._writeEndElement()},initializeFromXml:function(e){var t=ye.selectSingleNode(e,"Flipbook");this._filename$1=t.attributes.getNamedItem("Filename").nodeValue,this._frames$1=parseInt(t.attributes.getNamedItem("Frames").nodeValue),this._loopType$1=gt.parse("LoopTypes",t.attributes.getNamedItem("Loop").nodeValue),t.attributes.getNamedItem("FramesX")!=null&&this.set_framesX(parseInt(t.attributes.getNamedItem("FramesX").nodeValue)),t.attributes.getNamedItem("FramesY")!=null&&this.set_framesY(parseInt(t.attributes.getNamedItem("FramesY").nodeValue)),t.attributes.getNamedItem("StartFrame")!=null&&this.set_startFrame(parseInt(t.attributes.getNamedItem("StartFrame").nodeValue)),t.attributes.getNamedItem("FrameSequence")!=null&&this.set_frameSequence(t.attributes.getNamedItem("FrameSequence").nodeValue)},play:function(){this._playing$1=!0,this._timeStart$1=i.now()},pause:function(){this._playing$1=!1},stop:function(){this._playing$1=!1,this._currentFrame$1=0},initializeGeometry:function(){var e=this._frames$1;if(i.emptyString(this._frameSequence$1)||(e=this._framesList$1.length),this._playing$1){var t=i.now()-this._timeStart$1;switch(this._loopType$1){case 0:this._currentFrame$1=i.truncate(t/1e3*24%e)+this._startFrame$1;break;case 1:this._currentFrame$1=Math.abs(i.truncate((t/1e3*24+e)%(e*2-1))-(e-1))+this._startFrame$1,this._currentFrame$1<0||this._currentFrame$1>e-1;break;case 2:this._currentFrame$1=Math.max(0,e-i.truncate(t/1e3*24%e))+this._startFrame$1;break;case 3:var r=Math.min(t/1e3*24,e*2+1)+e;this._currentFrame$1=Math.abs(r%(e*2-1)-(e-1))+this._startFrame$1;break;case 4:this._currentFrame$1=Math.min(e-1,i.truncate(t/1e3*24));break;case 5:this._currentFrame$1=this._startFrame$1;break;case 6:this._currentFrame$1=e-1+this._startFrame$1;break;default:this._currentFrame$1=this._startFrame$1;break}}i.emptyString(this._frameSequence$1)||(this._currentFrame$1<this._framesList$1.length&&this._currentFrame$1>-1?this._currentFrame$1=this._framesList$1[this._currentFrame$1]:this._currentFrame$1=0),this.currentRotation=0}};function ar(){Pe.call(this),this.name="--------------------------------------"}var Nf={};function Oo(){yn.call(this)}var Vf={OK:function(e){k.referenceFrameWizardFinished(e)}};function Uo(){yn.call(this)}var Bf={OK:function(e){k.loadTree()}};function Ho(){yn.call(this)}var zf={OK:function(e){}};function Go(){yn.call(this)}var Of={OK:function(){}};function qo(e,t,r){nr.call(this,e,t,null,r)}var Uf={readDataUnitFloat64:function(e){for(var t=0;this.position<e.byteLength;)this.dataUnit[t]=e.getFloat64(this.position,!1),t++,this.position+=8},readDataUnitFloat32:function(e){for(var t=0;this.position<e.byteLength;)this.dataUnit[t]=e.getFloat32(this.position,!1),t++,this.position+=4},readDataUnitUint8:function(e){for(var t=0;this.position<e.byteLength;)this.dataUnit[t]=e.getUint8(this.position),t++,this.position+=1},readDataUnitInt16:function(e){for(var t=0;this.position<e.byteLength;)this.dataUnit[t]=e.getInt16(this.position,!1),t++,this.position+=2},readDataUnitInt32:function(e){for(var t=0;this.position<e.byteLength;)this.dataUnit[t]=e.getInt32(this.position,!1),t++,this.position+=4},computeWcs:function(){}};function Wr(e,t,r,n){this.dataType=5,this._color$2=!1,this.isTiledFits=!1,nr.call(this,e,t,r,n)}Wr.createTiledFits=function(e,t,r){var n=new Wr(e,t,null,r);return n.isTiledFits=!0,n};var Hf={readFromBin:function(e){nr.prototype.readFromBin.call(this,e),this.numAxis===3&&this.axisSize[2]===3&&(this._color$2=!0)},readDataUnit:function(e,t){var r=new ta(new Uint8Array(e.buffer));switch(r.position=this.position,t){case-64:this.dataType=4,this._readDataUnitFloat64$2(r);break;case-32:this.dataType=3,this._readDataUnitFloat32$2(r);break;case 8:this.dataType=0,this._readDataUnitUint8$2(r);break;case 16:this.dataType=1,this._readDataUnitInt16$2(r);break;case 32:this.dataType=2,this._readDataUnitInt32$2(r);break}this.fitsProperties.lowerCut=this.fitsProperties.minVal,this.fitsProperties.upperCut=this.fitsProperties.maxVal},_readDataUnitUint8$2:function(e){var t=new Array(this.bufferSize);this._dataBuffer$2=t;for(var r=0;r<this.bufferSize;r++)t[r]=e.readByte(),this.fitsProperties.minVal>t[r]&&(this.fitsProperties.minVal=t[r]),this.fitsProperties.maxVal<t[r]&&(this.fitsProperties.maxVal=t[r])},_readDataUnitInt16$2:function(e){var t=new Array(this.bufferSize);this._dataBuffer$2=t;for(var r=0;r<this.bufferSize;r++)t[r]=e.readSByte()*256+e.readByte(),this.fitsProperties.minVal>t[r]&&(this.fitsProperties.minVal=t[r]),this.fitsProperties.maxVal<t[r]&&(this.fitsProperties.maxVal=t[r])},_readDataUnitInt32$2:function(e){var t=new Array(this.bufferSize);this._dataBuffer$2=t;for(var r=0;r<this.bufferSize;r++)t[r]=(e.readSByte()<<24)+(e.readSByte()<<16)+(e.readSByte()<<8)+e.readByte(),this.fitsProperties.minVal>t[r]&&(this.fitsProperties.minVal=t[r]),this.fitsProperties.maxVal<t[r]&&(this.fitsProperties.maxVal=t[r])},_readDataUnitFloat32$2:function(e){var t=new Array(this.bufferSize);this._dataBuffer$2=t;for(var r=new Uint8Array(4),n=0;n<this.bufferSize;n++)r[3]=e.readByte(),r[2]=e.readByte(),r[1]=e.readByte(),r[0]=e.readByte(),t[n]=new Float32Array(r.buffer,0,1)[0],this.fitsProperties.minVal>t[n]&&(this.fitsProperties.minVal=t[n]),this.fitsProperties.maxVal<t[n]&&(this.fitsProperties.maxVal=t[n])},_readDataUnitFloat64$2:function(e){var t=new Array(this.bufferSize),r=new Uint8Array(8);this._dataBuffer$2=t;for(var n=0;n<this.bufferSize;n++)r[7]=e.readByte(),r[6]=e.readByte(),r[5]=e.readByte(),r[4]=e.readByte(),r[3]=e.readByte(),r[2]=e.readByte(),r[1]=e.readByte(),r[0]=e.readByte(),t[n]=new Float64Array(r.buffer,0,1)[0],this.fitsProperties.minVal>t[n]&&(this.fitsProperties.minVal=t[n]),this.fitsProperties.maxVal<t[n]&&(this.fitsProperties.maxVal=t[n])},getBitmap:function(){return!this.fitsProperties.upperCut&&!this.fitsProperties.lowerCut&&(this.fitsProperties.lowerCut=this.fitsProperties.minVal,this.fitsProperties.upperCut=this.fitsProperties.maxVal),this.getScaledBitmap(this.fitsProperties.lowerCut,this.fitsProperties.upperCut,this.fitsProperties.scaleType,0,this.fitsProperties.colorMapName)},getScaledBitmap:function(e,t,r,n,a){var l;this.fitsProperties.scaleType=r,this.fitsProperties.lowerCut=e,this.fitsProperties.upperCut=t,this.fitsProperties.colorMapName=a;var f=bt.fromNamedColormap(a);switch(r){case 0:default:l=new Eo(e,t);break;case 1:l=new Do(e,t);break;case 2:l=new Fo(e,t);break;case 3:l=new No(e,t);break;case 4:l=new Vo(this,e,t);break}try{switch(this.dataType){case 0:return this._getBitmapByte$2(e,t,l,0,f);case 1:return this.getBitmapShort(e,t,l,0,f);case 2:return this._getBitmapInt$2(e,t,l,0,f);case 3:return this._getBitmapFloat$2(e,t,l,0,f);case 4:return this._getBitmapDouble$2(e,t,l,0,f);case 5:default:return ln.create(100,100)}}catch{return ln.create(10,10)}},_setPixelWithColorMap$2:function(e,t,r,n,a){if(a==null){e.setPixel(t,r,n,n,n,this.fitsProperties.transparentBlack&&!n?0:255);return}var l=n/255;if(l!==l){e.setPixel(t,r,0,0,0,0);return}var f=a.findClosestColor(l);e.setPixel(t,r,i.truncate(f.r),i.truncate(f.g),i.truncate(f.b),this.fitsProperties.transparentBlack&&!n?0:255)},_getBitmapByte$2:function(e,t,r,n,a){for(var l=this._dataBuffer$2,f=this.axisSize[0],c=this.axisSize[0]*this.axisSize[1]*n,d=ln.create(this.axisSize[0],this.axisSize[1]),m=0;m<this.axisSize[1];m++)for(var v=this.axisSize[1]-1-m,C=0;C<this.axisSize[0];C++)if(this._color$2){var T=l[C+v*f],A=l[C+v*f+c],$=l[C+v*f+c*2];if(this.fitsProperties.containsBlanks&&T===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var N=r.map(T),F=r.map(A),z=r.map($);d.setPixel(C,m,N,F,z,255)}}else{var Y=l[C+v*f+c];if(this.fitsProperties.containsBlanks&&Y===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var W=r.map(Y);this._setPixelWithColorMap$2(d,C,m,W,a)}}return d},_getBitmapDouble$2:function(e,t,r,n,a){for(var l=this._dataBuffer$2,f=this.axisSize[0],c=this.axisSize[0]*this.axisSize[1]*n,d=ln.create(this.axisSize[0],this.axisSize[1]),m=0;m<this.axisSize[1];m++)for(var v=this.axisSize[1]-1-m,C=0;C<this.axisSize[0];C++)if(this._color$2){var T=l[C+v*f],A=l[C+v*f+c],$=l[C+v*f+c*2];if(this.fitsProperties.containsBlanks&&T===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var N=r.map(T),F=r.map(A),z=r.map($);d.setPixel(C,m,N,F,z,255)}}else{var Y=l[C+v*f+c];if(this.fitsProperties.containsBlanks&&Y===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var W=r.map(Y);this._setPixelWithColorMap$2(d,C,m,W,a)}}return d},_getBitmapFloat$2:function(e,t,r,n,a){for(var l=this._dataBuffer$2,f=this.axisSize[0],c=this.axisSize[0]*this.axisSize[1]*n,d=ln.create(this.axisSize[0],this.axisSize[1]),m=0;m<this.axisSize[1];m++)for(var v=this.axisSize[1]-1-m,C=0;C<this.axisSize[0];C++)if(this._color$2){var T=l[C+v*f],A=l[C+v*f+c],$=l[C+v*f+c*2];if(this.fitsProperties.containsBlanks&&T===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var N=r.map(T),F=r.map(A),z=r.map($);d.setPixel(C,m,N,F,z,255)}}else{var Y=l[C+v*f+c];if(this.fitsProperties.containsBlanks&&Y===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var W=r.map(Y);this._setPixelWithColorMap$2(d,C,m,W,a)}}return d},_getBitmapInt$2:function(e,t,r,n,a){for(var l=this._dataBuffer$2,f=this.axisSize[0],c=this.axisSize[0]*this.axisSize[1]*n,d=ln.create(this.axisSize[0],this.axisSize[1]),m=0;m<this.axisSize[1];m++)for(var v=this.axisSize[1]-1-m,C=0;C<this.axisSize[0];C++)if(this._color$2){var T=l[C+v*f],A=l[C+v*f+c],$=l[C+v*f+c*2];if(this.fitsProperties.containsBlanks&&T===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var N=r.map(T),F=r.map(A),z=r.map($);d.setPixel(C,m,N,F,z,255)}}else{var Y=l[C+v*f+c];if(this.fitsProperties.containsBlanks&&Y===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var W=r.map(Y);this._setPixelWithColorMap$2(d,C,m,W,a)}}return d},getBitmapShort:function(e,t,r,n,a){for(var l=this._dataBuffer$2,f=this.axisSize[0],c=this.axisSize[0]*this.axisSize[1]*n,d=ln.create(this.axisSize[0],this.axisSize[1]),m=0;m<this.axisSize[1];m++)for(var v=this.axisSize[1]-1-m,C=0;C<this.axisSize[0];C++)if(this._color$2){var T=l[C+v*f],A=l[C+v*f+c],$=l[C+v*f+c*2];if(this.fitsProperties.containsBlanks&&T===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var N=r.map(T),F=r.map(A),z=r.map($);d.setPixel(C,m,N,F,z,255)}}else{var Y=l[C+v*f+c];if(this.fitsProperties.containsBlanks&&Y===this.fitsProperties.blankValue)d.setPixel(C,m,0,0,0,0);else{var W=r.map(Y);this._setPixelWithColorMap$2(d,C,m,W,a)}}return d},computeWcs:function(){this.isTiledFits||nr.prototype.computeWcs.call(this)},populateHistogram:function(e){switch(this.dataType){case 0:this._populateHistogramByte$2(e);break;case 1:this._populateHistogramInt16$2(e);break;case 2:this._populateHistogramInt32$2(e);break;case 3:this._populateHistogramFloat$2(e);break;case 4:this._populateHistogramDouble$2(e);break}},_populateHistogramDouble$2:function(e){for(var t=e.length,r=this._dataBuffer$2,n=(this.fitsProperties.maxVal-this.fitsProperties.minVal)/t,a=i.enumerate(r);a.moveNext();){var l=a.current;l!==Number.NaN&&e[Math.min(t-1,i.truncate((l-this.fitsProperties.minVal)/n))]++}},_populateHistogramFloat$2:function(e){for(var t=e.length,r=this._dataBuffer$2,n=(this.fitsProperties.maxVal-this.fitsProperties.minVal)/t,a=i.enumerate(r);a.moveNext();){var l=a.current;l!==nr.naN&&e[Math.min(t-1,i.truncate((l-this.fitsProperties.minVal)/n))]++}},_populateHistogramInt32$2:function(e){for(var t=e.length,r=this._dataBuffer$2,n=(this.fitsProperties.maxVal-this.fitsProperties.minVal)/t,a=i.enumerate(r);a.moveNext();){var l=a.current;e[Math.min(t-1,i.truncate((l-this.fitsProperties.minVal)/n))]++}},_populateHistogramInt16$2:function(e){for(var t=e.length,r=this._dataBuffer$2,n=(this.fitsProperties.maxVal-this.fitsProperties.minVal)/t,a=i.enumerate(r);a.moveNext();){var l=a.current;e[Math.min(t-1,i.truncate((l-this.fitsProperties.minVal)/n))]++}},_populateHistogramByte$2:function(e){for(var t=e.length,r=this._dataBuffer$2,n=(this.fitsProperties.maxVal-this.fitsProperties.minVal)/t,a=i.enumerate(r);a.moveNext();){var l=a.current;e[Math.min(t-1,i.truncate((l-this.fitsProperties.minVal)/n))]++}}};function tr(){Et.call(this),this.id=tr.issGuid}tr.loadBackground=function(){if(!(tr._loading$2||q.singleton.freestandingMode)){tr._loading$2=!0;var e=Nt.singleton.coreStaticUrl("data/iss.wtt");tr._doc$2=Yr.fromUrlRaw(e,function(){tr.createSpaceStation()})}},tr.createSpaceStation=function(){tr._doc$2.set_id("28016047-97a9-4b33-a226-cd820262a151");var e="0c10ae54-b6da-4282-bfda-f34562d403bc.3ds",t=new ur(tr._doc$2,e,!0,!1,!0,Te.get_white());t!=null&&(t.issLayer=!0,tr._issmodel$2=t)};var Gf={draw:function(e,t,r){if(this.object3d==null&&tr._issmodel$2==null&&!tr._loading$2){var n=Z.multiplyMatrix(e.get_world(),e.get_view()),a=n.transform(I.get_empty()),l=Math.sqrt(n.get_m11()*n.get_m11()+n.get_m22()*n.get_m22()+n.get_m33()*n.get_m33()),f=a.length(),c=l,d=i.truncate(e.height),m=e.get_projection().get_m11(),v=e.get_projection().get_m34(),C=e.get_projection().get_m44(),T=Math.abs(v)*f+C,A=m/T*d,$=c*A;$>.5&&tr.loadBackground()}return this.object3d=tr._issmodel$2,Et.prototype.draw.call(this,e,t,r)},getPrimaryUI:function(){return null},addFilesToCabinet:function(e){},loadData:function(e,t){},cleanUp:function(){}};function js(){this._addedTiles$2={},zi.call(this)}var qf={addTileRows:function(e,t){if(!i.keyExists(this._addedTiles$2,e)){for(var r=i.enumerate(t);r.moveNext();){var n=r.current;this.get__table().rows.push(n)}this.dirty=!0,this._addedTiles$2[e]=!0}},removeTileRows:function(e,t){if(i.keyExists(this._addedTiles$2,e)){for(var r=i.enumerate(t);r.moveNext();){var n=r.current;i.remove(this.get__table().rows,n)}this.dirty=!0,delete this._addedTiles$2[e]}},cleanUp:function(){zi.prototype.cleanUp.call(this),i.clearKeys(this._addedTiles$2),this.get__table().rows.length=0}};function Xo(e){i.EventArgs.call(this),this.set_caption(e)}var Xf={get_caption:function(){return this._caption$2},set_caption:function(e){return this._caption$2=e,e}};function Ws(e,t,r){this._ra$2=0,this._dec$2=0,this._zoom$2=0,i.EventArgs.call(this),this.set_RA(e*15),this.set_dec(t),this.set_zoom(r/6)}var Yf={get_RA:function(){return this._ra$2},set_RA:function(e){return this._ra$2=e,e},get_dec:function(){return this._dec$2},set_dec:function(e){return this._dec$2=e,e},get_zoom:function(){return this._zoom$2},set_zoom:function(e){return this._zoom$2=e,e}};function Yo(e,t,r){this._ra$2=0,this._dec$2=0,i.EventArgs.call(this),this.set_RA(e*15),this.set_dec(t),this.set_id(r)}var jf={get_RA:function(){return this._ra$2},set_RA:function(e){return this._ra$2=e,e},get_dec:function(){return this._dec$2},set_dec:function(e){return this._dec$2=e,e},get_id:function(){return this._id$2},set_id:function(e){return this._id$2=e,e}};function jo(e){i.EventArgs.call(this),this._url$2=e}var Wf={get_url:function(){return this._url$2},set_url:function(e){return this._url$2=e,e}};function Wo(e,t,r,n,a){this.pixelCenterX=0,this.pixelCenterY=0,this.scaleX=.01,this.scaleY=.01,this.height=0,this.width=0,cs.call(this,e,t,r,n,a),this.pixelCenterX=n.get_offsetX(),this.pixelCenterY=n.get_offsetY(),this.scaleX=-(this.scaleY=n.get_baseTileDegrees()),n.get_bottomsUp()&&(this.scaleX=-this.scaleX),this.sphereCenter=this.geoTo3dTan(0,0),this.radius=1.25,this.computeBoundingSphere()}var Kf={getLatLngEdges:function(){var e=new Vs,t=i.safeCast(this.dataset.get_wcsImage(),Qa);return t!=null&&Zt.useGl?Zt.useGlVersion2?(this.width=t.get_sizeX(),this.height=t.get_sizeY()):(this.height=this.bmp.height,this.width=this.bmp.width,this.bmp.height!==t.get_sizeY()&&(this.pixelCenterY+=this.bmp.height-t.get_sizeY())):this.texture!=null?(this.height=this.texture.naturalHeight,this.width=this.texture.naturalWidth):(this.height=256,this.width=256),e.latMin=0+this.scaleY*(this.height-this.pixelCenterY),e.latMax=0-this.scaleY*this.pixelCenterY,e.lngMin=0+this.scaleX*this.pixelCenterX,e.lngMax=0-this.scaleX*(this.width-this.pixelCenterX),e}},Jf=i.module("wwtlib",{IFolder:[xn],Sprite2d:[Wn,$u,null],ViewMoverSlew:[sn,Bu,null,Me],VertexPosition:[$s,nc,null],MainView:[bo,null,null],MinorPlanets:[Ut,vc,null],TileCache:[Oe,Vc,null],DistanceCalc:[bn,Bc,null],Triangle:[mi,fh,null],PositionTextureVertexBuffer:[pa,tf,ir],KeplerVertexBuffer:[as,af,ir],TimeSeriesLineVertexBuffer:[os,sf,ir],TimeSeriesPointVertexBuffer:[Ro,of,ir],PositionColoredVertexBuffer:[$o,lf,ir],PositionColoredTexturedVertexBuffer:[uf,cf,ir],LayerCollection:[wf,bf,ri]},{DAY_OF_WEEK:o,EO:u,ScaleTypes:_,URLRewriteMode:g,SolarSystemObjects:w,InterpolationType:M,PointType:R,LocationHint:E,FolderGroup:D,FolderRefreshType:B,FolderType:j,ThumbnailSize:J,CullMode:oe,PointScaleTypes:le,ProjectionType:me,ImageSetType:Be,BandPass:pe,Classification:re,DataTypes:Le,AltUnits:he,FadeType:ke,ReferenceFrames:Ae,ReferenceFrameTypes:Ve,CoordinatesTypes:ge,AltTypes:De,MarkerMixes:qe,ColorMaps:ot,PlotTypes:We,MarkerScales:ct,RAUnits:je,Primitives:ti,Alignment:It,StockSkyOverlayTypes:Rt,OverlayAnchor:Tt,AudioType:ni,ShapeType:ai,LoopTypes:Zi,SelectionAnchor:Ai,TextBorderStyle:xr,UserLevel:_n,TransitionType:Ur,Keys:$i,DialogResult:Vr,Formatting:Nn,StateType:Br,IThumbnail:[Rr],IPlace:[Q],IUiController:[ue],IViewMover:[Me],IUIServicesCallbacks:[Fe],ISettings:[Re],IUndoStep:[Ke],Imports:[nt,null,null],GFX:[b,null,null],ABR:[Ze,ze,null],ACFT:[Xe,mt,null],ASEP:[yt,zt,null],COR:[Mt,Ci,null],C3D:[_t,Pi,null],CT:[S,zr,null],CalD:[gn,Jr,null],DT:[li,_r,null],DYT:[gr,Vn,null],CAAEarth:[Qt,Oa,null],VSC:[s,oa,null],CAAEclipticalElementDetails:[Bn,Ua,null],CAAEclipticalElements:[ya,Ha,null],EPO:[et,Ga,null],EOE:[zn,qa,null],EPD:[Ca,On,null],EOD:[Xa,ps,null],ELL:[ci,vs,null],EOT:[Sa,Ln,null],CAAFK5:[Qi,Un,null],GMD:[Hn,ws,null],GMDS:[Ma,Ya,null],GM:[Ri,bs,null],CAAGlobe:[$r,ys,null],IFR:[Fi,y,null],INTP:[x,L,null],CAAJupiter:[H,ie,null],CAAKepler:[te,be,null],CAAMars:[Ie,xt,null],CAAMercury:[Ye,Dt,null],CAAMoon:[wt,mr,null],MoonCoefficient1:[Ce,Hr,null],MoonCoefficient2:[pt,la,null],MIFR:[Or,Cs,null],CAAMoonNodes:[Ta,Ss,null],CAAMoonPerigeeApogee:[Ui,Gn,null],MPAC:[ce,Ni,null],CAAMoonPhases:[Lr,qn,null],CAANeptune:[vr,Ms,null],CAANutation:[ui,Xn,null],NUC:[lt,Ko,null],CAATopocentricEclipticDetails:[eo,Jo,null],CAAParallax:[mn,Zo,null],CAAPhysicalJupiterDetails:[Ts,Qo,null],CAAPhysicalJupiter:[xs,el,null],CAAPhysicalMarsDetails:[to,tl,null],CAAPhysicalMars:[io,il,null],CAAPhysicalSunDetails:[ro,rl,null],CAAPhysicalSun:[Ls,nl,null],CAAPluto:[Zr,al,null],PlutoCoefficient1:[Jt,sl,null],PlutoCoefficient2:[Se,ol,null],CAAPrecession:[Yn,ll,null],CAARiseTransitSetDetails:[no,ul,null],CAARiseTransitSet:[ks,cl,null],CAASaturn:[Er,hl,null],CAASaturnRingDetails:[ao,fl,null],CAASaturnRings:[so,dl,null],CAASidereal:[kn,_l,null],CAAStellarMagnitudes:[xa,gl,null],CAASun:[hi,ml,null],CAAUranus:[Qr,pl,null],CAAVenus:[tn,vl,null],VideoOutputType:[oo,wl,null],FitsProperties:[lo,bl,null],HipsProperties:[ja,yl,null],FastMath:[Ft,Cl,null],HealpixTables:[Gr,Sl,null],Xyf:[La,Ml,null],HealpixUtils:[rn,Tl,null],Hploc:[ka,xl,null],Pointing:[As,Ll,null],URLHelpers:[Nt,kl,null],Annotation:[vt,Al,null],AstroRaDec:[jn,Il,null],RiseSetDetails:[uo,Pl,null],AstroCalc:[dt,Rl,null],BlendState:[pn,$l,null],CameraParameters:[fi,El,null],Color:[G,Dl,null],Colors:[Te,Fl,null],Constellations:[Ge,Nl,null],Lineset:[Is,Vl,null],Linepoint:[co,Bl,null],ConstellationFilter:[Lt,zl,null],PositionTexture:[Ue,Ol,null],PositionColoredTextured:[qt,Ul,null],PositionColored:[Wa,Hl,null],PositionNormalTexturedTangent:[ho,Gl,null],Vector3d:[I,ql,null],Vector2d:[xe,Xl,null],Matrix3d:[Z,Yl,null],Matrix2d:[Si,jl,null],DoubleUtilities:[Dr,null,null],PlaneD:[fo,Wl,null],Vector4d:[Ka,Kl,null],PositionNormalTexturedX2:[nn,Jl,null],PositionNormalTextured:[yr,Zl,null],SphereHull:[ua,Ql,null],ConvexHull:[An,eu,null],Folder:[vn,tu,null,Rr],FolderBrowser:[$t,iu,null],FolderUp:[Ps,ru,null,Rr],ShortIndexBuffer:[nu,au,null],IndexBuffer:[_o,su,null,i.IDisposable],VertexBufferBase:[ir,ou,null,i.IDisposable],Dates:[ii,lu,null],SimpleLineList:[an,uu,null],OrbitLineList:[go,cu,null],LineList:[ca,hu,null],TriangleList:[In,fu,null],TriangleFanList:[mo,du,null],PointList:[qr,_u,null],TimeSeriesLineVertex:[ha,gu,null],TimeSeriesPointVertex:[Aa,mu,null],SimpleLineShader:[si,pu,null],SimpleLineShader2D:[wi,vu,null],OrbitLineShader:[Xt,wu,null],LineShaderNormalDates:[kt,bu,null],TimeSeriesPointSpriteShader:[it,yu,null],KeplerPointSpriteShader:[He,Cu,null],EllipseShader:[At,Su,null],ModelShader:[at,Mu,null],ModelShaderTan:[ft,Tu,null],TileShader:[tt,xu,null],FitsShader:[Ne,Lu,null],ImageShader:[Vt,ku,null],ImageShader2:[Ot,Au,null],SpriteShader:[Bt,Iu,null],ShapeSpriteShader:[Yt,Pu,null],TextShader:[jt,Ru,null],Tessellator:[fa,Eu,null],Texture:[di,Du,null,i.IDisposable],Grids:[X,Fu,null],Imageset:[Mi,Nu,null,Rr],ViewMoverKenBurnsStyle:[Rs,Vu,null,Me],KeplerVertex:[lr,zu,null],ScaleMap:[Xr,Ou,null],ColorMapContainer:[bt,Uu,null],Layer:[ri,Hu,null],DomainValue:[Gu,qu,null],LayerManager:[k,Xu,null],LayerMap:[Ti,Yu,null],SkyOverlays:[po,ju,null],GroundOverlayLayer:[Wu,Ku,null],FrameTarget:[vo,Ju,null],LayerUI:[Pn,Zu,null],LayerUIMenuItem:[Qu,ec,null],LayerUITreeNode:[Ja,tc,null],Group:[Ia,ic,null],Mesh:[Rn,rc,null,i.IDisposable],Object3d:[ur,ac,null],ObjectNode:[Kn,sc,null],Orbit:[da,oc,null],EllipseRenderer:[Yi,lc,null],ReferenceFrame:[ji,uc,null],KmlCoordinate:[Es,cc,null],KmlLineList:[Ds,hc,null],PushPin:[cr,fc,null],Table:[Pa,dc,null],VoTable:[Jn,_c,null],VoRow:[wo,gc,null],VoColumn:[Za,mc,null],WcsImage:[Qa,pc,null],Place:[hr,wc,null,Rr,Q],KeplerianElements:[yo,bc,null],BodyAngles:[Wi,yc,null],Planets:[P,Cc,null],Material:[Zn,Sc,null],InViewReturnMessage:[Fs,Mc,null],RenderContext:[Zt,Tc,null],RenderTriangle:[Ct,xc,null],ScriptInterface:[on,Lc,null],Settings:[U,kc,null,Re],Text3dBatch:[wn,Ac,null],GlyphItem:[Qn,Ic,null],GlyphCache:[Cr,Pc,null,i.IDisposable],Text3d:[rr,Rc,null],SpaceTimeController:[K,$c,null],Star:[Ns,Ec,null],Galaxy:[_a,Dc,null],LatLngEdges:[Vs,Fc,null],Tile:[O,Nc,null],Tour:[Ra,zc,null,Rr],FileEntry:[Bs,Oc,null],FileCabinet:[ga,Uc,null],SettingParameter:[$a,Hc,null],Overlay:[_i,Gc,null],Selection:[gi,qc,null],TextObject:[$n,Xc,null],TourDocument:[Yr,Yc,null],TourEditTab:[Co,jc,null],TourEditor:[Vi,Wc,null,ue],OverlayList:[Bi,Kc,null],TourEdit:[Fr,Jc,null],SoundEditor:[zs,Zc,null],TourStopList:[So,Qc,null],TimeLine:[Ea,eh,null],TourPlayer:[Ht,th,null,ue],MasterTime:[Mo,ih,null],TourStop:[Sr,rh,null,Re],LayerInfo:[Os,nh,null],UndoTourStopChange:[oi,ah,null,Ke],Undo:[rt,sh,null],UndoStep:[oh,lh,null,Ke],UndoTourSlidelistChange:[ea,uh,null,Ke],UndoTourPropertiesChange:[ch,hh,null,Ke],UiTools:[bi,dh,null],Util:[ye,_h,null],Rectangle:[Ki,gh,null],Guid:[er,mh,null],Enums:[gt,ph,null],Mouse:[Li,null,null],Language:[_e,vh,null],Cursor:[Ei,wh,null],Cursors:[vi,bh,null],SelectLink:[Us,yh,null],PopupVolume:[To,Ch,null],PopupColorPicker:[Sh,Mh,null],OverlayProperties:[xo,Th,null],BinaryReader:[ta,xh,null],Bitmap:[ln,Lh,null],ColorPicker:[Hs,kh,null],ContextMenuStrip:[un,Ah,null],ToolStripMenuItem:[Pe,Ih,null],TagMe:[Ph,Rh,null],Dialog:[yn,$h,null],Histogram:[En,Eh,null],SimpleInput:[Da,Dh,null],XmlTextWriter:[ia,Fh,null],VizLayer:[Lo,Nh,null],DataItem:[Gs,Vh,null],WebFile:[fr,Bh,null],FolderDownloadAction:[ko,zh,null],Wtml:[ma,Oh,null],WWTControl:[q,Uh,null],WWTControlBuilder:[Hh,Gh,null],WWTElementEvent:[qs,qh,null],Coordinates:[V,Xh,null],Fxyf:[Ji,Yh,Gr],HealpixTile:[es,jh,O],FitsImage:[nr,Wh,Qa],Circle:[Ao,Kh,vt],Poly:[Io,Jh,vt],PolyLine:[Po,Zh,vt],EquirectangularTile:[ts,Qh,O],PositionVertexBuffer:[is,ef,ir],PositionNormalTexturedVertexBuffer:[rs,rf,ir],PositionNormalTexturedTangentVertexBuffer:[ns,nf,ir],ScaleLinear:[Eo,hf,Xr],ScaleLog:[Do,ff,Xr],ScalePow:[Fo,df,Xr],ScaleSqrt:[No,_f,Xr],HistogramEqualization:[Vo,gf,Xr],GreatCirlceRouteLayer:[Fa,mf,ri],GridLayer:[Xs,pf,ri],ImageSetLayer:[Hi,vf,ri],Object3dLayer:[Et,yf,ri,ue],Object3dLayerUI:[Bo,Cf,Pn],OrbitLayer:[Ys,Sf,ri],OrbitLayerUI:[zo,Mf,Pn],SpreadSheetLayer:[zi,Tf,ri],TimeSeriesLayer:[ls,xf,ri],VoTableLayer:[kr,Lf,ri],MercatorTile:[Wt,kf,O],PlotTile:[us,Af,O],TangentTile:[cs,If,O],ToastTile:[ki,Pf,O],BitmapOverlay:[ra,Rf,_i],TextOverlay:[jr,$f,_i],ShapeOverlay:[na,Ef,_i],AudioOverlay:[Na,Df,_i],FlipbookOverlay:[va,Ff,_i],ToolStripSeparator:[ar,Nf,Pe],FrameWizard:[Oo,Vf,yn],ReferenceFrameProps:[Uo,Bf,yn],GreatCircleDialog:[Ho,zf,yn],DataVizWizard:[Go,Of,yn],FitsImageTile:[qo,Uf,nr],FitsImageJs:[Wr,Hf,nr],ISSLayer:[tr,Gf,Et],CatalogSpreadSheetLayer:[js,qf,zi],SlideChangedEventArgs:[Xo,Xf,i.EventArgs],ArrivedEventArgs:[Ws,Yf,i.EventArgs],AnnotationClickEventArgs:[Yo,jf,i.EventArgs],CollectionLoadedEventArgs:[jo,Wf,i.EventArgs],SkyImageTile:[Wo,Kf,cs]});let Ks;typeof window<"u"&&"pako"in window?Ks=window.pako:__vitePreload(()=>import("./index-86901203.js").then(e=>e.i),[]).then(function(e){Ks=e});let Js;return typeof window<"u"&&"uuid"in window?Js=window.uuid:__vitePreload(()=>import("./index-6557fe41.js"),[]).then(function(e){Js=e}),b.g_ACft=[new Xe(0,1,0,0,0,0,0,0,0,0,0,-1719914,-2,-25,0,25,-13,1578089,156,10,32,684185,-358),new Xe(0,2,0,0,0,0,0,0,0,0,0,6434,141,28007,-107,25697,-95,-5904,-130,11141,-48,-2559,-55),new Xe(0,0,0,1,0,0,0,0,0,0,0,715,0,0,0,6,0,-657,0,-15,0,-282,0),new Xe(0,0,0,0,0,0,0,1,0,0,0,715,0,0,0,0,0,-656,0,0,0,-285,0),new Xe(0,3,0,0,0,0,0,0,0,0,0,486,-5,-236,-4,-216,-4,-446,5,-94,0,-193,0),new Xe(0,0,0,0,1,0,0,0,0,0,0,159,0,0,0,2,0,-147,0,-6,0,-61,0),new Xe(0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,26,0,0,0,-59,0),new Xe(0,0,0,0,0,0,0,1,0,1,0,39,0,0,0,0,0,-36,0,0,0,-16,0),new Xe(0,0,0,2,0,0,0,0,0,0,0,33,0,-10,0,-9,0,-30,0,-5,0,-13,0),new Xe(0,2,0,-1,0,0,0,0,0,0,0,31,0,1,0,1,0,-28,0,0,0,-12,0),new Xe(0,3,-8,3,0,0,0,0,0,0,0,8,0,-28,0,25,0,8,0,11,0,3,0),new Xe(0,5,-8,3,0,0,0,0,0,0,0,8,0,-28,0,-25,0,-8,0,-11,0,-3,0),new Xe(2,-1,0,0,0,0,0,0,0,0,0,21,0,0,0,0,0,-19,0,0,0,-8,0),new Xe(1,0,0,0,0,0,0,0,0,0,0,-19,0,0,0,0,0,17,0,0,0,8,0),new Xe(0,0,0,0,0,1,0,0,0,0,0,17,0,0,0,0,0,-16,0,0,0,-7,0),new Xe(0,1,0,-2,0,0,0,0,0,0,0,16,0,0,0,0,0,15,0,1,0,7,0),new Xe(0,0,0,0,0,0,1,0,0,0,0,16,0,0,0,1,0,-15,0,-3,0,-6,0),new Xe(0,1,0,1,0,0,0,0,0,0,0,11,0,-1,0,-1,0,-10,0,-1,0,-5,0),new Xe(2,-2,0,0,0,0,0,0,0,0,0,0,0,-11,0,-10,0,0,0,-4,0,0,0),new Xe(0,1,0,-1,0,0,0,0,0,0,0,-11,0,-2,0,-2,0,9,0,-1,0,4,0),new Xe(0,4,0,0,0,0,0,0,0,0,0,-7,0,-8,0,-8,0,6,0,-3,0,3,0),new Xe(0,3,0,-2,0,0,0,0,0,0,0,-10,0,0,0,0,0,9,0,0,0,4,0),new Xe(1,-2,0,0,0,0,0,0,0,0,0,-9,0,0,0,0,0,-9,0,0,0,-4,0),new Xe(2,-3,0,0,0,0,0,0,0,0,0,-9,0,0,0,0,0,-8,0,0,0,-4,0),new Xe(0,0,0,0,2,0,0,0,0,0,0,0,0,-9,0,-8,0,0,0,-3,0,0,0),new Xe(2,-4,0,0,0,0,0,0,0,0,0,0,0,-9,0,8,0,0,0,3,0,0,0),new Xe(0,3,-2,0,0,0,0,0,0,0,0,8,0,0,0,0,0,-8,0,0,0,-3,0),new Xe(0,0,0,0,0,0,0,1,2,-1,0,8,0,0,0,0,0,-7,0,0,0,-3,0),new Xe(8,-12,0,0,0,0,0,0,0,0,0,-4,0,-7,0,-6,0,4,0,-3,0,2,0),new Xe(8,-14,0,0,0,0,0,0,0,0,0,-4,0,-7,0,6,0,-4,0,3,0,-2,0),new Xe(0,0,2,0,0,0,0,0,0,0,0,-6,0,-5,0,-4,0,5,0,-2,0,2,0),new Xe(3,-4,0,0,0,0,0,0,0,0,0,-1,0,-1,0,-2,0,-7,0,1,0,-4,0),new Xe(0,2,0,-2,0,0,0,0,0,0,0,4,0,-6,0,-5,0,-4,0,-2,0,-2,0),new Xe(3,-3,0,0,0,0,0,0,0,0,0,0,0,-7,0,-6,0,0,0,-3,0,0,0),new Xe(0,2,-2,0,0,0,0,0,0,0,0,5,0,-5,0,-4,0,-5,0,-2,0,-2,0),new Xe(0,0,0,0,0,0,0,1,-2,0,0,5,0,0,0,0,0,-5,0,0,0,-2,0)],b.deltaTTable=[121,112,103,95,88,82,77,72,68,63,60,56,53,51,48,46,44,42,40,38,35,33,31,29,26,24,22,20,18,16,14,12,11,10,9,8,7,7,7,7,7,7,8,8,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,12,12,12,12,13,13,13,14,14,14,14,15,15,15,15,15,16,16,16,16,16,16,16,16,15,15,14,13,13.1,12.5,12.2,12,12,12,12,12,12,11.9,11.6,11,10.2,9.2,8.2,7.1,6.2,5.6,5.4,5.3,5.4,5.6,5.9,6.2,6.5,6.8,7.1,7.3,7.5,7.6,7.7,7.3,6.2,5.2,2.7,1.4,-1.2,-2.8,-3.8,-4.8,-5.5,-5.3,-5.6,-5.7,-5.9,-6,-6.3,-6.5,-6.2,-4.7,-2.8,-.1,2.6,5.3,7.7,10.4,13.3,16,18.2,20.2,21.2,22.4,23.5,23.8,24.3,24,23.9,23.9,23.7,24,24.3,25.3,26.2,27.3,28.2,29.1,30,30.7,31.4,32.2,33.1,34,35,36.5,38.3,40.18,42.2,44.5,46.5,48.5,50.54,52.2,53.8,54.9,55.8,56.86,58.31,59.99,61.63,62.97],b.g_L0EarthCoefficients=[new s(175347046,0,0),new s(3341656,4.6692568,6283.07585),new s(34894,4.6261,12566.1517),new s(3497,2.7441,5753.3849),new s(3418,2.8289,3.5231),new s(3136,3.6277,77713.7715),new s(2676,4.4181,7860.4194),new s(2343,6.1352,3930.2097),new s(1324,.7425,11506.7698),new s(1273,2.0371,529.691),new s(1199,1.1096,1577.3435),new s(990,5.233,5884.927),new s(902,2.045,26.298),new s(857,3.508,398.149),new s(780,1.179,5223.694),new s(753,2.533,5507.553),new s(505,4.583,18849.228),new s(492,4.205,775.523),new s(357,2.92,.067),new s(317,5.849,11790.629),new s(284,1.899,796.288),new s(271,.315,10977.079),new s(243,.345,5486.778),new s(206,4.806,2544.314),new s(205,1.869,5573.143),new s(202,2.458,6069.777),new s(156,.833,213.299),new s(132,3.411,2942.463),new s(126,1.083,20.775),new s(115,.645,.98),new s(103,.636,4694.003),new s(102,.976,15720.839),new s(102,4.267,7.114),new s(99,6.21,2146.17),new s(98,.68,155.42),new s(86,5.98,161000.69),new s(85,1.3,6275.96),new s(85,3.67,71430.7),new s(80,1.81,17260.15),new s(79,3.04,12036.46),new s(75,1.76,5088.63),new s(74,3.5,3154.69),new s(74,4.68,801.82),new s(70,.83,9437.76),new s(62,3.98,8827.39),new s(61,1.82,7084.9),new s(57,2.78,6286.6),new s(56,4.39,14143.5),new s(56,3.47,6279.55),new s(52,.19,12139.55),new s(52,1.33,1748.02),new s(51,.28,5856.48),new s(49,.49,1194.45),new s(41,5.37,8429.24),new s(41,2.4,19651.05),new s(39,6.17,10447.39),new s(37,6.04,10213.29),new s(37,2.57,1059.38),new s(36,1.71,2352.87),new s(36,1.78,6812.77),new s(33,.59,17789.85),new s(30,.44,83996.85),new s(30,2.74,1349.87),new s(25,3.16,4690.48)],b.g_L1EarthCoefficients=[new s(628331966747,0,0),new s(206059,2.678235,6283.07585),new s(4303,2.6351,12566.1517),new s(425,1.59,3.523),new s(119,5.796,26.298),new s(109,2.966,1577.344),new s(93,2.59,18849.23),new s(72,1.14,529.69),new s(68,1.87,398.15),new s(67,4.41,5507.55),new s(59,2.89,5223.69),new s(56,2.17,155.42),new s(45,.4,796.3),new s(36,.47,775.52),new s(29,2.65,7.11),new s(21,5.43,.98),new s(19,1.85,5486.78),new s(19,4.97,213.3),new s(17,2.99,6275.96),new s(16,.03,2544.31),new s(16,1.43,2146.17),new s(15,1.21,10977.08),new s(12,2.83,1748.02),new s(12,3.26,5088.63),new s(12,5.27,1194.45),new s(12,2.08,4694),new s(11,.77,553.57),new s(10,1.3,6286.6),new s(10,4.24,1349.87),new s(9,2.7,242.73),new s(9,5.64,951.72),new s(8,5.3,2352.87),new s(6,2.65,9437.76),new s(6,4.67,4690.48)],b.g_L2EarthCoefficients=[new s(52919,0,0),new s(8720,1.0721,6283.0758),new s(309,.867,12566.152),new s(27,.05,3.52),new s(16,5.19,26.3),new s(16,3.68,155.42),new s(10,.76,18849.23),new s(9,2.06,77713.77),new s(7,.83,775.52),new s(5,4.66,1577.34),new s(4,1.03,7.11),new s(4,3.44,5573.14),new s(3,5.14,796.3),new s(3,6.05,5507.55),new s(3,1.19,242.73),new s(3,6.12,529.69),new s(3,.31,398.15),new s(3,2.28,553.57),new s(2,4.38,5223.69),new s(2,3.75,.98)],b.g_L3EarthCoefficients=[new s(289,5.844,6283.076),new s(35,0,0),new s(17,5.49,12566.15),new s(3,5.2,155.42),new s(1,4.72,3.52),new s(1,5.3,18849.23),new s(1,5.97,242.73)],b.g_L4EarthCoefficients=[new s(114,3.142,0),new s(8,4.13,6283.08),new s(1,3.84,12566.15)],b.g_L5EarthCoefficients=[new s(1,3.14,0)],b.g_B0EarthCoefficients=[new s(280,3.199,84334.662),new s(102,5.422,5507.553),new s(80,3.88,5223.69),new s(44,3.7,2352.87),new s(32,4,1577.34)],b.g_B1EarthCoefficients=[new s(9,3.9,5507.55),new s(6,1.73,5223.69)],b.g_B2EarthCoefficients=[new s(22378,3.38509,10213.28555),new s(282,0,0),new s(173,5.256,20426.571),new s(27,3.87,30639.86)],b.g_B3EarthCoefficients=[new s(647,4.992,10213.286),new s(20,3.14,0),new s(6,.77,20426.57),new s(3,5.44,30639.86)],b.g_B4EarthCoefficients=[new s(14,.32,10213.29)],b.g_R0EarthCoefficients=[new s(100013989,0,0),new s(1670700,3.0984635,6283.07585),new s(13956,3.05525,12566.1517),new s(3084,5.1985,77713.7715),new s(1628,1.1739,5753.3849),new s(1576,2.8469,7860.4194),new s(925,5.453,11506.77),new s(542,4.564,3930.21),new s(472,3.661,5884.927),new s(346,.964,5507.553),new s(329,5.9,5223.694),new s(307,.299,5573.143),new s(243,4.273,11790.629),new s(212,5.847,1577.344),new s(186,5.022,10977.079),new s(175,3.012,18849.228),new s(110,5.055,5486.778),new s(98,.89,6069.78),new s(86,5.69,15720.84),new s(86,1.27,161000.69),new s(65,.27,17260.15),new s(63,.92,529.69),new s(57,2.01,83996.85),new s(56,5.24,71430.7),new s(49,3.25,2544.31),new s(47,2.58,775.52),new s(45,5.54,9437.76),new s(43,6.01,6275.96),new s(39,5.36,4694),new s(38,2.39,8827.39),new s(37,.83,19651.05),new s(37,4.9,12139.55),new s(36,1.67,12036.46),new s(35,1.84,2942.46),new s(33,.24,7084.9),new s(32,.18,5088.63),new s(32,1.78,398.15),new s(28,1.21,6286.6),new s(28,1.9,6279.55),new s(26,4.59,10447.39)],b.g_R1EarthCoefficients=[new s(103019,1.10749,6283.07585),new s(1721,1.0644,12566.1517),new s(702,3.142,0),new s(32,1.02,18849.23),new s(31,2.84,5507.55),new s(25,1.32,5223.69),new s(18,1.42,1577.34),new s(10,5.91,10977.08),new s(9,1.42,6275.96),new s(9,.27,5486.78)],b.g_R2EarthCoefficients=[new s(4359,5.7846,6283.0758),new s(124,5.579,12566.152),new s(12,3.14,0),new s(9,3.63,77713.77),new s(6,1.87,5573.14),new s(3,5.47,18849.23)],b.g_R3EarthCoefficients=[new s(145,4.273,6283.076),new s(7,3.92,12566.15)],b.g_R4EarthCoefficients=[new s(4,2.56,6283.08)],b.g_L1EarthCoefficientsJ2000=[new s(628307584999,0,0),new s(206059,2.678235,6283.07585),new s(4303,2.6351,12566.1517),new s(425,1.59,3.523),new s(119,5.796,26.298),new s(109,2.966,1577.344),new s(93,2.59,18849.23),new s(72,1.14,529.69),new s(68,1.87,398.15),new s(67,4.41,5507.55),new s(59,2.89,5223.69),new s(56,2.17,155.42),new s(45,.4,796.3),new s(36,.47,775.52),new s(29,2.65,7.11),new s(21,5.43,.98),new s(19,1.85,5486.78),new s(19,4.97,213.3),new s(17,2.99,6275.96),new s(16,.03,2544.31),new s(16,1.43,2146.17),new s(15,1.21,10977.08),new s(12,2.83,1748.02),new s(12,3.26,5088.63),new s(12,5.27,1194.45),new s(12,2.08,4694),new s(11,.77,553.57),new s(10,1.3,6286.6),new s(10,4.24,1349.87),new s(9,2.7,242.73),new s(9,5.64,951.72),new s(8,5.3,2352.87),new s(6,2.65,9437.76),new s(6,4.67,4690.48)],b.g_L2EarthCoefficientsJ2000=[new s(8722,1.0725,6283.0758),new s(991,3.1416,0),new s(295,.437,12566.152),new s(27,.05,3.52),new s(16,5.19,26.3),new s(16,3.69,155.42),new s(9,.3,18849.23),new s(9,2.06,77713.77),new s(7,.83,775.52),new s(5,4.66,1577.34),new s(4,1.03,7.11),new s(4,3.44,5573.14),new s(3,5.14,796.3),new s(3,6.05,5507.55),new s(3,1.19,242.73),new s(3,6.12,529.69),new s(3,.3,398.15),new s(3,2.28,553.57),new s(2,4.38,5223.69),new s(2,3.75,.98)],b.g_L3EarthCoefficientsJ2000=[new s(289,5.842,6283.076),new s(21,6.05,12566.15),new s(3,5.2,155.42),new s(3,3.14,0),new s(1,4.72,3.52),new s(1,5.97,242.73),new s(1,5.54,18849.23)],b.g_L4EarthCoefficientsJ2000=[new s(8,4.14,6283.08),new s(1,3.28,12566.15)],b.g_B1EarthCoefficientsJ2000=[new s(227778,3.413766,6283.07585),new s(3806,3.3706,12566.1517),new s(3620,0,0),new s(72,3.33,18849.23),new s(8,3.89,5507.55),new s(8,1.79,5223.69),new s(6,5.2,2352.87)],b.g_B2EarthCoefficientsJ2000=[new s(9721,5.1519,6283.07585),new s(233,3.1416,0),new s(134,.644,12566.152),new s(7,1.07,18849.23)],b.g_B3EarthCoefficientsJ2000=[new s(276,.595,6283.076),new s(17,3.14,0),new s(4,.12,12566.15)],b.g_B4EarthCoefficientsJ2000=[new s(6,2.27,6283.08),new s(1,0,0)],b.g_L0JupiterCoefficients=[new s(59954691,0,0),new s(9695899,5.0619179,529.6909651),new s(573610,1.444062,7.113547),new s(306389,5.417347,1059.38193),new s(97178,4.14265,632.78374),new s(72903,3.64043,522.57742),new s(64264,3.41145,103.09277),new s(39806,2.29377,419.48464),new s(38858,1.27232,316.39187),new s(27965,1.78455,536.80451),new s(13590,5.77481,1589.0729),new s(8769,3.63,949.1756),new s(8246,3.5823,206.1855),new s(7368,5.081,735.8765),new s(6263,.025,213.2991),new s(6114,4.5132,1162.4747),new s(5305,4.1863,1052.2684),new s(5305,1.3067,14.2271),new s(4905,1.3208,110.2063),new s(4647,4.6996,3.9322),new s(3045,4.3168,426.5982),new s(2610,1.5667,846.0828),new s(2028,1.0638,3.1814),new s(1921,.9717,639.8973),new s(1765,2.1415,1066.4955),new s(1723,3.8804,1265.5675),new s(1633,3.582,515.4639),new s(1432,4.2968,625.6702),new s(973,4.098,95.979),new s(884,2.437,412.371),new s(733,6.085,838.969),new s(731,3.806,1581.959),new s(709,1.293,742.99),new s(692,6.134,2118.764),new s(614,4.109,1478.867),new s(582,4.54,309.278),new s(495,3.756,323.505),new s(441,2.958,454.909),new s(417,1.036,2.488),new s(390,4.897,1692.166),new s(376,4.703,1368.66),new s(341,5.715,533.623),new s(330,4.74,.048),new s(262,1.877,.963),new s(261,.82,380.128),new s(257,3.724,199.072),new s(244,5.22,728.763),new s(235,1.227,909.819),new s(220,1.651,543.918),new s(207,1.855,525.759),new s(202,1.807,1375.774),new s(197,5.293,1155.361),new s(175,3.73,942.062),new s(175,3.226,1898.351),new s(175,5.91,956.289),new s(158,4.365,1795.258),new s(151,3.906,74.782),new s(149,4.377,1685.052),new s(141,3.136,491.558),new s(138,1.318,1169.588),new s(131,4.169,1045.155),new s(117,2.5,1596.186),new s(117,3.389,.521),new s(106,4.554,526.51)],b.g_L1JupiterCoefficients=[new s(52993480757,0,0),new s(489741,4.220667,529.690965),new s(228919,6.026475,7.113547),new s(27655,4.57266,1059.38193),new s(20721,5.45939,522.57742),new s(12106,.16986,536.80451),new s(6068,4.4242,103.0928),new s(5434,3.9848,419.4846),new s(4238,5.8901,14.2271),new s(2212,5.2677,206.1855),new s(1746,4.9267,1589.0729),new s(1296,5.5513,3.1814),new s(1173,5.8565,1052.2684),new s(1163,.5145,3.9322),new s(1099,5.307,515.4639),new s(1007,.4648,735.8765),new s(1004,3.1504,426.5982),new s(848,5.758,110.206),new s(827,4.803,213.299),new s(816,.586,1066.495),new s(725,5.518,639.897),new s(568,5.989,625.67),new s(474,4.132,412.371),new s(413,5.737,95.979),new s(345,4.242,632.784),new s(336,3.732,1162.475),new s(234,4.035,949.176),new s(234,6.243,309.278),new s(199,1.505,838.969),new s(195,2.219,323.505),new s(187,6.086,742.99),new s(184,6.28,543.918),new s(171,5.417,199.072),new s(131,.626,728.763),new s(115,.68,846.083),new s(115,5.286,2118.764),new s(108,4.493,956.289),new s(80,5.82,1045.15),new s(72,5.34,942.06),new s(70,5.97,532.87),new s(67,5.73,21.34),new s(66,.13,526.51),new s(65,6.09,1581.96),new s(59,.59,1155.36),new s(58,.99,1596.19),new s(57,5.97,1169.59),new s(57,1.41,533.62),new s(55,5.43,10.29),new s(52,5.73,117.32),new s(52,.23,1368.66),new s(50,6.08,525.76),new s(47,3.63,1478.87),new s(47,.51,1265.57),new s(40,4.16,1692.17),new s(34,.1,302.16),new s(33,5.04,220.41),new s(32,5.37,508.35),new s(29,5.42,1272.68),new s(29,3.36,4.67),new s(29,.76,88.87),new s(25,1.61,831.86)],b.g_L2JupiterCoefficients=[new s(47234,4.32148,7.11355),new s(38966,0,0),new s(30629,2.93021,529.69097),new s(3189,1.055,522.5774),new s(2729,4.8455,536.8045),new s(2723,3.4141,1059.3819),new s(1721,4.1873,14.2271),new s(383,5.768,419.485),new s(378,.76,515.464),new s(367,6.055,103.093),new s(337,3.786,3.181),new s(308,.694,206.186),new s(218,3.814,1589.073),new s(199,5.34,1066.495),new s(197,2.484,3.932),new s(156,1.406,1052.268),new s(146,3.814,639.897),new s(142,1.634,426.598),new s(130,5.837,412.371),new s(117,1.414,625.67),new s(97,4.03,110.21),new s(91,1.11,95.98),new s(87,2.52,632.78),new s(79,4.64,543.92),new s(72,2.22,735.88),new s(58,.83,199.07),new s(57,3.12,213.3),new s(49,1.67,309.28),new s(40,4.02,21.34),new s(40,.62,323.51),new s(36,2.33,728.76),new s(29,3.61,10.29),new s(28,3.24,838.97),new s(26,4.5,742.99),new s(26,2.51,1162.47),new s(25,1.22,1045.15),new s(24,3.01,956.29),new s(19,4.29,532.87),new s(18,.81,508.35),new s(17,4.2,2118.76),new s(17,1.83,526.51),new s(15,5.81,1596.19),new s(15,.68,942.06),new s(15,4,117.32),new s(14,5.95,316.39),new s(14,1.8,302.16),new s(13,2.52,88.87),new s(13,4.37,1169.59),new s(11,4.44,525.76),new s(10,1.72,1581.96),new s(9,2.18,1155.36),new s(9,3.29,220.41),new s(9,3.32,831.86),new s(8,5.76,846.08),new s(8,2.71,533.62),new s(7,2.18,1265.57),new s(6,.5,949.18)],b.g_L3JupiterCoefficients=[new s(6502,2.5986,7.1135),new s(1357,1.3464,529.691),new s(471,2.475,14.227),new s(417,3.245,536.805),new s(353,2.974,522.577),new s(155,2.076,1059.382),new s(87,2.51,515.46),new s(44,0,0),new s(34,3.83,1066.5),new s(28,2.45,206.19),new s(24,1.28,412.37),new s(23,2.98,543.92),new s(20,2.1,639.9),new s(20,1.4,419.48),new s(19,1.59,103.09),new s(17,2.3,21.34),new s(17,2.6,1589.07),new s(16,3.15,625.67),new s(16,3.36,1052.27),new s(13,2.76,95.98),new s(13,2.54,199.07),new s(13,6.27,426.6),new s(9,1.76,10.29),new s(9,2.27,110.21),new s(7,3.43,309.28),new s(7,4.04,728.76),new s(6,2.52,508.35),new s(5,2.91,1045.15),new s(5,5.25,323.51),new s(4,4.3,88.87),new s(4,3.52,302.16),new s(4,4.09,735.88),new s(3,1.43,956.29),new s(3,4.36,1596.19),new s(3,1.25,213.3),new s(3,5.02,838.97),new s(3,2.24,117.32),new s(2,2.9,742.99),new s(2,2.36,942.06)],b.g_L4JupiterCoefficients=[new s(669,.853,7.114),new s(114,3.142,0),new s(100,.743,14.227),new s(50,1.65,536.8),new s(44,5.82,529.69),new s(32,4.86,522.58),new s(15,4.29,515.46),new s(9,.71,1059.38),new s(5,1.3,543.92),new s(4,2.32,1066.5),new s(4,.48,21.34),new s(3,3,412.37),new s(2,.4,639.9),new s(2,4.26,199.07),new s(2,4.91,625.67),new s(2,4.26,206.19),new s(1,5.26,1052.27),new s(1,4.72,95.98),new s(1,1.29,1589.07)],b.g_L5JupiterCoefficients=[new s(50,5.26,7.11),new s(16,5.25,14.23),new s(4,.01,536.8),new s(2,1.1,522.58),new s(1,3.14,0)],b.g_B0JupiterCoefficients=[new s(2268616,3.5585261,529.6909651),new s(110090,0,0),new s(109972,3.908093,1059.38193),new s(8101,3.6051,522.5774),new s(6438,.3063,536.8045),new s(6044,4.2588,1589.0729),new s(1107,2.9853,1162.4747),new s(944,1.675,426.598),new s(942,2.936,1052.268),new s(894,1.754,7.114),new s(836,5.179,103.093),new s(767,2.155,632.784),new s(684,3.678,213.299),new s(629,.643,1066.495),new s(559,.014,846.083),new s(532,2.703,110.206),new s(464,1.173,949.176),new s(431,2.608,419.485),new s(351,4.611,2118.764),new s(132,4.778,742.99),new s(123,3.35,1692.166),new s(116,1.387,323.505),new s(115,5.049,316.392),new s(104,3.701,515.464),new s(103,2.319,1478.867),new s(102,3.153,1581.959)],b.g_B1JupiterCoefficients=[new s(177352,5.701665,529.690965),new s(3230,5.7794,1059.3819),new s(3081,5.4746,522.5774),new s(2212,4.7348,536.8045),new s(1694,3.1416,0),new s(346,4.746,1052.268),new s(234,5.189,1066.495),new s(196,6.186,7.114),new s(150,3.927,1589.073),new s(114,3.439,632.784),new s(97,2.91,949.18),new s(82,5.08,1162.47),new s(77,2.51,103.09),new s(77,.61,419.48),new s(74,5.5,515.46),new s(61,5.45,213.3),new s(50,3.95,735.88),new s(46,.54,110.21),new s(45,1.9,846.08),new s(37,4.7,543.92),new s(36,6.11,316.39),new s(32,4.92,1581.96)],b.g_B2JupiterCoefficients=[new s(8094,1.4632,529.691),new s(813,3.1416,0),new s(742,.957,522.577),new s(399,2.899,536.805),new s(342,1.447,1059.382),new s(74,.41,1052.27),new s(46,3.48,1066.5),new s(30,1.93,1589.07),new s(29,.99,515.46),new s(23,4.27,7.11),new s(14,2.92,543.92),new s(12,5.22,632.78),new s(11,4.88,949.18),new s(6,6.21,1045.15)],b.g_B3JupiterCoefficients=[new s(252,3.381,529.691),new s(122,2.733,522.577),new s(49,1.04,536.8),new s(11,2.31,1052.27),new s(8,2.77,515.46),new s(7,4.25,1059.38),new s(6,1.78,1066.5),new s(4,1.13,543.92),new s(3,3.14,0)],b.g_B4JupiterCoefficients=[new s(15,4.53,522.58),new s(5,4.47,529.69),new s(4,5.44,536.8),new s(3,0,0),new s(2,4.52,515.46),new s(1,4.2,1052.27)],b.g_B5JupiterCoefficients=[new s(1,.09,522.58)],b.g_R0JupiterCoefficients=[new s(520887429,0,0),new s(25209327,3.4910864,529.69096509),new s(610600,3.841154,1059.38193),new s(282029,2.574199,632.783739),new s(187647,2.075904,522.577418),new s(86793,.71001,419.48464),new s(72063,.21466,536.80451),new s(65517,5.97996,316.39187),new s(30135,2.16132,949.17561),new s(29135,1.67759,103.09277),new s(23947,.27458,7.11355),new s(23453,3.54023,735.87651),new s(22284,4.19363,1589.0729),new s(13033,2.96043,1162.4747),new s(12749,2.7155,1052.26838),new s(9703,1.9067,206.1855),new s(9161,4.4135,213.2991),new s(7895,2.4791,426.5982),new s(7058,2.1818,1265.5675),new s(6138,6.2642,846.0828),new s(5477,5.6573,639.8973),new s(4170,2.0161,515.4639),new s(4137,2.7222,625.6702),new s(3503,.5653,1066.4955),new s(2617,2.0099,1581.9593),new s(2500,4.5518,838.9693),new s(2128,6.1275,742.9901),new s(1912,.8562,412.3711),new s(1611,3.0887,1368.6603),new s(1479,2.6803,1478.8666),new s(1231,1.8904,323.5054),new s(1217,1.8017,110.2063),new s(1015,1.3867,454.9094),new s(999,2.872,309.278),new s(961,4.549,2118.764),new s(886,4.148,533.623),new s(821,1.593,1898.351),new s(812,5.941,909.819),new s(777,3.677,728.763),new s(727,3.988,1155.361),new s(655,2.791,1685.052),new s(654,3.382,1692.166),new s(621,4.823,956.289),new s(615,2.276,942.062),new s(562,.081,543.918),new s(542,.284,525.759)],b.g_R1JupiterCoefficients=[new s(1271802,2.6493751,529.6909651),new s(61662,3.00076,1059.38193),new s(53444,3.89718,522.57742),new s(41390,0,0),new s(31185,4.88277,536.80451),new s(11847,2.4133,419.48464),new s(9166,4.7598,7.1135),new s(3404,3.3469,1589.0729),new s(3203,5.2108,735.8765),new s(3176,2.793,103.0928),new s(2806,3.7422,515.4639),new s(2677,4.3305,1052.2684),new s(2600,3.6344,206.1855),new s(2412,1.4695,426.5982),new s(2101,3.9276,639.8973),new s(1646,4.4163,1066.4955),new s(1641,4.4163,625.6702),new s(1050,3.1611,213.2991),new s(1025,2.5543,412.3711),new s(806,2.678,632.784),new s(741,2.171,1162.475),new s(677,6.25,838.969),new s(567,4.577,742.99),new s(485,2.469,949.176),new s(469,4.71,543.918),new s(445,.403,323.505),new s(416,5.368,728.763),new s(402,4.605,309.278),new s(347,4.681,14.227),new s(338,3.168,956.289),new s(261,5.343,846.083),new s(247,3.923,942.062),new s(220,4.842,1368.66),new s(203,5.6,1155.361),new s(200,4.439,1045.155),new s(197,3.706,2118.764),new s(196,3.759,199.072),new s(184,4.265,95.979),new s(180,4.402,532.872),new s(170,4.846,526.51),new s(146,6.13,533.623),new s(133,1.322,110.206),new s(132,4.512,525.759)],b.g_R2JupiterCoefficients=[new s(79645,1.35866,529.69097),new s(8252,5.7777,522.5774),new s(7030,3.2748,536.8045),new s(5314,1.8384,1059.3819),new s(1861,2.9768,7.1135),new s(964,5.48,515.464),new s(836,4.199,419.485),new s(498,3.142,0),new s(427,2.228,639.897),new s(406,3.783,1066.495),new s(377,2.242,1589.073),new s(363,5.368,206.186),new s(342,6.099,1052.268),new s(339,6.127,625.67),new s(333,.003,426.598),new s(280,4.262,412.371),new s(257,.963,632.784),new s(230,.705,735.877),new s(201,3.069,543.918),new s(200,4.429,103.093),new s(139,2.932,14.227),new s(114,.787,728.763),new s(95,1.7,838.97),new s(86,5.14,323.51),new s(83,.06,309.28),new s(80,2.98,742.99),new s(75,1.6,956.29),new s(70,1.51,213.3),new s(67,5.47,199.07),new s(62,6.1,1045.15),new s(56,.96,1162.47),new s(52,5.58,942.06),new s(50,2.72,532.87),new s(45,5.52,508.35),new s(44,.27,526.51),new s(40,5.95,95.98)],b.g_R3JupiterCoefficients=[new s(3519,6.058,529.691),new s(1073,1.6732,536.8045),new s(916,1.413,522.577),new s(342,.523,1059.382),new s(255,1.196,7.114),new s(222,.952,515.464),new s(90,3.14,0),new s(69,2.27,1066.5),new s(58,1.41,543.92),new s(58,.53,639.9),new s(51,5.98,412.37),new s(47,1.58,625.67),new s(43,6.12,419.48),new s(37,1.18,14.23),new s(34,1.67,1052.27),new s(34,.85,206.19),new s(31,1.04,1589.07),new s(30,4.63,426.6),new s(21,2.5,728.76),new s(15,.89,199.07),new s(14,.96,508.35),new s(13,1.5,1045.15),new s(12,2.61,735.88),new s(12,3.56,323.51),new s(11,1.79,309.28),new s(11,6.28,956.29),new s(10,6.26,103.09),new s(9,3.45,838.97)],b.g_R4JupiterCoefficients=[new s(129,.084,536.805),new s(113,4.249,529.691),new s(83,3.3,522.58),new s(38,2.73,515.46),new s(27,5.69,7.11),new s(18,5.4,1059.38),new s(13,6.02,543.92),new s(9,.77,1066.5),new s(8,5.68,14.23),new s(7,1.43,412.37),new s(6,5.12,639.9),new s(5,3.34,625.67),new s(3,3.4,1052.27),new s(3,4.16,728.76),new s(3,2.9,426.6)],b.g_R5JupiterCoefficients=[new s(11,4.75,536.8),new s(4,5.92,522.58),new s(2,5.57,515.46),new s(2,4.3,543.92),new s(2,3.69,7.11),new s(2,4.13,1059.38),new s(2,5.49,1066.5)],b.g_L0MarsCoefficients=[new s(620347712,0,0),new s(18656368,5.050371,3340.6124267),new s(1108217,5.4009984,6681.2248534),new s(91798,5.75479,10021.83728),new s(27745,5.9705,3.52312),new s(12316,.84956,2810.92146),new s(10610,2.93959,2281.2305),new s(8927,4.157,.0173),new s(8716,6.1101,13362.4497),new s(7775,3.3397,5621.8429),new s(6798,.3646,398.149),new s(4161,.2281,2942.4634),new s(3575,1.6619,2544.3144),new s(3075,.857,191.4483),new s(2938,6.0789,.0673),new s(2628,.6481,3337.0893),new s(2580,.03,3344.1355),new s(2389,5.039,796.298),new s(1799,.6563,529.691),new s(1546,2.9158,1751.5395),new s(1528,1.1498,6151.5339),new s(1286,3.068,2146.1654),new s(1264,3.6228,5092.152),new s(1025,3.6933,8962.4553),new s(892,.183,16703.062),new s(859,2.401,2914.014),new s(833,4.495,3340.63),new s(833,2.464,3340.595),new s(749,3.822,155.42),new s(724,.675,3738.761),new s(713,3.663,1059.382),new s(655,.489,3127.313),new s(636,2.922,8432.764),new s(553,4.475,1748.016),new s(550,3.81,.98),new s(472,3.625,1194.447),new s(426,.554,6283.076),new s(415,.497,213.299),new s(312,.999,6677.702),new s(307,.381,6684.748),new s(302,4.486,3532.061),new s(299,2.783,6254.627),new s(293,4.221,20.775),new s(284,5.769,3149.164),new s(281,5.882,1349.867),new s(274,.542,3340.545),new s(274,.134,3340.68),new s(239,5.372,4136.91),new s(236,5.755,3333.499),new s(231,1.282,3870.303),new s(221,3.505,382.897),new s(204,2.821,1221.849),new s(193,3.357,3.59),new s(189,1.491,9492.146),new s(179,1.006,951.718),new s(174,2.414,553.569),new s(172,.439,5486.778),new s(160,3.949,4562.461),new s(144,1.419,135.065),new s(140,3.326,2700.715),new s(138,4.301,7.114),new s(131,4.045,12303.068),new s(128,2.208,1592.596),new s(128,1.807,5088.629),new s(117,3.128,7903.073),new s(113,3.701,1589.073),new s(110,1.052,242.729),new s(105,.785,8827.39),new s(100,3.243,11773.377)],b.g_L1MarsCoefficients=[new s(334085627474,0,0),new s(1458227,3.6042605,3340.6124267),new s(164901,3.926313,6681.224853),new s(19963,4.26594,10021.83728),new s(3452,4.7321,3.5231),new s(2485,4.6128,13362.4497),new s(842,4.459,2281.23),new s(538,5.016,398.149),new s(521,4.994,3344.136),new s(433,2.561,191.448),new s(430,5.316,155.42),new s(382,3.539,796.298),new s(314,4.963,16703.062),new s(283,3.16,2544.314),new s(206,4.569,2146.165),new s(169,1.329,3337.089),new s(158,4.185,1751.54),new s(134,2.233,.98),new s(134,5.974,1748.016),new s(118,6.024,6151.534),new s(117,2.213,1059.382),new s(114,2.129,1194.447),new s(114,5.428,3738.761),new s(91,1.1,1349.87),new s(85,3.91,553.57),new s(83,5.3,6684.75),new s(81,4.43,529.69),new s(80,2.25,8962.46),new s(73,2.5,951.72),new s(73,5.84,242.73),new s(71,3.86,2914.01),new s(68,5.02,382.9),new s(65,1.02,3340.6),new s(65,3.05,3340.63),new s(62,4.15,3149.16),new s(57,3.89,4136.91),new s(48,4.87,213.3),new s(48,1.18,3333.5),new s(47,1.31,3185.19),new s(41,.71,1592.6),new s(40,2.73,7.11),new s(40,5.32,20043.67),new s(33,5.41,6283.08),new s(28,.05,9492.15),new s(27,3.89,1221.85),new s(27,5.11,2700.72)],b.g_L2MarsCoefficients=[new s(58016,2.04979,3340.61243),new s(54188,0,0),new s(13908,2.45742,6681.22485),new s(2465,2.8,10021.8373),new s(398,3.141,13362.45),new s(222,3.194,3.523),new s(121,.543,155.42),new s(62,3.49,16703.06),new s(54,3.54,3344.14),new s(34,6,2281.23),new s(32,4.14,191.45),new s(30,2,796.3),new s(23,4.33,242.73),new s(22,3.45,398.15),new s(20,5.42,553.57),new s(16,.66,.98),new s(16,6.11,2146.17),new s(16,1.22,1748.02),new s(15,6.1,3185.19),new s(14,4.02,951.72),new s(14,2.62,1349.87),new s(13,.6,1194.45),new s(12,3.86,6684.75),new s(11,4.72,2544.31),new s(10,.25,382.9),new s(9,.68,1059.38),new s(9,3.83,20043.67),new s(9,3.88,3738.76),new s(8,5.46,1751.54),new s(7,2.58,3149.16),new s(7,2.38,4136.91),new s(6,5.48,1592.6),new s(6,2.34,3097.88)],b.g_L3MarsCoefficients=[new s(1482,.4443,3340.6124),new s(662,.885,6681.225),new s(188,1.288,10021.837),new s(41,1.65,13362.45),new s(26,0,0),new s(23,2.05,155.42),new s(10,1.58,3.52),new s(8,2,16703.06),new s(5,2.82,242.73),new s(4,2.02,3344.14),new s(3,4.59,3185.19),new s(3,.65,553.57)],b.g_L4MarsCoefficients=[new s(114,3.1416,0),new s(29,5.64,6681.22),new s(24,5.14,3340.61),new s(11,6.03,10021.84),new s(3,.13,13362.45),new s(3,3.56,155.42),new s(1,.49,16703.06),new s(1,1.32,242.73)],b.g_L5MarsCoefficients=[new s(1,3.14,0),new s(1,4.04,6681.22)],b.g_B0MarsCoefficients=[new s(3197135,3.7683204,3340.6124267),new s(298033,4.10617,6681.224853),new s(289105,0,0),new s(31366,4.44651,10021.83728),new s(3484,4.7881,13362.4497),new s(443,5.026,3344.136),new s(443,5.652,3337.089),new s(399,5.131,16703.062),new s(293,3.793,2281.23),new s(182,6.136,6151.534),new s(163,4.264,529.691),new s(160,2.232,1059.382),new s(149,2.165,5621.843),new s(143,1.182,3340.595),new s(143,3.213,3340.63),new s(139,2.418,8962.455)],b.g_B1MarsCoefficients=[new s(350069,5.368478,3340.612427),new s(14116,3.14159,0),new s(9671,5.4788,6681.2249),new s(1472,3.2021,10021.8373),new s(426,3.408,13362.45),new s(102,.776,3337.089),new s(79,3.72,16703.06),new s(33,3.46,5621.84),new s(26,2.48,2281.23)],b.g_B2MarsCoefficients=[new s(16727,.60221,3340.61243),new s(4987,4.1416,0),new s(302,3.559,6681.225),new s(26,1.9,13362.45),new s(21,.92,10021.84),new s(12,2.24,3337.09),new s(8,2.25,16703.06)],b.g_B3MarsCoefficients=[new s(607,1.981,3340.612),new s(43,0,0),new s(14,1.8,6681.22),new s(3,3.45,10021.84)],b.g_B4MarsCoefficients=[new s(13,0,0),new s(11,3.46,3340.61),new s(1,.5,6681.22)],b.g_R0MarsCoefficients=[new s(153033488,0,0),new s(14184953,3.47971284,3340.6124267),new s(660776,3.817834,6681.224853),new s(46179,4.15595,10021.83728),new s(8110,5.5596,2810.9215),new s(7485,1.7724,5621.8429),new s(5523,1.3644,2281.2305),new s(3825,4.4941,13362.4497),new s(2484,4.9255,2942.4634),new s(2307,.0908,2544.3144),new s(1999,5.3606,3337.0893),new s(1960,4.7425,3344.1355),new s(1167,2.1126,5092.152),new s(1103,5.0091,398.149),new s(992,5.839,6151.534),new s(899,4.408,529.691),new s(807,2.102,1059.382),new s(798,3.448,796.298),new s(741,1.499,2146.165),new s(726,1.245,8432.764),new s(692,2.134,8962.455),new s(633,.894,3340.595),new s(633,2.924,3340.63),new s(630,1.287,1751.54),new s(574,.829,2914.014),new s(526,5.383,3738.761),new s(473,5.199,3127.313),new s(348,4.832,16703.062),new s(284,2.907,3532.061),new s(280,5.257,6283.076),new s(276,1.218,6254.627),new s(275,2.908,1748.016),new s(270,3.764,5884.927),new s(239,2.037,1194.447),new s(234,5.105,5486.778),new s(228,3.255,6872.673),new s(223,4.199,3149.164),new s(219,5.583,191.448),new s(208,5.255,3340.545),new s(208,4.846,3340.68),new s(186,5.699,6677.702),new s(183,5.081,6684.748),new s(179,4.184,3333.499),new s(176,5.953,3870.303),new s(164,3.799,4136.91)],b.g_R1MarsCoefficients=[new s(1107433,2.0325052,3340.6124267),new s(103176,2.370718,6681.224853),new s(12877,0,0),new s(10816,2.70888,10021.83728),new s(1195,3.047,13362.4497),new s(439,2.888,2281.23),new s(396,3.423,3344.136),new s(183,1.584,2544.314),new s(136,3.385,16703.062),new s(128,6.043,3337.089),new s(128,.63,1059.382),new s(127,1.954,796.298),new s(118,2.998,2146.165),new s(88,3.42,398.15),new s(83,3.86,3738.76),new s(76,4.45,6151.53),new s(72,2.76,529.69),new s(67,2.55,1751.54),new s(66,4.41,1748.02),new s(58,.54,1194.45),new s(54,.68,8962.46),new s(51,3.73,6684.75),new s(49,5.73,3340.6),new s(49,1.48,3340.63),new s(48,2.58,3149.16),new s(48,2.29,2914.01),new s(39,2.32,4136.91)],b.g_R2MarsCoefficients=[new s(44242,.47931,3340.61243),new s(8138,.87,6681.2249),new s(1275,1.2259,10021.8373),new s(187,1.573,13362.45),new s(52,3.14,0),new s(41,1.97,3344.14),new s(27,1.92,16703.06),new s(18,4.43,2281.23),new s(12,4.53,3185.19),new s(10,5.39,1059.38),new s(10,.42,796.3)],b.g_R3MarsCoefficients=[new s(1113,5.1499,3340.6124),new s(424,5.613,6681.225),new s(100,5.997,10021.837),new s(20,.08,13362.45),new s(5,3.14,0),new s(3,.43,16703.06)],b.g_R4MarsCoefficients=[new s(20,3.58,3340.61),new s(16,4.05,6681.22),new s(6,4.46,10021.84),new s(2,4.84,13362.45)],b.g_L0MercuryCoefficients=[new s(440250710,0,0),new s(40989415,1.48302034,26087.90314157),new s(5046294,4.47785449,52175.8062831),new s(855347,1.165203,78263.709425),new s(165590,4.119692,104351.612566),new s(34562,.77931,130439.51571),new s(7583,3.7135,156527.4188),new s(3560,1.512,1109.3786),new s(1803,4.1033,5661.332),new s(1726,.3583,182615.322),new s(1590,2.9951,25028.5212),new s(1365,4.5992,27197.2817),new s(1017,.8803,31749.2352),new s(714,1.541,24978.525),new s(644,5.303,21535.95),new s(451,6.05,51116.424),new s(404,3.282,208703.225),new s(352,5.242,20426.571),new s(345,2.792,15874.618),new s(343,5.765,955.6),new s(339,5.863,25558.212),new s(325,1.337,53285.185),new s(273,2.495,529.691),new s(264,3.917,57837.138),new s(260,.987,4551.953),new s(239,.113,1059.382),new s(235,.267,11322.664),new s(217,.66,13521.751),new s(209,2.092,47623.853),new s(183,2.629,27043.503),new s(182,2.434,25661.305),new s(176,4.536,51066.428),new s(173,2.452,24498.83),new s(142,3.36,37410.567),new s(138,.291,10213.286),new s(125,3.721,39609.655),new s(118,2.781,77204.327),new s(106,4.206,19804.827)],b.g_L1MercuryCoefficients=[new s(2608814706223,0,0),new s(1126008,6.2170397,26087.9031416),new s(303471,3.055655,52175.806283),new s(80538,6.10455,78263.70942),new s(21245,2.83532,104351.61257),new s(5592,5.8268,130439.5157),new s(1472,2.5185,156527.4188),new s(388,5.48,182615.322),new s(352,3.052,1109.379),new s(103,2.149,208703.225),new s(94,6.12,27197.28),new s(91,0,24978.52),new s(52,5.62,5661.33),new s(44,4.57,25028.52),new s(28,3.04,51066.43),new s(27,5.09,234791.13)],b.g_L2MercuryCoefficients=[new s(53050,0,0),new s(16904,4.69072,26087.90314),new s(7397,1.3474,52175.8063),new s(3018,4.4564,78263.7094),new s(1107,1.264,104351.6126),new s(378,4.32,130439.516),new s(123,1.069,156527.419),new s(39,4.08,182615.32),new s(15,4.63,1109.38),new s(12,.79,208703.23)],b.g_L3MercuryCoefficients=[new s(188,.035,52175.806),new s(142,3.125,26087.903),new s(97,3,78263.71),new s(44,6.02,104351.61),new s(35,0,0),new s(18,2.78,130439.52),new s(7,5.82,156527.42),new s(3,2.57,182615.32)],b.g_L4MercuryCoefficients=[new s(114,3.1416,0),new s(2,2.03,26087.9),new s(2,1.42,78263.71),new s(2,4.5,52175.81),new s(1,4.5,104351.61),new s(1,1.27,130439.52)],b.g_L5MercuryCoefficients=[new s(1,3.14,0)],b.g_B0MercuryCoefficients=[new s(11737529,1.98357499,26087.90314157),new s(2388077,5.0373896,52175.8062831),new s(1222840,3.1415927,0),new s(543252,1.796444,78263.709425),new s(129779,4.832325,104351.612566),new s(31867,1.58088,130439.51571),new s(7963,4.6097,156527.4188),new s(2014,1.3532,182615.322),new s(514,4.378,208703.325),new s(209,2.02,24978.525),new s(208,4.918,27197.282),new s(132,1.119,234791.128),new s(121,1.813,53285.185),new s(100,5.657,20426.571)],b.g_B1MercuryCoefficients=[new s(429151,3.501698,26087.903142),new s(146234,3.141593,0),new s(22675,.01515,52175.80628),new s(10895,.4854,78263.70942),new s(6353,3.4294,104351.6126),new s(2496,.1605,130439.5157),new s(860,3.185,156527.419),new s(278,6.21,182615.322),new s(86,2.95,208703.23),new s(28,.29,27197.28),new s(26,5.98,234791.13)],b.g_B2MercuryCoefficients=[new s(11831,4.79066,26087.90314),new s(1914,0,0),new s(1045,1.2122,52175.8063),new s(266,4.434,78263.709),new s(170,1.623,104351.613),new s(96,4.8,130439.52),new s(45,1.61,156527.42),new s(18,4.67,182615.32),new s(7,1.43,208703.23)],b.g_B3MercuryCoefficients=[new s(235,.354,26087.903),new s(161,0,0),new s(19,4.36,52175.81),new s(6,2.51,78263.71),new s(5,6.14,104351.61),new s(3,3.12,130439.52),new s(2,6.27,156527.42)],b.g_B4MercuryCoefficients=[new s(4,1.75,26087.9),new s(1,3.14,0)],b.g_R0MercuryCoefficients=[new s(39528272,0,0),new s(7834132,6.1923372,26087.9031416),new s(795526,2.959897,52175.806283),new s(121282,6.010642,78263.709425),new s(21922,2.7782,104351.61257),new s(4354,5.8289,130439.5157),new s(918,2.597,156527.419),new s(290,1.424,25028.521),new s(260,3.028,27197.282),new s(202,5.647,182615.322),new s(201,5.592,31749.235),new s(142,6.253,24978.525),new s(100,3.734,21535.95)],b.g_R1MercuryCoefficients=[new s(217348,4.656172,26087.903142),new s(44142,1.42386,52175.80628),new s(10094,4.47466,78263.70942),new s(2433,1.2423,104351.6126),new s(1624,0,0),new s(604,4.293,130439.516),new s(153,1.061,156527.419),new s(39,4.11,182615.32)],b.g_R2MercuryCoefficients=[new s(3118,3.0823,26087.9031),new s(1245,6.1518,52175.8063),new s(425,2.926,78263.709),new s(136,5.98,104351.613),new s(42,2.75,130439.52),new s(22,3.14,0),new s(13,5.8,156527.42)],b.g_R3MercuryCoefficients=[new s(33,1.68,26087.9),new s(24,4.63,52175.81),new s(12,1.39,78263.71),new s(5,4.44,104351.61),new s(2,1.21,130439.52)],b.g_MoonCoefficients1=[new Ce(0,0,1,0),new Ce(2,0,-1,0),new Ce(2,0,0,0),new Ce(0,0,2,0),new Ce(0,1,0,0),new Ce(0,0,0,2),new Ce(2,0,-2,0),new Ce(2,-1,-1,0),new Ce(2,0,1,0),new Ce(2,-1,0,0),new Ce(0,1,-1,0),new Ce(1,0,0,0),new Ce(0,1,1,0),new Ce(2,0,0,-2),new Ce(0,0,1,2),new Ce(0,0,1,-2),new Ce(4,0,-1,0),new Ce(0,0,3,0),new Ce(4,0,-2,0),new Ce(2,1,-1,0),new Ce(2,1,0,0),new Ce(1,0,-1,0),new Ce(1,1,0,0),new Ce(2,-1,1,0),new Ce(2,0,2,0),new Ce(4,0,0,0),new Ce(2,0,-3,0),new Ce(0,1,-2,0),new Ce(2,0,-1,2),new Ce(2,-1,-2,0),new Ce(1,0,1,0),new Ce(2,-2,0,0),new Ce(0,1,2,0),new Ce(0,2,0,0),new Ce(2,-2,-1,0),new Ce(2,0,1,-2),new Ce(2,0,0,2),new Ce(4,-1,-1,0),new Ce(0,0,2,2),new Ce(3,0,-1,0),new Ce(2,1,1,0),new Ce(4,-1,-2,0),new Ce(0,2,-1,0),new Ce(2,2,-1,0),new Ce(2,1,-2,0),new Ce(2,-1,0,-2),new Ce(4,0,1,0),new Ce(0,0,4,0),new Ce(4,-1,0,0),new Ce(1,0,-2,0),new Ce(2,1,0,-2),new Ce(0,0,2,-2),new Ce(1,1,1,0),new Ce(3,0,-2,0),new Ce(4,0,-3,0),new Ce(2,-1,2,0),new Ce(0,2,1,0),new Ce(1,1,-1,0),new Ce(2,0,3,0),new Ce(2,0,-1,-2)],b.g_MoonCoefficients2=[new pt(6288774,-20905355),new pt(1274027,-3699111),new pt(658314,-2955968),new pt(213618,-569925),new pt(-185116,48888),new pt(-114332,-3149),new pt(58793,246158),new pt(57066,-152138),new pt(53322,-170733),new pt(45758,-204586),new pt(-40923,-129620),new pt(-34720,108743),new pt(-30383,104755),new pt(15327,10321),new pt(-12528,0),new pt(10980,79661),new pt(10675,-34782),new pt(10034,-23210),new pt(8548,-21636),new pt(-7888,24208),new pt(-6766,30824),new pt(-5163,-8379),new pt(4987,-16675),new pt(4036,-12831),new pt(3994,-10445),new pt(3861,-11650),new pt(3665,14403),new pt(-2689,-7003),new pt(-2602,0),new pt(2390,10056),new pt(-2348,6322),new pt(2236,-9884),new pt(-2120,5751),new pt(-2069,0),new pt(2048,-4950),new pt(-1773,4130),new pt(-1595,0),new pt(1215,-3958),new pt(-1110,0),new pt(-892,3258),new pt(-810,2616),new pt(759,-1897),new pt(-713,-2117),new pt(-700,2354),new pt(691,0),new pt(596,0),new pt(549,-1423),new pt(537,-1117),new pt(520,-1571),new pt(-487,-1739),new pt(-399,0),new pt(-381,-4421),new pt(351,0),new pt(-340,0),new pt(330,0),new pt(327,0),new pt(-323,1165),new pt(299,0),new pt(294,0),new pt(0,8752)],b.g_MoonCoefficients3=[new Ce(0,0,0,1),new Ce(0,0,1,1),new Ce(0,0,1,-1),new Ce(2,0,0,-1),new Ce(2,0,-1,1),new Ce(2,0,-1,-1),new Ce(2,0,0,1),new Ce(0,0,2,1),new Ce(2,0,1,-1),new Ce(0,0,2,-1),new Ce(2,-1,0,-1),new Ce(2,0,-2,-1),new Ce(2,0,1,1),new Ce(2,1,0,-1),new Ce(2,-1,-1,1),new Ce(2,-1,0,1),new Ce(2,-1,-1,-1),new Ce(0,1,-1,-1),new Ce(4,0,-1,-1),new Ce(0,1,0,1),new Ce(0,0,0,3),new Ce(0,1,-1,1),new Ce(1,0,0,1),new Ce(0,1,1,1),new Ce(0,1,1,-1),new Ce(0,1,0,-1),new Ce(1,0,0,-1),new Ce(0,0,3,1),new Ce(4,0,0,-1),new Ce(4,0,-1,1),new Ce(0,0,1,-3),new Ce(4,0,-2,1),new Ce(2,0,0,-3),new Ce(2,0,2,-1),new Ce(2,-1,1,-1),new Ce(2,0,-2,1),new Ce(0,0,3,-1),new Ce(2,0,2,1),new Ce(2,0,-3,-1),new Ce(2,1,-1,1),new Ce(2,1,0,1),new Ce(4,0,0,1),new Ce(2,-1,1,1),new Ce(2,-2,0,-1),new Ce(0,0,1,3),new Ce(2,1,1,-1),new Ce(1,1,0,-1),new Ce(1,1,0,1),new Ce(0,1,-2,-1),new Ce(2,1,-1,-1),new Ce(1,0,1,1),new Ce(2,-1,-2,-1),new Ce(0,1,2,1),new Ce(4,0,-2,-1),new Ce(4,-1,-1,-1),new Ce(1,0,1,-1),new Ce(4,0,1,-1),new Ce(1,0,-1,-1),new Ce(4,-1,0,-1),new Ce(2,-2,0,1)],b.g_MoonCoefficients4=[5128122,280602,277693,173237,55413,46271,32573,17198,9266,8822,8216,4324,4200,-3359,2463,2211,2065,-1870,1828,-1794,-1749,-1565,-1491,-1475,-1410,-1344,-1335,1107,1021,833,777,671,607,596,491,-451,439,422,421,-366,-351,331,315,302,-283,-229,223,223,-220,-220,-185,181,-177,176,166,-164,132,-119,115,107],b.g_MoonPerigeeApogeeCoefficients1=[new ce(2,0,0,-1.6769,0),new ce(4,0,0,.4589,0),new ce(6,0,0,-.1856,0),new ce(8,0,0,.0883,0),new ce(2,-1,0,-.0773,19e-5),new ce(0,1,0,.0502,-13e-5),new ce(10,0,0,-.046,0),new ce(4,-1,0,.0422,-11e-5),new ce(6,-1,0,-.0256,0),new ce(12,0,0,.0253,0),new ce(1,0,0,.0237,0),new ce(8,-1,0,.0162,0),new ce(14,0,0,-.0145,0),new ce(0,0,2,.0129,0),new ce(3,0,0,-.0112,0),new ce(10,-1,0,-.0104,0),new ce(16,0,0,.0086,0),new ce(12,-1,0,.0069,0),new ce(5,0,0,.0066,0),new ce(2,0,2,-.0053,0),new ce(18,0,0,-.0052,0),new ce(14,-1,0,-.0046,0),new ce(7,0,0,-.0041,0),new ce(2,1,0,.004,0),new ce(20,0,0,.0032,0),new ce(1,1,0,-.0032,0),new ce(16,-1,0,.0031,0),new ce(4,1,0,-.0029,0),new ce(9,0,0,.0027,0),new ce(4,0,2,.0027,0),new ce(2,-2,0,-.0027,0),new ce(4,-2,0,.0024,0),new ce(6,-2,0,-.0021,0),new ce(22,0,0,-.0021,0),new ce(18,-1,0,-.0021,0),new ce(6,1,0,.0019,0),new ce(11,0,0,-.0018,0),new ce(8,1,0,-.0014,0),new ce(4,0,-2,-.0014,0),new ce(6,0,2,-.0014,0),new ce(3,1,0,.0014,0),new ce(5,1,0,-.0014,0),new ce(13,0,0,.0013,0),new ce(20,-1,0,.0013,0),new ce(3,2,0,.0011,0),new ce(4,-2,2,-.0011,0),new ce(1,2,0,-.0011,0),new ce(22,-1,0,-9e-4,0),new ce(0,0,4,-8e-4,0),new ce(6,0,-2,8e-4,0),new ce(2,1,-2,8e-4,0),new ce(0,2,0,7e-4,0),new ce(0,-1,2,7e-4,0),new ce(2,0,4,7e-4,0),new ce(0,-2,2,-6e-4,0),new ce(2,2,-2,-6e-4,0),new ce(24,0,0,6e-4,0),new ce(4,0,-4,5e-4,0),new ce(2,2,0,5e-4,0),new ce(1,-1,0,-4e-4,0)],b.g_MoonPerigeeApogeeCoefficients2=[new ce(2,0,0,.4392,0),new ce(4,0,0,.0684,0),new ce(0,1,0,.0456,-11e-5),new ce(2,-1,0,.0426,-11e-5),new ce(0,0,2,.0212,0),new ce(1,0,0,-.0189,0),new ce(6,0,0,.0144,0),new ce(4,-1,0,.0113,0),new ce(2,0,2,.0047,0),new ce(1,1,0,.0036,0),new ce(8,0,0,.0035,0),new ce(6,-1,0,.0034,0),new ce(2,0,-2,-.0034,0),new ce(2,-2,0,.0022,0),new ce(3,0,0,-.0017,0),new ce(4,0,2,.0013,0),new ce(8,-1,0,.0011,0),new ce(4,-2,0,.001,0),new ce(10,0,0,9e-4,0),new ce(3,1,0,7e-4,0),new ce(0,2,0,6e-4,0),new ce(2,1,0,5e-4,0),new ce(2,2,0,5e-4,0),new ce(6,0,2,4e-4,0),new ce(6,-2,0,4e-4,0),new ce(10,-1,0,4e-4,0),new ce(5,0,0,-4e-4,0),new ce(4,0,-2,-4e-4,0),new ce(0,1,2,3e-4,0),new ce(12,0,0,3e-4,0),new ce(2,-1,2,3e-4,0),new ce(1,-1,0,-3e-4,0)],b.g_MoonPerigeeApogeeCoefficients3=[new ce(2,0,0,63.224,0),new ce(4,0,0,-6.99,0),new ce(2,-1,0,2.834,0),new ce(2,-1,0,0,-.0071),new ce(6,0,0,1.927,0),new ce(1,0,0,-1.263,0),new ce(8,0,0,-.702,0),new ce(0,1,0,.696,0),new ce(0,1,0,0,-.0017),new ce(0,0,2,-.69,0),new ce(4,-1,0,-.629,0),new ce(4,-1,0,0,.0016),new ce(2,0,-2,-.392,0),new ce(10,0,0,.297,0),new ce(6,-1,0,.26,0),new ce(3,0,0,.201,0),new ce(2,1,0,-.161,0),new ce(1,1,0,.157,0),new ce(12,0,0,-.138,0),new ce(8,-1,0,-.127,0),new ce(2,0,2,.104,0),new ce(2,-2,0,.104,0),new ce(5,0,0,-.079,0),new ce(14,0,0,.068,0),new ce(10,-1,0,.067,0),new ce(4,1,0,.054,0),new ce(12,-1,0,-.038,0),new ce(4,-2,0,-.038,0),new ce(7,0,0,.037,0),new ce(4,0,2,-.037,0),new ce(16,0,0,-.035,0),new ce(3,1,0,-.03,0),new ce(1,-1,0,.029,0),new ce(6,1,0,-.025,0),new ce(0,2,0,.023,0),new ce(14,-1,0,.023,0),new ce(2,2,0,-.023,0),new ce(6,-2,0,.022,0),new ce(2,-1,-2,-.021,0),new ce(9,0,0,-.02,0),new ce(18,0,0,.019,0),new ce(6,0,2,.017,0),new ce(0,-1,2,.014,0),new ce(16,-1,0,-.014,0),new ce(4,0,-20,.013,0),new ce(8,1,0,.012,0),new ce(11,0,0,.011,0),new ce(5,1,0,.01,0),new ce(20,0,0,-.01,0)],b.g_MoonPerigeeApogeeCoefficients4=[new ce(2,0,0,-9.147,0),new ce(1,0,0,-.841,0),new ce(0,0,2,.697,0),new ce(0,1,0,-.656,.0016),new ce(4,0,0,.355,0),new ce(2,-1,0,.159,0),new ce(1,1,0,.127,0),new ce(4,-1,0,.065,0),new ce(6,0,0,.052,0),new ce(2,1,0,.043,0),new ce(2,0,2,.031,0),new ce(2,0,-2,-.023,0),new ce(2,-2,0,.022,0),new ce(2,2,0,.019,0),new ce(0,2,0,-.016,0),new ce(6,-1,0,.014,0),new ce(8,0,0,.01,0)],b.g_L0NC=[new s(531188633,0,0),new s(1798476,2.9010127,38.1330356),new s(1019728,.4858092,1.4844727),new s(124532,4.830081,36.648563),new s(42064,5.41055,2.96895),new s(37715,6.09222,35.16409),new s(33785,1.24489,76.26607),new s(16483,8e-5,491.55793),new s(9199,4.9375,39.6175),new s(8994,.2746,175.1661),new s(4216,1.9871,73.2971),new s(3365,1.0359,33.6796),new s(2285,4.2061,4.4534),new s(1434,2.7834,74.7816),new s(900,2.076,109.946),new s(745,3.19,71.813),new s(506,5.748,114.399),new s(400,.35,1021.249),new s(345,3.462,41.102),new s(340,3.304,77.751),new s(323,2.248,32.195),new s(306,.497,.521),new s(287,4.505,.048),new s(282,2.246,146.594),new s(267,4.889,.963),new s(252,5.782,388.465),new s(245,1.247,9.561),new s(233,2.505,137.033),new s(227,1.797,453.425),new s(170,3.324,108.461),new s(151,2.192,33.94),new s(150,2.997,5.938),new s(148,.859,111.43),new s(119,3.677,2.448),new s(109,2.416,183.243),new s(103,.041,.261),new s(103,4.404,70.328),new s(102,5.705,.112)],b.g_L1NC=[new s(3837687717,0,0),new s(16604,4.86319,1.48447),new s(15807,2.27923,38.13304),new s(3335,3.682,76.2661),new s(1306,3.6732,2.9689),new s(605,1.505,35.164),new s(179,3.453,39.618),new s(107,2.451,4.453),new s(106,2.755,33.68),new s(73,5.49,36.65),new s(57,1.86,114.4),new s(57,5.22,.52),new s(35,4.52,74.78),new s(32,5.9,77.75),new s(30,3.67,388.47),new s(29,5.17,9.56),new s(29,5.17,2.45),new s(26,5.25,168.05)],b.g_L2NC=[new s(53893,0,0),new s(296,1.855,1.484),new s(281,1.191,38.133),new s(270,5.721,76.266),new s(23,1.21,2.97),new s(9,4.43,35.16),new s(7,.54,2.45)],b.g_L3NC=[new s(31,0,0),new s(15,1.35,76.27),new s(12,6.04,1.48),new s(12,6.11,38.13)],b.g_L4NC=[new s(114,3.142,0)],b.g_B0NC=[new s(3088623,1.4410437,38.1330356),new s(27789,5.91272,76.26607),new s(27624,0,0),new s(15448,3.50877,39.61751),new s(15355,2.52124,36.64856),new s(2e3,1.51,74.7816),new s(1968,4.3778,1.4845),new s(1015,3.2156,35.1641),new s(606,2.802,73.297),new s(595,2.129,41.102),new s(589,3.187,2.969),new s(402,4.169,114.399),new s(280,1.682,77.751),new s(262,3.767,213.299),new s(254,3.271,453.425),new s(206,4.257,529.691),new s(140,3.53,137.033)],b.g_B1NC=[new s(227279,3.807931,38.133036),new s(1803,1.9758,76.2661),new s(1433,3.1416,0),new s(1386,4.8256,36.6486),new s(1073,6.0805,39.6175),new s(148,3.858,74.782),new s(136,.478,1.484),new s(70,6.19,35.16),new s(52,5.05,73.3),new s(43,.31,114.4),new s(37,4.89,41.1),new s(37,5.76,2.97),new s(26,5.22,213.3)],b.g_B2NC=[new s(9691,5.5712,38.133),new s(79,3.63,76.27),new s(72,.45,36.65),new s(59,3.14,0),new s(30,1.61,39.62),new s(6,5.61,74.78)],b.g_B3NC=[new s(273,1.017,38.133),new s(2,0,0),new s(2,2.37,36.65),new s(2,5.33,76.27)],b.g_B4NC=[new s(6,2.67,38.13)],b.g_R0NC=[new s(3007013206,0,0),new s(27062259,1.32999459,38.13303564),new s(1691764,3.2518614,36.6485629),new s(807831,5.185928,1.484473),new s(537761,4.521139,35.16409),new s(495726,1.571057,491.557929),new s(274572,1.845523,175.16606),new s(135134,3.372206,39.617508),new s(121802,5.797544,76.266071),new s(100895,.377027,73.297126),new s(69792,3.79617,2.96895),new s(46688,5.74938,33.67962),new s(24594,.50802,109.94569),new s(16939,1.59422,71.81265),new s(14230,1.07786,74.7816),new s(12012,1.92062,1021.24889),new s(8395,.6782,146.5943),new s(7572,1.0715,388.4652),new s(5721,2.5906,4.4534),new s(4840,1.9069,41.102),new s(4483,2.9057,529.691),new s(4421,1.7499,108.4612),new s(4354,.6799,32.1951),new s(4270,3.4134,453.4249),new s(3381,.8481,183.2428),new s(2881,1.986,137.033),new s(2879,3.6742,350.3321),new s(2636,3.0976,213.2991),new s(2530,5.7984,490.0735),new s(2523,.4863,493.0424),new s(2306,2.8096,70.3282),new s(2087,.6186,33.9402)],b.g_R1NC=[new s(236339,.70498,38.133036),new s(13220,3.32015,1.48447),new s(8622,6.2163,35.1641),new s(2702,1.8814,39.6175),new s(2155,2.0943,2.9689),new s(2153,5.1687,76.2661),new s(1603,0,0),new s(1464,1.1842,33.6796),new s(1136,3.9189,36.6486),new s(898,5.241,388.465),new s(790,.533,168.053),new s(760,.021,182.28),new s(607,1.077,1021.249),new s(572,3.401,484.444),new s(561,2.887,498.671)],b.g_R2NC=[new s(4247,5.8991,38.133),new s(218,.346,1.484),new s(163,2.239,168.053),new s(156,4.594,182.28),new s(127,2.848,35.164)],b.g_R3NC=[new s(166,4.552,38.133)],b.g_NuC=[new lt(0,0,0,0,1,-171996,-174.2,92025,8.9),new lt(-2,0,0,2,2,-13187,-1.6,5736,-3.1),new lt(0,0,0,2,2,-2274,-.2,977,-.5),new lt(0,0,0,0,2,2062,.2,-895,.5),new lt(0,1,0,0,0,1426,-3.4,54,-.1),new lt(0,0,1,0,0,712,.1,-7,0),new lt(-2,1,0,2,2,-517,1.2,224,-.6),new lt(0,0,0,2,1,-386,-.4,200,0),new lt(0,0,1,2,2,-301,0,129,-.1),new lt(-2,-1,0,2,2,217,-.5,-95,.3),new lt(-2,0,1,0,0,-158,0,0,0),new lt(-2,0,0,2,1,129,.1,-70,0),new lt(0,0,-1,2,2,123,0,-53,0),new lt(2,0,0,0,0,63,0,0,0),new lt(0,0,1,0,1,63,.1,-33,0),new lt(2,0,-1,2,2,-59,0,26,0),new lt(0,0,-1,0,1,-58,-.1,32,0),new lt(0,0,1,2,1,-51,0,27,0),new lt(-2,0,2,0,0,48,0,0,0),new lt(0,0,-2,2,1,46,0,-24,0),new lt(2,0,0,2,2,-38,0,16,0),new lt(0,0,2,2,2,-31,0,13,0),new lt(0,0,2,0,0,29,0,0,0),new lt(-2,0,1,2,2,29,0,-12,0),new lt(0,0,0,2,0,26,0,0,0),new lt(-2,0,0,2,0,-22,0,0,0),new lt(0,0,-1,2,1,21,0,-10,0),new lt(0,2,0,0,0,17,-.1,0,0),new lt(2,0,-1,0,1,16,0,-8,0),new lt(-2,2,0,2,2,-16,.1,7,0),new lt(0,1,0,0,1,-15,0,9,0),new lt(-2,0,1,0,1,-13,0,7,0),new lt(0,-1,0,0,1,-12,0,6,0),new lt(0,0,2,-2,0,11,0,0,0),new lt(2,0,-1,2,1,-10,0,5,0),new lt(2,0,1,2,2,-8,0,3,0),new lt(0,1,0,2,2,7,0,-3,0),new lt(-2,1,1,0,0,-7,0,0,0),new lt(0,-1,0,2,2,-7,0,3,0),new lt(2,0,0,2,1,-7,0,3,0),new lt(2,0,1,0,0,6,0,0,0),new lt(-2,0,2,2,2,6,0,-3,0),new lt(-2,0,1,2,1,6,0,-3,0),new lt(2,0,-2,0,1,-6,0,3,0),new lt(2,0,0,0,1,-6,0,3,0),new lt(0,-1,1,0,0,5,0,0,0),new lt(-2,-1,0,2,1,-5,0,3,0),new lt(-2,0,0,0,1,-5,0,3,0),new lt(0,0,2,2,1,-5,0,3,0),new lt(-2,0,2,0,1,4,0,0,0),new lt(-2,1,0,2,1,4,0,0,0),new lt(0,0,1,-2,0,4,0,0,0),new lt(-1,0,1,0,0,-4,0,0,0),new lt(-2,1,0,0,0,-4,0,0,0),new lt(1,0,0,0,0,-4,0,0,0),new lt(0,0,1,2,0,3,0,0,0),new lt(0,0,-2,2,2,-3,0,0,0),new lt(-1,-1,1,0,0,-3,0,0,0),new lt(0,1,1,0,0,-3,0,0,0),new lt(0,-1,1,2,2,-3,0,0,0),new lt(2,-1,-1,2,2,-3,0,0,0),new lt(0,0,3,2,2,-3,0,0,0),new lt(2,-1,0,2,2,-3,0,0,0)],b.g_AAParallax_C1=Math.sin(S.d2R(S.dmS2D(0,0,8.794))),b.g_PlutoArgumentCoefficients=[new Jt(0,0,1),new Jt(0,0,2),new Jt(0,0,3),new Jt(0,0,4),new Jt(0,0,5),new Jt(0,0,6),new Jt(0,1,-1),new Jt(0,1,0),new Jt(0,1,1),new Jt(0,1,2),new Jt(0,1,3),new Jt(0,2,-2),new Jt(0,2,-1),new Jt(0,2,0),new Jt(1,-1,0),new Jt(1,-1,1),new Jt(1,0,-3),new Jt(1,0,-2),new Jt(1,0,-1),new Jt(1,0,0),new Jt(1,0,1),new Jt(1,0,2),new Jt(1,0,3),new Jt(1,0,4),new Jt(1,1,-3),new Jt(1,1,-2),new Jt(1,1,-1),new Jt(1,1,0),new Jt(1,1,1),new Jt(1,1,3),new Jt(2,0,-6),new Jt(2,0,-5),new Jt(2,0,-4),new Jt(2,0,-3),new Jt(2,0,-2),new Jt(2,0,-1),new Jt(2,0,0),new Jt(2,0,1),new Jt(2,0,2),new Jt(2,0,3),new Jt(3,0,-2),new Jt(3,0,-1),new Jt(3,0,0)],b.g_PlutoLongitudeCoefficients=[new Se(-19799805,19850055),new Se(897144,-4954829),new Se(611149,1211027),new Se(-341243,-189585),new Se(129287,-34992),new Se(-38164,30893),new Se(20442,-9987),new Se(-4063,-5071),new Se(-6016,-3336),new Se(-3956,3039),new Se(-667,3572),new Se(1276,501),new Se(1152,-917),new Se(630,-1277),new Se(2571,-459),new Se(899,-1449),new Se(-1016,1043),new Se(-2343,-1012),new Se(7042,788),new Se(1199,-338),new Se(418,-67),new Se(120,-274),new Se(-60,-159),new Se(-82,-29),new Se(-36,-29),new Se(-40,7),new Se(-14,22),new Se(4,13),new Se(5,2),new Se(-1,0),new Se(2,0),new Se(-4,5),new Se(4,-7),new Se(14,24),new Se(-49,-34),new Se(163,-48),new Se(9,-24),new Se(-4,1),new Se(-3,1),new Se(1,3),new Se(-3,-1),new Se(5,-3),new Se(0,0)],b.g_PlutoLatitudeCoefficients=[new Se(-5452852,-14974862),new Se(3527812,1672790),new Se(-1050748,327647),new Se(178690,-292153),new Se(18650,100340),new Se(-30697,-25823),new Se(4878,11248),new Se(226,-64),new Se(2030,-836),new Se(69,-604),new Se(-247,-567),new Se(-57,1),new Se(-122,175),new Se(-49,-164),new Se(-197,199),new Se(-25,217),new Se(589,-248),new Se(-269,711),new Se(185,193),new Se(315,807),new Se(-130,-43),new Se(5,3),new Se(2,17),new Se(2,5),new Se(2,3),new Se(3,1),new Se(2,-1),new Se(1,-1),new Se(0,-1),new Se(0,0),new Se(0,-2),new Se(2,2),new Se(-7,0),new Se(10,-8),new Se(-3,20),new Se(6,5),new Se(14,17),new Se(-2,0),new Se(0,0),new Se(0,0),new Se(0,1),new Se(0,0),new Se(1,0)],b.g_PlutoRadiusCoefficients=[new Se(66865439,68951812),new Se(-11827535,-332538),new Se(1593179,-1438890),new Se(-18444,483220),new Se(-65977,-85431),new Se(31174,-6032),new Se(-5794,22161),new Se(4601,4032),new Se(-1729,234),new Se(-415,702),new Se(239,723),new Se(67,-67),new Se(1034,-451),new Se(-129,504),new Se(480,-231),new Se(2,-441),new Se(-3359,265),new Se(7856,-7832),new Se(36,45763),new Se(8663,8547),new Se(-809,-769),new Se(263,-144),new Se(-126,32),new Se(-35,-16),new Se(-19,-4),new Se(-15,8),new Se(-4,12),new Se(5,6),new Se(3,1),new Se(6,-2),new Se(2,2),new Se(-2,-2),new Se(14,13),new Se(-63,13),new Se(136,-236),new Se(273,1065),new Se(251,149),new Se(-25,-9),new Se(9,-2),new Se(-8,7),new Se(2,-10),new Se(19,35),new Se(10,3)],b.g_L0SaturnCoefficients=[new s(87401354,0,0),new s(11107660,3.9620509,213.29909544),new s(1414151,4.5858152,7.113547),new s(398379,.52112,206.185548),new s(350769,3.303299,426.598191),new s(206816,.246584,103.092774),new s(79271,3.84007,220.41264),new s(23990,4.66977,110.20632),new s(16574,.43719,419.48464),new s(15820,.93809,632.78374),new s(15054,2.7167,639.89729),new s(14907,5.76903,316.39187),new s(14610,1.56519,3.93215),new s(13160,4.44891,14.22709),new s(13005,5.98119,11.0457),new s(10725,3.1294,202.2534),new s(6126,1.7633,277.035),new s(5863,.2366,529.691),new s(5228,4.2078,3.1814),new s(5020,3.1779,433.7117),new s(4593,.6198,199.072),new s(4006,2.2448,63.7359),new s(3874,3.2228,138.5175),new s(3269,.7749,949.1756),new s(2954,.9828,95.9792),new s(2461,2.0316,735.8765),new s(1758,3.2658,522.5774),new s(1640,5.505,846.0828),new s(1581,4.3727,309.2783),new s(1391,4.0233,323.5054),new s(1124,2.8373,415.5525),new s(1087,4.1834,2.4477),new s(1017,3.717,227.5262),new s(957,.507,1265.567),new s(853,3.421,175.166),new s(849,3.191,209.367),new s(789,5.007,.963),new s(749,2.144,853.196),new s(744,5.253,224.345),new s(687,1.747,1052.268),new s(654,1.599,.048),new s(634,2.299,412.371),new s(625,.97,210.118),new s(580,3.093,74.782),new s(546,2.127,350.332),new s(543,1.518,9.561),new s(530,4.449,117.32),new s(478,2.965,137.033),new s(474,5.475,742.99),new s(452,1.044,490.334),new s(449,1.29,127.472),new s(372,2.278,217.231),new s(355,3.013,838.969),new s(347,1.539,340.771),new s(343,.246,.521),new s(330,.247,1581.959),new s(322,.961,203.738),new s(322,2.572,647.011),new s(309,3.495,216.48),new s(287,2.37,351.817),new s(278,.4,211.815),new s(249,1.47,1368.66),new s(227,4.91,12.53),new s(220,4.204,200.769),new s(209,1.345,625.67),new s(208,.483,1162.475),new s(208,1.283,39.357),new s(204,6.011,265.989),new s(185,3.503,149.563),new s(184,.973,4.193),new s(182,5.491,2.921),new s(174,1.863,.751),new s(165,.44,5.417),new s(149,5.736,52.69),new s(148,1.535,5.629),new s(146,6.231,195.14),new s(140,4.295,21.341),new s(131,4.068,10.295),new s(125,6.277,1898.351),new s(122,1.976,4.666),new s(118,5.341,554.07),new s(117,2.679,1155.361),new s(114,5.594,1059.382),new s(112,1.105,191.208),new s(110,.166,1.484),new s(109,3.438,536.805),new s(107,4.012,956.289),new s(104,2.192,88.866),new s(103,1.197,1685.052),new s(101,4.965,269.921)],b.g_L1SaturnCoefficients=[new s(21354295596,0,0),new s(1296855,1.8282054,213.2990954),new s(564348,2.885001,7.113547),new s(107679,2.277699,206.185548),new s(98323,1.0807,426.59819),new s(40255,2.04128,220.41264),new s(19942,1.27955,103.09277),new s(10512,2.7488,14.22709),new s(6939,.4049,639.8973),new s(4803,2.4419,419.4846),new s(4056,2.9217,110.2063),new s(3769,3.6497,3.9322),new s(3385,2.4169,3.1814),new s(3302,1.2626,433.7117),new s(3071,2.3274,199.072),new s(1953,3.5639,11.0457),new s(1249,2.628,95.9792),new s(922,1.961,227.526),new s(706,4.417,529.691),new s(650,6.174,202.253),new s(628,6.111,309.278),new s(487,6.04,853.196),new s(479,4.988,522.577),new s(468,4.617,63.736),new s(417,2.117,323.505),new s(408,1.299,209.367),new s(352,2.317,632.784),new s(344,3.959,412.371),new s(340,3.634,316.392),new s(336,3.772,735.877),new s(332,2.861,210.118),new s(289,2.733,117.32),new s(281,5.744,2.448),new s(266,.543,647.011),new s(230,1.644,216.48),new s(192,2.965,224.345),new s(173,4.077,846.083),new s(167,2.597,21.341),new s(136,2.286,10.295),new s(131,3.441,742.99),new s(128,4.095,217.231),new s(109,6.161,415.552),new s(98,4.73,838.97),new s(94,3.48,1052.27),new s(92,3.95,88.87),new s(87,1.22,440.83),new s(83,3.11,625.67),new s(78,6.24,302.16),new s(67,.29,4.67),new s(66,5.65,9.56),new s(62,4.29,127.47),new s(62,1.83,195.14),new s(58,2.48,191.96),new s(57,5.02,137.03),new s(55,.28,74.78),new s(54,5.13,490.33),new s(51,1.46,536.8),new s(47,1.18,149.56),new s(47,5.15,515.46),new s(46,2.23,956.29),new s(44,2.71,5.42),new s(40,.41,269.92),new s(40,3.89,728.76),new s(38,.65,422.67),new s(38,2.53,12.53),new s(37,3.78,2.92),new s(35,6.08,5.63),new s(34,3.21,1368.66),new s(33,4.64,277.03),new s(33,5.43,1066.5),new s(33,.3,351.82),new s(32,4.39,1155.36),new s(31,2.43,52.69),new s(30,2.84,203),new s(30,6.19,284.15),new s(30,3.39,1059.38),new s(29,2.03,330.62),new s(28,2.74,265.99),new s(26,4.51,340.77)],b.g_L2SaturnCoefficients=[new s(116441,1.179879,7.113547),new s(91921,.07425,213.2991),new s(90592,0,0),new s(15277,4.06492,206.18555),new s(10631,.25778,220.41264),new s(10605,5.40964,426.59819),new s(4265,1.046,14.2271),new s(1216,2.9186,103.0928),new s(1165,4.6094,639.8973),new s(1082,5.6913,433.7117),new s(1045,4.0421,199.072),new s(1020,.6337,3.1814),new s(634,4.388,419.485),new s(549,5.573,3.932),new s(457,1.268,110.206),new s(425,.209,227.526),new s(274,4.288,95.979),new s(162,1.381,11.046),new s(129,1.566,309.278),new s(117,3.881,853.196),new s(105,4.9,647.011),new s(101,.893,21.341),new s(96,2.91,316.39),new s(95,5.63,412.37),new s(85,5.73,209.37),new s(83,6.05,216.48),new s(82,1.02,117.32),new s(75,4.76,210.12),new s(67,.46,522.58),new s(66,.48,10.29),new s(64,.35,323.51),new s(61,4.88,632.78),new s(53,2.75,529.69),new s(46,5.69,440.83),new s(45,1.67,202.25),new s(42,5.71,88.87),new s(32,.07,63.74),new s(32,1.67,302.16),new s(31,4.16,191.96),new s(27,.83,224.34),new s(25,5.66,735.88),new s(20,5.94,217.23),new s(18,4.9,625.67),new s(17,1.63,742.99),new s(16,.58,515.46),new s(14,.21,838.97),new s(14,3.76,195.14),new s(12,4.72,203),new s(12,.13,234.64),new s(12,3.12,846.08),new s(11,5.92,536.8),new s(11,5.6,728.76),new s(11,3.2,1066.5),new s(10,4.99,422.67),new s(10,.26,330.62),new s(10,4.15,860.31),new s(9,.46,956.29),new s(8,2.14,269.92),new s(8,5.25,429.78),new s(8,4.03,9.56),new s(7,5.4,1052.27),new s(6,4.46,284.15),new s(6,5.93,405.26)],b.g_L3SaturnCoefficients=[new s(16039,5.73945,7.11355),new s(4250,4.5854,213.2991),new s(1907,4.7608,220.4126),new s(1466,5.9133,206.1855),new s(1162,5.6197,14.2271),new s(1067,3.6082,426.5982),new s(239,3.861,433.712),new s(237,5.768,199.072),new s(166,5.116,3.181),new s(151,2.736,639.897),new s(131,4.743,227.526),new s(63,.23,419.48),new s(62,4.74,103.09),new s(40,5.47,21.34),new s(40,5.96,95.98),new s(39,5.83,110.21),new s(28,3.01,647.01),new s(25,.99,3.93),new s(19,1.92,853.2),new s(18,4.97,10.29),new s(18,1.03,412.37),new s(18,4.2,216.48),new s(18,3.32,309.28),new s(16,3.9,440.83),new s(16,5.62,117.32),new s(13,1.18,88.87),new s(11,5.58,11.05),new s(11,5.93,191.96),new s(10,3.95,209.37),new s(9,3.39,302.16),new s(8,4.88,323.51),new s(7,.38,632.78),new s(6,2.25,522.58),new s(6,1.06,210.12),new s(5,4.64,234.64),new s(4,3.14,0),new s(4,2.31,515.46),new s(3,2.2,860.31),new s(3,.59,529.69),new s(3,4.93,224.34),new s(3,.42,625.67),new s(2,4.77,330.62),new s(2,3.35,429.78),new s(2,3.2,202.25),new s(2,1.19,1066.5),new s(2,1.35,405.26),new s(2,4.16,223.59),new s(2,3.07,654.12)],b.g_L4SaturnCoefficients=[new s(1662,3.9983,7.1135),new s(257,2.984,220.413),new s(236,3.902,14.227),new s(149,2.741,213.299),new s(114,3.142,0),new s(110,1.515,206.186),new s(68,1.72,426.6),new s(40,2.05,433.71),new s(38,1.24,199.07),new s(31,3.01,227.53),new s(15,.83,639.9),new s(9,3.71,21.34),new s(6,2.42,419.48),new s(6,1.16,647.01),new s(4,1.45,95.98),new s(4,2.12,440.83),new s(3,4.09,110.21),new s(3,2.77,412.37),new s(3,3.01,88.87),new s(3,0,853.2),new s(3,.39,103.09),new s(2,3.78,117.32),new s(2,2.83,234.64),new s(2,5.08,309.28),new s(2,2.24,216.48),new s(2,5.19,302.16),new s(1,1.55,191.96)],b.g_L5SaturnCoefficients=[new s(124,2.259,7.114),new s(34,2.16,14.23),new s(28,1.2,220.41),new s(6,1.22,227.53),new s(5,.24,433.71),new s(4,6.23,426.6),new s(3,2.97,199.07),new s(3,4.29,206.19),new s(2,6.25,213.3),new s(1,5.28,639.9),new s(1,.24,440.83),new s(1,3.14,0)],b.g_B0SaturnCoefficients=[new s(4330678,3.6028443,213.2990954),new s(240348,2.852385,426.598191),new s(84746,0,0),new s(34116,.57297,206.18555),new s(30863,3.48442,220.41264),new s(14734,2.11847,639.89729),new s(9917,5.79,419.4846),new s(6994,4.736,7.1135),new s(4808,5.4331,316.3919),new s(4788,4.9651,110.2063),new s(3432,2.7326,433.7117),new s(1506,6.013,103.0928),new s(1060,5.631,529.691),new s(969,5.204,632.784),new s(942,1.396,853.196),new s(708,3.803,323.505),new s(552,5.131,202.253),new s(400,3.359,227.526),new s(319,3.626,209.367),new s(316,1.997,647.011),new s(314,.465,217.231),new s(284,4.886,224.345),new s(236,2.139,11.046),new s(215,5.95,846.083),new s(209,2.12,415.552),new s(207,.73,199.072),new s(179,2.954,63.736),new s(141,.644,490.334),new s(139,4.595,14.227),new s(139,1.998,735.877),new s(135,5.245,742.99),new s(122,3.115,522.577),new s(116,3.109,216.48),new s(114,.963,210.118)],b.g_B1SaturnCoefficients=[new s(397555,5.3329,213.299095),new s(49479,3.14159,0),new s(18572,6.09919,426.59819),new s(14801,2.30586,206.18555),new s(9644,1.6967,220.4126),new s(3757,1.2543,419.4846),new s(2717,5.9117,639.8973),new s(1455,.8516,433.7117),new s(1291,2.9177,7.1135),new s(853,.436,316.392),new s(298,.919,632.784),new s(292,5.316,853.196),new s(284,1.619,227.526),new s(275,3.889,103.093),new s(172,.052,647.011),new s(166,2.444,199.072),new s(158,5.209,110.206),new s(128,1.207,529.691),new s(110,2.457,217.231),new s(82,2.76,210.12),new s(81,2.86,14.23),new s(69,1.66,202.25),new s(65,1.26,216.48),new s(61,1.25,209.37),new s(59,1.82,323.51),new s(46,.82,440.83),new s(36,1.82,224.34),new s(34,2.84,117.32),new s(33,1.31,412.37),new s(32,1.19,846.08),new s(27,4.65,1066.5),new s(27,4.44,11.05)],b.g_B2SaturnCoefficients=[new s(20630,.50482,213.2991),new s(3720,3.9983,206.1855),new s(1627,6.1819,220.4126),new s(1346,0,0),new s(706,3.039,419.485),new s(365,5.099,426.598),new s(330,5.279,433.712),new s(219,3.828,639.897),new s(139,1.043,7.114),new s(104,6.157,227.526),new s(93,1.98,316.39),new s(71,4.15,199.07),new s(52,2.88,632.78),new s(49,4.43,647.01),new s(41,3.16,853.2),new s(29,4.53,210.12),new s(24,1.12,14.23),new s(21,4.35,217.23),new s(20,5.31,440.83),new s(18,.85,110.21),new s(17,5.68,216.48),new s(16,4.26,103.09),new s(14,3,412.37),new s(12,2.53,529.69),new s(8,3.32,202.25),new s(7,5.56,209.37),new s(7,.29,323.51),new s(6,1.16,117.32),new s(6,3.61,869.31)],b.g_B3SaturnCoefficients=[new s(666,1.99,213.299),new s(632,5.698,206.186),new s(398,0,0),new s(188,4.338,220.413),new s(92,4.84,419.48),new s(52,3.42,433.71),new s(42,2.38,426.6),new s(26,4.4,227.53),new s(21,5.85,199.07),new s(18,1.99,639.9),new s(11,5.37,7.11),new s(10,2.55,647.01),new s(7,3.46,316.39),new s(6,4.8,632.78),new s(6,.02,210.12),new s(6,3.52,440.83),new s(5,5.64,14.23),new s(5,1.22,853.2),new s(4,4.71,412.37),new s(3,.63,103.09),new s(2,3.72,216.48)],b.g_B4SaturnCoefficients=[new s(80,1.12,206.19),new s(32,3.12,213.3),new s(17,2.48,220.41),new s(12,3.14,0),new s(9,.38,419.48),new s(6,1.56,433.71),new s(5,2.63,227.53),new s(5,1.28,199.07),new s(1,1.43,426.6),new s(1,.67,647.01),new s(1,1.72,440.83),new s(1,6.18,639.9)],b.g_B5SaturnCoefficients=[new s(8,2.82,206.19),new s(1,.51,220.41)],b.g_R0SaturnCoefficients=[new s(955758136,0,0),new s(52921382,2.3922622,213.29909544),new s(1873680,5.2354961,206.1855484),new s(1464664,1.6476305,426.5981909),new s(821891,5.9352,316.39187),new s(547507,5.015326,103.092774),new s(371684,2.271148,220.412642),new s(361778,3.139043,7.113547),new s(140618,5.704067,632.783739),new s(108975,3.293136,110.206321),new s(69007,5.941,419.48464),new s(61053,.94038,639.89729),new s(48913,1.55733,202.2534),new s(34144,.19519,277.03499),new s(32402,5.47085,949.17561),new s(20937,.46349,735.87651),new s(20839,1.52103,433.71174),new s(20747,5.33256,199.072),new s(15298,3.05944,529.69097),new s(14296,2.60434,323.50542),new s(12884,1.64892,138.5175),new s(11993,5.98051,846.08283),new s(11380,1.73106,522.57742),new s(9796,5.2048,1265.5675),new s(7753,5.8519,95.9792),new s(6771,3.0043,14.2271),new s(6466,.1773,1052.2684),new s(5850,1.4552,415.5525),new s(5307,.5974,63.7359),new s(4696,2.1492,227.5262),new s(4044,1.6401,209.3669),new s(3688,.7802,412.3711),new s(3461,1.8509,175.1661),new s(3420,4.9455,1581.9593),new s(3401,.5539,350.3321),new s(3376,3.6953,224.3448),new s(2976,5.6847,210.1177),new s(2885,1.3876,838.9693),new s(2881,.1796,853.1964),new s(2508,3.5385,742.9901),new s(2448,6.1841,1368.6603),new s(2406,2.9656,117.3199),new s(2174,.0151,340.7709),new s(2024,5.0541,11.0457)],b.g_R1SaturnCoefficients=[new s(6182981,.2584352,213.2990954),new s(506578,.711147,206.185548),new s(341394,5.796358,426.598191),new s(188491,.472157,220.412642),new s(186262,3.141593,0),new s(143891,1.407449,7.113547),new s(49621,6.01744,103.09277),new s(20928,5.09246,639.89729),new s(19953,1.1756,419.48464),new s(18840,1.6082,110.20632),new s(13877,.75886,199.072),new s(12893,5.9433,433.71174),new s(5397,1.2885,14.2271),new s(4869,.8679,323.5054),new s(4247,.393,227.5262),new s(3252,1.2585,95.9792),new s(3081,3.4366,522.5774),new s(2909,4.6068,202.2534),new s(2856,2.1673,735.8765),new s(1988,2.4505,412.3711),new s(1941,6.0239,209.3669),new s(1581,1.2919,210.1177),new s(1340,4.308,853.1964),new s(1316,1.253,117.3199),new s(1203,1.8665,316.3919),new s(1091,.0753,216.4805),new s(966,.48,632.784),new s(954,5.152,647.011),new s(898,.983,529.691),new s(882,1.885,1052.268),new s(874,1.402,224.345),new s(785,3.064,838.969),new s(740,1.382,625.67),new s(658,4.144,309.278),new s(650,1.725,742.99),new s(613,3.033,63.736),new s(599,2.549,217.231),new s(503,2.13,3.932)],b.g_R2SaturnCoefficients=[new s(436902,4.786717,213.299095),new s(71923,2.5007,206.18555),new s(49767,4.97168,220.41264),new s(43221,3.8694,426.59819),new s(29646,5.9631,7.11355),new s(4721,2.4753,199.072),new s(4142,4.1067,433.7117),new s(3789,3.0977,639.8973),new s(2964,1.3721,103.0928),new s(2556,2.8507,419.4846),new s(2327,0,0),new s(2208,6.2759,110.2063),new s(2188,5.8555,14.2271),new s(1957,4.9245,227.5262),new s(924,5.464,323.505),new s(706,2.971,95.979),new s(546,4.129,412.371),new s(431,5.178,522.577),new s(405,4.173,209.367),new s(391,4.481,216.48),new s(374,5.834,117.32),new s(361,3.277,647.011),new s(356,3.192,210.118),new s(326,2.269,853.196),new s(207,4.022,735.877),new s(204,.088,202.253),new s(180,3.597,632.784),new s(178,4.097,440.825),new s(154,3.135,625.67),new s(148,.136,302.165),new s(133,2.594,191.958),new s(132,5.933,309.278)],b.g_R3SaturnCoefficients=[new s(20315,3.02187,213.2991),new s(8924,3.1914,220.4126),new s(6909,4.3517,206.1855),new s(4087,4.2241,7.1135),new s(3879,2.0106,426.5982),new s(1071,4.2036,199.072),new s(907,2.283,433.712),new s(606,3.175,227.526),new s(597,4.135,14.227),new s(483,1.173,639.897),new s(393,0,0),new s(229,4.698,419.485),new s(188,4.59,110.206),new s(150,3.202,103.093),new s(121,3.768,323.505),new s(102,4.71,95.979),new s(101,5.819,412.371),new s(93,1.44,647.01),new s(84,2.63,216.48),new s(73,4.15,117.32),new s(62,2.31,440.83),new s(55,.31,853.2),new s(50,2.39,209.37),new s(45,4.37,191.96),new s(41,.69,522.58),new s(40,1.84,302.16),new s(38,5.94,88.87),new s(32,4.01,21.34)],b.g_R4SaturnCoefficients=[new s(1202,1.415,220.4126),new s(708,1.162,213.299),new s(516,6.24,206.186),new s(427,2.469,7.114),new s(268,.187,426.598),new s(170,5.959,199.072),new s(150,.48,433.712),new s(145,1.442,227.526),new s(121,2.405,14.227),new s(47,5.57,639.9),new s(19,5.86,647.01),new s(17,.53,440.83),new s(16,2.9,110.21),new s(15,.3,419.48),new s(14,1.3,412.37),new s(13,2.09,323.51),new s(11,.22,95.98),new s(11,2.46,117.32),new s(10,3.14,0),new s(9,1.56,88.87),new s(9,2.28,21.34),new s(9,.68,216.48),new s(8,1.27,234.64)],b.g_R5SaturnCoefficients=[new s(129,5.913,220.413),new s(32,.69,7.11),new s(27,5.91,227.53),new s(20,4.95,433.71),new s(20,.67,14.23),new s(14,2.67,206.19),new s(14,1.46,199.07),new s(13,4.59,426.6),new s(7,4.63,213.3),new s(5,3.61,639.9),new s(4,4.9,440.83),new s(3,4.07,647.01),new s(3,4.66,191.96),new s(3,.49,323.51),new s(3,3.18,419.48),new s(2,3.7,88.87),new s(2,3.32,95.98),new s(2,.56,117.32)],b.g_L0UranusCoefficients=[new s(548129294,0,0),new s(9260408,.8910642,74.7815986),new s(1504248,3.6271926,1.4844727),new s(365982,1.899622,73.297126),new s(272328,3.358237,149.563197),new s(70328,5.39254,63.7359),new s(68893,6.09292,76.26607),new s(61999,2.26952,2.96895),new s(61951,2.85099,11.0457),new s(26469,3.14152,71.81265),new s(25711,6.1138,454.90937),new s(21079,4.36059,148.07872),new s(17819,1.74437,36.64856),new s(14613,4.73732,3.93215),new s(11163,5.82682,224.3448),new s(10998,.48865,138.5175),new s(9527,2.9552,35.1641),new s(7546,5.2363,109.9457),new s(4220,3.2333,70.8494),new s(4052,2.2775,151.0477),new s(3490,5.4831,146.5943),new s(3355,1.0655,4.4534),new s(3144,4.752,77.7505),new s(2927,4.629,9.5612),new s(2922,5.3524,85.8273),new s(2273,4.366,70.3282),new s(2149,.6075,38.133),new s(2051,1.5177,.1119),new s(1992,4.9244,277.035),new s(1667,3.6274,380.1278),new s(1533,2.5859,52.6902),new s(1376,2.0428,65.2204),new s(1372,4.1964,111.4302),new s(1284,3.1135,202.2534),new s(1282,.5427,222.8603),new s(1244,.9161,2.4477),new s(1221,.199,108.4612),new s(1151,4.179,33.6796),new s(1150,.9334,3.1814),new s(1090,1.775,12.5302),new s(1072,.2356,62.2514),new s(946,1.192,127.472),new s(708,5.183,213.299),new s(653,.966,78.714),new s(628,.182,984.6),new s(607,5.432,529.691),new s(559,3.358,.521),new s(524,2.013,299.126),new s(483,2.106,.963),new s(471,1.407,184.727),new s(467,.415,145.11),new s(434,5.521,183.243),new s(405,5.987,8.077),new s(399,.338,415.552),new s(396,5.87,351.817),new s(379,2.35,56.622),new s(310,5.833,145.631),new s(300,5.644,22.091),new s(294,5.839,39.618),new s(252,1.637,221.376),new s(249,4.746,225.829),new s(239,2.35,137.033),new s(224,.516,84.343),new s(223,2.843,.261),new s(220,1.922,67.668),new s(217,6.142,5.938),new s(216,4.778,340.771),new s(208,5.58,68.844),new s(202,1.297,.048),new s(199,.956,152.532),new s(194,1.888,456.394),new s(193,.916,453.425),new s(187,1.319,.16),new s(182,3.536,79.235),new s(173,1.539,160.609),new s(172,5.68,219.891),new s(170,3.677,5.417),new s(169,5.879,18.159),new s(165,1.424,106.977),new s(163,3.05,112.915),new s(158,.738,54.175),new s(147,1.263,59.804),new s(143,1.3,35.425),new s(139,5.386,32.195),new s(139,4.26,909.819),new s(124,1.374,7.114),new s(110,2.027,554.07),new s(109,5.706,77.963),new s(104,5.028,.751),new s(104,1.458,24.379),new s(103,.681,14.978)],b.g_L1UranusCoefficients=[new s(7502543122,0,0),new s(154458,5.242017,74.781599),new s(24456,1.71256,1.48447),new s(9258,.4284,11.0457),new s(8266,1.5022,63.7359),new s(7842,1.3198,149.5632),new s(3899,.4648,3.9322),new s(2284,4.1737,76.2661),new s(1927,.5301,2.9689),new s(1233,1.5863,70.8494),new s(791,5.436,3.181),new s(767,1.996,73.297),new s(482,2.984,85.827),new s(450,4.138,138.517),new s(446,3.723,224.345),new s(427,4.731,71.813),new s(354,2.583,148.079),new s(348,2.454,9.561),new s(317,5.579,52.69),new s(206,2.363,2.448),new s(189,4.202,56.622),new s(184,.284,151.048),new s(180,5.684,12.53),new s(171,3.001,78.714),new s(158,2.909,.963),new s(155,5.591,4.453),new s(154,4.652,35.164),new s(152,2.942,77.751),new s(143,2.59,62.251),new s(121,4.148,127.472),new s(116,3.732,65.22),new s(102,4.188,145.631),new s(102,6.034,.112),new s(88,3.99,18.16),new s(88,6.16,202.25),new s(81,2.64,22.09),new s(72,6.05,70.33),new s(69,4.05,77.96),new s(59,3.7,67.67),new s(47,3.54,351.82),new s(44,5.91,7.11),new s(43,5.72,5.42),new s(39,4.92,222.86),new s(36,5.9,33.68),new s(36,3.29,8.08),new s(36,3.33,71.6),new s(35,5.08,38.13),new s(31,5.62,984.6),new s(31,5.5,59.8),new s(31,5.46,160.61),new s(30,1.66,447.8),new s(29,1.15,462.02),new s(29,4.52,84.34),new s(27,5.54,131.4),new s(27,6.15,299.13),new s(26,4.99,137.03),new s(25,5.74,380.13)],b.g_L2UranusCoefficients=[new s(53033,0,0),new s(2358,2.2601,74.7816),new s(769,4.526,11.046),new s(552,3.258,63.736),new s(542,2.276,3.932),new s(529,4.923,1.484),new s(258,3.691,3.181),new s(239,5.858,149.563),new s(182,6.218,70.849),new s(54,1.44,76.27),new s(49,6.03,56.62),new s(45,3.91,2.45),new s(45,.81,85.83),new s(38,1.78,52.69),new s(37,4.46,2.97),new s(33,.86,9.56),new s(29,5.1,73.3),new s(24,2.11,18.16),new s(22,5.99,138.52),new s(22,4.82,78.71),new s(21,2.4,77.96),new s(21,2.17,224.34),new s(17,2.54,145.63),new s(17,3.47,12.53),new s(12,.02,22.09),new s(11,.08,127.47),new s(10,5.16,71.6),new s(10,4.46,62.25),new s(9,4.26,7.11),new s(8,5.5,67.67),new s(7,1.25,5.42),new s(6,3.36,447.8),new s(6,5.45,65.22),new s(6,4.52,151.05),new s(6,5.73,462.02)],b.g_L3UranusCoefficients=[new s(121,.024,74.782),new s(68,4.12,3.93),new s(53,2.39,11.05),new s(46,0,0),new s(45,2.04,3.18),new s(44,2.96,1.48),new s(25,4.89,63.74),new s(21,4.55,70.85),new s(20,2.31,149.56),new s(9,1.58,56.62),new s(4,.23,18.16),new s(4,5.39,76.27),new s(4,.95,77.96),new s(3,4.98,85.83),new s(3,4.13,52.69),new s(3,.37,78.71),new s(2,.86,145.63),new s(2,5.66,9.56)],b.g_L4UranusCoefficients=[new s(114,3.142,0),new s(6,4.58,74.78),new s(3,.35,11.05),new s(1,3.42,56.62)],b.g_B0UranusCoefficients=[new s(1346278,2.6187781,74.7815986),new s(62341,5.08111,149.5632),new s(61601,3.14159,0),new s(9964,1.616,76.2661),new s(9926,.5763,73.2971),new s(3259,1.2612,224.3448),new s(2972,2.2437,1.4845),new s(2010,6.0555,148.0787),new s(1522,.2796,63.7359),new s(924,4.038,151.048),new s(761,6.14,71.813),new s(522,3.321,138.517),new s(463,.743,85.827),new s(437,3.381,529.691),new s(435,.341,77.751),new s(431,3.554,213.299),new s(420,5.213,11.046),new s(245,.788,2.969),new s(233,2.257,222.86),new s(216,1.591,38.133),new s(180,3.725,299.126),new s(175,1.236,146.594),new s(174,1.937,380.128),new s(160,5.336,111.43),new s(144,5.962,35.164),new s(116,5.739,70.849),new s(106,.941,70.328),new s(102,2.619,78.714)],b.g_B1UranusCoefficients=[new s(206366,4.123943,74.781599),new s(8563,.3382,149.5632),new s(1726,2.1219,73.2971),new s(1374,0,0),new s(1369,3.0686,76.2661),new s(451,3.777,1.484),new s(400,2.848,224.345),new s(307,1.255,148.079),new s(154,3.786,63.736),new s(112,5.573,151.048),new s(111,5.329,138.517),new s(83,3.59,71.81),new s(56,3.4,85.83),new s(54,1.7,77.75),new s(42,1.21,11.05),new s(41,4.45,78.71),new s(32,3.77,222.86),new s(30,2.56,2.97),new s(27,5.34,213.3),new s(26,.42,380.13)],b.g_B2UranusCoefficients=[new s(9212,5.8004,74.7816),new s(557,0,0),new s(286,2.177,149.563),new s(95,3.84,73.3),new s(45,4.88,76.27),new s(20,5.46,1.48),new s(15,.88,138.52),new s(14,2.85,148.08),new s(14,5.07,63.74),new s(10,5,224.34),new s(8,6.27,78.71)],b.g_B3UranusCoefficients=[new s(268,1.251,74.782),new s(11,3.14,0),new s(6,4.01,149.56),new s(3,5.78,73.3)],b.g_B4UranusCoefficients=[new s(6,2.85,74.78)],b.g_R0UranusCoefficients=[new s(1921264848,0,0),new s(88784984,5.60377527,74.78159857),new s(3440836,.328361,73.2971259),new s(2055653,1.7829517,149.5631971),new s(649322,4.522473,76.266071),new s(602248,3.860038,63.735898),new s(496404,1.401399,454.909367),new s(338526,1.580027,138.517497),new s(243508,1.570866,71.812653),new s(190522,1.998094,1.484473),new s(161858,2.791379,148.078724),new s(143706,1.383686,11.0457),new s(93192,.17437,36.64856),new s(89806,3.66105,109.94569),new s(71424,4.24509,224.3448),new s(46677,1.39977,35.16409),new s(39026,3.36235,277.03499),new s(39010,1.66971,70.84945),new s(36755,3.88649,146.59425),new s(30349,.701,151.04767),new s(29156,3.18056,77.75054),new s(25786,3.78538,85.8273),new s(25620,5.25656,380.12777),new s(22637,.72519,529.69097),new s(20473,2.7964,70.32818),new s(20472,1.55589,202.2534),new s(17901,.55455,2.96895),new s(15503,5.35405,38.13304),new s(14702,4.90434,108.46122),new s(12897,2.62154,111.43016),new s(12328,5.96039,127.4718),new s(11959,1.75044,984.60033),new s(11853,.99343,52.6902),new s(11696,3.29826,3.93215),new s(11495,.43774,65.22037),new s(10793,1.42105,213.2991),new s(9111,4.9964,62.2514),new s(8421,5.2535,222.8603),new s(8402,5.0388,415.5525),new s(7449,.7949,351.8166),new s(7329,3.9728,183.2428),new s(6046,5.6796,78.7138),new s(5524,3.115,9.5612),new s(5445,5.1058,145.1098),new s(5238,2.6296,33.6796),new s(4079,3.2206,340.7709),new s(3919,4.2502,39.6175),new s(3802,6.1099,184.7273),new s(3781,3.4584,456.3938),new s(3687,2.4872,453.4249),new s(3102,4.1403,219.8914),new s(2963,.8298,56.6224),new s(2942,.4239,299.1264),new s(2940,2.1464,137.033),new s(2938,3.6766,140.002),new s(2865,.31,12.5302),new s(2538,4.8546,131.4039),new s(2364,.4425,554.07),new s(2183,2.9404,305.3462)],b.g_R1UranusCoefficients=[new s(1479896,3.6720571,74.7815986),new s(71212,6.22601,63.7359),new s(68627,6.13411,149.5632),new s(24060,3.14159,0),new s(21468,2.60177,76.26607),new s(20857,5.24625,11.0457),new s(11405,.01848,70.84945),new s(7497,.4236,73.2971),new s(4244,1.4169,85.8273),new s(3927,3.1551,71.8127),new s(3578,2.3116,224.3448),new s(3506,2.5835,138.5175),new s(3229,5.255,3.9322),new s(3060,.1532,1.4845),new s(2564,.9808,148.0787),new s(2429,3.9944,52.6902),new s(1645,2.6535,127.4718),new s(1584,1.4305,78.7138),new s(1508,5.06,151.0477),new s(1490,2.6756,56.6224),new s(1413,4.5746,202.2534),new s(1403,1.3699,77.7505),new s(1228,1.047,62.2514),new s(1033,.2646,131.4039),new s(992,2.172,65.22),new s(862,5.055,351.817),new s(744,3.076,35.164),new s(687,2.499,77.963),new s(647,4.473,70.328),new s(624,.863,9.561),new s(604,.907,984.6),new s(575,3.231,447.796),new s(562,2.718,462.023),new s(530,5.917,213.299),new s(528,5.151,2.969)],b.g_R2UranusCoefficients=[new s(22440,.69953,74.7816),new s(4727,1.699,63.7359),new s(1682,4.6483,70.8494),new s(1650,3.0966,11.0457),new s(1434,3.5212,149.5632),new s(770,0,0),new s(500,6.172,76.266),new s(461,.767,3.932),new s(390,4.496,56.622),new s(390,5.527,85.827),new s(292,.204,52.69),new s(287,3.534,73.297),new s(273,3.847,138.517),new s(220,1.964,131.404),new s(216,.848,77.963),new s(205,3.248,78.714),new s(149,4.898,127.472),new s(129,2.081,3.181)],b.g_R3UranusCoefficients=[new s(1164,4.7345,74.7816),new s(212,3.343,63.736),new s(196,2.98,70.849),new s(105,.958,11.046),new s(73,1,149.56),new s(72,.03,56.62),new s(55,2.59,3.93),new s(36,5.65,77.96),new s(34,3.82,76.27),new s(32,3.6,131.4)],b.g_R4UranusCoefficients=[new s(53,3.01,74.78),new s(10,1.91,56.62)],b.g_L0VenusCoefficients=[new s(317614667,0,0),new s(1353968,5.5931332,10213.2855462),new s(89892,5.3065,20426.57109),new s(5477,4.4163,7860.4194),new s(3456,2.6996,11790.6291),new s(2372,2.9938,3930.2097),new s(1664,4.2502,1577.3435),new s(1438,4.1575,9683.5946),new s(1317,5.1867,26.2983),new s(1201,6.1536,30639.8566),new s(769,.816,9437.763),new s(761,1.95,529.691),new s(708,1.065,775.523),new s(585,3.998,191.448),new s(500,4.123,15720.839),new s(429,3.586,19367.189),new s(327,5.677,5507.553),new s(326,4.591,10404.734),new s(232,3.163,9153.904),new s(180,4.653,1109.379),new s(155,5.57,19651.048),new s(128,4.226,20.775),new s(128,.962,5661.332),new s(106,1.537,801.821)],b.g_L1VenusCoefficients=[new s(0xedcd611dcd,0,0),new s(95708,2.46424,10213.28555),new s(14445,.51625,20426.57109),new s(213,1.795,30639.857),new s(174,2.655,26.298),new s(152,6.106,1577.344),new s(82,5.7,191.45),new s(70,2.68,9437.76),new s(52,3.6,775.52),new s(38,1.03,529.69),new s(30,1.25,5507.55),new s(25,6.11,10404.73)],b.g_L2VenusCoefficients=[new s(54127,0,0),new s(3891,.3451,10213.2855),new s(1338,2.0201,20426.5711),new s(24,2.05,26.3),new s(19,3.54,30639.86),new s(10,3.97,775.52),new s(7,1.52,1577.34),new s(6,1,191.45)],b.g_L3VenusCoefficients=[new s(136,4.804,10213.286),new s(78,3.67,20426.57),new s(26,0,0)],b.g_L4VenusCoefficients=[new s(114,3.1416,0),new s(3,5.21,20426.57),new s(2,2.51,10213.29)],b.g_L5VenusCoefficients=[new s(1,3.14,0)],b.g_B0VenusCoefficients=[new s(5923638,.2670278,10213.2855462),new s(40108,1.14737,20426.57109),new s(32815,3.14737,0),new s(1011,1.0895,30639.8566),new s(149,6.254,18073.705),new s(138,.86,1577.344),new s(130,3.672,9437.763),new s(120,3.705,2352.866),new s(108,4.539,22003.915)],b.g_B1VenusCoefficients=[new s(513348,1.803643,10213.285546),new s(4380,3.3862,20426.5711),new s(199,0,0),new s(197,2.53,30639.857)],b.g_B2VenusCoefficients=[new s(22378,3.38509,10213.28555),new s(282,0,0),new s(173,5.256,20426.571),new s(27,3.87,30639.86)],b.g_B3VenusCoefficients=[new s(647,4.992,10213.286),new s(20,3.14,0),new s(6,.77,20426.57),new s(3,5.44,30639.86)],b.g_B4VenusCoefficients=[new s(14,.32,10213.29)],b.g_R0VenusCoefficients=[new s(72334821,0,0),new s(489824,4.021518,10213.285546),new s(1658,4.9021,20426.5711),new s(1632,2.8455,7860.4194),new s(1378,1.1285,11790.6291),new s(498,2.587,9683.595),new s(374,1.423,3930.21),new s(264,5.529,9437.763),new s(237,2.551,15720.839),new s(222,2.013,19367.189),new s(126,2.728,1577.344),new s(119,3.02,10404.734)],b.g_R1VenusCoefficients=[new s(34551,.89199,10213.28555),new s(234,1.772,20426.571),new s(234,3.142,0)],b.g_R2VenusCoefficients=[new s(1407,5.0637,10213.2855),new s(16,5.47,20426.57),new s(13,0,0)],b.g_R3VenusCoefficients=[new s(50,3.22,10213.29)],b.g_R4VenusCoefficients=[new s(1,.92,10213.29)],Ft._pI4_A=.785398155450821,Ft._pI4_B=794662735614793e-23,Ft._pI4_C=306161699786838e-31,Ft._m_1_PI=.318309886183791,Gr.ctab=[0,1,256,257,2,3,258,259,512,513,768,769,514,515,770,771,4,5,260,261,6,7,262,263,516,517,772,773,518,519,774,775,1024,1025,1280,1281,1026,1027,1282,1283,1536,1537,1792,1793,1538,1539,1794,1795,1028,1029,1284,1285,1030,1031,1286,1287,1540,1541,1796,1797,1542,1543,1798,1799,8,9,264,265,10,11,266,267,520,521,776,777,522,523,778,779,12,13,268,269,14,15,270,271,524,525,780,781,526,527,782,783,1032,1033,1288,1289,1034,1035,1290,1291,1544,1545,1800,1801,1546,1547,1802,1803,1036,1037,1292,1293,1038,1039,1294,1295,1548,1549,1804,1805,1550,1551,1806,1807,2048,2049,2304,2305,2050,2051,2306,2307,2560,2561,2816,2817,2562,2563,2818,2819,2052,2053,2308,2309,2054,2055,2310,2311,2564,2565,2820,2821,2566,2567,2822,2823,3072,3073,3328,3329,3074,3075,3330,3331,3584,3585,3840,3841,3586,3587,3842,3843,3076,3077,3332,3333,3078,3079,3334,3335,3588,3589,3844,3845,3590,3591,3846,3847,2056,2057,2312,2313,2058,2059,2314,2315,2568,2569,2824,2825,2570,2571,2826,2827,2060,2061,2316,2317,2062,2063,2318,2319,2572,2573,2828,2829,2574,2575,2830,2831,3080,3081,3336,3337,3082,3083,3338,3339,3592,3593,3848,3849,3594,3595,3850,3851,3084,3085,3340,3341,3086,3087,3342,3343,3596,3597,3852,3853,3598,3599,3854,3855],Gr.utab=[0,1,4,5,16,17,20,21,64,65,68,69,80,81,84,85,256,257,260,261,272,273,276,277,320,321,324,325,336,337,340,341,1024,1025,1028,1029,1040,1041,1044,1045,1088,1089,1092,1093,1104,1105,1108,1109,1280,1281,1284,1285,1296,1297,1300,1301,1344,1345,1348,1349,1360,1361,1364,1365,4096,4097,4100,4101,4112,4113,4116,4117,4160,4161,4164,4165,4176,4177,4180,4181,4352,4353,4356,4357,4368,4369,4372,4373,4416,4417,4420,4421,4432,4433,4436,4437,5120,5121,5124,5125,5136,5137,5140,5141,5184,5185,5188,5189,5200,5201,5204,5205,5376,5377,5380,5381,5392,5393,5396,5397,5440,5441,5444,5445,5456,5457,5460,5461,16384,16385,16388,16389,16400,16401,16404,16405,16448,16449,16452,16453,16464,16465,16468,16469,16640,16641,16644,16645,16656,16657,16660,16661,16704,16705,16708,16709,16720,16721,16724,16725,17408,17409,17412,17413,17424,17425,17428,17429,17472,17473,17476,17477,17488,17489,17492,17493,17664,17665,17668,17669,17680,17681,17684,17685,17728,17729,17732,17733,17744,17745,17748,17749,20480,20481,20484,20485,20496,20497,20500,20501,20544,20545,20548,20549,20560,20561,20564,20565,20736,20737,20740,20741,20752,20753,20756,20757,20800,20801,20804,20805,20816,20817,20820,20821,21504,21505,21508,21509,21520,21521,21524,21525,21568,21569,21572,21573,21584,21585,21588,21589,21760,21761,21764,21765,21776,21777,21780,21781,21824,21825,21828,21829,21840,21841,21844,21845],Gr.jrll=[2,2,2,2,3,3,3,3,4,4,4,4],Gr.jpll=[1,3,5,7,0,2,4,6,1,3,5,7],Gr.xoffset=[-1,-1,0,1,1,1,0,-1],Gr.yoffset=[0,1,1,1,0,-1,-1,-1],Nt.singleton=new Nt,vt.pointList=null,vt.lineList=null,vt.triangleFanPointList=null,vt.triangleList=null,vt.batchDirty=!0,dt._galDetails=new Ma,dt._jupDetails=new Ca,dt._jupPhisical=new Ts,dt._jDateLast=0,Ge.RC=.017453292519943,Ge._maxSeperation=.745,Ge.containment=null,Ge._constToDraw="",Ge.selectedSegment=null,Ge._artFile=null,Ge.artwork=null,Ge.boundries=null,Ge.pictureBlendStates={},Lt.families={},I.zero=new I,Z._s_identity=Z._createIdentity(),$t._downloading=!1,$t._imagesLoaded=!1,$t._imageLoadCount=0,qr.starTexture=null,si.vertLoc=0,si.initialized=!1,si._prog=null,wi.vertLoc=0,wi.initialized=!1,wi._prog=null,Xt.vertLoc=0,Xt.colorLoc=0,Xt.initialized=!1,Xt._prog=null,kt.vertLoc=0,kt.colorLoc=0,kt.timeLoc=0,kt.initialized=!1,kt._prog=null,it.vertLoc=0,it.colorLoc=0,it.pointSizeLoc=0,it.timeLoc=0,it.initialized=!1,it._prog=null,He.abcLoc=0,He.abcLoc1=0,He.pointSizeLoc=0,He.colorLoc=0,He.weLoc=0,He.nTLoc=0,He.azLoc=0,He.orbitLoc=0,He.initialized=!1,He._prog=null,At.angleLoc=0,At.initialized=!1,At._prog=null,at.vertLoc=0,at.normalLoc=0,at.textureLoc=0,at.initialized=!1,at._prog=null,at.sunPosition=I.create(-1,-1,-1),at.minLightingBrightness=1,at.atmosphereColor=G.fromArgb(0,0,0,0),ft.vertLoc=0,ft.normalLoc=0,ft.textureLoc=0,ft.initialized=!1,ft._prog=null,ft.sunPosition=I.create(-1,-1,-1),ft.minLightingBrightness=1,ft.atmosphereColor=G.fromArgb(0,0,0,0),tt.vertLoc=0,tt.textureLoc=0,tt.initialized=!1,tt._prog=null,tt.sunPosition=I.create(-1,-1,-1),tt.minLightingBrightness=1,tt.atmosphereColor=G.fromArgb(0,0,0,0),Ne.vertLoc=0,Ne.textureLoc=0,Ne.initialized=!1,Ne._prog=null,Ne.blankValue=0,Ne.bScale=1,Ne.bZero=0,Ne.min=0,Ne.max=0,Ne.transparentBlack=!1,Ne.containsBlanks=!1,Ne.scaleType=0,Vt.vertLoc=0,Vt.textureLoc=0,Vt.initialized=!1,Vt._prog=null,Ot.vertLoc=0,Ot.textureLoc=0,Ot.initialized=!1,Ot._prog=null,Bt.vertLoc=0,Bt.textureLoc=0,Bt.colorLoc=0,Bt.initialized=!1,Bt._prog=null,Yt.vertLoc=0,Yt.textureLoc=0,Yt.colorLoc=0,Yt.initialized=!1,Yt._prog=null,jt.vertLoc=0,jt.textureLoc=0,jt.initialized=!1,jt._prog=null,di.empty=null,X._galaxyImageIndexBuffer=null,X._galaxyImageTriangleCount=0,X._milkyWayImage=null,X._starSprites=null,X._starCount=0,X._starsDownloading=!1,X._stars=null,X._hipparcosIndex={},X._limitingMagnitude=16,X._galaxyTextures=null,X._galaxyVertexCounts=null,X._largeSet=!0,X._cosmosReady=!1,X._cosmos=null,X._downloadingGalaxy=!1,X._eclipticCount=0,X._eclipticYear=0,X._monthDays=[31,28.2421,31,30,31,30,31,31,30,31,30,31],X._monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],X._eclipticTextYear=0,lr._sine=0,lr._cose=1,lr._degrad=Math.PI/180,lr.baseDate=i.truncate(K.utcToJulian(i.now())),bt.colorTextures={},bt.viridis=bt.fromStringList(["#440154","#440256","#450457","#450559","#46075a","#46085c","#460a5d","#460b5e","#470d60","#470e61","#471063","#471164","#471365","#481467","#481668","#481769","#48186a","#481a6c","#481b6d","#481c6e","#481d6f","#481f70","#482071","#482173","#482374","#482475","#482576","#482677","#482878","#482979","#472a7a","#472c7a","#472d7b","#472e7c","#472f7d","#46307e","#46327e","#46337f","#463480","#453581","#453781","#453882","#443983","#443a83","#443b84","#433d84","#433e85","#423f85","#424086","#424186","#414287","#414487","#404588","#404688","#3f4788","#3f4889","#3e4989","#3e4a89","#3e4c8a","#3d4d8a","#3d4e8a","#3c4f8a","#3c508b","#3b518b","#3b528b","#3a538b","#3a548c","#39558c","#39568c","#38588c","#38598c","#375a8c","#375b8d","#365c8d","#365d8d","#355e8d","#355f8d","#34608d","#34618d","#33628d","#33638d","#32648e","#32658e","#31668e","#31678e","#31688e","#30698e","#306a8e","#2f6b8e","#2f6c8e","#2e6d8e","#2e6e8e","#2e6f8e","#2d708e","#2d718e","#2c718e","#2c728e","#2c738e","#2b748e","#2b758e","#2a768e","#2a778e","#2a788e","#29798e","#297a8e","#297b8e","#287c8e","#287d8e","#277e8e","#277f8e","#27808e","#26818e","#26828e","#26828e","#25838e","#25848e","#25858e","#24868e","#24878e","#23888e","#23898e","#238a8d","#228b8d","#228c8d","#228d8d","#218e8d","#218f8d","#21908d","#21918c","#20928c","#20928c","#20938c","#1f948c","#1f958b","#1f968b","#1f978b","#1f988b","#1f998a","#1f9a8a","#1e9b8a","#1e9c89","#1e9d89","#1f9e89","#1f9f88","#1fa088","#1fa188","#1fa187","#1fa287","#20a386","#20a486","#21a585","#21a685","#22a785","#22a884","#23a983","#24aa83","#25ab82","#25ac82","#26ad81","#27ad81","#28ae80","#29af7f","#2ab07f","#2cb17e","#2db27d","#2eb37c","#2fb47c","#31b57b","#32b67a","#34b679","#35b779","#37b878","#38b977","#3aba76","#3bbb75","#3dbc74","#3fbc73","#40bd72","#42be71","#44bf70","#46c06f","#48c16e","#4ac16d","#4cc26c","#4ec36b","#50c46a","#52c569","#54c568","#56c667","#58c765","#5ac864","#5cc863","#5ec962","#60ca60","#63cb5f","#65cb5e","#67cc5c","#69cd5b","#6ccd5a","#6ece58","#70cf57","#73d056","#75d054","#77d153","#7ad151","#7cd250","#7fd34e","#81d34d","#84d44b","#86d549","#89d548","#8bd646","#8ed645","#90d743","#93d741","#95d840","#98d83e","#9bd93c","#9dd93b","#a0da39","#a2da37","#a5db36","#a8db34","#aadc32","#addc30","#b0dd2f","#b2dd2d","#b5de2b","#b8de29","#bade28","#bddf26","#c0df25","#c2df23","#c5e021","#c8e020","#cae11f","#cde11d","#d0e11c","#d2e21b","#d5e21a","#d8e219","#dae319","#dde318","#dfe318","#e2e418","#e5e419","#e7e419","#eae51a","#ece51b","#efe51c","#f1e51d","#f4e61e","#f6e620","#f8e621","#fbe723","#fde725"]),bt.plasma=bt.fromStringList(["#0d0887","#100788","#130789","#16078a","#19068c","#1b068d","#1d068e","#20068f","#220690","#240691","#260591","#280592","#2a0593","#2c0594","#2e0595","#2f0596","#310597","#330597","#350498","#370499","#38049a","#3a049a","#3c049b","#3e049c","#3f049c","#41049d","#43039e","#44039e","#46039f","#48039f","#4903a0","#4b03a1","#4c02a1","#4e02a2","#5002a2","#5102a3","#5302a3","#5502a4","#5601a4","#5801a4","#5901a5","#5b01a5","#5c01a6","#5e01a6","#6001a6","#6100a7","#6300a7","#6400a7","#6600a7","#6700a8","#6900a8","#6a00a8","#6c00a8","#6e00a8","#6f00a8","#7100a8","#7201a8","#7401a8","#7501a8","#7701a8","#7801a8","#7a02a8","#7b02a8","#7d03a8","#7e03a8","#8004a8","#8104a7","#8305a7","#8405a7","#8606a6","#8707a6","#8808a6","#8a09a5","#8b0aa5","#8d0ba5","#8e0ca4","#8f0da4","#910ea3","#920fa3","#9410a2","#9511a1","#9613a1","#9814a0","#99159f","#9a169f","#9c179e","#9d189d","#9e199d","#a01a9c","#a11b9b","#a21d9a","#a31e9a","#a51f99","#a62098","#a72197","#a82296","#aa2395","#ab2494","#ac2694","#ad2793","#ae2892","#b02991","#b12a90","#b22b8f","#b32c8e","#b42e8d","#b52f8c","#b6308b","#b7318a","#b83289","#ba3388","#bb3488","#bc3587","#bd3786","#be3885","#bf3984","#c03a83","#c13b82","#c23c81","#c33d80","#c43e7f","#c5407e","#c6417d","#c7427c","#c8437b","#c9447a","#ca457a","#cb4679","#cc4778","#cc4977","#cd4a76","#ce4b75","#cf4c74","#d04d73","#d14e72","#d24f71","#d35171","#d45270","#d5536f","#d5546e","#d6556d","#d7566c","#d8576b","#d9586a","#da5a6a","#da5b69","#db5c68","#dc5d67","#dd5e66","#de5f65","#de6164","#df6263","#e06363","#e16462","#e26561","#e26660","#e3685f","#e4695e","#e56a5d","#e56b5d","#e66c5c","#e76e5b","#e76f5a","#e87059","#e97158","#e97257","#ea7457","#eb7556","#eb7655","#ec7754","#ed7953","#ed7a52","#ee7b51","#ef7c51","#ef7e50","#f07f4f","#f0804e","#f1814d","#f1834c","#f2844b","#f3854b","#f3874a","#f48849","#f48948","#f58b47","#f58c46","#f68d45","#f68f44","#f79044","#f79143","#f79342","#f89441","#f89540","#f9973f","#f9983e","#f99a3e","#fa9b3d","#fa9c3c","#fa9e3b","#fb9f3a","#fba139","#fba238","#fca338","#fca537","#fca636","#fca835","#fca934","#fdab33","#fdac33","#fdae32","#fdaf31","#fdb130","#fdb22f","#fdb42f","#fdb52e","#feb72d","#feb82c","#feba2c","#febb2b","#febd2a","#febe2a","#fec029","#fdc229","#fdc328","#fdc527","#fdc627","#fdc827","#fdca26","#fdcb26","#fccd25","#fcce25","#fcd025","#fcd225","#fbd324","#fbd524","#fbd724","#fad824","#fada24","#f9dc24","#f9dd25","#f8df25","#f8e125","#f7e225","#f7e425","#f6e626","#f6e826","#f5e926","#f5eb27","#f4ed27","#f3ee27","#f3f027","#f2f227","#f1f426","#f1f525","#f0f724","#f0f921"]),bt.inferno=bt.fromStringList(["#000004","#010005","#010106","#010108","#02010a","#02020c","#02020e","#030210","#040312","#040314","#050417","#060419","#07051b","#08051d","#09061f","#0a0722","#0b0724","#0c0826","#0d0829","#0e092b","#10092d","#110a30","#120a32","#140b34","#150b37","#160b39","#180c3c","#190c3e","#1b0c41","#1c0c43","#1e0c45","#1f0c48","#210c4a","#230c4c","#240c4f","#260c51","#280b53","#290b55","#2b0b57","#2d0b59","#2f0a5b","#310a5c","#320a5e","#340a5f","#360961","#380962","#390963","#3b0964","#3d0965","#3e0966","#400a67","#420a68","#440a68","#450a69","#470b6a","#490b6a","#4a0c6b","#4c0c6b","#4d0d6c","#4f0d6c","#510e6c","#520e6d","#540f6d","#550f6d","#57106e","#59106e","#5a116e","#5c126e","#5d126e","#5f136e","#61136e","#62146e","#64156e","#65156e","#67166e","#69166e","#6a176e","#6c186e","#6d186e","#6f196e","#71196e","#721a6e","#741a6e","#751b6e","#771c6d","#781c6d","#7a1d6d","#7c1d6d","#7d1e6d","#7f1e6c","#801f6c","#82206c","#84206b","#85216b","#87216b","#88226a","#8a226a","#8c2369","#8d2369","#8f2469","#902568","#922568","#932667","#952667","#972766","#982766","#9a2865","#9b2964","#9d2964","#9f2a63","#a02a63","#a22b62","#a32c61","#a52c60","#a62d60","#a82e5f","#a92e5e","#ab2f5e","#ad305d","#ae305c","#b0315b","#b1325a","#b3325a","#b43359","#b63458","#b73557","#b93556","#ba3655","#bc3754","#bd3853","#bf3952","#c03a51","#c13a50","#c33b4f","#c43c4e","#c63d4d","#c73e4c","#c83f4b","#ca404a","#cb4149","#cc4248","#ce4347","#cf4446","#d04545","#d24644","#d34743","#d44842","#d54a41","#d74b3f","#d84c3e","#d94d3d","#da4e3c","#db503b","#dd513a","#de5238","#df5337","#e05536","#e15635","#e25734","#e35933","#e45a31","#e55c30","#e65d2f","#e75e2e","#e8602d","#e9612b","#ea632a","#eb6429","#eb6628","#ec6726","#ed6925","#ee6a24","#ef6c23","#ef6e21","#f06f20","#f1711f","#f1731d","#f2741c","#f3761b","#f37819","#f47918","#f57b17","#f57d15","#f67e14","#f68013","#f78212","#f78410","#f8850f","#f8870e","#f8890c","#f98b0b","#f98c0a","#f98e09","#fa9008","#fa9207","#fa9407","#fb9606","#fb9706","#fb9906","#fb9b06","#fb9d07","#fc9f07","#fca108","#fca309","#fca50a","#fca60c","#fca80d","#fcaa0f","#fcac11","#fcae12","#fcb014","#fcb216","#fcb418","#fbb61a","#fbb81d","#fbba1f","#fbbc21","#fbbe23","#fac026","#fac228","#fac42a","#fac62d","#f9c72f","#f9c932","#f9cb35","#f8cd37","#f8cf3a","#f7d13d","#f7d340","#f6d543","#f6d746","#f5d949","#f5db4c","#f4dd4f","#f4df53","#f4e156","#f3e35a","#f3e55d","#f2e661","#f2e865","#f2ea69","#f1ec6d","#f1ed71","#f1ef75","#f1f179","#f2f27d","#f2f482","#f3f586","#f3f68a","#f4f88e","#f5f992","#f6fa96","#f8fb9a","#f9fc9d","#fafda1","#fcffa4"]),bt.magma=bt.fromStringList(["#000004","#010005","#010106","#010108","#020109","#02020b","#02020d","#03030f","#030312","#040414","#050416","#060518","#06051a","#07061c","#08071e","#090720","#0a0822","#0b0924","#0c0926","#0d0a29","#0e0b2b","#100b2d","#110c2f","#120d31","#130d34","#140e36","#150e38","#160f3b","#180f3d","#19103f","#1a1042","#1c1044","#1d1147","#1e1149","#20114b","#21114e","#221150","#241253","#251255","#271258","#29115a","#2a115c","#2c115f","#2d1161","#2f1163","#311165","#331067","#341069","#36106b","#38106c","#390f6e","#3b0f70","#3d0f71","#3f0f72","#400f74","#420f75","#440f76","#451077","#471078","#491078","#4a1079","#4c117a","#4e117b","#4f127b","#51127c","#52137c","#54137d","#56147d","#57157e","#59157e","#5a167e","#5c167f","#5d177f","#5f187f","#601880","#621980","#641a80","#651a80","#671b80","#681c81","#6a1c81","#6b1d81","#6d1d81","#6e1e81","#701f81","#721f81","#732081","#752181","#762181","#782281","#792282","#7b2382","#7c2382","#7e2482","#802582","#812581","#832681","#842681","#862781","#882781","#892881","#8b2981","#8c2981","#8e2a81","#902a81","#912b81","#932b80","#942c80","#962c80","#982d80","#992d80","#9b2e7f","#9c2e7f","#9e2f7f","#a02f7f","#a1307e","#a3307e","#a5317e","#a6317d","#a8327d","#aa337d","#ab337c","#ad347c","#ae347b","#b0357b","#b2357b","#b3367a","#b5367a","#b73779","#b83779","#ba3878","#bc3978","#bd3977","#bf3a77","#c03a76","#c23b75","#c43c75","#c53c74","#c73d73","#c83e73","#ca3e72","#cc3f71","#cd4071","#cf4070","#d0416f","#d2426f","#d3436e","#d5446d","#d6456c","#d8456c","#d9466b","#db476a","#dc4869","#de4968","#df4a68","#e04c67","#e24d66","#e34e65","#e44f64","#e55064","#e75263","#e85362","#e95462","#ea5661","#eb5760","#ec5860","#ed5a5f","#ee5b5e","#ef5d5e","#f05f5e","#f1605d","#f2625d","#f2645c","#f3655c","#f4675c","#f4695c","#f56b5c","#f66c5c","#f66e5c","#f7705c","#f7725c","#f8745c","#f8765c","#f9785d","#f9795d","#f97b5d","#fa7d5e","#fa7f5e","#fa815f","#fb835f","#fb8560","#fb8761","#fc8961","#fc8a62","#fc8c63","#fc8e64","#fc9065","#fd9266","#fd9467","#fd9668","#fd9869","#fd9a6a","#fd9b6b","#fe9d6c","#fe9f6d","#fea16e","#fea36f","#fea571","#fea772","#fea973","#feaa74","#feac76","#feae77","#feb078","#feb27a","#feb47b","#feb67c","#feb77e","#feb97f","#febb81","#febd82","#febf84","#fec185","#fec287","#fec488","#fec68a","#fec88c","#feca8d","#fecc8f","#fecd90","#fecf92","#fed194","#fed395","#fed597","#fed799","#fed89a","#fdda9c","#fddc9e","#fddea0","#fde0a1","#fde2a3","#fde3a5","#fde5a7","#fde7a9","#fde9aa","#fdebac","#fcecae","#fceeb0","#fcf0b2","#fcf2b4","#fcf4b6","#fcf6b8","#fcf7b9","#fcf9bb","#fcfbbd","#fcfdbf"]),bt.cividis=bt.fromStringList(["#00224e","#00234f","#002451","#002553","#002554","#002656","#002758","#002859","#00285b","#00295d","#002a5f","#002a61","#002b62","#002c64","#002c66","#002d68","#002e6a","#002e6c","#002f6d","#00306f","#003070","#003170","#003171","#013271","#053371","#083370","#0c3470","#0f3570","#123570","#143670","#163770","#18376f","#1a386f","#1c396f","#1e3a6f","#203a6f","#213b6e","#233c6e","#243c6e","#263d6e","#273e6e","#293f6e","#2a3f6d","#2b406d","#2d416d","#2e416d","#2f426d","#31436d","#32436d","#33446d","#34456c","#35456c","#36466c","#38476c","#39486c","#3a486c","#3b496c","#3c4a6c","#3d4a6c","#3e4b6c","#3f4c6c","#404c6c","#414d6c","#424e6c","#434e6c","#444f6c","#45506c","#46516c","#47516c","#48526c","#49536c","#4a536c","#4b546c","#4c556c","#4d556c","#4e566c","#4f576c","#50576c","#51586d","#52596d","#535a6d","#545a6d","#555b6d","#555c6d","#565c6d","#575d6d","#585e6d","#595e6e","#5a5f6e","#5b606e","#5c616e","#5d616e","#5e626e","#5e636f","#5f636f","#60646f","#61656f","#62656f","#636670","#646770","#656870","#656870","#666970","#676a71","#686a71","#696b71","#6a6c71","#6b6d72","#6c6d72","#6c6e72","#6d6f72","#6e6f73","#6f7073","#707173","#717274","#727274","#727374","#737475","#747475","#757575","#767676","#777776","#777777","#787877","#797977","#7a7a78","#7b7a78","#7c7b78","#7d7c78","#7e7c78","#7e7d78","#7f7e78","#807f78","#817f78","#828079","#838179","#848279","#858279","#868379","#878478","#888578","#898578","#8a8678","#8b8778","#8c8878","#8d8878","#8e8978","#8f8a78","#908b78","#918b78","#928c78","#928d78","#938e78","#948e77","#958f77","#969077","#979177","#989277","#999277","#9a9376","#9b9476","#9c9576","#9d9576","#9e9676","#9f9775","#a09875","#a19975","#a29975","#a39a74","#a49b74","#a59c74","#a69c74","#a79d73","#a89e73","#a99f73","#aaa073","#aba072","#aca172","#ada272","#aea371","#afa471","#b0a571","#b1a570","#b3a670","#b4a76f","#b5a86f","#b6a96f","#b7a96e","#b8aa6e","#b9ab6d","#baac6d","#bbad6d","#bcae6c","#bdae6c","#beaf6b","#bfb06b","#c0b16a","#c1b26a","#c2b369","#c3b369","#c4b468","#c5b568","#c6b667","#c7b767","#c8b866","#c9b965","#cbb965","#ccba64","#cdbb63","#cebc63","#cfbd62","#d0be62","#d1bf61","#d2c060","#d3c05f","#d4c15f","#d5c25e","#d6c35d","#d7c45c","#d9c55c","#dac65b","#dbc75a","#dcc859","#ddc858","#dec958","#dfca57","#e0cb56","#e1cc55","#e2cd54","#e4ce53","#e5cf52","#e6d051","#e7d150","#e8d24f","#e9d34e","#ead34c","#ebd44b","#edd54a","#eed649","#efd748","#f0d846","#f1d945","#f2da44","#f3db42","#f5dc41","#f6dd3f","#f7de3e","#f8df3c","#f9e03a","#fbe138","#fce236","#fde334","#fee434","#fee535","#fee636","#fee838"]),bt.greys=bt.fromStringList(["#ffffff","#ffffff","#fefefe","#fefefe","#fdfdfd","#fdfdfd","#fcfcfc","#fcfcfc","#fbfbfb","#fbfbfb","#fafafa","#fafafa","#f9f9f9","#f9f9f9","#f8f8f8","#f8f8f8","#f7f7f7","#f7f7f7","#f7f7f7","#f6f6f6","#f6f6f6","#f5f5f5","#f5f5f5","#f4f4f4","#f4f4f4","#f3f3f3","#f3f3f3","#f2f2f2","#f2f2f2","#f1f1f1","#f1f1f1","#f0f0f0","#f0f0f0","#efefef","#eeeeee","#eeeeee","#ededed","#ececec","#ececec","#ebebeb","#eaeaea","#e9e9e9","#e9e9e9","#e8e8e8","#e7e7e7","#e7e7e7","#e6e6e6","#e5e5e5","#e4e4e4","#e4e4e4","#e3e3e3","#e2e2e2","#e1e1e1","#e1e1e1","#e0e0e0","#dfdfdf","#dfdfdf","#dedede","#dddddd","#dcdcdc","#dcdcdc","#dbdbdb","#dadada","#dadada","#d9d9d9","#d8d8d8","#d7d7d7","#d6d6d6","#d5d5d5","#d4d4d4","#d4d4d4","#d3d3d3","#d2d2d2","#d1d1d1","#d0d0d0","#cfcfcf","#cecece","#cdcdcd","#cccccc","#cccccc","#cbcbcb","#cacaca","#c9c9c9","#c8c8c8","#c7c7c7","#c6c6c6","#c5c5c5","#c5c5c5","#c4c4c4","#c3c3c3","#c2c2c2","#c1c1c1","#c0c0c0","#bfbfbf","#bebebe","#bebebe","#bdbdbd","#bbbbbb","#bababa","#b9b9b9","#b8b8b8","#b6b6b6","#b5b5b5","#b4b4b4","#b3b3b3","#b2b2b2","#b0b0b0","#afafaf","#aeaeae","#adadad","#ababab","#aaaaaa","#a9a9a9","#a8a8a8","#a7a7a7","#a5a5a5","#a4a4a4","#a3a3a3","#a2a2a2","#a0a0a0","#9f9f9f","#9e9e9e","#9d9d9d","#9c9c9c","#9a9a9a","#999999","#989898","#979797","#959595","#949494","#939393","#929292","#919191","#909090","#8f8f8f","#8e8e8e","#8d8d8d","#8c8c8c","#8a8a8a","#898989","#888888","#878787","#868686","#858585","#848484","#838383","#828282","#818181","#7f7f7f","#7e7e7e","#7d7d7d","#7c7c7c","#7b7b7b","#7a7a7a","#797979","#787878","#777777","#767676","#757575","#737373","#727272","#717171","#707070","#6f6f6f","#6e6e6e","#6d6d6d","#6c6c6c","#6b6b6b","#6a6a6a","#696969","#686868","#676767","#666666","#656565","#646464","#636363","#626262","#616161","#606060","#5f5f5f","#5e5e5e","#5d5d5d","#5c5c5c","#5b5b5b","#5a5a5a","#585858","#575757","#565656","#555555","#545454","#535353","#525252","#515151","#505050","#4e4e4e","#4d4d4d","#4b4b4b","#4a4a4a","#484848","#474747","#464646","#444444","#434343","#414141","#404040","#3f3f3f","#3d3d3d","#3c3c3c","#3a3a3a","#393939","#383838","#363636","#353535","#333333","#323232","#303030","#2f2f2f","#2e2e2e","#2c2c2c","#2b2b2b","#292929","#282828","#272727","#252525","#242424","#232323","#222222","#212121","#1f1f1f","#1e1e1e","#1d1d1d","#1c1c1c","#1b1b1b","#1a1a1a","#181818","#171717","#161616","#151515","#141414","#131313","#111111","#101010","#0f0f0f","#0e0e0e","#0d0d0d","#0c0c0c","#0a0a0a","#090909","#080808","#070707","#060606","#050505","#030303","#020202","#010101","#000000"]),bt.gray=bt.fromStringList(["#000000","#010101","#020202","#030303","#040404","#050505","#060606","#070707","#080808","#090909","#0a0a0a","#0b0b0b","#0c0c0c","#0d0d0d","#0e0e0e","#0f0f0f","#101010","#111111","#121212","#131313","#141414","#151515","#161616","#171717","#181818","#191919","#1a1a1a","#1b1b1b","#1c1c1c","#1d1d1d","#1e1e1e","#1f1f1f","#202020","#212121","#222222","#232323","#242424","#252525","#262626","#272727","#282828","#292929","#2a2a2a","#2b2b2b","#2c2c2c","#2d2d2d","#2e2e2e","#2f2f2f","#303030","#313131","#323232","#333333","#343434","#353535","#363636","#373737","#383838","#393939","#3a3a3a","#3b3b3b","#3c3c3c","#3d3d3d","#3e3e3e","#3f3f3f","#404040","#414141","#424242","#434343","#444444","#454545","#464646","#474747","#484848","#494949","#4a4a4a","#4b4b4b","#4c4c4c","#4d4d4d","#4e4e4e","#4f4f4f","#505050","#515151","#525252","#535353","#545454","#555555","#565656","#575757","#585858","#595959","#5a5a5a","#5b5b5b","#5c5c5c","#5d5d5d","#5e5e5e","#5f5f5f","#606060","#616161","#626262","#636363","#646464","#656565","#666666","#676767","#686868","#696969","#6a6a6a","#6b6b6b","#6c6c6c","#6d6d6d","#6e6e6e","#6f6f6f","#707070","#717171","#727272","#737373","#747474","#757575","#767676","#777777","#787878","#797979","#7a7a7a","#7b7b7b","#7c7c7c","#7d7d7d","#7e7e7e","#7f7f7f","#808080","#818181","#828282","#838383","#848484","#858585","#868686","#878787","#888888","#898989","#8a8a8a","#8b8b8b","#8c8c8c","#8d8d8d","#8e8e8e","#8f8f8f","#909090","#919191","#929292","#939393","#949494","#959595","#969696","#979797","#989898","#999999","#9a9a9a","#9b9b9b","#9c9c9c","#9d9d9d","#9e9e9e","#9f9f9f","#a0a0a0","#a1a1a1","#a2a2a2","#a3a3a3","#a4a4a4","#a5a5a5","#a6a6a6","#a7a7a7","#a8a8a8","#a9a9a9","#aaaaaa","#ababab","#acacac","#adadad","#aeaeae","#afafaf","#b0b0b0","#b1b1b1","#b2b2b2","#b3b3b3","#b4b4b4","#b5b5b5","#b6b6b6","#b7b7b7","#b8b8b8","#b9b9b9","#bababa","#bbbbbb","#bcbcbc","#bdbdbd","#bebebe","#bfbfbf","#c0c0c0","#c1c1c1","#c2c2c2","#c3c3c3","#c4c4c4","#c5c5c5","#c6c6c6","#c7c7c7","#c8c8c8","#c9c9c9","#cacaca","#cbcbcb","#cccccc","#cdcdcd","#cecece","#cfcfcf","#d0d0d0","#d1d1d1","#d2d2d2","#d3d3d3","#d4d4d4","#d5d5d5","#d6d6d6","#d7d7d7","#d8d8d8","#d9d9d9","#dadada","#dbdbdb","#dcdcdc","#dddddd","#dedede","#dfdfdf","#e0e0e0","#e1e1e1","#e2e2e2","#e3e3e3","#e4e4e4","#e5e5e5","#e6e6e6","#e7e7e7","#e8e8e8","#e9e9e9","#eaeaea","#ebebeb","#ececec","#ededed","#eeeeee","#efefef","#f0f0f0","#f1f1f1","#f2f2f2","#f3f3f3","#f4f4f4","#f5f5f5","#f6f6f6","#f7f7f7","#f8f8f8","#f9f9f9","#fafafa","#fbfbfb","#fcfcfc","#fdfdfd","#fefefe","#ffffff"]),bt.purples=bt.fromStringList(["#fcfbfd","#fcfbfd","#fbfafc","#fbfafc","#faf9fc","#faf9fc","#faf8fb","#f9f8fb","#f9f7fb","#f8f7fb","#f8f7fa","#f8f6fa","#f7f6fa","#f7f5fa","#f6f5f9","#f6f4f9","#f5f4f9","#f5f4f9","#f5f3f8","#f4f3f8","#f4f2f8","#f3f2f8","#f3f1f7","#f3f1f7","#f2f0f7","#f2f0f7","#f1f0f6","#f1eff6","#f1eff6","#f0eef6","#f0eef5","#efedf5","#efedf5","#eeecf5","#eeecf4","#edebf4","#ecebf4","#eceaf3","#ebe9f3","#eae9f3","#eae8f2","#e9e8f2","#e8e7f2","#e8e6f2","#e7e6f1","#e6e5f1","#e6e5f1","#e5e4f0","#e4e3f0","#e4e3f0","#e3e2ef","#e2e2ef","#e2e1ef","#e1e0ee","#e0e0ee","#e0dfee","#dfdfed","#dedeed","#dedded","#ddddec","#dcdcec","#dcdcec","#dbdbec","#dadaeb","#dadaeb","#d9d9ea","#d8d8ea","#d7d7e9","#d6d6e9","#d5d5e9","#d4d4e8","#d3d3e8","#d2d2e7","#d1d2e7","#d0d1e6","#cfd0e6","#cecfe5","#cecee5","#cdcde4","#cccce4","#cbcbe3","#cacae3","#c9c9e2","#c8c8e2","#c7c8e1","#c6c7e1","#c5c6e1","#c4c5e0","#c3c4e0","#c2c3df","#c1c2df","#c0c1de","#bfc0de","#bebfdd","#bebedd","#bdbedc","#bcbddc","#bbbbdb","#babadb","#b9b9da","#b8b8d9","#b7b7d9","#b6b6d8","#b5b5d7","#b4b4d7","#b3b3d6","#b2b2d5","#b1b1d5","#b0afd4","#afaed4","#aeadd3","#aeacd2","#adabd2","#acaad1","#aba9d0","#aaa8d0","#a9a7cf","#a8a6cf","#a7a4ce","#a6a3cd","#a5a2cd","#a4a1cc","#a3a0cb","#a29fcb","#a19eca","#a09dca","#9f9cc9","#9e9bc8","#9e9ac8","#9d99c7","#9c98c7","#9b97c6","#9a96c6","#9995c6","#9894c5","#9793c5","#9692c4","#9591c4","#9490c3","#9390c3","#928fc3","#918ec2","#908dc2","#8f8cc1","#8e8bc1","#8e8ac0","#8d89c0","#8c88bf","#8b87bf","#8a86bf","#8986be","#8885be","#8784bd","#8683bd","#8582bc","#8481bc","#8380bb","#827fbb","#817ebb","#807dba","#807cba","#7f7bb9","#7e79b8","#7d78b7","#7d77b7","#7c75b6","#7b74b5","#7b72b4","#7a71b4","#7970b3","#796eb2","#786db2","#776cb1","#776ab0","#7669af","#7567af","#7566ae","#7465ad","#7363ad","#7262ac","#7261ab","#715faa","#705eaa","#705ca9","#6f5ba8","#6e5aa8","#6e58a7","#6d57a6","#6c55a5","#6c54a5","#6b53a4","#6a51a3","#6950a3","#694fa2","#684da1","#674ca1","#674ba0","#66499f","#65489f","#65479e","#64459e","#63449d","#63439c","#62429c","#61409b","#613f9a","#603e9a","#5f3c99","#5e3b98","#5e3a98","#5d3897","#5c3797","#5c3696","#5b3495","#5a3395","#5a3294","#593093","#582f93","#582e92","#572c92","#562b91","#552a90","#552890","#54278f","#53268f","#53258e","#52238d","#51228d","#51218c","#50208c","#4f1f8b","#4f1d8b","#4e1c8a","#4d1b89","#4d1a89","#4c1888","#4c1788","#4b1687","#4a1587","#4a1486","#491285","#481185","#481084","#470f84","#460d83","#460c83","#450b82","#440a82","#440981","#430780","#420680","#42057f","#41047f","#40027e","#40017e","#3f007d"]),bt.blues=bt.fromStringList(["#f7fbff","#f6faff","#f5fafe","#f5f9fe","#f4f9fe","#f3f8fe","#f2f8fd","#f2f7fd","#f1f7fd","#f0f6fd","#eff6fc","#eef5fc","#eef5fc","#edf4fc","#ecf4fb","#ebf3fb","#eaf3fb","#eaf2fb","#e9f2fa","#e8f1fa","#e7f1fa","#e7f0fa","#e6f0f9","#e5eff9","#e4eff9","#e3eef9","#e3eef8","#e2edf8","#e1edf8","#e0ecf8","#dfecf7","#dfebf7","#deebf7","#ddeaf7","#dceaf6","#dce9f6","#dbe9f6","#dae8f6","#d9e8f5","#d9e7f5","#d8e7f5","#d7e6f5","#d6e6f4","#d6e5f4","#d5e5f4","#d4e4f4","#d3e4f3","#d3e3f3","#d2e3f3","#d1e2f3","#d0e2f2","#d0e1f2","#cfe1f2","#cee0f2","#cde0f1","#cddff1","#ccdff1","#cbdef1","#cadef0","#caddf0","#c9ddf0","#c8dcf0","#c7dcef","#c7dbef","#c6dbef","#c4daee","#c3daee","#c2d9ee","#c1d9ed","#bfd8ed","#bed8ec","#bdd7ec","#bcd7eb","#bad6eb","#b9d6ea","#b8d5ea","#b7d4ea","#b5d4e9","#b4d3e9","#b3d3e8","#b2d2e8","#b0d2e7","#afd1e7","#aed1e7","#add0e6","#abd0e6","#aacfe5","#a9cfe5","#a8cee4","#a6cee4","#a5cde3","#a4cce3","#a3cce3","#a1cbe2","#a0cbe2","#9fcae1","#9dcae1","#9cc9e1","#9ac8e0","#99c7e0","#97c6df","#95c5df","#94c4df","#92c4de","#91c3de","#8fc2de","#8dc1dd","#8cc0dd","#8abfdd","#89bedc","#87bddc","#85bcdc","#84bcdb","#82bbdb","#81badb","#7fb9da","#7db8da","#7cb7da","#7ab6d9","#79b5d9","#77b5d9","#75b4d8","#74b3d8","#72b2d8","#71b1d7","#6fb0d7","#6dafd7","#6caed6","#6aaed6","#69add5","#68acd5","#66abd4","#65aad4","#64a9d3","#63a8d3","#61a7d2","#60a7d2","#5fa6d1","#5da5d1","#5ca4d0","#5ba3d0","#5aa2cf","#58a1cf","#57a0ce","#56a0ce","#549fcd","#539ecd","#529dcc","#519ccc","#4f9bcb","#4e9acb","#4d99ca","#4b98ca","#4a98c9","#4997c9","#4896c8","#4695c8","#4594c7","#4493c7","#4292c6","#4191c6","#4090c5","#3f8fc5","#3e8ec4","#3d8dc4","#3c8cc3","#3b8bc2","#3a8ac2","#3989c1","#3888c1","#3787c0","#3686c0","#3585bf","#3484bf","#3383be","#3282be","#3181bd","#3080bd","#2f7fbc","#2e7ebc","#2d7dbb","#2c7cba","#2b7bba","#2a7ab9","#2979b9","#2777b8","#2676b8","#2575b7","#2474b7","#2373b6","#2272b6","#2171b5","#2070b4","#206fb4","#1f6eb3","#1e6db2","#1d6cb1","#1c6bb0","#1c6ab0","#1b69af","#1a68ae","#1967ad","#1966ad","#1865ac","#1764ab","#1663aa","#1562a9","#1561a9","#1460a8","#135fa7","#125ea6","#125da6","#115ca5","#105ba4","#0f5aa3","#0e59a2","#0e58a2","#0d57a1","#0c56a0","#0b559f","#0a549e","#0a539e","#09529d","#08519c","#08509b","#084f99","#084e98","#084d96","#084c95","#084b93","#084a91","#084990","#08488e","#08478d","#08468b","#08458a","#084488","#084387","#084285","#084184","#084082","#083e81","#083d7f","#083c7d","#083b7c","#083a7a","#083979","#083877","#083776","#083674","#083573","#083471","#083370","#08326e","#08316d","#08306b"]),bt.greens=bt.fromStringList(["#f7fcf5","#f6fcf4","#f6fcf4","#f5fbf3","#f5fbf2","#f4fbf2","#f4fbf1","#f3faf0","#f2faf0","#f2faef","#f1faee","#f1faee","#f0f9ed","#f0f9ec","#eff9ec","#eff9eb","#eef8ea","#edf8ea","#edf8e9","#ecf8e8","#ecf8e8","#ebf7e7","#ebf7e7","#eaf7e6","#e9f7e5","#e9f7e5","#e8f6e4","#e8f6e3","#e7f6e3","#e7f6e2","#e6f5e1","#e5f5e1","#e5f5e0","#e4f5df","#e3f4de","#e2f4dd","#e1f3dc","#e0f3db","#dff3da","#def2d9","#ddf2d8","#dcf2d7","#dbf1d6","#dbf1d5","#daf0d4","#d9f0d3","#d8f0d2","#d7efd1","#d6efd0","#d5efcf","#d4eece","#d3eecd","#d2edcc","#d1edcb","#d0edca","#cfecc9","#ceecc8","#cdecc7","#ccebc6","#cbebc5","#cbeac4","#caeac3","#c9eac2","#c8e9c1","#c7e9c0","#c6e8bf","#c4e8bd","#c3e7bc","#c2e7bb","#c1e6ba","#c0e6b9","#bee5b8","#bde5b6","#bce4b5","#bbe4b4","#bae3b3","#b8e3b2","#b7e2b1","#b6e2af","#b5e1ae","#b4e1ad","#b2e0ac","#b1e0ab","#b0dfaa","#afdfa8","#aedea7","#acdea6","#abdda5","#aadda4","#a9dca3","#a8dca2","#a7dba0","#a5db9f","#a4da9e","#a3da9d","#a2d99c","#a0d99b","#9fd899","#9ed798","#9cd797","#9bd696","#99d595","#98d594","#97d492","#95d391","#94d390","#92d28f","#91d28e","#90d18d","#8ed08b","#8dd08a","#8bcf89","#8ace88","#88ce87","#87cd86","#86cc85","#84cc83","#83cb82","#81ca81","#80ca80","#7fc97f","#7dc87e","#7cc87c","#7ac77b","#79c67a","#78c679","#76c578","#75c477","#73c476","#72c375","#70c274","#6ec173","#6dc072","#6bc072","#6abf71","#68be70","#66bd6f","#65bd6f","#63bc6e","#62bb6d","#60ba6c","#5eb96b","#5db96b","#5bb86a","#5ab769","#58b668","#56b567","#55b567","#53b466","#52b365","#50b264","#4eb264","#4db163","#4bb062","#4aaf61","#48ae60","#46ae60","#45ad5f","#43ac5e","#42ab5d","#40aa5d","#3fa95c","#3fa85b","#3ea75a","#3da65a","#3ca559","#3ba458","#3aa357","#39a257","#38a156","#37a055","#369f54","#359e53","#349d53","#339c52","#329b51","#319a50","#309950","#2f984f","#2f974e","#2e964d","#2d954d","#2c944c","#2b934b","#2a924a","#29914a","#289049","#278f48","#268e47","#258d47","#248c46","#238b45","#228a44","#218944","#208843","#1f8742","#1e8741","#1d8640","#1c8540","#1a843f","#19833e","#18823d","#17813d","#16803c","#157f3b","#147e3a","#137d39","#127c39","#117b38","#107a37","#0e7936","#0d7836","#0c7735","#0b7734","#0a7633","#097532","#087432","#077331","#067230","#05712f","#03702e","#026f2e","#016e2d","#006d2c","#006c2c","#006b2b","#00692a","#00682a","#006729","#006529","#006428","#006328","#006227","#006027","#005f26","#005e26","#005c25","#005b25","#005a24","#005924","#005723","#005622","#005522","#005321","#005221","#005120","#005020","#004e1f","#004d1f","#004c1e","#004a1e","#00491d","#00481d","#00471c","#00451c","#00441b"]),bt.oranges=bt.fromStringList(["#fff5eb","#fff5ea","#fff4e9","#fff4e8","#fff3e7","#fff3e6","#fff2e6","#fff2e5","#fff1e4","#fff1e3","#fff0e2","#fff0e1","#ffefe0","#ffefdf","#ffeede","#ffeedd","#feeddc","#feeddc","#feeddb","#feecda","#feecd9","#feebd8","#feebd7","#feead6","#feead5","#fee9d4","#fee9d3","#fee8d2","#fee8d2","#fee7d1","#fee7d0","#fee6cf","#fee6ce","#fee5cc","#fee5cb","#fee4ca","#fee3c8","#fee2c7","#fee2c6","#fee1c4","#fee0c3","#fee0c1","#fedfc0","#fedebf","#fedebd","#feddbc","#fedcbb","#fedcb9","#fddbb8","#fddab6","#fdd9b5","#fdd9b4","#fdd8b2","#fdd7b1","#fdd7af","#fdd6ae","#fdd5ad","#fdd5ab","#fdd4aa","#fdd3a9","#fdd3a7","#fdd2a6","#fdd1a4","#fdd1a3","#fdd0a2","#fdcfa0","#fdce9e","#fdcd9c","#fdcb9b","#fdca99","#fdc997","#fdc895","#fdc794","#fdc692","#fdc590","#fdc48f","#fdc38d","#fdc28b","#fdc189","#fdc088","#fdbf86","#fdbe84","#fdbd83","#fdbb81","#fdba7f","#fdb97d","#fdb87c","#fdb77a","#fdb678","#fdb576","#fdb475","#fdb373","#fdb271","#fdb170","#fdb06e","#fdaf6c","#fdae6a","#fdad69","#fdac67","#fdab66","#fda965","#fda863","#fda762","#fda660","#fda55f","#fda45d","#fda35c","#fda25a","#fda159","#fda057","#fd9f56","#fd9e54","#fd9d53","#fd9c51","#fd9b50","#fd9a4e","#fd994d","#fd984b","#fd974a","#fd9649","#fd9547","#fd9446","#fd9344","#fd9243","#fd9141","#fd9040","#fd8f3e","#fd8e3d","#fd8c3b","#fc8b3a","#fc8a39","#fc8937","#fb8836","#fb8735","#fb8634","#fa8532","#fa8331","#f98230","#f9812e","#f9802d","#f87f2c","#f87e2b","#f87d29","#f77b28","#f77a27","#f67925","#f67824","#f67723","#f57622","#f57520","#f5741f","#f4721e","#f4711c","#f3701b","#f36f1a","#f36e19","#f26d17","#f26c16","#f26b15","#f16913","#f16813","#f06712","#ef6612","#ee6511","#ee6410","#ed6310","#ec620f","#eb610f","#eb600e","#ea5f0e","#e95e0d","#e85d0c","#e75c0c","#e75b0b","#e65a0b","#e5590a","#e4580a","#e45709","#e35608","#e25508","#e15407","#e15307","#e05206","#df5106","#de5005","#de4e05","#dd4d04","#dc4c03","#db4b03","#db4a02","#da4902","#d94801","#d84801","#d64701","#d54601","#d34601","#d14501","#d04501","#ce4401","#cd4401","#cb4302","#c94202","#c84202","#c64102","#c54102","#c34002","#c14002","#c03f02","#be3f02","#bd3e02","#bb3d02","#b93d02","#b83c02","#b63c02","#b53b02","#b33b02","#b13a03","#b03903","#ae3903","#ad3803","#ab3803","#a93703","#a83703","#a63603","#a53603","#a43503","#a23503","#a13403","#a03403","#9f3303","#9e3303","#9c3203","#9b3203","#9a3103","#993103","#973003","#963003","#952f03","#942f03","#932f03","#912e04","#902e04","#8f2d04","#8e2d04","#8c2c04","#8b2c04","#8a2b04","#892b04","#882a04","#862a04","#852904","#842904","#832804","#812804","#802704","#7f2704"]),bt.reds=bt.fromStringList(["#fff5f0","#fff4ef","#fff4ee","#fff3ed","#fff2ec","#fff2eb","#fff1ea","#fff0e9","#fff0e8","#ffefe8","#ffeee7","#ffeee6","#ffede5","#ffece4","#ffece3","#ffebe2","#feeae1","#feeae0","#fee9df","#fee8de","#fee8dd","#fee7dc","#fee7db","#fee6da","#fee5d9","#fee5d8","#fee4d8","#fee3d7","#fee3d6","#fee2d5","#fee1d4","#fee1d3","#fee0d2","#fedfd0","#fedecf","#fedccd","#fedbcc","#fedaca","#fed9c9","#fed8c7","#fdd7c6","#fdd5c4","#fdd4c2","#fdd3c1","#fdd2bf","#fdd1be","#fdd0bc","#fdcebb","#fdcdb9","#fdccb8","#fdcbb6","#fdcab5","#fdc9b3","#fdc7b2","#fdc6b0","#fdc5ae","#fcc4ad","#fcc3ab","#fcc2aa","#fcc1a8","#fcbfa7","#fcbea5","#fcbda4","#fcbca2","#fcbba1","#fcb99f","#fcb89e","#fcb79c","#fcb69b","#fcb499","#fcb398","#fcb296","#fcb095","#fcaf93","#fcae92","#fcad90","#fcab8f","#fcaa8d","#fca98c","#fca78b","#fca689","#fca588","#fca486","#fca285","#fca183","#fca082","#fc9e80","#fc9d7f","#fc9c7d","#fc9b7c","#fc997a","#fc9879","#fc9777","#fc9576","#fc9474","#fc9373","#fc9272","#fc9070","#fc8f6f","#fc8e6e","#fc8d6d","#fc8b6b","#fc8a6a","#fc8969","#fc8767","#fc8666","#fc8565","#fc8464","#fc8262","#fc8161","#fc8060","#fc7f5f","#fb7d5d","#fb7c5c","#fb7b5b","#fb7a5a","#fb7858","#fb7757","#fb7656","#fb7555","#fb7353","#fb7252","#fb7151","#fb7050","#fb6e4e","#fb6d4d","#fb6c4c","#fb6b4b","#fb694a","#fa6849","#fa6648","#fa6547","#f96346","#f96245","#f96044","#f85f43","#f85d42","#f75c41","#f75b40","#f7593f","#f6583e","#f6563d","#f6553c","#f5533b","#f5523a","#f4503a","#f44f39","#f44d38","#f34c37","#f34a36","#f34935","#f24734","#f24633","#f14432","#f14331","#f14130","#f0402f","#f03f2e","#f03d2d","#ef3c2c","#ee3a2c","#ed392b","#ec382b","#eb372a","#ea362a","#e93529","#e83429","#e63328","#e53228","#e43027","#e32f27","#e22e27","#e12d26","#e02c26","#de2b25","#dd2a25","#dc2924","#db2824","#da2723","#d92523","#d82422","#d72322","#d52221","#d42121","#d32020","#d21f20","#d11e1f","#d01d1f","#cf1c1f","#ce1a1e","#cc191e","#cb181d","#ca181d","#c9181d","#c8171c","#c7171c","#c5171c","#c4161c","#c3161b","#c2161b","#c1161b","#bf151b","#be151a","#bd151a","#bc141a","#bb141a","#b91419","#b81419","#b71319","#b61319","#b51318","#b31218","#b21218","#b11218","#b01217","#af1117","#ad1117","#ac1117","#ab1016","#aa1016","#a91016","#a81016","#a60f15","#a50f15","#a30f15","#a10e15","#9f0e14","#9d0d14","#9c0d14","#9a0c14","#980c13","#960b13","#940b13","#920a13","#900a12","#8e0912","#8c0912","#8a0812","#880811","#860811","#840711","#820711","#800610","#7e0610","#7c0510","#7a0510","#79040f","#77040f","#75030f","#73030f","#71020e","#6f020e","#6d010e","#6b010e","#69000d","#67000d"]),bt.rdYlBu=bt.fromStringList(["#a50026","#a70226","#a90426","#ab0626","#ad0826","#af0926","#b10b26","#b30d26","#b50f26","#b71126","#b91326","#bb1526","#bd1726","#be1827","#c01a27","#c21c27","#c41e27","#c62027","#c82227","#ca2427","#cc2627","#ce2827","#d02927","#d22b27","#d42d27","#d62f27","#d83128","#d93429","#da362a","#db382b","#dc3b2c","#dd3d2d","#de402e","#e0422f","#e14430","#e24731","#e34933","#e44c34","#e54e35","#e65036","#e75337","#e95538","#ea5739","#eb5a3a","#ec5c3b","#ed5f3c","#ee613e","#ef633f","#f16640","#f26841","#f36b42","#f46d43","#f47044","#f57245","#f57547","#f57748","#f67a49","#f67c4a","#f67f4b","#f7814c","#f7844e","#f8864f","#f88950","#f88c51","#f98e52","#f99153","#f99355","#fa9656","#fa9857","#fa9b58","#fb9d59","#fba05b","#fba35c","#fca55d","#fca85e","#fcaa5f","#fdad60","#fdaf62","#fdb164","#fdb366","#fdb567","#fdb769","#fdb96b","#fdbb6d","#fdbd6f","#fdbf71","#fdc173","#fdc374","#fdc576","#fdc778","#fec87a","#feca7c","#fecc7e","#fece7f","#fed081","#fed283","#fed485","#fed687","#fed889","#feda8a","#fedc8c","#fede8e","#fee090","#fee192","#fee294","#fee496","#fee597","#fee699","#fee79b","#fee99d","#feea9f","#feeba1","#feeca2","#feeda4","#feefa6","#fff0a8","#fff1aa","#fff2ac","#fff3ad","#fff5af","#fff6b1","#fff7b3","#fff8b5","#fffab7","#fffbb9","#fffcba","#fffdbc","#fffebe","#feffc0","#fdfec2","#fcfec5","#fbfdc7","#fafdc9","#f8fccb","#f7fcce","#f6fbd0","#f5fbd2","#f3fbd4","#f2fad6","#f1fad9","#f0f9db","#eff9dd","#edf8df","#ecf8e2","#ebf7e4","#eaf7e6","#e9f6e8","#e7f6eb","#e6f5ed","#e5f5ef","#e4f4f1","#e2f4f4","#e1f3f6","#e0f3f8","#def2f7","#dcf1f7","#daf0f6","#d8eff6","#d6eef5","#d4edf4","#d1ecf4","#cfebf3","#cdeaf3","#cbe9f2","#c9e8f2","#c7e7f1","#c5e6f0","#c3e5f0","#c1e4ef","#bfe3ef","#bde2ee","#bbe1ed","#b9e0ed","#b6dfec","#b4deec","#b2ddeb","#b0dcea","#aedbea","#acdae9","#aad8e9","#a8d6e8","#a6d5e7","#a3d3e6","#a1d1e5","#9fd0e4","#9dcee3","#9bcce2","#99cae1","#97c9e0","#94c7df","#92c5de","#90c3dd","#8ec2dc","#8cc0db","#8abeda","#87bdd9","#85bbd9","#83b9d8","#81b7d7","#7fb6d6","#7db4d5","#7ab2d4","#78b0d3","#76afd2","#74add1","#72abd0","#70a9cf","#6ea6ce","#6da4cc","#6ba2cb","#69a0ca","#679ec9","#659bc8","#6399c7","#6297c6","#6095c4","#5e93c3","#5c90c2","#5a8ec1","#588cc0","#578abf","#5588be","#5385bd","#5183bb","#4f81ba","#4d7fb9","#4b7db8","#4a7ab7","#4878b6","#4676b5","#4574b3","#4471b2","#436fb1","#426cb0","#416aaf","#4167ad","#4065ac","#3f62ab","#3e60aa","#3e5ea8","#3d5ba7","#3c59a6","#3b56a5","#3a54a4","#3a51a2","#394fa1","#384ca0","#374a9f","#36479e","#36459c","#35429b","#34409a","#333d99","#333b97","#323896","#313695"]),k._version=0,k._frameWizardDialog=new Oo,k._dataVizWizardDialog=new Go,k._referenceFramePropsDialog=new Uo,k._greatCircleDialog=new Ho,k._tourLayers=!1,k._layerMaps={},k._layerMapsTours={},k._allMaps={},k._allMapsTours={},k._currentMap="Earth",k._layerList={},k._layerListTours={},k._moonfile="",k._selectedLayer=null,k._lastMenuClick=new xe,Pn._type=null,ur.maX_VERTICES=8e3,ur.maX_POLYGONS=8e3,da._orbitalToWwt=Z.create(1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1),da._initBegun=!1,cr._pinTextureCache={},cr._pins=null,function(){typeof document>"u"||document.getElementById("canvas")}(),Ut.mpcList=[],Ut._initBegun=!1,Ut._mpcBlendStates=new Array(7),Ut.starTexture=null,Ut._mpcVertexBuffer=null,Ut._mpcCount=0,P.highPercision=!0,P.showActualSize=U.get_active().get_actualPlanetScale(),P.RC=Math.PI/180,P._jNow=0,P._planetAngles=[new Wi(286.13,63.87,84.176,14.1844),new Wi(281.0097,61.4143,329.548,6.1385025),new Wi(272.76,67.16,160.2,-1.4813688),new Wi(317.68143,52.8865,176.63,350.89198226),new Wi(268.056595,64.495303,284.95,870.536),new Wi(40.589,83.537,38.9,810.7939024),new Wi(257.311,-15.175,203.81,501.1600928),new Wi(299.36,43.46,253.18,536.3128492),new Wi(132.993,-6.163,302.695,56.3625225),new Wi(269.9949,66.5392,38.3213,13.17635815),new Wi(268.05,64.5,200.39,203.4889538),new Wi(268.08,64.51,36.022,101.3747235),new Wi(268.2,64.57,44.064,50.3176081),new Wi(268.72,64.83,259.51,21.5710715),new Wi(0,0,0,0),new Wi(0,0,0,0),new Wi(0,0,0,0),new Wi(0,0,0,0),new Wi(0,0,0,0),new Wi(0,90,190.147,360.9856235)],P._lastPlanetCenterID=-2,P._orbitalSampleRate=256,P._obliquity=23.5*P.RC,P._drawOrder={},P.earthMatrix=new Z,P.earthMatrixInv=new Z,P._lastUpdate=new Date,P._ringsTriangleLists=new Array(2),P._ringImage=null,P._triangleCountRings=192+1*2,P._ringsVertexBuffer=null,P._planetSprite=new Wn,P._planetPoints=null,Zt.useGl=!1,Zt.useGlVersion2=!1,Zt.back=0,Ct.width=1024,Ct.height=768,Ct._contractionInPixels=-.5,Ct.trianglesRendered=0,Ct.trianglesCulled=0,Ct.renderingOn=!0,Ct._factor=1,Ct.cullInside=!0,Ct._hw=0,Ct._qw=0,Ct._hh=0,Ct._qh=0,U._active=null,U.tourSettings=null,Cr._caches={},Cr._allGlyphs="",K.last=K.get_metaNow(),K.framesPerSecond=30,K.frameDumping=!1,K.cancelFrameDump=!1,K.currentFrameNumber=0,K.totalFrames=0,K._metaNow=i.now(),K._offset=0,K._now=i.now(),K._syncToClock=!0,K._timeRate=1,K._altitude=0,_a._eTypeBuckets=[-3,-.186,-.168,-.158,-.15,-.143,-.137,-.13,-.123,-.115,-.104,-.089,-.068,-.042,-.011,.024,.064,.111,.169,.252,3],O.currentRenderGeneration=0,O.tileTargetX=-1,O.tileTargetY=-1,O.tileTargetLevel=-1,O.tilesInView=0,O.trianglesRendered=0,O.tilesTouched=0,O.frustumList=null,O.prepDevice=null,O.uvMultiple=256,O.callCount=0,O.useAccomidation=!0,O.demEnabled=!1,O.maxLevel=20,O.meshComplexity=50,O.imageQuality=50,O.lastDeepestLevel=0,O.deepestLevel=0,O.RC=3.1415927/180,Oe._queue={},Oe._tiles={},Oe.openThreads=8,Oe.readyToRenderCount=0,Oe.maxTileCacheSize=800,Oe.maxReadyToRenderSize=200,Oe.accessID=0,Oe._maxTotalToPurge=0,_i.defaultAnchor=1,_i.clipboardFormat="WorldWideTelescope.Overlay",_i.nextId=11231,_i.RC=3.1415927/180,gi._points=new Array(9*3*2),Vi.capturing=!1,Vi.currentEditor=null,Ht._playing=!1,Ht._switchedToFullScreen=!1,Ht.noRestoreUIOnStop=!1,Sr.clipboardFormat="WorldWideTelescope.Slide",rt._undoStack=new i.Stack,rt._redoStack=new i.Stack,bi.kilometersPerAu=149598e3,bi.auPerParsec=206264.806,bi.auPerLightYear=63239.6717,bi.ssmUnitConversion=370,ta.id=1,Lo.earthRadius=6371e3,q.imageSets=[],q.exploreRoot=new vn,q.imageSetName="",q.showDataLayers=!1,q._renderNeeded=!1,q.constellationsFigures=null,q.constellationsBoundries=null,q.solarSystemObjectsNames=["Sun","Mercury","Venus","Mars","Jupiter","Saturn","Uranus","Neptune","Pluto","Moon","Io","Europa","Ganymede","Callisto","IoShadow","EuropaShadow","GanymedeShadow","CallistoShadow","SunEclipsed","Earth","Custom","Undefined"],q.singleton=new q,q.singleton.renderContext=new Zt,K.last=i.now(),K.updateClock(),V.RC=3.1415927/180,V.RCRA=3.1415927/12,V.radius=1,V._rotationMatrix=null,Ji._halfpi$1=Math.PI/2,Ji._inv_halfpi$1=2/Math.PI,Ji._twothird$1=2/3,es._galacticMatrix$1=Z.create(-.0548755604024359,-.483835015526738,-.873437090247923,0,-.867666148981161,.455983776232537,-.198076373464674,0,.494109427943568,.746982244476371,-.444829629919504,0,0,0,0,1),nr.naN=0/0,Et._translateUI$1=null,Et._translateUILines$1=null,Et._scaleUI$1=null,Et._rotateUi$1=null,zi._circleTexture$1=null,ls._circleTexture$1=null,kr._circleTexture$1=null,ki.slashIndexBuffer=new Array(64),ki.backSlashIndexBuffer=new Array(64),ki.rootIndexBuffer=new Array(4),tr.issGuid=er.fromString("00000001-0002-0003-0405-060708090a0b"),tr._loading$2=!1,tr._issmodel$2=null,tr._doc$2=null,Jf}),_exports_object})}(src)),src.exports}const require$$1=getAugmentedNamespace(vue_runtime_esmBundler);(function(i,o){(function(_,g){i.exports=g(requireSrc(),require$$1)})(typeof self<"u"?self:commonjsGlobal,(u,_)=>(()=>{var g={535:(E,D)=>{D.Z=(B,j)=>{const J=B.__vccOpts||B;for(const[oe,le]of j)J[oe]=le;return J}},415:E=>{E.exports=u},203:E=>{E.exports=_}},w={};function M(E){var D=w[E];if(D!==void 0)return D.exports;var B=w[E]={exports:{}};return g[E](B,B.exports,M),B.exports}M.d=(E,D)=>{for(var B in D)M.o(D,B)&&!M.o(E,B)&&Object.defineProperty(E,B,{enumerable:!0,get:D[B]})},M.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),M.o=(E,D)=>Object.prototype.hasOwnProperty.call(E,D),M.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},M.p="";var R={};return(()=>{if(M.r(R),M.d(R,{ImageSetLayerState:()=>Sa,ImagesetInfo:()=>ci,SpreadSheetLayerInfo:()=>vs,WWTAwareComponent:()=>Hn,WWTComponent:()=>ys,engineStore:()=>Un,wwtPinia:()=>Fi}),typeof window<"u"){var E=window.document.currentScript,D=E&&E.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);D&&(M.p=D[1])}var B=M(203),j=!1;/*!
  * pinia v2.0.32
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let J;const oe=y=>J=y,le=Symbol();function me(y){return y&&typeof y=="object"&&Object.prototype.toString.call(y)==="[object Object]"&&typeof y.toJSON!="function"}var Be;(function(y){y.direct="direct",y.patchObject="patch object",y.patchFunction="patch function"})(Be||(Be={}));function pe(){const y=(0,B.effectScope)(!0),x=y.run(()=>(0,B.ref)({}));let L=[],H=[];const ie=(0,B.markRaw)({install(te){oe(ie),ie._a=te,te.provide(le,ie),te.config.globalProperties.$pinia=ie,H.forEach(be=>L.push(be)),H=[]},use(te){return!this._a&&!j?H.push(te):L.push(te),this},_p:L,_a:null,_e:y,_s:new Map,state:x});return ie}const re=()=>{};function Le(y,x,L,H=re){y.push(x);const ie=()=>{const te=y.indexOf(x);te>-1&&(y.splice(te,1),H())};return!L&&(0,B.getCurrentScope)()&&(0,B.onScopeDispose)(ie),ie}function he(y,...x){y.slice().forEach(L=>{L(...x)})}function ke(y,x){y instanceof Map&&x instanceof Map&&x.forEach((L,H)=>y.set(H,L)),y instanceof Set&&x instanceof Set&&x.forEach(y.add,y);for(const L in x){if(!x.hasOwnProperty(L))continue;const H=x[L],ie=y[L];me(ie)&&me(H)&&y.hasOwnProperty(L)&&!(0,B.isRef)(H)&&!(0,B.isReactive)(H)?y[L]=ke(ie,H):y[L]=H}return y}const Ae=Symbol();function Ve(y){return!me(y)||!y.hasOwnProperty(Ae)}const{assign:ge}=Object;function De(y){return!!((0,B.isRef)(y)&&y.effect)}function qe(y,x,L,H){const{state:ie,actions:te,getters:be}=x,Ie=L.state.value[y];let xt;function Ye(){Ie||(L.state.value[y]=ie?ie():{});const Dt=(0,B.toRefs)(L.state.value[y]);return ge(Dt,te,Object.keys(be||{}).reduce((wt,mr)=>(wt[mr]=(0,B.markRaw)((0,B.computed)(()=>{oe(L);const Ce=L._s.get(y);return be[mr].call(Ce,Ce)})),wt),{}))}return xt=ot(y,Ye,x,L,H,!0),xt.$reset=function(){const wt=ie?ie():{};this.$patch(mr=>{ge(mr,wt)})},xt}function ot(y,x,L={},H,ie,te){let be;const Ie=ge({actions:{}},L),xt={deep:!0};let Ye,Dt,wt=(0,B.markRaw)([]),mr=(0,B.markRaw)([]),Ce;const Hr=H.state.value[y];!te&&!Hr&&(H.state.value[y]={}),(0,B.ref)({});let pt;function la(ce){let Ni;Ye=Dt=!1,typeof ce=="function"?(ce(H.state.value[y]),Ni={type:Be.patchFunction,storeId:y,events:Ce}):(ke(H.state.value[y],ce),Ni={type:Be.patchObject,payload:ce,storeId:y,events:Ce});const Lr=pt=Symbol();(0,B.nextTick)().then(()=>{pt===Lr&&(Ye=!0)}),Dt=!0,he(wt,Ni,H.state.value[y])}const Or=re;function Cs(){be.stop(),wt=[],mr=[],H._s.delete(y)}function Ta(ce,Ni){return function(){oe(H);const Lr=Array.from(arguments),qn=[],vr=[];function Ms(lt){qn.push(lt)}function ui(lt){vr.push(lt)}he(mr,{args:Lr,name:ce,store:Ui,after:Ms,onError:ui});let Xn;try{Xn=Ni.apply(this&&this.$id===y?this:Ui,Lr)}catch(lt){throw he(vr,lt),lt}return Xn instanceof Promise?Xn.then(lt=>(he(qn,lt),lt)).catch(lt=>(he(vr,lt),Promise.reject(lt))):(he(qn,Xn),Xn)}}const Ss={_p:H,$id:y,$onAction:Le.bind(null,mr),$patch:la,$reset:Or,$subscribe(ce,Ni={}){const Lr=Le(wt,ce,Ni.detached,()=>qn()),qn=be.run(()=>(0,B.watch)(()=>H.state.value[y],vr=>{(Ni.flush==="sync"?Dt:Ye)&&ce({storeId:y,type:Be.direct,events:Ce},vr)},ge({},xt,Ni)));return Lr},$dispose:Cs},Ui=(0,B.reactive)(Ss);H._s.set(y,Ui);const Gn=H._e.run(()=>(be=(0,B.effectScope)(),be.run(()=>x())));for(const ce in Gn){const Ni=Gn[ce];if((0,B.isRef)(Ni)&&!De(Ni)||(0,B.isReactive)(Ni))te||(Hr&&Ve(Ni)&&((0,B.isRef)(Ni)?Ni.value=Hr[ce]:ke(Ni,Hr[ce])),H.state.value[y][ce]=Ni);else if(typeof Ni=="function"){const Lr=Ta(ce,Ni);Gn[ce]=Lr,Ie.actions[ce]=Ni}}return ge(Ui,Gn),ge((0,B.toRaw)(Ui),Gn),Object.defineProperty(Ui,"$state",{get:()=>H.state.value[y],set:ce=>{la(Ni=>{ge(Ni,ce)})}}),H._p.forEach(ce=>{ge(Ui,be.run(()=>ce({store:Ui,app:H._a,pinia:H,options:Ie})))}),Hr&&te&&L.hydrate&&L.hydrate(Ui.$state,Hr),Ye=!0,Dt=!0,Ui}function We(y,x,L){let H,ie;const te=typeof x=="function";typeof y=="string"?(H=y,ie=te?L:x):(ie=y,H=y.id);function be(Ie,xt){const Ye=(0,B.getCurrentInstance)();return Ie=Ie||Ye&&(0,B.inject)(le,null),Ie&&oe(Ie),Ie=J,Ie._s.has(H)||(te?ot(H,x,ie,Ie):qe(H,ie,Ie)),Ie._s.get(H)}return be.$id=H,be}function ct(y,x){return Array.isArray(x)?x.reduce((L,H)=>(L[H]=function(){return y(this.$pinia)[H]},L),{}):Object.keys(x).reduce((L,H)=>(L[H]=function(){const ie=y(this.$pinia),te=x[H];return typeof te=="function"?te.call(this,ie):ie[te]},L),{})}function je(y,x){return Array.isArray(x)?x.reduce((L,H)=>(L[H]=function(...ie){return y(this.$pinia)[H](...ie)},L),{}):Object.keys(x).reduce((L,H)=>(L[H]=function(...ie){return y(this.$pinia)[x[H]](...ie)},L),{})}var ti=function(y,x){return ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,H){L.__proto__=H}||function(L,H){for(var ie in H)Object.prototype.hasOwnProperty.call(H,ie)&&(L[ie]=H[ie])},ti(y,x)};function It(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");ti(y,x);function L(){this.constructor=y}y.prototype=x===null?Object.create(x):(L.prototype=x.prototype,new L)}var Rt=function(){return Rt=Object.assign||function(x){for(var L,H=1,ie=arguments.length;H<ie;H++){L=arguments[H];for(var te in L)Object.prototype.hasOwnProperty.call(L,te)&&(x[te]=L[te])}return x},Rt.apply(this,arguments)};function Tt(y,x,L,H){function ie(te){return te instanceof L?te:new L(function(be){be(te)})}return new(L||(L=Promise))(function(te,be){function Ie(Dt){try{Ye(H.next(Dt))}catch(wt){be(wt)}}function xt(Dt){try{Ye(H.throw(Dt))}catch(wt){be(wt)}}function Ye(Dt){Dt.done?te(Dt.value):ie(Dt.value).then(Ie,xt)}Ye((H=H.apply(y,x||[])).next())})}function ni(y,x){var L={label:0,sent:function(){if(te[0]&1)throw te[1];return te[1]},trys:[],ops:[]},H,ie,te,be;return be={next:Ie(0),throw:Ie(1),return:Ie(2)},typeof Symbol=="function"&&(be[Symbol.iterator]=function(){return this}),be;function Ie(Ye){return function(Dt){return xt([Ye,Dt])}}function xt(Ye){if(H)throw new TypeError("Generator is already executing.");for(;be&&(be=0,Ye[0]&&(L=0)),L;)try{if(H=1,ie&&(te=Ye[0]&2?ie.return:Ye[0]?ie.throw||((te=ie.return)&&te.call(ie),0):ie.next)&&!(te=te.call(ie,Ye[1])).done)return te;switch(ie=0,te&&(Ye=[Ye[0]&2,te.value]),Ye[0]){case 0:case 1:te=Ye;break;case 4:return L.label++,{value:Ye[1],done:!1};case 5:L.label++,ie=Ye[1],Ye=[0];continue;case 7:Ye=L.ops.pop(),L.trys.pop();continue;default:if(te=L.trys,!(te=te.length>0&&te[te.length-1])&&(Ye[0]===6||Ye[0]===2)){L=0;continue}if(Ye[0]===3&&(!te||Ye[1]>te[0]&&Ye[1]<te[3])){L.label=Ye[1];break}if(Ye[0]===6&&L.label<te[1]){L.label=te[1],te=Ye;break}if(te&&L.label<te[2]){L.label=te[2],L.ops.push(Ye);break}te[2]&&L.ops.pop(),L.trys.pop();continue}Ye=x.call(y,L)}catch(Dt){Ye=[6,Dt],ie=0}finally{H=te=0}if(Ye[0]&5)throw Ye[1];return{value:Ye[0]?Ye[1]:void 0,done:!0}}}function ai(y){var x=typeof Symbol=="function"&&Symbol.iterator,L=x&&y[x],H=0;if(L)return L.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&H>=y.length&&(y=void 0),{value:y&&y[H++],done:!y}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zi(y,x){var L=typeof Symbol=="function"&&y[Symbol.iterator];if(!L)return y;var H=L.call(y),ie,te=[],be;try{for(;(x===void 0||x-- >0)&&!(ie=H.next()).done;)te.push(ie.value)}catch(Ie){be={error:Ie}}finally{try{ie&&!ie.done&&(L=H.return)&&L.call(H)}finally{if(be)throw be.error}}return te}var Ai=3.14159265358979,xr=180/Ai,_n=Ai/180,Ur=12/Ai,$i=Ai/12,Vr=12/180,Nn;(function(y){y[y.depth=0]="depth",y[y.altitude=1]="altitude",y[y.distance=2]="distance",y[y.seaLevel=3]="seaLevel",y[y.terrain=4]="terrain"})(Nn||(Nn={}));var Br;(function(y){y[y.meters=1]="meters",y[y.feet=2]="feet",y[y.inches=3]="inches",y[y.miles=4]="miles",y[y.kilometers=5]="kilometers",y[y.astronomicalUnits=6]="astronomicalUnits",y[y.lightYears=7]="lightYears",y[y.parsecs=8]="parsecs",y[y.megaParsecs=9]="megaParsecs",y[y.custom=10]="custom"})(Br||(Br={}));var xn;(function(y){y[y.gamma=0]="gamma",y[y.xRay=1]="xRay",y[y.ultraviolet=2]="ultraviolet",y[y.visible=3]="visible",y[y.hydrogenAlpha=4]="hydrogenAlpha",y[y.IR=4]="IR",y[y.microwave=5]="microwave",y[y.radio=6]="radio",y[y.visibleNight=6]="visibleNight"})(xn||(xn={}));var Rr;(function(y){y[y.star=1]="star",y[y.supernova=2]="supernova",y[y.blackHole=4]="blackHole",y[y.neutronStar=8]="neutronStar",y[y.doubleStar=16]="doubleStar",y[y.multipleStars=32]="multipleStars",y[y.asterism=64]="asterism",y[y.constellation=128]="constellation",y[y.openCluster=256]="openCluster",y[y.globularCluster=512]="globularCluster",y[y.nebulousCluster=1024]="nebulousCluster",y[y.nebula=2048]="nebula",y[y.emissionNebula=4096]="emissionNebula",y[y.planetaryNebula=8192]="planetaryNebula",y[y.reflectionNebula=16384]="reflectionNebula",y[y.darkNebula=32768]="darkNebula",y[y.giantMolecularCloud=65536]="giantMolecularCloud",y[y.supernovaRemnant=131072]="supernovaRemnant",y[y.interstellarDust=262144]="interstellarDust",y[y.quasar=524288]="quasar",y[y.galaxy=1048576]="galaxy",y[y.spiralGalaxy=2097152]="spiralGalaxy",y[y.irregularGalaxy=4194304]="irregularGalaxy",y[y.ellipticalGalaxy=8388608]="ellipticalGalaxy",y[y.knot=16777216]="knot",y[y.plateDefect=33554432]="plateDefect",y[y.clusterOfGalaxies=67108864]="clusterOfGalaxies",y[y.otherNGC=134217728]="otherNGC",y[y.unidentified=268435456]="unidentified",y[y.solarSystem=536870912]="solarSystem",y[y.unfiltered=1073741823]="unfiltered",y[y.stellar=63]="stellar",y[y.stellarGroupings=2032]="stellarGroupings",y[y.nebulae=523264]="nebulae",y[y.galactic=133693440]="galactic",y[y.other=436207616]="other"})(Rr||(Rr={}));var Q;(function(y){y[y.spherical=0]="spherical",y[y.rectangular=1]="rectangular",y[y.orbital=2]="orbital"})(Q||(Q={}));var ue;(function(y){y[y.byteT=0]="byteT",y[y.int16T=1]="int16T",y[y.int32T=2]="int32T",y[y.floatT=3]="floatT",y[y.doubleT=4]="doubleT",y[y.none=5]="none"})(ue||(ue={}));var Me;(function(y){y[y.fadeIn=1]="fadeIn",y[y.fadeOut=2]="fadeOut",y[y.both=3]="both",y[y.none=4]="none"})(Me||(Me={}));var Fe;(function(y){y[y.explorer=0]="explorer",y[y.tour=1]="tour",y[y.search=2]="search",y[y.constellation=3]="constellation",y[y.view=4]="view",y[y.goTo=5]="goTo",y[y.community=6]="community",y[y.context=7]="context",y[y.voTable=8]="voTable",y[y.imageStack=9]="imageStack"})(Fe||(Fe={}));var Re;(function(y){y[y.interval=0]="interval",y[y.conditionalGet=1]="conditionalGet",y[y.viewChange=2]="viewChange"})(Re||(Re={}));var Ke;(function(y){y[y.earth=0]="earth",y[y.planet=1]="planet",y[y.sky=2]="sky",y[y.panorama=3]="panorama"})(Ke||(Ke={}));var nt;(function(y){y[y.earth=0]="earth",y[y.planet=1]="planet",y[y.sky=2]="sky",y[y.panorama=3]="panorama",y[y.solarSystem=4]="solarSystem",y[y.sandbox=5]="sandbox"})(nt||(nt={}));var b;(function(y){y[y.screen=0]="screen",y[y.world=1]="world"})(b||(b={}));var Ze;(function(y){y[y.gaussian=0]="gaussian",y[y.point=1]="point",y[y.circle=2]="circle",y[y.square=3]="square",y[y.pushPin=4]="pushPin",y[y.custom=5]="custom"})(Ze||(Ze={}));var ze;(function(y){y[y.linear=0]="linear",y[y.power=1]="power",y[y.log=2]="log",y[y.constant=3]="constant",y[y.stellarMagnitude=4]="stellarMagnitude"})(ze||(ze={}));var Xe;(function(y){y[y.mercator=0]="mercator",y[y.equirectangular=1]="equirectangular",y[y.tangent=2]="tangent",y[y.tan=2]="tan",y[y.toast=3]="toast",y[y.spherical=4]="spherical",y[y.skyImage=5]="skyImage",y[y.plotted=6]="plotted"})(Xe||(Xe={}));var mt;(function(y){y[y.hours=0]="hours",y[y.degrees=1]="degrees"})(mt||(mt={}));var yt;(function(y){y[y.sky=0]="sky",y[y.ecliptic=1]="ecliptic",y[y.galactic=2]="galactic",y[y.sun=3]="sun",y[y.mercury=4]="mercury",y[y.venus=5]="venus",y[y.earth=6]="earth",y[y.mars=7]="mars",y[y.jupiter=8]="jupiter",y[y.saturn=9]="saturn",y[y.uranus=10]="uranus",y[y.neptune=11]="neptune",y[y.pluto=12]="pluto",y[y.moon=13]="moon",y[y.io=14]="io",y[y.europa=15]="europa",y[y.ganymede=16]="ganymede",y[y.callisto=17]="callisto",y[y.custom=18]="custom",y[y.identity=19]="identity",y[y.sandbox=20]="sandbox"})(yt||(yt={}));var zt;(function(y){y[y.fixedSherical=0]="fixedSherical",y[y.orbital=1]="orbital",y[y.trajectory=2]="trajectory",y[y.synodic=3]="synodic"})(zt||(zt={}));var Mt;(function(y){y[y.linear=0]="linear",y[y.log=1]="log",y[y.power=2]="power",y[y.squareRoot=3]="squareRoot",y[y.histogramEqualization=4]="histogramEqualization"})(Mt||(Mt={}));var Ci;(function(y){y[y.sun=0]="sun",y[y.mercury=1]="mercury",y[y.venus=2]="venus",y[y.mars=3]="mars",y[y.jupiter=4]="jupiter",y[y.saturn=5]="saturn",y[y.uranus=6]="uranus",y[y.neptune=7]="neptune",y[y.pluto=8]="pluto",y[y.moon=9]="moon",y[y.io=10]="io",y[y.europa=11]="europa",y[y.ganymede=12]="ganymede",y[y.callisto=13]="callisto",y[y.ioShadow=14]="ioShadow",y[y.europaShadow=15]="europaShadow",y[y.ganymedeShadow=16]="ganymedeShadow",y[y.callistoShadow=17]="callistoShadow",y[y.sunEclipsed=18]="sunEclipsed",y[y.earth=19]="earth",y[y.custom=20]="custom",y[y.undefined=65536]="undefined"})(Ci||(Ci={}));var _t=M(415),Pi=["astronomical","color","enabled","fadeSpan","name","opacity","opened","referenceFrame","version"];function S(y,x){var L,H;try{for(var ie=ai(Pi),te=ie.next();!te.done;te=ie.next()){var be=te.value;x["set_"+be](y["get_"+be]())}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}}var zr=function(){function y(x){S(x,this)}return y.prototype.get_astronomical=function(){return this.astronomical},y.prototype.set_astronomical=function(x){return this.astronomical=x,x},y.prototype.get_color=function(){return this.color},y.prototype.set_color=function(x){return this.color=x,x},y.prototype.get_enabled=function(){return this.enabled},y.prototype.set_enabled=function(x){return this.enabled=x,x},y.prototype.get_endTime=function(){return this.endTime},y.prototype.set_endTime=function(x){return this.endTime=x,x},y.prototype.get_fadeSpan=function(){return this.fadeSpan},y.prototype.set_fadeSpan=function(x){return this.fadeSpan=x,x},y.prototype.get_fadeType=function(){return this.fadeType},y.prototype.set_fadeType=function(x){return this.fadeType=x,x},y.prototype.get_name=function(){return this.name},y.prototype.set_name=function(x){return this.name=x,x},y.prototype.get_opacity=function(){return this.opacity},y.prototype.set_opacity=function(x){return this.opacity=x,x},y.prototype.get_opened=function(){return this.opened},y.prototype.set_opened=function(x){return this.opened=x,x},y.prototype.get_referenceFrame=function(){return this.referenceFrame},y.prototype.set_referenceFrame=function(x){return this.referenceFrame=x,x},y.prototype.get_startTime=function(){return this.startTime},y.prototype.set_startTime=function(x){return this.startTime=x,x},y.prototype.get_version=function(){return this.version},y.prototype.set_version=function(x){return this.version=x,x},y}(),gn=["colorMapperName","overrideDefaultLayer"];Pi.concat(gn);function Jr(y,x){var L="set_"+x[0],H=x[1];y[L](H)}function li(y,x){var L,H;S(y,x);try{for(var ie=ai(gn),te=ie.next();!te.done;te=ie.next()){var be=te.value;x["set_"+be](y["get_"+be]())}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}}var _r=function(y){It(x,y);function x(L){var H=y.call(this,L)||this;return li(L,H),H}return x.prototype.get_colorMapperName=function(){return this.colorMapperName},x.prototype.set_colorMapperName=function(L){return this.colorMapperName=L,L},x.prototype.get_overrideDefaultLayer=function(){return this.overrideDefaultLayer},x.prototype.set_overrideDefaultLayer=function(L){return this.overrideDefaultLayer=L,L},x}(zr),gr=["altColumn","altType","altUnit","barChartBitmask","beginRange","cartesianCustomScale","cartesianScale","colorMapColumn","colorMapperName","coordinatesType","decay","dynamicColor","dynamicData","endDateColumn","endRange","geometryColumn","hyperlinkColumn","hyperlinkFormat","latColumn","lngColumn","markerColumn","markerIndex","markerScale","nameColumn","normalizeColorMap","normalizeColorMapMax","normalizeColorMapMin","normalizeSize","normalizeSizeClip","normalizeSizeMax","normalizeSizeMin","plotType","pointScaleType","raUnits","scaleFactor","showFarSide","sizeColumn","startDateColumn","timeSeries","xAxisColumn","xAxisReverse","yAxisColumn","yAxisReverse","zAxisColumn","zAxisReverse"];Pi.concat(gr);function Vn(y,x){var L="set_"+x[0],H=x[1];y[L](H)}function Qt(y,x){var L,H;S(y,x);try{for(var ie=ai(gr),te=ie.next();!te.done;te=ie.next()){var be=te.value;x["set_"+be](y["get_"+be]())}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}}var Oa=function(y){It(x,y);function x(L){var H=y.call(this,L)||this;return Qt(L,H),H}return x.prototype.get_altColumn=function(){return this.altColumn},x.prototype.set_altColumn=function(L){return this.altColumn=L,L},x.prototype.get_altType=function(){return this.altType},x.prototype.set_altType=function(L){return this.altType=L,L},x.prototype.get_altUnit=function(){return this.altUnit},x.prototype.set_altUnit=function(L){return this.altUnit=L,L},x.prototype.get_barChartBitmask=function(){return this.barChartBitmask},x.prototype.set_barChartBitmask=function(L){return this.barChartBitmask=L,L},x.prototype.get_beginRange=function(){return this.beginRange},x.prototype.set_beginRange=function(L){return this.beginRange=L,L},x.prototype.get_cartesianCustomScale=function(){return this.cartesianCustomScale},x.prototype.set_cartesianCustomScale=function(L){return this.cartesianCustomScale=L,L},x.prototype.get_cartesianScale=function(){return this.cartesianScale},x.prototype.set_cartesianScale=function(L){return this.cartesianScale=L,L},x.prototype.get_colorMapColumn=function(){return this.colorMapColumn},x.prototype.set_colorMapColumn=function(L){return this.colorMapColumn=L,L},x.prototype.get_colorMapperName=function(){return this.colorMapperName},x.prototype.set_colorMapperName=function(L){return this.colorMapperName=L,L},x.prototype.get_coordinatesType=function(){return this.coordinatesType},x.prototype.set_coordinatesType=function(L){return this.coordinatesType=L,L},x.prototype.get_decay=function(){return this.decay},x.prototype.set_decay=function(L){return this.decay=L,L},x.prototype.get_dynamicColor=function(){return this.dynamicColor},x.prototype.set_dynamicColor=function(L){return this.dynamicColor=L,L},x.prototype.get_dynamicData=function(){return this.dynamicData},x.prototype.set_dynamicData=function(L){return this.dynamicData=L,L},x.prototype.get_endDateColumn=function(){return this.endDateColumn},x.prototype.set_endDateColumn=function(L){return this.endDateColumn=L,L},x.prototype.get_endRange=function(){return this.endRange},x.prototype.set_endRange=function(L){return this.endRange=L,L},x.prototype.get_geometryColumn=function(){return this.geometryColumn},x.prototype.set_geometryColumn=function(L){return this.geometryColumn=L,L},x.prototype.get_hyperlinkColumn=function(){return this.hyperlinkColumn},x.prototype.set_hyperlinkColumn=function(L){return this.hyperlinkColumn=L,L},x.prototype.get_hyperlinkFormat=function(){return this.hyperlinkFormat},x.prototype.set_hyperlinkFormat=function(L){return this.hyperlinkFormat=L,L},x.prototype.get_latColumn=function(){return this.latColumn},x.prototype.set_latColumn=function(L){return this.latColumn=L,L},x.prototype.get_lngColumn=function(){return this.lngColumn},x.prototype.set_lngColumn=function(L){return this.lngColumn=L,L},x.prototype.get_markerColumn=function(){return this.markerColumn},x.prototype.set_markerColumn=function(L){return this.markerColumn=L,L},x.prototype.get_markerIndex=function(){return this.markerIndex},x.prototype.set_markerIndex=function(L){return this.markerIndex=L,L},x.prototype.get_markerScale=function(){return this.markerScale},x.prototype.set_markerScale=function(L){return this.markerScale=L,L},x.prototype.get_nameColumn=function(){return this.nameColumn},x.prototype.set_nameColumn=function(L){return this.nameColumn=L,L},x.prototype.get_normalizeColorMap=function(){return this.normalizeColorMap},x.prototype.set_normalizeColorMap=function(L){return this.normalizeColorMap=L,L},x.prototype.get_normalizeColorMapMax=function(){return this.normalizeColorMapMax},x.prototype.set_normalizeColorMapMax=function(L){return this.normalizeColorMapMax=L,L},x.prototype.get_normalizeColorMapMin=function(){return this.normalizeColorMapMin},x.prototype.set_normalizeColorMapMin=function(L){return this.normalizeColorMapMin=L,L},x.prototype.get_normalizeSize=function(){return this.normalizeSize},x.prototype.set_normalizeSize=function(L){return this.normalizeSize=L,L},x.prototype.get_normalizeSizeClip=function(){return this.normalizeSizeClip},x.prototype.set_normalizeSizeClip=function(L){return this.normalizeSizeClip=L,L},x.prototype.get_normalizeSizeMax=function(){return this.normalizeSizeMax},x.prototype.set_normalizeSizeMax=function(L){return this.normalizeSizeMax=L,L},x.prototype.get_normalizeSizeMin=function(){return this.normalizeSizeMin},x.prototype.set_normalizeSizeMin=function(L){return this.normalizeSizeMin=L,L},x.prototype.get_plotType=function(){return this.plotType},x.prototype.set_plotType=function(L){return this.plotType=L,L},x.prototype.get_pointScaleType=function(){return this.pointScaleType},x.prototype.set_pointScaleType=function(L){return this.pointScaleType=L,L},x.prototype.get_raUnits=function(){return this.raUnits},x.prototype.set_raUnits=function(L){return this.raUnits=L,L},x.prototype.get_scaleFactor=function(){return this.scaleFactor},x.prototype.set_scaleFactor=function(L){return this.scaleFactor=L,L},x.prototype.get_showFarSide=function(){return this.showFarSide},x.prototype.set_showFarSide=function(L){return this.showFarSide=L,L},x.prototype.get_sizeColumn=function(){return this.sizeColumn},x.prototype.set_sizeColumn=function(L){return this.sizeColumn=L,L},x.prototype.get_startDateColumn=function(){return this.startDateColumn},x.prototype.set_startDateColumn=function(L){return this.startDateColumn=L,L},x.prototype.get_timeSeries=function(){return this.timeSeries},x.prototype.set_timeSeries=function(L){return this.timeSeries=L,L},x.prototype.get_xAxisColumn=function(){return this.xAxisColumn},x.prototype.set_xAxisColumn=function(L){return this.xAxisColumn=L,L},x.prototype.get_xAxisReverse=function(){return this.xAxisReverse},x.prototype.set_xAxisReverse=function(L){return this.xAxisReverse=L,L},x.prototype.get_yAxisColumn=function(){return this.yAxisColumn},x.prototype.set_yAxisColumn=function(L){return this.yAxisColumn=L,L},x.prototype.get_yAxisReverse=function(){return this.yAxisReverse},x.prototype.set_yAxisReverse=function(L){return this.yAxisReverse=L,L},x.prototype.get_zAxisColumn=function(){return this.zAxisColumn},x.prototype.set_zAxisColumn=function(L){return this.zAxisColumn=L,L},x.prototype.get_zAxisReverse=function(){return this.zAxisReverse},x.prototype.set_zAxisReverse=function(L){return this.zAxisReverse=L,L},x}(zr),s=["id","label","opacity","showHoverLabel","tag"];function oa(y,x){var L,H;try{for(var ie=ai(s),te=ie.next();!te.done;te=ie.next()){var be=te.value;x["set_"+be](y["get_"+be]())}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}}var Bn=function(){function y(x){oa(x,this)}return y.prototype.get_id=function(){return this.id},y.prototype.set_id=function(x){return this.id=x,x},y.prototype.get_label=function(){return this.label},y.prototype.set_label=function(x){return this.label=x,x},y.prototype.get_opacity=function(){return this.opacity},y.prototype.set_opacity=function(x){return this.opacity=x,x},y.prototype.get_showHoverLabel=function(){return this.showHoverLabel},y.prototype.set_showHoverLabel=function(x){return this.showHoverLabel=x,x},y.prototype.get_tag=function(){return this.tag},y.prototype.set_tag=function(x){return this.tag=x,x},y}(),Ua=["fill","fillColor","lineColor","lineWidth","radius","skyRelative"];s.concat(Ua);function ya(y,x){var L,H;oa(y,x);try{for(var ie=ai(Ua),te=ie.next();!te.done;te=ie.next()){var be=te.value;x["set_"+be](y["get_"+be]())}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}}(function(y){It(x,y);function x(L){var H=y.call(this,L)||this;return ya(L,H),H}return x.prototype.get_fill=function(){return this.fill},x.prototype.set_fill=function(L){return this.fill=L,L},x.prototype.get_fillColor=function(){return this.fillColor},x.prototype.set_fillColor=function(L){return this.fillColor=L,L},x.prototype.get_lineColor=function(){return this.lineColor},x.prototype.set_lineColor=function(L){return this.lineColor=L,L},x.prototype.get_lineWidth=function(){return this.lineWidth},x.prototype.set_lineWidth=function(L){return this.lineWidth=L,L},x.prototype.get_radius=function(){return this.radius},x.prototype.set_radius=function(L){return this.radius=L,L},x.prototype.get_skyRelative=function(){return this.skyRelative},x.prototype.set_skyRelative=function(L){return this.skyRelative=L,L},x})(Bn);var Ha=["fill","fillColor","lineColor","lineWidth"];s.concat(Ha);function et(y,x){var L,H;oa(y,x);try{for(var ie=ai(Ha),te=ie.next();!te.done;te=ie.next()){var be=te.value;x["set_"+be](y["get_"+be]())}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}}(function(y){It(x,y);function x(L){var H=y.call(this,L)||this;return et(L,H),H}return x.prototype.get_fill=function(){return this.fill},x.prototype.set_fill=function(L){return this.fill=L,L},x.prototype.get_fillColor=function(){return this.fillColor},x.prototype.set_fillColor=function(L){return this.fillColor=L,L},x.prototype.get_lineColor=function(){return this.lineColor},x.prototype.set_lineColor=function(L){return this.lineColor=L,L},x.prototype.get_lineWidth=function(){return this.lineWidth},x.prototype.set_lineWidth=function(L){return this.lineWidth=L,L},x})(Bn);var Ga=["lineColor","lineWidth"];s.concat(Ga);function zn(y,x){var L,H;oa(y,x);try{for(var ie=ai(Ga),te=ie.next();!te.done;te=ie.next()){var be=te.value;x["set_"+be](y["get_"+be]())}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}}(function(y){It(x,y);function x(L){var H=y.call(this,L)||this;return zn(L,H),H}return x.prototype.get_lineColor=function(){return this.lineColor},x.prototype.set_lineColor=function(L){return this.lineColor=L,L},x.prototype.get_lineWidth=function(){return this.lineWidth},x.prototype.set_lineWidth=function(L){return this.lineWidth=L,L},x})(Bn);var qa=["altColumn","altType","altUnit","autoUpdate","beginRange","cartesianCustomScale","cartesianScale","colorMapColumn","coordinatesType","dataSourceUrl","decay","dynamicData","endDateColumn","endRange","hyperlinkColumn","hyperlinkFormat","latColumn","lngColumn","markerColumn","markerIndex","markerScale","nameColumn","plotType","pointScaleType","raUnits","scaleFactor","showFarSide","sizeColumn","startDateColumn","timeSeries","xAxisColumn","xAxisReverse","yAxisColumn","yAxisReverse","zAxisColumn","zAxisReverse"];Pi.concat(qa);function Ca(y,x){var L,H;S(y,x);try{for(var ie=ai(qa),te=ie.next();!te.done;te=ie.next()){var be=te.value;x["set_"+be](y["get_"+be]())}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}}(function(y){It(x,y);function x(L){var H=y.call(this,L)||this;return Ca(L,H),H}return x.prototype.get_altColumn=function(){return this.altColumn},x.prototype.set_altColumn=function(L){return this.altColumn=L,L},x.prototype.get_altType=function(){return this.altType},x.prototype.set_altType=function(L){return this.altType=L,L},x.prototype.get_altUnit=function(){return this.altUnit},x.prototype.set_altUnit=function(L){return this.altUnit=L,L},x.prototype.get_autoUpdate=function(){return this.autoUpdate},x.prototype.set_autoUpdate=function(L){return this.autoUpdate=L,L},x.prototype.get_beginRange=function(){return this.beginRange},x.prototype.set_beginRange=function(L){return this.beginRange=L,L},x.prototype.get_cartesianCustomScale=function(){return this.cartesianCustomScale},x.prototype.set_cartesianCustomScale=function(L){return this.cartesianCustomScale=L,L},x.prototype.get_cartesianScale=function(){return this.cartesianScale},x.prototype.set_cartesianScale=function(L){return this.cartesianScale=L,L},x.prototype.get_colorMapColumn=function(){return this.colorMapColumn},x.prototype.set_colorMapColumn=function(L){return this.colorMapColumn=L,L},x.prototype.get_coordinatesType=function(){return this.coordinatesType},x.prototype.set_coordinatesType=function(L){return this.coordinatesType=L,L},x.prototype.get_dataSourceUrl=function(){return this.dataSourceUrl},x.prototype.set_dataSourceUrl=function(L){return this.dataSourceUrl=L,L},x.prototype.get_decay=function(){return this.decay},x.prototype.set_decay=function(L){return this.decay=L,L},x.prototype.get_dynamicData=function(){return this.dynamicData},x.prototype.set_dynamicData=function(L){return this.dynamicData=L,L},x.prototype.get_endDateColumn=function(){return this.endDateColumn},x.prototype.set_endDateColumn=function(L){return this.endDateColumn=L,L},x.prototype.get_endRange=function(){return this.endRange},x.prototype.set_endRange=function(L){return this.endRange=L,L},x.prototype.get_hyperlinkColumn=function(){return this.hyperlinkColumn},x.prototype.set_hyperlinkColumn=function(L){return this.hyperlinkColumn=L,L},x.prototype.get_hyperlinkFormat=function(){return this.hyperlinkFormat},x.prototype.set_hyperlinkFormat=function(L){return this.hyperlinkFormat=L,L},x.prototype.get_latColumn=function(){return this.latColumn},x.prototype.set_latColumn=function(L){return this.latColumn=L,L},x.prototype.get_lngColumn=function(){return this.lngColumn},x.prototype.set_lngColumn=function(L){return this.lngColumn=L,L},x.prototype.get_markerColumn=function(){return this.markerColumn},x.prototype.set_markerColumn=function(L){return this.markerColumn=L,L},x.prototype.get_markerIndex=function(){return this.markerIndex},x.prototype.set_markerIndex=function(L){return this.markerIndex=L,L},x.prototype.get_markerScale=function(){return this.markerScale},x.prototype.set_markerScale=function(L){return this.markerScale=L,L},x.prototype.get_nameColumn=function(){return this.nameColumn},x.prototype.set_nameColumn=function(L){return this.nameColumn=L,L},x.prototype.get_plotType=function(){return this.plotType},x.prototype.set_plotType=function(L){return this.plotType=L,L},x.prototype.get_pointScaleType=function(){return this.pointScaleType},x.prototype.set_pointScaleType=function(L){return this.pointScaleType=L,L},x.prototype.get_raUnits=function(){return this.raUnits},x.prototype.set_raUnits=function(L){return this.raUnits=L,L},x.prototype.get_scaleFactor=function(){return this.scaleFactor},x.prototype.set_scaleFactor=function(L){return this.scaleFactor=L,L},x.prototype.get_showFarSide=function(){return this.showFarSide},x.prototype.set_showFarSide=function(L){return this.showFarSide=L,L},x.prototype.get_sizeColumn=function(){return this.sizeColumn},x.prototype.set_sizeColumn=function(L){return this.sizeColumn=L,L},x.prototype.get_startDateColumn=function(){return this.startDateColumn},x.prototype.set_startDateColumn=function(L){return this.startDateColumn=L,L},x.prototype.get_timeSeries=function(){return this.timeSeries},x.prototype.set_timeSeries=function(L){return this.timeSeries=L,L},x.prototype.get_xAxisColumn=function(){return this.xAxisColumn},x.prototype.set_xAxisColumn=function(L){return this.xAxisColumn=L,L},x.prototype.get_xAxisReverse=function(){return this.xAxisReverse},x.prototype.set_xAxisReverse=function(L){return this.xAxisReverse=L,L},x.prototype.get_yAxisColumn=function(){return this.yAxisColumn},x.prototype.set_yAxisColumn=function(L){return this.yAxisColumn=L,L},x.prototype.get_yAxisReverse=function(){return this.yAxisReverse},x.prototype.set_yAxisReverse=function(L){return this.yAxisReverse=L,L},x.prototype.get_zAxisColumn=function(){return this.zAxisColumn},x.prototype.set_zAxisColumn=function(L){return this.zAxisColumn=L,L},x.prototype.get_zAxisReverse=function(){return this.zAxisReverse},x.prototype.set_zAxisReverse=function(L){return this.zAxisReverse=L,L},x})(zr);var On=function(){function y(x,L,H){this.payload=x,this.resolve=L,this.reject=H}return y}(),Xa=function(){function y(x){x===void 0&&(x={});var L=this;this.readyPromises=[],this.readyFired=!1,this.arrivePromises=[],this.arriveSeqnum=0,this.collectionLoadedPromises=[],this.collectionRequests=new Map,this.tourReadyPromises=[],this.tourReadySeqnum=0,this.tourEndedCallback=null;var H=new _t.WWTControlBuilder(x.elId||"wwt");if(x.startInternalRenderLoop!==void 0&&H.startRenderLoop(x.startInternalRenderLoop),x.freestandingAssetBaseurl!==void 0&&H.freestandingMode(x.freestandingAssetBaseurl),x.startLatDeg!==void 0&&x.startLngDeg!==void 0){var ie=x.startZoomDeg||360;H.initialView(x.startLatDeg,x.startLngDeg,ie)}x.startMode!==void 0&&H.initialMode(x.startMode),this.si=H.create(),this.ctl=_t.WWTControl.singleton,this.lm=_t.LayerManager,this.stc=_t.SpaceTimeController,this.applySetting(["showConstellationBoundries",!1]),this.applySetting(["showConstellationFigures",!1]),this.applySetting(["showConstellationSelection",!1]),this.applySetting(["showCrosshairs",!1]),this.si.add_ready(function(te){var be,Ie;try{for(var xt=ai(L.readyPromises),Ye=xt.next();!Ye.done;Ye=xt.next()){var Dt=Ye.value;Dt.resolve()}}catch(wt){be={error:wt}}finally{try{Ye&&!Ye.done&&(Ie=xt.return)&&Ie.call(xt)}finally{if(be)throw be.error}}L.readyFired=!0,L.readyPromises=[]}),this.si.add_arrived(function(te,be){var Ie,xt;try{for(var Ye=ai(L.arrivePromises),Dt=Ye.next();!Dt.done;Dt=Ye.next()){var wt=Dt.value;wt.payload<L.arriveSeqnum?wt.reject("superseded"):wt.resolve()}}catch(mr){Ie={error:mr}}finally{try{Dt&&!Dt.done&&(xt=Ye.return)&&xt.call(Ye)}finally{if(Ie)throw Ie.error}}L.arrivePromises=[]}),this.si.add_tourReady(function(te){var be,Ie;try{for(var xt=ai(L.tourReadyPromises),Ye=xt.next();!Ye.done;Ye=xt.next()){var Dt=Ye.value;Dt.payload<L.tourReadySeqnum?Dt.reject("superseded"):Dt.resolve()}}catch(wt){be={error:wt}}finally{try{Ye&&!Ye.done&&(Ie=xt.return)&&Ie.call(xt)}finally{if(be)throw be.error}}L.tourReadyPromises=[]}),_t.TourPlayer.add_tourEnded(function(te){var be=L.getActiveTourPlayer();be!==null&&L.tourEndedCallback!==null&&L.tourEndedCallback(be)})}return y.prototype.waitForReady=function(){return Tt(this,void 0,void 0,function(){var x=this;return ni(this,function(L){return[2,new Promise(function(H,ie){x.readyFired?H():x.readyPromises.push(new On(null,H,ie))})]})})},y.prototype.makeArrivePromise=function(x){var L,H,ie=this;this.arriveSeqnum+=1;var te=this.arriveSeqnum;try{for(var be=ai(this.arrivePromises),Ie=be.next();!Ie.done;Ie=be.next()){var xt=Ie.value;xt.reject("superseded")}}catch(Ye){L={error:Ye}}finally{try{Ie&&!Ie.done&&(H=be.return)&&H.call(be)}finally{if(L)throw L.error}}return this.arrivePromises=[],new Promise(function(Ye,Dt){ie.arriveSeqnum>te?Dt("superseded"):x?Ye():ie.arrivePromises.push(new On(te,Ye,Dt))})},y.prototype.gotoRADecZoom=function(x,L,H,ie,te){return Tt(this,void 0,void 0,function(){return ni(this,function(be){return this.ctl.gotoRADecZoom(x*Ur,L*xr,H,ie,te),[2,this.makeArrivePromise(ie)]})})},y.prototype.timeToRADecZoom=function(x,L,H,ie){var te=this.ctl.timeToRADecZoom(x*Ur,L*xr,H,ie);return te},y.prototype.gotoTarget=function(x){return Tt(this,void 0,void 0,function(){return ni(this,function(L){return this.ctl.gotoTarget(x.place,x.noZoom,x.instant,x.trackObject),[2,this.makeArrivePromise(x.instant)]})})},y.prototype.addImagesetToRepository=function(x){return _t.WWTControl.addImageSetToRepository(x)},y.prototype.loadImageCollection=function(x,L){return Tt(this,void 0,void 0,function(){var H,ie,te=this;return ni(this,function(be){return H=this.collectionRequests.get(x),H!=null?[2,Promise.resolve(H)]:(H===void 0&&(this.collectionRequests.set(x,null),ie={f:null},L===void 0&&(L=!1),ie.f=_t.Wtml.getWtmlFile(x,function(){var Ie=ie.f;te.collectionRequests.set(x,Ie),te.collectionLoadedPromises=te.collectionLoadedPromises.filter(function(xt){return xt.payload==x?(xt.resolve(Ie),!1):!0})},L)),[2,new Promise(function(Ie,xt){var Ye=te.collectionRequests.get(x);Ye!=null?Ie(Ye):te.collectionLoadedPromises.push(new On(x,Ie,xt))})])})})},y.prototype.addImageSetLayer=function(x){return Tt(this,void 0,void 0,function(){var L=this;return ni(this,function(H){return[2,new Promise(function(ie,te){L.si.addImageSetLayer(x.url,x.mode,x.name,x.goto,function(be){ie(be)})})]})})},y.prototype.setImageSetLayerOrder=function(x){this.si.setImageSetLayerOrder(x.id,x.order)},y.prototype.stretchFitsLayer=function(x){var L=this.lm.get_layerList()[x.id];if(L&&L instanceof _t.ImageSetLayer){L.setImageScalePhysical(x.stretch,x.vmin,x.vmax);var H=L.getFitsImage();H!==null&&(L.get_imageSet().get_fitsProperties().transparentBlack=!1)}},y.prototype.setFitsLayerColormap=function(x){var L=this.lm.get_layerList()[x.id];L&&L instanceof _t.ImageSetLayer&&L.set_colorMapperName(x.name)},y.prototype.applyFitsLayerSettings=function(x){var L,H,ie=this.lm.get_layerList()[x.id];if(ie&&ie instanceof _t.ImageSetLayer)try{for(var te=ai(x.settings),be=te.next();!be.done;be=te.next()){var Ie=be.value;Jr(ie,Ie)}}catch(xt){L={error:xt}}finally{try{be&&!be.done&&(H=te.return)&&H.call(te)}finally{if(L)throw L.error}}},y.prototype.updateTableLayer=function(x){var L=this.lm.get_layerList()[x.id];L&&L instanceof _t.SpreadSheetLayer&&L.updateData(x.dataCsv,!0,!0,!0)},y.prototype.applyTableLayerSettings=function(x){var L,H,ie=this.lm.get_layerList()[x.id];if(ie&&ie instanceof _t.SpreadSheetLayer)try{for(var te=ai(x.settings),be=te.next();!be.done;be=te.next()){var Ie=be.value;Vn(ie,Ie)}}catch(xt){L={error:xt}}finally{try{be&&!be.done&&(H=te.return)&&H.call(te)}finally{if(L)throw L.error}}},y.prototype.addCatalogHipsByName=function(x){return Tt(this,void 0,void 0,function(){var L=this;return ni(this,function(H){return[2,new Promise(function(ie,te){var be=L.ctl.getImagesetByName(x.name);be===null?te():L.ctl.renderContext.addCatalogHips(be,function(){ie(be)})})]})})},y.prototype.getCatalogHipsDataInView=function(x){return Tt(this,void 0,void 0,function(){var L=this;return ni(this,function(H){return[2,new Promise(function(ie,te){L.ctl.renderContext.getCatalogHipsDataInView(x.imageset,x.limit,function(be){ie(be)})})]})})},y.prototype.applySetting=function(x){var L="set_"+x[0],H=x[1];this.si.settings[L](H)},y.prototype.setBackgroundImageByName=function(x){this.ctl.setBackgroundImageByName(x)},y.prototype.setForegroundImageByName=function(x){this.ctl.setForegroundImageByName(x)},y.prototype.setForegroundOpacity=function(x){this.si.setForegroundOpacity(x)},y.prototype.setupForImageset=function(x){var L;x.background?L=x.background:L=this.ctl.getDefaultImageset(x.foreground.get_dataSetType(),x.foreground.get_bandPass());var H;x.foreground.get_levels()>0?H=x.foreground.get_baseTileDegrees():H=x.foreground.get_baseTileDegrees()*x.foreground.get_offsetY()*2;var ie=new _t.Place;ie.set_type(x.foreground.get_dataSetType()),ie.set_backgroundImageset(L),ie.set_studyImageset(x.foreground);var te=!1;switch(x.foreground.get_dataSetType()){case nt.sky:H==180?te=!0:(ie.set_RA(x.foreground.get_centerX()*Vr),ie.set_dec(x.foreground.get_centerY()),ie.set_zoomLevel(H*6));break;case nt.earth:case nt.planet:ie.set_zoomLevel(120),H!=180&&(ie.set_lng(x.foreground.get_centerX()),ie.set_lat(x.foreground.get_centerY()));break;default:ie.set_zoomLevel(360);break}this.ctl.renderContext.set_backgroundImageset(L),this.ctl.gotoTarget(ie,te,!0,!0)},y.prototype.getActiveTourPlayer=function(){return this.ctl.uiController===null?null:this.ctl.uiController instanceof _t.TourPlayer?this.ctl.uiController:null},y.prototype.getIsTourPlaying=function(x){return _t.TourPlayer.get_playing()},y.prototype.loadTour=function(x){return Tt(this,void 0,void 0,function(){var L,H,ie,te,be,Ie,xt=this;return ni(this,function(Ye){this.ctl.loadTour(x),this.tourReadySeqnum+=1,L=this.tourReadySeqnum;try{for(H=ai(this.tourReadyPromises),ie=H.next();!ie.done;ie=H.next())te=ie.value,te.reject("superseded")}catch(Dt){be={error:Dt}}finally{try{ie&&!ie.done&&(Ie=H.return)&&Ie.call(H)}finally{if(be)throw be.error}}return this.tourReadyPromises=[],[2,new Promise(function(Dt,wt){xt.tourReadySeqnum>L?wt("superseded"):xt.tourReadyPromises.push(new On(L,Dt,wt))})]})})},y.prototype.loadAndPlayTour=function(x){return Tt(this,void 0,void 0,function(){var L,H,ie,te,be,Ie,xt=this;return ni(this,function(Ye){this.ctl.playTour(x),this.tourReadySeqnum+=1,L=this.tourReadySeqnum;try{for(H=ai(this.tourReadyPromises),ie=H.next();!ie.done;ie=H.next())te=ie.value,te.reject("superseded")}catch(Dt){be={error:Dt}}finally{try{ie&&!ie.done&&(Ie=H.return)&&Ie.call(H)}finally{if(be)throw be.error}}return this.tourReadyPromises=[],[2,new Promise(function(Dt,wt){xt.tourReadySeqnum>L?wt("superseded"):xt.tourReadyPromises.push(new On(L,Dt,wt))})]})})},y.prototype.getEffectiveTourTimecode=function(){var x=this.getActiveTourPlayer();if(x===null)return 0;var L=x.get_tour();if(L===null)return 0;var H=L.get_currentTourstopIndex();if(H<0)return 0;var ie=L.elapsedTimeTillTourstop(H),te=L.get_tourStops()[H],be=te.get_tweenPosition()*te.get_duration()*.001,Ie=ie+be;if(Ie<0)return 0;var xt=L.get_runTime()*.001;return Ie>xt?xt:Ie},y.prototype.seekToTourTimecode=function(x){var L=this.getActiveTourPlayer();if(L!==null){var H=L.get_tour();if(H!==null){for(var ie=H.get_tourStops(),te=ie.length-1,be=0;be<ie.length;be++){var Ie=H.elapsedTimeTillTourstop(be);if(Ie>=x){te=be-1;break}}te<0&&(te=0),L.playFromTourstop(ie[te])}}},y.prototype.captureFrame=function(x){var L=this;return new Promise(function(H,ie){L.ctl.captureFrame(function(te){return H(te)},x.width,x.height,x.format)})},y.prototype.captureVideo=function(x){var L=this.ctl,H=new ReadableStream({start:function(ie){function te(){var be=0;L.captureVideo(function(Ie){be++,ie.enqueue(Ie),be>=x.totalFrames&&ie.close()},x.width,x.height,x.framesPerSecond,x.totalFrames,x.format)}return te()}});return H},y}(),ps=function(){function y(){this.inst=null,this.onLinkedCallbacks=[]}return y.prototype.link=function(x){var L,H;if(this.inst!==null)throw new Error("must unlink WWT Pinia global state before relinking");this.inst=x;try{for(var ie=ai(this.onLinkedCallbacks),te=ie.next();!te.done;te=ie.next()){var be=te.value;be()}}catch(Ie){L={error:Ie}}finally{try{te&&!te.done&&(H=ie.return)&&H.call(ie)}finally{if(L)throw L.error}}this.onLinkedCallbacks=[]},y.prototype.unlink=function(){this.inst=null},y}(),ci=function(){function y(x,L,H,ie,te,be){be===void 0&&(be=null),this.url=x,this.name=L,this.type=H,this.description=ie,this.extension=te,this.id=be}return y.fromImageset=function(x){var L,H;return new y(x.get_url(),x.get_name(),x.get_dataSetType(),x.get_creditsText(),x.get_extension(),(H=(L=x.get_hipsProperties())===null||L===void 0?void 0:L.get_catalogSpreadSheetLayer().id.toString())!==null&&H!==void 0?H:null)},y}(),vs=function(){function y(x,L,H){this.id=x,this.referenceFrame=L,this.name=H??x}return y.prototype.setName=function(x){this.name=x},y}(),Sa=function(){function y(x){this.guidText=x.id.toString(),this.settings=new _r(x);var L=x.get_imageSet().get_fitsProperties();this.scaleType=L.scaleType,this.vmin=L.lowerCut,this.vmax=L.upperCut,this.colormapName=L.colorMapName}return y.prototype.getGuid=function(){return this.guidText},y}();function Ln(y){if(y.inst===null)throw new Error("cannot get activeLayersList without linking to WWTInstance");var x=[];function L(ie){var te,be,Ie,xt;try{for(var Ye=ai(ie.layers),Dt=Ye.next();!Dt.done;Dt=Ye.next()){var wt=Dt.value;x.push(wt.id.toString())}}catch(Or){te={error:Or}}finally{try{Dt&&!Dt.done&&(be=Ye.return)&&be.call(Ye)}finally{if(te)throw te.error}}try{for(var mr=ai(Object.entries(ie.childMaps)),Ce=mr.next();!Ce.done;Ce=mr.next()){var Hr=Zi(Ce.value,2),pt=Hr[0],la=Hr[1];L(la)}}catch(Or){Ie={error:Or}}finally{try{Ce&&!Ce.done&&(xt=mr.return)&&xt.call(mr)}finally{if(Ie)throw Ie.error}}}var H=y.inst.lm.get_allMaps()[y.inst.ctl.getCurrentReferenceFrame()];return H&&L(H),x}function Qi(){return _t.WWTControl.getImageSets().map(ci.fromImageset)}var Un=We("wwt-engine",{state:function(){return{activeLayers:[],availableImagesets:[],backgroundImageset:null,clockDiscontinuities:0,clockRate:1,currentTime:new Date,decRad:0,foregroundImageset:null,foregroundOpacity:100,imagesetLayers:{},isTourPlayerActive:!1,isTourPlaying:!1,raRad:0,renderType:nt.sky,rollRad:0,spreadSheetLayers:{},timeAtStartup:Date.now(),tourCompletions:0,tourRunTime:null,tourStopStartTimes:[],tourTimecode:0,showWebGl2Warning:!1,zoomDeg:0}},getters:{lookupImageset:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot lookupImageset without linking to WWTInstance");return x.$wwt.inst.ctl.getImagesetByName(L)}},findRADecForScreenPoint:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot findRADecForScreenPoint without linking to WWTInstance");var H=x.$wwt.inst.ctl.getCoordinatesForScreenPoint(L.x,L.y);return{ra:(15*H.x+720)%360,dec:H.y}}},findScreenPointForRADec:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot findScreenPointForRADec without linking to WWTInstance");return x.$wwt.inst.ctl.getScreenPointForCoordinates(L.ra/15,L.dec)}},imagesetStateForLayer:function(y){return function(x){return y.imagesetLayers[x]||null}},activeImagesetLayerStates:function(){var y,x,L=[];try{for(var H=ai(this.activeLayers),ie=H.next();!ie.done;ie=H.next()){var te=ie.value,be=this.imagesetLayers[te];be&&L.push(be)}}catch(Ie){y={error:Ie}}finally{try{ie&&!ie.done&&(x=H.return)&&x.call(H)}finally{if(y)throw y.error}}return L},catalogLayerKey:function(y){return function(x){var L;return(L=x.id)!==null&&L!==void 0?L:""}},imagesetForLayer:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot get imagesetForLayer without linking to WWTInstance");var H=x.$wwt.inst.lm.get_layerList()[L];return H!==null&&H instanceof _t.ImageSetLayer?H.get_imageSet():null}},imagesetLayerById:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot get imagesetLayerById without linking to WWTInstance");var H=x.layerById(L);return H!==null&&H instanceof _t.ImageSetLayer?H:null}},layerForHipsCatalog:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot get layerForHipsCatalog without linking to WWTInstance");var H=_t.Guid.createFrom(L).toString();return x.spreadSheetLayerById(H)}},layerById:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot get layerById without linking to WWTInstance");return x.$wwt.inst.lm.get_layerList()[L]}},spreadsheetStateForHipsCatalog:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot get spreadsheetStateForHipsCatalog without linking to WWTInstance");var H=_t.Guid.createFrom(L).toString();return y.spreadSheetLayers[H]||null}},spreadSheetLayerById:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot get spreadsheetLayerById without linking to WWTInstance");var H=x.layerById(L);return H!==null&&H instanceof _t.SpreadSheetLayer?H:null}},spreadsheetStateById:function(y){return function(x){return y.spreadSheetLayers[x]||null}},spreadSheetLayer:function(y){var x=this;return function(L){if(x.$wwt.inst===null)throw new Error("cannot get spreadSheetLayer without linking to WWTInstance");var H=x.catalogLayerKey(L);return x.spreadSheetLayerById(H)}},spreadsheetState:function(y){var x=this;return function(L){var H=x.catalogLayerKey(L);return y.spreadSheetLayers[H]||null}}},actions:{internalLinkToInstance:function(y){this.$wwt.link(y)},internalUnlinkFromInstance:function(){this.$wwt.unlink()},internalUpdate:function(){if(this.$wwt.inst===null)throw new Error("cannot internalUpdate without linking to WWTInstance");var y=this.$wwt.inst,x=y.si.getRA()*$i;this.raRad!=x&&(this.raRad=x);var L=y.si.getDec()*_n;this.decRad!=L&&(this.decRad=L);var H=y.ctl.renderContext.viewCamera.zoom;this.zoomDeg!=H&&(this.zoomDeg=H);var ie=y.ctl.renderContext.viewCamera.rotation;this.rollRad!=ie&&(this.rollRad=ie);var te=y.ctl.renderContext.get_backgroundImageset()||null;this.backgroundImageset!=te&&(this.backgroundImageset=te);var be=y.stc.get_now();this.currentTime!=be&&(this.currentTime=be);var Ie=y.ctl.renderContext.get_foregroundImageset()||null;this.foregroundImageset!=Ie&&(this.foregroundImageset=Ie),this.foregroundOpacity!=y.ctl.renderContext.viewCamera.opacity&&(this.foregroundOpacity=y.ctl.renderContext.viewCamera.opacity),this.renderType!=y.ctl.renderType&&(this.renderType=y.ctl.renderType);var xt=y.getActiveTourPlayer();this.tourTimecode=y.getEffectiveTourTimecode(),xt!==null?(this.isTourPlayerActive=!0,this.isTourPlaying=y.getIsTourPlaying(xt)):(this.isTourPlayerActive=!1,this.isTourPlaying=!1);var Ye=!y.si.isUsingWebGl2()&&Date.now()-this.timeAtStartup<15e3;this.showWebGl2Warning!=Ye&&(this.showWebGl2Warning=Ye)},internalIncrementTourCompletions:function(){this.tourCompletions+=1},applySetting:function(y){if(this.$wwt.inst===null)throw new Error("cannot applySetting without linking to WWTInstance");this.$wwt.inst.applySetting(y)},setBackgroundImageByName:function(y){if(this.$wwt.inst===null)throw new Error("cannot setBackgroundImageByName without linking to WWTInstance");this.$wwt.inst.setBackgroundImageByName(y)},setForegroundImageByName:function(y){if(this.$wwt.inst===null)throw new Error("cannot setForegroundImageByName without linking to WWTInstance");this.$wwt.inst.setForegroundImageByName(y)},setForegroundOpacity:function(y){if(this.$wwt.inst===null)throw new Error("cannot setForegroundOpacity without linking to WWTInstance");this.$wwt.inst.setForegroundOpacity(y),this.foregroundOpacity=y},setupForImageset:function(y){if(this.$wwt.inst===null)throw new Error("cannot setupForImageset without linking to WWTInstance");this.$wwt.inst.setupForImageset(y)},zoom:function(y){if(this.$wwt.inst===null)throw new Error("cannot zoom without linking to WWTInstance");this.$wwt.inst.ctl.zoom(y)},move:function(y){if(this.$wwt.inst===null)throw new Error("cannot move without linking to WWTInstance");this.$wwt.inst.ctl.move(y.x,y.y)},tilt:function(y){if(this.$wwt.inst===null)throw new Error("cannot tilt without linking to WWTInstance");this.$wwt.inst.ctl._tilt(y.x,y.y)},setTime:function(y){if(this.$wwt.inst===null)throw new Error("cannot setTime without linking to WWTInstance");this.$wwt.inst.stc.set_now(y),this.clockDiscontinuities+=1},setClockRate:function(y){if(this.$wwt.inst===null)throw new Error("cannot setClockRate without linking to WWTInstance");this.$wwt.inst.stc.get_timeRate()!=y&&(this.$wwt.inst.stc.set_timeRate(y),this.clockRate=y,this.clockDiscontinuities+=1)},setClockSync:function(y){if(this.$wwt.inst===null)throw new Error("cannot setClockSync without linking to WWTInstance");this.$wwt.inst.stc.get_syncToClock()!=y&&(this.$wwt.inst.stc.set_syncToClock(y),y?this.clockRate=this.$wwt.inst.stc.get_timeRate():this.clockRate=0,this.clockDiscontinuities+=1)},startTour:function(){if(this.$wwt.inst===null)throw new Error("cannot start tour without linking to WWTInstance");var y=this.$wwt.inst.getActiveTourPlayer();if(y===null)throw new Error("no tour to start");y.play()},toggleTourPlayPauseState:function(){if(this.$wwt.inst===null)throw new Error("cannot play/pause tour without linking to WWTInstance");var y=this.$wwt.inst.getActiveTourPlayer();if(y===null)throw new Error("no tour to play/pause");y.pauseTour()},setTourPlayerLeaveSettingsWhenStopped:function(y){if(this.$wwt.inst===null)throw new Error("cannot setTourPlayerLeaveSettingsWhenStopped without linking to WWTInstance");var x=this.$wwt.inst.getActiveTourPlayer();if(x===null)throw new Error("no tour player to control");x.set_leaveSettingsWhenStopped(y)},seekToTourTimecode:function(y){if(this.$wwt.inst===null)throw new Error("cannot seekToTourTimecode without linking to WWTInstance");this.$wwt.inst.seekToTourTimecode(y)},viewAsTourXml:function(y){return Tt(this,void 0,void 0,function(){var x,L,H,ie,te;return ni(this,function(be){return _t.WWTControl.singleton.createTour(y||""),x=_t.WWTControl.singleton.tourEdit,x.addSlide(!1),L=x.get_tour(),L===null?[2,Promise.resolve(null)]:(H=L.saveToBlob(),ie=new FileReader,ie.readAsText(H),te="",[2,new Promise(function(Ie,xt){ie.onloadend=function(){te+=ie.result,Ie(te)}})])})})},waitForReady:function(){return Tt(this,void 0,void 0,function(){var y=this;return ni(this,function(x){return this.$wwt.inst!==null?[2,this.$wwt.inst.waitForReady()]:[2,new Promise(function(L,H){var ie=function(){y.$wwt.inst.waitForReady().then(L)};y.$wwt.inst!==null?ie():y.$wwt.onLinkedCallbacks.push(ie)})]})})},gotoRADecZoom:function(y){var x=y.raRad,L=y.decRad,H=y.zoomDeg,ie=y.instant,te=y.rollRad;return Tt(this,void 0,void 0,function(){return ni(this,function(be){if(this.$wwt.inst===null)throw new Error("cannot gotoRADecZoom without linking to WWTInstance");return[2,this.$wwt.inst.gotoRADecZoom(x,L,H,ie,te)]})})},timeToRADecZoom:function(y){var x=y.raRad,L=y.decRad,H=y.zoomDeg,ie=y.rollRad;if(this.$wwt.inst===null)throw new Error("cannot get timeToRADecZoom without linking to WWTInstance");return this.$wwt.inst.timeToRADecZoom(x,L,H,ie)},gotoTarget:function(y){return Tt(this,void 0,void 0,function(){return ni(this,function(x){if(this.$wwt.inst===null)throw new Error("cannot gotoTarget without linking to WWTInstance");return[2,this.$wwt.inst.gotoTarget(y)]})})},setTrackedObject:function(y){if(this.$wwt.inst===null)throw new Error("cannot setTrackedObject without linking to WWTInstance");this.$wwt.inst.ctl.renderContext.set_solarSystemTrack(y)},loadTour:function(y){var x=y.url,L=y.play;return Tt(this,void 0,void 0,function(){var H,ie,te,be,Ie,xt;return ni(this,function(Ye){switch(Ye.label){case 0:if(this.$wwt.inst===null)throw new Error("cannot loadTour without linking to WWTInstance");return L?[4,this.$wwt.inst.loadAndPlayTour(x)]:[3,2];case 1:return Ye.sent(),[3,4];case 2:return[4,this.$wwt.inst.loadTour(x)];case 3:Ye.sent(),Ye.label=4;case 4:if(H=null,ie=[],te=this.$wwt.inst.getActiveTourPlayer(),te!==null&&(be=te.get_tour(),be!==null))for(H=be.get_runTime()*.001,Ie=be.get_tourStops().length,xt=0;xt<Ie;xt++)ie.push(be.elapsedTimeTillTourstop(xt));return[2,{tourRunTime:H,tourStopStartTimes:ie}]}})})},loadImageCollection:function(y){var x=y.url,L=y.loadChildFolders;return Tt(this,void 0,void 0,function(){var H;return ni(this,function(ie){switch(ie.label){case 0:if(this.$wwt.inst===null)throw new Error("cannot loadImageCollection without linking to WWTInstance");return[4,this.$wwt.inst.loadImageCollection(x,L)];case 1:return H=ie.sent(),this.availableImagesets=Qi(),[2,H]}})})},addImagesetToRepository:function(y){if(this.$wwt.inst===null)throw new Error("cannot addImagesetToRepository without linking to WWTInstance");return this.$wwt.inst.addImagesetToRepository(y)},deleteLayer:function(y){if(this.$wwt.inst===null)throw new Error("cannot deleteLayer without linking to WWTInstance");var x="";if(typeof y=="string"){x=y;var L=_t.Guid.fromString(y);this.$wwt.inst.lm.deleteLayerByID(L,!0,!0)}else x=y.toString(),this.$wwt.inst.lm.deleteLayerByID(y,!0,!0);delete this.imagesetLayers[x],delete this.spreadSheetLayers[x],this.activeLayers=Ln(this.$wwt)},addImageSetLayer:function(y){return Tt(this,void 0,void 0,function(){var x,L;return ni(this,function(H){switch(H.label){case 0:if(this.$wwt.inst===null)throw new Error("cannot addImageSetLayer without linking to WWTInstance");return[4,this.$wwt.inst.addImageSetLayer(y)];case 1:return x=H.sent(),L=x.id.toString(),this.imagesetLayers[L]=new Sa(x),this.activeLayers=Ln(this.$wwt),[2,x]}})})},loadFitsLayer:function(y){return Tt(this,void 0,void 0,function(){var x;return ni(this,function(L){if(this.$wwt.inst===null)throw new Error("cannot loadFitsLayer without linking to WWTInstance");return x={url:y.url,mode:"fits",name:y.name,goto:y.gotoTarget},[2,this.$wwt.inst.addImageSetLayer(x)]})})},setImageSetLayerOrder:function(y){if(this.$wwt.inst===null)throw new Error("cannot setImageSetLayerOrder without linking to WWTInstance");this.$wwt.inst.setImageSetLayerOrder(y),this.activeLayers=Ln(this.$wwt)},stretchFitsLayer:function(y){if(this.$wwt.inst===null)throw new Error("cannot stretchFitsLayer without linking to WWTInstance");this.$wwt.inst.stretchFitsLayer(y);var x=this.imagesetLayers[y.id];x&&(x.scaleType=y.stretch,x.vmin=y.vmin,x.vmax=y.vmax)},setFitsLayerColormap:function(y){if(this.$wwt.inst===null)throw new Error("cannot setFitsLayerColormap without linking to WWTInstance");this.$wwt.inst.setFitsLayerColormap(y);var x=this.imagesetLayers[y.id];x&&(x.colormapName=y.name)},applyFitsLayerSettings:function(y){var x,L;if(this.$wwt.inst===null)throw new Error("cannot applyFitsLayerSettings without linking to WWTInstance");this.$wwt.inst.applyFitsLayerSettings(y);var H=this.imagesetLayers[y.id];if(H)try{for(var ie=ai(y.settings),te=ie.next();!te.done;te=ie.next()){var be=te.value;Jr(H.settings,be)}}catch(Ie){x={error:Ie}}finally{try{te&&!te.done&&(L=ie.return)&&L.call(ie)}finally{if(x)throw x.error}}},createTableLayer:function(y){return Tt(this,void 0,void 0,function(){var x,L,H,ie;return ni(this,function(te){switch(te.label){case 0:if(this.$wwt.inst===null)throw new Error("cannot createTableLayer without linking to WWTInstance");return x=this.$wwt.inst.lm.createSpreadsheetLayer(y.referenceFrame,y.name,y.dataCsv),x.set_lngColumn(-1),x.set_latColumn(-1),x.set_altColumn(-1),x.set_sizeColumn(-1),x.set_colorMapColumn(-1),x.set_startDateColumn(-1),x.set_endDateColumn(-1),x.set_xAxisColumn(-1),x.set_yAxisColumn(-1),x.set_zAxisColumn(-1),x.set_altUnit(Br.meters),x.set_referenceFrame(y.referenceFrame),y.referenceFrame=="Sky"&&x.set_astronomical(!0),L=Promise.resolve(x),[4,L];case 1:return H=te.sent(),ie=H.id.toString(),this.spreadSheetLayers[ie]=new Oa(H),this.activeLayers=Ln(this.$wwt),[2,H]}})})},applyTableLayerSettings:function(y){var x,L;if(this.$wwt.inst===null)throw new Error("cannot applyTableLayerSettings without linking to WWTInstance");this.$wwt.inst.applyTableLayerSettings(y);var H=this.spreadSheetLayers[y.id];if(H!==void 0)try{for(var ie=ai(y.settings),te=ie.next();!te.done;te=ie.next()){var be=te.value;Vn(H,be)}}catch(Ie){x={error:Ie}}finally{try{te&&!te.done&&(L=ie.return)&&L.call(ie)}finally{if(x)throw x.error}}},updateTableLayer:function(y){if(this.$wwt.inst===null)throw new Error("cannot updateTableLayer without linking to WWTInstance");this.$wwt.inst.updateTableLayer(y)},addCatalogHipsByName:function(y){return Tt(this,void 0,void 0,function(){var x,L,H,ie,te;return ni(this,function(be){switch(be.label){case 0:if(this.$wwt.inst==null)throw new Error("cannot addCatalogHipsByName without linking to WWTInstance");return[4,this.$wwt.inst.addCatalogHipsByName(y)];case 1:return x=be.sent(),L=x.get_hipsProperties(),L!==null&&(H=L.get_catalogSpreadSheetLayer(),ie=H.id.toString(),this.spreadSheetLayers[ie]=new Oa(H),te=Qi().find(function(Ie){return Ie.name===y.name}),te!==void 0&&(te.id=ie)),this.activeLayers=Ln(this.$wwt),[2,x]}})})},getCatalogHipsDataInView:function(y){if(this.$wwt.inst==null)throw new Error("cannot getCatalogHipsDataInView without linking to WWTInstance");return this.$wwt.inst.getCatalogHipsDataInView(y)},removeCatalogHipsByName:function(y){if(this.$wwt.inst==null)throw new Error("cannot removeCatalogHipsByName without linking to WWTInstance");this.$wwt.inst.ctl.removeCatalogHipsByName(y);var x=_t.Guid.createFrom(y).toString();delete this.spreadSheetLayers[x],this.activeLayers=Ln(this.$wwt)},addAnnotation:function(y){if(this.$wwt.inst===null)throw new Error("cannot addAnnotation without linking to WWTInstance");this.$wwt.inst.si.addAnnotation(y)},removeAnnotation:function(y){if(this.$wwt.inst===null)throw new Error("cannot removeAnnotation without linking to WWTInstance");this.$wwt.inst.si.removeAnnotation(y)},clearAnnotations:function(){if(this.$wwt.inst===null)throw new Error("cannot clearAnnotations without linking to WWTInstance");this.$wwt.inst.si.clearAnnotations()},captureFrame:function(y){if(this.$wwt.inst===null)throw new Error("cannot captureThumbnail without linking to WWTInstance");return this.$wwt.inst.captureFrame(y)},captureVideo:function(y){if(this.$wwt.inst===null)throw new Error("cannot captureVideo without linking to WWTInstance");return this.$wwt.inst.captureVideo(y)}}}),Hn=(0,B.defineComponent)({props:{wwtNamespace:{type:String,default:"wwt",required:!0},wwtFreestandingAssetBaseurl:String},computed:Rt(Rt({},ct(Un,{wwtActiveLayers:"activeLayers",wwtAvailableImagesets:"availableImagesets",wwtBackgroundImageset:"backgroundImageset",wwtCurrentTime:"currentTime",wwtClockDiscontinuities:"clockDiscontinuities",wwtClockRate:"clockRate",wwtDecRad:"decRad",wwtForegroundImageset:"foregroundImageset",wwtForegroundOpacity:"foregroundOpacity",wwtImagesetLayers:"imagesetLayers",wwtIsTourPlayerActive:"isTourPlayerActive",wwtIsTourPlaying:"isTourPlaying",wwtRARad:"raRad",wwtRenderType:"renderType",wwtRollRad:"rollRad",wwtShowWebGl2Warning:"showWebGl2Warning",wwtSpreadSheetLayers:"spreadSheetLayers",wwtTourCompletions:"tourCompletions",wwtTourRunTime:"tourRunTime",wwtTourStopStartTimes:"tourStopStartTimes",wwtTourTimecode:"tourTimecode",wwtZoomDeg:"zoomDeg"})),ct(Un,["activeImagesetLayerStates","findRADecForScreenPoint","findScreenPointForRADec","imagesetForLayer","imagesetStateForLayer","layerForHipsCatalog","lookupImageset","spreadSheetLayerById","spreadSheetLayer","spreadsheetState","spreadsheetStateById","spreadsheetStateForHipsCatalog"])),methods:Rt({},je(Un,["addCatalogHipsByName","createTableLayer","getCatalogHipsDataInView","gotoRADecZoom","timeToRADecZoom","gotoTarget","loadImageCollection","addImagesetToRepository","loadFitsLayer","addImageSetLayer","loadTour","viewAsTourXml","waitForReady","addAnnotation","applyFitsLayerSettings","applyTableLayerSettings","applySetting","captureFrame","captureVideo","clearAnnotations","deleteLayer","removeAnnotation","removeCatalogHipsByName","seekToTourTimecode","setBackgroundImageByName","setClockRate","setClockSync","setFitsLayerColormap","setForegroundImageByName","setForegroundOpacity","setImageSetLayerOrder","setTourPlayerLeaveSettingsWhenStopped","setTime","setTrackedObject","setupForImageset","startTour","stretchFitsLayer","toggleTourPlayPauseState","updateTableLayer","zoom","move","tilt"]))}),ws=["id"];function Ma(y,x,L,H,ie,te){return(0,B.openBlock)(),(0,B.createElementBlock)("div",{id:y.uniqueId,class:"wwtelescope-component"},null,8,ws)}var Ya=0;const Ri=(0,B.defineComponent)({props:{wwtNamespace:{type:String,default:"wwt",required:!0},wwtFreestandingAssetBaseurl:String},data:function(){return{uniqueId:"",wwt:void 0,renderLoopId:void 0}},methods:Rt({},je(Un,["internalIncrementTourCompletions","internalLinkToInstance","internalUnlinkFromInstance","internalUpdate","waitForReady"])),created:function(){var y="wwtcmpt".concat(Ya);Object.defineProperties(this,{uniqueId:{get:function(){return y}}}),Ya+=1},mounted:function(){var y=this;this.wwt=(0,B.markRaw)(new Xa({elId:this.uniqueId,startInternalRenderLoop:!1,startLatDeg:-28.9,startLngDeg:93.6,freestandingAssetBaseurl:this.wwtFreestandingAssetBaseurl})),this.internalLinkToInstance(this.wwt);var x=function(){var L=y.wwt;y.renderLoopId=window.requestAnimationFrame(x),L.ctl.renderOneFrame(),y.internalUpdate()};this.waitForReady().then(function(){(0,B.nextTick)().then(function(){y.renderLoopId=window.requestAnimationFrame(x)})}),this.wwt.tourEndedCallback=function(L){y.internalIncrementTourCompletions()}},unmounted:function(){this.renderLoopId!==void 0&&(window.cancelAnimationFrame(this.renderLoopId),this.renderLoopId=void 0),this.wwt!==void 0&&(this.wwt.tourEndedCallback=null),this.internalUnlinkFromInstance()}});var bs=M(535);const ys=(0,bs.Z)(Ri,[["render",Ma]]);var Fi=pe();Fi.use(function(y){var x=y.store;x.$wwt=new ps})})(),R})())})(index_umd);var index_umdExports=index_umd.exports,srcExports=requireSrc(),extendStatics=function(i,o){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,_){u.__proto__=_}||function(u,_){for(var g in _)Object.prototype.hasOwnProperty.call(_,g)&&(u[g]=_[g])},extendStatics(i,o)};function __extends(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");extendStatics(i,o);function u(){this.constructor=i}i.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}function __values(i){var o=typeof Symbol=="function"&&Symbol.iterator,u=o&&i[o],_=0;if(u)return u.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&_>=i.length&&(i=void 0),{value:i&&i[_++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}var AltTypes;(function(i){i[i.depth=0]="depth",i[i.altitude=1]="altitude",i[i.distance=2]="distance",i[i.seaLevel=3]="seaLevel",i[i.terrain=4]="terrain"})(AltTypes||(AltTypes={}));var AltUnits;(function(i){i[i.meters=1]="meters",i[i.feet=2]="feet",i[i.inches=3]="inches",i[i.miles=4]="miles",i[i.kilometers=5]="kilometers",i[i.astronomicalUnits=6]="astronomicalUnits",i[i.lightYears=7]="lightYears",i[i.parsecs=8]="parsecs",i[i.megaParsecs=9]="megaParsecs",i[i.custom=10]="custom"})(AltUnits||(AltUnits={}));var BandPass;(function(i){i[i.gamma=0]="gamma",i[i.xRay=1]="xRay",i[i.ultraviolet=2]="ultraviolet",i[i.visible=3]="visible",i[i.hydrogenAlpha=4]="hydrogenAlpha",i[i.IR=4]="IR",i[i.microwave=5]="microwave",i[i.radio=6]="radio",i[i.visibleNight=6]="visibleNight"})(BandPass||(BandPass={}));var Classification;(function(i){i[i.star=1]="star",i[i.supernova=2]="supernova",i[i.blackHole=4]="blackHole",i[i.neutronStar=8]="neutronStar",i[i.doubleStar=16]="doubleStar",i[i.multipleStars=32]="multipleStars",i[i.asterism=64]="asterism",i[i.constellation=128]="constellation",i[i.openCluster=256]="openCluster",i[i.globularCluster=512]="globularCluster",i[i.nebulousCluster=1024]="nebulousCluster",i[i.nebula=2048]="nebula",i[i.emissionNebula=4096]="emissionNebula",i[i.planetaryNebula=8192]="planetaryNebula",i[i.reflectionNebula=16384]="reflectionNebula",i[i.darkNebula=32768]="darkNebula",i[i.giantMolecularCloud=65536]="giantMolecularCloud",i[i.supernovaRemnant=131072]="supernovaRemnant",i[i.interstellarDust=262144]="interstellarDust",i[i.quasar=524288]="quasar",i[i.galaxy=1048576]="galaxy",i[i.spiralGalaxy=2097152]="spiralGalaxy",i[i.irregularGalaxy=4194304]="irregularGalaxy",i[i.ellipticalGalaxy=8388608]="ellipticalGalaxy",i[i.knot=16777216]="knot",i[i.plateDefect=33554432]="plateDefect",i[i.clusterOfGalaxies=67108864]="clusterOfGalaxies",i[i.otherNGC=134217728]="otherNGC",i[i.unidentified=268435456]="unidentified",i[i.solarSystem=536870912]="solarSystem",i[i.unfiltered=1073741823]="unfiltered",i[i.stellar=63]="stellar",i[i.stellarGroupings=2032]="stellarGroupings",i[i.nebulae=523264]="nebulae",i[i.galactic=133693440]="galactic",i[i.other=436207616]="other"})(Classification||(Classification={}));var CoordinatesType;(function(i){i[i.spherical=0]="spherical",i[i.rectangular=1]="rectangular",i[i.orbital=2]="orbital"})(CoordinatesType||(CoordinatesType={}));var DataTypes;(function(i){i[i.byteT=0]="byteT",i[i.int16T=1]="int16T",i[i.int32T=2]="int32T",i[i.floatT=3]="floatT",i[i.doubleT=4]="doubleT",i[i.none=5]="none"})(DataTypes||(DataTypes={}));var FadeType;(function(i){i[i.fadeIn=1]="fadeIn",i[i.fadeOut=2]="fadeOut",i[i.both=3]="both",i[i.none=4]="none"})(FadeType||(FadeType={}));var FolderGroup;(function(i){i[i.explorer=0]="explorer",i[i.tour=1]="tour",i[i.search=2]="search",i[i.constellation=3]="constellation",i[i.view=4]="view",i[i.goTo=5]="goTo",i[i.community=6]="community",i[i.context=7]="context",i[i.voTable=8]="voTable",i[i.imageStack=9]="imageStack"})(FolderGroup||(FolderGroup={}));var FolderRefreshType;(function(i){i[i.interval=0]="interval",i[i.conditionalGet=1]="conditionalGet",i[i.viewChange=2]="viewChange"})(FolderRefreshType||(FolderRefreshType={}));var FolderType;(function(i){i[i.earth=0]="earth",i[i.planet=1]="planet",i[i.sky=2]="sky",i[i.panorama=3]="panorama"})(FolderType||(FolderType={}));var ImageSetType;(function(i){i[i.earth=0]="earth",i[i.planet=1]="planet",i[i.sky=2]="sky",i[i.panorama=3]="panorama",i[i.solarSystem=4]="solarSystem",i[i.sandbox=5]="sandbox"})(ImageSetType||(ImageSetType={}));var MarkerScales;(function(i){i[i.screen=0]="screen",i[i.world=1]="world"})(MarkerScales||(MarkerScales={}));var PlotTypes;(function(i){i[i.gaussian=0]="gaussian",i[i.point=1]="point",i[i.circle=2]="circle",i[i.square=3]="square",i[i.pushPin=4]="pushPin",i[i.custom=5]="custom"})(PlotTypes||(PlotTypes={}));var PointScaleTypes;(function(i){i[i.linear=0]="linear",i[i.power=1]="power",i[i.log=2]="log",i[i.constant=3]="constant",i[i.stellarMagnitude=4]="stellarMagnitude"})(PointScaleTypes||(PointScaleTypes={}));var ProjectionType;(function(i){i[i.mercator=0]="mercator",i[i.equirectangular=1]="equirectangular",i[i.tangent=2]="tangent",i[i.tan=2]="tan",i[i.toast=3]="toast",i[i.spherical=4]="spherical",i[i.skyImage=5]="skyImage",i[i.plotted=6]="plotted"})(ProjectionType||(ProjectionType={}));var RAUnits;(function(i){i[i.hours=0]="hours",i[i.degrees=1]="degrees"})(RAUnits||(RAUnits={}));var ReferenceFrames;(function(i){i[i.sky=0]="sky",i[i.ecliptic=1]="ecliptic",i[i.galactic=2]="galactic",i[i.sun=3]="sun",i[i.mercury=4]="mercury",i[i.venus=5]="venus",i[i.earth=6]="earth",i[i.mars=7]="mars",i[i.jupiter=8]="jupiter",i[i.saturn=9]="saturn",i[i.uranus=10]="uranus",i[i.neptune=11]="neptune",i[i.pluto=12]="pluto",i[i.moon=13]="moon",i[i.io=14]="io",i[i.europa=15]="europa",i[i.ganymede=16]="ganymede",i[i.callisto=17]="callisto",i[i.custom=18]="custom",i[i.identity=19]="identity",i[i.sandbox=20]="sandbox"})(ReferenceFrames||(ReferenceFrames={}));var ReferenceFrameTypes;(function(i){i[i.fixedSherical=0]="fixedSherical",i[i.orbital=1]="orbital",i[i.trajectory=2]="trajectory",i[i.synodic=3]="synodic"})(ReferenceFrameTypes||(ReferenceFrameTypes={}));var ScaleTypes;(function(i){i[i.linear=0]="linear",i[i.log=1]="log",i[i.power=2]="power",i[i.squareRoot=3]="squareRoot",i[i.histogramEqualization=4]="histogramEqualization"})(ScaleTypes||(ScaleTypes={}));var SolarSystemObjects;(function(i){i[i.sun=0]="sun",i[i.mercury=1]="mercury",i[i.venus=2]="venus",i[i.mars=3]="mars",i[i.jupiter=4]="jupiter",i[i.saturn=5]="saturn",i[i.uranus=6]="uranus",i[i.neptune=7]="neptune",i[i.pluto=8]="pluto",i[i.moon=9]="moon",i[i.io=10]="io",i[i.europa=11]="europa",i[i.ganymede=12]="ganymede",i[i.callisto=13]="callisto",i[i.ioShadow=14]="ioShadow",i[i.europaShadow=15]="europaShadow",i[i.ganymedeShadow=16]="ganymedeShadow",i[i.callistoShadow=17]="callistoShadow",i[i.sunEclipsed=18]="sunEclipsed",i[i.earth=19]="earth",i[i.custom=20]="custom",i[i.undefined=65536]="undefined"})(SolarSystemObjects||(SolarSystemObjects={}));var layerSettingNames=["astronomical","color","enabled","fadeSpan","name","opacity","opened","referenceFrame","version"];function copyLayerSettings(i,o){var u,_;try{for(var g=__values(layerSettingNames),w=g.next();!w.done;w=g.next()){var M=w.value;o["set_"+M](i["get_"+M]())}}catch(R){u={error:R}}finally{try{w&&!w.done&&(_=g.return)&&_.call(g)}finally{if(u)throw u.error}}}var LayerState=function(){function i(o){copyLayerSettings(o,this)}return i.prototype.get_astronomical=function(){return this.astronomical},i.prototype.set_astronomical=function(o){return this.astronomical=o,o},i.prototype.get_color=function(){return this.color},i.prototype.set_color=function(o){return this.color=o,o},i.prototype.get_enabled=function(){return this.enabled},i.prototype.set_enabled=function(o){return this.enabled=o,o},i.prototype.get_endTime=function(){return this.endTime},i.prototype.set_endTime=function(o){return this.endTime=o,o},i.prototype.get_fadeSpan=function(){return this.fadeSpan},i.prototype.set_fadeSpan=function(o){return this.fadeSpan=o,o},i.prototype.get_fadeType=function(){return this.fadeType},i.prototype.set_fadeType=function(o){return this.fadeType=o,o},i.prototype.get_name=function(){return this.name},i.prototype.set_name=function(o){return this.name=o,o},i.prototype.get_opacity=function(){return this.opacity},i.prototype.set_opacity=function(o){return this.opacity=o,o},i.prototype.get_opened=function(){return this.opened},i.prototype.set_opened=function(o){return this.opened=o,o},i.prototype.get_referenceFrame=function(){return this.referenceFrame},i.prototype.set_referenceFrame=function(o){return this.referenceFrame=o,o},i.prototype.get_startTime=function(){return this.startTime},i.prototype.set_startTime=function(o){return this.startTime=o,o},i.prototype.get_version=function(){return this.version},i.prototype.set_version=function(o){return this.version=o,o},i}(),justImageSetLayerSettingNames=["colorMapperName","overrideDefaultLayer"];layerSettingNames.concat(justImageSetLayerSettingNames);function applyImageSetLayerSetting(i,o){var u="set_"+o[0],_=o[1];i[u](_)}function copyImageSetLayerSettings(i,o){var u,_;copyLayerSettings(i,o);try{for(var g=__values(justImageSetLayerSettingNames),w=g.next();!w.done;w=g.next()){var M=w.value;o["set_"+M](i["get_"+M]())}}catch(R){u={error:R}}finally{try{w&&!w.done&&(_=g.return)&&_.call(g)}finally{if(u)throw u.error}}}(function(i){__extends(o,i);function o(u){var _=i.call(this,u)||this;return copyImageSetLayerSettings(u,_),_}return o.prototype.get_colorMapperName=function(){return this.colorMapperName},o.prototype.set_colorMapperName=function(u){return this.colorMapperName=u,u},o.prototype.get_overrideDefaultLayer=function(){return this.overrideDefaultLayer},o.prototype.set_overrideDefaultLayer=function(u){return this.overrideDefaultLayer=u,u},o})(LayerState);var justSpreadSheetLayerSettingNames=["altColumn","altType","altUnit","barChartBitmask","beginRange","cartesianCustomScale","cartesianScale","colorMapColumn","colorMapperName","coordinatesType","decay","dynamicColor","dynamicData","endDateColumn","endRange","geometryColumn","hyperlinkColumn","hyperlinkFormat","latColumn","lngColumn","markerColumn","markerIndex","markerScale","nameColumn","normalizeColorMap","normalizeColorMapMax","normalizeColorMapMin","normalizeSize","normalizeSizeClip","normalizeSizeMax","normalizeSizeMin","plotType","pointScaleType","raUnits","scaleFactor","showFarSide","sizeColumn","startDateColumn","timeSeries","xAxisColumn","xAxisReverse","yAxisColumn","yAxisReverse","zAxisColumn","zAxisReverse"];layerSettingNames.concat(justSpreadSheetLayerSettingNames);function copySpreadSheetLayerSettings(i,o){var u,_;copyLayerSettings(i,o);try{for(var g=__values(justSpreadSheetLayerSettingNames),w=g.next();!w.done;w=g.next()){var M=w.value;o["set_"+M](i["get_"+M]())}}catch(R){u={error:R}}finally{try{w&&!w.done&&(_=g.return)&&_.call(g)}finally{if(u)throw u.error}}}(function(i){__extends(o,i);function o(u){var _=i.call(this,u)||this;return copySpreadSheetLayerSettings(u,_),_}return o.prototype.get_altColumn=function(){return this.altColumn},o.prototype.set_altColumn=function(u){return this.altColumn=u,u},o.prototype.get_altType=function(){return this.altType},o.prototype.set_altType=function(u){return this.altType=u,u},o.prototype.get_altUnit=function(){return this.altUnit},o.prototype.set_altUnit=function(u){return this.altUnit=u,u},o.prototype.get_barChartBitmask=function(){return this.barChartBitmask},o.prototype.set_barChartBitmask=function(u){return this.barChartBitmask=u,u},o.prototype.get_beginRange=function(){return this.beginRange},o.prototype.set_beginRange=function(u){return this.beginRange=u,u},o.prototype.get_cartesianCustomScale=function(){return this.cartesianCustomScale},o.prototype.set_cartesianCustomScale=function(u){return this.cartesianCustomScale=u,u},o.prototype.get_cartesianScale=function(){return this.cartesianScale},o.prototype.set_cartesianScale=function(u){return this.cartesianScale=u,u},o.prototype.get_colorMapColumn=function(){return this.colorMapColumn},o.prototype.set_colorMapColumn=function(u){return this.colorMapColumn=u,u},o.prototype.get_colorMapperName=function(){return this.colorMapperName},o.prototype.set_colorMapperName=function(u){return this.colorMapperName=u,u},o.prototype.get_coordinatesType=function(){return this.coordinatesType},o.prototype.set_coordinatesType=function(u){return this.coordinatesType=u,u},o.prototype.get_decay=function(){return this.decay},o.prototype.set_decay=function(u){return this.decay=u,u},o.prototype.get_dynamicColor=function(){return this.dynamicColor},o.prototype.set_dynamicColor=function(u){return this.dynamicColor=u,u},o.prototype.get_dynamicData=function(){return this.dynamicData},o.prototype.set_dynamicData=function(u){return this.dynamicData=u,u},o.prototype.get_endDateColumn=function(){return this.endDateColumn},o.prototype.set_endDateColumn=function(u){return this.endDateColumn=u,u},o.prototype.get_endRange=function(){return this.endRange},o.prototype.set_endRange=function(u){return this.endRange=u,u},o.prototype.get_geometryColumn=function(){return this.geometryColumn},o.prototype.set_geometryColumn=function(u){return this.geometryColumn=u,u},o.prototype.get_hyperlinkColumn=function(){return this.hyperlinkColumn},o.prototype.set_hyperlinkColumn=function(u){return this.hyperlinkColumn=u,u},o.prototype.get_hyperlinkFormat=function(){return this.hyperlinkFormat},o.prototype.set_hyperlinkFormat=function(u){return this.hyperlinkFormat=u,u},o.prototype.get_latColumn=function(){return this.latColumn},o.prototype.set_latColumn=function(u){return this.latColumn=u,u},o.prototype.get_lngColumn=function(){return this.lngColumn},o.prototype.set_lngColumn=function(u){return this.lngColumn=u,u},o.prototype.get_markerColumn=function(){return this.markerColumn},o.prototype.set_markerColumn=function(u){return this.markerColumn=u,u},o.prototype.get_markerIndex=function(){return this.markerIndex},o.prototype.set_markerIndex=function(u){return this.markerIndex=u,u},o.prototype.get_markerScale=function(){return this.markerScale},o.prototype.set_markerScale=function(u){return this.markerScale=u,u},o.prototype.get_nameColumn=function(){return this.nameColumn},o.prototype.set_nameColumn=function(u){return this.nameColumn=u,u},o.prototype.get_normalizeColorMap=function(){return this.normalizeColorMap},o.prototype.set_normalizeColorMap=function(u){return this.normalizeColorMap=u,u},o.prototype.get_normalizeColorMapMax=function(){return this.normalizeColorMapMax},o.prototype.set_normalizeColorMapMax=function(u){return this.normalizeColorMapMax=u,u},o.prototype.get_normalizeColorMapMin=function(){return this.normalizeColorMapMin},o.prototype.set_normalizeColorMapMin=function(u){return this.normalizeColorMapMin=u,u},o.prototype.get_normalizeSize=function(){return this.normalizeSize},o.prototype.set_normalizeSize=function(u){return this.normalizeSize=u,u},o.prototype.get_normalizeSizeClip=function(){return this.normalizeSizeClip},o.prototype.set_normalizeSizeClip=function(u){return this.normalizeSizeClip=u,u},o.prototype.get_normalizeSizeMax=function(){return this.normalizeSizeMax},o.prototype.set_normalizeSizeMax=function(u){return this.normalizeSizeMax=u,u},o.prototype.get_normalizeSizeMin=function(){return this.normalizeSizeMin},o.prototype.set_normalizeSizeMin=function(u){return this.normalizeSizeMin=u,u},o.prototype.get_plotType=function(){return this.plotType},o.prototype.set_plotType=function(u){return this.plotType=u,u},o.prototype.get_pointScaleType=function(){return this.pointScaleType},o.prototype.set_pointScaleType=function(u){return this.pointScaleType=u,u},o.prototype.get_raUnits=function(){return this.raUnits},o.prototype.set_raUnits=function(u){return this.raUnits=u,u},o.prototype.get_scaleFactor=function(){return this.scaleFactor},o.prototype.set_scaleFactor=function(u){return this.scaleFactor=u,u},o.prototype.get_showFarSide=function(){return this.showFarSide},o.prototype.set_showFarSide=function(u){return this.showFarSide=u,u},o.prototype.get_sizeColumn=function(){return this.sizeColumn},o.prototype.set_sizeColumn=function(u){return this.sizeColumn=u,u},o.prototype.get_startDateColumn=function(){return this.startDateColumn},o.prototype.set_startDateColumn=function(u){return this.startDateColumn=u,u},o.prototype.get_timeSeries=function(){return this.timeSeries},o.prototype.set_timeSeries=function(u){return this.timeSeries=u,u},o.prototype.get_xAxisColumn=function(){return this.xAxisColumn},o.prototype.set_xAxisColumn=function(u){return this.xAxisColumn=u,u},o.prototype.get_xAxisReverse=function(){return this.xAxisReverse},o.prototype.set_xAxisReverse=function(u){return this.xAxisReverse=u,u},o.prototype.get_yAxisColumn=function(){return this.yAxisColumn},o.prototype.set_yAxisColumn=function(u){return this.yAxisColumn=u,u},o.prototype.get_yAxisReverse=function(){return this.yAxisReverse},o.prototype.set_yAxisReverse=function(u){return this.yAxisReverse=u,u},o.prototype.get_zAxisColumn=function(){return this.zAxisColumn},o.prototype.set_zAxisColumn=function(u){return this.zAxisColumn=u,u},o.prototype.get_zAxisReverse=function(){return this.zAxisReverse},o.prototype.set_zAxisReverse=function(u){return this.zAxisReverse=u,u},o})(LayerState);var annotationSettingNames=["id","label","opacity","showHoverLabel","tag"];function copyAnnotationSettings(i,o){var u,_;try{for(var g=__values(annotationSettingNames),w=g.next();!w.done;w=g.next()){var M=w.value;o["set_"+M](i["get_"+M]())}}catch(R){u={error:R}}finally{try{w&&!w.done&&(_=g.return)&&_.call(g)}finally{if(u)throw u.error}}}var AnnotationState=function(){function i(o){copyAnnotationSettings(o,this)}return i.prototype.get_id=function(){return this.id},i.prototype.set_id=function(o){return this.id=o,o},i.prototype.get_label=function(){return this.label},i.prototype.set_label=function(o){return this.label=o,o},i.prototype.get_opacity=function(){return this.opacity},i.prototype.set_opacity=function(o){return this.opacity=o,o},i.prototype.get_showHoverLabel=function(){return this.showHoverLabel},i.prototype.set_showHoverLabel=function(o){return this.showHoverLabel=o,o},i.prototype.get_tag=function(){return this.tag},i.prototype.set_tag=function(o){return this.tag=o,o},i}(),justCircleAnnotationSettingNames=["fill","fillColor","lineColor","lineWidth","radius","skyRelative"];annotationSettingNames.concat(justCircleAnnotationSettingNames);function copyCircleAnnotationSettings(i,o){var u,_;copyAnnotationSettings(i,o);try{for(var g=__values(justCircleAnnotationSettingNames),w=g.next();!w.done;w=g.next()){var M=w.value;o["set_"+M](i["get_"+M]())}}catch(R){u={error:R}}finally{try{w&&!w.done&&(_=g.return)&&_.call(g)}finally{if(u)throw u.error}}}(function(i){__extends(o,i);function o(u){var _=i.call(this,u)||this;return copyCircleAnnotationSettings(u,_),_}return o.prototype.get_fill=function(){return this.fill},o.prototype.set_fill=function(u){return this.fill=u,u},o.prototype.get_fillColor=function(){return this.fillColor},o.prototype.set_fillColor=function(u){return this.fillColor=u,u},o.prototype.get_lineColor=function(){return this.lineColor},o.prototype.set_lineColor=function(u){return this.lineColor=u,u},o.prototype.get_lineWidth=function(){return this.lineWidth},o.prototype.set_lineWidth=function(u){return this.lineWidth=u,u},o.prototype.get_radius=function(){return this.radius},o.prototype.set_radius=function(u){return this.radius=u,u},o.prototype.get_skyRelative=function(){return this.skyRelative},o.prototype.set_skyRelative=function(u){return this.skyRelative=u,u},o})(AnnotationState);var justPolyAnnotationSettingNames=["fill","fillColor","lineColor","lineWidth"];annotationSettingNames.concat(justPolyAnnotationSettingNames);function copyPolyAnnotationSettings(i,o){var u,_;copyAnnotationSettings(i,o);try{for(var g=__values(justPolyAnnotationSettingNames),w=g.next();!w.done;w=g.next()){var M=w.value;o["set_"+M](i["get_"+M]())}}catch(R){u={error:R}}finally{try{w&&!w.done&&(_=g.return)&&_.call(g)}finally{if(u)throw u.error}}}(function(i){__extends(o,i);function o(u){var _=i.call(this,u)||this;return copyPolyAnnotationSettings(u,_),_}return o.prototype.get_fill=function(){return this.fill},o.prototype.set_fill=function(u){return this.fill=u,u},o.prototype.get_fillColor=function(){return this.fillColor},o.prototype.set_fillColor=function(u){return this.fillColor=u,u},o.prototype.get_lineColor=function(){return this.lineColor},o.prototype.set_lineColor=function(u){return this.lineColor=u,u},o.prototype.get_lineWidth=function(){return this.lineWidth},o.prototype.set_lineWidth=function(u){return this.lineWidth=u,u},o})(AnnotationState);var justPolyLineAnnotationSettingNames=["lineColor","lineWidth"];annotationSettingNames.concat(justPolyLineAnnotationSettingNames);function copyPolyLineAnnotationSettings(i,o){var u,_;copyAnnotationSettings(i,o);try{for(var g=__values(justPolyLineAnnotationSettingNames),w=g.next();!w.done;w=g.next()){var M=w.value;o["set_"+M](i["get_"+M]())}}catch(R){u={error:R}}finally{try{w&&!w.done&&(_=g.return)&&_.call(g)}finally{if(u)throw u.error}}}(function(i){__extends(o,i);function o(u){var _=i.call(this,u)||this;return copyPolyLineAnnotationSettings(u,_),_}return o.prototype.get_lineColor=function(){return this.lineColor},o.prototype.set_lineColor=function(u){return this.lineColor=u,u},o.prototype.get_lineWidth=function(){return this.lineWidth},o.prototype.set_lineWidth=function(u){return this.lineWidth=u,u},o})(AnnotationState);var justVoTableLayerSettingNames=["altColumn","altType","altUnit","autoUpdate","beginRange","cartesianCustomScale","cartesianScale","colorMapColumn","coordinatesType","dataSourceUrl","decay","dynamicData","endDateColumn","endRange","hyperlinkColumn","hyperlinkFormat","latColumn","lngColumn","markerColumn","markerIndex","markerScale","nameColumn","plotType","pointScaleType","raUnits","scaleFactor","showFarSide","sizeColumn","startDateColumn","timeSeries","xAxisColumn","xAxisReverse","yAxisColumn","yAxisReverse","zAxisColumn","zAxisReverse"];layerSettingNames.concat(justVoTableLayerSettingNames);function copyVoTableLayerSettings(i,o){var u,_;copyLayerSettings(i,o);try{for(var g=__values(justVoTableLayerSettingNames),w=g.next();!w.done;w=g.next()){var M=w.value;o["set_"+M](i["get_"+M]())}}catch(R){u={error:R}}finally{try{w&&!w.done&&(_=g.return)&&_.call(g)}finally{if(u)throw u.error}}}(function(i){__extends(o,i);function o(u){var _=i.call(this,u)||this;return copyVoTableLayerSettings(u,_),_}return o.prototype.get_altColumn=function(){return this.altColumn},o.prototype.set_altColumn=function(u){return this.altColumn=u,u},o.prototype.get_altType=function(){return this.altType},o.prototype.set_altType=function(u){return this.altType=u,u},o.prototype.get_altUnit=function(){return this.altUnit},o.prototype.set_altUnit=function(u){return this.altUnit=u,u},o.prototype.get_autoUpdate=function(){return this.autoUpdate},o.prototype.set_autoUpdate=function(u){return this.autoUpdate=u,u},o.prototype.get_beginRange=function(){return this.beginRange},o.prototype.set_beginRange=function(u){return this.beginRange=u,u},o.prototype.get_cartesianCustomScale=function(){return this.cartesianCustomScale},o.prototype.set_cartesianCustomScale=function(u){return this.cartesianCustomScale=u,u},o.prototype.get_cartesianScale=function(){return this.cartesianScale},o.prototype.set_cartesianScale=function(u){return this.cartesianScale=u,u},o.prototype.get_colorMapColumn=function(){return this.colorMapColumn},o.prototype.set_colorMapColumn=function(u){return this.colorMapColumn=u,u},o.prototype.get_coordinatesType=function(){return this.coordinatesType},o.prototype.set_coordinatesType=function(u){return this.coordinatesType=u,u},o.prototype.get_dataSourceUrl=function(){return this.dataSourceUrl},o.prototype.set_dataSourceUrl=function(u){return this.dataSourceUrl=u,u},o.prototype.get_decay=function(){return this.decay},o.prototype.set_decay=function(u){return this.decay=u,u},o.prototype.get_dynamicData=function(){return this.dynamicData},o.prototype.set_dynamicData=function(u){return this.dynamicData=u,u},o.prototype.get_endDateColumn=function(){return this.endDateColumn},o.prototype.set_endDateColumn=function(u){return this.endDateColumn=u,u},o.prototype.get_endRange=function(){return this.endRange},o.prototype.set_endRange=function(u){return this.endRange=u,u},o.prototype.get_hyperlinkColumn=function(){return this.hyperlinkColumn},o.prototype.set_hyperlinkColumn=function(u){return this.hyperlinkColumn=u,u},o.prototype.get_hyperlinkFormat=function(){return this.hyperlinkFormat},o.prototype.set_hyperlinkFormat=function(u){return this.hyperlinkFormat=u,u},o.prototype.get_latColumn=function(){return this.latColumn},o.prototype.set_latColumn=function(u){return this.latColumn=u,u},o.prototype.get_lngColumn=function(){return this.lngColumn},o.prototype.set_lngColumn=function(u){return this.lngColumn=u,u},o.prototype.get_markerColumn=function(){return this.markerColumn},o.prototype.set_markerColumn=function(u){return this.markerColumn=u,u},o.prototype.get_markerIndex=function(){return this.markerIndex},o.prototype.set_markerIndex=function(u){return this.markerIndex=u,u},o.prototype.get_markerScale=function(){return this.markerScale},o.prototype.set_markerScale=function(u){return this.markerScale=u,u},o.prototype.get_nameColumn=function(){return this.nameColumn},o.prototype.set_nameColumn=function(u){return this.nameColumn=u,u},o.prototype.get_plotType=function(){return this.plotType},o.prototype.set_plotType=function(u){return this.plotType=u,u},o.prototype.get_pointScaleType=function(){return this.pointScaleType},o.prototype.set_pointScaleType=function(u){return this.pointScaleType=u,u},o.prototype.get_raUnits=function(){return this.raUnits},o.prototype.set_raUnits=function(u){return this.raUnits=u,u},o.prototype.get_scaleFactor=function(){return this.scaleFactor},o.prototype.set_scaleFactor=function(u){return this.scaleFactor=u,u},o.prototype.get_showFarSide=function(){return this.showFarSide},o.prototype.set_showFarSide=function(u){return this.showFarSide=u,u},o.prototype.get_sizeColumn=function(){return this.sizeColumn},o.prototype.set_sizeColumn=function(u){return this.sizeColumn=u,u},o.prototype.get_startDateColumn=function(){return this.startDateColumn},o.prototype.set_startDateColumn=function(u){return this.startDateColumn=u,u},o.prototype.get_timeSeries=function(){return this.timeSeries},o.prototype.set_timeSeries=function(u){return this.timeSeries=u,u},o.prototype.get_xAxisColumn=function(){return this.xAxisColumn},o.prototype.set_xAxisColumn=function(u){return this.xAxisColumn=u,u},o.prototype.get_xAxisReverse=function(){return this.xAxisReverse},o.prototype.set_xAxisReverse=function(u){return this.xAxisReverse=u,u},o.prototype.get_yAxisColumn=function(){return this.yAxisColumn},o.prototype.set_yAxisColumn=function(u){return this.yAxisColumn=u,u},o.prototype.get_yAxisReverse=function(){return this.yAxisReverse},o.prototype.set_yAxisReverse=function(u){return this.yAxisReverse=u,u},o.prototype.get_zAxisColumn=function(){return this.zAxisColumn},o.prototype.set_zAxisColumn=function(u){return this.zAxisColumn=u,u},o.prototype.get_zAxisReverse=function(){return this.zAxisReverse},o.prototype.set_zAxisReverse=function(u){return this.zAxisReverse=u,u},o})(LayerState);const _sfc_main=defineComponent$1({extends:index_umdExports.WWTAwareComponent,name:"App",components:{},data(){return{imageURL:"",backupURL:"https://raw.githubusercontent.com/johnarban/wwt_interactives/main/images/m101/NGC5457M101230516055129.png"}},created(){},computed:{wwtControl(){return srcExports.WWTControl.singleton},wwtSettings(){return srcExports.Settings.get_active()}},methods:{async loadWTML(i){this.loadImageCollection({url:i,loadChildFolders:!1}).then(o=>o.get_children()??[]).then(o=>{o.forEach(u=>{if(!(u instanceof srcExports.Place))return;const _=u.get_backgroundImageset()??u.get_studyImageset();if(_==null)return;const g=_.get_name();this.addImageSetLayer({url:_.get_url(),mode:"autodetect",name:g,goto:!0}).then(w=>{console.log(w,u),applyImageSetLayerSetting(w,["opacity",1])})})})},async addUrlToPage(i,o){var g;const u=getWwtURL(i,o),_=document.createElement("a");_.href=u,_.target="_blank",_.innerText="View in WorldWide Telescope",(g=document.getElementById("forLink"))==null||g.appendChild(_),await this.loadWTML(getWtmlURL(i,o))},submitData(i="",o={}){i==""&&(i=this.backupURL,console.log("Using backup URL: "+i)),login("kdsxlqvujbezpvvo").then(u=>submitJob(u,i,o)).then(u=>{const _=u.subid;return console.log(formatSubmissionURL(_)),_}).then(u=>this.waitForJobStart(u)).then(u=>{console.log("Getting job results...");const _=u.jobs[0];if(_==null)throw new Error("Job info is null");return console.log("jobid: "+_),_}).then(u=>this.waitForJobFinish(u)).then(u=>{console.log("Getting calibration..."),getCalibration(u).then(_=>{console.log(getWwtURL(i,_)),this.addUrlToPage(i,_)})}).catch(u=>{console.error(u)})},waitForJobStart(i){return new Promise(o=>{function u(){return getSubmissionStatus(i).then(_=>{_.jobs.length>0&&_.jobs[0]!=null?(console.log("Job started!"),o(_)):(console.log("Waiting for job to start..."),setTimeout(u,1e3))})}u()})},waitForJobFinish(i){return new Promise(o=>{function u(){return getJobStatus(i).then(_=>{if(_.status=="success")console.log("Job complete!"),o(i);else{if(_.status=="failure")throw new Error("Job failed with message: "+_.errormessage);console.log("Waiting for job to complete..."),setTimeout(u,1e3)}})}u()})}}}),App_vue_vue_type_style_index_0_lang="",_export_sfc=(i,o)=>{const u=i.__vccOpts||i;for(const[_,g]of o)u[_]=g;return u},VApp$1="";function propsFactory(i,o){return u=>Object.keys(i).reduce((_,g)=>{const M=typeof i[g]=="object"&&i[g]!=null&&!Array.isArray(i[g])?i[g]:{type:i[g]};return u&&g in u?_[g]={...M,default:u[g]}:_[g]=M,o&&!_[g].source&&(_[g].source=o),_},{})}const makeComponentProps=propsFactory({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component");function getNestedValue(i,o,u){const _=o.length-1;if(_<0)return i===void 0?u:i;for(let g=0;g<_;g++){if(i==null)return u;i=i[o[g]]}return i==null||i[o[_]]===void 0?u:i[o[_]]}function deepEqual(i,o){if(i===o)return!0;if(i instanceof Date&&o instanceof Date&&i.getTime()!==o.getTime()||i!==Object(i)||o!==Object(o))return!1;const u=Object.keys(i);return u.length!==Object.keys(o).length?!1:u.every(_=>deepEqual(i[_],o[_]))}function getObjectValueByPath(i,o,u){return i==null||!o||typeof o!="string"?u:i[o]!==void 0?i[o]:(o=o.replace(/\[(\w+)\]/g,".$1"),o=o.replace(/^\./,""),getNestedValue(i,o.split("."),u))}function createRange(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:i},(u,_)=>o+_)}function convertToUnit(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(i==null||i===""))return isNaN(+i)?String(i):isFinite(+i)?`${Number(i)}${o}`:void 0}function isObject(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}function refElement(i){return i&&"$el"in i?i.$el:i}const keyCodes=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function has(i,o){return o.every(u=>i.hasOwnProperty(u))}function pick(i,o,u){const _=Object.create(null),g=Object.create(null);for(const w in i)o.some(M=>M instanceof RegExp?M.test(w):M===w)&&!(u!=null&&u.some(M=>M===w))?_[w]=i[w]:g[w]=i[w];return[_,g]}function filterInputAttrs(i){return pick(i,["class","style","id",/^data-/])}function wrapInArray(i){return i==null?[]:Array.isArray(i)?i:[i]}function clamp(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(o,Math.min(u,i))}function padEnd(i,o){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return i+u.repeat(Math.max(0,o-i.length))}function chunk(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const u=[];let _=0;for(;_<i.length;)u.push(i.substr(_,o)),_+=o;return u}function mergeDeep(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0;const _={};for(const g in i)_[g]=i[g];for(const g in o){const w=i[g],M=o[g];if(isObject(w)&&isObject(M)){_[g]=mergeDeep(w,M,u);continue}if(Array.isArray(w)&&Array.isArray(M)&&u){_[g]=u(w,M);continue}_[g]=M}return _}function flattenFragments(i){return i.map(o=>o.type===Fragment?flattenFragments(o.children):o).flat()}function toKebabCase(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(toKebabCase.cache.has(i))return toKebabCase.cache.get(i);const o=i.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return toKebabCase.cache.set(i,o),o}toKebabCase.cache=new Map;function findChildrenWithProvide(i,o){if(!o||typeof o!="object")return[];if(Array.isArray(o))return o.map(u=>findChildrenWithProvide(i,u)).flat(1);if(Array.isArray(o.children))return o.children.map(u=>findChildrenWithProvide(i,u)).flat(1);if(o.component){if(Object.getOwnPropertySymbols(o.component.provides).includes(i))return[o.component];if(o.component.subTree)return findChildrenWithProvide(i,o.component.subTree).flat(1)}return[]}function destructComputed(i){const o=reactive({}),u=computed(i);return watchEffect(()=>{for(const _ in u.value)o[_]=u.value[_]},{flush:"sync"}),toRefs(o)}function includes(i,o){return i.includes(o)}const onRE=/^on[^a-z]/,isOn=i=>onRE.test(i),EventProp=()=>[Function,Array];function hasEvent(i,o){return o="on"+capitalize(o),!!(i[o]||i[`${o}Once`]||i[`${o}Capture`]||i[`${o}OnceCapture`]||i[`${o}CaptureOnce`])}function callEvent(i){for(var o=arguments.length,u=new Array(o>1?o-1:0),_=1;_<o;_++)u[_-1]=arguments[_];if(Array.isArray(i))for(const g of i)g(...u);else typeof i=="function"&&i(...u)}const block=["top","bottom"],inline=["start","end","left","right"];function parseAnchor(i,o){let[u,_]=i.split(" ");return _||(_=includes(block,u)?"start":includes(inline,u)?"top":"center"),{side:toPhysical(u,o),align:toPhysical(_,o)}}function toPhysical(i,o){return i==="start"?o?"right":"left":i==="end"?o?"left":"right":i}class Box{constructor(o){let{x:u,y:_,width:g,height:w}=o;this.x=u,this.y=_,this.width=g,this.height=w}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function nullifyTransforms(i){const o=i.getBoundingClientRect(),u=getComputedStyle(i),_=u.transform;if(_){let g,w,M,R,E;if(_.startsWith("matrix3d("))g=_.slice(9,-1).split(/, /),w=+g[0],M=+g[5],R=+g[12],E=+g[13];else if(_.startsWith("matrix("))g=_.slice(7,-1).split(/, /),w=+g[0],M=+g[3],R=+g[4],E=+g[5];else return new Box(o);const D=u.transformOrigin,B=o.x-R-(1-w)*parseFloat(D),j=o.y-E-(1-M)*parseFloat(D.slice(D.indexOf(" ")+1)),J=w?o.width/w:i.offsetWidth+1,oe=M?o.height/M:i.offsetHeight+1;return new Box({x:B,y:j,width:J,height:oe})}else return new Box(o)}function animate(i,o,u){if(typeof i.animate>"u")return{finished:Promise.resolve()};let _;try{_=i.animate(o,u)}catch{return{finished:Promise.resolve()}}return typeof _.finished>"u"&&(_.finished=new Promise(g=>{_.onfinish=()=>{g(_)}})),_}function consoleWarn(i){}const delta=.20689655172413793,cielabForwardTransform=i=>i>delta**3?Math.cbrt(i):i/(3*delta**2)+4/29,cielabReverseTransform=i=>i>delta?i**3:3*delta**2*(i-4/29);function fromXYZ$1(i){const o=cielabForwardTransform,u=o(i[1]);return[116*u-16,500*(o(i[0]/.95047)-u),200*(u-o(i[2]/1.08883))]}function toXYZ$1(i){const o=cielabReverseTransform,u=(i[0]+16)/116;return[o(u+i[1]/500)*.95047,o(u),o(u-i[2]/200)*1.08883]}const srgbForwardMatrix=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],srgbForwardTransform=i=>i<=.0031308?i*12.92:1.055*i**(1/2.4)-.055,srgbReverseMatrix=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],srgbReverseTransform=i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4;function fromXYZ(i){const o=Array(3),u=srgbForwardTransform,_=srgbForwardMatrix;for(let g=0;g<3;++g)o[g]=Math.round(clamp(u(_[g][0]*i[0]+_[g][1]*i[1]+_[g][2]*i[2]))*255);return{r:o[0],g:o[1],b:o[2]}}function toXYZ(i){let{r:o,g:u,b:_}=i;const g=[0,0,0],w=srgbReverseTransform,M=srgbReverseMatrix;o=w(o/255),u=w(u/255),_=w(_/255);for(let R=0;R<3;++R)g[R]=M[R][0]*o+M[R][1]*u+M[R][2]*_;return g}function isCssColor(i){return!!i&&/^(#|var\(--|(rgb|hsl)a?\()/.test(i)}const cssColorRe=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,mappers={rgb:(i,o,u,_)=>({r:i,g:o,b:u,a:_}),rgba:(i,o,u,_)=>({r:i,g:o,b:u,a:_}),hsl:(i,o,u,_)=>HSLtoRGB({h:i,s:o,l:u,a:_}),hsla:(i,o,u,_)=>HSLtoRGB({h:i,s:o,l:u,a:_}),hsv:(i,o,u,_)=>HSVtoRGB({h:i,s:o,v:u,a:_}),hsva:(i,o,u,_)=>HSVtoRGB({h:i,s:o,v:u,a:_})};function parseColor(i){if(typeof i=="number")return{r:(i&16711680)>>16,g:(i&65280)>>8,b:i&255};if(typeof i=="string"&&cssColorRe.test(i)){const{groups:o}=i.match(cssColorRe),{fn:u,values:_}=o,g=_.split(/,\s*/).map(w=>w.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(u)?parseFloat(w)/100:parseFloat(w));return mappers[u](...g)}else if(typeof i=="string"){let o=i.startsWith("#")?i.slice(1):i;return[3,4].includes(o.length)?o=o.split("").map(u=>u+u).join(""):[6,8].includes(o.length),HexToRGB(o)}else if(typeof i=="object"){if(has(i,["r","g","b"]))return i;if(has(i,["h","s","l"]))return HSVtoRGB(HSLtoHSV(i));if(has(i,["h","s","v"]))return HSVtoRGB(i)}throw new TypeError(`Invalid color: ${i==null?i:String(i)||i.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function HSVtoRGB(i){const{h:o,s:u,v:_,a:g}=i,w=R=>{const E=(R+o/60)%6;return _-_*u*Math.max(Math.min(E,4-E,1),0)},M=[w(5),w(3),w(1)].map(R=>Math.round(R*255));return{r:M[0],g:M[1],b:M[2],a:g}}function HSLtoRGB(i){return HSVtoRGB(HSLtoHSV(i))}function HSLtoHSV(i){const{h:o,s:u,l:_,a:g}=i,w=_+u*Math.min(_,1-_),M=w===0?0:2-2*_/w;return{h:o,s:M,v:w,a:g}}function toHex(i){const o=Math.round(i).toString(16);return("00".substr(0,2-o.length)+o).toUpperCase()}function RGBtoHex(i){let{r:o,g:u,b:_,a:g}=i;return`#${[toHex(o),toHex(u),toHex(_),g!==void 0?toHex(Math.round(g*255)):""].join("")}`}function HexToRGB(i){i=parseHex(i);let[o,u,_,g]=chunk(i,2).map(w=>parseInt(w,16));return g=g===void 0?g:g/255,{r:o,g:u,b:_,a:g}}function parseHex(i){return i.startsWith("#")&&(i=i.slice(1)),i=i.replace(/([^0-9a-f])/gi,"F"),(i.length===3||i.length===4)&&(i=i.split("").map(o=>o+o).join("")),i.length!==6&&(i=padEnd(padEnd(i,6),8,"F")),i}function lighten(i,o){const u=fromXYZ$1(toXYZ(i));return u[0]=u[0]+o*10,fromXYZ(toXYZ$1(u))}function darken(i,o){const u=fromXYZ$1(toXYZ(i));return u[0]=u[0]-o*10,fromXYZ(toXYZ$1(u))}function getLuma(i){const o=parseColor(i);return toXYZ(o)[1]}function useToggleScope(i,o){let u;function _(){u=effectScope(),u.run(()=>o.length?o(()=>{u==null||u.stop(),_()}):o())}watch(i,g=>{g&&!u?_():g||(u==null||u.stop(),u=void 0)},{immediate:!0}),onScopeDispose(()=>{u==null||u.stop()})}const DefaultsSymbol=Symbol.for("vuetify:defaults");function createDefaults(i){return ref(i)}function injectDefaults(){const i=inject$1(DefaultsSymbol);if(!i)throw new Error("[Vuetify] Could not find defaults instance");return i}function provideDefaults(i,o){const u=injectDefaults(),_=ref(i),g=computed(()=>{if(unref(o==null?void 0:o.disabled))return u.value;const M=unref(o==null?void 0:o.scoped),R=unref(o==null?void 0:o.reset),E=unref(o==null?void 0:o.root);let D=mergeDeep(_.value,{prev:u.value});if(M)return D;if(R||E){const B=Number(R||1/0);for(let j=0;j<=B&&!(!D||!("prev"in D));j++)D=D.prev;return D&&typeof E=="string"&&E in D&&(D=mergeDeep(mergeDeep(D,{prev:D}),D[E])),D}return D.prev?mergeDeep(D.prev,D):D});return provide(DefaultsSymbol,g),g}function propIsDefined(i,o){var u,_;return typeof((u=i.props)==null?void 0:u[o])<"u"||typeof((_=i.props)==null?void 0:_[toKebabCase(o)])<"u"}function internalUseDefaults(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:injectDefaults();const _=getCurrentInstance("useDefaults");if(o=o??_.type.name??_.type.__name,!o)throw new Error("[Vuetify] Could not determine component name");const g=computed(()=>{var E;return(E=u.value)==null?void 0:E[i._as??o]}),w=new Proxy(i,{get(E,D){var j,J,oe,le;const B=Reflect.get(E,D);return D==="class"||D==="style"?[(j=g.value)==null?void 0:j[D],B].filter(me=>me!=null):typeof D=="string"&&!propIsDefined(_.vnode,D)?((J=g.value)==null?void 0:J[D])??((le=(oe=u.value)==null?void 0:oe.global)==null?void 0:le[D])??B:B}}),M=shallowRef();watchEffect(()=>{if(g.value){const E=Object.entries(g.value).filter(D=>{let[B]=D;return B.startsWith(B[0].toUpperCase())});E.length&&(M.value=Object.fromEntries(E))}});function R(){useToggleScope(M,()=>{var E;provideDefaults(mergeDeep(((E=injectSelf(DefaultsSymbol))==null?void 0:E.value)??{},M.value))})}return{props:w,provideSubDefaults:R}}function defineComponent(i){if(i._setup=i._setup??i.setup,!i.name)return i;if(i._setup){i.props=propsFactory(i.props??{},i.name)();const o=Object.keys(i.props);i.filterProps=function(_){return pick(_,o,["class","style"])},i.props._as=String,i.setup=function(_,g){const w=injectDefaults();if(!w.value)return i._setup(_,g);const{props:M,provideSubDefaults:R}=internalUseDefaults(_,_._as??i.name,w),E=i._setup(M,g);return R(),E}}return i}function genericComponent(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return o=>(i?defineComponent:defineComponent$1)(o)}const standardEasing="cubic-bezier(0.4, 0, 0.2, 1)";function getCurrentInstance(i,o){const u=getCurrentInstance$1();if(!u)throw new Error(`[Vuetify] ${i} ${o||"must be called from inside a setup function"}`);return u}function getCurrentInstanceName(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const o=getCurrentInstance(i).type;return toKebabCase((o==null?void 0:o.aliasName)||(o==null?void 0:o.name))}let _uid=0,_map=new WeakMap;function getUid(){const i=getCurrentInstance("getUid");if(_map.has(i))return _map.get(i);{const o=_uid++;return _map.set(i,o),o}}getUid.reset=()=>{_uid=0,_map=new WeakMap};const IN_BROWSER=typeof window<"u",SUPPORTS_INTERSECTION=IN_BROWSER&&"IntersectionObserver"in window,SUPPORTS_TOUCH=IN_BROWSER&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);IN_BROWSER&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports("selector(:focus-visible)");function injectSelf(i){const{provides:o}=getCurrentInstance("injectSelf");if(o&&i in o)return o[i]}function useRender(i){const o=getCurrentInstance("useRender");o.render=i}function useResizeObserver(i){const o=ref(),u=ref();if(IN_BROWSER){const _=new ResizeObserver(g=>{i==null||i(g,_),g.length&&(u.value=g[0].contentRect)});onBeforeUnmount(()=>{_.disconnect()}),watch(o,(g,w)=>{w&&(_.unobserve(refElement(w)),u.value=void 0),g&&_.observe(refElement(g))},{flush:"post"})}return{resizeRef:o,contentRect:readonly(u)}}const VuetifyLayoutKey=Symbol.for("vuetify:layout"),VuetifyLayoutItemKey=Symbol.for("vuetify:layout-item"),ROOT_ZINDEX=1e3,makeLayoutProps=propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),generateLayers=(i,o,u,_)=>{let g={top:0,left:0,right:0,bottom:0};const w=[{id:"",layer:{...g}}];for(const M of i){const R=o.get(M),E=u.get(M),D=_.get(M);if(!R||!E||!D)continue;const B={...g,[R.value]:parseInt(g[R.value],10)+(D.value?parseInt(E.value,10):0)};w.push({id:M,layer:B}),g=B}return w};function createLayout(i){const o=inject$1(VuetifyLayoutKey,null),u=computed(()=>o?o.rootZIndex.value-100:ROOT_ZINDEX),_=ref([]),g=reactive(new Map),w=reactive(new Map),M=reactive(new Map),R=reactive(new Map),E=reactive(new Map),{resizeRef:D,contentRect:B}=useResizeObserver(),j=computed(()=>{const Ae=new Map,Ve=i.overlaps??[];for(const ge of Ve.filter(De=>De.includes(":"))){const[De,qe]=ge.split(":");if(!_.value.includes(De)||!_.value.includes(qe))continue;const ot=g.get(De),We=g.get(qe),ct=w.get(De),je=w.get(qe);!ot||!We||!ct||!je||(Ae.set(qe,{position:ot.value,amount:parseInt(ct.value,10)}),Ae.set(De,{position:We.value,amount:-parseInt(je.value,10)}))}return Ae}),J=computed(()=>{const Ae=[...new Set([...M.values()].map(ge=>ge.value))].sort((ge,De)=>ge-De),Ve=[];for(const ge of Ae){const De=_.value.filter(qe=>{var ot;return((ot=M.get(qe))==null?void 0:ot.value)===ge});Ve.push(...De)}return generateLayers(Ve,g,w,R)}),oe=computed(()=>!Array.from(E.values()).some(Ae=>Ae.value)),le=computed(()=>J.value[J.value.length-1].layer),me=computed(()=>({"--v-layout-left":convertToUnit(le.value.left),"--v-layout-right":convertToUnit(le.value.right),"--v-layout-top":convertToUnit(le.value.top),"--v-layout-bottom":convertToUnit(le.value.bottom),...oe.value?void 0:{transition:"none"}})),Be=computed(()=>J.value.slice(1).map((Ae,Ve)=>{let{id:ge}=Ae;const{layer:De}=J.value[Ve],qe=w.get(ge),ot=g.get(ge);return{id:ge,...De,size:Number(qe.value),position:ot.value}})),pe=Ae=>Be.value.find(Ve=>Ve.id===Ae),re=getCurrentInstance("createLayout"),Le=shallowRef(!1);onMounted(()=>{Le.value=!0}),provide(VuetifyLayoutKey,{register:(Ae,Ve)=>{let{id:ge,order:De,position:qe,layoutSize:ot,elementSize:We,active:ct,disableTransitions:je,absolute:ti}=Ve;M.set(ge,De),g.set(ge,qe),w.set(ge,ot),R.set(ge,ct),je&&E.set(ge,je);const Rt=findChildrenWithProvide(VuetifyLayoutItemKey,re==null?void 0:re.vnode).indexOf(Ae);Rt>-1?_.value.splice(Rt,0,ge):_.value.push(ge);const Tt=computed(()=>Be.value.findIndex(Ai=>Ai.id===ge)),ni=computed(()=>u.value+J.value.length*2-Tt.value*2),ai=computed(()=>{const Ai=qe.value==="left"||qe.value==="right",xr=qe.value==="right",_n=qe.value==="bottom",Ur={[qe.value]:0,zIndex:ni.value,transform:`translate${Ai?"X":"Y"}(${(ct.value?0:-110)*(xr||_n?-1:1)}%)`,position:ti.value||u.value!==ROOT_ZINDEX?"absolute":"fixed",...oe.value?void 0:{transition:"none"}};if(!Le.value)return Ur;const $i=Be.value[Tt.value];if(!$i)throw new Error(`[Vuetify] Could not find layout item "${ge}"`);const Vr=j.value.get(ge);return Vr&&($i[Vr.position]+=Vr.amount),{...Ur,height:Ai?`calc(100% - ${$i.top}px - ${$i.bottom}px)`:We.value?`${We.value}px`:void 0,left:xr?void 0:`${$i.left}px`,right:xr?`${$i.right}px`:void 0,top:qe.value!=="bottom"?`${$i.top}px`:void 0,bottom:qe.value!=="top"?`${$i.bottom}px`:void 0,width:Ai?We.value?`${We.value}px`:void 0:`calc(100% - ${$i.left}px - ${$i.right}px)`}}),Zi=computed(()=>({zIndex:ni.value-1}));return{layoutItemStyles:ai,layoutItemScrimStyles:Zi,zIndex:ni}},unregister:Ae=>{M.delete(Ae),g.delete(Ae),w.delete(Ae),R.delete(Ae),E.delete(Ae),_.value=_.value.filter(Ve=>Ve!==Ae)},mainRect:le,mainStyles:me,getLayoutItem:pe,items:Be,layoutRect:B,rootZIndex:u});const he=computed(()=>["v-layout",{"v-layout--full-height":i.fullHeight}]),ke=computed(()=>({zIndex:u.value,position:o?"relative":void 0,overflow:o?"hidden":void 0}));return{layoutClasses:he,layoutStyles:ke,getLayoutItem:pe,items:Be,layoutRect:B,layoutRef:D}}const en={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},defaultRtl={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1};function useProxiedModel(i,o,u){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:j=>j,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:j=>j;const w=getCurrentInstance("useProxiedModel"),M=ref(i[o]!==void 0?i[o]:u),R=toKebabCase(o),D=computed(R!==o?()=>{var j,J,oe,le;return i[o],!!(((j=w.vnode.props)!=null&&j.hasOwnProperty(o)||(J=w.vnode.props)!=null&&J.hasOwnProperty(R))&&((oe=w.vnode.props)!=null&&oe.hasOwnProperty(`onUpdate:${o}`)||(le=w.vnode.props)!=null&&le.hasOwnProperty(`onUpdate:${R}`)))}:()=>{var j,J;return i[o],!!((j=w.vnode.props)!=null&&j.hasOwnProperty(o)&&((J=w.vnode.props)!=null&&J.hasOwnProperty(`onUpdate:${o}`)))});useToggleScope(()=>!D.value,()=>{watch(()=>i[o],j=>{M.value=j})});const B=computed({get(){const j=i[o];return _(D.value?j:M.value)},set(j){const J=g(j),oe=toRaw(D.value?i[o]:M.value);oe===J||_(oe)===j||(M.value=J,w==null||w.emit(`update:${o}`,J))}});return Object.defineProperty(B,"externalValue",{get:()=>D.value?i[o]:M.value}),B}const LANG_PREFIX="$vuetify.",replace=(i,o)=>i.replace(/\{(\d+)\}/g,(u,_)=>String(o[+_])),createTranslateFunction=(i,o,u)=>function(_){for(var g=arguments.length,w=new Array(g>1?g-1:0),M=1;M<g;M++)w[M-1]=arguments[M];if(!_.startsWith(LANG_PREFIX))return replace(_,w);const R=_.replace(LANG_PREFIX,""),E=i.value&&u.value[i.value],D=o.value&&u.value[o.value];let B=getObjectValueByPath(E,R,null);return B||(`${_}${i.value}`,B=getObjectValueByPath(D,R,null)),B||(B=_),typeof B!="string"&&(B=_),replace(B,w)};function createNumberFunction(i,o){return(u,_)=>new Intl.NumberFormat([i.value,o.value],_).format(u)}function useProvided(i,o,u){const _=useProxiedModel(i,o,i[o]??u.value);return _.value=i[o]??u.value,watch(u,g=>{i[o]==null&&(_.value=u.value)}),_}function createProvideFunction(i){return o=>{const u=useProvided(o,"locale",i.current),_=useProvided(o,"fallback",i.fallback),g=useProvided(o,"messages",i.messages);return{name:"vuetify",current:u,fallback:_,messages:g,t:createTranslateFunction(u,_,g),n:createNumberFunction(u,_),provide:createProvideFunction({current:u,fallback:_,messages:g})}}}function createVuetifyAdapter(i){const o=shallowRef((i==null?void 0:i.locale)??"en"),u=shallowRef((i==null?void 0:i.fallback)??"en"),_=ref({en,...i==null?void 0:i.messages});return{name:"vuetify",current:o,fallback:u,messages:_,t:createTranslateFunction(o,u,_),n:createNumberFunction(o,u),provide:createProvideFunction({current:o,fallback:u,messages:_})}}const LocaleSymbol=Symbol.for("vuetify:locale");function isLocaleInstance(i){return i.name!=null}function createLocale(i){const o=i!=null&&i.adapter&&isLocaleInstance(i==null?void 0:i.adapter)?i==null?void 0:i.adapter:createVuetifyAdapter(i),u=createRtl(o,i);return{...o,...u}}function useLocale(){const i=inject$1(LocaleSymbol);if(!i)throw new Error("[Vuetify] Could not find injected locale instance");return i}function createRtl(i,o){const u=ref((o==null?void 0:o.rtl)??defaultRtl),_=computed(()=>u.value[i.current.value]??!1);return{isRtl:_,rtl:u,rtlClasses:computed(()=>`v-locale--is-${_.value?"rtl":"ltr"}`)}}function useRtl(){const i=inject$1(LocaleSymbol);if(!i)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:i.isRtl,rtlClasses:i.rtlClasses}}const mainTRC=2.4,Rco=.2126729,Gco=.7151522,Bco=.072175,normBG=.55,normTXT=.58,revTXT=.57,revBG=.62,blkThrs=.03,blkClmp=1.45,deltaYmin=5e-4,scaleBoW=1.25,scaleWoB=1.25,loConThresh=.078,loConFactor=12.82051282051282,loConOffset=.06,loClip=.001;function APCAcontrast(i,o){const u=(i.r/255)**mainTRC,_=(i.g/255)**mainTRC,g=(i.b/255)**mainTRC,w=(o.r/255)**mainTRC,M=(o.g/255)**mainTRC,R=(o.b/255)**mainTRC;let E=u*Rco+_*Gco+g*Bco,D=w*Rco+M*Gco+R*Bco;if(E<=blkThrs&&(E+=(blkThrs-E)**blkClmp),D<=blkThrs&&(D+=(blkThrs-D)**blkClmp),Math.abs(D-E)<deltaYmin)return 0;let B;if(D>E){const j=(D**normBG-E**normTXT)*scaleBoW;B=j<loClip?0:j<loConThresh?j-j*loConFactor*loConOffset:j-loConOffset}else{const j=(D**revBG-E**revTXT)*scaleWoB;B=j>-loClip?0:j>-loConThresh?j-j*loConFactor*loConOffset:j+loConOffset}return B*100}const ThemeSymbol=Symbol.for("vuetify:theme"),makeThemeProps=propsFactory({theme:String},"theme"),defaultThemeOptions={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function parseThemeOptions(){var u,_;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultThemeOptions;if(!i)return{...defaultThemeOptions,isDisabled:!0};const o={};for(const[g,w]of Object.entries(i.themes??{})){const M=w.dark||g==="dark"?(u=defaultThemeOptions.themes)==null?void 0:u.dark:(_=defaultThemeOptions.themes)==null?void 0:_.light;o[g]=mergeDeep(M,w)}return mergeDeep(defaultThemeOptions,{...i,themes:o})}function createTheme(i){const o=reactive(parseThemeOptions(i)),u=ref(o.defaultTheme),_=ref(o.themes),g=computed(()=>{const B={};for(const[j,J]of Object.entries(_.value)){const oe=B[j]={...J,colors:{...J.colors}};if(o.variations)for(const le of o.variations.colors){const me=oe.colors[le];if(me)for(const Be of["lighten","darken"]){const pe=Be==="lighten"?lighten:darken;for(const re of createRange(o.variations[Be],1))oe.colors[`${le}-${Be}-${re}`]=RGBtoHex(pe(parseColor(me),re))}}for(const le of Object.keys(oe.colors)){if(/^on-[a-z]/.test(le)||oe.colors[`on-${le}`])continue;const me=`on-${le}`,Be=parseColor(oe.colors[le]),pe=Math.abs(APCAcontrast(parseColor(0),Be)),re=Math.abs(APCAcontrast(parseColor(16777215),Be));oe.colors[me]=re>Math.min(pe,50)?"#fff":"#000"}}return B}),w=computed(()=>g.value[u.value]),M=computed(()=>{const B=[];w.value.dark&&createCssClass(B,":root",["color-scheme: dark"]),createCssClass(B,":root",genCssVariables(w.value));for(const[le,me]of Object.entries(g.value))createCssClass(B,`.v-theme--${le}`,[`color-scheme: ${me.dark?"dark":"normal"}`,...genCssVariables(me)]);const j=[],J=[],oe=new Set(Object.values(g.value).flatMap(le=>Object.keys(le.colors)));for(const le of oe)/^on-[a-z]/.test(le)?createCssClass(J,`.${le}`,[`color: rgb(var(--v-theme-${le})) !important`]):(createCssClass(j,`.bg-${le}`,[`--v-theme-overlay-multiplier: var(--v-theme-${le}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${le})) !important`,`color: rgb(var(--v-theme-on-${le})) !important`]),createCssClass(J,`.text-${le}`,[`color: rgb(var(--v-theme-${le})) !important`]),createCssClass(J,`.border-${le}`,[`--v-border-color: var(--v-theme-${le})`]));return B.push(...j,...J),B.map((le,me)=>me===0?le:`    ${le}`).join("")});function R(){return{style:[{children:M.value,id:"vuetify-theme-stylesheet",nonce:o.cspNonce||!1}]}}function E(B){if(o.isDisabled)return;const j=B._context.provides.usehead;if(j)if(j.push){const J=j.push(R);watch(M,()=>{J.patch(R)})}else IN_BROWSER?(j.addHeadObjs(computed(R)),watchEffect(()=>j.updateDOM())):j.addHeadObjs(R());else{let oe=function(){if(typeof document<"u"&&!J){const le=document.createElement("style");le.type="text/css",le.id="vuetify-theme-stylesheet",o.cspNonce&&le.setAttribute("nonce",o.cspNonce),J=le,document.head.appendChild(J)}J&&(J.innerHTML=M.value)},J=IN_BROWSER?document.getElementById("vuetify-theme-stylesheet"):null;watch(M,oe,{immediate:!0})}}const D=computed(()=>o.isDisabled?void 0:`v-theme--${u.value}`);return{install:E,isDisabled:o.isDisabled,name:u,themes:_,current:w,computedThemes:g,themeClasses:D,styles:M,global:{name:u,current:w}}}function provideTheme(i){getCurrentInstance("provideTheme");const o=inject$1(ThemeSymbol,null);if(!o)throw new Error("Could not find Vuetify theme injection");const u=computed(()=>i.theme??(o==null?void 0:o.name.value)),_=computed(()=>o.isDisabled?void 0:`v-theme--${u.value}`),g={...o,name:u,themeClasses:_};return provide(ThemeSymbol,g),g}function createCssClass(i,o,u){i.push(`${o} {
`,...u.map(_=>`  ${_};
`),`}
`)}function genCssVariables(i){const o=i.dark?2:1,u=i.dark?1:2,_=[];for(const[g,w]of Object.entries(i.colors)){const M=parseColor(w);_.push(`--v-theme-${g}: ${M.r},${M.g},${M.b}`),g.startsWith("on-")||_.push(`--v-theme-${g}-overlay-multiplier: ${getLuma(w)>.18?o:u}`)}for(const[g,w]of Object.entries(i.variables)){const M=typeof w=="string"&&w.startsWith("#")?parseColor(w):void 0,R=M?`${M.r}, ${M.g}, ${M.b}`:void 0;_.push(`--v-${g}: ${R??w}`)}return _}const makeVAppProps=propsFactory({...makeComponentProps(),...makeLayoutProps({fullHeight:!0}),...makeThemeProps()},"VApp"),VApp=genericComponent()({name:"VApp",props:makeVAppProps(),setup(i,o){let{slots:u}=o;const _=provideTheme(i),{layoutClasses:g,layoutStyles:w,getLayoutItem:M,items:R,layoutRef:E}=createLayout(i),{rtlClasses:D}=useRtl();return useRender(()=>{var B;return createVNode("div",{ref:E,class:["v-application",_.themeClasses.value,g.value,D.value,i.class],style:[w.value,i.style]},[createVNode("div",{class:"v-application__wrap"},[(B=u.default)==null?void 0:B.call(u)])])}),{getLayoutItem:M,items:R,theme:_}}}),VBtn$1="",VBtnToggle="",VBtnGroup$1="",makeBorderProps=propsFactory({border:[Boolean,Number,String]},"border");function useBorder(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{borderClasses:computed(()=>{const _=isRef(i)?i.value:i.border,g=[];if(_===!0||_==="")g.push(`${o}--border`);else if(typeof _=="string"||_===0)for(const w of String(_).split(" "))g.push(`border-${w}`);return g})}}const allowedDensities=[null,"default","comfortable","compact"],makeDensityProps=propsFactory({density:{type:String,default:"default",validator:i=>allowedDensities.includes(i)}},"density");function useDensity(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{densityClasses:computed(()=>`${o}--density-${i.density}`)}}const makeElevationProps=propsFactory({elevation:{type:[Number,String],validator(i){const o=parseInt(i);return!isNaN(o)&&o>=0&&o<=24}}},"elevation");function useElevation(i){return{elevationClasses:computed(()=>{const u=isRef(i)?i.value:i.elevation,_=[];return u==null||_.push(`elevation-${u}`),_})}}const makeRoundedProps=propsFactory({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function useRounded(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{roundedClasses:computed(()=>{const _=isRef(i)?i.value:i.rounded,g=[];if(_===!0||_==="")g.push(`${o}--rounded`);else if(typeof _=="string"||_===0)for(const w of String(_).split(" "))g.push(`rounded-${w}`);return g})}}const makeTagProps=propsFactory({tag:{type:String,default:"div"}},"tag");function useColor(i){return destructComputed(()=>{const o=[],u={};return i.value.background&&(isCssColor(i.value.background)?u.backgroundColor=i.value.background:o.push(`bg-${i.value.background}`)),i.value.text&&(isCssColor(i.value.text)?(u.color=i.value.text,u.caretColor=i.value.text):o.push(`text-${i.value.text}`)),{colorClasses:o,colorStyles:u}})}function useTextColor(i,o){const u=computed(()=>({text:isRef(i)?i.value:o?i[o]:null})),{colorClasses:_,colorStyles:g}=useColor(u);return{textColorClasses:_,textColorStyles:g}}function useBackgroundColor(i,o){const u=computed(()=>({background:isRef(i)?i.value:o?i[o]:null})),{colorClasses:_,colorStyles:g}=useColor(u);return{backgroundColorClasses:_,backgroundColorStyles:g}}const allowedVariants$1=["elevated","flat","tonal","outlined","text","plain"];function genOverlays(i,o){return createVNode(Fragment,null,[i&&createVNode("span",{key:"overlay",class:`${o}__overlay`},null),createVNode("span",{key:"underlay",class:`${o}__underlay`},null)])}const makeVariantProps=propsFactory({color:String,variant:{type:String,default:"elevated",validator:i=>allowedVariants$1.includes(i)}},"variant");function useVariant(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const u=computed(()=>{const{variant:w}=unref(i);return`${o}--variant-${w}`}),{colorClasses:_,colorStyles:g}=useColor(computed(()=>{const{variant:w,color:M}=unref(i);return{[["elevated","flat"].includes(w)?"background":"text"]:M}}));return{colorClasses:_,colorStyles:g,variantClasses:u}}const makeVBtnGroupProps=propsFactory({divided:Boolean,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps()},"VBtnGroup"),VBtnGroup=genericComponent()({name:"VBtnGroup",props:makeVBtnGroupProps(),setup(i,o){let{slots:u}=o;const{themeClasses:_}=provideTheme(i),{densityClasses:g}=useDensity(i),{borderClasses:w}=useBorder(i),{elevationClasses:M}=useElevation(i),{roundedClasses:R}=useRounded(i);provideDefaults({VBtn:{height:"auto",color:toRef(i,"color"),density:toRef(i,"density"),flat:!0,variant:toRef(i,"variant")}}),useRender(()=>createVNode(i.tag,{class:["v-btn-group",{"v-btn-group--divided":i.divided},_.value,w.value,g.value,M.value,R.value,i.class],style:i.style},u))}}),makeGroupProps=propsFactory({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),makeGroupItemProps=propsFactory({value:null,disabled:Boolean,selectedClass:String},"group-item");function useGroupItem(i,o){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const _=getCurrentInstance("useGroupItem");if(!_)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const g=getUid();provide(Symbol.for(`${o.description}:id`),g);const w=inject$1(o,null);if(!w){if(!u)return w;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${o.description}`)}const M=toRef(i,"value"),R=computed(()=>w.disabled.value||i.disabled);w.register({id:g,value:M,disabled:R},_),onBeforeUnmount(()=>{w.unregister(g)});const E=computed(()=>w.isSelected(g)),D=computed(()=>E.value&&[w.selectedClass.value,i.selectedClass]);return watch(E,B=>{_.emit("group:selected",{value:B})}),{id:g,isSelected:E,toggle:()=>w.select(g,!E.value),select:B=>w.select(g,B),selectedClass:D,value:M,disabled:R,group:w}}function useGroup(i,o){let u=!1;const _=reactive([]),g=useProxiedModel(i,"modelValue",[],J=>J==null?[]:getIds(_,wrapInArray(J)),J=>{const oe=getValues(_,J);return i.multiple?oe:oe[0]}),w=getCurrentInstance("useGroup");function M(J,oe){const le=J,me=Symbol.for(`${o.description}:id`),pe=findChildrenWithProvide(me,w==null?void 0:w.vnode).indexOf(oe);pe>-1?_.splice(pe,0,le):_.push(le)}function R(J){if(u)return;E();const oe=_.findIndex(le=>le.id===J);_.splice(oe,1)}function E(){const J=_.find(oe=>!oe.disabled);J&&i.mandatory==="force"&&!g.value.length&&(g.value=[J.id])}onMounted(()=>{E()}),onBeforeUnmount(()=>{u=!0});function D(J,oe){const le=_.find(me=>me.id===J);if(!(oe&&(le!=null&&le.disabled)))if(i.multiple){const me=g.value.slice(),Be=me.findIndex(re=>re===J),pe=~Be;if(oe=oe??!pe,pe&&i.mandatory&&me.length<=1||!pe&&i.max!=null&&me.length+1>i.max)return;Be<0&&oe?me.push(J):Be>=0&&!oe&&me.splice(Be,1),g.value=me}else{const me=g.value.includes(J);if(i.mandatory&&me)return;g.value=oe??!me?[J]:[]}}function B(J){if(i.multiple,g.value.length){const oe=g.value[0],le=_.findIndex(pe=>pe.id===oe);let me=(le+J)%_.length,Be=_[me];for(;Be.disabled&&me!==le;)me=(me+J)%_.length,Be=_[me];if(Be.disabled)return;g.value=[_[me].id]}else{const oe=_.find(le=>!le.disabled);oe&&(g.value=[oe.id])}}const j={register:M,unregister:R,selected:g,select:D,disabled:toRef(i,"disabled"),prev:()=>B(_.length-1),next:()=>B(1),isSelected:J=>g.value.includes(J),selectedClass:computed(()=>i.selectedClass),items:computed(()=>_),getItemIndex:J=>getItemIndex(_,J)};return provide(o,j),j}function getItemIndex(i,o){const u=getIds(i,[o]);return u.length?i.findIndex(_=>_.id===u[0]):-1}function getIds(i,o){const u=[];return o.forEach(_=>{const g=i.find(M=>deepEqual(_,M.value)),w=i[_];(g==null?void 0:g.value)!=null?u.push(g.id):w!=null&&u.push(w.id)}),u}function getValues(i,o){const u=[];return o.forEach(_=>{const g=i.findIndex(w=>w.id===_);if(~g){const w=i[g];u.push(w.value!=null?w.value:g)}}),u}const VBtnToggleSymbol=Symbol.for("vuetify:v-btn-toggle"),makeVBtnToggleProps=propsFactory({...makeVBtnGroupProps(),...makeGroupProps()},"VBtnToggle");genericComponent()({name:"VBtnToggle",props:makeVBtnToggleProps(),emits:{"update:modelValue":i=>!0},setup(i,o){let{slots:u}=o;const{isSelected:_,next:g,prev:w,select:M,selected:R}=useGroup(i,VBtnToggleSymbol);return useRender(()=>{const[E]=VBtnGroup.filterProps(i);return createVNode(VBtnGroup,mergeProps({class:["v-btn-toggle",i.class]},E,{style:i.style}),{default:()=>{var D;return[(D=u.default)==null?void 0:D.call(u,{isSelected:_,next:g,prev:w,select:M,selected:R})]}})}),{next:g,prev:w,select:M}}});const makeVDefaultsProviderProps=propsFactory({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),VDefaultsProvider=genericComponent(!1)({name:"VDefaultsProvider",props:makeVDefaultsProviderProps(),setup(i,o){let{slots:u}=o;const{defaults:_,disabled:g,reset:w,root:M,scoped:R}=toRefs(i);return provideDefaults(_,{reset:w,root:M,scoped:R,disabled:g}),()=>{var E;return(E=u.default)==null?void 0:E.call(u)}}}),VIcon$1="",aliases={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},mdi={component:i=>h(VClassIcon,{...i,class:"mdi"})},IconValue=[String,Function,Object,Array],IconSymbol=Symbol.for("vuetify:icons"),makeIconProps=propsFactory({icon:{type:IconValue},tag:{type:String,required:!0}},"icon"),VComponentIcon=genericComponent()({name:"VComponentIcon",props:makeIconProps(),setup(i,o){let{slots:u}=o;return()=>{const _=i.icon;return createVNode(i.tag,null,{default:()=>{var g;return[i.icon?createVNode(_,null,null):(g=u.default)==null?void 0:g.call(u)]}})}}}),VSvgIcon=defineComponent({name:"VSvgIcon",inheritAttrs:!1,props:makeIconProps(),setup(i,o){let{attrs:u}=o;return()=>createVNode(i.tag,mergeProps(u,{style:null}),{default:()=>[createVNode("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(i.icon)?i.icon.map(_=>Array.isArray(_)?createVNode("path",{d:_[0],"fill-opacity":_[1]},null):createVNode("path",{d:_},null)):createVNode("path",{d:i.icon},null)])]})}});defineComponent({name:"VLigatureIcon",props:makeIconProps(),setup(i){return()=>createVNode(i.tag,null,{default:()=>[i.icon]})}});const VClassIcon=defineComponent({name:"VClassIcon",props:makeIconProps(),setup(i){return()=>createVNode(i.tag,{class:i.icon},null)}}),defaultSets={svg:{component:VSvgIcon},class:{component:VClassIcon}};function createIcons(i){return mergeDeep({defaultSet:"mdi",sets:{...defaultSets,mdi},aliases:{...aliases,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},i)}const useIcon=i=>{const o=inject$1(IconSymbol);if(!o)throw new Error("Missing Vuetify Icons provide!");return{iconData:computed(()=>{var E;const _=unref(i);if(!_)return{component:VComponentIcon};let g=_;if(typeof g=="string"&&(g=g.trim(),g.startsWith("$")&&(g=(E=o.aliases)==null?void 0:E[g.slice(1)])),!g)throw new Error(`Could not find aliased icon "${_}"`);if(Array.isArray(g))return{component:VSvgIcon,icon:g};if(typeof g!="string")return{component:VComponentIcon,icon:g};const w=Object.keys(o.sets).find(D=>typeof g=="string"&&g.startsWith(`${D}:`)),M=w?g.slice(w.length+1):g;return{component:o.sets[w??o.defaultSet].component,icon:M}})}},predefinedSizes=["x-small","small","default","large","x-large"],makeSizeProps=propsFactory({size:{type:[String,Number],default:"default"}},"size");function useSize(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return destructComputed(()=>{let u,_;return includes(predefinedSizes,i.size)?u=`${o}--size-${i.size}`:i.size&&(_={width:convertToUnit(i.size),height:convertToUnit(i.size)}),{sizeClasses:u,sizeStyles:_}})}const makeVIconProps=propsFactory({color:String,start:Boolean,end:Boolean,icon:IconValue,...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"i"}),...makeThemeProps()},"VIcon"),VIcon=genericComponent()({name:"VIcon",props:makeVIconProps(),setup(i,o){let{attrs:u,slots:_}=o;const g=ref(),{themeClasses:w}=provideTheme(i),{iconData:M}=useIcon(computed(()=>g.value||i.icon)),{sizeClasses:R}=useSize(i),{textColorClasses:E,textColorStyles:D}=useTextColor(toRef(i,"color"));return useRender(()=>{var j,J;const B=(j=_.default)==null?void 0:j.call(_);return B&&(g.value=(J=flattenFragments(B).filter(oe=>oe.type===Text&&oe.children&&typeof oe.children=="string")[0])==null?void 0:J.children),createVNode(M.value.component,{tag:i.tag,icon:M.value.icon,class:["v-icon","notranslate",w.value,R.value,E.value,{"v-icon--clickable":!!u.onClick,"v-icon--start":i.start,"v-icon--end":i.end},i.class],style:[R.value?void 0:{fontSize:convertToUnit(i.size),height:convertToUnit(i.size),width:convertToUnit(i.size)},D.value,i.style],role:u.onClick?"button":void 0,"aria-hidden":!u.onClick},{default:()=>[B]})}),{}}}),VProgressCircular$1="";function useIntersectionObserver(i,o){const u=ref(),_=shallowRef(!1);if(SUPPORTS_INTERSECTION){const g=new IntersectionObserver(w=>{i==null||i(w,g),_.value=!!w.find(M=>M.isIntersecting)},o);onBeforeUnmount(()=>{g.disconnect()}),watch(u,(w,M)=>{M&&(g.unobserve(M),_.value=!1),w&&g.observe(w)},{flush:"post"})}return{intersectionRef:u,isIntersecting:_}}const makeVProgressCircularProps=propsFactory({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"div"}),...makeThemeProps()},"VProgressCircular"),VProgressCircular=genericComponent()({name:"VProgressCircular",props:makeVProgressCircularProps(),setup(i,o){let{slots:u}=o;const _=20,g=2*Math.PI*_,w=ref(),{themeClasses:M}=provideTheme(i),{sizeClasses:R,sizeStyles:E}=useSize(i),{textColorClasses:D,textColorStyles:B}=useTextColor(toRef(i,"color")),{textColorClasses:j,textColorStyles:J}=useTextColor(toRef(i,"bgColor")),{intersectionRef:oe,isIntersecting:le}=useIntersectionObserver(),{resizeRef:me,contentRect:Be}=useResizeObserver(),pe=computed(()=>Math.max(0,Math.min(100,parseFloat(i.modelValue)))),re=computed(()=>Number(i.width)),Le=computed(()=>E.value?Number(i.size):Be.value?Be.value.width:Math.max(re.value,32)),he=computed(()=>_/(1-re.value/Le.value)*2),ke=computed(()=>re.value/Le.value*he.value),Ae=computed(()=>convertToUnit((100-pe.value)/100*g));return watchEffect(()=>{oe.value=w.value,me.value=w.value}),useRender(()=>createVNode(i.tag,{ref:w,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!i.indeterminate,"v-progress-circular--visible":le.value,"v-progress-circular--disable-shrink":i.indeterminate==="disable-shrink"},M.value,R.value,D.value,i.class],style:[E.value,B.value,i.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":i.indeterminate?void 0:pe.value},{default:()=>[createVNode("svg",{style:{transform:`rotate(calc(-90deg + ${Number(i.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${he.value} ${he.value}`},[createVNode("circle",{class:["v-progress-circular__underlay",j.value],style:J.value,fill:"transparent",cx:"50%",cy:"50%",r:_,"stroke-width":ke.value,"stroke-dasharray":g,"stroke-dashoffset":0},null),createVNode("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:_,"stroke-width":ke.value,"stroke-dasharray":g,"stroke-dashoffset":Ae.value},null)]),u.default&&createVNode("div",{class:"v-progress-circular__content"},[u.default({value:pe.value})])]})),{}}}),makeDimensionProps=propsFactory({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function useDimension(i){return{dimensionStyles:computed(()=>({height:convertToUnit(i.height),maxHeight:convertToUnit(i.maxHeight),maxWidth:convertToUnit(i.maxWidth),minHeight:convertToUnit(i.minHeight),minWidth:convertToUnit(i.minWidth),width:convertToUnit(i.width)}))}}const VProgressLinear$1="",oppositeMap={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},makeLocationProps=propsFactory({location:String},"location");function useLocation(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2?arguments[2]:void 0;const{isRtl:_}=useRtl();return{locationStyles:computed(()=>{if(!i.location)return{};const{side:w,align:M}=parseAnchor(i.location.split(" ").length>1?i.location:`${i.location} center`,_.value);function R(D){return u?u(D):0}const E={};return w!=="center"&&(o?E[oppositeMap[w]]=`calc(100% - ${R(w)}px)`:E[w]=0),M!=="center"?o?E[oppositeMap[M]]=`calc(100% - ${R(M)}px)`:E[M]=0:(w==="center"?E.top=E.left="50%":E[{top:"left",bottom:"left",left:"top",right:"top"}[w]]="50%",E.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[w]),E})}}const makeVProgressLinearProps=propsFactory({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...makeComponentProps(),...makeLocationProps({location:"top"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps()},"VProgressLinear"),VProgressLinear=genericComponent()({name:"VProgressLinear",props:makeVProgressLinearProps(),emits:{"update:modelValue":i=>!0},setup(i,o){let{slots:u}=o;const _=useProxiedModel(i,"modelValue"),{isRtl:g,rtlClasses:w}=useRtl(),{themeClasses:M}=provideTheme(i),{locationStyles:R}=useLocation(i),{textColorClasses:E,textColorStyles:D}=useTextColor(i,"color"),{backgroundColorClasses:B,backgroundColorStyles:j}=useBackgroundColor(computed(()=>i.bgColor||i.color)),{backgroundColorClasses:J,backgroundColorStyles:oe}=useBackgroundColor(i,"color"),{roundedClasses:le}=useRounded(i),{intersectionRef:me,isIntersecting:Be}=useIntersectionObserver(),pe=computed(()=>parseInt(i.max,10)),re=computed(()=>parseInt(i.height,10)),Le=computed(()=>parseFloat(i.bufferValue)/pe.value*100),he=computed(()=>parseFloat(_.value)/pe.value*100),ke=computed(()=>g.value!==i.reverse),Ae=computed(()=>i.indeterminate?"fade-transition":"slide-x-transition"),Ve=computed(()=>i.bgOpacity==null?i.bgOpacity:parseFloat(i.bgOpacity));function ge(De){if(!me.value)return;const{left:qe,right:ot,width:We}=me.value.getBoundingClientRect(),ct=ke.value?We-De.clientX+(ot-We):De.clientX-qe;_.value=Math.round(ct/We*pe.value)}return useRender(()=>createVNode(i.tag,{ref:me,class:["v-progress-linear",{"v-progress-linear--absolute":i.absolute,"v-progress-linear--active":i.active&&Be.value,"v-progress-linear--reverse":ke.value,"v-progress-linear--rounded":i.rounded,"v-progress-linear--rounded-bar":i.roundedBar,"v-progress-linear--striped":i.striped},le.value,M.value,w.value,i.class],style:[{bottom:i.location==="bottom"?0:void 0,top:i.location==="top"?0:void 0,height:i.active?convertToUnit(re.value):0,"--v-progress-linear-height":convertToUnit(re.value),...R.value},i.style],role:"progressbar","aria-hidden":i.active?"false":"true","aria-valuemin":"0","aria-valuemax":i.max,"aria-valuenow":i.indeterminate?void 0:he.value,onClick:i.clickable&&ge},{default:()=>[i.stream&&createVNode("div",{key:"stream",class:["v-progress-linear__stream",E.value],style:{...D.value,[ke.value?"left":"right"]:convertToUnit(-re.value),borderTop:`${convertToUnit(re.value/2)} dotted`,opacity:Ve.value,top:`calc(50% - ${convertToUnit(re.value/4)})`,width:convertToUnit(100-Le.value,"%"),"--v-progress-linear-stream-to":convertToUnit(re.value*(ke.value?1:-1))}},null),createVNode("div",{class:["v-progress-linear__background",B.value],style:[j.value,{opacity:Ve.value,width:convertToUnit(i.stream?Le.value:100,"%")}]},null),createVNode(Transition,{name:Ae.value},{default:()=>[i.indeterminate?createVNode("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(De=>createVNode("div",{key:De,class:["v-progress-linear__indeterminate",De,J.value],style:oe.value},null))]):createVNode("div",{class:["v-progress-linear__determinate",J.value],style:[oe.value,{width:convertToUnit(he.value,"%")}]},null)]}),u.default&&createVNode("div",{class:"v-progress-linear__content"},[u.default({value:he.value,buffer:Le.value})])]})),{}}}),makeLoaderProps=propsFactory({loading:[Boolean,String]},"loader");function useLoader(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{loaderClasses:computed(()=>({[`${o}--loading`]:i.loading}))}}function LoaderSlot(i,o){var _;let{slots:u}=o;return createVNode("div",{class:`${i.name}__loader`},[((_=u.default)==null?void 0:_.call(u,{color:i.color,isActive:i.active}))||createVNode(VProgressLinear,{active:i.active,color:i.color,height:"2",indeterminate:!0},null)])}const positionValues=["static","relative","fixed","absolute","sticky"],makePositionProps=propsFactory({position:{type:String,validator:i=>positionValues.includes(i)}},"position");function usePosition(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{positionClasses:computed(()=>i.position?`${o}--${i.position}`:void 0)}}function useLink(i,o){const u=resolveDynamicComponent("RouterLink"),_=computed(()=>!!(i.href||i.to)),g=computed(()=>(_==null?void 0:_.value)||hasEvent(o,"click")||hasEvent(i,"click"));if(typeof u=="string")return{isLink:_,isClickable:g,href:toRef(i,"href")};const w=i.to?u.useLink(i):void 0;return{isLink:_,isClickable:g,route:w==null?void 0:w.route,navigate:w==null?void 0:w.navigate,isActive:w&&computed(()=>{var M,R;return i.exact?(M=w.isExactActive)==null?void 0:M.value:(R=w.isActive)==null?void 0:R.value}),href:computed(()=>i.to?w==null?void 0:w.route.value.href:i.href)}}const makeRouterProps=propsFactory({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");function useSelectLink(i,o){watch(()=>{var u;return(u=i.isActive)==null?void 0:u.value},u=>{i.isLink.value&&u&&o&&nextTick(()=>{o(!0)})},{immediate:!0})}const VRipple="",stopSymbol=Symbol("rippleStop"),DELAY_RIPPLE=80;function transform(i,o){i.style.transform=o,i.style.webkitTransform=o}function isTouchEvent(i){return i.constructor.name==="TouchEvent"}function isKeyboardEvent(i){return i.constructor.name==="KeyboardEvent"}const calculate=function(i,o){var j;let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=0,g=0;if(!isKeyboardEvent(i)){const J=o.getBoundingClientRect(),oe=isTouchEvent(i)?i.touches[i.touches.length-1]:i;_=oe.clientX-J.left,g=oe.clientY-J.top}let w=0,M=.3;(j=o._ripple)!=null&&j.circle?(M=.15,w=o.clientWidth/2,w=u.center?w:w+Math.sqrt((_-w)**2+(g-w)**2)/4):w=Math.sqrt(o.clientWidth**2+o.clientHeight**2)/2;const R=`${(o.clientWidth-w*2)/2}px`,E=`${(o.clientHeight-w*2)/2}px`,D=u.center?R:`${_-w}px`,B=u.center?E:`${g-w}px`;return{radius:w,scale:M,x:D,y:B,centerX:R,centerY:E}},ripples={show(i,o){var oe;let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((oe=o==null?void 0:o._ripple)!=null&&oe.enabled))return;const _=document.createElement("span"),g=document.createElement("span");_.appendChild(g),_.className="v-ripple__container",u.class&&(_.className+=` ${u.class}`);const{radius:w,scale:M,x:R,y:E,centerX:D,centerY:B}=calculate(i,o,u),j=`${w*2}px`;g.className="v-ripple__animation",g.style.width=j,g.style.height=j,o.appendChild(_);const J=window.getComputedStyle(o);J&&J.position==="static"&&(o.style.position="relative",o.dataset.previousPosition="static"),g.classList.add("v-ripple__animation--enter"),g.classList.add("v-ripple__animation--visible"),transform(g,`translate(${R}, ${E}) scale3d(${M},${M},${M})`),g.dataset.activated=String(performance.now()),setTimeout(()=>{g.classList.remove("v-ripple__animation--enter"),g.classList.add("v-ripple__animation--in"),transform(g,`translate(${D}, ${B}) scale3d(1,1,1)`)},0)},hide(i){var w;if(!((w=i==null?void 0:i._ripple)!=null&&w.enabled))return;const o=i.getElementsByClassName("v-ripple__animation");if(o.length===0)return;const u=o[o.length-1];if(u.dataset.isHiding)return;u.dataset.isHiding="true";const _=performance.now()-Number(u.dataset.activated),g=Math.max(250-_,0);setTimeout(()=>{u.classList.remove("v-ripple__animation--in"),u.classList.add("v-ripple__animation--out"),setTimeout(()=>{var R;i.getElementsByClassName("v-ripple__animation").length===1&&i.dataset.previousPosition&&(i.style.position=i.dataset.previousPosition,delete i.dataset.previousPosition),((R=u.parentNode)==null?void 0:R.parentNode)===i&&i.removeChild(u.parentNode)},300)},g)}};function isRippleEnabled(i){return typeof i>"u"||!!i}function rippleShow(i){const o={},u=i.currentTarget;if(!(!(u!=null&&u._ripple)||u._ripple.touched||i[stopSymbol])){if(i[stopSymbol]=!0,isTouchEvent(i))u._ripple.touched=!0,u._ripple.isTouch=!0;else if(u._ripple.isTouch)return;if(o.center=u._ripple.centered||isKeyboardEvent(i),u._ripple.class&&(o.class=u._ripple.class),isTouchEvent(i)){if(u._ripple.showTimerCommit)return;u._ripple.showTimerCommit=()=>{ripples.show(i,u,o)},u._ripple.showTimer=window.setTimeout(()=>{var _;(_=u==null?void 0:u._ripple)!=null&&_.showTimerCommit&&(u._ripple.showTimerCommit(),u._ripple.showTimerCommit=null)},DELAY_RIPPLE)}else ripples.show(i,u,o)}}function rippleStop(i){i[stopSymbol]=!0}function rippleHide(i){const o=i.currentTarget;if(o!=null&&o._ripple){if(window.clearTimeout(o._ripple.showTimer),i.type==="touchend"&&o._ripple.showTimerCommit){o._ripple.showTimerCommit(),o._ripple.showTimerCommit=null,o._ripple.showTimer=window.setTimeout(()=>{rippleHide(i)});return}window.setTimeout(()=>{o._ripple&&(o._ripple.touched=!1)}),ripples.hide(o)}}function rippleCancelShow(i){const o=i.currentTarget;o!=null&&o._ripple&&(o._ripple.showTimerCommit&&(o._ripple.showTimerCommit=null),window.clearTimeout(o._ripple.showTimer))}let keyboardRipple=!1;function keyboardRippleShow(i){!keyboardRipple&&(i.keyCode===keyCodes.enter||i.keyCode===keyCodes.space)&&(keyboardRipple=!0,rippleShow(i))}function keyboardRippleHide(i){keyboardRipple=!1,rippleHide(i)}function focusRippleHide(i){keyboardRipple&&(keyboardRipple=!1,rippleHide(i))}function updateRipple(i,o,u){const{value:_,modifiers:g}=o,w=isRippleEnabled(_);if(w||ripples.hide(i),i._ripple=i._ripple??{},i._ripple.enabled=w,i._ripple.centered=g.center,i._ripple.circle=g.circle,isObject(_)&&_.class&&(i._ripple.class=_.class),w&&!u){if(g.stop){i.addEventListener("touchstart",rippleStop,{passive:!0}),i.addEventListener("mousedown",rippleStop);return}i.addEventListener("touchstart",rippleShow,{passive:!0}),i.addEventListener("touchend",rippleHide,{passive:!0}),i.addEventListener("touchmove",rippleCancelShow,{passive:!0}),i.addEventListener("touchcancel",rippleHide),i.addEventListener("mousedown",rippleShow),i.addEventListener("mouseup",rippleHide),i.addEventListener("mouseleave",rippleHide),i.addEventListener("keydown",keyboardRippleShow),i.addEventListener("keyup",keyboardRippleHide),i.addEventListener("blur",focusRippleHide),i.addEventListener("dragstart",rippleHide,{passive:!0})}else!w&&u&&removeListeners(i)}function removeListeners(i){i.removeEventListener("mousedown",rippleShow),i.removeEventListener("touchstart",rippleShow),i.removeEventListener("touchend",rippleHide),i.removeEventListener("touchmove",rippleCancelShow),i.removeEventListener("touchcancel",rippleHide),i.removeEventListener("mouseup",rippleHide),i.removeEventListener("mouseleave",rippleHide),i.removeEventListener("keydown",keyboardRippleShow),i.removeEventListener("keyup",keyboardRippleHide),i.removeEventListener("dragstart",rippleHide),i.removeEventListener("blur",focusRippleHide)}function mounted$1(i,o){updateRipple(i,o,!1)}function unmounted$1(i){delete i._ripple,removeListeners(i)}function updated(i,o){if(o.value===o.oldValue)return;const u=isRippleEnabled(o.oldValue);updateRipple(i,o,u)}const Ripple={mounted:mounted$1,unmounted:unmounted$1,updated},makeVBtnProps=propsFactory({active:{type:Boolean,default:void 0},symbol:{type:null,default:VBtnToggleSymbol},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:IconValue,appendIcon:IconValue,block:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeGroupItemProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"button"}),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VBtn"),VBtn=genericComponent()({name:"VBtn",directives:{Ripple},props:makeVBtnProps(),emits:{"group:selected":i=>!0},setup(i,o){let{attrs:u,slots:_}=o;const{themeClasses:g}=provideTheme(i),{borderClasses:w}=useBorder(i),{colorClasses:M,colorStyles:R,variantClasses:E}=useVariant(i),{densityClasses:D}=useDensity(i),{dimensionStyles:B}=useDimension(i),{elevationClasses:j}=useElevation(i),{loaderClasses:J}=useLoader(i),{locationStyles:oe}=useLocation(i),{positionClasses:le}=usePosition(i),{roundedClasses:me}=useRounded(i),{sizeClasses:Be,sizeStyles:pe}=useSize(i),re=useGroupItem(i,i.symbol,!1),Le=useLink(i,u),he=computed(()=>{var De;return i.active!==void 0?i.active:Le.isLink.value?(De=Le.isActive)==null?void 0:De.value:re==null?void 0:re.isSelected.value}),ke=computed(()=>(re==null?void 0:re.disabled.value)||i.disabled),Ae=computed(()=>i.variant==="elevated"&&!(i.disabled||i.flat||i.border)),Ve=computed(()=>{if(i.value!==void 0)return Object(i.value)===i.value?JSON.stringify(i.value,null,0):i.value});function ge(De){var qe;ke.value||((qe=Le.navigate)==null||qe.call(Le,De),re==null||re.toggle())}return useSelectLink(Le,re==null?void 0:re.select),useRender(()=>{var je,ti;const De=Le.isLink.value?"a":i.tag,qe=!!(i.prependIcon||_.prepend),ot=!!(i.appendIcon||_.append),We=!!(i.icon&&i.icon!==!0),ct=(re==null?void 0:re.isSelected.value)&&(!Le.isLink.value||((je=Le.isActive)==null?void 0:je.value))||!re||((ti=Le.isActive)==null?void 0:ti.value);return withDirectives(createVNode(De,{type:De==="a"?void 0:"button",class:["v-btn",re==null?void 0:re.selectedClass.value,{"v-btn--active":he.value,"v-btn--block":i.block,"v-btn--disabled":ke.value,"v-btn--elevated":Ae.value,"v-btn--flat":i.flat,"v-btn--icon":!!i.icon,"v-btn--loading":i.loading,"v-btn--stacked":i.stacked},g.value,w.value,ct?M.value:void 0,D.value,j.value,J.value,le.value,me.value,Be.value,E.value,i.class],style:[ct?R.value:void 0,B.value,oe.value,pe.value,i.style],disabled:ke.value||void 0,href:Le.href.value,onClick:ge,value:Ve.value},{default:()=>{var It;return[genOverlays(!0,"v-btn"),!i.icon&&qe&&createVNode("span",{key:"prepend",class:"v-btn__prepend"},[_.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!i.prependIcon,defaults:{VIcon:{icon:i.prependIcon}}},_.prepend):createVNode(VIcon,{key:"prepend-icon",icon:i.prependIcon},null)]),createVNode("span",{class:"v-btn__content","data-no-activator":""},[!_.default&&We?createVNode(VIcon,{key:"content-icon",icon:i.icon},null):createVNode(VDefaultsProvider,{key:"content-defaults",disabled:!We,defaults:{VIcon:{icon:i.icon}}},{default:()=>{var Rt;return[((Rt=_.default)==null?void 0:Rt.call(_))??i.text]}})]),!i.icon&&ot&&createVNode("span",{key:"append",class:"v-btn__append"},[_.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!i.appendIcon,defaults:{VIcon:{icon:i.appendIcon}}},_.append):createVNode(VIcon,{key:"append-icon",icon:i.appendIcon},null)]),!!i.loading&&createVNode("span",{key:"loader",class:"v-btn__loader"},[((It=_.loader)==null?void 0:It.call(_))??createVNode(VProgressCircular,{color:typeof i.loading=="boolean"?void 0:i.loading,indeterminate:!0,size:"23",width:"2"},null)])]}}),[[resolveDirective("ripple"),!ke.value&&i.ripple,null]])}),{}}}),VTextField$1="",VCounter$1="",makeTransitionProps$1=propsFactory({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function createCssTransition(i,o,u){return genericComponent()({name:i,props:makeTransitionProps$1({mode:u,origin:o}),setup(_,g){let{slots:w}=g;const M={onBeforeEnter(R){_.origin&&(R.style.transformOrigin=_.origin)},onLeave(R){if(_.leaveAbsolute){const{offsetTop:E,offsetLeft:D,offsetWidth:B,offsetHeight:j}=R;R._transitionInitialStyles={position:R.style.position,top:R.style.top,left:R.style.left,width:R.style.width,height:R.style.height},R.style.position="absolute",R.style.top=`${E}px`,R.style.left=`${D}px`,R.style.width=`${B}px`,R.style.height=`${j}px`}_.hideOnLeave&&R.style.setProperty("display","none","important")},onAfterLeave(R){if(_.leaveAbsolute&&(R!=null&&R._transitionInitialStyles)){const{position:E,top:D,left:B,width:j,height:J}=R._transitionInitialStyles;delete R._transitionInitialStyles,R.style.position=E||"",R.style.top=D||"",R.style.left=B||"",R.style.width=j||"",R.style.height=J||""}}};return()=>{const R=_.group?TransitionGroup:Transition;return h(R,{name:_.disabled?"":i,css:!_.disabled,..._.group?void 0:{mode:_.mode},..._.disabled?{}:M},w.default)}}})}function createJavascriptTransition(i,o){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return genericComponent()({name:i,props:{mode:{type:String,default:u},disabled:Boolean},setup(_,g){let{slots:w}=g;return()=>h(Transition,{name:_.disabled?"":i,css:!_.disabled,..._.disabled?{}:o},w.default)}})}function ExpandTransitionGenerator(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const u=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",_=camelize(`offset-${u}`);return{onBeforeEnter(M){M._parent=M.parentNode,M._initialStyle={transition:M.style.transition,overflow:M.style.overflow,[u]:M.style[u]}},onEnter(M){const R=M._initialStyle;M.style.setProperty("transition","none","important"),M.style.overflow="hidden";const E=`${M[_]}px`;M.style[u]="0",M.offsetHeight,M.style.transition=R.transition,i&&M._parent&&M._parent.classList.add(i),requestAnimationFrame(()=>{M.style[u]=E})},onAfterEnter:w,onEnterCancelled:w,onLeave(M){M._initialStyle={transition:"",overflow:M.style.overflow,[u]:M.style[u]},M.style.overflow="hidden",M.style[u]=`${M[_]}px`,M.offsetHeight,requestAnimationFrame(()=>M.style[u]="0")},onAfterLeave:g,onLeaveCancelled:g};function g(M){i&&M._parent&&M._parent.classList.remove(i),w(M)}function w(M){const R=M._initialStyle[u];M.style.overflow=M._initialStyle.overflow,R!=null&&(M.style[u]=R),delete M._initialStyle}}createCssTransition("fab-transition","center center","out-in");createCssTransition("dialog-bottom-transition");createCssTransition("dialog-top-transition");createCssTransition("fade-transition");createCssTransition("scale-transition");createCssTransition("scroll-x-transition");createCssTransition("scroll-x-reverse-transition");createCssTransition("scroll-y-transition");createCssTransition("scroll-y-reverse-transition");createCssTransition("slide-x-transition");createCssTransition("slide-x-reverse-transition");const VSlideYTransition=createCssTransition("slide-y-transition");createCssTransition("slide-y-reverse-transition");createJavascriptTransition("expand-transition",ExpandTransitionGenerator());const VExpandXTransition=createJavascriptTransition("expand-x-transition",ExpandTransitionGenerator("",!0)),makeTransitionProps=propsFactory({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:i=>i!==!0}},"transition"),MaybeTransition=(i,o)=>{let{slots:u}=o;const{transition:_,disabled:g,...w}=i,{component:M=Transition,...R}=typeof _=="object"?_:{};return h(M,mergeProps(typeof _=="string"?{name:g?"":_}:R,w,{disabled:g}),u)},makeVCounterProps=propsFactory({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...makeComponentProps(),...makeTransitionProps({transition:{component:VSlideYTransition}})},"VCounter"),VCounter=genericComponent()({name:"VCounter",functional:!0,props:makeVCounterProps(),setup(i,o){let{slots:u}=o;const _=computed(()=>i.max?`${i.value} / ${i.max}`:String(i.value));return useRender(()=>createVNode(MaybeTransition,{transition:i.transition},{default:()=>[withDirectives(createVNode("div",{class:["v-counter",i.class],style:i.style},[u.default?u.default({counter:_.value,max:i.max,value:i.value}):_.value]),[[vShow,i.active]])]})),{}}}),VField$1="",VLabel$1="",makeVLabelProps=propsFactory({text:String,clickable:Boolean,...makeComponentProps(),...makeThemeProps()},"VLabel"),VLabel=genericComponent()({name:"VLabel",props:makeVLabelProps(),setup(i,o){let{slots:u}=o;return useRender(()=>{var _;return createVNode("label",{class:["v-label",{"v-label--clickable":i.clickable},i.class],style:i.style},[i.text,(_=u.default)==null?void 0:_.call(u)])}),{}}}),makeVFieldLabelProps=propsFactory({floating:Boolean,...makeComponentProps()},"VFieldLabel"),VFieldLabel=genericComponent()({name:"VFieldLabel",props:makeVFieldLabelProps(),setup(i,o){let{slots:u}=o;return useRender(()=>createVNode(VLabel,{class:["v-field-label",{"v-field-label--floating":i.floating},i.class],style:i.style,"aria-hidden":i.floating||void 0},u)),{}}});function useInputIcon(i){const{t:o}=useLocale();function u(_){let{name:g}=_;const w={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[g],M=i[`onClick:${g}`],R=M&&w?o(`$vuetify.input.${w}`,i.label??""):void 0;return createVNode(VIcon,{icon:i[`${g}Icon`],"aria-label":R,onClick:M},null)}return{InputIcon:u}}const makeFocusProps=propsFactory({focused:Boolean,"onUpdate:focused":EventProp()},"focus");function useFocus(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const u=useProxiedModel(i,"focused"),_=computed(()=>({[`${o}--focused`]:u.value}));function g(){u.value=!0}function w(){u.value=!1}return{focusClasses:_,isFocused:u,focus:g,blur:w}}const allowedVariants=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],makeVFieldProps=propsFactory({appendInnerIcon:IconValue,bgColor:String,clearable:Boolean,clearIcon:{type:IconValue,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:IconValue,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:i=>allowedVariants.includes(i)},"onClick:clear":EventProp(),"onClick:appendInner":EventProp(),"onClick:prependInner":EventProp(),...makeComponentProps(),...makeLoaderProps(),...makeRoundedProps(),...makeThemeProps()},"VField"),VField=genericComponent()({name:"VField",inheritAttrs:!1,props:{id:String,...makeFocusProps(),...makeVFieldProps()},emits:{"update:focused":i=>!0,"update:modelValue":i=>!0},setup(i,o){let{attrs:u,emit:_,slots:g}=o;const{themeClasses:w}=provideTheme(i),{loaderClasses:M}=useLoader(i),{focusClasses:R,isFocused:E,focus:D,blur:B}=useFocus(i),{InputIcon:j}=useInputIcon(i),{roundedClasses:J}=useRounded(i),{rtlClasses:oe}=useRtl(),le=computed(()=>i.dirty||i.active),me=computed(()=>!i.singleLine&&!!(i.label||g.label)),Be=getUid(),pe=computed(()=>i.id||`input-${Be}`),re=computed(()=>`${pe.value}-messages`),Le=ref(),he=ref(),ke=ref(),Ae=computed(()=>["plain","underlined"].includes(i.variant)),{backgroundColorClasses:Ve,backgroundColorStyles:ge}=useBackgroundColor(toRef(i,"bgColor")),{textColorClasses:De,textColorStyles:qe}=useTextColor(computed(()=>i.error||i.disabled?void 0:le.value&&E.value?i.color:i.baseColor));watch(le,ct=>{if(me.value){const je=Le.value.$el,ti=he.value.$el;requestAnimationFrame(()=>{const It=nullifyTransforms(je),Rt=ti.getBoundingClientRect(),Tt=Rt.x-It.x,ni=Rt.y-It.y-(It.height/2-Rt.height/2),ai=Rt.width/.75,Zi=Math.abs(ai-It.width)>1?{maxWidth:convertToUnit(ai)}:void 0,Ai=getComputedStyle(je),xr=getComputedStyle(ti),_n=parseFloat(Ai.transitionDuration)*1e3||150,Ur=parseFloat(xr.getPropertyValue("--v-field-label-scale")),$i=xr.getPropertyValue("color");je.style.visibility="visible",ti.style.visibility="hidden",animate(je,{transform:`translate(${Tt}px, ${ni}px) scale(${Ur})`,color:$i,...Zi},{duration:_n,easing:standardEasing,direction:ct?"normal":"reverse"}).finished.then(()=>{je.style.removeProperty("visibility"),ti.style.removeProperty("visibility")})})}},{flush:"post"});const ot=computed(()=>({isActive:le,isFocused:E,controlRef:ke,blur:B,focus:D}));function We(ct){ct.target!==document.activeElement&&ct.preventDefault()}return useRender(()=>{var Tt,ni,ai;const ct=i.variant==="outlined",je=g["prepend-inner"]||i.prependInnerIcon,ti=!!(i.clearable||g.clear),It=!!(g["append-inner"]||i.appendInnerIcon||ti),Rt=g.label?g.label({...ot.value,label:i.label,props:{for:pe.value}}):i.label;return createVNode("div",mergeProps({class:["v-field",{"v-field--active":le.value,"v-field--appended":It,"v-field--center-affix":i.centerAffix??!Ae.value,"v-field--disabled":i.disabled,"v-field--dirty":i.dirty,"v-field--error":i.error,"v-field--flat":i.flat,"v-field--has-background":!!i.bgColor,"v-field--persistent-clear":i.persistentClear,"v-field--prepended":je,"v-field--reverse":i.reverse,"v-field--single-line":i.singleLine,"v-field--no-label":!Rt,[`v-field--variant-${i.variant}`]:!0},w.value,Ve.value,R.value,M.value,J.value,oe.value,i.class],style:[ge.value,qe.value,i.style],onClick:We},u),[createVNode("div",{class:"v-field__overlay"},null),createVNode(LoaderSlot,{name:"v-field",active:!!i.loading,color:i.error?"error":i.color},{default:g.loader}),je&&createVNode("div",{key:"prepend",class:"v-field__prepend-inner"},[i.prependInnerIcon&&createVNode(j,{key:"prepend-icon",name:"prependInner"},null),(Tt=g["prepend-inner"])==null?void 0:Tt.call(g,ot.value)]),createVNode("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(i.variant)&&me.value&&createVNode(VFieldLabel,{key:"floating-label",ref:he,class:[De.value],floating:!0,for:pe.value},{default:()=>[Rt]}),createVNode(VFieldLabel,{ref:Le,for:pe.value},{default:()=>[Rt]}),(ni=g.default)==null?void 0:ni.call(g,{...ot.value,props:{id:pe.value,class:"v-field__input","aria-describedby":re.value},focus:D,blur:B})]),ti&&createVNode(VExpandXTransition,{key:"clear"},{default:()=>[withDirectives(createVNode("div",{class:"v-field__clearable",onMousedown:Zi=>{Zi.preventDefault(),Zi.stopPropagation()}},[g.clear?g.clear():createVNode(j,{name:"clear"},null)]),[[vShow,i.dirty]])]}),It&&createVNode("div",{key:"append",class:"v-field__append-inner"},[(ai=g["append-inner"])==null?void 0:ai.call(g,ot.value),i.appendInnerIcon&&createVNode(j,{key:"append-icon",name:"appendInner"},null)]),createVNode("div",{class:["v-field__outline",De.value]},[ct&&createVNode(Fragment,null,[createVNode("div",{class:"v-field__outline__start"},null),me.value&&createVNode("div",{class:"v-field__outline__notch"},[createVNode(VFieldLabel,{ref:he,floating:!0,for:pe.value},{default:()=>[Rt]})]),createVNode("div",{class:"v-field__outline__end"},null)]),Ae.value&&me.value&&createVNode(VFieldLabel,{ref:he,floating:!0,for:pe.value},{default:()=>[Rt]})])])}),{controlRef:ke}}});function filterFieldProps(i){const o=Object.keys(VField.props).filter(u=>!isOn(u)&&u!=="class"&&u!=="style");return pick(i,o)}const VInput$1="",VMessages$1="",makeVMessagesProps=propsFactory({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...makeComponentProps(),...makeTransitionProps({transition:{component:VSlideYTransition,leaveAbsolute:!0,group:!0}})},"VMessages"),VMessages=genericComponent()({name:"VMessages",props:makeVMessagesProps(),setup(i,o){let{slots:u}=o;const _=computed(()=>wrapInArray(i.messages)),{textColorClasses:g,textColorStyles:w}=useTextColor(computed(()=>i.color));return useRender(()=>createVNode(MaybeTransition,{transition:i.transition,tag:"div",class:["v-messages",g.value,i.class],style:[w.value,i.style],role:"alert","aria-live":"polite"},{default:()=>[i.active&&_.value.map((M,R)=>createVNode("div",{class:"v-messages__message",key:`${R}-${_.value}`},[u.message?u.message({message:M}):M]))]})),{}}}),FormKey=Symbol.for("vuetify:form");function useForm(){return inject$1(FormKey,null)}const makeValidationProps=propsFactory({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...makeFocusProps()},"validation");function useValidation(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName(),u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:getUid();const _=useProxiedModel(i,"modelValue"),g=computed(()=>i.validationValue===void 0?_.value:i.validationValue),w=useForm(),M=ref([]),R=shallowRef(!0),E=computed(()=>!!(wrapInArray(_.value===""?null:_.value).length||wrapInArray(g.value===""?null:g.value).length)),D=computed(()=>!!(i.disabled??(w==null?void 0:w.isDisabled.value))),B=computed(()=>!!(i.readonly??(w==null?void 0:w.isReadonly.value))),j=computed(()=>i.errorMessages.length?wrapInArray(i.errorMessages).slice(0,Math.max(0,+i.maxErrors)):M.value),J=computed(()=>{let he=(i.validateOn??(w==null?void 0:w.validateOn.value))||"input";he==="lazy"&&(he="input lazy");const ke=new Set((he==null?void 0:he.split(" "))??[]);return{blur:ke.has("blur")||ke.has("input"),input:ke.has("input"),submit:ke.has("submit"),lazy:ke.has("lazy")}}),oe=computed(()=>i.error||i.errorMessages.length?!1:i.rules.length?R.value?M.value.length||J.value.lazy?null:!0:!M.value.length:!0),le=shallowRef(!1),me=computed(()=>({[`${o}--error`]:oe.value===!1,[`${o}--dirty`]:E.value,[`${o}--disabled`]:D.value,[`${o}--readonly`]:B.value})),Be=computed(()=>i.name??unref(u));onBeforeMount(()=>{w==null||w.register({id:Be.value,validate:Le,reset:pe,resetValidation:re})}),onBeforeUnmount(()=>{w==null||w.unregister(Be.value)}),onMounted(async()=>{J.value.lazy||await Le(!0),w==null||w.update(Be.value,oe.value,j.value)}),useToggleScope(()=>J.value.input,()=>{watch(g,()=>{if(g.value!=null)Le();else if(i.focused){const he=watch(()=>i.focused,ke=>{ke||Le(),he()})}})}),useToggleScope(()=>J.value.blur,()=>{watch(()=>i.focused,he=>{he||Le()})}),watch(oe,()=>{w==null||w.update(Be.value,oe.value,j.value)});function pe(){_.value=null,nextTick(re)}function re(){R.value=!0,J.value.lazy?M.value=[]:Le(!0)}async function Le(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const ke=[];le.value=!0;for(const Ae of i.rules){if(ke.length>=+(i.maxErrors??1))break;const ge=await(typeof Ae=="function"?Ae:()=>Ae)(g.value);if(ge!==!0){if(typeof ge!="string"){console.warn(`${ge} is not a valid value. Rule functions must return boolean true or a string.`);continue}ke.push(ge)}}return M.value=ke,le.value=!1,R.value=he,M.value}return{errorMessages:j,isDirty:E,isDisabled:D,isReadonly:B,isPristine:R,isValid:oe,isValidating:le,reset:pe,resetValidation:re,validate:Le,validationClasses:me}}const makeVInputProps=propsFactory({id:String,appendIcon:IconValue,centerAffix:{type:Boolean,default:!0},prependIcon:IconValue,hideDetails:[Boolean,String],hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:i=>["horizontal","vertical"].includes(i)},"onClick:prepend":EventProp(),"onClick:append":EventProp(),...makeComponentProps(),...makeDensityProps(),...makeValidationProps()},"VInput"),VInput=genericComponent()({name:"VInput",props:{...makeVInputProps()},emits:{"update:modelValue":i=>!0},setup(i,o){let{attrs:u,slots:_,emit:g}=o;const{densityClasses:w}=useDensity(i),{rtlClasses:M}=useRtl(),{InputIcon:R}=useInputIcon(i),E=getUid(),D=computed(()=>i.id||`input-${E}`),B=computed(()=>`${D.value}-messages`),{errorMessages:j,isDirty:J,isDisabled:oe,isReadonly:le,isPristine:me,isValid:Be,isValidating:pe,reset:re,resetValidation:Le,validate:he,validationClasses:ke}=useValidation(i,"v-input",D),Ae=computed(()=>({id:D,messagesId:B,isDirty:J,isDisabled:oe,isReadonly:le,isPristine:me,isValid:Be,isValidating:pe,reset:re,resetValidation:Le,validate:he})),Ve=computed(()=>{var ge;return(ge=i.errorMessages)!=null&&ge.length||!me.value&&j.value.length?j.value:i.hint&&(i.persistentHint||i.focused)?i.hint:i.messages});return useRender(()=>{var We,ct,je,ti;const ge=!!(_.prepend||i.prependIcon),De=!!(_.append||i.appendIcon),qe=Ve.value.length>0,ot=!i.hideDetails||i.hideDetails==="auto"&&(qe||!!_.details);return createVNode("div",{class:["v-input",`v-input--${i.direction}`,{"v-input--center-affix":i.centerAffix},w.value,M.value,ke.value,i.class],style:i.style},[ge&&createVNode("div",{key:"prepend",class:"v-input__prepend"},[(We=_.prepend)==null?void 0:We.call(_,Ae.value),i.prependIcon&&createVNode(R,{key:"prepend-icon",name:"prepend"},null)]),_.default&&createVNode("div",{class:"v-input__control"},[(ct=_.default)==null?void 0:ct.call(_,Ae.value)]),De&&createVNode("div",{key:"append",class:"v-input__append"},[i.appendIcon&&createVNode(R,{key:"append-icon",name:"append"},null),(je=_.append)==null?void 0:je.call(_,Ae.value)]),ot&&createVNode("div",{class:"v-input__details"},[createVNode(VMessages,{id:B.value,active:qe,messages:Ve.value},{message:_.message}),(ti=_.details)==null?void 0:ti.call(_,Ae.value)])])}),{reset:re,resetValidation:Le,validate:he}}}),Refs=Symbol("Forwarded refs");function getDescriptor(i,o){let u=i;for(;u;){const _=Reflect.getOwnPropertyDescriptor(u,o);if(_)return _;u=Object.getPrototypeOf(u)}}function forwardRefs(i){for(var o=arguments.length,u=new Array(o>1?o-1:0),_=1;_<o;_++)u[_-1]=arguments[_];return i[Refs]=u,new Proxy(i,{get(g,w){if(Reflect.has(g,w))return Reflect.get(g,w);if(!(typeof w=="symbol"||w.startsWith("__"))){for(const M of u)if(M.value&&Reflect.has(M.value,w)){const R=Reflect.get(M.value,w);return typeof R=="function"?R.bind(M.value):R}}},has(g,w){if(Reflect.has(g,w))return!0;if(typeof w=="symbol"||w.startsWith("__"))return!1;for(const M of u)if(M.value&&Reflect.has(M.value,w))return!0;return!1},getOwnPropertyDescriptor(g,w){var R;const M=Reflect.getOwnPropertyDescriptor(g,w);if(M)return M;if(!(typeof w=="symbol"||w.startsWith("__"))){for(const E of u){if(!E.value)continue;const D=getDescriptor(E.value,w)??("_"in E.value?getDescriptor((R=E.value._)==null?void 0:R.setupState,w):void 0);if(D)return D}for(const E of u){const D=E.value&&E.value[Refs];if(!D)continue;const B=D.slice();for(;B.length;){const j=B.shift(),J=getDescriptor(j.value,w);if(J)return J;const oe=j.value&&j.value[Refs];oe&&B.push(...oe)}}}}})}function mounted(i,o){if(!SUPPORTS_INTERSECTION)return;const u=o.modifiers||{},_=o.value,{handler:g,options:w}=typeof _=="object"?_:{handler:_,options:{}},M=new IntersectionObserver(function(){var j;let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=arguments.length>1?arguments[1]:void 0;const D=(j=i._observe)==null?void 0:j[o.instance.$.uid];if(!D)return;const B=R.some(J=>J.isIntersecting);g&&(!u.quiet||D.init)&&(!u.once||B||D.init)&&g(B,R,E),B&&u.once?unmounted(i,o):D.init=!0},w);i._observe=Object(i._observe),i._observe[o.instance.$.uid]={init:!1,observer:M},M.observe(i)}function unmounted(i,o){var _;const u=(_=i._observe)==null?void 0:_[o.instance.$.uid];u&&(u.observer.unobserve(i),delete i._observe[o.instance.$.uid])}const Intersect={mounted,unmounted},Intersect$1=Intersect,activeTypes=["color","file","time","date","datetime-local","week","month"],makeVTextFieldProps=propsFactory({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"},modelModifiers:Object,...makeVInputProps(),...makeVFieldProps()},"VTextField"),VTextField=genericComponent()({name:"VTextField",directives:{Intersect:Intersect$1},inheritAttrs:!1,props:makeVTextFieldProps(),emits:{"click:control":i=>!0,"mousedown:control":i=>!0,"update:focused":i=>!0,"update:modelValue":i=>!0},setup(i,o){let{attrs:u,emit:_,slots:g}=o;const w=useProxiedModel(i,"modelValue"),{isFocused:M,focus:R,blur:E}=useFocus(i),D=computed(()=>typeof i.counterValue=="function"?i.counterValue(w.value):(w.value??"").toString().length),B=computed(()=>{if(u.maxlength)return u.maxlength;if(!(!i.counter||typeof i.counter!="number"&&typeof i.counter!="string"))return i.counter}),j=computed(()=>["plain","underlined"].includes(i.variant));function J(Ae,Ve){var ge,De;!i.autofocus||!Ae||(De=(ge=Ve[0].target)==null?void 0:ge.focus)==null||De.call(ge)}const oe=ref(),le=ref(),me=ref(),Be=computed(()=>activeTypes.includes(i.type)||i.persistentPlaceholder||M.value||i.active);function pe(){var Ae;me.value!==document.activeElement&&((Ae=me.value)==null||Ae.focus()),M.value||R()}function re(Ae){_("mousedown:control",Ae),Ae.target!==me.value&&(pe(),Ae.preventDefault())}function Le(Ae){pe(),_("click:control",Ae)}function he(Ae){Ae.stopPropagation(),pe(),nextTick(()=>{w.value=null,callEvent(i["onClick:clear"],Ae)})}function ke(Ae){var ge;const Ve=Ae.target;if(w.value=Ve.value,(ge=i.modelModifiers)!=null&&ge.trim&&["text","search","password","tel","url"].includes(i.type)){const De=[Ve.selectionStart,Ve.selectionEnd];nextTick(()=>{Ve.selectionStart=De[0],Ve.selectionEnd=De[1]})}}return useRender(()=>{const Ae=!!(g.counter||i.counter||i.counterValue),Ve=!!(Ae||g.details),[ge,De]=filterInputAttrs(u),[{modelValue:qe,...ot}]=VInput.filterProps(i),[We]=filterFieldProps(i);return createVNode(VInput,mergeProps({ref:oe,modelValue:w.value,"onUpdate:modelValue":ct=>w.value=ct,class:["v-text-field",{"v-text-field--prefixed":i.prefix,"v-text-field--suffixed":i.suffix,"v-text-field--plain-underlined":["plain","underlined"].includes(i.variant)},i.class],style:i.style},ge,ot,{centerAffix:!j.value,focused:M.value}),{...g,default:ct=>{let{id:je,isDisabled:ti,isDirty:It,isReadonly:Rt,isValid:Tt}=ct;return createVNode(VField,mergeProps({ref:le,onMousedown:re,onClick:Le,"onClick:clear":he,"onClick:prependInner":i["onClick:prependInner"],"onClick:appendInner":i["onClick:appendInner"],role:"textbox"},We,{id:je.value,active:Be.value||It.value,dirty:It.value||i.dirty,disabled:ti.value,focused:M.value,error:Tt.value===!1}),{...g,default:ni=>{let{props:{class:ai,...Zi}}=ni;const Ai=withDirectives(createVNode("input",mergeProps({ref:me,value:w.value,onInput:ke,autofocus:i.autofocus,readonly:Rt.value,disabled:ti.value,name:i.name,placeholder:i.placeholder,size:1,type:i.type,onFocus:pe,onBlur:E},Zi,De),null),[[resolveDirective("intersect"),{handler:J},null,{once:!0}]]);return createVNode(Fragment,null,[i.prefix&&createVNode("span",{class:"v-text-field__prefix"},[i.prefix]),g.default?createVNode("div",{class:ai,"data-no-activator":""},[g.default(),Ai]):cloneVNode(Ai,{class:ai}),i.suffix&&createVNode("span",{class:"v-text-field__suffix"},[i.suffix])])}})},details:Ve?ct=>{var je;return createVNode(Fragment,null,[(je=g.details)==null?void 0:je.call(g,ct),Ae&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(VCounter,{active:i.persistentCounter||M.value,value:D.value,max:B.value},g.counter)])])}:void 0})}),forwardRefs({},oe,le,me)}}),_hoisted_1=createBaseVNode("h1",{class:"align-center"}," View your image in WorldWide Telescope ",-1),_hoisted_2={class:"my-grid"},_hoisted_3={class:"g1"},_hoisted_4={class:"g2"},_hoisted_5=createBaseVNode("div",{class:"g3"},[createBaseVNode("div",{id:"forLink"})],-1),_hoisted_6={class:"g4 wwt-div"};function _sfc_render(i,o,u,_,g,w){const M=resolveComponent("WorldWideTelescope");return openBlock(),createBlock(VApp,{"wwt-namespace":i.wwtNamespace},{default:withCtx(()=>[_hoisted_1,createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createVNode(VTextField,{label:"Image URL",modelValue:i.imageURL,"onUpdate:modelValue":o[0]||(o[0]=R=>i.imageURL=R),hint:"Enter the URL of your image here","persistent-hint":""},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_4,[createVNode(VBtn,{variant:"flat",color:"primary",onClick:o[1]||(o[1]=R=>(console.log("hello"),i.submitData(i.imageURL)))},{default:withCtx(()=>[createTextVNode(" Submit URL ")]),_:1})]),_hoisted_5,createBaseVNode("div",_hoisted_6,[createVNode(M,{"wwt-namespace":i.wwtNamespace},null,8,["wwt-namespace"])])])]),_:1},8,["wwt-namespace"])}const App=_export_sfc(_sfc_main,[["render",_sfc_render]]);async function loadFonts(){(await __vitePreload(()=>import("./webfontloader-4c17aece.js").then(o=>o.w),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const materialdesignicons="",main="",DisplaySymbol=Symbol.for("vuetify:display"),defaultDisplayOptions={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},parseDisplayOptions=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDisplayOptions;return mergeDeep(defaultDisplayOptions,i)};function getClientWidth(i){return IN_BROWSER&&!i?window.innerWidth:typeof i=="object"&&i.clientWidth||0}function getClientHeight(i){return IN_BROWSER&&!i?window.innerHeight:typeof i=="object"&&i.clientHeight||0}function getPlatform(i){const o=IN_BROWSER&&!i?window.navigator.userAgent:"ssr";function u(le){return!!o.match(le)}const _=u(/android/i),g=u(/iphone|ipad|ipod/i),w=u(/cordova/i),M=u(/electron/i),R=u(/chrome/i),E=u(/edge/i),D=u(/firefox/i),B=u(/opera/i),j=u(/win/i),J=u(/mac/i),oe=u(/linux/i);return{android:_,ios:g,cordova:w,electron:M,chrome:R,edge:E,firefox:D,opera:B,win:j,mac:J,linux:oe,touch:SUPPORTS_TOUCH,ssr:o==="ssr"}}function createDisplay(i,o){const{thresholds:u,mobileBreakpoint:_}=parseDisplayOptions(i),g=shallowRef(getClientHeight(o)),w=shallowRef(getPlatform(o)),M=reactive({}),R=shallowRef(getClientWidth(o));function E(){g.value=getClientHeight(),R.value=getClientWidth()}function D(){E(),w.value=getPlatform()}return watchEffect(()=>{const B=R.value<u.sm,j=R.value<u.md&&!B,J=R.value<u.lg&&!(j||B),oe=R.value<u.xl&&!(J||j||B),le=R.value<u.xxl&&!(oe||J||j||B),me=R.value>=u.xxl,Be=B?"xs":j?"sm":J?"md":oe?"lg":le?"xl":"xxl",pe=typeof _=="number"?_:u[_],re=R.value<pe;M.xs=B,M.sm=j,M.md=J,M.lg=oe,M.xl=le,M.xxl=me,M.smAndUp=!B,M.mdAndUp=!(B||j),M.lgAndUp=!(B||j||J),M.xlAndUp=!(B||j||J||oe),M.smAndDown=!(J||oe||le||me),M.mdAndDown=!(oe||le||me),M.lgAndDown=!(le||me),M.xlAndDown=!me,M.name=Be,M.height=g.value,M.width=R.value,M.mobile=re,M.mobileBreakpoint=_,M.platform=w.value,M.thresholds=u}),IN_BROWSER&&window.addEventListener("resize",E,{passive:!0}),{...toRefs(M),update:D,ssr:!!o}}function getWeekArray(i){let o=[];const u=[],_=startOfMonth(i),g=endOfMonth(i);for(let w=0;w<_.getDay();w++)o.push(null);for(let w=1;w<=g.getDate();w++){const M=new Date(i.getFullYear(),i.getMonth(),w);o.push(M),o.length===7&&(u.push(o),o=[])}for(let w=o.length;w<7;w++)o.push(null);return u.push(o),u}function startOfMonth(i){return new Date(i.getFullYear(),i.getMonth(),1)}function endOfMonth(i){return new Date(i.getFullYear(),i.getMonth()+1,0)}function date(i){if(i==null)return null;if(i instanceof Date)return i;if(typeof i=="string"){const o=Date.parse(i);if(!isNaN(o))return new Date(o)}return null}const firstDay={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:0,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:0,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0},sundayJanuarySecond2000=new Date(2e3,0,2);function getWeekdays(i){const o=firstDay[i.slice(-2).toUpperCase()];return createRange(7).map(u=>{const _=new Date(sundayJanuarySecond2000);return _.setDate(sundayJanuarySecond2000.getDate()+o+u),new Intl.DateTimeFormat(i,{weekday:"long"}).format(_)})}function format(i,o,u){const _=new Date(i);let g={};switch(o){case"fullDateWithWeekday":g={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":g={weekday:"short",day:"numeric",month:"short",year:"numeric"};break;case"keyboardDate":g={};break;case"monthAndDate":g={month:"long",day:"numeric"};break;case"monthAndYear":g={month:"long",year:"numeric"};break;default:g={timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(u,g).format(_)}function addDays(i,o){const u=new Date(i);return u.setDate(u.getDate()+o),u}function addMonths(i,o){const u=new Date(i);return u.setMonth(u.getMonth()+o),u}function getYear(i){return i.getFullYear()}function getMonth(i){return i.getMonth()}function startOfYear(i){return new Date(i.getFullYear(),0,1)}function endOfYear(i){return new Date(i.getFullYear(),11,31)}function getMondayOfFirstWeekOfYear(i){return new Date(i,0,1)}function getWeek(i){let o=i.getFullYear(),u=getMondayOfFirstWeekOfYear(o);if(i<u)o=o-1,u=getMondayOfFirstWeekOfYear(o);else{const w=getMondayOfFirstWeekOfYear(o+1);i>=w&&(o=o+1,u=w)}const _=Math.abs(i.getTime()-u.getTime()),g=Math.ceil(_/(1e3*60*60*24));return Math.floor(g/7)+1}function isWithinRange(i,o){return isAfter(i,o[0])&&isBefore(i,o[1])}function isValid(i){const o=new Date(i);return o instanceof Date&&!isNaN(o.getTime())}function isAfter(i,o){return i.getTime()>o.getTime()}function isBefore(i,o){return i.getTime()<o.getTime()}function isEqual(i,o){return i.getTime()===o.getTime()}function isSameDay(i,o){return i.getDate()===o.getDate()&&i.getMonth()===o.getMonth()&&i.getFullYear()===o.getFullYear()}function isSameMonth(i,o){return i.getMonth()===o.getMonth()&&i.getFullYear()===o.getFullYear()}function getDiff(i,o,u){const _=new Date(i),g=new Date(o);return u==="month"?_.getMonth()-g.getMonth()+(_.getFullYear()-g.getFullYear())*12:Math.floor((_.getTime()-g.getTime())/(1e3*60*60*24))}function setYear(i,o){const u=new Date(i);return u.setFullYear(o),u}class VuetifyDateAdapter{constructor(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en";this.locale=o}date(o){return date(o)}addDays(o,u){return addDays(o,u)}addMonths(o,u){return addMonths(o,u)}getWeekArray(o){return getWeekArray(o)}startOfMonth(o){return startOfMonth(o)}endOfMonth(o){return endOfMonth(o)}format(o,u){return format(o,u,this.locale)}isEqual(o,u){return isEqual(o,u)}isValid(o){return isValid(o)}isWithinRange(o,u){return isWithinRange(o,u)}isAfter(o,u){return isAfter(o,u)}isSameDay(o,u){return isSameDay(o,u)}isSameMonth(o,u){return isSameMonth(o,u)}setYear(o,u){return setYear(o,u)}getDiff(o,u,_){return getDiff(o,u,_)}getWeek(o){return getWeek(o)}getWeekdays(){return getWeekdays(this.locale)}getYear(o){return getYear(o)}getMonth(o){return getMonth(o)}startOfYear(o){return startOfYear(o)}endOfYear(o){return endOfYear(o)}}const DateAdapterSymbol=Symbol.for("vuetify:date-adapter");function createDate(i){return i??{adapter:VuetifyDateAdapter}}function createVuetify(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:o,...u}=i,_=mergeDeep(o,u),{aliases:g={},components:w={},directives:M={}}=_,R=createDefaults(_.defaults),E=createDisplay(_.display,_.ssr),D=createTheme(_.theme),B=createIcons(_.icons),j=createLocale(_.locale),J=createDate(_.date);return{install:le=>{for(const me in M)le.directive(me,M[me]);for(const me in w)le.component(me,w[me]);for(const me in g)le.component(me,defineComponent({...g[me],name:me,aliasName:g[me].name}));if(D.install(le),le.provide(DefaultsSymbol,R),le.provide(DisplaySymbol,E),le.provide(ThemeSymbol,D),le.provide(IconSymbol,B),le.provide(LocaleSymbol,j),le.provide(DateAdapterSymbol,J),IN_BROWSER&&_.ssr)if(le.$nuxt)le.$nuxt.hook("app:suspense:resolve",()=>{E.update()});else{const{mount:me}=le;le.mount=function(){const Be=me(...arguments);return nextTick(()=>E.update()),le.mount=me,Be}}getUid.reset(),le.mixin({computed:{$vuetify(){return reactive({defaults:inject.call(this,DefaultsSymbol),display:inject.call(this,DisplaySymbol),theme:inject.call(this,ThemeSymbol),icons:inject.call(this,IconSymbol),locale:inject.call(this,LocaleSymbol),date:inject.call(this,DateAdapterSymbol)})}}})},defaults:R,display:E,theme:D,icons:B,locale:j,date:J}}const version="3.3.3";createVuetify.version=version;function inject(i){var _,g;const o=this.$,u=((_=o.parent)==null?void 0:_.provides)??((g=o.vnode.appContext)==null?void 0:g.provides);if(u&&i in u)return u[i]}const vuetify=createVuetify({defaults:{global:{},VBtn:{style:"text-transform: none;"}},theme:{themes:{light:{colors:{background:"#ffffff",primary:"#4A04BC",secondary:"#44BAAA",accent:"#7D6697"}}}}});function registerPlugins(i){loadFonts(),i.use(vuetify)}const app=createApp(App);app.use(index_umdExports.wwtPinia);app.component("WorldWideTelescope",index_umdExports.WWTComponent);registerPlugins(app);app.mount("#app");export{getDefaultExportFromCjs as g};
